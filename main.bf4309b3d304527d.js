(self.webpackChunksitmah=self.webpackChunksitmah||[]).push([[179],{873:(Mx,um,Sf)=>{"use strict";function $r(e){return"function"==typeof e}function c0(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const kx=c0(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function _(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Et{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if($r(r))try{r()}catch(s){n=s instanceof kx?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{lr(s)}catch(a){n=n??[],a instanceof kx?n=[...n,...a.errors]:n.push(a)}}if(n)throw new kx(n)}}add(n){var t;if(n&&n!==this)if(this.closed)lr(n);else{if(n instanceof Et){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&_(t,n)}remove(n){const{_finalizers:t}=this;t&&_(t,n),n instanceof Et&&n._removeParent(this)}}Et.EMPTY=(()=>{const e=new Et;return e.closed=!0,e})();const ql=Et.EMPTY;function Ya(e){return e instanceof Et||e&&"closed"in e&&$r(e.remove)&&$r(e.add)&&$r(e.unsubscribe)}function lr(e){$r(e)?e():e.unsubscribe()}const Qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ls={setTimeout(e,n,...t){const{delegate:r}=Ls;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Ls;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Eo(e){Ls.setTimeout(()=>{const{onUnhandledError:n}=Qn;if(!n)throw e;n(e)})}function ka(){}const Df=pu("C",void 0,void 0);function pu(e,n,t){return{kind:e,value:n,error:t}}let qa=null;function Xt(e){if(Qn.useDeprecatedSynchronousErrorHandling){const n=!qa;if(n&&(qa={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=qa;if(qa=null,t)throw r}}else e()}class ph extends Et{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Ya(n)&&n.add(this)):this.destination=dr}static create(n,t,r){return new Dc(n,t,r)}next(n){this.isStopped?Af(function bl(e){return pu("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Af(function Mf(e){return pu("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Af(Df,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mh=Function.prototype.bind;function Cr(e,n){return mh.call(e,n)}class Hs{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){gh(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){gh(r)}else gh(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){gh(t)}}}class Dc extends ph{constructor(n,t,r){let i;if(super(),$r(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qn.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Cr(n.next,s),error:n.error&&Cr(n.error,s),complete:n.complete&&Cr(n.complete,s)}):i=n}this.destination=new Hs(i)}}function gh(e){Qn.useDeprecatedSynchronousErrorHandling?function wl(e){Qn.useDeprecatedSynchronousErrorHandling&&qa&&(qa.errorThrown=!0,qa.error=e)}(e):Eo(e)}function Af(e,n){const{onStoppedNotification:t}=Qn;t&&Ls.setTimeout(()=>t(e,n))}const dr={closed:!0,next:ka,error:function kf(e){throw e},complete:ka},mu="function"==typeof Symbol&&Symbol.observable||"@@observable";function ha(e){return e}function Mc(e){return 0===e.length?ha:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let er=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Xl(e){return e&&e instanceof ph||function rd(e){return e&&$r(e.next)&&$r(e.error)&&$r(e.complete)}(e)&&Ya(e)}(t)?t:new Dc(t,r,i);return Xt(()=>{const{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=kc(r))((i,s)=>{const a=new Dc({next:l=>{try{t(l)}catch(d){s(d),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[mu](){return this}pipe(...t){return Mc(t)(this)}toPromise(t){return new(t=kc(t))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return e.create=n=>new e(n),e})();function kc(e){var n;return null!==(n=e??Qn.Promise)&&void 0!==n?n:Promise}const Zl=c0(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let qi=(()=>{class e extends er{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Ac(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Zl}next(t){Xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Xt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ql:(this.currentObservers=null,s.push(t),new Et(()=>{this.currentObservers=null,_(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new er;return t.source=this,t}}return e.create=(n,t)=>new Ac(n,t),e})();class Ac extends qi{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:ql}}function Cl(e){return $r(e?.lift)}function yi(e){return n=>{if(Cl(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ki(e,n,t,r,i){return new Aa(e,n,t,r,i)}class Aa extends ph{constructor(n,t,r,i,s,a){super(n),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(d){n.error(d)}}:super._next,this._error=i?function(l){try{i(l)}catch(d){n.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function jn(e,n){return yi((t,r)=>{let i=0;t.subscribe(ki(r,s=>{r.next(e.call(n,s,i++))}))})}function Tl(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}function El(e){return this instanceof El?(this.v=e,this):new El(e)}function Ff(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function Ic(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=e[s]&&function(a){return new Promise(function(l,d){!function i(s,a,l,d){Promise.resolve(d).then(function(m){s({value:m,done:l})},a)}(l,d,(a=e[s](a)).done,a.value)})}}}const hd=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Nf(e){return $r(e?.then)}function yh(e){return $r(e[mu])}function vu(e){return Symbol.asyncIterator&&$r(e?.[Symbol.asyncIterator])}function da(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bf=function xu(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function bu(e){return $r(e?.[Bf])}function ge(e){return function yu(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(D){r[D]&&(i[D]=function(I){return new Promise(function(F,L){s.push([D,I,F,L])>1||l(D,I)})})}function l(D,I){try{!function d(D){D.value instanceof El?Promise.resolve(D.value.v).then(m,y):T(s[0][2],D)}(r[D](I))}catch(F){T(s[0][3],F)}}function m(D){l("next",D)}function y(D){l("throw",D)}function T(D,I){D(I),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield El(t.read());if(i)return yield El(void 0);yield yield El(r)}}finally{t.releaseLock()}})}function K(e){return $r(e?.getReader)}function te(e){if(e instanceof er)return e;if(null!=e){if(yh(e))return function me(e){return new er(n=>{const t=e[mu]();if($r(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(hd(e))return function Te(e){return new er(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(Nf(e))return function Ve(e){return new er(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Eo)})}(e);if(vu(e))return Xe(e);if(bu(e))return function Ze(e){return new er(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(K(e))return function He(e){return Xe(ge(e))}(e)}throw da(e)}function Xe(e){return new er(n=>{(function nt(e,n){var t,r,i,s;return function Ql(e,n,t,r){return new(t||(t=Promise))(function(s,a){function l(y){try{m(r.next(y))}catch(T){a(T)}}function d(y){try{m(r.throw(y))}catch(T){a(T)}}function m(y){y.done?s(y.value):function i(s){return s instanceof t?s:new t(function(a){a(s)})}(y.value).then(l,d)}m((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ff(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function wt(e,n,t,r=0,i=!1){const s=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Ct(e,n,t=1/0){return $r(n)?Ct((r,i)=>jn((s,a)=>n(r,s,i,a))(te(e(r,i))),t):("number"==typeof n&&(t=n),yi((r,i)=>function sn(e,n,t,r,i,s,a,l){const d=[];let m=0,y=0,T=!1;const D=()=>{T&&!d.length&&!m&&n.complete()},I=L=>m<r?F(L):d.push(L),F=L=>{s&&n.next(L),m++;let B=!1;te(t(L,y++)).subscribe(ki(n,G=>{i?.(G),s?I(G):n.next(G)},()=>{B=!0},void 0,()=>{if(B)try{for(m--;d.length&&m<r;){const G=d.shift();a?wt(n,a,()=>F(G)):F(G)}D()}catch(G){n.error(G)}}))};return e.subscribe(ki(n,I,()=>{T=!0,D()})),()=>{l?.()}}(r,i,e,t)))}function kn(e=1/0){return Ct(ha,e)}const vn=new er(e=>e.complete());function tr(e){return e&&$r(e.schedule)}function Pr(e){return e[e.length-1]}function Ln(e){return $r(Pr(e))?e.pop():void 0}function Br(e){return tr(Pr(e))?e.pop():void 0}function tc(e,n=0){return yi((t,r)=>{t.subscribe(ki(r,i=>wt(r,e,()=>r.next(i),n),()=>wt(r,e,()=>r.complete(),n),i=>wt(r,e,()=>r.error(i),n)))})}function nc(e,n=0){return yi((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function u0(e,n){if(!e)throw new Error("Iterable cannot be null");return new er(t=>{wt(t,n,()=>{const r=e[Symbol.asyncIterator]();wt(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function as(e,n){return n?function dd(e,n){if(null!=e){if(yh(e))return function mt(e,n){return te(e).pipe(nc(n),tc(n))}(e,n);if(hd(e))return function os(e,n){return new er(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(Nf(e))return function Pc(e,n){return te(e).pipe(nc(n),tc(n))}(e,n);if(vu(e))return u0(e,n);if(bu(e))return function wu(e,n){return new er(t=>{let r;return wt(t,n,()=>{r=e[Bf](),wt(t,n,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void t.error(a)}s?t.complete():t.next(i)},0,!0)}),()=>$r(r?.return)&&r.return()})}(e,n);if(K(e))return function rc(e,n){return u0(ge(e),n)}(e,n)}throw da(e)}(e,n):te(e)}function Oc(...e){const n=Br(e),t=function di(e,n){return"number"==typeof Pr(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?te(r[0]):kn(t)(as(r,n)):vn}function fr(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new Dc({next:()=>{r.unsubscribe(),e()}});return te(n(...t)).subscribe(r)}function Sn(e){for(let n in e)if(e[n]===Sn)return n;throw Error("Could not find renamed property on target object.")}function Za(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function ii(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ii).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function ir(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const zf=Sn({__forward_ref__:Sn});function Rr(e){return e.__forward_ref__=Rr,e.toString=function(){return ii(this())},e}function Vn(e){return ro(e)?e():e}function ro(e){return"function"==typeof e&&e.hasOwnProperty(zf)&&e.__forward_ref__===Rr}function fi(e){return e&&!!e.\u0275providers}const io="https://g.co/ng/security#xss";class Mt extends Error{constructor(n,t){super(ic(n,t)),this.code=n}}function ic(e,n){return`NG0${Math.abs(e)}${n?": "+n.trim():""}`}function nr(e){return"string"==typeof e?e:null==e?"":String(e)}function md(e,n){throw new Mt(-201,!1)}function Xo(e,n){null==e&&function zr(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function pn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function si(e){return{providers:e.providers||[],imports:e.imports||[]}}function Hf(e){return vh(e,Zo)||vh(e,f0)}function vh(e,n){return e.hasOwnProperty(n)?e[n]:null}function Lc(e){return e&&(e.hasOwnProperty(xh)||e.hasOwnProperty(Vy))?e[xh]:null}const Zo=Sn({\u0275prov:Sn}),xh=Sn({\u0275inj:Sn}),f0=Sn({ngInjectableDef:Sn}),Vy=Sn({ngInjectorDef:Sn});var Hn=(()=>((Hn=Hn||{})[Hn.Default=0]="Default",Hn[Hn.Host=1]="Host",Hn[Hn.Self=2]="Self",Hn[Hn.SkipSelf=4]="SkipSelf",Hn[Hn.Optional=8]="Optional",Hn))();let vm;function pa(e){const n=vm;return vm=e,n}function bh(e,n,t){const r=Hf(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Hn.Optional?null:void 0!==n?n:void md(ii(e))}const Ai=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Mr={},wh="__NG_DI_FLAG__",_d="ngTempTokenPath",Wf="ngTokenPath",Gf=/\n/gm,xm="\u0275",Yf="__source";let Ch;function Fc(e){const n=Ch;return Ch=e,n}function g0(e,n=Hn.Default){if(void 0===Ch)throw new Mt(-203,!1);return null===Ch?bh(e,void 0,n):Ch.get(e,n&Hn.Optional?null:void 0,n)}function Jt(e,n=Hn.Default){return(function p0(){return vm}()||g0)(Vn(e),n)}function pr(e,n=Hn.Default){return Jt(e,yd(n))}function yd(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Er(e){const n=[];for(let t=0;t<e.length;t++){const r=Vn(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Mt(900,!1);let i,s=Hn.Default;for(let a=0;a<r.length;a++){const l=r[a],d=jy(l);"number"==typeof d?-1===d?i=l.token:s|=d:i=l}n.push(Jt(i,s))}else n.push(Jt(r))}return n}function Rc(e,n){return e[wh]=n,e.prototype[wh]=n,e}function jy(e){return e[wh]}function Sl(e){return{toString:e}.toString()}var Ka=(()=>((Ka=Ka||{})[Ka.OnPush=0]="OnPush",Ka[Ka.Default=1]="Default",Ka))(),Ja=(()=>{return(e=Ja||(Ja={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Ja;var e})();const Nc={},Wr=[],vd=Sn({\u0275cmp:Sn}),xd=Sn({\u0275dir:Sn}),bd=Sn({\u0275pipe:Sn}),y0=Sn({\u0275mod:Sn}),sc=Sn({\u0275fac:Sn}),qf=Sn({__NG_ELEMENT_ID__:Sn});let Xf=0;function bn(e){return Sl(()=>{const n=w0(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ka.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||Ja.Emulated,id:"c"+Xf++,styles:e.styles||Wr,_:null,schemas:e.schemas||null,tView:null};bm(t);const r=e.dependencies;return t.directiveDefs=wm(r,!1),t.pipeDefs=wm(r,!0),t})}function Zf(e){return Xr(e)||Do(e)}function v0(e){return null!==e}function Vr(e){return Sl(()=>({type:e.type,bootstrap:e.bootstrap||Wr,declarations:e.declarations||Wr,imports:e.imports||Wr,exports:e.exports||Wr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function b0(e,n){if(null==e)return Nc;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,n&&(n[i]=s)}return t}function Un(e){return Sl(()=>{const n=w0(e);return bm(n),n})}function so(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Xr(e){return e[vd]||null}function Do(e){return e[xd]||null}function Mo(e){return e[bd]||null}function oo(e,n){const t=e[y0]||null;if(!t&&!0===n)throw new Error(`Type ${ii(e)} does not have '\u0275mod' property.`);return t}function w0(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||Wr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b0(e.inputs,n),outputs:b0(e.outputs)}}function bm(e){e.features?.forEach(n=>n(e))}function wm(e,n){if(!e)return null;const t=n?Mo:Zf;return()=>("function"==typeof e?e():e).map(r=>t(r)).filter(v0)}const Dl=0,Dn=1,Kn=2,Xi=3,Ia=4,Su=5,us=6,wd=7,es=8,Kf=9,Jf=10,yr=11,C0=12,Eh=13,Cm=14,Sh=15,ao=16,Cd=17,Du=18,lo=19,oc=20,Td=21,vi=22,Ml=1,ep=2,vr=7,Dh=8,Ed=9,co=10;function Ko(e){return Array.isArray(e)&&"object"==typeof e[Ml]}function Qa(e){return Array.isArray(e)&&!0===e[Ml]}function Sd(e){return 0!=(4&e.flags)}function Dd(e){return e.componentOffset>-1}function Mh(e){return 1==(1&e.flags)}function ko(e){return!!e.template}function Md(e){return 0!=(256&e[Kn])}function Mu(e,n){return e.hasOwnProperty(sc)?e[sc]:null}class Mm{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ho(){return np}function np(e){return e.type.prototype.ngOnChanges&&(e.setInput=Id),Yy}function Yy(){const e=M0(this),n=e?.current;if(n){const t=e.previous;if(t===Nc)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function Id(e,n,t,r){const i=this.declaredInputs[t],s=M0(e)||function Am(e,n){return e[km]=n}(e,{previous:Nc,current:null}),a=s.current||(s.current={}),l=s.previous,d=l[i];a[i]=new Mm(d&&d.currentValue,n,l===Nc),e[r]=n}ho.ngInherit=!0;const km="__ngSimpleChanges__";function M0(e){return e[km]||null}const ma=function(e,n,t){};function hs(e){for(;Array.isArray(e);)e=e[Dl];return e}function ip(e,n){return hs(n[e])}function Jo(e,n){return hs(n[e.index])}function sp(e,n){return e.data[n]}function ds(e,n){return e[n]}function Pa(e,n){const t=n[e];return Ko(t)?t:t[Dl]}function Pm(e){return 64==(64&e[Kn])}function Ao(e,n){return null==n?null:e[n]}function A0(e){e[Du]=0}function ku(e,n){e[Su]+=n;let t=e,r=e[Xi];for(;null!==r&&(1===n&&1===t[Su]||-1===n&&0===t[Su]);)r[Su]+=n,t=r,r=r[Xi]}const $n={lFrame:H(null),bindingsEnabled:!0};function Pd(){return $n.bindingsEnabled}function Ut(){return $n.lFrame.lView}function Ur(){return $n.lFrame.tView}function mn(e){return $n.lFrame.contextLView=e,e[es]}function gn(e){return $n.lFrame.contextLView=null,e}function fs(){let e=up();for(;null!==e&&64===e.type;)e=e.parent;return e}function up(){return $n.lFrame.currentTNode}function Oa(e,n){const t=$n.lFrame;t.currentTNode=e,t.isParent=n}function Om(){return $n.lFrame.isParent}function Lm(){$n.lFrame.isParent=!1}function Io(){const e=$n.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Ph(){return $n.lFrame.bindingIndex++}function lc(e){const n=$n.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function dp(e,n){const t=$n.lFrame;t.bindingIndex=t.bindingRootIndex=e,h(n)}function h(e){$n.lFrame.currentDirectiveIndex=e}function b(){return $n.lFrame.currentQueryIndex}function C(e){$n.lFrame.currentQueryIndex=e}function S(e){const n=e[Dn];return 2===n.type?n.declTNode:1===n.type?e[us]:null}function O(e,n,t){if(t&Hn.SkipSelf){let i=n,s=e;for(;!(i=i.parent,null!==i||t&Hn.Host||(i=S(s),null===i||(s=s[Sh],10&i.type))););if(null===i)return!1;n=i,e=s}const r=$n.lFrame=z();return r.currentTNode=n,r.lView=e,!0}function R(e){const n=z(),t=e[Dn];$n.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function z(){const e=$n.lFrame,n=null===e?null:e.child;return null===n?H(e):n}function H(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function W(){const e=$n.lFrame;return $n.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const J=W;function re(){const e=W();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function le(){return $n.lFrame.selectedIndex}function de(e){$n.lFrame.selectedIndex=e}function ne(){const e=$n.lFrame;return sp(e.tView,e.selectedIndex)}function Ge(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const s=e.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:d,ngAfterViewChecked:m,ngOnDestroy:y}=s;a&&(e.contentHooks||(e.contentHooks=[])).push(-t,a),l&&((e.contentHooks||(e.contentHooks=[])).push(t,l),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(t,l)),d&&(e.viewHooks||(e.viewHooks=[])).push(-t,d),m&&((e.viewHooks||(e.viewHooks=[])).push(t,m),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(t,m)),null!=y&&(e.destroyHooks||(e.destroyHooks=[])).push(t,y)}}function tt(e,n,t){Ke(e,n,3,t)}function it(e,n,t,r){(3&e[Kn])===t&&Ke(e,n,t,r)}function Ht(e,n){let t=e[Kn];(3&t)===n&&(t&=2047,t+=1,e[Kn]=t)}function Ke(e,n,t,r){const s=r??-1,a=n.length-1;let l=0;for(let d=void 0!==r?65535&e[Du]:0;d<a;d++)if("number"==typeof n[d+1]){if(l=n[d],null!=r&&l>=r)break}else n[d]<0&&(e[Du]+=65536),(l<s||-1==s)&&(Tt(e,t,n,d),e[Du]=(4294901760&e[Du])+d+2),d++}function Tt(e,n,t,r){const i=t[r]<0,s=t[r+1],l=e[i?-t[r]:t[r]];if(i){if(e[Kn]>>11<e[Du]>>16&&(3&e[Kn])===n){e[Kn]+=2048,ma(4,l,s);try{s.call(l)}finally{ma(5,l,s)}}}else{ma(4,l,s);try{s.call(l)}finally{ma(5,l,s)}}}const at=-1;class Ot{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function rn(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],a=t[r++],l=t[r++];e.setAttribute(n,a,l,s)}else{const s=i,a=t[++r];mr(s)?e.setProperty(n,s,a):e.setAttribute(n,s,a),r++}}return r}function Cn(e){return 3===e||4===e||6===e}function mr(e){return 64===e.charCodeAt(0)}function En(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||jr(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function jr(e,n,t,r,i){let s=0,a=e.length;if(-1===n)a=-1;else for(;s<e.length;){const l=e[s++];if("number"==typeof l){if(l===n){a=-1;break}if(l>n){a=s-1;break}}}for(;s<e.length;){const l=e[s];if("number"==typeof l)break;if(l===t){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(e.splice(a,0,n),s=a+1),e.splice(s++,0,t),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function oi(e){return e!==at}function ai(e){return 32767&e}function Wi(e,n){let t=function xi(e){return e>>16}(e),r=n;for(;t>0;)r=r[Sh],t--;return r}let Po=!0;function ga(e){const n=Po;return Po=e,n}const Ii=255,pi=5;let Nr=0;const li={};function mi(e,n){const t=fo(e,n);if(-1!==t)return t;const r=n[Dn];r.firstCreatePass&&(e.injectorIndex=n.length,$s(r.data,e),$s(n,null),$s(r.blueprint,null));const i=cc(e,n),s=e.injectorIndex;if(oi(i)){const a=ai(i),l=Wi(i,n),d=l[Dn].data;for(let m=0;m<8;m++)n[s+m]=l[a+m]|d[a+m]}return n[s+8]=i,s}function $s(e,n){e.push(0,0,0,0,0,0,0,0,n)}function fo(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function cc(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=Bx(i),null===r)return at;if(t++,i=i[Sh],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return at}function Iu(e,n,t){!function Oo(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(qf)&&(r=t[qf]),null==r&&(r=t[qf]=Nr++);const i=r&Ii;n.data[e+(i>>pi)]|=1<<i}(e,n,t)}function Fa(e,n,t){if(t&Hn.Optional||void 0!==e)return e;md()}function uc(e,n,t,r){if(t&Hn.Optional&&void 0===r&&(r=null),!(t&(Hn.Self|Hn.Host))){const i=e[Kf],s=pa(void 0);try{return i?i.get(n,r,t&Hn.Optional):bh(n,r,t&Hn.Optional)}finally{pa(s)}}return Fa(r,0,t)}function Bc(e,n,t,r=Hn.Default,i){if(null!==e){if(1024&n[Kn]){const a=function LC(e,n,t,r,i){let s=e,a=n;for(;null!==s&&null!==a&&1024&a[Kn]&&!(256&a[Kn]);){const l=zc(s,a,t,r|Hn.Self,li);if(l!==li)return l;let d=s.parent;if(!d){const m=a[Td];if(m){const y=m.get(t,li,r);if(y!==li)return y}d=Bx(a),a=a[Sh]}s=d}return i}(e,n,t,r,li);if(a!==li)return a}const s=zc(e,n,t,r,li);if(s!==li)return s}return uc(n,t,r,i)}function zc(e,n,t,r,i){const s=function PC(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(qf)?e[qf]:void 0;return"number"==typeof n?n>=0?n&Ii:OC:n}(t);if("function"==typeof s){if(!O(n,e,r))return r&Hn.Host?Fa(i,0,r):uc(n,t,r,i);try{const a=s(r);if(null!=a||r&Hn.Optional)return a;md()}finally{J()}}else if("number"==typeof s){let a=null,l=fo(e,n),d=at,m=r&Hn.Host?n[ao][us]:null;for((-1===l||r&Hn.SkipSelf)&&(d=-1===l?cc(e,n):n[l+8],d!==at&&Nx(r,!1)?(a=n[Dn],l=ai(d),n=Wi(d,n)):l=-1);-1!==l;){const y=n[Dn];if(Rx(s,l,y.data)){const T=Od(l,n,t,a,r,m);if(T!==li)return T}d=n[l+8],d!==at&&Nx(r,n[Dn].data[l+8]===m)&&Rx(s,l,n)?(a=y,l=ai(d),n=Wi(d,n)):l=-1}}return i}function Od(e,n,t,r,i,s){const a=n[Dn],l=a.data[e+8],y=L0(l,a,t,null==r?Dd(l)&&Po:r!=a&&0!=(3&l.type),i&Hn.Host&&s===l);return null!==y?Oh(n,a,y,l):li}function L0(e,n,t,r,i){const s=e.providerIndexes,a=n.data,l=1048575&s,d=e.directiveStart,y=s>>20,D=i?l+y:e.directiveEnd;for(let I=r?l:l+y;I<D;I++){const F=a[I];if(I<d&&t===F||I>=d&&F.type===t)return I}if(i){const I=a[d];if(I&&ko(I)&&I.type===t)return d}return null}function Oh(e,n,t,r){let i=e[t];const s=n.data;if(function st(e){return e instanceof Ot}(i)){const a=i;a.resolving&&function Vf(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new Mt(-200,`Circular dependency in DI detected for ${e}${t}`)}(function qr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():nr(e)}(s[t]));const l=ga(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?pa(a.injectImpl):null;O(e,r,Hn.Default);try{i=e[t]=a.factory(void 0,s,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Ue(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=n.type.prototype;if(r){const a=np(n);(t.preOrderHooks||(t.preOrderHooks=[])).push(e,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-e,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e,s))}(t,s[t],n)}finally{null!==d&&pa(d),ga(l),a.resolving=!1,J()}}return i}function Rx(e,n,t){return!!(t[n+(e>>pi)]&1<<e)}function Nx(e,n){return!(e&Hn.Self||e&Hn.Host&&n)}class fp{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Bc(this._tNode,this._lView,n,yd(r),t)}}function OC(){return new fp(fs(),Ut())}function po(e){return Sl(()=>{const n=e.prototype.constructor,t=n[sc]||t1(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const s=i[sc]||t1(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function t1(e){return ro(e)?()=>{const n=t1(Vn(e));return n&&n()}:Mu(e)}function Bx(e){const n=e[Dn],t=n.type;return 2===t?n.declTNode:1===t?e[us]:null}const hc="__parameters__";function pp(e,n,t){return Sl(()=>{const r=function F0(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return l.annotation=a,l;function l(d,m,y){const T=d.hasOwnProperty(hc)?d[hc]:Object.defineProperty(d,hc,{value:[]})[hc];for(;T.length<=y;)T.push(null);return(T[y]=T[y]||[]).push(a),d}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class On{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=pn({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function el(e,n){e.forEach(t=>Array.isArray(t)?el(t,n):n(t))}function Rd(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function s1(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function N0(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function ms(e,n,t){let r=Nm(e,n);return r>=0?e[1|r]=t:(r=~r,function NC(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function jx(e,n){const t=Nm(e,n);if(t>=0)return e[1|t]}function Nm(e,n){return function Bn(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const s=r+(i-r>>1),a=e[s<<t];if(n===a)return s<<t;a>n?i=s:r=s+1}return~(i<<t)}(e,n,1)}const jc=Rc(pp("Optional"),8),Bd=Rc(pp("SkipSelf"),4);var Lo=(()=>((Lo=Lo||{})[Lo.Important=1]="Important",Lo[Lo.DashCase=2]="DashCase",Lo))();const p1=new Map;let XM=0;const Ud="__ngContext__";function Rs(e,n){Ko(n)?(e[Ud]=n[oc],function Ou(e){p1.set(e[oc],e)}(n)):e[Ud]=n}let Zx;function vp(e,n){return Zx(e,n)}function Tr(e){const n=e[Xi];return Qa(n)?n[Xi]:n}function gc(e){return il(e[Eh])}function Ol(e){return il(e[Ia])}function il(e){for(;null!==e&&!Qa(e);)e=e[Ia];return e}function gs(e,n,t,r,i){if(null!=r){let s,a=!1;Qa(r)?s=r:Ko(r)&&(a=!0,r=r[Dl]);const l=hs(r);0===e&&null!==t?null==i?tT(n,t,l):$d(n,t,l,i||null,!0):1===e&&null!==t?$d(n,t,l,i||null,!0):2===e?function b1(e,n,t){const r=G0(e,n);r&&function JM(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,l,a):3===e&&n.destroyNode(l),null!=s&&function aT(e,n,t,r,i){const s=t[vr];s!==hs(t)&&gs(n,e,r,s,i);for(let l=co;l<t.length;l++){const d=t[l];Hm(d[Dn],d,e,n,r,s)}}(n,e,s,t,i)}}function jd(e,n,t){return e.createElement(n,t)}function QC(e,n){const t=e[Ed],r=t.indexOf(n),i=n[Xi];512&n[Kn]&&(n[Kn]&=-513,ku(i,-1)),t.splice(r,1)}function $c(e,n){if(e.length<=co)return;const t=co+n,r=e[t];if(r){const i=r[Cd];null!==i&&i!==e&&QC(i,r),n>0&&(e[t-1][Ia]=r[Ia]);const s=s1(e,co+n);!function Jx(e,n){Hm(e,n,n[yr],2,null,null),n[Dl]=null,n[us]=null}(r[Dn],r);const a=s[lo];null!==a&&a.detachView(s[Dn]),r[Xi]=null,r[Ia]=null,r[Kn]&=-65}return r}function Hd(e,n){if(!(128&n[Kn])){const t=n[yr];t.destroyNode&&Hm(e,n,t,3,null,null),function KM(e){let n=e[Eh];if(!n)return jm(e[Dn],e);for(;n;){let t=null;if(Ko(n))t=n[Eh];else{const r=n[co];r&&(t=r)}if(!t){for(;n&&!n[Ia]&&n!==e;)Ko(n)&&jm(n[Dn],n),n=n[Xi];null===n&&(n=e),Ko(n)&&jm(n[Dn],n),t=n&&n[Ia]}n=t}}(n)}}function jm(e,n){if(!(128&n[Kn])){n[Kn]&=-65,n[Kn]|=128,function tb(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Ot)){const s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const l=i[s[a]],d=s[a+1];ma(4,l,d);try{d.call(l)}finally{ma(5,l,d)}}else{ma(4,i,s);try{s.call(i)}finally{ma(5,i,s)}}}}}(e,n),function v1(e,n){const t=e.cleanup,r=n[wd];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?r[i=a]():r[i=-a].unsubscribe(),s+=2}else{const a=r[i=t[s+1]];t[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();n[wd]=null}}(e,n),1===n[Dn].type&&n[yr].destroy();const t=n[Cd];if(null!==t&&Qa(n[Xi])){t!==n[Xi]&&QC(t,n);const r=n[lo];null!==r&&r.detachView(e)}!function $C(e){p1.delete(e[oc])}(n)}}function nb(e,n,t){return function eT(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[Dl];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===Ja.None||s===Ja.Emulated)return null}return Jo(r,t)}}(e,n.parent,t)}function $d(e,n,t,r,i){e.insertBefore(n,t,r,i)}function tT(e,n,t){e.appendChild(n,t)}function x1(e,n,t,r,i){null!==r?$d(e,n,t,r,i):tT(e,n,t)}function G0(e,n){return e.parentNode(n)}function Wd(e,n,t){return iT(e,n,t)}let Gd,ea,Wm,iT=function rb(e,n,t){return 40&e.type?Jo(e,t):null};function q0(e,n,t,r){const i=nb(e,r,n),s=n[yr],l=Wd(r.parent||n[us],r,n);if(null!=i)if(Array.isArray(t))for(let d=0;d<t.length;d++)x1(s,i,t[d],l,!1);else x1(s,i,t,l,!1);void 0!==Gd&&Gd(s,r,n,t,i)}function X0(e,n){if(null!==n){const t=n.type;if(3&t)return Jo(n,e);if(4&t)return ib(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return X0(e,r);{const i=e[n.index];return Qa(i)?ib(-1,i):hs(i)}}if(32&t)return vp(n,e)()||hs(e[n.index]);{const r=sT(e,n);return null!==r?Array.isArray(r)?r[0]:X0(Tr(e[ao]),r):X0(e,n.next)}}return null}function sT(e,n){return null!==n?e[ao][us].projection[n.projection]:null}function ib(e,n){const t=co+e+1;if(t<n.length){const r=n[t],i=r[Dn].firstChild;if(null!==i)return X0(r,i)}return n[vr]}function sb(e,n,t,r,i,s,a){for(;null!=t;){const l=r[t.index],d=t.type;if(a&&0===n&&(l&&Rs(hs(l),r),t.flags|=2),32!=(32&t.flags))if(8&d)sb(e,n,t.child,r,i,s,!1),gs(n,e,i,l,s);else if(32&d){const m=vp(t,r);let y;for(;y=m();)gs(n,e,i,y,s);gs(n,e,i,l,s)}else 16&d?oT(e,n,r,t,i,s):gs(n,e,i,l,s);t=a?t.projectionNext:t.next}}function Hm(e,n,t,r,i,s){sb(t,r,e.firstChild,n,i,s,!1)}function oT(e,n,t,r,i,s){const a=t[ao],d=a[us].projection[r.projection];if(Array.isArray(d))for(let m=0;m<d.length;m++)gs(n,e,i,d[m],s);else sb(e,n,d,a[Xi],i,s,!0)}function w1(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function Fu(e,n,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&rn(e,n,r),null!==i&&w1(e,n,i),null!==s&&function cT(e,n,t){e.setAttribute(n,"style",t)}(e,n,s)}function Yd(e){return function ob(){if(void 0===ea&&(ea=null,Ai.trustedTypes))try{ea=Ai.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ea}()?.createHTML(e)||e}class xp{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${io})`}}class nk extends xp{getTypeName(){return"HTML"}}class rk extends xp{getTypeName(){return"Style"}}class lb extends xp{getTypeName(){return"Script"}}class ik extends xp{getTypeName(){return"URL"}}class Gm extends xp{getTypeName(){return"ResourceURL"}}function Ll(e){return e instanceof xp?e.changingThisBreaksApplicationSecurity:e}function bi(e,n){const t=function C1(e){return e instanceof xp&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${io})`)}return t===n}class K0{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(Yd(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.removeChild(t.firstChild),t)}catch{return null}}}class ub{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=Yd(n),t}}const sk=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function J0(e){return(e=String(e)).match(sk)?e:"unsafe:"+e}function Fl(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Q0(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const S1=Fl("area,br,col,hr,img,wbr"),gT=Fl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),D1=Fl("rp,rt"),fb=Q0(S1,Q0(gT,Fl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Q0(D1,Fl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Q0(D1,gT)),pb=Fl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yT=Q0(pb,Fl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),M1=Fl("script,style,template");class ok{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let t=n.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(n){const t=n.nodeName.toLowerCase();if(!fb.hasOwnProperty(t))return this.sanitizedSomething=!0,!M1.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),a=s.name,l=a.toLowerCase();if(!yT.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let d=s.value;pb[l]&&(d=J0(d)),this.buf.push(" ",a,'="',xT(d),'"')}return this.buf.push(">"),!0}endElement(n){const t=n.nodeName.toLowerCase();fb.hasOwnProperty(t)&&!S1.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(xT(n))}checkClobberedElement(n,t){if(t&&(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return t}}const vT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ym=/([^\#-~ |!])/g;function xT(e){return e.replace(/&/g,"&amp;").replace(vT,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Ym,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let k1;function bT(e,n){let t=null;try{k1=k1||function cb(e){const n=new ub(e);return function hb(){try{return!!(new window.DOMParser).parseFromString(Yd(""),"text/html")}catch{return!1}}()?new K0(n):n}(e);let r=n?String(n):"";t=k1.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=k1.getInertBodyElement(r)}while(r!==s);return Yd((new ok).sanitizeChildren(A1(t)||t))}finally{if(t){const r=A1(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function A1(e){return"content"in e&&function wT(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Gi=(()=>((Gi=Gi||{})[Gi.NONE=0]="NONE",Gi[Gi.HTML=1]="HTML",Gi[Gi.STYLE=2]="STYLE",Gi[Gi.SCRIPT=3]="SCRIPT",Gi[Gi.URL=4]="URL",Gi[Gi.RESOURCE_URL=5]="RESOURCE_URL",Gi))();function Zi(e){const n=function Xm(){const e=Ut();return e&&e[C0]}();return n?n.sanitize(Gi.URL,e)||"":bi(e,"URL")?Ll(e):J0(nr(e))}const O1=new On("ENVIRONMENT_INITIALIZER"),mb=new On("INJECTOR",-1),gb=new On("INJECTOR_DEF_TYPES");class _b{get(n,t=Mr){if(t===Mr){const r=new Error(`NullInjectorError: No provider for ${ii(n)}!`);throw r.name="NullInjectorError",r}return t}}function TT(...e){return{\u0275providers:yb(0,e),\u0275fromNgModule:!0}}function yb(e,...n){const t=[],r=new Set;let i;return el(n,s=>{const a=s;vb(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&ET(i,t),t}function ET(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];Zm(i,s=>{n.push(s)})}}function vb(e,n,t,r){if(!(e=Vn(e)))return!1;let i=null,s=Lc(e);const a=!s&&Xr(e);if(s||a){if(a&&!a.standalone)return!1;i=e}else{const d=e.ngModule;if(s=Lc(d),!s)return!1;i=d}const l=r.has(i);if(a){if(l)return!1;if(r.add(i),a.dependencies){const d="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const m of d)vb(m,n,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let m;r.add(i);try{el(s.imports,y=>{vb(y,n,t,r)&&(m||(m=[]),m.push(y))})}finally{}void 0!==m&&ET(m,n)}if(!l){const m=Mu(i)||(()=>new i);n.push({provide:i,useFactory:m,deps:Wr},{provide:gb,useValue:i,multi:!0},{provide:O1,useValue:()=>Jt(i),multi:!0})}const d=s.providers;null==d||l||Zm(d,y=>{n.push(y)})}}return i!==e&&void 0!==e.providers}function Zm(e,n){for(let t of e)fi(t)&&(t=t.\u0275providers),Array.isArray(t)?Zm(t,n):n(t)}const ST=Sn({provide:String,useValue:Sn});function Fo(e){return null!==e&&"object"==typeof e&&ST in e}function Wc(e){return"function"==typeof e}const L1=new On("Set Injector scope."),F1={},fk={};let xb;function R1(){return void 0===xb&&(xb=new _b),xb}class Ru{}class MT extends Ru{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wb(n,a=>this.processProvider(a)),this.records.set(mb,wp(void 0,this)),i.has("environment")&&this.records.set(Ru,wp(void 0,this));const s=this.records.get(L1);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(gb.multi,Wr,Hn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const t=Fc(this),r=pa(void 0);try{return n()}finally{Fc(t),pa(r)}}get(n,t=Mr,r=Hn.Default){this.assertNotDestroyed(),r=yd(r);const i=Fc(this),s=pa(void 0);try{if(!(r&Hn.SkipSelf)){let l=this.records.get(n);if(void 0===l){const d=function _k(e){return"function"==typeof e||"object"==typeof e&&e instanceof On}(n)&&Hf(n);l=d&&this.injectableDefInScope(d)?wp(Jm(n),F1):null,this.records.set(n,l)}if(null!=l)return this.hydrate(n,l)}return(r&Hn.Self?R1():this.parent).get(n,t=r&Hn.Optional&&t===Mr?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[_d]=a[_d]||[]).unshift(ii(n)),i)throw a;return function Hy(e,n,t,r){const i=e[_d];throw n[Yf]&&i.unshift(n[Yf]),e.message=function _0(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==xm?e.slice(2):e;let i=ii(n);if(Array.isArray(n))i=n.map(ii).join(" -> ");else if("object"==typeof n){let s=[];for(let a in n)if(n.hasOwnProperty(a)){let l=n[a];s.push(a+":"+("string"==typeof l?JSON.stringify(l):ii(l)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Gf,"\n  ")}`}("\n"+e.message,i,t,r),e[Wf]=i,e[_d]=null,e}(a,n,"R3InjectorError",this.source)}throw a}finally{pa(s),Fc(i)}}resolveInjectorInitializers(){const n=Fc(this),t=pa(void 0);try{const r=this.get(O1.multi,Wr,Hn.Self);for(const i of r)i()}finally{Fc(n),pa(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(ii(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Mt(205,!1)}processProvider(n){let t=Wc(n=Vn(n))?n:Vn(n&&n.provide);const r=function kT(e){return Fo(e)?wp(void 0,e.useValue):wp(bb(e),F1)}(n);if(Wc(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=wp(void 0,F1,!0),i.factory=()=>Er(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===F1&&(t.value=fk,t.value=t.factory()),"object"==typeof t.value&&t.value&&function gk(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Vn(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Jm(e){const n=Hf(e),t=null!==n?n.factory:Mu(e);if(null!==t)return t;if(e instanceof On)throw new Mt(204,!1);if(e instanceof Function)return function pk(e){const n=e.length;if(n>0)throw N0(n,"?"),new Mt(204,!1);const t=function Tu(e){const n=e&&(e[Zo]||e[f0]);return n?(function ym(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),n):null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Mt(204,!1)}function bb(e,n,t){let r;if(Wc(e)){const i=Vn(e);return Mu(i)||Jm(i)}if(Fo(e))r=()=>Vn(e.useValue);else if(function bp(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Er(e.deps||[]));else if(function Km(e){return!(!e||!e.useExisting)}(e))r=()=>Jt(Vn(e.useExisting));else{const i=Vn(e&&(e.useClass||e.provide));if(!function mk(e){return!!e.deps}(e))return Mu(i)||Jm(i);r=()=>new i(...Er(e.deps))}return r}function wp(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function wb(e,n){for(const t of e)Array.isArray(t)?wb(t,n):t&&fi(t)?wb(t.\u0275providers,n):n(t)}class yk{}class Cb{}class Tb{resolveComponentFactory(n){throw function vk(e){const n=Error(`No component factory found for ${ii(e)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=e,n}(n)}}let Rh=(()=>{class e{}return e.NULL=new Tb,e})();function Qm(){return eg(fs(),Ut())}function eg(e,n){return new _s(Jo(e,n))}let _s=(()=>{class e{constructor(t){this.nativeElement=t}}return e.__NG_ELEMENT_ID__=Qm,e})();function n_(e){return e instanceof _s?e.nativeElement:e}class tg{}let ta=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function r_(){const e=Ut(),t=Pa(fs().index,e);return(Ko(t)?t:e)[yr]}(),e})(),AT=(()=>{class e{}return e.\u0275prov=pn({token:e,providedIn:"root",factory:()=>null}),e})();class ng{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Ci=new ng("15.2.5"),i_={},N1="ngOriginalError";function Gc(e){return e[N1]}class Yc{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&Gc(n);for(;t&&Gc(t);)t=Gc(t);return t||null}}function Nh(e){return e instanceof Function?e():e}function LT(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=n.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}t=i+1}}const z1="ng-template";function Eb(e,n,t){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const a=e[r++];if(t&&"class"===s&&-1!==LT(a.toLowerCase(),n,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===n)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Sb(e){return 4===e.type&&e.value!==z1}function Rl(e,n,t){return n===(4!==e.type||t?e.value:z1)}function o_(e,n,t){let r=4;const i=e.attrs||[],s=function FT(e){for(let n=0;n<e.length;n++)if(Cn(e[n]))return n;return e.length}(i);let a=!1;for(let l=0;l<n.length;l++){const d=n[l];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!Rl(e,d,t)||""===d&&1===n.length){if(ya(r))return!1;a=!0}}else{const m=8&r?d:n[++l];if(8&r&&null!==e.attrs){if(!Eb(e.attrs,m,t)){if(ya(r))return!1;a=!0}continue}const T=Db(8&r?"class":d,i,Sb(e),t);if(-1===T){if(ya(r))return!1;a=!0;continue}if(""!==m){let D;D=T>s?"":i[T+1].toLowerCase();const I=8&r?D:null;if(I&&-1!==LT(I,m,0)||2&r&&m!==D){if(ya(r))return!1;a=!0}}}}else{if(!a&&!ya(r)&&!ya(d))return!1;if(a&&ya(d))continue;a=!1,r=d|1&r}}return ya(r)||a}function ya(e){return 0==(1&e)}function Db(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let s=!1;for(;i<n.length;){const a=n[i];if(a===e)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let l=n[++i];for(;"string"==typeof l;)l=n[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function RT(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function a_(e,n,t=!1){for(let r=0;r<n.length;r++)if(o_(e,n[r],t))return!0;return!1}function kk(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Mb(e,n){return e?":not("+n.trim()+")":n}function NT(e){let n=e[0],t=1,r=2,i="",s=!1;for(;t<e.length;){let a=e[t];if("string"==typeof a)if(2&r){const l=e[++t];i+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!ya(a)&&(n+=Mb(s,i),i=""),r=a,s=s||!ya(r);t++}return""!==i&&(n+=Mb(s,i)),n}const xr={};function ce(e){Nu(Ur(),Ut(),le()+e,!1)}function Nu(e,n,t,r){if(!r)if(3==(3&n[Kn])){const s=e.preOrderCheckHooks;null!==s&&tt(n,s,t)}else{const s=e.preOrderHooks;null!==s&&it(n,s,0,t)}de(t)}function Pb(e,n=null,t=null,r){const i=Ob(e,n,t,r);return i.resolveInjectorInitializers(),i}function Ob(e,n=null,t=null,r,i=new Set){const s=[t||Wr,TT(e)];return r=r||("object"==typeof e?void 0:ii(e)),new MT(s,n||R1(),r||null,i)}let na=(()=>{class e{static create(t,r){if(Array.isArray(t))return Pb({name:""},r,t,"");{const i=t.name??"";return Pb({name:i},t.parent,t.providers,i)}}}return e.THROW_IF_NOT_FOUND=Mr,e.NULL=new _b,e.\u0275prov=pn({token:e,providedIn:"any",factory:()=>Jt(mb)}),e.__NG_ELEMENT_ID__=-1,e})();function We(e,n=Hn.Default){const t=Ut();return null===t?Jt(e,n):Bc(fs(),t,Vn(e),n)}function XT(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const a=e.data[s];C(t[r]),a.contentQueries(2,n[s],s)}}}function Tp(e,n,t,r,i,s,a,l,d,m,y){const T=n.blueprint.slice();return T[Dl]=i,T[Kn]=76|r,(null!==y||e&&1024&e[Kn])&&(T[Kn]|=1024),A0(T),T[Xi]=T[Sh]=e,T[es]=t,T[Jf]=a||e&&e[Jf],T[yr]=l||e&&e[yr],T[C0]=d||e&&e[C0]||null,T[Kf]=m||e&&e[Kf]||null,T[us]=s,T[oc]=function qx(){return XM++}(),T[Td]=y,T[ao]=2==n.type?e[ao]:T,T}function lg(e,n,t,r,i){let s=e.data[n];if(null===s)s=function Y1(e,n,t,r,i){const s=up(),a=Om(),d=e.data[n]=function Nk(e,n,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=d),null!==s&&(a?null==s.child&&null!==d.parent&&(s.child=d):null===s.next&&(s.next=d,d.prev=s)),d}(e,n,t,r,i),function e1(){return $n.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const a=function ac(){const e=$n.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return Oa(s,!0),s}function cg(e,n,t,r){if(0===t)return-1;const i=n.length;for(let s=0;s<t;s++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function Vb(e,n,t){R(n);try{const r=e.viewQuery;null!==r&&Vu(1,r,t);const i=e.template;null!==i&&ZT(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&XT(e,n),e.staticViewQueries&&Vu(2,e.viewQuery,t);const s=e.components;null!==s&&function ag(e,n){for(let t=0;t<n.length;t++)nE(e,n[t])}(n,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[Kn]&=-5,re()}}function u_(e,n,t,r){const i=n[Kn];if(128!=(128&i)){R(n);try{A0(n),function O0(e){return $n.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&ZT(e,n,t,2,r);const a=3==(3&i);if(a){const m=e.preOrderCheckHooks;null!==m&&tt(n,m,null)}else{const m=e.preOrderHooks;null!==m&&it(n,m,0,null),Ht(n,0)}if(function Yb(e){for(let n=gc(e);null!==n;n=Ol(n)){if(!n[ep])continue;const t=n[Ed];for(let r=0;r<t.length;r++){const i=t[r];512&i[Kn]||ku(i[Xi],1),i[Kn]|=512}}}(n),function tE(e){for(let n=gc(e);null!==n;n=Ol(n))for(let t=co;t<n.length;t++){const r=n[t],i=r[Dn];Pm(r)&&u_(i,r,i.template,r[es])}}(n),null!==e.contentQueries&&XT(e,n),a){const m=e.contentCheckHooks;null!==m&&tt(n,m)}else{const m=e.contentHooks;null!==m&&it(n,m,1),Ht(n,1)}!function G1(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)de(~i);else{const s=i,a=t[++r],l=t[++r];dp(a,s),l(2,n[s])}}}finally{de(-1)}}(e,n);const l=e.components;null!==l&&function Rk(e,n){for(let t=0;t<n.length;t++)$k(e,n[t])}(n,l);const d=e.viewQuery;if(null!==d&&Vu(2,d,r),a){const m=e.viewCheckHooks;null!==m&&tt(n,m)}else{const m=e.viewHooks;null!==m&&it(n,m,2),Ht(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[Kn]&=-41,512&n[Kn]&&(n[Kn]&=-513,ku(n[Xi],-1))}finally{re()}}}function ZT(e,n,t,r,i){const s=le(),a=2&r;try{de(-1),a&&n.length>vi&&Nu(e,n,vi,!1),ma(a?2:0,i),t(r,i)}finally{de(s),ma(a?3:1,i)}}function q1(e,n,t){if(Sd(n)){const i=n.directiveEnd;for(let s=n.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}function Ub(e,n,t){Pd()&&(function Vk(e,n,t,r){const i=t.directiveStart,s=t.directiveEnd;Dd(t)&&function Qd(e,n,t){const r=Jo(n,e),i=KT(t),s=e[Jf],a=d_(e,Tp(e,i,null,t.onPush?32:16,r,n,s,s.createRenderer(r,t),null,null,null));e[n.index]=a}(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||mi(t,n),Rs(r,n);const a=t.initialInputs;for(let l=i;l<s;l++){const d=e.data[l],m=Oh(n,e,l,t);Rs(m,n),null!==a&&nv(0,l-i,m,d,0,a),ko(d)&&(Pa(t.index,n)[es]=Oh(n,e,l,t))}}(e,n,t,Jo(t,n)),64==(64&t.flags)&&ug(e,n,t))}function X1(e,n,t=Jo){const r=n.localNames;if(null!==r){let i=n.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],l=-1===a?t(n,e):e[a];e[i++]=l}}}function KT(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=jb(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):n}function jb(e,n,t,r,i,s,a,l,d,m){const y=vi+r,T=y+i,D=function Z1(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:xr);return t}(y,T),I="function"==typeof m?m():m;return D[Dn]={type:e,blueprint:D,template:t,queries:null,viewQuery:l,declTNode:n,data:D.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:T,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:I,incompleteFirstPass:!1}}function h_(e,n,t,r){const i=p_(n);null===t?i.push(r):(i.push(t),e.firstCreatePass&&iE(e).push(r,i.length-1))}function J1(e,n,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const s=e[i];null===r?Q1(t,n,i,s):r.hasOwnProperty(i)&&Q1(t,n,r[i],s)}return t}function Q1(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function Ra(e,n,t,r,i,s,a,l){const d=Jo(n,t);let y,m=n.inputs;!l&&null!=m&&(y=m[r])?(m_(e,t,y,r,i),Dd(n)&&Hb(t,n.index)):3&n.type&&(r=function Bk(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,n.value||"",r):i,s.setProperty(d,r,i))}function Hb(e,n){const t=Pa(n,e);16&t[Kn]||(t[Kn]|=32)}function $b(e,n,t,r){if(Pd()){const i=null===r?null:{"":-1},s=function jk(e,n){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(a_(n,a.selectors,!1))if(r||(r=[]),ko(a))if(null!==a.findHostDirectiveDefs){const l=[];i=i||new Map,a.findHostDirectiveDefs(a,l,i),r.unshift(...l,a),tv(e,n,l.length)}else r.unshift(a),tv(e,n,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return null===r?null:[r,i]}(e,t);let a,l;null===s?a=l=null:[a,l]=s,null!==a&&JT(e,n,t,a,i,l),i&&function Hk(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const s=t[n[i+1]];if(null==s)throw new Mt(-301,!1);r.push(n[i],s)}}}(t,r,i)}t.mergedAttrs=En(t.mergedAttrs,t.attrs)}function JT(e,n,t,r,i,s){for(let m=0;m<r.length;m++)Iu(mi(t,n),e,r[m].type);!function _c(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let m=0;m<r.length;m++){const y=r[m];y.providersResolver&&y.providersResolver(y)}let a=!1,l=!1,d=cg(e,n,r.length,null);for(let m=0;m<r.length;m++){const y=r[m];t.mergedAttrs=En(t.mergedAttrs,y.hostAttrs),Bu(e,t,n,d,y),QT(d,y,i),null!==y.contentQueries&&(t.flags|=4),(null!==y.hostBindings||null!==y.hostAttrs||0!==y.hostVars)&&(t.flags|=64);const T=y.type.prototype;!a&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t.index),a=!0),!l&&(T.ngOnChanges||T.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t.index),l=!0),d++}!function Jd(e,n,t){const i=n.directiveEnd,s=e.data,a=n.attrs,l=[];let d=null,m=null;for(let y=n.directiveStart;y<i;y++){const T=s[y],D=t?t.get(T):null,F=D?D.outputs:null;d=J1(T.inputs,y,d,D?D.inputs:null),m=J1(T.outputs,y,m,F);const L=null===d||null===a||Sb(n)?null:eE(d,y,a);l.push(L)}null!==d&&(d.hasOwnProperty("class")&&(n.flags|=8),d.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=l,n.inputs=d,n.outputs=m}(e,t,s)}function ug(e,n,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,a=function v(){return $n.lFrame.currentDirectiveIndex}();try{de(s);for(let l=r;l<i;l++){const d=e.data[l],m=n[l];h(l),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&Uk(d,m)}}finally{de(-1),h(a)}}function Uk(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function tv(e,n,t){n.componentOffset=t,(e.components||(e.components=[])).push(n.index)}function QT(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;ko(n)&&(t[""]=e)}}function Bu(e,n,t,r,i){e.data[r]=i;const s=i.factory||(i.factory=Mu(i.type)),a=new Ot(s,ko(i),We);e.blueprint[r]=a,t[r]=a,function zk(e,n,t,r,i){const s=i.hostBindings;if(s){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~n.index;(function Wb(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(t,r,s)}}(e,n,r,cg(e,t,i.hostVars,xr),i)}function yo(e,n,t,r,i,s){const a=Jo(e,n);!function zu(e,n,t,r,i,s,a){if(null==s)e.removeAttribute(n,i,t);else{const l=null==a?nr(s):a(s,r||"",i);e.setAttribute(n,i,l,t)}}(n[yr],a,s,e.value,t,r,i)}function nv(e,n,t,r,i,s){const a=s[n];if(null!==a){const l=r.setInput;for(let d=0;d<a.length;){const m=a[d++],y=a[d++],T=a[d++];null!==l?r.setInput(t,T,m,y):t[y]=T}}}function eE(e,n,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const a=e[s];for(let l=0;l<a.length;l+=2)if(a[l]===n){r.push(s,a[l+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Gb(e,n,t,r){return[e,!0,!1,n,null,0,r,t,null,null]}function $k(e,n){const t=Pa(n,e);if(Pm(t)){const r=t[Dn];48&t[Kn]?u_(r,t,r.template,t[es]):t[Su]>0&&rv(t)}}function rv(e){for(let r=gc(e);null!==r;r=Ol(r))for(let i=co;i<r.length;i++){const s=r[i];if(Pm(s))if(512&s[Kn]){const a=s[Dn];u_(a,s,a.template,s[es])}else s[Su]>0&&rv(s)}const t=e[Dn].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Pa(t[r],e);Pm(i)&&i[Su]>0&&rv(i)}}function nE(e,n){const t=Pa(n,e),r=t[Dn];(function rE(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])})(r,t),Vb(r,t,t[es])}function d_(e,n){return e[Eh]?e[Cm][Ia]=n:e[Eh]=n,e[Cm]=n,n}function iv(e){for(;e;){e[Kn]|=32;const n=Tr(e);if(Md(e)&&!n)return e;e=n}return null}function f_(e,n,t,r=!0){const i=n[Jf];i.begin&&i.begin();try{u_(e,n,e.template,t)}catch(a){throw r&&sv(n,a),a}finally{i.end&&i.end()}}function Vu(e,n,t){C(0),n(e,t)}function p_(e){return e[wd]||(e[wd]=[])}function iE(e){return e.cleanup||(e.cleanup=[])}function sv(e,n){const t=e[Kf],r=t?t.get(Yc,null):null;r&&r.handleError(n)}function m_(e,n,t,r,i){for(let s=0;s<t.length;){const a=t[s++],l=t[s++],d=n[a],m=e.data[a];null!==m.setInput?m.setInput(d,i,r,l):d[l]=i}}function hg(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,s=0;if(null!==n)for(let a=0;a<n.length;a++){const l=n[a];"number"==typeof l?s=l:1==s?i=ir(i,l):2==s&&(r=ir(r,l+": "+n[++a]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function dg(e,n,t,r,i=!1){for(;null!==t;){const s=n[t.index];if(null!==s&&r.push(hs(s)),Qa(s))for(let l=co;l<s.length;l++){const d=s[l],m=d[Dn].firstChild;null!==m&&dg(d[Dn],d,m,r)}const a=t.type;if(8&a)dg(e,n,t.child,r);else if(32&a){const l=vp(t,n);let d;for(;d=l();)r.push(d)}else if(16&a){const l=sT(n,t);if(Array.isArray(l))r.push(...l);else{const d=Tr(n[ao]);dg(d[Dn],d,l,r,!0)}}t=i?t.projectionNext:t.next}return r}class Na{get rootNodes(){const n=this._lView,t=n[Dn];return dg(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[es]}set context(n){this._lView[es]=n}get destroyed(){return 128==(128&this._lView[Kn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Xi];if(Qa(n)){const t=n[Dh],r=t?t.indexOf(this):-1;r>-1&&($c(n,r),s1(t,r))}this._attachedToViewContainer=!1}Hd(this._lView[Dn],this._lView)}onDestroy(n){h_(this._lView[Dn],this._lView,null,n)}markForCheck(){iv(this._cdRefInjectingView||this._lView)}detach(){this._lView[Kn]&=-65}reattach(){this._lView[Kn]|=64}detectChanges(){f_(this._lView[Dn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qx(e,n){Hm(e,n,n[yr],2,null,null)}(this._lView[Dn],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Mt(902,!1);this._appRef=n}}class Sp extends Na{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;f_(n[Dn],n,n[es],!1)}checkNoChanges(){}get context(){return null}}class qb extends Rh{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Xr(n);return new fg(t,this.ngModule)}}function Xb(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class ov{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=yd(r);const i=this.injector.get(n,i_,r);return i!==i_||t===i_?i:this.parentInjector.get(n,t,r)}}class fg extends Cb{get inputs(){return Xb(this.componentDef.inputs)}get outputs(){return Xb(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function kb(e){return e.map(NT).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let s=(i=i||this.ngModule)instanceof Ru?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new ov(n,s):n,l=a.get(tg,null);if(null===l)throw new Mt(407,!1);const d=a.get(AT,null),m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",T=r?function K1(e,n,t){return e.selectRootElement(n,t===Ja.ShadowDom)}(m,r,this.componentDef.encapsulation):jd(m,y,function g_(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(y)),D=this.componentDef.onPush?288:272,I=jb(0,null,null,1,0,null,null,null,null,null),F=Tp(null,I,null,D,null,null,l,m,d,a,null);let L,B;R(F);try{const G=this.componentDef;let Z,q=null;G.findHostDirectiveDefs?(Z=[],q=new Map,G.findHostDirectiveDefs(G,Z,q),Z.push(G)):Z=[G];const oe=function oE(e,n){const t=e[Dn],r=vi;return e[r]=n,lg(t,r,2,"#host",null)}(F,T),_e=function aE(e,n,t,r,i,s,a,l){const d=i[Dn];!function Yk(e,n,t,r){for(const i of e)n.mergedAttrs=En(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(hg(n,n.mergedAttrs,!0),null!==t&&Fu(r,t,n))}(r,e,n,a);const m=s.createRenderer(n,t),y=Tp(i,KT(t),null,t.onPush?32:16,i[e.index],e,s,m,l||null,null,null);return d.firstCreatePass&&tv(d,e,r.length-1),d_(i,y),i[e.index]=y}(oe,T,G,Z,F,l,m);B=sp(I,vi),T&&function lE(e,n,t,r){if(r)rn(e,t,["ng-version",Ci.full]);else{const{attrs:i,classes:s}=function BT(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&n.push(s,e[++r]):8===i&&t.push(s);else{if(!ya(i))break;i=s}r++}return{attrs:n,classes:t}}(n.selectors[0]);i&&rn(e,t,i),s&&s.length>0&&w1(e,t,s.join(" "))}}(m,G,T,r),void 0!==t&&function cE(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(B,this.ngContentSelectors,t),L=function Zb(e,n,t,r,i,s){const a=fs(),l=i[Dn],d=Jo(a,i);JT(l,i,a,t,null,r);for(let y=0;y<t.length;y++)Rs(Oh(i,l,a.directiveStart+y,a),i);ug(l,i,a),d&&Rs(d,i);const m=Oh(i,l,a.directiveStart+a.componentOffset,a);if(e[es]=i[es]=m,null!==s)for(const y of s)y(m,n);return q1(l,a,e),m}(_e,G,Z,q,F,[c]),Vb(I,F,null)}finally{re()}return new sE(this.componentType,L,eg(B,F),F,B)}}class sE extends yk{constructor(n,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Sp(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){const s=this._rootLView;m_(s[Dn],s,i,n,t),Hb(s,this._tNode.index)}}get injector(){return new fp(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function c(){const e=fs();Ge(Ut()[Dn],e)}function u(e){let n=function o(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(ko(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Mt(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const a=e;a.inputs=g(e.inputs),a.declaredInputs=g(e.declaredInputs),a.outputs=g(e.outputs);const l=i.hostBindings;l&&E(e,l);const d=i.viewQuery,m=i.contentQueries;if(d&&x(e,d),m&&w(e,m),Za(e.inputs,i.inputs),Za(e.declaredInputs,i.declaredInputs),Za(e.outputs,i.outputs),ko(i)&&i.data.animation){const y=e.data;y.animation=(y.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let a=0;a<s.length;a++){const l=s[a];l&&l.ngInherit&&l(e),l===u&&(t=!1)}}n=Object.getPrototypeOf(n)}!function f(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=En(i.hostAttrs,t=En(t,i.hostAttrs))}}(r)}function g(e){return e===Nc?{}:e===Wr?[]:e}function x(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function w(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,s)=>{n(r,i,s),t(r,i,s)}:n}function E(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function ke(e){return!!Fe(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Fe(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Qe(e,n,t){return e[n]=t}function ht(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function ft(e,n,t,r){const i=Ut();return ht(i,Ph(),n)&&(Ur(),yo(ne(),i,e,n,t,r)),ft}function Bt(e,n,t,r){return ht(e,Ph(),t)?n+nr(t)+r:xr}function Rt(e,n,t,r,i,s,a,l){const d=Ut(),m=Ur(),y=e+vi,T=m.firstCreatePass?function Pi(e,n,t,r,i,s,a,l,d){const m=n.consts,y=lg(n,e,4,a||null,Ao(m,l));$b(n,t,y,Ao(m,d)),Ge(n,y);const T=y.tView=jb(2,y,r,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,m);return null!==n.queries&&(n.queries.template(n,y),T.queries=n.queries.embeddedTView(y)),y}(y,m,d,n,t,r,i,s,a):m.data[y];Oa(T,!1);const D=d[yr].createComment("");q0(m,d,D,T),Rs(D,d),d_(d,d[y]=Gb(D,d,D,T)),Mh(T)&&Ub(m,d,T),null!=a&&X1(d,T,l)}function Ns(e){return ds(function I0(){return $n.lFrame.contextLView}(),vi+e)}function ze(e,n,t){const r=Ut();return ht(r,Ph(),n)&&Ra(Ur(),ne(),r,e,n,r[yr],t,!1),ze}function ts(e,n,t,r,i){const a=i?"class":"style";m_(e,t,n.inputs[a],a,r)}function k(e,n,t,r){const i=Ut(),s=Ur(),a=vi+e,l=i[yr],d=s.firstCreatePass?function ys(e,n,t,r,i,s){const a=n.consts,d=lg(n,e,2,r,Ao(a,i));return $b(n,t,d,Ao(a,s)),null!==d.attrs&&hg(d,d.attrs,!1),null!==d.mergedAttrs&&hg(d,d.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,d),d}(a,s,i,n,t,r):s.data[a],m=i[a]=jd(l,n,function Le(){return $n.lFrame.currentNamespace}()),y=Mh(d);return Oa(d,!0),Fu(l,m,d),32!=(32&d.flags)&&q0(s,i,m,d),0===function Jy(){return $n.lFrame.elementDepthCount}()&&Rs(m,i),function ap(){$n.lFrame.elementDepthCount++}(),y&&(Ub(s,i,d),q1(s,d,i)),null!==r&&X1(i,d),k}function A(){let e=fs();Om()?Lm():(e=e.parent,Oa(e,!1));const n=e;!function lp(){$n.lFrame.elementDepthCount--}();const t=Ur();return t.firstCreatePass&&(Ge(t,e),Sd(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Nt(e){return 0!=(8&e.flags)}(n)&&ts(t,n,Ut(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function wn(e){return 0!=(16&e.flags)}(n)&&ts(t,n,Ut(),n.stylesWithoutHost,!1),A}function Q(e,n,t,r){return k(e,n,t,r),A(),Q}function Li(e,n,t){const r=Ut(),i=Ur(),s=e+vi,a=i.firstCreatePass?function gi(e,n,t,r,i){const s=n.consts,a=Ao(s,r),l=lg(n,e,8,"ng-container",a);return null!==a&&hg(l,a,!0),$b(n,t,l,Ao(s,i)),null!==n.queries&&n.queries.elementStart(n,l),l}(s,i,r,n,t):i.data[s];Oa(a,!0);const l=r[s]=r[yr].createComment("");return q0(i,r,l,a),Rs(l,r),Mh(a)&&(Ub(i,r,a),q1(i,a,r)),null!=t&&X1(r,a),Li}function As(){let e=fs();const n=Ur();return Om()?Lm():(e=e.parent,Oa(e,!1)),n.firstCreatePass&&(Ge(n,e),Sd(e)&&n.queries.elementEnd(e)),As}function Gn(){return Ut()}function Gs(e){return!!e&&"function"==typeof e.then}function Ys(e){return!!e&&"function"==typeof e.subscribe}const Xc=Ys;function rt(e,n,t,r){const i=Ut(),s=Ur(),a=fs();return function Kb(e,n,t,r,i,s,a){const l=Mh(r),m=e.firstCreatePass&&iE(e),y=n[es],T=p_(n);let D=!0;if(3&r.type||a){const L=Jo(r,n),B=a?a(L):L,G=T.length,Z=a?oe=>a(hs(oe[r.index])):r.index;let q=null;if(!a&&l&&(q=function __(e,n,t,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===t&&i[s+1]===r){const l=n[wd],d=i[s+2];return l.length>d?l[d]:null}"string"==typeof a&&(s+=2)}return null}(e,n,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,D=!1;else{s=Qb(r,n,y,s,!1);const oe=t.listen(B,i,s);T.push(s,oe),m&&m.push(i,Z,G,G+1)}}else s=Qb(r,n,y,s,!1);const I=r.outputs;let F;if(D&&null!==I&&(F=I[i])){const L=F.length;if(L)for(let B=0;B<L;B+=2){const _e=n[F[B]][F[B+1]].subscribe(s),fe=T.length;T.push(s,_e),m&&m.push(i,r.index,fe,-(fe+1))}}}(s,i,i[yr],a,e,n,r),rt}function Jb(e,n,t,r){try{return ma(6,n,t),!1!==t(r)}catch(i){return sv(e,i),!1}finally{ma(7,n,t)}}function Qb(e,n,t,r,i){return function s(a){if(a===Function)return r;iv(e.componentOffset>-1?Pa(e.index,n):n);let d=Jb(n,t,r,a),m=s.__ngNextListenerFn__;for(;m;)d=Jb(n,t,m,a)&&d,m=m.__ngNextListenerFn__;return i&&!1===d&&(a.preventDefault(),a.returnValue=!1),d}}function bt(e=1){return function he(e){return($n.lFrame.contextLView=function ue(e,n){for(;e>0;)n=n[Sh],e--;return n}(e,$n.lFrame.contextLView))[es]}(e)}function ew(e,n){let t=null;const r=function Mk(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const s=n[i];if("*"!==s){if(null===r?a_(e,s,!0):kk(r,s))return i}else t=i}return t}function yc(e){const n=Ut()[ao][us];if(!n.projection){const r=n.projection=N0(e?e.length:1,null),i=r.slice();let s=n.child;for(;null!==s;){const a=e?ew(s,e):0;null!==a&&(i[a]?i[a].projectionNext=s:r[a]=s,i[a]=s),s=s.next}}}function y_(e,n=0,t){const r=Ut(),i=Ur(),s=lg(i,vi+e,16,null,t||null);null===s.projection&&(s.projection=n),Lm(),32!=(32&s.flags)&&function QM(e,n,t){oT(n[yr],0,n,t,nb(e,t,n),Wd(t.parent||n[us],t,n))}(i,r,s)}function Kr(e,n,t){return v_(e,"",n,"",t),Kr}function v_(e,n,t,r,i){const s=Ut(),a=Bt(s,n,t,r);return a!==xr&&Ra(Ur(),ne(),s,e,a,s[yr],i,!1),v_}function x_(e,n){return e<<17|n<<2}function sl(e){return e>>17&32767}function qk(e){return 2|e}function b_(e){return(131068&e)>>2}function Xk(e,n){return-131069&e|n<<2}function Zk(e){return 1|e}function kF(e,n,t,r,i){const s=e[t+1],a=null===n;let l=r?sl(s):b_(s),d=!1;for(;0!==l&&(!1===d||a);){const y=e[l+1];cW(e[l],n)&&(d=!0,e[l+1]=r?Zk(y):qk(y)),l=r?sl(y):b_(y)}d&&(e[t+1]=r?qk(s):Zk(s))}function cW(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Nm(e,n)>=0}const ra={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function AF(e){return e.substring(ra.key,ra.keyEnd)}function IF(e,n){const t=ra.textEnd;return t===n?-1:(n=ra.keyEnd=function fW(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,ra.key=n,t),uv(e,n,t))}function uv(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function hE(e,n,t){return zh(e,n,t,!1),hE}function _i(e,n){return zh(e,n,null,!0),_i}function RF(e){!function Vh(e,n,t,r){const i=Ur(),s=lc(2);i.firstUpdatePass&&BF(i,null,s,r);const a=Ut();if(t!==xr&&ht(a,s,t)){const l=i.data[le()];if(jF(l,r)&&!NF(i,s)){let d=r?l.classesWithoutHost:l.stylesWithoutHost;null!==d&&(t=ir(d,t||"")),ts(i,l,a,t,r)}else!function wW(e,n,t,r,i,s,a,l){i===xr&&(i=Wr);let d=0,m=0,y=0<i.length?i[0]:null,T=0<s.length?s[0]:null;for(;null!==y||null!==T;){const D=d<i.length?i[d+1]:void 0,I=m<s.length?s[m+1]:void 0;let L,F=null;y===T?(d+=2,m+=2,D!==I&&(F=T,L=I)):null===T||null!==y&&y<T?(d+=2,F=y):(m+=2,F=T,L=I),null!==F&&VF(e,n,t,r,F,L,a,l),y=d<i.length?i[d]:null,T=m<s.length?s[m]:null}}(i,l,a,a[yr],a[s+1],a[s+1]=function bW(e,n,t){if(null==t||""===t)return Wr;const r=[],i=Ll(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,s)}}(ms,tf,e,!0)}function tf(e,n){for(let t=function hW(e){return function OF(e){ra.key=0,ra.keyEnd=0,ra.value=0,ra.valueEnd=0,ra.textEnd=e.length}(e),IF(e,uv(e,0,ra.textEnd))}(n);t>=0;t=IF(n,t))ms(e,AF(n),!0)}function zh(e,n,t,r){const i=Ut(),s=Ur(),a=lc(2);s.firstUpdatePass&&BF(s,e,a,r),n!==xr&&ht(i,a,n)&&VF(s,s.data[le()],i,i[yr],e,i[a+1]=function CW(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=ii(Ll(e)))),e}(n,t),r,a)}function NF(e,n){return n>=e.expandoStartIndex}function BF(e,n,t,r){const i=e.data;if(null===i[t+1]){const s=i[le()],a=NF(e,t);jF(s,r)&&null===n&&!a&&(n=!1),n=function _W(e,n,t,r){const i=function p(e){const n=$n.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let s=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=tw(t=Kk(null,e,n,t,r),n.attrs,r),s=null);else{const a=n.directiveStylingLast;if(-1===a||e[a]!==i)if(t=Kk(i,e,n,t,r),null===s){let d=function yW(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==b_(r))return e[sl(r)]}(e,n,r);void 0!==d&&Array.isArray(d)&&(d=Kk(null,e,n,d[1],r),d=tw(d,n.attrs,r),function vW(e,n,t,r){e[sl(t?n.classBindings:n.styleBindings)]=r}(e,n,r,d))}else s=function xW(e,n,t){let r;const i=n.directiveEnd;for(let s=1+n.directiveStylingLast;s<i;s++)r=tw(r,e[s].hostAttrs,t);return tw(r,n.attrs,t)}(e,n,r)}return void 0!==s&&(r?n.residualClasses=s:n.residualStyles=s),t}(i,s,n,r),function aW(e,n,t,r,i,s){let a=s?n.classBindings:n.styleBindings,l=sl(a),d=b_(a);e[r]=t;let y,m=!1;if(Array.isArray(t)?(y=t[1],(null===y||Nm(t,y)>0)&&(m=!0)):y=t,i)if(0!==d){const D=sl(e[l+1]);e[r+1]=x_(D,l),0!==D&&(e[D+1]=Xk(e[D+1],r)),e[l+1]=function sW(e,n){return 131071&e|n<<17}(e[l+1],r)}else e[r+1]=x_(l,0),0!==l&&(e[l+1]=Xk(e[l+1],r)),l=r;else e[r+1]=x_(d,0),0===l?l=r:e[d+1]=Xk(e[d+1],r),d=r;m&&(e[r+1]=qk(e[r+1])),kF(e,y,r,!0),kF(e,y,r,!1),function lW(e,n,t,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof n&&Nm(s,n)>=0&&(t[r+1]=Zk(t[r+1]))}(n,y,e,r,s),a=x_(l,d),s?n.classBindings=a:n.styleBindings=a}(i,s,n,t,a,r)}}function Kk(e,n,t,r,i){let s=null;const a=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<a&&(s=n[l],r=tw(r,s.hostAttrs,i),s!==e);)l++;return null!==e&&(t.directiveStylingLast=l),r}function tw(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let s=0;s<n.length;s++){const a=n[s];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),ms(e,a,!!t||n[++s]))}return void 0===e?null:e}function VF(e,n,t,r,i,s,a,l){if(!(3&n.type))return;const d=e.data,m=d[l+1],y=function oW(e){return 1==(1&e)}(m)?UF(d,n,t,i,b_(m),a):void 0;dE(y)||(dE(s)||function iW(e){return 2==(2&e)}(m)&&(s=UF(d,null,t,i,l,a)),function lT(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Lo.DashCase;null==i?e.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Lo.Important),e.setStyle(t,r,i,s))}}(r,a,ip(le(),t),i,s))}function UF(e,n,t,r,i,s){const a=null===n;let l;for(;i>0;){const d=e[i],m=Array.isArray(d),y=m?d[1]:d,T=null===y;let D=t[i+1];D===xr&&(D=T?Wr:void 0);let I=T?jx(D,r):y===r?D:void 0;if(m&&!dE(I)&&(I=jx(d,r)),dE(I)&&(l=I,a))return l;const F=e[i+1];i=a?sl(F):b_(F)}if(null!==n){let d=s?n.residualClasses:n.residualStyles;null!=d&&(l=jx(d,r))}return l}function dE(e){return void 0!==e}function jF(e,n){return 0!=(e.flags&(n?8:16))}function V(e,n=""){const t=Ut(),r=Ur(),i=e+vi,s=r.firstCreatePass?lg(r,i,1,n,null):r.data[i],a=t[i]=function y1(e,n){return e.createText(n)}(t[yr],n);q0(r,t,a,s),Oa(s,!1)}function $t(e){return Nl("",e,""),$t}function Nl(e,n,t){const r=Ut(),i=Bt(r,e,n,t);return i!==xr&&function Ro(e,n,t){const r=ip(n,e);!function go(e,n,t){e.setValue(n,t)}(e[yr],r,t)}(r,le(),i),Nl}const w_=void 0;var HW=["en",[["a","p"],["AM","PM"],w_],[["AM","PM"],w_,w_],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],w_,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],w_,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",w_,"{1} 'at' {0}",w_],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jW(e){const t=Math.floor(Math.abs(e)),r=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let hv={};function Bl(e){const n=function $W(e){return e.toLowerCase().replace(/_/g,"-")}(e);let t=cR(n);if(t)return t;const r=n.split("-")[0];if(t=cR(r),t)return t;if("en"===r)return HW;throw new Mt(701,!1)}function cR(e){return e in hv||(hv[e]=Ai.ng&&Ai.ng.common&&Ai.ng.common.locales&&Ai.ng.common.locales[e]),hv[e]}var Mn=(()=>((Mn=Mn||{})[Mn.LocaleId=0]="LocaleId",Mn[Mn.DayPeriodsFormat=1]="DayPeriodsFormat",Mn[Mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mn[Mn.DaysFormat=3]="DaysFormat",Mn[Mn.DaysStandalone=4]="DaysStandalone",Mn[Mn.MonthsFormat=5]="MonthsFormat",Mn[Mn.MonthsStandalone=6]="MonthsStandalone",Mn[Mn.Eras=7]="Eras",Mn[Mn.FirstDayOfWeek=8]="FirstDayOfWeek",Mn[Mn.WeekendRange=9]="WeekendRange",Mn[Mn.DateFormat=10]="DateFormat",Mn[Mn.TimeFormat=11]="TimeFormat",Mn[Mn.DateTimeFormat=12]="DateTimeFormat",Mn[Mn.NumberSymbols=13]="NumberSymbols",Mn[Mn.NumberFormats=14]="NumberFormats",Mn[Mn.CurrencyCode=15]="CurrencyCode",Mn[Mn.CurrencySymbol=16]="CurrencySymbol",Mn[Mn.CurrencyName=17]="CurrencyName",Mn[Mn.Currencies=18]="Currencies",Mn[Mn.Directionality=19]="Directionality",Mn[Mn.PluralCase=20]="PluralCase",Mn[Mn.ExtraData=21]="ExtraData",Mn))();const dv="en-US";let uR=dv;function eA(e,n,t,r,i){if(e=Vn(e),Array.isArray(e))for(let s=0;s<e.length;s++)eA(e[s],n,t,r,i);else{const s=Ur(),a=Ut();let l=Wc(e)?e:Vn(e.provide),d=bb(e);const m=fs(),y=1048575&m.providerIndexes,T=m.directiveStart,D=m.providerIndexes>>20;if(Wc(e)||!e.multi){const I=new Ot(d,i,We),F=nA(l,n,i?y:y+D,T);-1===F?(Iu(mi(m,a),s,l),tA(s,e,n.length),n.push(l),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(I),a.push(I)):(t[F]=I,a[F]=I)}else{const I=nA(l,n,y+D,T),F=nA(l,n,y,y+D),B=F>=0&&t[F];if(i&&!B||!i&&!(I>=0&&t[I])){Iu(mi(m,a),s,l);const G=function UG(e,n,t,r,i){const s=new Ot(e,t,We);return s.multi=[],s.index=n,s.componentProviders=0,FR(s,i,r&&!t),s}(i?VG:zG,t.length,i,r,d);!i&&B&&(t[F].providerFactory=G),tA(s,e,n.length,0),n.push(l),m.directiveStart++,m.directiveEnd++,i&&(m.providerIndexes+=1048576),t.push(G),a.push(G)}else tA(s,e,I>-1?I:F,FR(t[i?F:I],d,!i&&r));!i&&r&&B&&t[F].componentProviders++}}}function tA(e,n,t,r){const i=Wc(n),s=function DT(e){return!!e.useClass}(n);if(i||s){const d=(s?Vn(n.useClass):n).prototype.ngOnDestroy;if(d){const m=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const y=m.indexOf(t);-1===y?m.push(t,[r,d]):m[y+1].push(r,d)}else m.push(t,d)}}}function FR(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function nA(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function zG(e,n,t,r){return rA(this.multi,[])}function VG(e,n,t,r){const i=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,l=Oh(t,t[Dn],this.providerFactory.index,r);s=l.slice(0,a),rA(i,s);for(let d=a;d<l.length;d++)s.push(l[d])}else s=[],rA(i,s);return s}function rA(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Ui(e,n=[]){return t=>{t.providersResolver=(r,i)=>function BG(e,n,t){const r=Ur();if(r.firstCreatePass){const i=ko(e);eA(t,r.data,r.blueprint,i,!0),eA(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class fv{}class RR{}class NR extends fv{constructor(n,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qb(this);const r=oo(n);this._bootstrapComponents=Nh(r.bootstrap),this._r3Injector=Ob(n,t,[{provide:fv,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver}],ii(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class iA extends RR{constructor(n){super(),this.moduleType=n}create(n){return new NR(this.moduleType,n)}}class HG extends fv{constructor(n,t,r){super(),this.componentFactoryResolver=new qb(this),this.instance=null;const i=new MT([...n,{provide:fv,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver}],t||R1(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function _E(e,n,t=null){return new HG(e,n,t).injector}let $G=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=yb(0,t.type),i=r.length>0?_E([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=pn({token:e,providedIn:"environment",factory:()=>new e(Jt(Ru))}),e})();function BR(e){e.getStandaloneInjector=n=>n.get($G).getOrCreateStandaloneInjector(e)}function aw(e,n){const t=e[n];return t===xr?void 0:t}function GR(e,n,t,r,i,s,a){const l=n+t;return function Ft(e,n,t,r){const i=ht(e,n,t);return ht(e,n+1,r)||i}(e,l,i,s)?Qe(e,l+2,a?r.call(a,i,s):r(i,s)):aw(e,l+2)}function Ji(e,n){const t=Ur();let r;const i=e+vi;t.firstCreatePass?(r=function cY(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Mu(r.type)),a=pa(We);try{const l=ga(!1),d=s();return ga(l),function Ki(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,Ut(),i,d),d}finally{pa(a)}}function Zc(e,n,t){const r=e+vi,i=Ut(),s=ds(i,r);return lw(i,r)?function WR(e,n,t,r,i,s){const a=n+t;return ht(e,a,i)?Qe(e,a+1,s?r.call(s,i):r(i)):aw(e,a+1)}(i,Io(),n,s.transform,t,s):s.transform(t)}function zl(e,n,t,r){const i=e+vi,s=Ut(),a=ds(s,i);return lw(s,i)?GR(s,Io(),n,a.transform,t,r,a):a.transform(t,r)}function lw(e,n){return e[Dn].data[n].pure}function oA(e){return n=>{setTimeout(e,void 0,n)}}const rr=class fY extends qi{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,s=t||(()=>null),a=r;if(n&&"object"==typeof n){const d=n;i=d.next?.bind(d),s=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(s=oA(s),i&&(i=oA(i)),a&&(a=oA(a)));const l=super.subscribe({next:i,error:s,complete:a});return n instanceof Et&&n.add(l),l}};function pY(){return this._results[Symbol.iterator]()}class aA{get changes(){return this._changes||(this._changes=new rr)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=aA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=pY)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=function mo(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Vc(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let nf=(()=>{class e{}return e.__NG_ELEMENT_ID__=_Y,e})();const mY=nf,gY=class extends mY{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(n,t){const r=this._declarationTContainer.tView,i=Tp(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null,t||null);i[Cd]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[lo];return null!==a&&(i[lo]=a.createEmbeddedView(r)),Vb(r,i,n),new Na(i)}};function _Y(){return yE(fs(),Ut())}function yE(e,n){return 4&e.type?new gY(n,e,eg(e,n)):null}let vc=(()=>{class e{}return e.__NG_ELEMENT_ID__=yY,e})();function yY(){return JR(fs(),Ut())}const vY=vc,ZR=class extends vY{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return eg(this._hostTNode,this._hostLView)}get injector(){return new fp(this._hostTNode,this._hostLView)}get parentInjector(){const n=cc(this._hostTNode,this._hostLView);if(oi(n)){const t=Wi(n,this._hostLView),r=ai(n);return new fp(t[Dn].data[r+8],t)}return new fp(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=KR(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-co}createEmbeddedView(n,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=n.createEmbeddedView(t||{},s);return this.insert(a,i),a}createComponent(n,t,r,i,s){const a=n&&!function Il(e){return"function"==typeof e}(n);let l;if(a)l=t;else{const T=t||{};l=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const d=a?n:new fg(Xr(n)),m=r||this.parentInjector;if(!s&&null==d.ngModule){const D=(a?m:this.parentInjector).get(Ru,null);D&&(s=D)}const y=d.create(m,i,void 0,s);return this.insert(y.hostView,l),y}insert(n,t){const r=n._lView,i=r[Dn];if(function Ky(e){return Qa(e[Xi])}(r)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const T=r[Xi],D=new ZR(T,T[us],T[Xi]);D.detach(D.indexOf(n))}}const s=this._adjustIndex(t),a=this._lContainer;!function eb(e,n,t,r){const i=co+r,s=t.length;r>0&&(t[i-1][Ia]=n),r<s-co?(n[Ia]=t[i],Rd(t,co+r,n)):(t.push(n),n[Ia]=null),n[Xi]=t;const a=n[Cd];null!==a&&t!==a&&function JC(e,n){const t=e[Ed];n[ao]!==n[Xi][Xi][ao]&&(e[ep]=!0),null===t?e[Ed]=[n]:t.push(n)}(a,n);const l=n[lo];null!==l&&l.insertView(e),n[Kn]|=64}(i,r,a,s);const l=ib(s,a),d=r[yr],m=G0(d,a[vr]);return null!==m&&function KC(e,n,t,r,i,s){r[Dl]=i,r[us]=n,Hm(e,r,t,1,i,s)}(i,a[us],d,r,m,l),n.attachToViewContainerRef(),Rd(lA(a),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=KR(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=$c(this._lContainer,t);r&&(s1(lA(this._lContainer),t),Hd(r[Dn],r))}detach(n){const t=this._adjustIndex(n,-1),r=$c(this._lContainer,t);return r&&null!=s1(lA(this._lContainer),t)?new Na(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function KR(e){return e[Dh]}function lA(e){return e[Dh]||(e[Dh]=[])}function JR(e,n){let t;const r=n[e.index];if(Qa(r))t=r;else{let i;if(8&e.type)i=hs(r);else{const s=n[yr];i=s.createComment("");const a=Jo(e,n);$d(s,G0(s,a),i,function rT(e,n){return e.nextSibling(n)}(s,a),!1)}n[e.index]=t=Gb(r,n,i,e),d_(n,t)}return new ZR(t,e,n)}class cA{constructor(n){this.queryList=n,this.matches=null}clone(){return new cA(this.queryList)}setDirty(){this.queryList.setDirty()}}class uA{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const a=t.getByIndex(s);i.push(this.queries[a.indexInDeclarationView].clone())}return new uA(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==i4(n,t).matches&&this.queries[t].setDirty()}}class QR{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class hA{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(n,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new hA(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class dA{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new dA(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(n,t,xY(t,s)),this.matchTNodeWithReadOption(n,t,L0(t,n,s,!1,!1))}else r===nf?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,L0(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===_s||i===vc||i===nf&&4&t.type)this.addMatch(t.index,-2);else{const s=L0(t,n,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function xY(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function wY(e,n,t,r){return-1===t?function bY(e,n){return 11&e.type?eg(e,n):4&e.type?yE(e,n):null}(n,e):-2===t?function CY(e,n,t){return t===_s?eg(n,e):t===nf?yE(n,e):t===vc?JR(n,e):void 0}(e,n,r):Oh(e,e[Dn],t,n)}function e4(e,n,t,r){const i=n[lo].queries[r];if(null===i.matches){const s=e.data,a=t.matches,l=[];for(let d=0;d<a.length;d+=2){const m=a[d];l.push(m<0?null:wY(n,s[m],a[d+1],t.metadata.read))}i.matches=l}return i.matches}function fA(e,n,t,r){const i=e.queries.getByIndex(t),s=i.matches;if(null!==s){const a=e4(e,n,i,t);for(let l=0;l<s.length;l+=2){const d=s[l];if(d>0)r.push(a[l/2]);else{const m=s[l+1],y=n[-d];for(let T=co;T<y.length;T++){const D=y[T];D[Cd]===D[Xi]&&fA(D[Dn],D,m,r)}if(null!==y[Ed]){const T=y[Ed];for(let D=0;D<T.length;D++){const I=T[D];fA(I[Dn],I,m,r)}}}}}return r}function pv(e){const n=Ut(),t=Ur(),r=b();C(r+1);const i=i4(t,r);if(e.dirty&&function Zy(e){return 4==(4&e[Kn])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?fA(t,n,r,[]):e4(t,n,i,r);e.reset(s,n_),e.notifyOnChanges()}return!0}return!1}function cw(e,n,t){const r=Ur();r.firstCreatePass&&(function r4(e,n,t){null===e.queries&&(e.queries=new hA),e.queries.track(new dA(n,t))}(r,new QR(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),function n4(e,n,t){const r=new aA(4==(4&t));h_(e,n,r,r.destroy),null===n[lo]&&(n[lo]=new uA),n[lo].queries.push(new cA(r))}(r,Ut(),n)}function mv(){return function TY(e,n){return e[lo].queries[n].queryList}(Ut(),b())}function i4(e,n){return e.queries.getByIndex(n)}function s4(e,n){return yE(e,n)}function xE(...e){}const hw=new On("Application Initializer");let bE=(()=>{class e{constructor(t){this.appInits=t,this.resolve=xE,this.reject=xE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Gs(s))t.push(s);else if(Xc(s)){const a=new Promise((l,d)=>{s.subscribe({complete:l,error:d})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Jt(hw,8))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const dw=new On("AppId",{providedIn:"root",factory:function C4(){return`${vA()}${vA()}${vA()}`}});function vA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const T4=new On("Platform Initializer"),yv=new On("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),E4=new On("AnimationModuleType");let WY=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Dp=new On("LocaleId",{providedIn:"root",factory:()=>pr(Dp,Hn.Optional|Hn.SkipSelf)||function GY(){return typeof $localize<"u"&&$localize.locale||dv}()});class qY{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let S4=(()=>{class e{compileModuleSync(t){return new iA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Nh(oo(t).declarations).reduce((a,l)=>{const d=Xr(l);return d&&a.push(new fg(d)),a},[]);return new qY(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const KY=(()=>Promise.resolve(0))();function xA(e){typeof Zone>"u"?KY.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class ns{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rr(!1),this.onMicrotaskEmpty=new rr(!1),this.onStable=new rr(!1),this.onError=new rr(!1),typeof Zone>"u")throw new Mt(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function JY(){let e=Ai.requestAnimationFrame,n=Ai.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function tq(e){const n=()=>{!function eq(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ai,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,wA(e),e.isCheckStableRunning=!0,bA(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),wA(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,a,l)=>{try{return k4(e),t.invokeTask(i,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&n(),A4(e)}},onInvoke:(t,r,i,s,a,l,d)=>{try{return k4(e),t.invoke(i,s,a,l,d)}finally{e.shouldCoalesceRunChangeDetection&&n(),A4(e)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,wA(e),bA(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ns.isInAngularZone())throw new Mt(909,!1)}static assertNotInAngularZone(){if(ns.isInAngularZone())throw new Mt(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,n,QY,xE,xE);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const QY={};function bA(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function wA(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function k4(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function A4(e){e._nesting--,bA(e)}class nq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rr,this.onMicrotaskEmpty=new rr,this.onStable=new rr,this.onError=new rr}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const I4=new On(""),wE=new On("");let EA,CA=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,EA||(function rq(e){EA=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ns.assertNotInAngularZone(),xA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return e.\u0275fac=function(t){return new(t||e)(Jt(ns),Jt(TA),Jt(wE))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),TA=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return EA?.findTestabilityInTree(this,t,r)??null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Mp=!1;let gg=null;const P4=new On("AllowMultipleToken"),SA=new On("PlatformDestroyListeners"),O4=new On("appBootstrapListener");class L4{constructor(n,t){this.name=n,this.token=t}}function R4(e,n,t=[]){const r=`Platform: ${n}`,i=new On(r);return(s=[])=>{let a=DA();if(!a||a.injector.get(P4,!1)){const l=[...t,...s,{provide:i,useValue:!0}];e?e(l):function oq(e){if(gg&&!gg.get(P4,!1))throw new Mt(400,!1);gg=e;const n=e.get(B4);(function F4(e){const n=e.get(T4,null);n&&n.forEach(t=>t())})(e)}(function N4(e=[],n){return na.create({name:n,providers:[{provide:L1,useValue:"platform"},{provide:SA,useValue:new Set([()=>gg=null])},...e]})}(l,r))}return function lq(e){const n=DA();if(!n)throw new Mt(401,!1);return n}()}}function DA(){return gg?.get(B4)??null}let B4=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function V4(e,n){let t;return t="noop"===e?new nq:("zone.js"===e?void 0:e)||new ns(n),t}(r?.ngZone,function z4(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:ns,useValue:i}];return i.run(()=>{const a=na.create({providers:s,parent:this.injector,name:t.moduleType.name}),l=t.create(a),d=l.injector.get(Yc,null);if(!d)throw new Mt(402,!1);return i.runOutsideAngular(()=>{const m=i.onError.subscribe({next:y=>{d.handleError(y)}});l.onDestroy(()=>{CE(this._modules,l),m.unsubscribe()})}),function U4(e,n,t){try{const r=t();return Gs(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const m=l.injector.get(bE);return m.runInitializers(),m.donePromise.then(()=>(function hR(e){Xo(e,"Expected localeId to be defined"),"string"==typeof e&&(uR=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Dp,dv)||dv),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,r=[]){const i=j4({},r);return function iq(e,n,t){const r=new iA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(C_);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Mt(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Mt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(SA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Jt(na))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function j4(e,n){return Array.isArray(n)?n.reduce(j4,e):{...e,...n}}let C_=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new er(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new er(l=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{ns.assertNotInAngularZone(),xA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{d.unsubscribe(),m.unsubscribe()}});this.isStable=Oc(s,a.pipe(function Kt(e={}){const{connector:n=(()=>new qi),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let a,l,d,m=0,y=!1,T=!1;const D=()=>{l?.unsubscribe(),l=void 0},I=()=>{D(),a=d=void 0,y=T=!1},F=()=>{const L=a;I(),L?.unsubscribe()};return yi((L,B)=>{m++,!T&&!y&&D();const G=d=d??n();B.add(()=>{m--,0===m&&!T&&!y&&(l=fr(F,i))}),G.subscribe(B),!a&&m>0&&(a=new Dc({next:Z=>G.next(Z),error:Z=>{T=!0,D(),l=fr(I,t,Z),G.error(Z)},complete:()=>{y=!0,D(),l=fr(I,r),G.complete()}}),te(L).subscribe(a))})(s)}}()))}bootstrap(t,r){const i=t instanceof Cb;if(!this._injector.get(bE).done){!i&&function Th(e){const n=Xr(e)||Do(e)||Mo(e);return null!==n&&n.standalone}(t);throw new Mt(405,Mp)}let a;a=i?t:this._injector.get(Rh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const l=function sq(e){return e.isBoundToModule}(a)?void 0:this._injector.get(fv),m=a.create(na.NULL,[],r||a.selector,l),y=m.location.nativeElement,T=m.injector.get(I4,null);return T?.registerApplication(y),m.onDestroy(()=>{this.detachView(m.hostView),CE(this.components,m),T?.unregisterApplication(y)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Mt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;CE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(O4,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>CE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Mt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(t){return new(t||e)(Jt(ns),Jt(Ru),Jt(Yc))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function CE(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}let T_=(()=>{class e{}return e.__NG_ELEMENT_ID__=uq,e})();function uq(e){return function hq(e,n,t){if(Dd(e)&&!t){const r=Pa(e.index,n);return new Na(r,r)}return 47&e.type?new Na(n[ao],n):null}(fs(),Ut(),16==(16&e))}class q4{constructor(){}supports(n){return ke(n)}create(n){return new _q(n)}}const gq=(e,n)=>n;class _q{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||gq}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const a=!r||t&&t.currentIndex<Z4(r,i,s)?t:r,l=Z4(a,i,s),d=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,null==a.previousIndex)i++;else{s||(s=[]);const m=l-i,y=d-i;if(m!=y){for(let D=0;D<m;D++){const I=D<s.length?s[D]:s[D]=0,F=I+D;y<=F&&F<m&&(s[D]=I+1)}s[a.previousIndex]=y-m}}l!==d&&n(a,l,d)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!ke(n))throw new Mt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,s,a,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let l=0;l<this.length;l++)s=n[l],a=this._trackByFn(l,s),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,s,a,l)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,l),r=!0),t=t._next}else i=0,function Ee(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,l=>{a=this._trackByFn(i,l),null!==t&&Object.is(t.trackById,a)?(r&&(t=this._verifyReinsertion(t,l,a,i)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,a,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let s;return null===n?s=this._itTail:(s=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,s,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,s,i)):n=this._addAfter(new yq(t,r),s,i),n}_verifyReinsertion(n,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?n=this._reinsertAfter(s,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,s=n._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new X4),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X4),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class yq{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vq{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class X4{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new vq,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Z4(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class K4{constructor(){}supports(n){return n instanceof Map||Fe(n)}create(){return new xq}}class xq{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||Fe(n)))throw new Mt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const s=i._prev,a=i._next;return s&&(s._next=a),a&&(a._prev=s),i._next=null,i._prev=null,i}const r=new bq(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class bq{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function J4(){return new SE([new q4])}let SE=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||J4()),deps:[[e,new Bd,new jc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Mt(901,!1)}}return e.\u0275prov=pn({token:e,providedIn:"root",factory:J4}),e})();function Q4(){return new fw([new K4])}let fw=(()=>{class e{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||Q4()),deps:[[e,new Bd,new jc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Mt(901,!1)}}return e.\u0275prov=pn({token:e,providedIn:"root",factory:Q4}),e})();const Tq=R4(null,"core",[]);let Eq=(()=>{class e{constructor(t){}}return e.\u0275fac=function(t){return new(t||e)(Jt(C_))},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({}),e})();function vv(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let PA=null;function kp(){return PA}class Mq{}const No=new On("DocumentToken");let OA=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return function kq(){return Jt(eN)}()},providedIn:"platform"}),e})();const Aq=new On("Location Initialized");let eN=(()=>{class e extends OA{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kp().getBaseHref(this._doc)}onPopState(t){const r=kp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=kp().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){tN()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){tN()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:function(){return function Iq(){return new eN(Jt(No))}()},providedIn:"platform"}),e})();function tN(){return!!window.history.pushState}function LA(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function nN(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function Ap(e){return e&&"?"!==e[0]?"?"+e:e}let S_=(()=>{class e{historyGo(t){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return pr(iN)},providedIn:"root"}),e})();const rN=new On("appBaseHref");let iN=(()=>{class e extends S_{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??pr(No).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return LA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ap(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+Ap(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+Ap(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Jt(OA),Jt(rN,8))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pq=(()=>{class e extends S_{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=LA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+Ap(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+Ap(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return e.\u0275fac=function(t){return new(t||e)(Jt(OA),Jt(rN,8))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),D_=(()=>{class e{constructor(t){this._subject=new rr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fq(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(nN(sN(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ap(r))}normalize(t){return e.stripTrailingSlash(function Lq(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,sN(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ap(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ap(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return e.normalizeQueryParams=Ap,e.joinWithSlash=LA,e.stripTrailingSlash=nN,e.\u0275fac=function(t){return new(t||e)(Jt(S_))},e.\u0275prov=pn({token:e,factory:function(){return function Oq(){return new D_(Jt(S_))}()},providedIn:"root"}),e})();function sN(e){return e.replace(/\/index.html$/,"")}var vo=(()=>((vo=vo||{})[vo.Format=0]="Format",vo[vo.Standalone=1]="Standalone",vo))(),Jr=(()=>((Jr=Jr||{})[Jr.Narrow=0]="Narrow",Jr[Jr.Abbreviated=1]="Abbreviated",Jr[Jr.Wide=2]="Wide",Jr[Jr.Short=3]="Short",Jr))(),Bs=(()=>((Bs=Bs||{})[Bs.Short=0]="Short",Bs[Bs.Medium=1]="Medium",Bs[Bs.Long=2]="Long",Bs[Bs.Full=3]="Full",Bs))(),Jn=(()=>((Jn=Jn||{})[Jn.Decimal=0]="Decimal",Jn[Jn.Group=1]="Group",Jn[Jn.List=2]="List",Jn[Jn.PercentSign=3]="PercentSign",Jn[Jn.PlusSign=4]="PlusSign",Jn[Jn.MinusSign=5]="MinusSign",Jn[Jn.Exponential=6]="Exponential",Jn[Jn.SuperscriptingExponent=7]="SuperscriptingExponent",Jn[Jn.PerMille=8]="PerMille",Jn[Jn.Infinity=9]="Infinity",Jn[Jn.NaN=10]="NaN",Jn[Jn.TimeSeparator=11]="TimeSeparator",Jn[Jn.CurrencyDecimal=12]="CurrencyDecimal",Jn[Jn.CurrencyGroup=13]="CurrencyGroup",Jn))();function DE(e,n){return ju(Bl(e)[Mn.DateFormat],n)}function ME(e,n){return ju(Bl(e)[Mn.TimeFormat],n)}function kE(e,n){return ju(Bl(e)[Mn.DateTimeFormat],n)}function Uu(e,n){const t=Bl(e),r=t[Mn.NumberSymbols][n];if(typeof r>"u"){if(n===Jn.CurrencyDecimal)return t[Mn.NumberSymbols][Jn.Decimal];if(n===Jn.CurrencyGroup)return t[Mn.NumberSymbols][Jn.Group]}return r}function aN(e){if(!e[Mn.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[Mn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ju(e,n){for(let t=n;t>-1;t--)if(typeof e[t]<"u")return e[t];throw new Error("Locale data API: locale data undefined")}function RA(e){const[n,t]=e.split(":");return{hours:+n,minutes:+t}}const qq=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,pw={},Xq=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ia=(()=>((ia=ia||{})[ia.Short=0]="Short",ia[ia.ShortGMT=1]="ShortGMT",ia[ia.Long=2]="Long",ia[ia.Extended=3]="Extended",ia))(),ar=(()=>((ar=ar||{})[ar.FullYear=0]="FullYear",ar[ar.Month=1]="Month",ar[ar.Date=2]="Date",ar[ar.Hours=3]="Hours",ar[ar.Minutes=4]="Minutes",ar[ar.Seconds=5]="Seconds",ar[ar.FractionalSeconds=6]="FractionalSeconds",ar[ar.Day=7]="Day",ar))(),Or=(()=>((Or=Or||{})[Or.DayPeriods=0]="DayPeriods",Or[Or.Days=1]="Days",Or[Or.Months=2]="Months",Or[Or.Eras=3]="Eras",Or))();function Zq(e,n,t,r){let i=function sX(e){if(uN(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){const[i,s=1,a=1]=e.split("-").map(l=>+l);return AE(i,s-1,a)}const t=parseFloat(e);if(!isNaN(e-t))return new Date(t);let r;if(r=e.match(qq))return function oX(e){const n=new Date(0);let t=0,r=0;const i=e[8]?n.setUTCFullYear:n.setFullYear,s=e[8]?n.setUTCHours:n.setHours;e[9]&&(t=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(n,Number(e[1]),Number(e[2])-1,Number(e[3]));const a=Number(e[4]||0)-t,l=Number(e[5]||0)-r,d=Number(e[6]||0),m=Math.floor(1e3*parseFloat("0."+(e[7]||0)));return s.call(n,a,l,d,m),n}(r)}const n=new Date(e);if(!uN(n))throw new Error(`Unable to convert "${e}" into a date`);return n}(e);n=Ip(t,n)||n;let l,a=[];for(;n;){if(l=Xq.exec(n),!l){a.push(n);break}{a=a.concat(l.slice(1));const y=a.pop();if(!y)break;n=y}}let d=i.getTimezoneOffset();r&&(d=cN(r,d),i=function iX(e,n,t){const r=t?-1:1,i=e.getTimezoneOffset();return function rX(e,n){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+n),e}(e,r*(cN(n,i)-i))}(i,r,!0));let m="";return a.forEach(y=>{const T=function nX(e){if(BA[e])return BA[e];let n;switch(e){case"G":case"GG":case"GGG":n=rs(Or.Eras,Jr.Abbreviated);break;case"GGGG":n=rs(Or.Eras,Jr.Wide);break;case"GGGGG":n=rs(Or.Eras,Jr.Narrow);break;case"y":n=zo(ar.FullYear,1,0,!1,!0);break;case"yy":n=zo(ar.FullYear,2,0,!0,!0);break;case"yyy":n=zo(ar.FullYear,3,0,!1,!0);break;case"yyyy":n=zo(ar.FullYear,4,0,!1,!0);break;case"Y":n=LE(1);break;case"YY":n=LE(2,!0);break;case"YYY":n=LE(3);break;case"YYYY":n=LE(4);break;case"M":case"L":n=zo(ar.Month,1,1);break;case"MM":case"LL":n=zo(ar.Month,2,1);break;case"MMM":n=rs(Or.Months,Jr.Abbreviated);break;case"MMMM":n=rs(Or.Months,Jr.Wide);break;case"MMMMM":n=rs(Or.Months,Jr.Narrow);break;case"LLL":n=rs(Or.Months,Jr.Abbreviated,vo.Standalone);break;case"LLLL":n=rs(Or.Months,Jr.Wide,vo.Standalone);break;case"LLLLL":n=rs(Or.Months,Jr.Narrow,vo.Standalone);break;case"w":n=NA(1);break;case"ww":n=NA(2);break;case"W":n=NA(1,!0);break;case"d":n=zo(ar.Date,1);break;case"dd":n=zo(ar.Date,2);break;case"c":case"cc":n=zo(ar.Day,1);break;case"ccc":n=rs(Or.Days,Jr.Abbreviated,vo.Standalone);break;case"cccc":n=rs(Or.Days,Jr.Wide,vo.Standalone);break;case"ccccc":n=rs(Or.Days,Jr.Narrow,vo.Standalone);break;case"cccccc":n=rs(Or.Days,Jr.Short,vo.Standalone);break;case"E":case"EE":case"EEE":n=rs(Or.Days,Jr.Abbreviated);break;case"EEEE":n=rs(Or.Days,Jr.Wide);break;case"EEEEE":n=rs(Or.Days,Jr.Narrow);break;case"EEEEEE":n=rs(Or.Days,Jr.Short);break;case"a":case"aa":case"aaa":n=rs(Or.DayPeriods,Jr.Abbreviated);break;case"aaaa":n=rs(Or.DayPeriods,Jr.Wide);break;case"aaaaa":n=rs(Or.DayPeriods,Jr.Narrow);break;case"b":case"bb":case"bbb":n=rs(Or.DayPeriods,Jr.Abbreviated,vo.Standalone,!0);break;case"bbbb":n=rs(Or.DayPeriods,Jr.Wide,vo.Standalone,!0);break;case"bbbbb":n=rs(Or.DayPeriods,Jr.Narrow,vo.Standalone,!0);break;case"B":case"BB":case"BBB":n=rs(Or.DayPeriods,Jr.Abbreviated,vo.Format,!0);break;case"BBBB":n=rs(Or.DayPeriods,Jr.Wide,vo.Format,!0);break;case"BBBBB":n=rs(Or.DayPeriods,Jr.Narrow,vo.Format,!0);break;case"h":n=zo(ar.Hours,1,-12);break;case"hh":n=zo(ar.Hours,2,-12);break;case"H":n=zo(ar.Hours,1);break;case"HH":n=zo(ar.Hours,2);break;case"m":n=zo(ar.Minutes,1);break;case"mm":n=zo(ar.Minutes,2);break;case"s":n=zo(ar.Seconds,1);break;case"ss":n=zo(ar.Seconds,2);break;case"S":n=zo(ar.FractionalSeconds,1);break;case"SS":n=zo(ar.FractionalSeconds,2);break;case"SSS":n=zo(ar.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":n=PE(ia.Short);break;case"ZZZZZ":n=PE(ia.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":n=PE(ia.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":n=PE(ia.Long);break;default:return null}return BA[e]=n,n}(y);m+=T?T(i,t,d):"''"===y?"'":y.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),m}function AE(e,n,t){const r=new Date(0);return r.setFullYear(e,n,t),r.setHours(0,0,0),r}function Ip(e,n){const t=function Rq(e){return Bl(e)[Mn.LocaleId]}(e);if(pw[t]=pw[t]||{},pw[t][n])return pw[t][n];let r="";switch(n){case"shortDate":r=DE(e,Bs.Short);break;case"mediumDate":r=DE(e,Bs.Medium);break;case"longDate":r=DE(e,Bs.Long);break;case"fullDate":r=DE(e,Bs.Full);break;case"shortTime":r=ME(e,Bs.Short);break;case"mediumTime":r=ME(e,Bs.Medium);break;case"longTime":r=ME(e,Bs.Long);break;case"fullTime":r=ME(e,Bs.Full);break;case"short":const i=Ip(e,"shortTime"),s=Ip(e,"shortDate");r=IE(kE(e,Bs.Short),[i,s]);break;case"medium":const a=Ip(e,"mediumTime"),l=Ip(e,"mediumDate");r=IE(kE(e,Bs.Medium),[a,l]);break;case"long":const d=Ip(e,"longTime"),m=Ip(e,"longDate");r=IE(kE(e,Bs.Long),[d,m]);break;case"full":const y=Ip(e,"fullTime"),T=Ip(e,"fullDate");r=IE(kE(e,Bs.Full),[y,T])}return r&&(pw[t][n]=r),r}function IE(e,n){return n&&(e=e.replace(/\{([^}]+)}/g,function(t,r){return null!=n&&r in n?n[r]:t})),e}function jh(e,n,t="-",r,i){let s="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,s=t));let a=String(e);for(;a.length<n;)a="0"+a;return r&&(a=a.slice(a.length-n)),s+a}function zo(e,n,t=0,r=!1,i=!1){return function(s,a){let l=function Jq(e,n){switch(e){case ar.FullYear:return n.getFullYear();case ar.Month:return n.getMonth();case ar.Date:return n.getDate();case ar.Hours:return n.getHours();case ar.Minutes:return n.getMinutes();case ar.Seconds:return n.getSeconds();case ar.FractionalSeconds:return n.getMilliseconds();case ar.Day:return n.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}(e,s);if((t>0||l>-t)&&(l+=t),e===ar.Hours)0===l&&-12===t&&(l=12);else if(e===ar.FractionalSeconds)return function Kq(e,n){return jh(e,3).substring(0,n)}(l,n);const d=Uu(a,Jn.MinusSign);return jh(l,n,d,r,i)}}function rs(e,n,t=vo.Format,r=!1){return function(i,s){return function Qq(e,n,t,r,i,s){switch(t){case Or.Months:return function zq(e,n,t){const r=Bl(e),s=ju([r[Mn.MonthsFormat],r[Mn.MonthsStandalone]],n);return ju(s,t)}(n,i,r)[e.getMonth()];case Or.Days:return function Bq(e,n,t){const r=Bl(e),s=ju([r[Mn.DaysFormat],r[Mn.DaysStandalone]],n);return ju(s,t)}(n,i,r)[e.getDay()];case Or.DayPeriods:const a=e.getHours(),l=e.getMinutes();if(s){const m=function Hq(e){const n=Bl(e);return aN(n),(n[Mn.ExtraData][2]||[]).map(r=>"string"==typeof r?RA(r):[RA(r[0]),RA(r[1])])}(n),y=function $q(e,n,t){const r=Bl(e);aN(r);const s=ju([r[Mn.ExtraData][0],r[Mn.ExtraData][1]],n)||[];return ju(s,t)||[]}(n,i,r),T=m.findIndex(D=>{if(Array.isArray(D)){const[I,F]=D,L=a>=I.hours&&l>=I.minutes,B=a<F.hours||a===F.hours&&l<F.minutes;if(I.hours<F.hours){if(L&&B)return!0}else if(L||B)return!0}else if(D.hours===a&&D.minutes===l)return!0;return!1});if(-1!==T)return y[T]}return function Nq(e,n,t){const r=Bl(e),s=ju([r[Mn.DayPeriodsFormat],r[Mn.DayPeriodsStandalone]],n);return ju(s,t)}(n,i,r)[a<12?0:1];case Or.Eras:return function Vq(e,n){return ju(Bl(e)[Mn.Eras],n)}(n,r)[e.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,e,n,t,r)}}function PE(e){return function(n,t,r){const i=-1*r,s=Uu(t,Jn.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case ia.Short:return(i>=0?"+":"")+jh(a,2,s)+jh(Math.abs(i%60),2,s);case ia.ShortGMT:return"GMT"+(i>=0?"+":"")+jh(a,1,s);case ia.Long:return"GMT"+(i>=0?"+":"")+jh(a,2,s)+":"+jh(Math.abs(i%60),2,s);case ia.Extended:return 0===r?"Z":(i>=0?"+":"")+jh(a,2,s)+":"+jh(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${e}"`)}}}const eX=0,OE=4;function lN(e){return AE(e.getFullYear(),e.getMonth(),e.getDate()+(OE-e.getDay()))}function NA(e,n=!1){return function(t,r){let i;if(n){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,a=t.getDate();i=1+Math.floor((a+s)/7)}else{const s=lN(t),a=function tX(e){const n=AE(e,eX,1).getDay();return AE(e,0,1+(n<=OE?OE:OE+7)-n)}(s.getFullYear()),l=s.getTime()-a.getTime();i=1+Math.round(l/6048e5)}return jh(i,e,Uu(r,Jn.MinusSign))}}function LE(e,n=!1){return function(t,r){return jh(lN(t).getFullYear(),e,Uu(r,Jn.MinusSign),n)}}const BA={};function cN(e,n){e=e.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(t)?n:t}function uN(e){return e instanceof Date&&!isNaN(e.valueOf())}function pN(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(s)}return null}const $A=/\s+/,mN=[];let RE=(()=>{class e{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=mN,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split($A):mN}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split($A):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split($A).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return e.\u0275fac=function(t){return new(t||e)(We(SE),We(fw),We(_s),We(ta))},e.\u0275dir=Un({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),e})();class vX{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vs=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,a)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new vX(i.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)r.remove(null===s?void 0:s);else if(null!==s){const l=r.get(s);r.move(l,a),yN(l,i)}});for(let i=0,s=r.length;i<s;i++){const l=r.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{yN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(We(vc),We(nf),We(SE))},e.\u0275dir=Un({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function yN(e,n){e.context.$implicit=n.item}let Hh=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new bX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return e.\u0275fac=function(t){return new(t||e)(We(vc),We(nf))},e.\u0275dir=Un({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class bX{constructor(){this.$implicit=null,this.ngIf=null}}function vN(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${ii(n)}'.`)}class WA{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let gw=(()=>{class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Un({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),GA=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new WA(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return e.\u0275fac=function(t){return new(t||e)(We(vc),We(nf),We(gw,9))},e.\u0275dir=Un({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})();function $h(e,n){return new Mt(2100,!1)}class CX{createSubscription(n,t){return n.subscribe({next:t,error:r=>{throw r}})}dispose(n){n.unsubscribe()}}class TX{createSubscription(n,t){return n.then(t,r=>{throw r})}dispose(n){}}const EX=new TX,SX=new CX;let YA=(()=>{class e{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Gs(t))return EX;if(Ys(t))return SX;throw $h()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(We(T_,16))},e.\u0275pipe=so({name:"async",type:e,pure:!1,standalone:!0}),e})();const PX=new On("DATE_PIPE_DEFAULT_TIMEZONE"),OX=new On("DATE_PIPE_DEFAULT_OPTIONS");let M_=(()=>{class e{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return Zq(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(a){throw $h()}}}return e.\u0275fac=function(t){return new(t||e)(We(Dp,16),We(PX,24),We(OX,24))},e.\u0275pipe=so({name:"date",type:e,pure:!0,standalone:!0}),e})(),_w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({}),e})();const wN="browser";function ZA(e){return e===wN}let GX=(()=>{class e{}return e.\u0275prov=pn({token:e,providedIn:"root",factory:()=>new YX(Jt(No),window)}),e})();class YX{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function qX(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(n)||s.querySelector(`[name="${n}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=CN(this.window.history)||CN(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function CN(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class TN{}class bZ extends Mq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class QA extends bZ{static makeCurrent(){!function Dq(e){PA||(PA=e)}(new QA)}onAndCancel(n,t,r){return n.addEventListener(t,r,!1),()=>{n.removeEventListener(t,r,!1)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function wZ(){return vw=vw||document.querySelector("base"),vw?vw.getAttribute("href"):null}();return null==t?null:function CZ(e){zE=zE||document.createElement("a"),zE.setAttribute("href",e);const n=zE.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){vw=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return pN(document.cookie,n)}}let zE,vw=null;const kN=new On("TRANSITION_ID"),EZ=[{provide:hw,useFactory:function TZ(e,n,t){return()=>{t.get(bE).donePromise.then(()=>{const r=kp(),i=n.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[kN,No,na],multi:!0}];let DZ=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const VE=new On("EventManagerPlugins");let UE=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return e.\u0275fac=function(t){return new(t||e)(Jt(VE),Jt(ns))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();class AN{constructor(n){this._doc=n}addGlobalEventListener(n,t,r){const i=kp().getGlobalEventTarget(this._doc,n);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let IN=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),xw=(()=>{class e extends IN{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const eI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tI=/%COMP%/g,LN=new On("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function FN(e,n){return n.flat(100).map(t=>t.replace(tI,e))}function RN(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&(n.preventDefault(),n.returnValue=!1)}}let jE=(()=>{class e{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new nI(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof zN?i.applyToHost(t):i instanceof rI&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const a=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestory;switch(r.encapsulation){case Ja.Emulated:s=new zN(a,l,r,this.appId,d);break;case Ja.ShadowDom:return new LZ(a,l,t,r);default:s=new rI(a,l,r,d)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Jt(UE),Jt(xw),Jt(dw),Jt(LN))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();class nI{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?document.createElementNS(eI[t]||t,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,t){(BN(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(BN(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?document.querySelector(n):n;if(!r)throw new Error(`The selector "${n}" did not match any elements`);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const s=eI[i];s?n.setAttributeNS(s,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=eI[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Lo.DashCase|Lo.Important)?n.style.setProperty(t,r,i&Lo.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Lo.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,t,RN(r)):this.eventManager.addEventListener(n,t,RN(r))}}function BN(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class LZ extends nI{constructor(n,t,r,i){super(n),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=FN(i.id,i.styles);for(const a of s){const l=document.createElement("style");l.textContent=a,this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class rI extends nI{constructor(n,t,r,i,s=r.id){super(n),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=FN(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zN extends rI{constructor(n,t,r,i,s){const a=i+"-"+r.id;super(n,t,r,s,a),this.contentAttr=function IZ(e){return"_ngcontent-%COMP%".replace(tI,e)}(a),this.hostAttr=function PZ(e){return"_nghost-%COMP%".replace(tI,e)}(a)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}let FZ=(()=>{class e extends AN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const VN=["alt","control","meta","shift"],RZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NZ={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let BZ=(()=>{class e extends AN{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kp().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),VN.forEach(m=>{const y=r.indexOf(m);y>-1&&(r.splice(y,1),a+=m+".")}),a+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(t,r){let i=RZ[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),VN.forEach(a=>{a!==i&&(0,NZ[a])(t)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{e.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const jN=[{provide:yv,useValue:wN},{provide:T4,useValue:function zZ(){QA.makeCurrent()},multi:!0},{provide:No,useFactory:function UZ(){return function uT(e){Wm=e}(document),document},deps:[]}],jZ=R4(Tq,"browser",jN),HN=new On(""),$N=[{provide:wE,useClass:class SZ{addToWindow(n){Ai.getAngularTestability=(r,i=!0)=>{const s=n.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Ai.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ai.getAllAngularRootElements=()=>n.getAllRootElements(),Ai.frameworkStabilizers||(Ai.frameworkStabilizers=[]),Ai.frameworkStabilizers.push(r=>{const i=Ai.getAllAngularTestabilities();let s=i.length,a=!1;const l=function(d){a=a||d,s--,0==s&&r(a)};i.forEach(function(d){d.whenStable(l)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?kp().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:I4,useClass:CA,deps:[ns,TA,wE]},{provide:CA,useClass:CA,deps:[ns,TA,wE]}],WN=[{provide:L1,useValue:"root"},{provide:Yc,useFactory:function VZ(){return new Yc},deps:[]},{provide:VE,useClass:FZ,multi:!0,deps:[No,ns,yv]},{provide:VE,useClass:BZ,multi:!0,deps:[No]},{provide:jE,useClass:jE,deps:[UE,xw,dw,LN]},{provide:tg,useExisting:jE},{provide:IN,useExisting:xw},{provide:xw,useClass:xw,deps:[No]},{provide:UE,useClass:UE,deps:[VE,ns]},{provide:TN,useClass:DZ,deps:[]},[]];let GN=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:dw,useValue:t.appId},{provide:kN,useExisting:dw},EZ]}}}return e.\u0275fac=function(t){return new(t||e)(Jt(HN,12))},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({providers:[...WN,...$N],imports:[_w,Eq]}),e})(),YN=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:function(t){let r=null;return r=t?new t:function $Z(){return new YN(Jt(No))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let k_=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(t){let r=null;return r=t?new(t||e):Jt(ZN),r},providedIn:"root"}),e})(),ZN=(()=>{class e extends k_{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Gi.NONE:return r;case Gi.HTML:return bi(r,"HTML")?Ll(r):bT(this._doc,String(r)).toString();case Gi.STYLE:return bi(r,"Style")?Ll(r):r;case Gi.SCRIPT:if(bi(r,"Script"))return Ll(r);throw new Error("unsafe value used in a script context");case Gi.URL:return bi(r,"URL")?Ll(r):J0(String(r));case Gi.RESOURCE_URL:if(bi(r,"ResourceURL"))return Ll(r);throw new Error(`unsafe value used in a resource URL context (see ${io})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${io})`)}}bypassSecurityTrustHtml(t){return function pT(e){return new nk(e)}(t)}bypassSecurityTrustStyle(t){return function T1(e){return new rk(e)}(t)}bypassSecurityTrustScript(t){return function E1(e){return new lb(e)}(t)}bypassSecurityTrustUrl(t){return function Z0(e){return new ik(e)}(t)}bypassSecurityTrustResourceUrl(t){return function mT(e){return new Gm(e)}(t)}}return e.\u0275fac=function(t){return new(t||e)(Jt(No))},e.\u0275prov=pn({token:e,factory:function(t){let r=null;return r=t?new t:function XZ(e){return new ZN(e.get(No))}(Jt(na)),r},providedIn:"root"}),e})();function qn(...e){return as(e,Br(e))}class Va extends qi{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const HE=c0(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:ZZ}=Array,{getPrototypeOf:KZ,prototype:JZ,keys:QZ}=Object;function KN(e){if(1===e.length){const n=e[0];if(ZZ(n))return{args:n,keys:null};if(function eK(e){return e&&"object"==typeof e&&KZ(e)===JZ}(n)){const t=QZ(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:tK}=Array;function oI(e){return jn(n=>function nK(e,n){return tK(n)?e(...n):e(n)}(e,n))}function JN(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function aI(...e){const n=Br(e),t=Ln(e),{args:r,keys:i}=KN(e);if(0===r.length)return as([],n);const s=new er(function rK(e,n,t=ha){return r=>{QN(n,()=>{const{length:i}=e,s=new Array(i);let a=i,l=i;for(let d=0;d<i;d++)QN(n,()=>{const m=as(e[d],n);let y=!1;m.subscribe(ki(r,T=>{s[d]=T,y||(y=!0,l--),l||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,n,i?a=>JN(i,a):ha));return t?s.pipe(oI(t)):s}function QN(e,n,t){e?wt(t,e,n):n()}function bw(...e){return function iK(){return kn(1)}()(as(e,Br(e)))}function $E(e){return new er(n=>{te(e()).subscribe(n)})}function xv(e,n){const t=$r(e)?e:()=>e,r=i=>i.error(t());return new er(n?i=>n.schedule(r,0,i):r)}function lI(){return yi((e,n)=>{let t=null;e._refCount++;const r=ki(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class cI extends er{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Cl(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Et;const t=this.getSubject();n.add(this.source.subscribe(ki(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Et.EMPTY)}return n}refCount(){return lI()(this)}}function bc(e,n){return yi((t,r)=>{let i=null,s=0,a=!1;const l=()=>a&&!i&&r.complete();t.subscribe(ki(r,d=>{i?.unsubscribe();let m=0;const y=s++;te(e(d,y)).subscribe(i=ki(r,T=>r.next(n?n(d,T,y,m++):T),()=>{i=null,l()}))},()=>{a=!0,l()}))})}function Ul(e){return e<=0?()=>vn:yi((n,t)=>{let r=0;n.subscribe(ki(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Ri(e,n){return yi((t,r)=>{let i=0;t.subscribe(ki(r,s=>e.call(n,s,i++)&&r.next(s)))})}function WE(e){return yi((n,t)=>{let r=!1;n.subscribe(ki(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function e5(e=oK){return yi((n,t)=>{let r=!1;n.subscribe(ki(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function oK(){return new HE}function yg(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ri((i,s)=>e(i,s,r)):ha,Ul(1),t?WE(n):e5(()=>new HE))}function vg(e,n){return $r(n)?Ct(e,n,1):Ct(e,1)}function Ua(e,n,t){const r=$r(e)||n||t?{next:e,error:n,complete:t}:e;return r?yi((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let l=!0;i.subscribe(ki(s,d=>{var m;null===(m=r.next)||void 0===m||m.call(r,d),s.next(d)},()=>{var d;l=!1,null===(d=r.complete)||void 0===d||d.call(r),s.complete()},d=>{var m;l=!1,null===(m=r.error)||void 0===m||m.call(r,d),s.error(d)},()=>{var d,m;l&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):ha}function xg(e){return yi((n,t)=>{let s,r=null,i=!1;r=n.subscribe(ki(t,void 0,void 0,a=>{s=te(e(a,xg(e)(n))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function uI(e,n){return yi(function aK(e,n,t,r,i){return(s,a)=>{let l=t,d=n,m=0;s.subscribe(ki(a,y=>{const T=m++;d=l?e(d,y,T):(l=!0,y),r&&a.next(d)},i&&(()=>{l&&a.next(d),a.complete()})))}}(e,n,arguments.length>=2,!0))}function hI(e){return e<=0?()=>vn:yi((n,t)=>{let r=[];n.subscribe(ki(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function t5(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Ri((i,s)=>e(i,s,r)):ha,hI(1),t?WE(n):e5(()=>new HE))}function n5(e){return jn(()=>e)}function dI(e){return yi((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const Dr="primary",ww=Symbol("RouteTitle");class cK{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bv(e){return new cK(e)}function uK(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],l=e[s];if(a.startsWith(":"))i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function rf(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!r5(e[i],n[i]))return!1;return!0}function r5(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,s)=>r[s]===i)}return e===n}function s5(e){return Array.prototype.concat.apply([],e)}function o5(e){return e.length>0?e[e.length-1]:null}function ja(e,n){for(const t in e)e.hasOwnProperty(t)&&n(e[t],t)}function bg(e){return Xc(e)?e:Gs(e)?as(Promise.resolve(e)):qn(e)}const GE=!1,dK={exact:function c5(e,n,t){if(!A_(e.segments,n.segments)||!YE(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!c5(e.children[r],n.children[r],t))return!1;return!0},subset:u5},a5={exact:function fK(e,n){return rf(e,n)},subset:function pK(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>r5(e[t],n[t]))},ignored:()=>!0};function l5(e,n,t){return dK[t.paths](e.root,n.root,t.matrixParams)&&a5[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function u5(e,n,t){return h5(e,n,n.segments,t)}function h5(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!A_(i,t)||n.hasChildren()||!YE(i,t,r))}if(e.segments.length===t.length){if(!A_(e.segments,t)||!YE(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!u5(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),s=t.slice(e.segments.length);return!!(A_(e.segments,i)&&YE(e.segments,i,r)&&e.children[Dr])&&h5(e.children[Dr],n,s,r)}}function YE(e,n,t){return n.every((r,i)=>a5[t](e[i].parameters,r.parameters))}class wg{constructor(n=new Gr([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bv(this.queryParams)),this._queryParamMap}toString(){return _K.serialize(this)}}class Gr{constructor(n,t){this.segments=n,this.children=t,this.parent=null,ja(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return qE(this)}}class Cw{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bv(this.parameters)),this._parameterMap}toString(){return p5(this)}}function A_(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let Tw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return new fI},providedIn:"root"}),e})();class fI{parse(n){const t=new SK(n);return new wg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${Ew(n.root,!0)}`,r=function xK(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${XE(t)}=${XE(i)}`).join("&"):`${XE(t)}=${XE(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function yK(e){return encodeURI(e)}(n.fragment)}`:""}`}}const _K=new fI;function qE(e){return e.segments.map(n=>p5(n)).join("/")}function Ew(e,n){if(!e.hasChildren())return qE(e);if(n){const t=e.children[Dr]?Ew(e.children[Dr],!1):"",r=[];return ja(e.children,(i,s)=>{s!==Dr&&r.push(`${s}:${Ew(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function gK(e,n){let t=[];return ja(e.children,(r,i)=>{i===Dr&&(t=t.concat(n(r,i)))}),ja(e.children,(r,i)=>{i!==Dr&&(t=t.concat(n(r,i)))}),t}(e,(r,i)=>i===Dr?[Ew(e.children[Dr],!1)]:[`${i}:${Ew(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Dr]?`${qE(e)}/${t[0]}`:`${qE(e)}/(${t.join("//")})`}}function d5(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function XE(e){return d5(e).replace(/%3B/gi,";")}function pI(e){return d5(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ZE(e){return decodeURIComponent(e)}function f5(e){return ZE(e.replace(/\+/g,"%20"))}function p5(e){return`${pI(e.path)}${function vK(e){return Object.keys(e).map(n=>`;${pI(n)}=${pI(e[n])}`).join("")}(e.parameters)}`}const bK=/^[^\/()?;=#]+/;function KE(e){const n=e.match(bK);return n?n[0]:""}const wK=/^[^=?&#]+/,TK=/^[^&#]+/;class SK{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gr([],{}):new Gr([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[Dr]=new Gr(n,t)),r}parseSegment(){const n=KE(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Mt(4009,GE);return this.capture(n),new Cw(ZE(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=KE(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=KE(this.remaining);i&&(r=i,this.capture(r))}n[ZE(t)]=ZE(r)}parseQueryParam(n){const t=function CK(e){const n=e.match(wK);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function EK(e){const n=e.match(TK);return n?n[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=f5(t),s=f5(r);if(n.hasOwnProperty(i)){let a=n[i];Array.isArray(a)||(a=[a],n[i]=a),a.push(s)}else n[i]=s}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=KE(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Mt(4010,GE);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):n&&(s=Dr);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[Dr]:new Gr([],a),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Mt(4011,GE)}}function mI(e){return e.segments.length>0?new Gr([],{[Dr]:e}):e}function JE(e){const n={};for(const r of Object.keys(e.children)){const s=JE(e.children[r]);(s.segments.length>0||s.hasChildren())&&(n[r]=s)}return function DK(e){if(1===e.numberOfChildren&&e.children[Dr]){const n=e.children[Dr];return new Gr(e.segments.concat(n.segments),n.children)}return e}(new Gr(e.segments,n))}function I_(e){return e instanceof wg}const gI=!1;function MK(e,n,t,r,i){if(0===t.length)return wv(n.root,n.root,n.root,r,i);const s=function v5(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new y5(!0,0,e);let n=0,t=!1;const r=e.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return ja(s.outlets,(d,m)=>{l[m]="string"==typeof d?d.split("/"):d}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((l,d)=>{0==d&&"."===l||(0==d&&""===l?t=!0:".."===l?n++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new y5(t,n,r)}(t);return s.toRoot()?wv(n.root,n.root,new Gr([],{}),r,i):function a(d){const m=function AK(e,n,t,r){if(e.isAbsolute)return new Cv(n.root,!0,0);if(-1===r)return new Cv(t,t===n.root,0);return function x5(e,n,t){let r=e,i=n,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Mt(4005,gI&&"Invalid number of '../'");i=r.segments.length}return new Cv(r,!1,i-s)}(t,r+(Sw(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,n,e.snapshot?._urlSegment,d),y=m.processChildren?Tv(m.segmentGroup,m.index,s.commands):_I(m.segmentGroup,m.index,s.commands);return wv(n.root,m.segmentGroup,y,r,i)}(e.snapshot?._lastPathIndex)}function Sw(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Dw(e){return"object"==typeof e&&null!=e&&e.outlets}function wv(e,n,t,r,i){let a,s={};r&&ja(r,(d,m)=>{s[m]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),a=e===n?t:_5(e,n,t);const l=mI(JE(a));return new wg(l,s,i)}function _5(e,n,t){const r={};return ja(e.children,(i,s)=>{r[s]=i===n?t:_5(i,n,t)}),new Gr(e.segments,r)}class y5{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&Sw(r[0]))throw new Mt(4003,gI&&"Root segment cannot have matrix parameters");const i=r.find(Dw);if(i&&i!==o5(r))throw new Mt(4004,gI&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cv{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function _I(e,n,t){if(e||(e=new Gr([],{})),0===e.segments.length&&e.hasChildren())return Tv(e,n,t);const r=function PK(e,n,t){let r=0,i=n;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return s;const a=e.segments[i],l=t[r];if(Dw(l))break;const d=`${l}`,m=r<t.length-1?t[r+1]:null;if(i>0&&void 0===d)break;if(d&&m&&"object"==typeof m&&void 0===m.outlets){if(!w5(d,m,a))return s;r+=2}else{if(!w5(d,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new Gr(e.segments.slice(0,r.pathIndex),{});return s.children[Dr]=new Gr(e.segments.slice(r.pathIndex),e.children),Tv(s,0,i)}return r.match&&0===i.length?new Gr(e.segments,{}):r.match&&!e.hasChildren()?yI(e,n,t):r.match?Tv(e,0,i):yI(e,n,t)}function Tv(e,n,t){if(0===t.length)return new Gr(e.segments,{});{const r=function IK(e){return Dw(e[0])?e[0].outlets:{[Dr]:e}}(t),i={};return!r[Dr]&&e.children[Dr]&&1===e.numberOfChildren&&0===e.children[Dr].segments.length?Tv(e.children[Dr],n,t):(ja(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=_I(e.children[a],n,s))}),ja(e.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Gr(e.segments,i))}}function yI(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const s=t[i];if(Dw(s)){const d=OK(s.outlets);return new Gr(r,d)}if(0===i&&Sw(t[0])){r.push(new Cw(e.segments[n].path,b5(t[0]))),i++;continue}const a=Dw(s)?s.outlets[Dr]:`${s}`,l=i<t.length-1?t[i+1]:null;a&&l&&Sw(l)?(r.push(new Cw(a,b5(l))),i+=2):(r.push(new Cw(a,{})),i++)}return new Gr(r,{})}function OK(e){const n={};return ja(e,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(n[r]=yI(new Gr([],{}),0,t))}),n}function b5(e){const n={};return ja(e,(t,r)=>n[r]=`${t}`),n}function w5(e,n,t){return e==t.path&&rf(n,t.parameters)}const Mw="imperative";class sf{constructor(n,t){this.id=n,this.url=t}}class vI extends sf{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class P_ extends sf{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class QE extends sf{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eS extends sf{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=16}}class xI extends sf{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LK extends sf{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FK extends sf{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RK extends sf{constructor(n,t,r,i,s){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class NK extends sf{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BK extends sf{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zK{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class VK{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class UK{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jK{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class HK{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $K{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C5{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let YK=(()=>{class e{createUrlTree(t,r,i,s,a,l){return MK(t||r.root,i,s,a,l)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),XK=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(n){return YK.\u0275fac(n)},providedIn:"root"}),e})();class T5{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=bI(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=bI(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=wI(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return wI(n,this._root).map(t=>t.value)}}function bI(e,n){if(e===n.value)return n;for(const t of n.children){const r=bI(e,t);if(r)return r}return null}function wI(e,n){if(e===n.value)return[n];for(const t of n.children){const r=wI(e,t);if(r.length)return r.unshift(n),r}return[]}class Pp{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ev(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class E5 extends T5{constructor(n,t){super(n),this.snapshot=t,CI(this,n)}toString(){return this.snapshot.toString()}}function S5(e,n){const t=function ZK(e,n){const a=new tS([],{},{},"",{},Dr,n,null,e.root,-1,{});return new M5("",new Pp(a,[]))}(e,n),r=new Va([new Cw("",{})]),i=new Va({}),s=new Va({}),a=new Va({}),l=new Va(""),d=new Cg(r,i,a,l,s,Dr,n,t.root);return d.snapshot=t.root,new E5(new Pp(d,[]),t)}class Cg{constructor(n,t,r,i,s,a,l,d){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.title=this.data?.pipe(jn(m=>m[ww]))??qn(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(jn(n=>bv(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(jn(n=>bv(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function D5(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function KK(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class tS{get title(){return this.data?.[ww]}constructor(n,t,r,i,s,a,l,d,m,y,T){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.routeConfig=d,this._urlSegment=m,this._lastPathIndex=y,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class M5 extends T5{constructor(n,t){super(t),this.url=n,CI(this,t)}toString(){return k5(this._root)}}function CI(e,n){n.value._routerState=e,n.children.forEach(t=>CI(e,t))}function k5(e){const n=e.children.length>0?` { ${e.children.map(k5).join(", ")} } `:"";return`${e.value}${n}`}function TI(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,rf(n.queryParams,t.queryParams)||e.queryParams.next(t.queryParams),n.fragment!==t.fragment&&e.fragment.next(t.fragment),rf(n.params,t.params)||e.params.next(t.params),function hK(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!rf(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.url.next(t.url),rf(n.data,t.data)||e.data.next(t.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function EI(e,n){const t=rf(e.params,n.params)&&function mK(e,n){return A_(e,n)&&e.every((t,r)=>rf(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||EI(e.parent,n.parent))}function kw(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function QK(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return kw(e,r,i);return kw(e,r)})}(e,n,t);return new Pp(r,i)}{if(e.shouldAttach(n.value)){const s=e.retrieve(n.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=n.value,a.children=n.children.map(l=>kw(e,l)),a}}const r=function eJ(e){return new Cg(new Va(e.url),new Va(e.params),new Va(e.queryParams),new Va(e.fragment),new Va(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(s=>kw(e,s));return new Pp(r,i)}}const SI="ngNavigationCancelingError";function A5(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=I_(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=I5(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function I5(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[SI]=!0,r.cancellationCode=n,t&&(r.url=t),r}function P5(e){return O5(e)&&I_(e.url)}function O5(e){return e&&e[SI]}class tJ{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Aw,this.attachRef=null}}let Aw=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tJ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const nS=!1;let DI=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dr,this.activateEvents=new rr,this.deactivateEvents=new rr,this.attachEvents=new rr,this.detachEvents=new rr,this.parentContexts=pr(Aw),this.location=pr(vc),this.changeDetector=pr(T_),this.environmentInjector=pr(Ru)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Mt(4012,nS);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Mt(4012,nS);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Mt(4012,nS);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Mt(4013,nS);this._activatedRoute=t;const i=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new nJ(t,l,i.injector);if(r&&function rJ(e){return!!e.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(a);this.activated=i.createComponent(m,i.length,d)}else this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Un({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ho]}),e})();class nJ{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===Cg?this.route:n===Aw?this.childContexts:this.parent.get(n,t)}}let MI=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],standalone:!0,features:[BR],decls:1,vars:0,template:function(t,r){1&t&&Q(0,"router-outlet")},dependencies:[DI],encapsulation:2}),e})();function L5(e,n){return e.providers&&!e._injector&&(e._injector=_E(e.providers,n,`Route: ${e.path}`)),e._injector??n}function AI(e){const n=e.children&&e.children.map(AI),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==Dr&&(t.component=MI),t}function Hu(e){return e.outlet||Dr}function F5(e,n){const t=e.filter(r=>Hu(r)===n);return t.push(...e.filter(r=>Hu(r)!==n)),t}function Iw(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lJ{constructor(n,t,r,i){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),TI(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=Ev(t);n.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),ja(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(n,t,r){const i=n.value,s=t?t.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(n,t,a.children)}else this.deactivateChildRoutes(n,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,s=Ev(n);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:a,route:n,contexts:l})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,s=Ev(n);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(n,t,r){const i=Ev(t);n.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $K(s.value.snapshot))}),n.children.length&&this.forwardEvent(new jK(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,s=t?t.value:null;if(TI(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,a.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),TI(l.route.value),this.activateChildRoutes(n,null,a.children)}else{const l=Iw(i.snapshot),d=l?.get(Rh)??null;a.attachRef=null,a.route=i,a.resolver=d,a.injector=l,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(n,null,a.children)}}else this.activateChildRoutes(n,null,r)}}class R5{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class rS{constructor(n,t){this.component=n,this.route=t}}function cJ(e,n,t){const r=e._root;return Pw(r,n?n._root:null,t,[r.value])}function Sv(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function $f(e){return null!==Hf(e)}(e)?n.get(e):e:r}function Pw(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ev(n);return e.children.forEach(a=>{(function hJ(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,l=t?t.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const d=function dJ(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!A_(e.url,n.url);case"pathParamsOrQueryParamsChange":return!A_(e.url,n.url)||!rf(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!EI(e,n)||!rf(e.queryParams,n.queryParams);default:return!EI(e,n)}}(a,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new R5(r)):(s.data=a.data,s._resolvedData=a._resolvedData),Pw(e,n,s.component?l?l.children:null:t,r,i),d&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new rS(l.outlet.component,a))}else a&&Ow(n,l,i),i.canActivateChecks.push(new R5(r)),Pw(e,null,s.component?l?l.children:null:t,r,i)})(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),ja(s,(a,l)=>Ow(a,t.getContext(l),i)),i}function Ow(e,n,t){const r=Ev(e),i=e.value;ja(r,(s,a)=>{Ow(s,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new rS(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function Lw(e){return"function"==typeof e}function II(e){return e instanceof HE||"EmptyError"===e?.name}const iS=Symbol("INITIAL_VALUE");function Dv(){return bc(e=>aI(e.map(n=>n.pipe(Ul(1),function sK(...e){const n=Br(e);return yi((t,r)=>{(n?bw(e,t,n):bw(e,t)).subscribe(r)})}(iS)))).pipe(jn(n=>{for(const t of n)if(!0!==t){if(t===iS)return iS;if(!1===t||t instanceof wg)return t}return!0}),Ri(n=>n!==iS),Ul(1)))}function N5(e){return function nd(...e){return Mc(e)}(Ua(n=>{if(I_(n))throw A5(0,n)}),jn(n=>!0===n))}const PI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B5(e,n,t,r,i){const s=OI(e,n,t);return s.matched?function kJ(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?qn(i.map(a=>{const l=Sv(a,e);return bg(function yJ(e){return e&&Lw(e.canMatch)}(l)?l.canMatch(n,t):e.runInContext(()=>l(n,t)))})).pipe(Dv(),N5()):qn(!0)}(r=L5(n,r),n,t).pipe(jn(a=>!0===a?s:{...PI})):qn(s)}function OI(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...PI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||uK)(t,e,n);if(!i)return{...PI};const s={};ja(i.posParams,(l,d)=>{s[d]=l.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function sS(e,n,t,r){if(t.length>0&&function PJ(e,n,t){return t.some(r=>oS(e,n,r)&&Hu(r)!==Dr)}(e,t,r)){const s=new Gr(n,function IJ(e,n,t,r){const i={};i[Dr]=r,r._sourceSegment=e,r._segmentIndexShift=n.length;for(const s of t)if(""===s.path&&Hu(s)!==Dr){const a=new Gr([],{});a._sourceSegment=e,a._segmentIndexShift=n.length,i[Hu(s)]=a}return i}(e,n,r,new Gr(t,e.children)));return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function OJ(e,n,t){return t.some(r=>oS(e,n,r))}(e,t,r)){const s=new Gr(e.segments,function AJ(e,n,t,r,i){const s={};for(const a of r)if(oS(e,t,a)&&!i[Hu(a)]){const l=new Gr([],{});l._sourceSegment=e,l._segmentIndexShift=n.length,s[Hu(a)]=l}return{...i,...s}}(e,n,t,r,e.children));return s._sourceSegment=e,s._segmentIndexShift=n.length,{segmentGroup:s,slicedSegments:t}}const i=new Gr(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=n.length,{segmentGroup:i,slicedSegments:t}}function oS(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}function z5(e,n,t,r){return!!(Hu(e)===r||r!==Dr&&oS(n,t,e))&&("**"===e.path||OI(n,e,t).matched)}function V5(e,n,t){return 0===n.length&&!e.children[t]}const aS=!1;class lS{constructor(n){this.segmentGroup=n||null}}class U5{constructor(n){this.urlTree=n}}function Fw(e){return xv(new lS(e))}function j5(e){return xv(new U5(e))}class NJ{constructor(n,t,r,i,s){this.injector=n,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const n=sS(this.urlTree.root,[],[],this.config).segmentGroup,t=new Gr(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,t,Dr).pipe(jn(s=>this.createUrlTree(JE(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xg(s=>{if(s instanceof U5)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof lS?this.noMatchError(s):s}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,Dr).pipe(jn(i=>this.createUrlTree(JE(i),n.queryParams,n.fragment))).pipe(xg(i=>{throw i instanceof lS?this.noMatchError(i):i}))}noMatchError(n){return new Mt(4002,aS)}createUrlTree(n,t,r){const i=mI(n);return new wg(i,t,r)}expandSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(n,t,r).pipe(jn(s=>new Gr([],s))):this.expandSegment(n,r,t,r.segments,i,!0)}expandChildren(n,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return as(i).pipe(vg(s=>{const a=r.children[s],l=F5(t,s);return this.expandSegmentGroup(n,l,a,s).pipe(jn(d=>({segment:d,outlet:s})))}),uI((s,a)=>(s[a.outlet]=a.segment,s),{}),t5())}expandSegment(n,t,r,i,s,a){return as(r).pipe(vg(l=>this.expandSegmentAgainstRoute(n,t,r,l,i,s,a).pipe(xg(m=>{if(m instanceof lS)return qn(null);throw m}))),yg(l=>!!l),xg((l,d)=>{if(II(l))return V5(t,i,s)?qn(new Gr([],{})):Fw(t);throw l}))}expandSegmentAgainstRoute(n,t,r,i,s,a,l){return z5(i,t,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,t,i,s,a):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,t,r,i,s,a):Fw(t):Fw(t)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?j5(s):this.lineralizeSegments(r,s).pipe(Ct(a=>{const l=new Gr(a,{});return this.expandSegment(n,l,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,s,a){const{matched:l,consumedSegments:d,remainingSegments:m,positionalParamSegments:y}=OI(t,i,s);if(!l)return Fw(t);const T=this.applyRedirectCommands(d,i.redirectTo,y);return i.redirectTo.startsWith("/")?j5(T):this.lineralizeSegments(i,T).pipe(Ct(D=>this.expandSegment(n,t,r,D.concat(m),a,!1)))}matchSegmentAgainstRoute(n,t,r,i,s){return"**"===r.path?(n=L5(r,n),r.loadChildren?(r._loadedRoutes?qn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(n,r)).pipe(jn(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new Gr(i,{})))):qn(new Gr(i,{}))):B5(t,r,i,n).pipe(bc(({matched:a,consumedSegments:l,remainingSegments:d})=>a?this.getChildConfig(n=r._injector??n,r,i).pipe(Ct(y=>{const T=y.injector??n,D=y.routes,{segmentGroup:I,slicedSegments:F}=sS(t,l,d,D),L=new Gr(I.segments,I.children);if(0===F.length&&L.hasChildren())return this.expandChildren(T,D,L).pipe(jn(q=>new Gr(l,q)));if(0===D.length&&0===F.length)return qn(new Gr(l,{}));const B=Hu(r)===s;return this.expandSegment(T,L,D,F,B?Dr:s,!0).pipe(jn(Z=>new Gr(l.concat(Z.segments),Z.children)))})):Fw(t)))}getChildConfig(n,t,r){return t.children?qn({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?qn({routes:t._loadedRoutes,injector:t._loadedInjector}):function MJ(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?qn(!0):qn(i.map(a=>{const l=Sv(a,e);return bg(function pJ(e){return e&&Lw(e.canLoad)}(l)?l.canLoad(n,t):e.runInContext(()=>l(n,t)))})).pipe(Dv(),N5())}(n,t,r).pipe(Ct(i=>i?this.configLoader.loadChildren(n,t).pipe(Ua(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function FJ(e){return xv(I5(aS,3))}())):qn({routes:[],injector:n})}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qn(r);if(i.numberOfChildren>1||!i.children[Dr])return n.redirectTo,xv(new Mt(4e3,aS));i=i.children[Dr]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const s=this.createSegmentGroup(n,t.root,r,i);return new wg(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return ja(n,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(n,t,r,i){const s=this.createSegments(n,t.segments,r,i);let a={};return ja(t.children,(l,d)=>{a[d]=this.createSegmentGroup(n,l,r,i)}),new Gr(s,a)}createSegments(n,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(n,s,i):this.findOrReturn(s,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Mt(4001,aS);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}class zJ{}class jJ{constructor(n,t,r,i,s,a,l){this.injector=n,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l}recognize(){const n=sS(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,Dr).pipe(jn(t=>{if(null===t)return null;const r=new tS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dr,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Pp(r,t),s=new M5(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(n){const t=n.value,r=D5(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i)}processChildren(n,t,r){return as(Object.keys(r.children)).pipe(vg(i=>{const s=r.children[i],a=F5(t,i);return this.processSegmentGroup(n,a,s,i)}),uI((i,s)=>i&&s?(i.push(...s),i):null),function lK(e,n=!1){return yi((t,r)=>{let i=0;t.subscribe(ki(r,s=>{const a=e(s,i++);(a||n)&&r.next(s),!a&&r.complete()}))})}(i=>null!==i),WE(null),t5(),jn(i=>{if(null===i)return null;const s=$5(i);return function HJ(e){e.sort((n,t)=>n.value.outlet===Dr?-1:t.value.outlet===Dr?1:n.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(n,t,r,i,s){return as(t).pipe(vg(a=>this.processSegmentAgainstRoute(a._injector??n,a,r,i,s)),yg(a=>!!a),xg(a=>{if(II(a))return V5(r,i,s)?qn([]):qn(null);throw a}))}processSegmentAgainstRoute(n,t,r,i,s){if(t.redirectTo||!z5(t,r,i,s))return qn(null);let a;if("**"===t.path){const l=i.length>0?o5(i).parameters:{},d=G5(r)+i.length;a=qn({snapshot:new tS(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y5(t),Hu(t),t.component??t._loadedComponent??null,t,W5(r),d,q5(t)),consumedSegments:[],remainingSegments:[]})}else a=B5(r,t,i,n).pipe(jn(({matched:l,consumedSegments:d,remainingSegments:m,parameters:y})=>{if(!l)return null;const T=G5(r)+d.length;return{snapshot:new tS(d,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Y5(t),Hu(t),t.component??t._loadedComponent??null,t,W5(r),T,q5(t)),consumedSegments:d,remainingSegments:m}}));return a.pipe(bc(l=>{if(null===l)return qn(null);const{snapshot:d,consumedSegments:m,remainingSegments:y}=l;n=t._injector??n;const T=t._loadedInjector??n,D=function $J(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(t),{segmentGroup:I,slicedSegments:F}=sS(r,m,y,D.filter(B=>void 0===B.redirectTo));if(0===F.length&&I.hasChildren())return this.processChildren(T,D,I).pipe(jn(B=>null===B?null:[new Pp(d,B)]));if(0===D.length&&0===F.length)return qn([new Pp(d,[])]);const L=Hu(t)===s;return this.processSegment(T,D,I,F,L?Dr:s).pipe(jn(B=>null===B?null:[new Pp(d,B)]))}))}}function WJ(e){const n=e.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function $5(e){const n=[],t=new Set;for(const r of e){if(!WJ(r)){n.push(r);continue}const i=n.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=$5(r.children);n.push(new Pp(r.value,i))}return n.filter(r=>!t.has(r))}function W5(e){let n=e;for(;n._sourceSegment;)n=n._sourceSegment;return n}function G5(e){let n=e,t=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,t+=n._segmentIndexShift??0;return t-1}function Y5(e){return e.data||{}}function q5(e){return e.resolve||{}}function X5(e){return"string"==typeof e.title||null===e.title}function LI(e){return bc(n=>{const t=e(n);return t?as(t).pipe(jn(()=>n)):qn(n)})}const Mv=new On("ROUTES");let FI=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=pr(S4)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return qn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=bg(t.loadComponent()).pipe(jn(K5),Ua(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),dI(()=>{this.componentLoaders.delete(t)})),i=new cI(r,()=>new qi).pipe(lI());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(jn(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,m,y=!1;Array.isArray(l)?m=l:(d=l.create(t).injector,m=s5(d.get(Mv,[],Hn.Self|Hn.Optional)));return{routes:m.map(AI),injector:d}}),dI(()=>{this.childrenLoaders.delete(r)})),a=new cI(s,()=>new qi).pipe(lI());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return bg(t()).pipe(jn(K5),Ct(r=>r instanceof RR||Array.isArray(r)?qn(r):as(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function K5(e){return function QJ(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let uS=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new qi,this.configLoader=pr(FI),this.environmentInjector=pr(Ru),this.urlSerializer=pr(Tw),this.rootContexts=pr(Aw),this.navigationId=0,this.afterPreactivation=()=>qn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new VK(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new zK(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Va({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mw,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ri(r=>0!==r.id),jn(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),bc(r=>{let i=!1,s=!1;return qn(r).pipe(Ua(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),bc(a=>{const l=t.browserUrlTree.toString(),d=!t.navigated||a.extractedUrl.toString()!==l||l!==t.currentUrlTree.toString();if(!d&&"reload"!==(a.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const y="";return this.events.next(new eS(a.id,t.serializeUrl(r.rawUrl),y,0)),t.rawUrlTree=a.rawUrl,a.resolve(null),vn}if(t.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return J5(a.source)&&(t.browserUrlTree=a.extractedUrl),qn(a).pipe(bc(y=>{const T=this.transitions?.getValue();return this.events.next(new vI(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),T!==this.transitions?.getValue()?vn:Promise.resolve(y)}),function BJ(e,n,t,r){return bc(i=>function RJ(e,n,t,r,i){return new NJ(e,n,t,r,i).apply()}(e,n,t,i.extractedUrl,r).pipe(jn(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Ua(y=>{this.currentNavigation={...this.currentNavigation,finalUrl:y.urlAfterRedirects},r.urlAfterRedirects=y.urlAfterRedirects}),function YJ(e,n,t,r,i){return Ct(s=>function UJ(e,n,t,r,i,s,a="emptyOnly"){return new jJ(e,n,t,r,i,a,s).recognize().pipe(bc(l=>null===l?function VJ(e){return new er(n=>n.error(e))}(new zJ):qn(l)))}(e,n,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(jn(a=>({...s,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ua(y=>{if(r.targetSnapshot=y.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!y.extras.skipLocationChange){const D=t.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl);t.setBrowserUrl(D,y)}t.browserUrlTree=y.urlAfterRedirects}const T=new LK(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(T)}));if(d&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:y,extractedUrl:T,source:D,restoredState:I,extras:F}=a,L=new vI(y,this.urlSerializer.serialize(T),D,I);this.events.next(L);const B=S5(T,this.rootComponentType).snapshot;return qn(r={...a,targetSnapshot:B,urlAfterRedirects:T,extras:{...F,skipLocationChange:!1,replaceUrl:!1}})}{const y="";return this.events.next(new eS(a.id,t.serializeUrl(r.extractedUrl),y,1)),t.rawUrlTree=a.rawUrl,a.resolve(null),vn}}),Ua(a=>{const l=new FK(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),jn(a=>r={...a,guards:cJ(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function xJ(e,n){return Ct(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?qn({...t,guardsResult:!0}):function bJ(e,n,t,r){return as(e).pipe(Ct(i=>function DJ(e,n,t,r,i){const s=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return s&&0!==s.length?qn(s.map(l=>{const d=Iw(n)??i,m=Sv(l,d);return bg(function _J(e){return e&&Lw(e.canDeactivate)}(m)?m.canDeactivate(e,n,t,r):d.runInContext(()=>m(e,n,t,r))).pipe(yg())})).pipe(Dv()):qn(!0)}(i.component,i.route,t,n,r)),yg(i=>!0!==i,!0))}(a,r,i,e).pipe(Ct(l=>l&&function fJ(e){return"boolean"==typeof e}(l)?function wJ(e,n,t,r){return as(n).pipe(vg(i=>bw(function TJ(e,n){return null!==e&&n&&n(new UK(e)),qn(!0)}(i.route.parent,r),function CJ(e,n){return null!==e&&n&&n(new HK(e)),qn(!0)}(i.route,r),function SJ(e,n,t){const r=n[n.length-1],s=n.slice(0,n.length-1).reverse().map(a=>function uJ(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(a)).filter(a=>null!==a).map(a=>$E(()=>qn(a.guards.map(d=>{const m=Iw(a.node)??t,y=Sv(d,m);return bg(function gJ(e){return e&&Lw(e.canActivateChild)}(y)?y.canActivateChild(r,e):m.runInContext(()=>y(r,e))).pipe(yg())})).pipe(Dv())));return qn(s).pipe(Dv())}(e,i.path,t),function EJ(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return qn(!0);const i=r.map(s=>$E(()=>{const a=Iw(n)??t,l=Sv(s,a);return bg(function mJ(e){return e&&Lw(e.canActivate)}(l)?l.canActivate(n,e):a.runInContext(()=>l(n,e))).pipe(yg())}));return qn(i).pipe(Dv())}(e,i.route,t))),yg(i=>!0!==i,!0))}(r,s,e,n):qn(l)),jn(l=>({...t,guardsResult:l})))})}(this.environmentInjector,a=>this.events.next(a)),Ua(a=>{if(r.guardsResult=a.guardsResult,I_(a.guardsResult))throw A5(0,a.guardsResult);const l=new RK(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(l)}),Ri(a=>!!a.guardsResult||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),LI(a=>{if(a.guards.canActivateChecks.length)return qn(a).pipe(Ua(l=>{const d=new NK(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),bc(l=>{let d=!1;return qn(l).pipe(function qJ(e,n){return Ct(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return qn(t);let s=0;return as(i).pipe(vg(a=>function XJ(e,n,t,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!X5(i)&&(s[ww]=i.title),function ZJ(e,n,t,r){const i=function KJ(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return qn({});const s={};return as(i).pipe(Ct(a=>function JJ(e,n,t,r){const i=Iw(n)??r,s=Sv(e,i);return bg(s.resolve?s.resolve(n,t):i.runInContext(()=>s(n,t)))}(e[a],n,t,r).pipe(yg(),Ua(l=>{s[a]=l}))),hI(1),n5(s),xg(a=>II(a)?vn:xv(a)))}(s,e,n,r).pipe(jn(a=>(e._resolvedData=a,e.data=D5(e,t).resolve,i&&X5(i)&&(e.data[ww]=i.title),null)))}(a.route,r,e,n)),Ua(()=>s++),hI(1),Ct(a=>s===i.length?qn(t):vn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ua({next:()=>d=!0,complete:()=>{d||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Ua(l=>{const d=new BK(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),LI(a=>{const l=d=>{const m=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ua(y=>{d.component=y}),jn(()=>{})));for(const y of d.children)m.push(...l(y));return m};return aI(l(a.targetSnapshot.root)).pipe(WE(),Ul(1))}),LI(()=>this.afterPreactivation()),jn(a=>{const l=function JK(e,n,t){const r=kw(e,n._root,t?t._root:void 0);return new E5(r,n)}(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),Ua(a=>{t.currentUrlTree=a.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),t.routerState=a.targetRouterState,"deferred"===t.urlUpdateStrategy&&(a.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,a),t.browserUrlTree=a.urlAfterRedirects)}),((e,n,t)=>jn(r=>(new lJ(n,r.targetRouterState,r.currentRouterState,t).activate(e),r)))(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a)),Ua({next:a=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new P_(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),dI(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),xg(a=>{if(s=!0,O5(a)){P5(a)||(t.navigated=!0,t.restoreHistory(r,!0));const l=new QE(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode);if(this.events.next(l),P5(a)){const d=t.urlHandlingStrategy.merge(a.url,t.rawUrlTree),m={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||J5(r.source)};t.scheduleNavigation(d,Mw,null,m,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const l=new xI(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);this.events.next(l);try{r.resolve(t.errorHandler(a))}catch(d){r.reject(d)}}return vn}))}))}cancelNavigationTransition(t,r,i){const s=new QE(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function J5(e){return e!==Mw}let Q5=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Dr);return r}getResolvedTitleForRoute(t){return t.data[ww]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return pr(eQ)},providedIn:"root"}),e})(),eQ=(()=>{class e extends Q5{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(t){return new(t||e)(Jt(YN))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),tQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return pr(rQ)},providedIn:"root"}),e})();class nQ{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let rQ=(()=>{class e extends nQ{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const hS=new On("",{providedIn:"root",factory:()=>({})});let sQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:function(){return pr(oQ)},providedIn:"root"}),e})(),oQ=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function aQ(e){throw e}function lQ(e,n,t){return n.parse("/")}const cQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zs=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=pr(WY),this.isNgZoneEnabled=!1,this.options=pr(hS,{optional:!0})||{},this.errorHandler=this.options.errorHandler||aQ,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||lQ,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=pr(sQ),this.routeReuseStrategy=pr(tQ),this.urlCreationStrategy=pr(XK),this.titleStrategy=pr(Q5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=s5(pr(Mv,{optional:!0})??[]),this.navigationTransitions=pr(uS),this.urlSerializer=pr(Tw),this.location=pr(D_),this.isNgZoneEnabled=pr(ns)instanceof ns&&ns.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wg,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=S5(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mw,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},a=i?.navigationId?i:null;if(i){const d={...i};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(s.state=d)}const l=this.parseUrl(t);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(AI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:d}=r,m=d?this.currentUrlTree.fragment:a;let y=null;switch(l){case"merge":y={...this.currentUrlTree.queryParams,...s};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=s||null}return null!==y&&(y=this.removeEmptyProps(y)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,y,m??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=I_(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Mw,null,r)}navigate(t,r={skipLocationChange:!1}){return function hQ(e){for(let n=0;n<e.length;n++){const t=e[n];if(null==t)throw new Mt(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...cQ}:!1===r?{...uQ}:r,I_(t))return l5(this.currentUrlTree,t,i);const s=this.parseUrl(t);return l5(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let l,d,m,y;return a?(l=a.resolve,d=a.reject,m=a.promise):m=new Promise((T,D)=>{l=T,d=D}),y="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:y,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:l,reject:d,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(T=>Promise.reject(T))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class eB{}let pQ=(()=>{class e{constructor(t,r,i,s,a){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ri(t=>t instanceof P_),vg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=_E(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(l,s.children??s._loadedRoutes))}return as(i).pipe(kn())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):qn(null);const s=i.pipe(Ct(a=>null===a?qn(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?as([s,this.loader.loadComponent(r)]).pipe(kn()):s})}}return e.\u0275fac=function(t){return new(t||e)(Jt(zs),Jt(S4),Jt(Ru),Jt(eB),Jt(FI))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const BI=new On("");let tB=(()=>{class e{constructor(t,r,i,s,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof P_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof C5&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new C5(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return e.\u0275fac=function(t){!function og(){throw new Error("invalid")}()},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();var Kc=(()=>((Kc=Kc||{})[Kc.COMPLETE=0]="COMPLETE",Kc[Kc.FAILED=1]="FAILED",Kc[Kc.REDIRECTING=2]="REDIRECTING",Kc))();const kv=!1;function Tg(e,n){return{\u0275kind:e,\u0275providers:n}}const zI=new On("",{providedIn:"root",factory:()=>!1});function rB(){const e=pr(na);return n=>{const t=e.get(C_);if(n!==t.components[0])return;const r=e.get(zs),i=e.get(iB);1===e.get(VI)&&r.initialNavigation(),e.get(sB,null,Hn.Optional)?.setUpPreloading(),e.get(BI,null,Hn.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const iB=new On(kv?"bootstrap done indicator":"",{factory:()=>new qi}),VI=new On(kv?"initial navigation":"",{providedIn:"root",factory:()=>1});function vQ(){let e=[];return e=kv?[{provide:O1,multi:!0,useFactory:()=>{const n=pr(zs);return()=>n.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function WK(e){if(!("type"in e))return`Unknown Router Event: ${e.constructor.name}`;switch(e.type){case 14:return`ActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${e.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${e.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state}, shouldActivate: ${e.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 2:return`NavigationCancel(id: ${e.id}, url: '${e.url}')`;case 16:return`NavigationSkipped(id: ${e.id}, url: '${e.url}')`;case 1:return`NavigationEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${e.id}, url: '${e.url}', error: ${e.error})`;case 0:return`NavigationStart(id: ${e.id}, url: '${e.url}')`;case 6:return`ResolveEnd(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 5:return`ResolveStart(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 10:return`RouteConfigLoadEnd(path: ${e.route.path})`;case 9:return`RouteConfigLoadStart(path: ${e.route.path})`;case 4:return`RoutesRecognized(id: ${e.id}, url: '${e.url}', urlAfterRedirects: '${e.urlAfterRedirects}', state: ${e.state})`;case 15:return`Scroll(anchor: '${e.anchor}', position: '${e.position?`${e.position[0]}, ${e.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Tg(1,e)}const sB=new On(kv?"router preloader":"");function xQ(e){return Tg(0,[{provide:sB,useExisting:pQ},{provide:eB,useExisting:e}])}const Rw=!1,oB=new On(Rw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),bQ=[D_,{provide:Tw,useClass:fI},zs,Aw,{provide:Cg,useFactory:function nB(e){return e.routerState.root},deps:[zs]},FI,Rw?{provide:zI,useValue:!0}:[]];function wQ(){return new L4("Router",zs)}let wc=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[bQ,Rw&&r?.enableTracing?vQ().\u0275providers:[],{provide:Mv,multi:!0,useValue:t},{provide:oB,useFactory:SQ,deps:[[zs,new jc,new Bd]]},{provide:hS,useValue:r||{}},r?.useHash?{provide:S_,useClass:Pq}:{provide:S_,useClass:iN},{provide:BI,useFactory:()=>{const e=pr(GX),n=pr(ns),t=pr(hS),r=pr(uS),i=pr(Tw);return t.scrollOffset&&e.setOffset(t.scrollOffset),new tB(i,r,e,n,t)}},r?.preloadingStrategy?xQ(r.preloadingStrategy).\u0275providers:[],{provide:L4,multi:!0,useFactory:wQ},r?.initialNavigation?DQ(r):[],[{provide:aB,useFactory:rB},{provide:O4,multi:!0,useExisting:aB}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Mv,multi:!0,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Jt(oB,8))},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[MI]}),e})();function SQ(e){if(Rw&&e)throw new Mt(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function DQ(e){return["disabled"===e.initialNavigation?Tg(3,[{provide:hw,multi:!0,useFactory:()=>{const n=pr(zs);return()=>{n.setUpLocationChangeListener()}}},{provide:VI,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Tg(2,[{provide:VI,useValue:0},{provide:hw,multi:!0,deps:[na],useFactory:n=>{const t=n.get(Aq,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=n.get(zs),s=n.get(iB);(function mQ(e,n){e.events.pipe(Ri(t=>t instanceof P_||t instanceof QE||t instanceof xI||t instanceof eS),jn(t=>t instanceof P_||t instanceof eS?Kc.COMPLETE:t instanceof QE&&(0===t.code||1===t.code)?Kc.REDIRECTING:Kc.FAILED),Ri(t=>t!==Kc.REDIRECTING),Ul(1)).subscribe(()=>{n()})})(i,()=>{r(!0)}),n.get(uS).afterPreactivation=()=>(r(!0),s.closed?qn(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const aB=new On(Rw?"Router Initializer":""),kQ=[];let AQ=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot(kQ),wc]}),e})(),IQ=(()=>{class e{constructor(){this.title="sitmah"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Q(0,"router-outlet")},dependencies:[DI]}),e})(),lB=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-menu-titanes"]],decls:74,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateral",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul"],["href","#",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-house-door"],["href","Ubicacion_Titan",1,"nav-link","link-dark"],[1,"bi","bi-geo-alt-fill"],["id","menuLateral","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"bi","bi-folder2-open"],["href","titanes",1,"nav-link","link-dark"],[1,"bi","bi-file-earmark-person"],[1,"dropdown"],[1,"bi","bi-box-arrow-right"],[1,"container","overflow-hidden","text-center"],[1,"d-grid","gap-1","d-md-block"],["href","informe_de_limpieza_del_dia_de_hoy"],["type","button",1,"btn1-menu"],[1,"bi","bi-stars",2,"font-size","35px"],["href","informe_de_incidencias_tecnologicas"],["type","button",1,"btn2-menu"],[1,"bi","bi-laptop",2,"font-size","33px"],["href","incidencias_inicio"],["type","button",1,"btn3-menu"],[1,"bi","bi-car-front-fill",2,"font-size","31px"],["href","registro_vehicular"],["type","button",1,"btn4-menu"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," MENU "),A()()()()(),k(11,"body")(12,"nav",9)(13,"div",10)(14,"li",11)(15,"button",12),Q(16,"i",13),A()(),k(17,"li",11)(18,"a",14)(19,"button",15),Q(20,"i",16),A()()(),k(21,"li",11)(22,"a",17)(23,"button",15),Q(24,"i",18),A()()(),k(25,"section",19)(26,"div",20)(27,"a",21)(28,"span",22),V(29,"MENU"),A()(),Q(30,"hr"),k(31,"ul",23)(32,"li",11)(33,"a",14)(34,"button",15),Q(35,"i",24),V(36," DESPACHO"),A()()(),Q(37,"hr"),k(38,"li",11)(39,"a",25)(40,"button",15),Q(41,"i",26),V(42," TITANES "),A()()()(),Q(43,"hr"),k(44,"ul")(45,"div",27)(46,"li",11)(47,"a",14)(48,"button",15),Q(49,"i",28),V(50," SALIR "),A()()()()()()()()(),k(51,"div",29)(52,"div",30)(53,"div",29)(54,"div",30)(55,"a",31)(56,"button",32),V(57," Informe de limpieza de estaciones "),Q(58,"i",33),A()()(),k(59,"div")(60,"a",34)(61,"button",35),V(62,"Informe de incidencias t\xe9cnologicas "),Q(63,"i",36),A()()(),k(64,"div")(65,"a",37)(66,"button",38),V(67," Percances vehiculares "),Q(68,"i",39),A()()(),k(69,"div")(70,"a",40)(71,"button",41),V(72," Registro de prestamo vehicular "),Q(73,"i",39),A()()()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c;padding:auto}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.btn1-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:20px;border-radius:15px;width:280px;height:125px;margin:20px}.btn1-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn2-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:280px;height:125px;margin:10px 10px 10px 20px}.btn2-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn3-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:280px;height:130px;margin:10px 10px 10px 20px}.btn3-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn4-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:280px;height:125px;margin:10px 10px 10px 20px}.btn4-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}"]}),e})();class Nw{}class UI{}class Op{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(t=>{let r=n[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof Op?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new Op;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Op?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=n.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(l=>-1===s.indexOf(l)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class PQ{encodeKey(n){return cB(n)}encodeValue(n){return cB(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const LQ=/%(\d[a-f0-9])/gi,FQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cB(e){return encodeURIComponent(e).replace(LQ,(n,t)=>FQ[t]??n)}function dS(e){return`${e}`}class Eg{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new PQ,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function OQ(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[a,l]=-1==s?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,s)),n.decodeValue(i.slice(s+1))],d=t.get(a)||[];d.push(l),t.set(a,d)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(dS):[dS(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new Eg({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(dS(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(dS(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class RQ{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function uB(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function hB(e){return typeof Blob<"u"&&e instanceof Blob}function dB(e){return typeof FormData<"u"&&e instanceof FormData}class Bw{constructor(n,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function NQ(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Op),this.context||(this.context=new RQ),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+a}}else this.params=new Eg,this.urlWithParams=t}serializeBody(){return null===this.body?null:uB(this.body)||hB(this.body)||dB(this.body)||function BQ(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Eg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dB(this.body)?null:hB(this.body)?this.body.type||null:uB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Eg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,s=void 0!==n.body?n.body:this.body,a=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,l=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let d=n.headers||this.headers,m=n.params||this.params;const y=n.context??this.context;return void 0!==n.setHeaders&&(d=Object.keys(n.setHeaders).reduce((T,D)=>T.set(D,n.setHeaders[D]),d)),n.setParams&&(m=Object.keys(n.setParams).reduce((T,D)=>T.set(D,n.setParams[D]),m)),new Bw(t,r,s,{params:m,headers:d,context:y,reportProgress:l,responseType:i,withCredentials:a})}}var Vo=(()=>((Vo=Vo||{})[Vo.Sent=0]="Sent",Vo[Vo.UploadProgress=1]="UploadProgress",Vo[Vo.ResponseHeader=2]="ResponseHeader",Vo[Vo.DownloadProgress=3]="DownloadProgress",Vo[Vo.Response=4]="Response",Vo[Vo.User=5]="User",Vo))();class jI{constructor(n,t=200,r="OK"){this.headers=n.headers||new Op,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class HI extends jI{constructor(n={}){super(n),this.type=Vo.ResponseHeader}clone(n={}){return new HI({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fS extends jI{constructor(n={}){super(n),this.type=Vo.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new fS({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fB extends jI{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function $I(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let xs=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Bw)s=t;else{let d,m;d=i.headers instanceof Op?i.headers:new Op(i.headers),i.params&&(m=i.params instanceof Eg?i.params:new Eg({fromObject:i.params})),s=new Bw(t,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:m,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=qn(s).pipe(vg(d=>this.handler.handle(d)));if(t instanceof Bw||"events"===i.observe)return a;const l=a.pipe(Ri(d=>d instanceof fS));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(jn(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return l.pipe(jn(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return l.pipe(jn(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return l.pipe(jn(d=>d.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Eg).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,$I(i,r))}post(t,r,i={}){return this.request("POST",t,$I(i,r))}put(t,r,i={}){return this.request("PUT",t,$I(i,r))}}return e.\u0275fac=function(t){return new(t||e)(Jt(Nw))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();function pB(e,n){return n(e)}function zQ(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const UQ=new On("HTTP_INTERCEPTORS"),zw=new On("HTTP_INTERCEPTOR_FNS");function jQ(){let e=null;return(n,t)=>(null===e&&(e=(pr(UQ,{optional:!0})??[]).reduceRight(zQ,pB)),e(n,t))}let mB=(()=>{class e extends Nw{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(zw)));this.chain=r.reduceRight((i,s)=>function VQ(e,n,t){return(r,i)=>t.runInContext(()=>n(r,s=>e(s,i)))}(i,s,this.injector),pB)}return this.chain(t,r=>this.backend.handle(r))}}return e.\u0275fac=function(t){return new(t||e)(Jt(UI),Jt(Ru))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const GQ=/^\)\]\}',?\n/;let _B=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new er(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((I,F)=>i.setRequestHeader(I,F.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const I=t.detectContentTypeHeader();null!==I&&i.setRequestHeader("Content-Type",I)}if(t.responseType){const I=t.responseType.toLowerCase();i.responseType="json"!==I?I:"text"}const s=t.serializeBody();let a=null;const l=()=>{if(null!==a)return a;const I=i.statusText||"OK",F=new Op(i.getAllResponseHeaders()),L=function YQ(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new HI({headers:F,status:i.status,statusText:I,url:L}),a},d=()=>{let{headers:I,status:F,statusText:L,url:B}=l(),G=null;204!==F&&(G=typeof i.response>"u"?i.responseText:i.response),0===F&&(F=G?200:0);let Z=F>=200&&F<300;if("json"===t.responseType&&"string"==typeof G){const q=G;G=G.replace(GQ,"");try{G=""!==G?JSON.parse(G):null}catch(oe){G=q,Z&&(Z=!1,G={error:oe,text:G})}}Z?(r.next(new fS({body:G,headers:I,status:F,statusText:L,url:B||void 0})),r.complete()):r.error(new fB({error:G,headers:I,status:F,statusText:L,url:B||void 0}))},m=I=>{const{url:F}=l(),L=new fB({error:I,status:i.status||0,statusText:i.statusText||"Unknown Error",url:F||void 0});r.error(L)};let y=!1;const T=I=>{y||(r.next(l()),y=!0);let F={type:Vo.DownloadProgress,loaded:I.loaded};I.lengthComputable&&(F.total=I.total),"text"===t.responseType&&i.responseText&&(F.partialText=i.responseText),r.next(F)},D=I=>{let F={type:Vo.UploadProgress,loaded:I.loaded};I.lengthComputable&&(F.total=I.total),r.next(F)};return i.addEventListener("load",d),i.addEventListener("error",m),i.addEventListener("timeout",m),i.addEventListener("abort",m),t.reportProgress&&(i.addEventListener("progress",T),null!==s&&i.upload&&i.upload.addEventListener("progress",D)),i.send(s),r.next({type:Vo.Sent}),()=>{i.removeEventListener("error",m),i.removeEventListener("abort",m),i.removeEventListener("load",d),i.removeEventListener("timeout",m),t.reportProgress&&(i.removeEventListener("progress",T),null!==s&&i.upload&&i.upload.removeEventListener("progress",D)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(t){return new(t||e)(Jt(TN))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const WI=new On("XSRF_ENABLED"),yB=new On("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),vB=new On("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class xB{}let ZQ=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=pN(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return e.\u0275fac=function(t){return new(t||e)(Jt(No),Jt(yv),Jt(yB))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();function KQ(e,n){const t=e.url.toLowerCase();if(!pr(WI)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=pr(xB).getToken(),i=pr(vB);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var bo=(()=>((bo=bo||{})[bo.Interceptors=0]="Interceptors",bo[bo.LegacyInterceptors=1]="LegacyInterceptors",bo[bo.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",bo[bo.NoXsrfProtection=3]="NoXsrfProtection",bo[bo.JsonpSupport=4]="JsonpSupport",bo[bo.RequestsMadeViaParent=5]="RequestsMadeViaParent",bo))();function Av(e,n){return{\u0275kind:e,\u0275providers:n}}function JQ(...e){const n=[xs,_B,mB,{provide:Nw,useExisting:mB},{provide:UI,useExisting:_B},{provide:zw,useValue:KQ,multi:!0},{provide:WI,useValue:!0},{provide:xB,useClass:ZQ}];for(const t of e)n.push(...t.\u0275providers);return function CT(e){return{\u0275providers:e}}(n)}const bB=new On("LEGACY_INTERCEPTOR_FN");let eee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({providers:[JQ(Av(bo.LegacyInterceptors,[{provide:bB,useFactory:jQ},{provide:zw,useExisting:bB,multi:!0}]))]}),e})(),wB=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return e.\u0275fac=function(t){return new(t||e)(We(ta),We(_s))},e.\u0275dir=Un({type:e}),e})(),O_=(()=>{class e extends wB{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275dir=Un({type:e,features:[u]}),e})();const Jc=new On("NgValueAccessor"),nee={provide:Jc,useExisting:Rr(()=>GI),multi:!0};let GI=(()=>{class e extends O_{writeValue(t){this.setProperty("checked",t)}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275dir=Un({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&rt("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Ui([nee]),u]}),e})();const ree={provide:Jc,useExisting:Rr(()=>va),multi:!0},see=new On("CompositionEventMode");let va=(()=>{class e extends wB{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function iee(){const e=kp()?kp().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return e.\u0275fac=function(t){return new(t||e)(We(ta),We(_s),We(see,8))},e.\u0275dir=Un({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&rt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Ui([ree]),u]}),e})();const oee=!1;const xa=new On("NgValidators"),Dg=new On("NgAsyncValidators");function SB(e){return function Sg(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}(e.value)?{required:!0}:null}function pS(e){return null}function PB(e){return null!=e}function OB(e){const n=Gs(e)?as(e):e;if(oee&&!Xc(n)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof e&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new Mt(-1101,t)}return n}function LB(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function FB(e,n){return n.map(t=>t(e))}function RB(e){return e.map(n=>function lee(e){return!e.validate}(n)?n:t=>n.validate(t))}function YI(e){return null!=e?function NB(e){if(!e)return null;const n=e.filter(PB);return 0==n.length?null:function(t){return LB(FB(t,n))}}(RB(e)):null}function qI(e){return null!=e?function BB(e){if(!e)return null;const n=e.filter(PB);return 0==n.length?null:function(t){return function tee(...e){const n=Ln(e),{args:t,keys:r}=KN(e),i=new er(s=>{const{length:a}=t;if(!a)return void s.complete();const l=new Array(a);let d=a,m=a;for(let y=0;y<a;y++){let T=!1;te(t[y]).subscribe(ki(s,D=>{T||(T=!0,m--),l[y]=D},()=>d--,void 0,()=>{(!d||!T)&&(m||s.next(r?JN(r,l):l),s.complete())}))}});return n?i.pipe(oI(n)):i}(FB(t,n).map(OB)).pipe(jn(LB))}}(RB(e)):null}function zB(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function XI(e){return e?Array.isArray(e)?e:[e]:[]}function mS(e,n){return Array.isArray(e)?e.includes(n):e===n}function jB(e,n){const t=XI(n);return XI(e).forEach(i=>{mS(t,i)||t.push(i)}),t}function HB(e,n){return XI(n).filter(t=>!mS(e,t))}class $B{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=YI(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=qI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class jl extends $B{get formDirective(){return null}get path(){return null}}class Mg extends $B{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class WB{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ha=(()=>{class e extends WB{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(We(Mg,2))},e.\u0275dir=Un({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&_i("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u]}),e})(),Lp=(()=>{class e extends WB{constructor(t){super(t)}}return e.\u0275fac=function(t){return new(t||e)(We(jl,10))},e.\u0275dir=Un({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&_i("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u]}),e})();function GB(e,n){return e?`with name: '${n}'`:`at index: ${n}`}const JI=!1,Vw="VALID",_S="INVALID",Iv="PENDING",Uw="DISABLED";function QI(e){return(yS(e)?e.validators:e)||null}function eP(e,n){return(yS(n)?n.asyncValidators:e)||null}function yS(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class XB{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Vw}get invalid(){return this.status===_S}get pending(){return this.status==Iv}get disabled(){return this.status===Uw}get enabled(){return this.status!==Uw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(jB(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(jB(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(HB(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(HB(n,this._rawAsyncValidators))}hasValidator(n){return mS(this._rawValidators,n)}hasAsyncValidator(n){return mS(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Iv,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Uw,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=Vw,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vw||this.status===Iv)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uw:Vw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Iv,this._hasOwnPendingAsyncValidator=!0;const t=OB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new rr,this.statusChanges=new rr}_calculateStatus(){return this._allControlsDisabled()?Uw:this.errors?_S:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Iv)?Iv:this._anyControlsHaveStatus(_S)?_S:Vw}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){yS(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function mee(e){return Array.isArray(e)?YI(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function gee(e){return Array.isArray(e)?qI(e):e||null}(this._rawAsyncValidators)}}class tP extends XB{constructor(n,t,r){super(QI(t),eP(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){(function qB(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new Mt(1002,JI?function pee(e,n){return`Must supply a value for form control ${GB(e,n)}`}(n,i):"")})})(this,!0,n),Object.keys(n).forEach(r=>{(function YB(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new Mt(1e3,JI?function dee(e){return`\n    There are no form controls registered with this ${e?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(n):"");if(!r[t])throw new Mt(1001,JI?function fee(e,n){return`Cannot find form control ${GB(e,n)}`}(n,t):"")})(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const L_=new On("CallSetDisabledState",{providedIn:"root",factory:()=>jw}),jw="always";function Hw(e,n,t=jw){nP(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function vee(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&ZB(e,n)})}(e,n),function bee(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function xee(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&ZB(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function yee(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function bS(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function nP(e,n){const t=function VB(e){return e._rawValidators}(e);null!==n.validator?e.setValidators(zB(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=function UB(e){return e._rawAsyncValidators}(e);null!==n.asyncValidator?e.setAsyncValidators(zB(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();bS(n._rawValidators,i),bS(n._rawAsyncValidators,i)}function ZB(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}const See={provide:jl,useExisting:Rr(()=>Wh)},$w=(()=>Promise.resolve())();let Wh=(()=>{class e extends jl{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new rr,this.form=new tP({},YI(t),qI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$w.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Hw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$w.then(()=>{const r=this._findContainer(t.path),i=new tP({});(function KB(e,n){nP(e,n)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$w.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$w.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function JB(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return e.\u0275fac=function(t){return new(t||e)(We(xa,10),We(Dg,10),We(L_,8))},e.\u0275dir=Un({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&rt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ui([See]),u]}),e})();function QB(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function e6(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const t6=class extends XB{constructor(n=null,t,r){super(QI(t),eP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yS(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=e6(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){QB(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){QB(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){e6(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},kee={provide:Mg,useExisting:Rr(()=>ba)},s6=(()=>Promise.resolve())();let ba=(()=>{class e extends Mg{constructor(t,r,i,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new t6,this._registered=!1,this.update=new rr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function sP(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(s=>{s.constructor===va?t=s:function Tee(e){return Object.getPrototypeOf(e.constructor)===O_}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function iP(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){s6.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&vv(r);s6.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function vS(e,n){return[...n.path,e]}(t,this._parent):[t]}}return e.\u0275fac=function(t){return new(t||e)(We(jl,9),We(xa,10),We(Dg,10),We(Jc,10),We(T_,8),We(L_,8))},e.\u0275dir=Un({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ui([kee]),u,ho]}),e})(),Fp=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Un({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),a6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({}),e})();const oP=new On("NgModelWithFormControlWarning"),zee={provide:Jc,useExisting:Rr(()=>CS),multi:!0};function f6(e,n){return null==e?`${n}`:(n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let CS=(()=>{class e extends O_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=f6(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Vee(e){return e.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275dir=Un({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&rt("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ui([zee]),u]}),e})(),TS=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(f6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(We(_s),We(ta),We(CS,9))},e.\u0275dir=Un({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})();const Uee={provide:Jc,useExisting:Rr(()=>uP),multi:!0};function p6(e,n){return null==e?`${n}`:("string"==typeof n&&(n=`'${n}'`),n&&"object"==typeof n&&(n="Object"),`${e}: ${n}`.slice(0,50))}let uP=(()=>{class e extends O_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const m=this._getOptionValue(a[l].value);i.push(m)}}else{const a=r.options;for(let l=0;l<a.length;l++){const d=a[l];if(d.selected){const m=this._getOptionValue(d.value);i.push(m)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function jee(e){return e.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275dir=Un({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&rt("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ui([Uee]),u]}),e})(),ES=(()=>{class e{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(p6(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(p6(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return e.\u0275fac=function(t){return new(t||e)(We(_s),We(ta),We(uP,9))},e.\u0275dir=Un({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),e})(),F_=(()=>{class e{constructor(){this._validator=pS}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pS,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=Un({type:e,features:[ho]}),e})();const Wee={provide:xa,useExisting:Rr(()=>Rp),multi:!0};let Rp=(()=>{class e extends F_{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=vv,this.createValidator=t=>SB}enabled(t){return t}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275dir=Un({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&ft("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ui([Wee]),u]}),e})(),T6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[a6]}),e})(),E6=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:L_,useValue:t.callSetDisabledState??jw}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[T6]}),e})(),Jee=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:oP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:L_,useValue:t.callSetDisabledState??jw}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[T6]}),e})();function Qee(e,n){if(1&e&&(k(0,"div",1)(1,"div",2),V(2),Ji(3,"date"),A(),k(4,"div",3)(5,"h5",4),V(6),A(),k(7,"p",5),V(8),A(),Q(9,"img",6),A()()),2&e){const t=n.$implicit;ce(2),Nl(" ",zl(3,4,t.Fecha_Pub,"dd/mm/yyyy")," "),ce(4),$t(t.Titulo_Pub),ce(2),$t(t.Descripcion_Pub),ce(1),ze("src",t.ImagenP,Zi)}}let ete=(()=>{class e{constructor(t){this.http=t,this.publicaciones=[]}getPublicacion(){this.http.get("http://prueba252.somee.com/api/Publicaciones").subscribe(t=>{this.publicaciones=t,console.log(this.publicaciones)})}ngOnInit(){setInterval(()=>{this.getPublicacion()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-stacks"]],decls:2,vars:1,consts:[["class","card","style","margin: 20px;",4,"ngFor","ngForOf"],[1,"card",2,"margin","20px"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[2,"width","50%",3,"src"]],template:function(t,r){1&t&&(k(0,"div"),Rt(1,Qee,10,7,"div",0),A()),2&t&&(ce(1),ze("ngForOf",r.publicaciones))},dependencies:[vs,M_]}),e})(),tte=(()=>{class e{constructor(t,r){this.http=t,this.sant=r,this.usuario=""}onFileChanged(t){this.file=t.target.files[0]}convertToBase64(){if(!this.file){const t=new FileReader;t.readAsDataURL(this.file),t.onload=()=>{this.base64String=t.result,this.base64Image=t.result}}}copyToClipboard(){const t=document.createElement("textarea");t.value=this.base64String,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),alert("basse65 string copied to clipboard succesfully!")}ngOnInit(){}enviarMensaje(){if(this.file){const r=new FileReader;r.readAsDataURL(this.file),r.onload=()=>{this.base64String=r.result,this.base64Image=r.result,console.log(this.base64String);const i={Titulo_Pub:this.Titulo_Pub,Descripcion_Pub:this.Descripcion_Pub,usuario:this.usuario,ImagenP:this.base64String};console.log(i),this.http.post("https://pruebaacotma2.somee.com/api/agregarPublicaciones",i).toPromise().then(a=>{console.log(a),location.reload()})}}}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-inicio"]],decls:82,vars:3,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateral",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul"],["href","#",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-house-door"],["href","Ubicacion_Titan",1,"nav-link","link-dark"],[1,"bi","bi-geo-alt-fill"],["id","menuLateral","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"bi","bi-folder2-open"],["href","titanes",1,"nav-link","link-dark"],[1,"bi","bi-file-earmark-person"],[1,"dropdown"],[1,"bi","bi-box-arrow-right"],[1,"container",2,"background-color","rgb(202, 202, 202)","text-align","center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal","data-bs-whatever","@fat",1,"btn-flotante"],[1,"bi","bi-chat-left-text"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"submit"],[1,"mb-3"],["for","titulo","required","required",1,"col-form-label"],["type","text","id","titulo","name","Titulo_Pub",1,"form-control",3,"ngModel","required","ngModelChange"],["for","Mensaje-text",1,"col-form-label"],["id","mensaje","name","Descripcion_Pub",1,"form-control",3,"ngModel","ngModelChange"],[1,"mainPage"],["type","file",3,"change"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INICIO "),A()()()()(),k(11,"body")(12,"nav",9)(13,"div",10)(14,"li",11)(15,"button",12),Q(16,"i",13),A()(),k(17,"li",11)(18,"a",14)(19,"button",15),Q(20,"i",16),A()()(),k(21,"li",11)(22,"a",17)(23,"button",15),Q(24,"i",18),A()()(),k(25,"section",19)(26,"div",20)(27,"a",21)(28,"span",22),V(29,"MENU"),A()(),Q(30,"hr"),k(31,"ul",23)(32,"li",11)(33,"a",14)(34,"button",15),Q(35,"i",24),V(36," DESPACHO"),A()()(),Q(37,"hr"),k(38,"li",11)(39,"a",25)(40,"button",15),Q(41,"i",26),V(42," TITANES "),A()()()(),Q(43,"hr"),k(44,"ul")(45,"div",27)(46,"li",11)(47,"a",14)(48,"button",15),Q(49,"i",28),V(50," SALIR "),A()()()()()()()()(),k(51,"div",29),Q(52,"app-stacks"),A(),k(53,"div",10)(54,"div")(55,"button",30),Q(56,"i",31),A()(),k(57,"div",32)(58,"div",33)(59,"div",34)(60,"div",35)(61,"h5",36),V(62,"NUEVO MENSAJE"),A(),Q(63,"button",37),A(),k(64,"div",38)(65,"form",39),rt("submit",function(){return r.enviarMensaje()}),k(66,"div",40)(67,"label",41),V(68,"Titulo:"),A(),k(69,"input",42),rt("ngModelChange",function(s){return r.Titulo_Pub=s}),A()(),k(70,"div",40)(71,"label",43),V(72,"Mensaje:"),A(),k(73,"textarea",44),rt("ngModelChange",function(s){return r.Descripcion_Pub=s}),A()(),k(74,"div",45)(75,"input",46),rt("change",function(s){return r.onFileChanged(s)}),A(),Q(76,"br"),A(),k(77,"div",47)(78,"button",48),V(79,"Cerrar"),A(),k(80,"button",49),rt("click",function(){return r.convertToBase64()}),V(81,"ENVIAR"),A()()()()()()()()()),2&t&&(ce(69),ze("ngModel",r.Titulo_Pub)("required",r.Titulo_Pub),ce(4),ze("ngModel",r.Descripcion_Pub))},dependencies:[Fp,va,Ha,Lp,Rp,ba,Wh,ete],styles:[".btn-flotante[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;font-weight:700;color:#fff;border-radius:20px;letter-spacing:2px;background-color:#e91e63;padding:18px 30px;position:fixed;bottom:40px;right:40px;transition:all .3s ease 0ms;box-shadow:0 8px 15px #0000001a;z-index:99}.btn-flotante[_ngcontent-%COMP%]:hover{background-color:#2c2fa5;box-shadow:0 15px 20px #000;border-radius:50px;transform:translateY(-7px)}@media only screen and (max-width: 600px){.btn-flotante[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;bottom:20px;right:20px}}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.tamano[_ngcontent-%COMP%]{width:500px}"]}),e})(),hP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-nav-bar"]],decls:5,vars:0,consts:[[1,"container"],[1,"navbar","navbar-light","justify-content-center"],[1,"container-fluid"],["href","menu/cronos",1,"navbar-brand",2,"font-size","40px","color","rgb(87, 207, 255)"],[1,"bi","bi-house-door-fill"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"i",4),A()()()())}}),e})();function nte(e,n){if(1&e&&(k(0,"tr",22)(1,"td",25),V(2),Ji(3,"date"),A(),k(4,"td",25),V(5),A(),k(6,"td",25),V(7),A(),k(8,"td",25),V(9),A(),k(10,"td",25),V(11),A(),k(12,"td",25),V(13),A(),k(14,"td",25),V(15),A(),k(16,"td",25),V(17),A()()),2&e){const t=n.$implicit;ce(2),$t(zl(3,8,t.Fecha_incidencia,"dd/mm/yyyy")),ce(3),$t(t.Servicio),ce(2),$t(t.VehiculoECO),ce(2),$t(t.Equipo_afectado),ce(2),$t(t.Id_equipo_afectado),ce(2),$t(t.Falla),ce(2),$t(t.Estado),ce(2),$t(t.usuario)}}let rte=(()=>{class e{constructor(t){this.http=t,this.InformeIncidenciasTec=[],this.title="Informe de accidentes"}getAllEstacionesToday(){this.http.get("https://pruebaacotma2.somee.com/api/Informe_de_incidencias_tecnologicas_de_hoy").subscribe(t=>{console.log(t),this.InformeIncidenciasTec=t})}ngOnInit(){setInterval(()=>{this.getAllEstacionesToday()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-inf-tecnologicos"]],decls:51,vars:2,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"container"],[1,"navbar","navbar-light"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex"],["type","text","name","search","autocomplete","on","placeholder"," Buscar Informe",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn",2,"font-size","25px","margin","10px"],[1,"bi","bi-download"],["href","","title","agrega incidencias",1,"btn-flotante"],[1,"bi","bi-plus",2,"font-size","40px"],[1,"container","text-center"],["role","table",1,"table","table-bordered","table-fixed"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","row",4,"ngFor","ngForOf"],["role","cell"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INCIDENCIAS T\xc9CNOLOGICAS "),A()()()()(),Q(11,"app-nav-bar"),k(12,"div",9)(13,"nav",10)(14,"div",11)(15,"a",12),V(16,"INFORMES DE INCIDENCIAS T\xc9CNOLOGICAS DEL DIA"),A(),k(17,"div",13)(18,"input",14),rt("ngModelChange",function(s){return r.term=s}),A(),k(19,"button",15),Q(20,"i",16),A()()()()(),k(21,"div",9)(22,"div")(23,"a",17),Q(24,"i",18),A()()(),k(25,"div",9),Q(26,"hr"),k(27,"div",19)(28,"h4"),V(29,"SITMAH"),A()(),k(30,"table",20)(31,"thead",21)(32,"tr",22)(33,"th",23),V(34,"Fecha de Incidencia"),A(),k(35,"th",23),V(36,"Servicio"),A(),k(37,"th",23),V(38,"Vehiculo(ECO)"),A(),k(39,"th",23),V(40,"Equipo afectado"),A(),k(41,"th",23),V(42,"Id equipo afectado"),A(),k(43,"th",23),V(44,"Falla"),A(),k(45,"th",23),V(46,"Estado"),A(),k(47,"th",23),V(48,"TITAN/ANALISTA QUE REPORTA"),A()()(),k(49,"tbody",21),Rt(50,nte,18,11,"tr",24),A()()()),2&t&&(ce(18),ze("ngModel",r.term),ce(32),ze("ngForOf",r.InformeIncidenciasTec))},dependencies:[vs,va,Ha,ba,hP,M_],styles:['.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%}td[_ngcontent-%COMP%]:before{position:absolute;top:0;left:6px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"TITAN/ANALISTA"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"HORA REGISTRO"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"SERVICIO"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"VEHICULO(ECO)"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"EQUIPO AFECTADO"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"FALLA"}}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;text-align:center;z-index:10;font-weight:700;background-color:#fff}.btn-flotante[_ngcontent-%COMP%]{font-size:15px;text-transform:uppercase;font-weight:700;color:#000;border-radius:15px;letter-spacing:2px;background-color:transparent;padding:18px 25px;position:fixed;bottom:15px;right:40px;transition:all .3s ease 0ms;box-shadow:0 8px 15px #0000001a;z-index:99}.btn-flotante[_ngcontent-%COMP%]:hover{background-color:red;box-shadow:0 15px 20px #000;border-radius:50px;transform:translateY(-7px)}@media only screen and (max-width: 600px){.btn-flotante[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;bottom:20px;right:20px}}']}),e})(),S6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-b8"]],decls:99,vars:0,consts:[[1,"container"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["href","incidencias_inicio",1,"navbar-brand"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],["type","button",1,"btn","btn-outline",2,"font-size","30px"],[1,"bi","bi-download"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[2,"text-align","right"],["id","vehiculo_sitmah",1,"container"],[1,"table-responsive"],[1,"table","table-bordered"],["scope","col"],["id","vehiculo_particular"],["src","...","alt","...",1,"img-thumbnail"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SALIR"),A(),k(5,"div",4),Q(6,"ul",5),k(7,"button",6),Q(8,"i",7),A()()()()(),k(9,"div",0)(10,"div",8)(11,"h5",9),V(12,"INFORME DE PERCANCE B8"),A(),k(13,"h5"),V(14,"FECHA"),A()(),k(15,"h5",10),V(16,"HORA"),A(),Q(17,"hr"),k(18,"div",11)(19,"h4"),V(20,"VEHICULO SITMAH"),A(),k(21,"div",12)(22,"table",13)(23,"thead")(24,"tr")(25,"th",14),V(26,"ECO"),A(),k(27,"th",14),V(28,"TIPO DE UNIDAD"),A(),k(29,"th",14),V(30,"ID_TARJETON"),A(),k(31,"th",14),V(32,"CONDUCTOR"),A(),k(33,"th",14),V(34,"SERVICIO RUTA"),A(),k(35,"th",14),V(36,"UBICACI\xd3N"),A()()(),k(37,"tbody")(38,"tr")(39,"td"),V(40,"202"),A(),k(41,"td"),V(42,"T-01"),A(),k(43,"td"),V(44,"101"),A(),k(45,"td"),V(46,"MAX VERSTAPEN"),A(),k(47,"td"),V(48,"EXPRES"),A(),k(49,"td"),V(50,"BICENTENARIO"),A()()()()(),Q(51,"hr"),k(52,"div",15)(53,"h4"),V(54,"VEHICULO PARTICULAR"),A(),k(55,"div",12)(56,"table",13)(57,"thead")(58,"tr")(59,"th",14),V(60,"MARCA"),A(),k(61,"th",14),V(62,"MODELO"),A(),k(63,"th",14),V(64,"COLOR"),A(),k(65,"th",14),V(66,"PLACA"),A()()(),k(67,"tbody")(68,"tr")(69,"td"),V(70,"AUDI"),A(),k(71,"td"),V(72,"2024"),A(),k(73,"td"),V(74,"NEGRO"),A(),k(75,"td"),V(76,"19387"),A()()()()()(),k(77,"div",12)(78,"table",13)(79,"thead")(80,"tr")(81,"th",14),V(82,"RELATO DE LOS ECHOS"),A()()(),k(83,"tbody")(84,"tr")(85,"td"),V(86,"Audi choco contra gran viale por que se paso un semaforo"),A()()()()(),k(87,"div",12)(88,"table",13)(89,"thead")(90,"tr")(91,"th",14),V(92,"FOTOS"),A()()(),k(93,"tbody")(94,"tr")(95,"td"),Q(96,"img",16)(97,"img",16)(98,"img",16),A()()()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}"]}),e})(),D6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-header"]],decls:11,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INFORME DE LIMPIEZA "),A()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}"]}),e})(),M6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-nav-bar-limpieza"]],decls:13,vars:0,consts:[[1,"navbar","navbar-light","justify-content-center"],[1,"container-fluid"],[1,"container"],[1,"navbar","navbar-light"],["href","menu/cronos",1,"navbar-brand",2,"font-size","40px","color","rgb(0, 0, 0)"],[1,"bi","bi-house-door-fill"],["type","button",1,"btn","btn-outline-light"],["href","informe_de_limpieza_del_dia_de_hoy",1,"navbar-brand"],["href","informe_de_limpieza_de_la_semana",1,"navbar-brand"]],template:function(t,r){1&t&&(k(0,"nav",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"div",1)(5,"a",4),Q(6,"i",5),A(),k(7,"button",6)(8,"a",7),V(9,"INFORME DIARIO"),A()(),k(10,"button",6)(11,"a",8),V(12,"INFORME DE LIMPIEZA SEMANAL"),A()()()()()()())},styles:[".text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.tamano[_ngcontent-%COMP%]{width:500px}"]}),e})(),R_=(()=>{class e{transform(t,r){return r&&t?e.filter(t,r):t}static filter(t,r){const i=r.toLowerCase();function s(a,l){for(let d in a)if(null!==a[d]&&null!=a[d]&&("object"==typeof a[d]&&s(a[d],l)||a[d].toString().toLowerCase().includes(i)))return!0;return!1}return t.filter(function(a){return s(a,r)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=so({name:"filter",type:e,pure:!1}),e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),ite=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({}),e})();function ste(e,n){if(1&e&&(k(0,"tr",17)(1,"td",20),V(2),A(),k(3,"td",20),V(4),Ji(5,"date"),A(),k(6,"td",20),V(7),A(),k(8,"td",20),V(9),A(),k(10,"td",20),V(11),A(),k(12,"td",20),V(13),A(),k(14,"td",20),V(15),A(),k(16,"td",20),V(17),A(),k(18,"td",20),V(19),A(),k(20,"td",20),V(21),A()()),2&e){const t=n.$implicit;ce(2),$t(t.Estacion),ce(2),$t(zl(5,10,t.Fecha_Limpieza,"dd/mm/yyyy")),ce(3),$t(t.LimpiezaPiso),ce(2),$t(t.LimpiezaVidrio),ce(2),$t(t.LimpiezaAreaServicios),ce(2),$t(t.LimpiezaAreaEstructura),ce(2),$t(t.LimpiezaTorniquetes),ce(2),$t(t.LimpiezaSanitarios),ce(2),$t(t.Observaciones),ce(2),$t(t.Usuario)}}let ote=(()=>{class e{constructor(t){this.http=t,this.ejemplos=[],this.InformeLimpiezasdia=[],this.title="Informe de limpieza"}getAllEstaciones(){this.http.get("https://pruebaacotma2.somee.com/api/limpieza_del_dia_de_hoy").subscribe(t=>{console.log(t),this.ejemplos=t})}ngOnInit(){setInterval(()=>{this.getAllEstaciones()},500)}dateRangeCreated(t){let r=t[0].toJSON().split("T")[0],i=t[1].toJSON().split("T")[0];this.ejemplos=this.ejemplos.filter(s=>new Date(s.CreatedDate)>=new Date(r)&&new Date(s.CreatedDate)<=new Date(i))}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-dias"]],decls:46,vars:5,consts:[[1,"container"],[1,"navbar","navbar-light"],[1,"container-fluid"],[1,"navbar-brand"],[1,"row"],[1,"col-xs-12","col-12","col-md-12","form-group","mb-6"],[1,"d-flex"],[1,"form-group"],[1,"input-group"],[1,"input-group-text","bg-white"],[1,"bi","bi-search"],["type","text","name","search","autocomplete","on","placeholder"," Escriba la Estacion",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn",2,"font-size","25px","margin","10px"],[1,"bi","bi-download"],[1,"container","justify-content-center"],["role","table",1,"table","table-bordered","table-fixed"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","row",4,"ngFor","ngForOf"],["role","cell"]],template:function(t,r){1&t&&(Q(0,"app-header")(1,"app-nav-bar-limpieza"),k(2,"div",0)(3,"nav",1)(4,"div",2)(5,"a",3),V(6,"INFORME DEL DIA"),A(),k(7,"div",4),Q(8,"div",5),A(),k(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),Q(13,"i",10),A(),k(14,"input",11),rt("ngModelChange",function(s){return r.term=s}),A()()()(),k(15,"button",12),Q(16,"i",13),A()()()(),Q(17,"hr"),k(18,"div",14),Q(19,"hr"),k(20,"table",15)(21,"thead",16)(22,"tr",17)(23,"th",18),V(24,"Estacion"),A(),k(25,"th",18),V(26,"Fecha"),A(),k(27,"th",18),V(28,"Limpieza de piso"),A(),k(29,"th",18),V(30,"impieza de vidrio"),A(),k(31,"th",18),V(32,"Limpieza de area de servicio"),A(),k(33,"th",18),V(34,"Limpieza de estructura"),A(),k(35,"th",18),V(36,"Limpieza de torniquete en espacios de venta y recarga de tarjeta"),A(),k(37,"th",18),V(38,"Limpieza de sanitarios"),A(),k(39,"th",18),V(40,"Observciones"),A(),k(41,"th",18),V(42,"\xbfQuien superviso?"),A()()(),k(43,"tbody",16),Rt(44,ste,22,13,"tr",19),Ji(45,"filter"),A()()()),2&t&&(ce(14),ze("ngModel",r.term),ce(30),ze("ngForOf",zl(45,2,r.ejemplos,r.term)))},dependencies:[vs,va,Ha,ba,D6,M6,M_,R_],styles:['.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%}td[_ngcontent-%COMP%]:before{position:absolute;top:0;left:6px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"TITAN/ANALISTA"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"HORA REGISTRO"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"SERVICIO"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"VEHICULO(ECO)"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"EQUIPO AFECTADO"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"FALLA"}}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;text-align:center;z-index:10;font-weight:700;background-color:#fff}']}),e})();function ate(e,n){if(1&e&&(k(0,"tr",17)(1,"td",20),V(2),A(),k(3,"td",20),V(4),Ji(5,"date"),A(),k(6,"td",20),V(7),A(),k(8,"td",20),V(9),A(),k(10,"td",20),V(11),A(),k(12,"td",20),V(13),A(),k(14,"td",20),V(15),A(),k(16,"td",20),V(17),A(),k(18,"td",20),V(19),A(),k(20,"td",20),V(21),A()()),2&e){const t=n.$implicit;ce(2),$t(t.Estacion),ce(2),$t(zl(5,10,t.Fecha_Limpieza,"dd/mm/yyyy")),ce(3),$t(t.LimpiezaPiso),ce(2),$t(t.LimpiezaVidrio),ce(2),$t(t.LimpiezaAreaServicios),ce(2),$t(t.LimpiezaAreaEstructura),ce(2),$t(t.LimpiezaTorniquetes),ce(2),$t(t.LimpiezaSanitarios),ce(2),$t(t.Observaciones),ce(2),$t(t.Usuario)}}let lte=(()=>{class e{constructor(t){this.http=t,this.semanales=[]}getSemanal(){this.http.get("https://pruebaacotma2.somee.com/api/resumen_limpieza").subscribe(t=>{console.log(t),this.semanales=t})}ngOnInit(){setInterval(()=>{this.getSemanal()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-semanal"]],decls:45,vars:5,consts:[[1,"container"],[1,"navbar","navbar-light"],[1,"container-fluid"],[1,"navbar-brand"],[1,"row"],[1,"col-xs-12","col-12","col-md-12","form-group","mb-6"],[1,"d-flex"],[1,"form-group"],[1,"input-group"],[1,"input-group-text","bg-white"],[1,"bi","bi-search"],["type","text","name","search","autocomplete","on","placeholder"," Escriba la Fecha",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn",2,"font-size","25px","margin","10px"],[1,"bi","bi-download"],[1,"container","justify-content-center"],["role","table",1,"table","table-striped","table-fixed"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","row",4,"ngFor","ngForOf"],["role","cell"]],template:function(t,r){1&t&&(Q(0,"app-header")(1,"app-nav-bar-limpieza"),k(2,"div",0)(3,"nav",1)(4,"div",2)(5,"a",3),V(6,"INFORME POR FECHA"),A(),k(7,"div",4),Q(8,"div",5),A(),k(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),Q(13,"i",10),A(),k(14,"input",11),rt("ngModelChange",function(s){return r.term=s}),A()()()(),k(15,"button",12),Q(16,"i",13),A()()()(),k(17,"div",14),Q(18,"hr"),k(19,"table",15)(20,"thead",16)(21,"tr",17)(22,"th",18),V(23,"Estacion"),A(),k(24,"th",18),V(25,"Fecha"),A(),k(26,"th",18),V(27,"Limpieza de piso"),A(),k(28,"th",18),V(29,"impieza de vidrio"),A(),k(30,"th",18),V(31,"Limpieza de area de servicio"),A(),k(32,"th",18),V(33,"Limpieza de estructura"),A(),k(34,"th",18),V(35,"Limpieza de torniquete en espacios de venta y recarga de tarjeta"),A(),k(36,"th",18),V(37,"Limpieza de sanitarios"),A(),k(38,"th",18),V(39,"Observciones"),A(),k(40,"th",18),V(41,"\xbfQuien superviso?"),A()()(),k(42,"tbody",16),Rt(43,ate,22,13,"tr",19),Ji(44,"filter"),A()()()),2&t&&(ce(14),ze("ngModel",r.term),ce(29),ze("ngForOf",zl(44,2,r.semanales,r.term)))},dependencies:[vs,va,Ha,ba,D6,M6,M_,R_],styles:['.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%}td[_ngcontent-%COMP%]:before{position:absolute;top:0;left:6px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"ACCI\\d3N"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"LUNES"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"MARTES"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"MIERCOLES"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"JUEVES"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"VIERNES"}td[_ngcontent-%COMP%]:nth-of-type(7):before{content:"SABADO"}td[_ngcontent-%COMP%]:nth-of-type(8):before{content:"DOMINGO"}td[_ngcontent-%COMP%]:nth-of-type(9):before{content:"OBSERVACIONES"}}']}),e})(),cte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-header-incidencias"]],decls:11,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INFORME DE INCIDENCIAS "),A()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}"]}),e})();function ute(e,n){if(1&e&&(k(0,"div",2)(1,"div")(2,"div",3)(3,"div",3)(4,"nav",4)(5,"div",5)(6,"a",6),V(7,"ACCIDENTE AUTOMOVILISTICO"),A(),k(8,"div",7)(9,"div",8)(10,"span",9),V(11),A()(),k(12,"div",8)(13,"span",9),V(14),A()(),k(15,"div",8)(16,"span",9),V(17),Ji(18,"date"),A()()(),k(19,"button",10),Q(20,"i",11),A()()()(),Q(21,"hr"),k(22,"div",12)(23,"h4"),V(24,"VEHICULO SITMAH"),A(),k(25,"div",13)(26,"table",14)(27,"thead")(28,"tr")(29,"th",15),V(30,"FECHA"),A(),k(31,"th",15),V(32,"TIPO DE UNIDAD"),A(),k(33,"th",15),V(34,"NoEconomico"),A(),k(35,"th",15),V(36,"SERVICIO RUTA"),A(),k(37,"th",15),V(38,"CONDUCTOR"),A(),k(39,"th",15),V(40,"ID_TARJETON"),A(),k(41,"th",15),V(42,"UBICACI\xd3N"),A(),k(43,"th",15),V(44,"SENTIDO"),A()()(),k(45,"tbody")(46,"tr",16)(47,"td",17),V(48),A(),k(49,"td",17),V(50),A(),k(51,"td",17),V(52),A(),k(53,"td",17),V(54),A(),k(55,"td",17),V(56),A(),k(57,"td",17),V(58),A(),k(59,"td",17),V(60),A(),k(61,"td",17),V(62),A()()()()(),Q(63,"hr"),k(64,"div",18)(65,"h4"),V(66,"VEHICULO PARTICULAR"),A(),k(67,"div",13)(68,"table",14)(69,"thead")(70,"tr")(71,"th",15),V(72,"MARCA"),A(),k(73,"th",15),V(74,"SUBMARCA"),A(),k(75,"th",15),V(76,"COLOR"),A(),k(77,"th",15),V(78,"PLACA"),A(),k(79,"th",15),V(80,"A\xd1O"),A()()(),k(81,"tbody")(82,"tr")(83,"td",17),V(84),A(),k(85,"td",17),V(86),A(),k(87,"td",17),V(88),A(),k(89,"td",17),V(90),A(),k(91,"td",17),V(92),A()()()()()(),k(93,"div",13)(94,"table",14)(95,"thead")(96,"tr")(97,"th",15),V(98,"RELATO DE LOS HECHOS"),A()()(),k(99,"tbody")(100,"tr")(101,"td",17),V(102),A()()()()(),k(103,"div",13)(104,"table",14)(105,"thead")(106,"th",15),V(107,"LESIONADOS"),A(),k(108,"th",15),V(109,"NOMBRES"),A(),k(110,"th",15),V(111,"AMBULANCIA"),A(),k(112,"th",15),V(113,"SEGURIDAD PUBLICA"),A(),k(114,"th",15),V(115,"PATRULLA"),A(),k(116,"th",15),V(117,"OFICIAL A CARGO"),A(),k(118,"th",15),V(119,"SEGURO"),A(),k(120,"th",15),V(121,"SUPERVISOR"),A()(),k(122,"tbody")(123,"tr",16)(124,"td",17),V(125),A(),k(126,"td",17),V(127),A(),k(128,"td",17),V(129),A(),k(130,"td",17),V(131),A(),k(132,"td",17),V(133),A(),k(134,"td",17),V(135),A(),k(136,"td",17),V(137),A(),k(138,"td",17),V(139),A()()()()(),k(140,"div",13)(141,"table",14),Q(142,"thead"),A(),k(143,"div",19),Q(144,"img",20)(145,"img",20)(146,"img",20),A()()()()(),Q(147,"div"),A()),2&e){const t=n.$implicit;ce(11),$t(t.Ubicacion),ce(3),$t(t.TipoUnidad),ce(3),$t(zl(18,28,t.Fecha_Percance,"dd/mm/yyyy")),ce(31),$t(t.Fecha_Percance),ce(2),$t(t.TipoUnidad),ce(2),$t(t.NoEconomico),ce(2),$t(t.ServicioRuta),ce(2),$t(t.Conductor),ce(2),$t(t.Credencial),ce(2),$t(t.Ubicacion),ce(2),$t(t.Sentido),ce(22),$t(t.Marca),ce(2),$t(t.Submarca),ce(2),$t(t.Color),ce(2),$t(t.Placas),ce(2),$t(t.Anio),ce(10),$t(t.Descripcion),ce(23),$t(t.Lesionados),ce(2),$t(t.Nombres),ce(2),$t(t.Ambulancia),ce(2),$t(t.SeguridaPublica),ce(2),$t(t.PatrullaNumero),ce(2),$t(t.OficialAcargo),ce(2),$t(t.Seguro),ce(2),$t(t.Supervisor),ce(5),ze("src",t.Foto_Eco,Zi),ce(1),ze("src",t.Foto_Part,Zi),ce(1),ze("src",t.Foto_Tarjeton,Zi)}}let hte=(()=>{class e{constructor(t){this.http=t,this.accidentes=[]}getAccidenteAHT(){this.http.get("https://pruebaacotma2.somee.com/api/Informe_de_Accidente_de_hoy").subscribe(t=>{this.accidentes=t,console.log(this.accidentes)})}ngOnInit(){setInterval(()=>{this.getAccidenteAHT()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-card-incidencias"]],decls:2,vars:1,consts:[[1,"container",2,"background-color","rgb(248, 248, 248)"],["class","card","style","margin: 20px; border-radius: 30px;",4,"ngFor","ngForOf"],[1,"card",2,"margin","20px","border-radius","30px"],[1,"container"],[1,"navbar","navbar-light"],[1,"container-fluid"],[1,"navbar-brand"],[1,"d-flex"],[1,"form-group",2,"margin","25px"],[2,"font-size","23px"],["type","submit",1,"btn",2,"font-size","25px","margin","10px"],[1,"bi","bi-download"],["id","vehiculo_sitmah",1,"container"],[1,"table-responsive"],[1,"table","table-bordered"],["scope","col"],["role","row"],["role","cell"],["id","vehiculo_particular"],[1,"card-body",2,"text-align","center"],[2,"width","45%","margin","10px",3,"src"]],template:function(t,r){1&t&&(k(0,"div",0),Rt(1,ute,148,31,"div",1),A()),2&t&&(ce(1),ze("ngForOf",r.accidentes))},dependencies:[vs,M_],styles:[".card_inc[_ngcontent-%COMP%]{border-radius:20px;background-color:#fff;padding:20px}.card_inc[_ngcontent-%COMP%]:hover{background-color:#ff0062;box-shadow:0 15px 20px #000;border-radius:50px;transform:translateY(-7px)}.card_view[_ngcontent-%COMP%]{color:#000;font-size:16px;border-radius:20px}"]}),e})(),dte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-inicio-incidencias"]],decls:3,vars:0,template:function(t,r){1&t&&Q(0,"app-header-incidencias")(1,"app-nav-bar")(2,"app-card-incidencias")},dependencies:[hP,cte,hte]}),e})(),fte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-registro-vehi"]],decls:368,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"container"],[1,"d-flex"],[1,"col-10",2,"text-align","center","justify-content","center"],[1,"col-2",2,"text-align","end","font-size","40px"],[1,"bi","bi-download"],[1,"container","text-center"],["role","table",1,"table","table-bordered","table-fixed"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","cell"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," REGISTROS VEHICULAR "),A()()()()(),Q(11,"app-nav-bar"),k(12,"div",9)(13,"div",10)(14,"div",11)(15,"h2"),V(16,"Informe de solicitud de prestamo de vehiculo"),A()(),k(17,"div",12),Q(18,"i",13),A()(),Q(19,"hr"),k(20,"div",14)(21,"h4"),V(22,"SITMAH"),A()(),k(23,"table",15)(24,"thead",16)(25,"tr",17)(26,"th",18),V(27,"Fecha"),A(),k(28,"th",18),V(29,"Nombre solicitante"),A(),k(30,"th",18),V(31,"Marca Vehiculo"),A(),k(32,"th",18),V(33,"Submarca Vehiculo"),A(),k(34,"th",18),V(35,"Placa Vehiculo"),A(),k(36,"th",18),V(37,"Tiempo"),A(),k(38,"th",18),V(39,"\xc1rea solicitante"),A(),k(40,"th",18),V(41,"Actividades a realizar"),A(),k(42,"th",18),V(43,"Registro de kilometraje"),A()()(),k(44,"tbody",16)(45,"tr",17)(46,"td",19),V(47,"01/03/23"),A(),k(48,"td",19),V(49,"aldo william hdz m"),A(),k(50,"td",19),V(51,"gtr"),A(),k(52,"td",19),V(53,"nissan"),A(),k(54,"td",19),V(55,"8273633"),A(),k(56,"td",19),V(57,"10 horas"),A(),k(58,"td",19),V(59,"direccion de planeacion y desarrollo"),A(),k(60,"td",19),V(61,"ir con las cari\xf1osas"),A(),k(62,"td",19),V(63,"50km"),A()(),k(64,"tr",17)(65,"td",19),V(66,"01/03/23"),A(),k(67,"td",19),V(68,"aldo william hdz m"),A(),k(69,"td",19),V(70,"gtr"),A(),k(71,"td",19),V(72,"nissan"),A(),k(73,"td",19),V(74,"8273633"),A(),k(75,"td",19),V(76,"10 horas"),A(),k(77,"td",19),V(78,"direccion de planeacion y desarrollo"),A(),k(79,"td",19),V(80,"ir con las cari\xf1osas"),A(),k(81,"td",19),V(82,"50km"),A()(),k(83,"tr",17)(84,"td",19),V(85,"01/03/23"),A(),k(86,"td",19),V(87,"aldo william hdz m"),A(),k(88,"td",19),V(89,"gtr"),A(),k(90,"td",19),V(91,"nissan"),A(),k(92,"td",19),V(93,"8273633"),A(),k(94,"td",19),V(95,"10 horas"),A(),k(96,"td",19),V(97,"direccion de planeacion y desarrollo"),A(),k(98,"td",19),V(99,"ir con las cari\xf1osas"),A(),k(100,"td",19),V(101,"50km"),A()(),k(102,"tr",17)(103,"td",19),V(104,"01/03/23"),A(),k(105,"td",19),V(106,"aldo william hdz m"),A(),k(107,"td",19),V(108,"gtr"),A(),k(109,"td",19),V(110,"nissan"),A(),k(111,"td",19),V(112,"8273633"),A(),k(113,"td",19),V(114,"10 horas"),A(),k(115,"td",19),V(116,"direccion de planeacion y desarrollo"),A(),k(117,"td",19),V(118,"ir con las cari\xf1osas"),A(),k(119,"td",19),V(120,"50km"),A()(),k(121,"tr",17)(122,"td",19),V(123,"01/03/23"),A(),k(124,"td",19),V(125,"aldo william hdz m"),A(),k(126,"td",19),V(127,"gtr"),A(),k(128,"td",19),V(129,"nissan"),A(),k(130,"td",19),V(131,"8273633"),A(),k(132,"td",19),V(133,"10 horas"),A(),k(134,"td",19),V(135,"direccion de planeacion y desarrollo"),A(),k(136,"td",19),V(137,"ir con las cari\xf1osas"),A(),k(138,"td",19),V(139,"50km"),A()(),k(140,"tr",17)(141,"td",19),V(142,"01/03/23"),A(),k(143,"td",19),V(144,"aldo william hdz m"),A(),k(145,"td",19),V(146,"gtr"),A(),k(147,"td",19),V(148,"nissan"),A(),k(149,"td",19),V(150,"8273633"),A(),k(151,"td",19),V(152,"10 horas"),A(),k(153,"td",19),V(154,"direccion de planeacion y desarrollo"),A(),k(155,"td",19),V(156,"ir con las cari\xf1osas"),A(),k(157,"td",19),V(158,"50km"),A()(),k(159,"tr",17)(160,"td",19),V(161,"01/03/23"),A(),k(162,"td",19),V(163,"aldo william hdz m"),A(),k(164,"td",19),V(165,"gtr"),A(),k(166,"td",19),V(167,"nissan"),A(),k(168,"td",19),V(169,"8273633"),A(),k(170,"td",19),V(171,"10 horas"),A(),k(172,"td",19),V(173,"direccion de planeacion y desarrollo"),A(),k(174,"td",19),V(175,"ir con las cari\xf1osas"),A(),k(176,"td",19),V(177,"50km"),A()(),k(178,"tr",17)(179,"td",19),V(180,"01/03/23"),A(),k(181,"td",19),V(182,"aldo william hdz m"),A(),k(183,"td",19),V(184,"gtr"),A(),k(185,"td",19),V(186,"nissan"),A(),k(187,"td",19),V(188,"8273633"),A(),k(189,"td",19),V(190,"10 horas"),A(),k(191,"td",19),V(192,"direccion de planeacion y desarrollo"),A(),k(193,"td",19),V(194,"ir con las cari\xf1osas"),A(),k(195,"td",19),V(196,"50km"),A()(),k(197,"tr",17)(198,"td",19),V(199,"01/03/23"),A(),k(200,"td",19),V(201,"aldo william hdz m"),A(),k(202,"td",19),V(203,"gtr"),A(),k(204,"td",19),V(205,"nissan"),A(),k(206,"td",19),V(207,"8273633"),A(),k(208,"td",19),V(209,"10 horas"),A(),k(210,"td",19),V(211,"direccion de planeacion y desarrollo"),A(),k(212,"td",19),V(213,"ir con las cari\xf1osas"),A(),k(214,"td",19),V(215,"50km"),A()(),k(216,"tr",17)(217,"td",19),V(218,"01/03/23"),A(),k(219,"td",19),V(220,"aldo william hdz m"),A(),k(221,"td",19),V(222,"gtr"),A(),k(223,"td",19),V(224,"nissan"),A(),k(225,"td",19),V(226,"8273633"),A(),k(227,"td",19),V(228,"10 horas"),A(),k(229,"td",19),V(230,"direccion de planeacion y desarrollo"),A(),k(231,"td",19),V(232,"ir con las cari\xf1osas"),A(),k(233,"td",19),V(234,"50km"),A()(),k(235,"tr",17)(236,"td",19),V(237,"01/03/23"),A(),k(238,"td",19),V(239,"aldo william hdz m"),A(),k(240,"td",19),V(241,"gtr"),A(),k(242,"td",19),V(243,"nissan"),A(),k(244,"td",19),V(245,"8273633"),A(),k(246,"td",19),V(247,"10 horas"),A(),k(248,"td",19),V(249,"direccion de planeacion y desarrollo"),A(),k(250,"td",19),V(251,"ir con las cari\xf1osas"),A(),k(252,"td",19),V(253,"50km"),A()(),k(254,"tr",17)(255,"td",19),V(256,"01/03/23"),A(),k(257,"td",19),V(258,"aldo william hdz m"),A(),k(259,"td",19),V(260,"gtr"),A(),k(261,"td",19),V(262,"nissan"),A(),k(263,"td",19),V(264,"8273633"),A(),k(265,"td",19),V(266,"10 horas"),A(),k(267,"td",19),V(268,"direccion de planeacion y desarrollo"),A(),k(269,"td",19),V(270,"ir con las cari\xf1osas"),A(),k(271,"td",19),V(272,"50km"),A()(),k(273,"tr",17)(274,"td",19),V(275,"01/03/23"),A(),k(276,"td",19),V(277,"aldo william hdz m"),A(),k(278,"td",19),V(279,"gtr"),A(),k(280,"td",19),V(281,"nissan"),A(),k(282,"td",19),V(283,"8273633"),A(),k(284,"td",19),V(285,"10 horas"),A(),k(286,"td",19),V(287,"direccion de planeacion y desarrollo"),A(),k(288,"td",19),V(289,"ir con las cari\xf1osas"),A(),k(290,"td",19),V(291,"50km"),A()(),k(292,"tr",17)(293,"td",19),V(294,"01/03/23"),A(),k(295,"td",19),V(296,"aldo william hdz m"),A(),k(297,"td",19),V(298,"gtr"),A(),k(299,"td",19),V(300,"nissan"),A(),k(301,"td",19),V(302,"8273633"),A(),k(303,"td",19),V(304,"10 horas"),A(),k(305,"td",19),V(306,"direccion de planeacion y desarrollo"),A(),k(307,"td",19),V(308,"ir con las cari\xf1osas"),A(),k(309,"td",19),V(310,"50km"),A()(),k(311,"tr",17)(312,"td",19),V(313,"01/03/23"),A(),k(314,"td",19),V(315,"aldo william hdz m"),A(),k(316,"td",19),V(317,"gtr"),A(),k(318,"td",19),V(319,"nissan"),A(),k(320,"td",19),V(321,"8273633"),A(),k(322,"td",19),V(323,"10 horas"),A(),k(324,"td",19),V(325,"direccion de planeacion y desarrollo"),A(),k(326,"td",19),V(327,"ir con las cari\xf1osas"),A(),k(328,"td",19),V(329,"50km"),A()(),k(330,"tr",17)(331,"td",19),V(332,"01/03/23"),A(),k(333,"td",19),V(334,"aldo william hdz m"),A(),k(335,"td",19),V(336,"gtr"),A(),k(337,"td",19),V(338,"nissan"),A(),k(339,"td",19),V(340,"8273633"),A(),k(341,"td",19),V(342,"10 horas"),A(),k(343,"td",19),V(344,"direccion de planeacion y desarrollo"),A(),k(345,"td",19),V(346,"ir con las cari\xf1osas"),A(),k(347,"td",19),V(348,"50km"),A()(),k(349,"tr",17)(350,"td",19),V(351,"01/03/23"),A(),k(352,"td",19),V(353,"aldo william hdz m"),A(),k(354,"td",19),V(355,"gtr"),A(),k(356,"td",19),V(357,"nissan"),A(),k(358,"td",19),V(359,"8273633"),A(),k(360,"td",19),V(361,"10 horas"),A(),k(362,"td",19),V(363,"direccion de planeacion y desarrollo"),A(),k(364,"td",19),V(365,"ir con las cari\xf1osas"),A(),k(366,"td",19),V(367,"50km"),A()()()()())},dependencies:[hP],styles:['.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%}td[_ngcontent-%COMP%]:before{position:absolute;top:0;left:6px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"FECHA"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"NOMBRE"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"MARCA"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"SUBMARCA"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"PLACA"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"TIEMPO"}td[_ngcontent-%COMP%]:nth-of-type(7):before{content:"AREA SLTT"}td[_ngcontent-%COMP%]:nth-of-type(8):before{content:"ACT RLZ"}td[_ngcontent-%COMP%]:nth-of-type(9):before{content:"RGTRO KM"}}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;text-align:center;z-index:10;font-weight:700;color:#fff;background-color:#000}']}),e})();function pte(e,n){if(1&e&&(k(0,"tr")(1,"th"),V(2),A(),k(3,"td"),V(4),A(),k(5,"td"),V(6),A(),k(7,"td"),V(8),A(),k(9,"td"),V(10),A()()),2&e){const t=n.$implicit;ce(2),$t(t.ruta),ce(2),$t(t.corrida),ce(2),$t(t.economico),ce(2),$t(t.nomChofer),ce(2),$t(t.tarjeton)}}let mte=(()=>{class e{constructor(t,r){this.router=t,this.http=r,this.icongif="assets/iconBlackAcotma.gif"}filterItems(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}GetServiciosIniciados(){this.http.get("http://prueba252.somee.com/api/CentroControl/Verificacion/Liberado").subscribe(t=>{this.dataAsignacion=t})}ngOnInit(){setInterval(()=>{this.GetServiciosIniciados()},500)}goApertura(){this.router.navigate(["Operadora/Agregar/Servicio"])}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}goEditarServicio(t){this.router.navigate(["Operadora/EditarServicio",t])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:61,vars:6,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-clock"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"input-group","flex-nowrap"],["id","addon-wrapping",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar","aria-label","Username","aria-describedby","addon-wrapping",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center",2,"color","aliceblue"],[1,"ex1"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","400px"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Servicios Iniciados"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goApertura()}),Q(16,"i",14),V(17," Apertura de Servicios"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),rt("click",function(){return r.goHorarioServicio()}),Q(21,"i",15),V(22," Horarios de Servicio"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",16),rt("click",function(){return r.goCerrar()}),Q(26,"i",17),V(27," Cerrrar Sesion"),A()()()()()()(),Q(28,"br")(29,"br")(30,"br")(31,"br")(32,"br")(33,"br"),k(34,"div",18)(35,"div",19)(36,"span",20),Q(37,"i",21),A(),k(38,"input",22),rt("ngModelChange",function(s){return r.filtro=s}),A()(),Q(39,"br"),k(40,"h3",23),V(41,"Unidades Liberadas"),A(),k(42,"div",24)(43,"table",25)(44,"thead")(45,"tr")(46,"th",26),V(47,"Ruta"),A(),k(48,"th",26),V(49,"Corrida"),A(),k(50,"th",26),V(51,"Economico"),A(),k(52,"th",26),V(53,"Nombre del Chofer"),A(),k(54,"th",26),V(55,"Tarjeton"),A()()(),k(56,"tbody"),Rt(57,pte,11,5,"tr",27),Ji(58,"filter"),A()()(),k(59,"div",28),Q(60,"img",29),A()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(34),ze("ngModel",r.filtro),ce(19),ze("ngForOf",zl(58,3,r.dataAsignacion,r.filtro)))},dependencies:[vs,va,Ha,ba,R_]}),e})();function k6(e,n,t,r,i,s,a){try{var l=e[s](a),d=l.value}catch(m){return void t(m)}l.done?n(d):Promise.resolve(d).then(r,i)}let _te=(()=>{class e extends xs{constructor(t){super(t),this.baseUrl="https://api.mapbox.com/geocoding/v5/mapbox.places"}get(t,r){return super.get(t=this.baseUrl+t,{params:{limit:2,language:"es",access_token:"pk.eyJ1IjoiZ29kd2lsbHk1MDAwIiwiYSI6ImNsZm9weGNwZTBqZWw0MHBqeDJubnlvMHoifQ.Q16Zoz1xothtWo29oKV_zw",...r.params}})}}return e.\u0275fac=function(t){return new(t||e)(Jt(Nw))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N_=Sf(898),yte=Sf.n(N_);let SS=(()=>{class e{constructor(){this.markers=[]}getRouteBetweenPoints(t,r){throw new Error("Method not implemented.")}get isMapReady(){return!!this.map}setMap(t){this.map=t}flyTo(t){if(!this.isMapReady)throw Error("el mapa no esta listo");this.map?.flyTo({zoom:14,center:t})}creatEMarkersFromPlaces(t,r){if(!this.map)throw Error("mapa no inicializado");this.markers.forEach(a=>a.remove());const i=[];for(const a of t){const[l,d]=a.center,m=(new N_.Popup).setHTML(`\n      <h6=>${a.text}</h6>\n      <span>${a.place_name}</span>\n      `),y=(new N_.Marker).setLngLat([l,d]).setPopup(m).addTo(this.map);i.push(y)}if(this.markers=i,0===t.length)return;const s=new N_.LngLatBounds;i.forEach(a=>s.extend(a.getLngLat())),s.extend(r),this.map.fitBounds(s,{padding:200})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ww=(()=>{class e{get isUserLocationReady(){return!!this.useLocation}constructor(t,r){this.placesApi=t,this.mapService=r,this.isLoadingPlaces=!1,this.places=[],this.getUserLocation()}getUserLocation(){var t=this;return function gte(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var s=e.apply(n,t);function a(d){k6(s,r,i,a,l,"next",d)}function l(d){k6(s,r,i,a,l,"throw",d)}a(void 0)})}}(function*(){return new Promise((r,i)=>{navigator.geolocation.getCurrentPosition(({coords:s})=>{t.useLocation=[s.longitude,s.latitude],r(t.useLocation)},s=>{alert("NO SE ENCUNETRA DISPONIBLE!!"),console.log(s),i()})})})()}getPlacesByQuery(t=""){if(0===t.length)return this.isLoadingPlaces=!1,void(this.places=[]);if(this.isLoadingPlaces=!0,!this.useLocation)throw Error("NO HAY LOCALIZACION");this.isLoadingPlaces=!0,this.placesApi.get(`/${t}.json`,{params:{proximity:this.useLocation.join(",")}}).subscribe(r=>{this.isLoadingPlaces=!1,this.places=r.features,this.mapService.creatEMarkersFromPlaces(this.places,this.useLocation)})}deletePlaces(){this.places=[]}}return e.\u0275fac=function(t){return new(t||e)(Jt(_te),Jt(SS))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const vte=["mapDiv"];let xte=(()=>{class e{constructor(t,r){this.placesService=t,this.mapService=r}ngAfterViewInit(){if(!this.placesService.useLocation)throw Error("No hay placesServices.userLocation");const t=new N_.Map({container:this.mapDivElement.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.placesService.useLocation,zoom:14}),r=(new N_.Popup).setHTML("<h6>Aqui Estoy</h6>\n  <span>Estoy en este lugar del mundo</span>");new N_.Marker({color:"red"}).setLngLat(this.placesService.useLocation).setPopup(r).addTo(t),this.mapService.setMap(t)}}return e.\u0275fac=function(t){return new(t||e)(We(Ww),We(SS))},e.\u0275cmp=bn({type:e,selectors:[["app-map-view"]],viewQuery:function(t,r){if(1&t&&cw(vte,5),2&t){let i;pv(i=mv())&&(r.mapDivElement=i.first)}},decls:2,vars:0,consts:[[1,"map-container"],["mapDiv",""]],template:function(t,r){1&t&&Q(0,"div",0,1)},styles:[".map-container[_ngcontent-%COMP%]{position:fixed;top:opx;right:opx;width:100vw;height:50vw;background-color:#071042}"]}),e})(),bte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-loading"]],decls:8,vars:0,consts:[[1,"loading-map","d-flex","justify-content-center","align-items-center"],[1,"text-center"],["role","status",1,"spinner-border","text-light","spinner-border-sm"],[1,"visually-hidden"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"div",1)(2,"h3"),V(3,"Espere por favor"),A(),k(4,"span"),V(5,"localizando "),k(6,"div",2),Q(7,"span",3),A()()()())},styles:[".loading-map[_ngcontent-%COMP%]{background:black;color:#fff;height:108vh;position:fixed;right:0;top:end;width:100vw;height:50vw}"]}),e})(),wte=(()=>{class e{constructor(t,r){this.placeService=t,this.mapService=r}goToMyLocation(){if(!this.placeService.isUserLocationReady)throw Error("NO HAY UBICACION DE USUARIO");if(!this.mapService.isMapReady)throw Error("NO HAY DISPONIBLE");this.mapService.flyTo(this.placeService.useLocation)}}return e.\u0275fac=function(t){return new(t||e)(We(Ww),We(SS))},e.\u0275cmp=bn({type:e,selectors:[["app-btn-my-location"]],decls:2,vars:0,consts:[[1,"btn","position-absolute","bottom-0","end-0",3,"click"]],template:function(t,r){1&t&&(k(0,"button",0),rt("click",function(){return r.goToMyLocation()}),V(1," REINICIAR\n"),A())},styles:["button[_ngcontent-%COMP%]{color:#fff;background-color:#d1001c;border-radius:30px;height:60px;margin:50px}"]}),e})();function Cte(e,n){1&e&&(k(0,"div",2)(1,"h6"),V(2,"cargando"),A(),k(3,"span"),V(4,"Espere por favor..."),A()())}function Tte(e,n){if(1&e){const t=Gn();k(0,"li",5),rt("click",function(){const s=mn(t).$implicit;return gn(bt(2).flyTo(s))}),k(1,"h6"),V(2),A(),k(3,"p"),V(4),A(),k(5,"button",6),rt("click",function(){const s=mn(t).$implicit;return gn(bt(2).getDirections(s))}),V(6," LIMPIAR "),A()()}if(2&e){const t=n.$implicit,r=bt(2);_i("active",t.id===r.selectedId),ce(2),$t(t.text_es),ce(2),Nl(" ",t.place_name," "),ce(1),ze("ngClass",t.id===r.selectedId?"bte-0utline-light":"btn-outline-dark")}}function Ete(e,n){if(1&e&&(k(0,"ul",3),Rt(1,Tte,7,5,"li",4),A()),2&e){const t=bt();ce(1),ze("ngForOf",t.places)}}let Ste=(()=>{class e{constructor(t,r){this.placesService=t,this.mapService=r,this.selectedId=""}get IsLoadingPlaces(){return this.placesService.isLoadingPlaces}get places(){return this.placesService.places}flyTo(t){this.selectedId=t.id;const[r,i]=t.center;this.mapService.flyTo([r,i])}getDirections(t){if(!this.placesService.useLocation)throw Error("No hay userLocation");this.placesService.deletePlaces(),this.mapService.getRouteBetweenPoints(this.placesService.useLocation,t.center)}}return e.\u0275fac=function(t){return new(t||e)(We(Ww),We(SS))},e.\u0275cmp=bn({type:e,selectors:[["app-searc-results"]],decls:2,vars:2,consts:[["class","alert alert-primary mt-2 text-center",4,"ngIf"],["class","list-group mt-2",4,"ngIf"],[1,"alert","alert-primary","mt-2","text-center"],[1,"list-group","mt-2"],["class","list-group-item list-group-item-action pointer",3,"active","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","pointer",3,"click"],[1,"btn","btn-sm",3,"ngClass","click"]],template:function(t,r){1&t&&(Rt(0,Cte,5,0,"div",0),Rt(1,Ete,2,1,"ul",1)),2&t&&(ze("ngIf",r.IsLoadingPlaces),ce(1),ze("ngIf",r.places.length>0))},dependencies:[RE,vs,Hh],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),e})(),Dte=(()=>{class e{constructor(t){this.placesService=t}onQueryChanged(t=""){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.placesService.getPlacesByQuery(t)},350)}}return e.\u0275fac=function(t){return new(t||e)(We(Ww))},e.\u0275cmp=bn({type:e,selectors:[["app-search-bar"]],decls:4,vars:0,consts:[[1,"search-container","top-0","end-0"],["type","text","placeholder","buscar lugar...",1,"form-control",3,"keyup"],["txtQuery",""]],template:function(t,r){if(1&t){const i=Gn();k(0,"div",0)(1,"input",1,2),rt("keyup",function(){mn(i);const a=Ns(2);return gn(r.onQueryChanged(a.value))}),A(),Q(3,"app-searc-results"),A()}},dependencies:[Ste],styles:[".search-container[_ngcontent-%COMP%]{position:relative;width:200px;top:50px;left:20px;background-color:#fff;padding:5px;box-shadow:opx 10px 10px #0000004d;border-radius:5px;border:1px solid rgba(0,0,0,.1)}"]}),e})();function Mte(e,n){1&e&&Q(0,"app-loading")}function kte(e,n){1&e&&Q(0,"app-map-view")(1,"app-btn-my-location")(2,"app-search-bar")}let Ate=(()=>{class e{constructor(t){this.placesService=t}get isUserLocationReady(){return this.placesService.isUserLocationReady}}return e.\u0275fac=function(t){return new(t||e)(We(Ww))},e.\u0275cmp=bn({type:e,selectors:[["app-map-sreens"]],decls:53,vars:2,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateral",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul"],["href","#",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-house-door"],["href","Ubicacion_Titan",1,"nav-link","link-dark"],[1,"bi","bi-geo-alt-fill"],["id","menuLateral","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],[1,"bi","bi-folder2-open"],["href","titanes",1,"nav-link","link-dark"],[1,"bi","bi-file-earmark-person"],[1,"dropdown"],[1,"bi","bi-box-arrow-right"],[4,"ngIf","ngIfElse"],["mapReady",""]],template:function(t,r){if(1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," UBICACION "),A()()()()(),k(11,"nav",9)(12,"div",10)(13,"li",11)(14,"button",12),Q(15,"i",13),A()(),k(16,"li",11)(17,"a",14)(18,"button",15),Q(19,"i",16),A()()(),k(20,"li",11)(21,"a",17)(22,"button",15),Q(23,"i",18),A()()(),k(24,"section",19)(25,"div",20)(26,"a",21)(27,"span",22),V(28,"MENU"),A()(),Q(29,"hr"),k(30,"ul",23)(31,"li",11)(32,"a",14)(33,"button",15),Q(34,"i",24),V(35," DESPACHO"),A()()(),Q(36,"hr"),k(37,"li",11)(38,"a",25)(39,"button",15),Q(40,"i",26),V(41," TITANES "),A()()()(),Q(42,"hr"),k(43,"ul")(44,"div",27)(45,"li",11)(46,"a",14)(47,"button",15),Q(48,"i",28),V(49," SALIR "),A()()()()()()()()(),Rt(50,Mte,1,0,"app-loading",29),Rt(51,kte,3,0,"ng-template",null,30,s4)),2&t){const i=Ns(52);ce(50),ze("ngIf",!r.isUserLocationReady)("ngIfElse",i)}},dependencies:[Hh,xte,bte,wte,Dte],styles:[".btn-flotante[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;font-weight:700;color:#fff;border-radius:20px;letter-spacing:2px;background-color:#e91e63;padding:18px 30px;position:fixed;bottom:40px;right:40px;transition:all .3s ease 0ms;box-shadow:0 8px 15px #0000001a;z-index:99}.btn-flotante[_ngcontent-%COMP%]:hover{background-color:#2c2fa5;box-shadow:0 15px 20px #000;border-radius:50px;transform:translateY(-7px)}@media only screen and (max-width: 600px){.btn-flotante[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;bottom:20px;right:20px}}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.tamano[_ngcontent-%COMP%]{width:500px}"]}),e})(),Ite=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-prestamo"]],decls:61,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"well","well-sm"],[1,"fw-normal"],[1,"text-center","header","fw-bold"],[1,"col-12"],["for","validationDefault03",1,"form-label"],["list","datalistOptions","placeholder","",1,"form-control"],["type","text","placeholder","",1,"form-control"],[2,"border","2px solid transparent"],[1,"modal-footer"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btng"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," PRESTAMO VEHICULAR "),A()()()()(),k(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"p",13)(16,"legend",14),V(17,"Prestamo Vehicular"),A()(),k(18,"div",15)(19,"div",15)(20,"label",16),V(21,"Nombre del solicitante"),A(),Q(22,"input",17),A(),k(23,"div",15)(24,"label",16),V(25,"Marca del vehiculo"),A(),Q(26,"input",18),A()(),Q(27,"hr",19),k(28,"div",15)(29,"div",15)(30,"label",16),V(31,"Submarca del vehiculo"),A(),Q(32,"input",17),A(),k(33,"div",15)(34,"label",16),V(35,"Placas"),A(),Q(36,"input",18),A()(),Q(37,"hr",19),k(38,"div",15)(39,"div",15)(40,"label",16),V(41,"Tiempo"),A(),Q(42,"input",17),A(),k(43,"div",15)(44,"label",16),V(45,"\xc1rea solicitante"),A(),Q(46,"input",18),A()(),Q(47,"hr",19),k(48,"div",15)(49,"div",15)(50,"label",16),V(51,"Actividades a realizar"),A(),Q(52,"input",17),A(),k(53,"div",15)(54,"label",16),V(55,"Registro de kilometraje"),A(),Q(56,"input",18),A()(),Q(57,"hr",19),k(58,"div",20)(59,"button",21),V(60,"Guardar"),A()()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.header[_ngcontent-%COMP%]{color:#000;font-size:27px;padding:10px}.bigicon[_ngcontent-%COMP%]{font-size:35px;color:#000}body[_ngcontent-%COMP%]{background-color:#f5f5f5}.form-control[_ngcontent-%COMP%]{border:2px solid #000000}.btng[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;font-size:20px;border-radius:50px;width:200px;height:40px;align-items:self-end}"]}),e})();function Pte(e,n){if(1&e&&(k(0,"div",27)(1,"div",28)(2,"div",29),Q(3,"img",30),k(4,"div")(5,"div",31)(6,"h5",32),V(7),A(),k(8,"p",33),V(9),A(),k(10,"p",33),V(11),A()()()()()()),2&e){const t=n.$implicit;ce(3),Kr("src",t.ImagenUnidad,Zi),ce(4),$t(t.tipoUnidad),ce(2),Nl("Asignadas: ",t.cantidad,""),ce(2),Nl("En servicio: ",t.cantidadLiberado,"")}}function Ote(e,n){if(1&e&&(k(0,"tr")(1,"th"),V(2),A(),k(3,"td"),V(4),A(),k(5,"td"),V(6),A(),k(7,"td"),V(8),A(),k(9,"td"),V(10),A()()),2&e){const t=n.$implicit;ce(2),$t(t.ruta),ce(2),$t(t.corrida),ce(2),$t(t.economico),ce(2),$t(t.nomChofer),ce(2),$t(t.tarjeton)}}let Lte=(()=>{class e{constructor(t){this.http=t,this.icongif="assets/iconBlackAcotma.gif",this.lista1=[],this.lista2=[],this.resultado=[]}filterItems(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}GetServiciosIniciados(){this.http.get("http://prueba252.somee.com/api/CentroControl/Verificacion/Liberado").subscribe(t=>{this.dataAsignacion=t})}getDataUnidades(){this.http.get("http://prueba252.somee.com/api/CentroControl/Verificaciones/Hoy").subscribe(t=>{this.lista1=t,this.http.get("http://prueba252.somee.com/api/CentroControl/Verificacion/GetImagenesUnidades").subscribe(r=>{this.lista2=r,this.resultado=this.lista1.map(i=>{const s=this.lista2.find(a=>a.tipoUnidad===i.tipoUnidad);return{...i,...s}}),console.log(this.resultado)})})}getUnidadesAsignadas(){}getUnidadesLiberadas(){}ngOnInit(){setInterval(()=>{this.getDataUnidades()},1e3),setInterval(()=>{this.GetServiciosIniciados()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:57,vars:6,consts:[[2,"background-color","#9c223c","height","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/iconBlackAcotma.gif","alt","logo",2,"width","80px"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-danger"],[1,"bi","bi-box-arrow-left"],[1,"row"],["class","container text-center col-3",4,"ngFor","ngForOf"],[1,"container"],[1,"text-center",2,"color","aliceblue"],[1,"input-group","flex-nowrap"],["id","addon-wrapping",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar","aria-label","Username","aria-describedby","addon-wrapping",1,"form-control",3,"ngModel","ngModelChange"],[1,"ex1"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","900px"],[1,"container","text-center","col-3"],[1,"col-2"],[1,"card",2,"width","18rem"],["width","290","height","100",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Centro de Control"),A(),k(7,"div",5)(8,"div",6),Q(9,"button",7),A(),k(10,"div",8)(11,"ul",9)(12,"li",10)(13,"button",11),Q(14,"i",12),V(15," Cerrrar Sesion"),A()()()()()()(),Q(16,"br")(17,"br")(18,"br")(19,"br")(20,"br")(21,"br")(22,"br")(23,"br"),k(24,"div",13),Rt(25,Pte,12,4,"div",14),A(),Q(26,"br")(27,"br"),k(28,"div",15)(29,"h3",16),V(30,"Unidades Liberadas"),A(),k(31,"div",17)(32,"span",18),Q(33,"i",19),A(),k(34,"input",20),rt("ngModelChange",function(s){return r.filtro=s}),A()(),Q(35,"br"),k(36,"div",21)(37,"table",22)(38,"thead")(39,"tr")(40,"th",23),V(41,"Ruta"),A(),k(42,"th",23),V(43,"Corrida"),A(),k(44,"th",23),V(45,"Economico"),A(),k(46,"th",23),V(47,"Nombre del Chofer"),A(),k(48,"th",23),V(49,"Tarjeton"),A()()(),k(50,"tbody"),Rt(51,Ote,11,5,"tr",24),Ji(52,"filter"),A()()()(),Q(53,"br")(54,"br"),k(55,"div",25),Q(56,"img",26),A()()),2&t&&(ce(25),ze("ngForOf",r.resultado),ce(9),ze("ngModel",r.filtro),ce(17),ze("ngForOf",zl(52,3,r.dataAsignacion,r.filtro)))},dependencies:[vs,va,Ha,ba,R_]}),e})();function Fte(e,n){if(1&e&&(k(0,"option"),V(1),A()),2&e){const t=n.$implicit;ce(1),$t(t.tipoUnidad)}}const Rte=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:tte},{path:"titanes",component:lB},{path:"informe_de_incidencias_tecnologicas",component:rte},{path:"menu/cronos",component:lB},{path:"informe_incidencias_b8",component:S6},{path:"informe_de_limpieza_del_dia_de_hoy",component:ote},{path:"informe_de_limpieza_de_la_semana",component:lte},{path:"incidencias_inicio",component:dte},{path:"incidencias-b8",component:S6},{path:"registro_vehicular",component:fte},{path:"Verificacion/Servicio",component:mte},{path:"Ubicacion_Titan",component:Ate},{path:"PrestamoVehicular",component:Ite},{path:"Verificacion/Inicio",component:Lte},{path:"Verificacion/CargarImagen",component:(()=>{class e{capturar(){this.verSeleccion=this.opcionSeleccionado,console.log(this.opcionSeleccionado),console.log(this.verSeleccion)}onFileSelected(t){this.selectedFile=t.target.files[0],console.log(this.selectedFile)}onSendImage(){if(this.selectedFile){const t=new FileReader;t.readAsDataURL(this.selectedFile),t.onload=()=>{this.byteImg=t.result;const r={ImagenUnidad:this.byteImg,NombreUnidad:this.verSeleccion};console.log(r),this.http.post("http://prueba252.somee.com/api/CentroControl/Verificacion/ImagenUnidades",r).toPromise().then(s=>{console.log(r)})}}}loadUnidades(){this.http.get("http://prueba252.somee.com/api/CentroControl/Asignaciones/Hoy").subscribe(t=>{this.cargarUnidades=t})}constructor(t){this.http=t}ngOnInit(){this.loadUnidades()}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:17,vars:2,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body","text-center"],[1,"card-title"],[1,"card-text"],[3,"ngModel","ngModelChange","change"],["value","0"],[4,"ngFor","ngForOf"],["type","file",1,"col-12",3,"change"],[3,"click"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4," Unidades "),A(),k(5,"div",4)(6,"h5",5),V(7,"Agregar Imagen"),A(),k(8,"p",6)(9,"select",7),rt("ngModelChange",function(s){return r.opcionSeleccionado=s})("change",function(){return r.capturar()}),k(10,"option",8),V(11,"Selecciona una opci\xf3n"),A(),Rt(12,Fte,2,1,"option",9),A()(),k(13,"p",6)(14,"input",10),rt("change",function(s){return r.onFileSelected(s)}),A()(),k(15,"button",11),rt("click",function(){return r.onSendImage()}),V(16,"enviar"),A()()()()()),2&t&&(ce(9),ze("ngModel",r.opcionSeleccionado),ce(3),ze("ngForOf",r.cargarUnidades))},dependencies:[vs,TS,ES,CS,Ha,ba],styles:[".container[_ngcontent-%COMP%]{height:100vh;width:200%;display:flex;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]{height:450px;width:450px;background-color:#d2691e;padding:5%}"]}),e})()}];let Nte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot(Rte),wc]}),e})(),Gw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-header-admin"]],decls:11,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","http://sitmah.hidalgo.gob.mx/",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," ADMINISTRADOR "),A()()()()())},styles:[".text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}"]}),e})(),A6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-header-asignacion"]],decls:17,vars:0,consts:[[1,"container"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["type","button",1,"btn","btn-outline-light"],["href","Jefe-en-turno/asignar-radios",1,"navbar-brand"],[1,"bi","bi-person-add"],["href","admin-ver-asignacion-de-radios",1,"navbar-brand"],[1,"bi","bi-file-earmark-ruled"],["id","navbarText",1,"d-flex"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["href","inicio-admin",1,"navbar-brand"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"button",3)(4,"a",4),Q(5,"i",5),V(6," CREAR ASIGNACI\xd3N "),A()(),k(7,"button",3)(8,"a",6),Q(9,"i",7),V(10," REGISTROS"),A()(),k(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",3)(15,"a",11),V(16," SALIR"),A()()()()()()()())},styles:["button[_ngcontent-%COMP%]{border-radius:50px}i[_ngcontent-%COMP%]{font-size:35px}"]}),e})(),Bte=(()=>{class e{constructor(t,r,i){this.http=t,this.location=r,this.sanitizer=i}enviarAsignacionRadios(){this.http.post("https://pruebaacotma2.somee.com/api/agregar_Asignacion_de_Radios",{usuario:this.usuario,Num_Radio:this.Num_Radio,Codigo_Radio:this.Codigo_Radio,Tarjeta_Maestra:this.Tarjeta_Maestra}).toPromise().then(i=>{console.log(i),location.reload()})}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(D_),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-asignacion-radios"]],decls:31,vars:4,consts:[[1,"container"],[1,"texto"],[1,"row","g-3",3,"submit"],[1,"col-12"],[1,"col-md-4"],["for","validationDefault01",1,"form-label"],["type","text","id","usuario","name","usuario","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","validationDefaultUsername",1,"form-label"],["type","text","id","Num_Radio","name","Num_Radio","aria-describedby","inputGroupPrepend2","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","Codigo_Radio","name","Codigo_Radio","aria-describedby","inputGroupPrepend3","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","Tarjeta_Maestra","name","Tarjeta_Maestra","aria-describedby","inputGroupPrepend2","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-9",2,"text-align","right"],["type","submit",1,"btn","btn-outline-secondary","subir"]],template:function(t,r){1&t&&(Q(0,"app-header-admin")(1,"app-header-asignacion"),k(2,"div",0)(3,"h3",1),V(4,"CREAR ASIGNACION"),A(),Q(5,"hr"),k(6,"div",0)(7,"form",2),rt("submit",function(){return r.enviarAsignacionRadios()}),k(8,"div",3)(9,"div",4)(10,"label",5),V(11,"Ingresa el usuario"),A(),k(12,"input",6),rt("ngModelChange",function(s){return r.usuario=s}),A()()(),k(13,"div",3)(14,"div",4)(15,"label",7),V(16,"Ingresa el n\xfamero de la radio"),A(),k(17,"input",8),rt("ngModelChange",function(s){return r.Num_Radio=s}),A()()(),k(18,"div",3)(19,"div",4)(20,"label",7),V(21,"Ingresa el codigo de la radio"),A(),k(22,"input",9),rt("ngModelChange",function(s){return r.Codigo_Radio=s}),A()()(),k(23,"div",3)(24,"div",4)(25,"label",7),V(26,"Ingresa el tarjeta maestra"),A(),k(27,"input",10),rt("ngModelChange",function(s){return r.Tarjeta_Maestra=s}),A()()(),k(28,"div",11)(29,"button",12),V(30,"Agregar"),A()()()()()),2&t&&(ce(12),ze("ngModel",r.usuario),ce(5),ze("ngModel",r.Num_Radio),ce(5),ze("ngModel",r.Codigo_Radio),ce(5),ze("ngModel",r.Tarjeta_Maestra))},dependencies:[Fp,va,Ha,Lp,Rp,ba,Wh,Gw,A6],styles:["input[_ngcontent-%COMP%]{border-radius:50px;height:50px}.subir[_ngcontent-%COMP%]{border-radius:50px;height:50px;width:150px}label[_ngcontent-%COMP%]{font-size:20px}.texto[_ngcontent-%COMP%]{color:#707070}"]}),e})(),zte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-inicio-admin"]],decls:53,vars:0,consts:[[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateraladmin",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul",2,"font-size","30px"],["href","admin-ver-asignacion-de-radios",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-ui-radios"],["id","menuLateraladmin","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],["href","Jefe-en-turno/asignar-radios",1,"nav-link","link-dark"],["href","admin-crear-usuario",1,"nav-link","link-dark"],[1,"bi","bi-person-plus"],[1,"dropdown"],["href","#",1,"nav-link","link-dark"],[1,"bi","bi-box-arrow-right"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["src","https://images.unsplash.com/photo-1553615738-d8e0829f1d61?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxleHBsb3JlLWZlZWR8MXx8fGVufDB8fHx8&w=1000&q=80","alt","...",1,"d-block","w-100"],[1,"carousel-item"],["src","https://wallpaperaccess.com/full/2637581.jpg","alt","...",1,"d-block","w-100"],["src","https://wallpaperaccess.com/full/109676.jpg","alt","...",1,"d-block","w-100"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,r){1&t&&(Q(0,"app-header-admin"),k(1,"nav",0)(2,"div",1)(3,"li",2)(4,"button",3),Q(5,"i",4),A()(),k(6,"li",2)(7,"a",5)(8,"button",6),Q(9,"i",7),A()()(),k(10,"section",8)(11,"div",9)(12,"a",10)(13,"span",11),V(14,"MENU"),A()(),Q(15,"hr"),k(16,"ul",12)(17,"li",2)(18,"a",13)(19,"button",6),Q(20,"i",7),V(21," ASIGNAR RADIOS"),A()()(),Q(22,"hr"),k(23,"li",2)(24,"a",14)(25,"button",6),Q(26,"i",15),V(27," CREAR NUEVO USUARIO "),A()()()(),Q(28,"hr"),k(29,"ul")(30,"div",16)(31,"li",2)(32,"a",17)(33,"button",6),Q(34,"i",18),V(35," SALIR "),A()()()()()()()(),Q(36,"div"),A(),k(37,"div",19)(38,"div",20)(39,"div",21),Q(40,"img",22),A(),k(41,"div",23),Q(42,"img",24),A(),k(43,"div",23),Q(44,"img",25),A()(),k(45,"button",26),Q(46,"span",27),k(47,"span",28),V(48,"Anterior"),A()(),k(49,"button",29),Q(50,"span",30),k(51,"span",28),V(52,"Siguiente"),A()()())},dependencies:[Gw],styles:[".text2[_ngcontent-%COMP%]{color:#000;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.tamano[_ngcontent-%COMP%]{width:500px}"]}),e})(),I6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-nav-bar-crear-usuarios"]],decls:17,vars:0,consts:[[1,"container"],[1,"navbar","navbar-expand-lg","navbar-light"],[1,"container-fluid"],["type","button",1,"btn","btn-outline-light"],["href","admin-crear-usuario",1,"navbar-brand"],[1,"bi","bi-person-add"],["href","admin-ver-registros-de-usuario",1,"navbar-brand"],[1,"bi","bi-file-earmark-ruled"],["id","navbarText",1,"d-flex"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["href","inicio-admin",1,"navbar-brand"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"button",3)(4,"a",4),Q(5,"i",5),V(6," CREAR NUEVO USURIO "),A()(),k(7,"button",3)(8,"a",6),Q(9,"i",7),V(10," REGISTROS"),A()(),k(11,"div",8)(12,"ul",9)(13,"li",10)(14,"button",3)(15,"a",11),V(16," SALIR"),A()()()()()()()())},styles:["button[_ngcontent-%COMP%]{border-radius:50px}i[_ngcontent-%COMP%]{font-size:35px}"]}),e})(),Vte=(()=>{class e{constructor(t,r,i){this.http=t,this.location=r,this.sanitizer=i}enviarUsuarios(){this.http.post("https://pruebaacotma2.somee.com/api/agregar_usuarios",{usuario:this.usuario,nombre:this.nombre,apellidoP:this.apellidoP,apellidoM:this.apellidoM,pass:this.pass}).toPromise().then(i=>{console.log(i),location.reload()})}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(D_),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-crear-usuario"]],decls:33,vars:5,consts:[[1,"container"],[1,"texto"],[3,"submit"],[1,"col-6"],[1,"col-md-6"],["for","validationDefault01",1,"form-label"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","apellidoP","name","apellidoP","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","apellidoM","name","apellidoM","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","validationDefault02",1,"form-label"],["type","text","id","usuario","name","usuario","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","pass","name","pass","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12",2,"text-align","right"],["type","submit",1,"btn","btn-outline-secondary","subir"]],template:function(t,r){1&t&&(Q(0,"app-header-admin")(1,"app-nav-bar-crear-usuarios"),k(2,"div",0)(3,"h3",1),V(4,"CREAR USUARIO"),A(),Q(5,"hr"),k(6,"div",0)(7,"form",2),rt("submit",function(){return r.enviarUsuarios()}),k(8,"div",3)(9,"div",4)(10,"label",5),V(11,"Ingresa el nombre"),A(),k(12,"input",6),rt("ngModelChange",function(s){return r.nombre=s}),A()(),k(13,"div",4)(14,"label",5),V(15,"Ingresa el apellido paterno"),A(),k(16,"input",7),rt("ngModelChange",function(s){return r.apellidoP=s}),A()(),k(17,"div",4)(18,"label",5),V(19,"Ingresa el apellido materno"),A(),k(20,"input",8),rt("ngModelChange",function(s){return r.apellidoM=s}),A()()(),k(21,"div",3)(22,"div",4)(23,"label",9),V(24,"Ingresa el usuario"),A(),k(25,"input",10),rt("ngModelChange",function(s){return r.usuario=s}),A()(),k(26,"div",4)(27,"label",9),V(28,"Ingresa la contrase\xf1a"),A(),k(29,"input",11),rt("ngModelChange",function(s){return r.pass=s}),A()()(),k(30,"div",12)(31,"button",13),V(32,"AGREGAR"),A()()()()()),2&t&&(ce(12),ze("ngModel",r.nombre),ce(4),ze("ngModel",r.apellidoP),ce(4),ze("ngModel",r.apellidoM),ce(5),ze("ngModel",r.usuario),ce(4),ze("ngModel",r.pass))},dependencies:[Fp,va,Ha,Lp,Rp,ba,Wh,Gw,I6],styles:["input[_ngcontent-%COMP%]{border-radius:50px;height:50px}.subir[_ngcontent-%COMP%]{border-radius:50px;height:50px;width:150px}label[_ngcontent-%COMP%]{font-size:20px}.texto[_ngcontent-%COMP%]{color:#707070}select[_ngcontent-%COMP%]{border-radius:50px;height:50px}"]}),e})();function Ute(e,n){if(1&e&&(k(0,"tr",4)(1,"td",7),V(2),A(),k(3,"td",7),V(4),A(),k(5,"td",7),V(6),A(),k(7,"td",7),V(8),A(),k(9,"td",7),V(10),A(),k(11,"td",7)(12,"div",8)(13,"button",9),Q(14,"i",10),A(),k(15,"button",11),Q(16,"i",12),A()()()()),2&e){const t=n.$implicit;ce(2),$t(t.nombre),ce(2),$t(t.apellidoP),ce(2),$t(t.apellidoM),ce(2),$t(t.usuario),ce(2),$t(t.password)}}let jte=(()=>{class e{constructor(t){this.http=t,this.Usuarios=[],this.title="Registro de usuarios"}getAllRegistros(){this.http.get("https://pruebaacotma2.somee.com/api/ver_Registro_de_usuarios").subscribe(t=>{console.log(t),this.Usuarios=t})}ngOnInit(){this.getAllRegistros()}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-registros-usuario"]],decls:26,vars:1,consts:[[1,"container"],[1,"container","text-center"],["role","table",1,"table","table-bordered","table-fixed","text-center"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","row",4,"ngFor","ngForOf"],["role","cell"],[1,"d-grid","d-md-block"],["type","button",1,"btn","btn-outline-dark",2,"background-color","#D118BE"],[1,"bi","bi-pencil-square"],["type","button",1,"btn","btn-outline-dark",2,"background-color","red"],[1,"bi","bi-trash3-fill"]],template:function(t,r){1&t&&(Q(0,"app-header-admin")(1,"app-nav-bar-crear-usuarios"),k(2,"div",0)(3,"h3"),V(4,"REGISTRO"),A(),k(5,"div",0),Q(6,"hr"),k(7,"div",1)(8,"h4"),V(9,"SITMAH"),A()(),k(10,"table",2)(11,"thead",3)(12,"tr",4)(13,"th",5),V(14,"Nombre"),A(),k(15,"th",5),V(16,"Apellido paterno"),A(),k(17,"th",5),V(18,"Apellido materno"),A(),k(19,"th",5),V(20,"usuario"),A(),k(21,"th",5),V(22,"password"),A(),Q(23,"th",5),A()(),k(24,"tbody",3),Rt(25,Ute,17,5,"tr",6),A()()()()),2&t&&(ce(25),ze("ngForOf",r.Usuarios))},dependencies:[vs,Gw,I6],styles:['@media only screen and (max-width: 760px),(min-device-width: 768px) and (max-device-width: 1024px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}tr[_ngcontent-%COMP%]{margin:0 0 1rem}tr[_ngcontent-%COMP%]:nth-child(odd){background:#ccc}td[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%}td[_ngcontent-%COMP%]:before{position:absolute;top:0;left:6px;width:45%;padding-right:10px;white-space:nowrap}td[_ngcontent-%COMP%]:nth-of-type(1):before{content:"NOMBRE"}td[_ngcontent-%COMP%]:nth-of-type(2):before{content:"APELLIDO PATERNO"}td[_ngcontent-%COMP%]:nth-of-type(3):before{content:"APELLIDO MATERNO"}td[_ngcontent-%COMP%]:nth-of-type(4):before{content:"USUARIO"}td[_ngcontent-%COMP%]:nth-of-type(5):before{content:"PASSWORD"}td[_ngcontent-%COMP%]:nth-of-type(6):before{content:"ROL"}td[_ngcontent-%COMP%]:nth-of-type(7):before{content:""}}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;text-align:center;z-index:10;font-weight:700;background-color:#fff}button[_ngcontent-%COMP%]{margin:5px;text-align:center}i[_ngcontent-%COMP%]{font-size:25px}']}),e})();function Hte(e,n){if(1&e&&(k(0,"tr",4)(1,"td",7),V(2),A(),k(3,"td",7),V(4),A(),k(5,"td",7),V(6),A(),k(7,"td",7),V(8),A(),k(9,"td",7)(10,"div",8)(11,"button",9),Q(12,"i",10),A(),k(13,"button",11),Q(14,"i",12),A()()()()),2&e){const t=n.$implicit;ce(2),$t(t.usuario),ce(2),$t(t.Num_Radio),ce(2),$t(t.Codigo_Radio),ce(2),$t(t.Tarjeta_Maestra)}}const $te=[{path:"Jefe-en-turno/asignar-radios",component:Bte},{path:"inicio-admin",component:zte},{path:"admin-crear-usuario",component:Vte},{path:"admin-ver-registros-de-usuario",component:jte},{path:"admin-ver-asignacion-de-radios",component:(()=>{class e{constructor(t){this.http=t,this.Asignacion=[]}getAsignacionRadios(){this.http.get("https://pruebaacotma2.somee.com/api/ver_Registro_de_Asignacion_de_Radios").subscribe(t=>{console.log(t),this.Asignacion=t})}ngOnInit(){this.getAsignacionRadios()}eliminarRegistro(t){this.http.delete(`https://pruebaacotma2.somee.com/api/eliminar_Asignacion_de_Radios/${t}`).subscribe(()=>{console.log("Registro eliminado correctamente")},i=>{console.error("Error al eliminar registro",i)})}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-registro-radios"]],decls:24,vars:1,consts:[[1,"container"],[1,"container","text-center"],["role","table",1,"table","table-bordered","table-fixed","text-center"],["role","rowgroup"],["role","row"],["role","columnheader"],["role","row",4,"ngFor","ngForOf"],["role","cell"],[1,"d-grid","d-md-block"],["type","button",1,"btn","btn-outline-dark",2,"background-color","#D118BE"],[1,"bi","bi-pencil-square"],["type","button",1,"btn","btn-outline-dark",2,"background-color","red"],[1,"bi","bi-trash3-fill"]],template:function(t,r){1&t&&(Q(0,"app-header-admin")(1,"app-header-asignacion"),k(2,"div",0)(3,"h3"),V(4,"ASIGNACI\xd3N"),A(),k(5,"div",0),Q(6,"hr"),k(7,"div",1)(8,"h4"),V(9,"SITMAH"),A()(),k(10,"table",2)(11,"thead",3)(12,"tr",4)(13,"th",5),V(14,"Usuario"),A(),k(15,"th",5),V(16,"Numero Radio"),A(),k(17,"th",5),V(18,"Codigo Radio"),A(),k(19,"th",5),V(20,"Tarjeta Maestra"),A(),Q(21,"th",5),A()(),k(22,"tbody",3),Rt(23,Hte,15,4,"tr",6),A()()()()),2&t&&(ce(23),ze("ngForOf",r.Asignacion))},dependencies:[vs,Gw,A6]}),e})()}];let Wte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot($te),wc]}),e})(),Gte=(()=>{class e{constructor(t,r,i){this.http=t,this.location=r,this.sanitizer=i,this.LimpiezaPiso=!1,this.LimpiezaVidrio=!1,this.LimpiezaServicio=!1,this.LimpiezaEstructura=!1,this.LimpiezaTorniquetez=!1,this.LimpiezaSanitarios=!1,this.usuario="Titan 1"}enviarInformeLimpieza(){this.http.post("https://pruebaacotma2.somee.com/api/agregar_informeLimpieza_del_dia_hoy",{Estacion:this.Estacion,LimpiezaPiso:this.LimpiezaPiso,LimpiezaVidrio:this.LimpiezaVidrio,LimpiezaAreaServicios:this.LimpiezaServicio,LimpiezaAreaEstructura:this.LimpiezaEstructura,LimpiezaTorniquetes:this.LimpiezaTorniquetez,LimpiezaSanitarios:this.LimpiezaSanitarios,Observaciones:this.Observaciones,usuario:this.usuario}).toPromise().then(i=>{console.log(i),location.reload()})}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(D_),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-limpieza"]],decls:114,vars:8,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],["href","titanes-menu"],["type","button",1,"btn-regresar"],[1,"bi","bi-arrow-left",2,"font-size","30px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"well","well-sm"],["method","post",1,"form-horizontal",3,"submit"],[1,"fw-normal"],[1,"text-center","header"],[2,"border","2px solid transparent"],["list","datalistOptions","placeholder","Nombre de la estacion","name","Estacion","required","",1,"form-control","mb-5",2,"width","300px",3,"ngModel","ngModelChange"],["id","datalistOptions","required",""],["value","1. Terminal T\xe9llez"],["value","2. Gabriel Mancera"],["value","3. Matilde"],["value","4. Efr\xe9n Rebolledo"],["value","5. Tercera Edad"],["value","6. San Antonio"],["value","7. Ejercito Mexicano"],["value","8. Felipe \xc1ngeles"],["value","9. Centro de Justicia Oriente"],["value","9. Centro de Justicia Poniente"],["value","10. Vicente Segura"],["value","11. Juan C. Doria"],["value","12. Hospitales"],["value","13. SEPH"],["value","14. Tecnol\xf3gico"],["value","15. Bicentenario Oriente"],["value","15. Bicentenario Poniente"],["value","16. Centro Minero"],["value","17. Zona Plateada"],["value","18. Tecnol\xf3gico de Monterrey"],["value","19p. Estadio Hidalgo"],["value","19o. Central de Autobuses"],["value","20. Cuna de Futbol"],["value","21. Santa Julia"],["value","22. Prepa 1"],["value","23o. Revoluci\xf3n"],["value","23p. Bioparque"],["value","24o. Manuel Dubl\xe1n"],["value","24p. Parque del Maestro"],["value","25o. Presidente Alem\xe1n"],["value","25p. Plaza Ju\xe1rez"],["value","26. Ni\xf1os Heroes Oriente"],["value","26. Ni\xf1os Heroes Poniente"],["value","27. Centro Hist\xf3rico"],[1,"form-check","fs-5","mb-3"],[1,"col-md-1","col-md-offset-2"],[1,"fa","fa-user","bigicon"],[1,"checkbox"],["type","checkbox","name","LimpiezaPiso",3,"ngModel","ngModelChange"],[1,"form-check","tex","fs-5","mb","mb-3"],["type","checkbox","value","true","name","LimpiezaVidrio",3,"ngModel","ngModelChange"],[1,"form-check","tex","fs-5","mb-3"],[1,""],["type","checkbox","value","true","name","LimpiezaServicio",3,"ngModel","ngModelChange"],["type","checkbox","value","true","name","LimpiezaEstructura",3,"ngModel","ngModelChange"],["type","checkbox","value","true","name","LimpiezaTorniquetez",3,"ngModel","ngModelChange"],["type","checkbox","value","true","name"," LimpiezaSanitarios",3,"ngModel","ngModelChange"],["for","formGroupExampleInput",1,"form-label"],["type","text","id","formGroupExampleInput","placeholder","Escribe tus observaciones","name","Observaciones",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","tex","fs-5","mb-3",2,"text-align","center","margin","40px"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn-limpieza"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn-limpieza"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," LIMPIEZA "),A()()()()(),k(11,"a",9)(12,"button",10),Q(13,"i",11),A()(),k(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"form",16),rt("submit",function(){return r.enviarInformeLimpieza()}),k(19,"fieldset")(20,"p",17)(21,"legend",18),V(22," Limpieza de estaciones"),A()(),Q(23,"hr",19),k(24,"input",20),rt("ngModelChange",function(s){return r.Estacion=s}),A(),k(25,"datalist",21),Q(26,"option",22)(27,"option",23)(28,"option",24)(29,"option",25)(30,"option",26)(31,"option",27)(32,"option",28)(33,"option",29)(34,"option",30)(35,"option",31)(36,"option",32)(37,"option",33)(38,"option",34)(39,"option",35)(40,"option",36)(41,"option",37)(42,"option",38)(43,"option",39)(44,"option",40)(45,"option",41)(46,"option",42)(47,"option",43)(48,"option",44)(49,"option",45)(50,"option",46)(51,"option",47)(52,"option",48)(53,"option",49)(54,"option",50)(55,"option",51)(56,"option",52)(57,"option",53)(58,"option",54)(59,"option",55),A(),k(60,"div",56)(61,"span",57),Q(62,"i",58),A(),k(63,"div",59)(64,"label")(65,"input",60),rt("ngModelChange",function(s){return r.LimpiezaPiso=s}),A(),V(66," Limpieza de piso "),A()()(),k(67,"div",61)(68,"div",59)(69,"label")(70,"input",62),rt("ngModelChange",function(s){return r.LimpiezaVidrio=s}),A(),V(71," Limpieza de vidrio"),A()()(),k(72,"div",63)(73,"div",64)(74,"label")(75,"input",65),rt("ngModelChange",function(s){return r.LimpiezaServicio=s}),A(),V(76," Limpieza de \xe1rea de servicio"),A()()(),k(77,"div",63)(78,"div",59)(79,"label")(80,"input",66),rt("ngModelChange",function(s){return r.LimpiezaEstructura=s}),A(),V(81," Limpieza de estructura"),A()()(),k(82,"div",63)(83,"div",59)(84,"label")(85,"input",67),rt("ngModelChange",function(s){return r.LimpiezaTorniquetez=s}),A(),V(86," Limpieza de torniquete en espacios de VRT"),A()()(),k(87,"div",63)(88,"div",59)(89,"label")(90,"input",68),rt("ngModelChange",function(s){return r.LimpiezaSanitarios=s}),A(),V(91," Limpieza de sanitarios"),A()()(),k(92,"div",63)(93,"label",69),V(94,"Obervaciones"),A(),k(95,"input",70),rt("ngModelChange",function(s){return r.Observaciones=s}),A()(),k(96,"div",71)(97,"div",64)(98,"button",72),V(99,"Guardar"),A()()()(),k(100,"div",73)(101,"div",74)(102,"div",75)(103,"div",76)(104,"h5",77),V(105,"SEGURO QUE DESEA GUADAR LOS CAMBIOS"),A(),Q(106,"button",78),A(),k(107,"div",79),V(108," una vez que se guarde el informe no se podran editar los datos.. "),A(),k(109,"div",80)(110,"button",81),V(111,"Cerrar"),A(),k(112,"button",82),V(113,"Guardar informe"),A()()()()()()()()()()),2&t&&(ce(24),ze("ngModel",r.Estacion),ce(41),ze("ngModel",r.LimpiezaPiso),ce(5),ze("ngModel",r.LimpiezaVidrio),ce(5),ze("ngModel",r.LimpiezaServicio),ce(5),ze("ngModel",r.LimpiezaEstructura),ce(5),ze("ngModel",r.LimpiezaTorniquetez),ce(5),ze("ngModel",r.LimpiezaSanitarios),ce(5),ze("ngModel",r.Observaciones))},dependencies:[Fp,TS,ES,va,GI,Ha,Lp,Rp,ba,Wh],styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.header[_ngcontent-%COMP%]{color:#000;font-size:27px;padding:10px}.bigicon[_ngcontent-%COMP%]{font-size:35px;color:#000}.btn-limpieza[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;font-size:20px;text-transform:uppercase;width:200px;right:120px;border-radius:40px;align-items:self-end}.btn[_ngcontent-%COMP%]{font-size:20px;border-radius:20px;background-color:transparent;border:transparent;float:right}.btng[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;height:40px;width:120px;right:120px;display:flex;align-items:center;justify-content:center}.btn-regresar[_ngcontent-%COMP%]{background-color:transparent;border:transparent}.datalist[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{align-items:center;margin-top:20px;width:1px;display:flex}.form-control[_ngcontent-%COMP%]{border:2px solid #000000}body[_ngcontent-%COMP%]{background-color:#f5f5f5}checkbox[_ngcontent-%COMP%]{width:120px;right:120px;font-size:50px}"]}),e})(),Yte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-titanes-menu"]],decls:66,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateral",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul"],["href","inicio_titanes",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-house-door"],["href","#",1,"nav-link","link-dark"],["id","menuLateral","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],["href","titanes-menu",1,"nav-link","link-dark"],[1,"bi","bi-file-earmark-person"],[1,"dropdown"],[1,"bi","bi-box-arrow-right"],[1,"container","overflow-hidden","text-center"],[1,"d-grid","gap-1","d-md-block"],["href","limpieza"],["type","button",1,"btn1-menu"],[1,"bi","bi-stars",2,"font-size","35px"],["href","incidencias-tec"],["type","button",1,"btn2-menu"],[1,"bi","bi-laptop",2,"font-size","33px"],["href","informe-datos"],["type","button",1,"btn3-menu"],[1,"bi","bi-image",2,"font-size","30px"],["href","informe-percances"],["type","button",1,"btn4-menu"],[1,"bi","bi-car-front-fill",2,"font-size","31px"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," MENU TITANES "),A()()()()(),k(11,"body")(12,"nav",9)(13,"div",10)(14,"li",11)(15,"button",12),Q(16,"i",13),A()(),k(17,"li",11)(18,"a",14)(19,"button",15),Q(20,"i",16),A()()(),k(21,"li",11)(22,"a",17),Q(23,"button",15),A()(),k(24,"section",18)(25,"div",19)(26,"a",20)(27,"span",21),V(28,"MENU"),A()(),Q(29,"hr"),k(30,"ul",22),Q(31,"hr"),k(32,"li",11)(33,"a",23)(34,"button",15),Q(35,"i",24),V(36," Menu "),A()()()(),Q(37,"hr"),k(38,"ul")(39,"div",25)(40,"li",11)(41,"a",17)(42,"button",15),Q(43,"i",26),V(44," SALIR "),A()()()()()()()()(),k(45,"div",27)(46,"div",28)(47,"a",29)(48,"button",30),V(49," Limpieza "),Q(50,"i",31),A()()(),k(51,"div")(52,"a",32)(53,"button",33),V(54," Incidencias t\xe9cnologicas "),Q(55,"i",34),A()()(),k(56,"div")(57,"a",35)(58,"button",36),V(59," Informe datos (fotos) "),Q(60,"i",37),A()()(),k(61,"div")(62,"a",38)(63,"button",39),V(64," Percances vehiculares "),Q(65,"i",40),A()()()()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c;padding:auto}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.btn1-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:20px;border-radius:15px;width:250px;height:123px;margin:20px}.btn1-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn2-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:250px;height:120px;margin:10px 10px 10px 20px}.btn2-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn3-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:250px;height:120px;margin:10px 10px 10px 20px}.btn3-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btn4-menu[_ngcontent-%COMP%]{background-color:#9c223c;color:#fff;font-size:25px;padding:10px;border-radius:15px;width:250px;height:120px;margin:10px 10px 10px 20px}.btn4-menu[_ngcontent-%COMP%]:hover{background-color:#c3bbbb;cursor:pointer;color:#000;border-radius:15px}.btnchat[_ngcontent-%COMP%]{float:right}body[_ngcontent-%COMP%]{background-color:#f5f5f5}"]}),e})(),qte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-informe-datos"]],decls:18,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],["href","titanes-menu"],["type","button",1,"btn-regresar"],[1,"bi","bi-arrow-left",2,"font-size","25px"],["onclick","window.location.href='https://www.whatsapp.com/'",1,"btnw","position-absolute","top-50","start-50","translate-middle"],[1,"bi","bi-whatsapp",2,"font-size","25px"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INFORME DE DATOS "),A()()()()(),k(11,"a",9)(12,"button",10),Q(13,"i",11),A()(),k(14,"body")(15,"button",12),V(16,"Whatsapp! "),Q(17,"i",13),A()())},styles:[".pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.header[_ngcontent-%COMP%]{color:#000;font-size:27px;padding:10px}.bigicon[_ngcontent-%COMP%]{font-size:35px;color:#000}.btnw[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;align-items:end center;border-radius:20px;height:80px;width:280px;right:20px;letter-spacing:2px;font-size:18px;text-transform:uppercase}.btn-regresar[_ngcontent-%COMP%]{background-color:transparent;border:transparent}body[_ngcontent-%COMP%]{background-color:#f5f5f5}"]}),e})(),Xte=(()=>{class e{constructor(t,r){this.http=t,this.sanitizer=r,this.usuario="Titan 1"}onFileChanged1(t){this.file=t.target.files[0]}onFileChanged2(t){this.file2=t.target.files[0]}onFileChanged3(t){this.file3=t.target.files[0]}convertToBase64(){if(!this.file){const t=new FileReader;t.readAsDataURL(this.file),t.onload=()=>{this.base64String1=t.result,this.base64Image1=t.result}}}ngOnInit(){}enviarInformeAccidente(){var t,r,i;if(this.file2){const s=new FileReader,a=new FileReader,l=new FileReader;s.readAsDataURL(this.file),a.readAsDataURL(this.file2),l.readAsDataURL(this.file3),s.onload=()=>{this.base64String1=s.result,this.base64Image1=s.result,t=this.base64String1,a.onload=()=>{this.base64String2=a.result,this.base64Image2=a.result,r=this.base64String2,this.base64String1=s.result,this.base64String2=a.result,l.onload=()=>{this.base64String3=l.result,this.base64Image3=l.result,t=this.base64String1,i=this.base64String3,r=this.base64String2,this.base64String1=s.result,this.base64String2=a.result,this.base64String3=l.result,console.log(t,r,i);const d={NoEconomico:this.VehiculoECO,ServicioRuta:this.ServicioRuta,TipoUnidad:this.TipoUnidad,Ubicacion:this.Ubicacion,Sentido:this.Sentido,Hora:this.Hora,Marca:this.Marca,Submarca:this.Submarca,Color:this.Color,Placas:this.Placas,Anio:this.Anio,Conductor:this.Conductor,Credencial:this.Credencial,Descripcion:this.RelatoEcho,Lesionados:this.Lesionados,Nombres:this.Nombres,Ambulancia:this.Ambulancia,SeguridaPublica:this.SeguridaPublica,PatrullaNumero:this.PatrullaNumero,OficialAcargo:this.OficialAcargo,Seguro:this.Seguro,Supervisor:this.Supervisor,usuario:this.usuario,Foto_Eco:this.base64String1,Foto_Part:this.base64String2,Foto_Tarjeton:this.base64String3};console.log(d),this.http.post("https://pruebaacotma2.somee.com/api/Agregar_Informe_de_Accidente",d).toPromise().then(y=>{console.log(y),console.log(d)})}}}}}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-informe-percances"]],decls:163,vars:22,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],["href","titanes-menu"],["type","button",1,"btn-regresar"],[1,"bi","bi-arrow-left",2,"font-size","30px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"well","well-sm"],["method","post",1,"form-horizontal",3,"submit"],[1,"fw-normal"],[1,"text-center","header","fw-bold"],[2,"border","2px solid transparent"],[1,"col-12"],["for","validationDefault03",1,"form-label"],["list","datalistOptions","placeholder","","name","VehiculoECO","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","TipoUnidad","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Nombre","name","Credencial","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Conductor","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Nombre","name","ServicioRuta","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","Sentido",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Ubicacion","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Hora","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-decoration-underline","fw-bold","text-center"],["type","text","placeholder","","aria-label","Nombre","name","Marca","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Submarca","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"border","1px solid transparent"],["type","text","placeholder","","aria-label","Nombre","name","Color","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Placas","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","Apellido","name","Anio","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-3"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3","name","RelatoEcho","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","Lesionados",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","id","validationDefault03","name","Nombres","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","Ambulancia",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","SeguridaPublica",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","PatrullaNumero",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","OficialAcargo",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","Seguro",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","name","Supervisor",1,"form-control",3,"ngModel","ngModelChange"],["for","formFileMultiple",1,"form-label"],["type","file",3,"change"],[1,"modal-footer"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btng"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btng"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," PERCANCES "),A()()()()(),k(11,"a",9)(12,"button",10),Q(13,"i",11),A()(),k(14,"body")(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"form",16),rt("submit",function(){return r.enviarInformeAccidente()}),k(20,"p",17)(21,"legend",18),V(22,"Informe del percance"),A()(),Q(23,"hr",19),k(24,"div",20)(25,"div",20)(26,"label",21),V(27,"Num.Vehiculo (ECO)"),A(),k(28,"input",22),rt("ngModelChange",function(s){return r.VehiculoECO=s}),A()(),k(29,"div",20)(30,"label",21),V(31,"Tipo de unidad"),A(),k(32,"input",23),rt("ngModelChange",function(s){return r.TipoUnidad=s}),A()()(),Q(33,"hr",19),k(34,"div",20)(35,"div",20)(36,"label",21),V(37,"Credencial"),A(),k(38,"input",24),rt("ngModelChange",function(s){return r.Credencial=s}),A()(),k(39,"div",20)(40,"label",21),V(41,"Conductor"),A(),k(42,"input",25),rt("ngModelChange",function(s){return r.Conductor=s}),A()()(),Q(43,"hr",19),k(44,"div",20)(45,"div",20)(46,"label",21),V(47,"Servicio/ruta"),A(),k(48,"input",26),rt("ngModelChange",function(s){return r.ServicioRuta=s}),A()(),k(49,"div",20)(50,"label",21),V(51,"Sentido"),A(),k(52,"input",27),rt("ngModelChange",function(s){return r.Sentido=s}),A()()(),k(53,"div",20)(54,"label",21),V(55,"Ubicaci\xf3n"),A(),k(56,"input",28),rt("ngModelChange",function(s){return r.Ubicacion=s}),A()(),k(57,"div",20)(58,"label",21),V(59,"Hora"),A(),k(60,"input",29),rt("ngModelChange",function(s){return r.Hora=s}),A()(),Q(61,"hr",19),k(62,"p",30),V(63,"DATOS DEL PARTICULAR Y DEL VEHICULO"),A(),k(64,"div",20)(65,"div",20)(66,"div",20)(67,"label",21),V(68,"Marca"),A(),k(69,"input",31),rt("ngModelChange",function(s){return r.Marca=s}),A()(),k(70,"div",20)(71,"label",21),V(72,"Submarca"),A(),k(73,"input",32),rt("ngModelChange",function(s){return r.Submarca=s}),A()()(),Q(74,"hr",33),k(75,"div",20)(76,"div",20)(77,"label",21),V(78,"Color"),A(),k(79,"input",34),rt("ngModelChange",function(s){return r.Color=s}),A()(),k(80,"div",20)(81,"label",21),V(82,"Placas"),A(),k(83,"input",35),rt("ngModelChange",function(s){return r.Placas=s}),A()()(),k(84,"div",20)(85,"label",21),V(86,"Anio"),A(),k(87,"input",36),rt("ngModelChange",function(s){return r.Anio=s}),A()(),Q(88,"hr",19),k(89,"p",30),V(90,"DESCRIPCI\xd3N "),A(),k(91,"div",37)(92,"label",38),V(93,"Relato de los hechos"),A(),k(94,"textarea",39),rt("ngModelChange",function(s){return r.RelatoEcho=s}),A()(),k(95,"div",20)(96,"label",21),V(97,"Lesionados"),A(),k(98,"input",40),rt("ngModelChange",function(s){return r.Lesionados=s}),A()()(),k(99,"div",20)(100,"label",21),V(101,"Nombres de los lesionados"),A(),k(102,"input",41),rt("ngModelChange",function(s){return r.Nombres=s}),A()(),k(103,"div",20)(104,"label",21),V(105,"Ambulancia "),A(),k(106,"input",42),rt("ngModelChange",function(s){return r.Ambulancia=s}),A()(),k(107,"div",20)(108,"label",21),V(109,"Seguridad P\xfablica "),A(),k(110,"input",43),rt("ngModelChange",function(s){return r.SeguridaPublica=s}),A()(),k(111,"div",20)(112,"label",21),V(113,"Patrulla n\xfamero "),A(),k(114,"input",44),rt("ngModelChange",function(s){return r.PatrullaNumero=s}),A()(),k(115,"div",20)(116,"label",21),V(117,"Oficial a cargo"),A(),k(118,"input",45),rt("ngModelChange",function(s){return r.OficialAcargo=s}),A()(),k(119,"div",20)(120,"label",21),V(121,"o19-Seguro"),A(),k(122,"input",46),rt("ngModelChange",function(s){return r.Seguro=s}),A()(),k(123,"div",20)(124,"label",21),V(125,"Supervisor que atiende"),A(),k(126,"input",47),rt("ngModelChange",function(s){return r.Supervisor=s}),A()(),Q(127,"hr",19),k(128,"p",30),V(129,"FOTOS DEL PERCANCE"),A(),k(130,"div",37)(131,"label",48),V(132,"Fotos del ECO"),A(),k(133,"input",49),rt("change",function(s){return r.onFileChanged1(s)}),A()(),k(134,"div",37)(135,"label",48),V(136,"Fotos del carro particular"),A(),k(137,"input",49),rt("change",function(s){return r.onFileChanged2(s)}),A()(),k(138,"div",37)(139,"label",48),V(140,"Fotos del tarjet\xf3n"),A(),k(141,"input",49),rt("change",function(s){return r.onFileChanged3(s)}),A()(),Q(142,"hr",33),k(143,"div",50)(144,"button",51),V(145,"Guardar"),A()(),k(146,"div",52)(147,"div",53)(148,"div",54)(149,"div",55)(150,"h5",56),V(151,"ALERTA!!"),A(),Q(152,"button",57),A(),k(153,"div",58)(154,"p"),V(155,"\xbfSeguro que desea guardar el informe?"),A(),k(156,"span"),V(157,"Una vez guardado no se podra editar"),A()(),k(158,"div",50)(159,"button",59),V(160,"Cerrar"),A(),k(161,"button",60),V(162,"Guardar Informe"),A()()()()()()()()()()()),2&t&&(ce(28),ze("ngModel",r.VehiculoECO),ce(4),ze("ngModel",r.TipoUnidad),ce(6),ze("ngModel",r.Credencial),ce(4),ze("ngModel",r.Conductor),ce(6),ze("ngModel",r.ServicioRuta),ce(4),ze("ngModel",r.Sentido),ce(4),ze("ngModel",r.Ubicacion),ce(4),ze("ngModel",r.Hora),ce(9),ze("ngModel",r.Marca),ce(4),ze("ngModel",r.Submarca),ce(6),ze("ngModel",r.Color),ce(4),ze("ngModel",r.Placas),ce(4),ze("ngModel",r.Anio),ce(7),ze("ngModel",r.RelatoEcho),ce(4),ze("ngModel",r.Lesionados),ce(4),ze("ngModel",r.Nombres),ce(4),ze("ngModel",r.Ambulancia),ce(4),ze("ngModel",r.SeguridaPublica),ce(4),ze("ngModel",r.PatrullaNumero),ce(4),ze("ngModel",r.OficialAcargo),ce(4),ze("ngModel",r.Seguro),ce(4),ze("ngModel",r.Supervisor))},dependencies:[Fp,va,Ha,Lp,Rp,ba,Wh],styles:[".btnp[_ngcontent-%COMP%]{background-color:#000}.btng[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;font-size:20px;border-radius:50px;width:200px;height:40px;align-items:self-end}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:left;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.header[_ngcontent-%COMP%]{color:#000;font-size:27px;padding:10px}.bigicon[_ngcontent-%COMP%]{font-size:35px;color:#000}.form-control[_ngcontent-%COMP%]{border:2px solid #000000}.btn-regresar[_ngcontent-%COMP%]{background-color:transparent;border:transparent}body[_ngcontent-%COMP%]{background-color:#f5f5f5}"]}),e})(),Zte=(()=>{class e{constructor(t,r,i){this.http=t,this.location=r,this.sanitizer=i,this.Estado=null}enviarInformeTec(){this.http.post("https://pruebaacotma2.somee.com/api/agregar_nueva_incidencia_tecnologica",{Servicio:this.ServicioEst,VehiculoECO:this.NEco,Equipo_afectado:this.EquipoAfectado,Id_equipo_afectado:this.IdEquipoA,Falla:this.Falla,Estado:this.Estado}).toPromise().then(i=>{console.log(i),location.reload()})}}return e.\u0275fac=function(t){return new(t||e)(We(xs),We(D_),We(k_))},e.\u0275cmp=bn({type:e,selectors:[["app-incidencias-tec"]],decls:73,vars:5,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],["href","titanes-menu"],["type","button",1,"btn-regresar"],[1,"bi","bi-arrow-left",2,"font-size","30px"],[1,"container"],[1,"row"],[1,""],[1,"well","well-sm"],[1,"col-12",3,"submit"],[1,"fw-normal"],[1,"text-center","header"],[2,"border","2px solid transparent"],["type","text","id","formGroupExampleInput","placeholder","Servicio o estaci\xf3n","name","ServicioEst","requerid","",1,"form-control","rounded-pill","container","px-4",3,"ngModel","ngModelChange"],[1,"mb-3"],["type","text","id","formGroupExampleInput","placeholder","Vehiculo ECO","name","NEco","required","",1,"col-md-2","form-control","rounded-pill","container","px-4",3,"ngModel","ngModelChange"],["list","datalistOptions","id","exampleDataList","placeholder","Equipo Afectado","name","EquipoAfectado","required","",1,"col-md-2","form-control","rounded-pill","container","px-4",3,"ngModel","ngModelChange"],["id","datalistOptions"],["value","Barras"],["value","CET"],["value","Consolas"],["value","Camaras"],["value","DVR"],["value","Torniquetes"],["value","VRT"],["value","Pantallas"],["value","SITE"],["value","Fibra optica"],["value","Servidores"],["value","Equipo de computo"],["value","Sistema de pago electr\xd3nico"],["value","Sistema de Gesti\xf3n de flota"],["value","Sistema de Video Vigilancia"],["value","Sistema de Informaci\xf3n al Usuario"],["value","Sistema de Semaforizaci\xf3n"],["type","text","id","formGroupExampleInput","placeholder","Id equipo Afectado","name","IdEquipoA","required","",1,"col-md-2","form-control","rounded-pill","container","px-4",3,"ngModel","ngModelChange"],["type","text","id","formGroupExampleInput","placeholder","Falla","name","Falla","required","",1,"col-md-2","form-control","rounded-pill","container","px-4",3,"ngModel","ngModelChange"],[1,"modal-footer","rounded-pill",2,"text-align","center"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btng"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer",2,"text-align","center"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btng"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INCIDENCIAS TECNOLOGICAS "),A()()()()(),k(11,"a",9)(12,"button",10),Q(13,"i",11),A()(),k(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"form",16),rt("submit",function(){return r.enviarInformeTec()}),k(19,"fieldset")(20,"p",17)(21,"legend",18),V(22,"Incidencias tecnologicas"),A()(),Q(23,"hr",19),k(24,"div",14)(25,"input",20),rt("ngModelChange",function(s){return r.ServicioEst=s}),A()(),Q(26,"hr",19),k(27,"div",21)(28,"input",22),rt("ngModelChange",function(s){return r.NEco=s}),A()(),Q(29,"hr",19),k(30,"input",23),rt("ngModelChange",function(s){return r.EquipoAfectado=s}),A(),k(31,"datalist",24),Q(32,"option",25)(33,"option",26)(34,"option",27)(35,"option",28)(36,"option",29)(37,"option",30)(38,"option",31)(39,"option",32)(40,"option",33)(41,"option",34)(42,"option",35)(43,"option",36)(44,"option",37)(45,"option",38)(46,"option",39)(47,"option",40)(48,"option",41),A(),Q(49,"hr",19),k(50,"div",21)(51,"input",42),rt("ngModelChange",function(s){return r.IdEquipoA=s}),A()(),Q(52,"hr",19),k(53,"div",21)(54,"input",43),rt("ngModelChange",function(s){return r.Falla=s}),A()(),Q(55,"hr",19),k(56,"div",44)(57,"button",45),V(58,"Guardar"),A()(),k(59,"div",46)(60,"div",47)(61,"div",48)(62,"div",49)(63,"h5",50),V(64,"ENVIAR INFORME"),A(),Q(65,"button",51),A(),k(66,"div",52),V(67," \xbfseguro que desea guardar el informe? "),A(),k(68,"div",53)(69,"button",54),V(70,"Cerrar"),A(),k(71,"button",55),V(72,"Guardar informe"),A()()()()()()()()()()()),2&t&&(ce(25),ze("ngModel",r.ServicioEst),ce(3),ze("ngModel",r.NEco),ce(2),ze("ngModel",r.EquipoAfectado),ce(21),ze("ngModel",r.IdEquipoA),ce(3),ze("ngModel",r.Falla))},dependencies:[Fp,TS,ES,va,Ha,Lp,Rp,ba,Wh],styles:[".btng[_ngcontent-%COMP%]{color:#fff;background-color:#9c223c;font-size:20px;border-radius:50px;width:300px;height:50px;align-items:center}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.header[_ngcontent-%COMP%]{color:#000;font-size:27px;padding:10px}.bigicon[_ngcontent-%COMP%]{font-size:35px;color:#000}.btn-regresar[_ngcontent-%COMP%]{background-color:transparent;border:transparent}.form-control[_ngcontent-%COMP%]{border:2px solid #000000}body[_ngcontent-%COMP%]{background-color:#f5f5f5fa}"]}),e})();function Kte(e,n){if(1&e&&(k(0,"div",1)(1,"div",2),V(2),A(),k(3,"div",3)(4,"h5",4),V(5),A(),k(6,"p",5),V(7),A(),Q(8,"img",6),A()()),2&e){const t=n.$implicit;ce(2),Nl(" ",t.Fecha_Pub," "),ce(3),$t(t.Titulo_Pub),ce(2),$t(t.Descripcion_Pub),ce(1),ze("src",t.ImagenP,Zi)}}let P6=(()=>{class e{constructor(t){this.http=t,this.Mensajes=[]}getPublicacion(){this.http.get("http://prueba252.somee.com/api/Publicaciones").subscribe(t=>{console.log(t),this.Mensajes=t})}ngOnInit(){setInterval(()=>{this.getPublicacion()},500)}}return e.\u0275fac=function(t){return new(t||e)(We(xs))},e.\u0275cmp=bn({type:e,selectors:[["app-stacks2"]],decls:2,vars:1,consts:[["class","card","style","margin: 20px;",4,"ngFor","ngForOf"],[1,"card",2,"margin","20px"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[2,"width","50%",3,"src"]],template:function(t,r){1&t&&(k(0,"div"),Rt(1,Kte,9,4,"div",0),A()),2&t&&(ce(1),ze("ngForOf",r.Mensajes))},dependencies:[vs]}),e})(),O6=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-publicaciones"]],decls:1,vars:0,template:function(t,r){1&t&&Q(0,"app-stacks2")},dependencies:[P6]}),e})();const Jte=[{path:"limpieza",component:Gte},{path:"titanes-menu",component:Yte},{path:"informe-datos",component:qte},{path:"informe-percances",component:Xte},{path:"incidencias-tec",component:Zte},{path:"inicio_titanes",component:(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["app-inicio-titanes"]],decls:48,vars:0,consts:[[2,"background-color","#9C223C"],[1,"navbar","navbar-expand-lg"],[1,"container-fluid","pading1"],["href","#",1,"navbar-brand","text1"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"navbar-text","text1"],[1,"container",2,"background-color","rgb(0, 0, 0)","text-align","center"],[1,"navbar"],[1,"container"],[1,"item-5","deeper","parent",2,"list-style-type","none"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#menuLateral",1,"btn","btn-outline-light","text2"],[1,"bi","bi-list-ul"],["href","Publicaciones",1,"nav-link","link-dark"],["type","button",1,"btn","btn-outline-light","text2"],[1,"bi","bi-house-door"],["href","#",1,"nav-link","link-dark"],["id","menuLateral","tabindex","-1",1,"offcanvas","offcanvas-start",2,"width","280px"],[1,"d-flex","flex-column","flex-shrink-0","p-3",2,"width","280px","height","100vh"],["href","/",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","link-dark","text-decoration-none"],[1,"fs-4"],[1,"nav","nav-pills","flex-column","mb-auto"],["href","titanes-menu",1,"nav-link","link-dark"],[1,"bi","bi-file-earmark-person"],[1,"dropdown"],[1,"bi","bi-box-arrow-right"],[1,"container",2,"background-color","rgb(202, 202, 202)","text-align","center"]],template:function(t,r){1&t&&(k(0,"header",0)(1,"nav",1)(2,"div",2)(3,"a",3),V(4,"SITMAH"),A(),k(5,"button",4),Q(6,"span",5),A(),k(7,"div",6),Q(8,"ul",7),k(9,"span",8),V(10," INICIO TITANES "),A()()()()(),k(11,"body"),Q(12,"div",9),k(13,"nav",10)(14,"div",11)(15,"li",12)(16,"button",13),Q(17,"i",14),A()(),k(18,"li",12)(19,"a",15)(20,"button",16),Q(21,"i",17),A()()(),k(22,"li",12)(23,"a",18),Q(24,"button",16),A()(),k(25,"section",19)(26,"div",20)(27,"a",21)(28,"span",22),V(29,"MENU"),A()(),Q(30,"hr"),k(31,"ul",23),Q(32,"hr"),k(33,"li",12)(34,"a",24)(35,"button",16),Q(36,"i",25),V(37," Menu "),A()()()(),Q(38,"hr"),k(39,"ul")(40,"div",26)(41,"li",12)(42,"a",18)(43,"button",16),Q(44,"i",27),V(45," SALIR "),A()()()()()()()()(),k(46,"div",28),Q(47,"app-publicaciones"),A()())},dependencies:[O6],styles:[".btn-flotante[_ngcontent-%COMP%]{font-size:16px;text-transform:uppercase;font-weight:700;color:#fff;border-radius:20px;letter-spacing:2px;background-color:#e91e63;padding:18px 30px;position:fixed;bottom:40px;right:40px;transition:all .3s ease 0ms;box-shadow:0 8px 15px #0000001a;z-index:99}.btn-flotante[_ngcontent-%COMP%]:hover{background-color:#2c2fa5;box-shadow:0 15px 20px #000;border-radius:50px;transform:translateY(-7px)}@media only screen and (max-width: 600px){.btn-flotante[_ngcontent-%COMP%]{font-size:14px;padding:12px 20px;bottom:20px;right:20px}}.pading1[_ngcontent-%COMP%]{background-color:#9c223c}.text1[_ngcontent-%COMP%]{color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;min-height:15vh}.text2[_ngcontent-%COMP%]{color:#707070;font-size:20px;width:100%;margin-right:auto;margin-left:auto}.side_nav[_ngcontent-%COMP%]{background:black}.content[_ngcontent-%COMP%]{min-height:100vh;width:100%}hr.h-color[_ngcontent-%COMP%]{background-color:#707070}.sidebar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#707070;border-radius:8px}.tamano[_ngcontent-%COMP%]{width:500px}"]}),e})()},{path:"stack2",component:P6},{path:"Publicaciones",component:O6}];let Qte=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot(Jte),wc]}),e})();function ene(e,n){if(1&e){const t=Gn();k(0,"tr")(1,"th"),V(2),A(),k(3,"td"),V(4),A(),k(5,"td"),V(6),A(),k(7,"td"),V(8),A(),k(9,"td"),V(10),A(),k(11,"td")(12,"button",29),rt("click",function(){const s=mn(t).$implicit;return gn(bt().goEditarServicio(s.idAsignacion))}),Q(13,"i",30),A()()()}if(2&e){const t=n.$implicit;ce(2),$t(t.tipoUnidad),ce(2),$t(t.ruta),ce(2),$t(t.economico),ce(2),$t(t.tarjeton),ce(2),$t(t.nomChofer)}}let tne=(()=>{class e{constructor(t,r){this.router=t,this.http=r,this.icongif="assets/iconBlackAcotma.gif"}filterItems(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}GetServiciosIniciados(){this.http.get("http://prueba252.somee.com/api/ServiciosIniciados").subscribe(t=>{this.dataAsignacion=t})}ngOnInit(){setInterval(()=>{this.GetServiciosIniciados()},500)}goApertura(){this.router.navigate(["Operadora/Agregar/Servicio"])}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}goEditarServicio(t){this.router.navigate(["Operadora/EditarServicio",t])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:61,vars:6,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-clock"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"input-group","flex-nowrap"],["id","addon-wrapping",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar","aria-label","Username","aria-describedby","addon-wrapping",1,"form-control",3,"ngModel","ngModelChange"],[1,"ex1"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","400px"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"bi","bi-pencil-square"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Servicios Iniciados"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goApertura()}),Q(16,"i",14),V(17," Apertura de Servicios"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),rt("click",function(){return r.goHorarioServicio()}),Q(21,"i",15),V(22," Horarios de Servicio"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",16),rt("click",function(){return r.goCerrar()}),Q(26,"i",17),V(27," Cerrrar Sesion"),A()()()()()()(),Q(28,"br")(29,"br")(30,"br")(31,"br")(32,"br")(33,"br"),k(34,"div",18)(35,"div",19)(36,"span",20),Q(37,"i",21),A(),k(38,"input",22),rt("ngModelChange",function(s){return r.filtro=s}),A()(),Q(39,"br"),k(40,"div",23)(41,"table",24)(42,"thead")(43,"tr")(44,"th",25),V(45,"Unidad"),A(),k(46,"th",25),V(47,"Ruta"),A(),k(48,"th",25),V(49,"Economico"),A(),k(50,"th",25),V(51,"Tarjeton"),A(),k(52,"th",25),V(53,"Nombre"),A(),k(54,"th"),V(55,"Accion"),A()()(),k(56,"tbody"),Rt(57,ene,14,5,"tr",26),Ji(58,"filter"),A()()(),k(59,"div",27),Q(60,"img",28),A()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(34),ze("ngModel",r.filtro),ce(19),ze("ngForOf",zl(58,3,r.dataAsignacion,r.filtro)))},dependencies:[vs,va,Ha,ba,R_],styles:["div.ex1[_ngcontent-%COMP%]{height:500px;width:100%;overflow-y:auto}"]}),e})();function nne(e,n){if(1&e){const t=Gn();k(0,"tr")(1,"td"),V(2),A(),k(3,"td"),V(4),Ji(5,"date"),A(),k(6,"td")(7,"button",42),rt("click",function(){return mn(t),gn(bt().goButtonEditarTable())}),Q(8,"i",43),A()()()}if(2&e){const t=n.$implicit;ce(2),$t(t.ruta),ce(2),$t(zl(5,2,t.fecha,"dd/MM/yyyy"))}}function rne(e,n){1&e&&Q(0,"img",44),2&e&&Kr("src",bt().loading,Zi)}let ine=(()=>{class e{constructor(t,r){this.router=t,this.http=r,this.icongif="assets/iconBlackAcotma.gif",this.loading="assets/loading.gif",this.mostrarImagen=!1}filterItems(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}filterItems2(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}sendHorarios(){this.mostrarImagen=!0,this.http.post("http://prueba252.somee.com/api/HorarioServicio",{fechaInicio:this.fechaInicio,fechaFinal:this.fechaFinal,ruta:this.ruta,intervalo:this.intervalo,corridaInicial:this.corridaInicial,corridaFinal:this.corridaFinal,primeraSalida:this.primeraSalida}).toPromise().then(i=>{!0===i&&(this.mostrarImagen=!1)})}getHorarioToday(){this.http.get("http://prueba252.somee.com/api/GetHorarios/Today/Id").subscribe(t=>{this.horarioToday=t})}ngOnInit(){setInterval(()=>{this.getHorarioToday()},500)}goApertura(){this.router.navigate(["Operadora/Agregar/Servicio"])}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}goButtonEditarTable(){this.router.navigate(["Operadora/EditarHoraServicio"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:98,vars:18,consts:[[2,"background-color","#9c223c","height","150vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid","text-center"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","100px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-play-fill"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"row"],[1,"col"],["for",""],["type","text","placeholder","Introduce la Ruta","id","ruta","name","ruta",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Introduce el Intervalo","name","intervalo",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Introduce la primera corrida de patio Tellez","name","corridaInicial",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Introduce la ultima corrida","name","corridaFinal",1,"form-control",3,"ngModel","ngModelChange"],["type","time","placeholder","Introduce Salida de la primera Corrida","name","corridaInicial",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","fechaInicial",1,"form-control",3,"ngModel","ngModelChange"],["type","date","placeholder","Introduce la Vigencia","name","fechaFinal",1,"form-control",3,"ngModel","ngModelChange"],["align","right"],["type","button",1,"btn","btn-success","col-2",2,"background-color","rgb(73, 167, 167)","height","40px",3,"click"],[1,"input-group"],[1,"input-group-prepend"],["type","text","placeholder","Ruta",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","fecha yyyy-mm-dd",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","ex1"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","700px"],["id","imagen-superior",3,"src",4,"ngIf"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"bi","bi-pencil-square"],["id","imagen-superior",3,"src"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"HORARIOS DE SERVICIO"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goApertura()}),Q(16,"i",14),V(17," Apertura de Servicios"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),rt("click",function(){return r.goServiciosIniciados()}),Q(21,"i",15),V(22," Servicio Iniciado"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",16),rt("click",function(){return r.goCerrar()}),Q(26,"i",17),V(27," Cerrrar Sesion"),A()()()()()()(),Q(28,"br")(29,"br")(30,"br")(31,"br")(32,"br")(33,"br")(34,"br"),k(35,"div",18)(36,"form")(37,"div",19)(38,"div",20)(39,"label",21),V(40,"Ruta "),k(41,"input",22),rt("ngModelChange",function(s){return r.ruta=s}),A()()(),k(42,"div",20)(43,"label",21),V(44,"Intervalo "),k(45,"input",23),rt("ngModelChange",function(s){return r.intervalo=s}),A()()()(),k(46,"div",19)(47,"div",20)(48,"label",21),V(49,"Corrida Inicial "),k(50,"input",24),rt("ngModelChange",function(s){return r.corridaInicial=s}),A()()(),k(51,"div",20)(52,"label",21),V(53,"Corrida Final "),k(54,"input",25),rt("ngModelChange",function(s){return r.corridaFinal=s}),A()()()(),k(55,"div",19)(56,"div",20)(57,"label",21),V(58,"Salida Inicial "),k(59,"input",26),rt("ngModelChange",function(s){return r.primeraSalida=s}),A()()()(),k(60,"div",19)(61,"div",20)(62,"label",21),V(63,"Del: "),k(64,"input",27),rt("ngModelChange",function(s){return r.fechaInicio=s}),A()()(),k(65,"div",20)(66,"label",21),V(67,"Al: "),k(68,"input",28),rt("ngModelChange",function(s){return r.fechaFinal=s}),A()()()(),k(69,"div",19),Q(70,"br")(71,"br"),k(72,"p",29)(73,"button",30),rt("click",function(){return r.sendHorarios()}),V(74,"SUBIR"),A()(),Q(75,"br"),A()(),k(76,"div",31),Q(77,"div",32),k(78,"input",33),rt("ngModelChange",function(s){return r.filtro=s}),A(),k(79,"input",34),rt("ngModelChange",function(s){return r.filtro2=s}),A()(),Q(80,"br"),k(81,"div",35)(82,"table",36)(83,"thead")(84,"tr")(85,"th",37),V(86,"Ruta"),A(),k(87,"th",37),V(88,"FECHA"),A(),k(89,"th"),V(90,"Accion"),A()()(),k(91,"tbody"),Rt(92,nne,9,5,"tr",38),Ji(93,"filter"),Ji(94,"filter"),A()()(),k(95,"div",39),Q(96,"img",40),A()()(),Rt(97,rne,1,1,"img",41)),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(37),ze("ngModel",r.ruta),ce(4),ze("ngModel",r.intervalo),ce(5),ze("ngModel",r.corridaInicial),ce(4),ze("ngModel",r.corridaFinal),ce(5),ze("ngModel",r.primeraSalida),ce(5),ze("ngModel",r.fechaInicio),ce(4),ze("ngModel",r.fechaFinal),ce(10),ze("ngModel",r.filtro),ce(1),ze("ngModel",r.filtro2),ce(13),ze("ngForOf",zl(93,12,zl(94,15,r.horarioToday,r.filtro),r.filtro2)),ce(5),ze("ngIf",r.mostrarImagen))},dependencies:[vs,Hh,Fp,va,Ha,Lp,ba,Wh,M_,R_],styles:["label[_ngcontent-%COMP%]{display:block;font:1rem Fira Sans,sans-serif;color:#fff}label[_ngcontent-%COMP%]{margin:.4rem 0}div.ex1[_ngcontent-%COMP%]{height:300px;width:100%;overflow-y:auto}#imagen-superior[_ngcontent-%COMP%]{position:fixed;top:0;left:0;max-width:100%;max-height:100%;z-index:9999}"]}),e})();function sne(e,n){if(1&e&&(k(0,"div",20)(1,"div",21)(2,"div",22)(3,"label",23),V(4,"TIPO DE UNIDAD:"),A(),k(5,"div",24),Q(6,"input",25),A()(),k(7,"div",22)(8,"label",23),V(9,"RUTA:"),A(),k(10,"div",24),Q(11,"input",26),A()(),k(12,"div",22)(13,"label",23),V(14,"ECONOMICO:"),A(),k(15,"div",24),Q(16,"input",26),A()()(),Q(17,"br")(18,"br")(19,"br"),k(20,"div",27)(21,"div",28)(22,"div",29)(23,"label",23),V(24,"No. TARJETON:"),A(),k(25,"div",24),Q(26,"input",26),A()(),k(27,"div",30)(28,"label",31),V(29,"NOMBRE : "),A(),k(30,"div",24),Q(31,"input",26),A()()()(),Q(32,"br")(33,"br")(34,"br")(35,"br"),k(36,"p",32)(37,"button",33),V(38,"ACTUALIZAR"),A()(),Q(39,"br")(40,"br")(41,"br")(42,"br")(43,"br"),k(44,"div",34),Q(45,"img",35),A()()),2&e){const t=n.$implicit;ce(6),Kr("value",t.tipoUnidad),ce(5),Kr("value",t.ruta),ce(5),Kr("value",t.economico),ce(10),Kr("value",t.tarjeton),ce(5),Kr("value",t.nomChofer)}}let one=(()=>{class e{constructor(t,r,i){this.router=t,this.route=r,this.http=i,this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){this.idAsignacion=this.route.snapshot.params.idAsignacion,this.http.get(`http://prueba252.somee.com/api/ServiciosIniciadosById?idAsignacion=${this.idAsignacion}`).subscribe(r=>{this.dataServiciosIniciados=r})}goApertura(){this.router.navigate(["Operadora/Home"])}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(Cg),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:41,vars:2,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid","text-center"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","100px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-clock"],[1,"bi","bi-play-fill"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],["class","container",4,"ngFor","ngForOf"],[1,"container"],[1,"row","g-4"],[1,"col-4"],[2,"color","aliceblue"],[1,""],["required","",1,"form-control",2,"color","black",3,"value"],[1,"form-control",3,"value"],[1,"item-center"],[1,"row","g-0"],[1,"col-4","mx-auto"],[1,"col-6","mx-auto"],[2,"color","rgb(247, 247, 247)"],["align","right"],["type","button",1,"btn","btn-success","col-2",2,"background-color","rgb(73, 167, 167)","height","40px"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","700px"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"EDITAR SERVICIO"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goApertura()}),Q(16,"i",14),V(17," Apertura de Servicios"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),rt("click",function(){return r.goHorarioServicio()}),Q(21,"i",15),V(22," Horarios de Servicio"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",13),rt("click",function(){return r.goServiciosIniciados()}),Q(26,"i",16),V(27," Servicio Iniciado"),A()(),Q(28,"br"),k(29,"li",12)(30,"button",17),rt("click",function(){return r.goCerrar()}),Q(31,"i",18),V(32," Cerrrar Sesion"),A()()()()()()(),Q(33,"br")(34,"br")(35,"br")(36,"br")(37,"br")(38,"br")(39,"br"),Rt(40,sne,46,5,"div",19),A()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(36),ze("ngForOf",r.dataServiciosIniciados))},dependencies:[vs]}),e})(),ane=(()=>{class e{constructor(t){this.router=t,this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){}goApertura(){this.router.navigate(["Operadora/Home"])}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:86,vars:1,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid","text-center"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","100px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-clock"],[1,"bi","bi-play-fill"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"row","g-4"],[1,"col-4"],[2,"color","aliceblue"],[1,"form-floating"],["placeholder","Introduce tu nombre","required","",1,"form-control",2,"color","black"],[1,"form-control"],["type","number","id","tentacles","name","tentacles","min","0","max","100",1,"form-control"],[1,"item-center"],[1,"row","g-0"],[1,"col-4","mx-auto"],[2,"color","rgb(247, 247, 247)"],["type","time","name","horaarribo","min","12:00","max","18:00","step","600",1,"form-control"],["align","right"],["type","button",1,"btn","btn-success","col-2",2,"background-color","rgb(73, 167, 167)","height","40px"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","700px"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"EDITAR HORARIO SERVICIO"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goApertura()}),Q(16,"i",14),V(17," Apertura de Servicios"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),rt("click",function(){return r.goHorarioServicio()}),Q(21,"i",15),V(22," Horarios de Servicio"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",13),rt("click",function(){return r.goServiciosIniciados()}),Q(26,"i",16),V(27," Servicio Iniciado"),A()(),Q(28,"br"),k(29,"li",12)(30,"button",17),rt("click",function(){return r.goCerrar()}),Q(31,"i",18),V(32," Cerrrar Sesion"),A()()()()()()(),Q(33,"br")(34,"br")(35,"br")(36,"br")(37,"br")(38,"br")(39,"br"),k(40,"div",19)(41,"div",20)(42,"div",21)(43,"label",22),V(44,"RUTA:"),A(),k(45,"div",23),Q(46,"input",24),A()(),k(47,"div",21)(48,"label",22),V(49,"TIPO DE UNIDAD:"),A(),k(50,"div",23),Q(51,"input",25),A()(),k(52,"div",21)(53,"label",22),V(54,"INTERVALO:"),A(),k(55,"div",23),Q(56,"input",26),A()()(),Q(57,"br")(58,"br")(59,"br"),k(60,"div",27)(61,"div",28)(62,"div",29)(63,"label",22),V(64,"CORRIDA:"),A(),k(65,"div",23),Q(66,"input",25),A()(),k(67,"div",29)(68,"label",30),V(69,"PRIMERA SALIDA: "),A(),k(70,"div",23),Q(71,"input",31),A()()()(),Q(72,"br")(73,"br")(74,"br")(75,"br"),k(76,"p",32)(77,"button",33),V(78,"ACTUALIZAR"),A()(),Q(79,"br")(80,"br")(81,"br")(82,"br")(83,"br"),k(84,"div",34),Q(85,"img",35),A()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi))}}),e})(),lne=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,r){}}),e})(),cne=(()=>{class e{constructor(){this.icongif="assets/iconBlackAcotma.gif",this.iconV="assets/iconVerificadores.gif"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:68,vars:2,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","80px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page","href","#",1,"btn","btn-outline-danger"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"col-lg-12","col-xl-11"],[2,"border-radius","25px","background-color","#9c223c"],[1,"card-body"],[1,"row","justify-content-center"],[1,"col-md-10","col-lg-6","col-xl-5","order-2","order-lg-1"],[1,"text-center","h1","fw-bold","mb-5","mx-1","mx-md-4","mt-4"],[1,"mx-1","mx-md-4"],[1,"d-flex","flex-row","align-items-center","mb-4"],[1,"fas","fa-user","fa-lg","me-3","fa-fw"],[1,"form-outline","flex-fill","mb-0"],["type","text","id","form3Example1c","placeholder","Ingresa el Identificador del usuario",1,"form-control"],["for","form3Example1c",1,"form-label","colorwhite"],[1,"fas","fa-envelope","fa-lg","me-3","fa-fw"],["type","text","id","form3Example3c","placeholder","Ingresa el Nombre Completo",1,"form-control"],["for","form3Example3c",1,"form-label","colorwhite"],[1,"fas","fa-lock","fa-lg","me-3","fa-fw"],["type","text","id","form3Example4c","placeholder","Ingresa el Apellido Paterno Comleto",1,"form-control"],["for","form3Example4c",1,"form-label","colorwhite"],[1,"fas","fa-key","fa-lg","me-3","fa-fw"],["type","text","id","form3Example4cd","placeholder","Ingresa el Apellido Materno Completo",1,"form-control"],["for","form3Example4cd",1,"form-label","colorwhite"],["type","password","id","form3Example4cd","placeholder","Ingresa la contrase\xf1a",1,"form-control"],[1,"d-flex","justify-content-center","mx-4","mb-3","mb-lg-4"],["type","button",1,"btn","btn-primary","btn-lg"],[1,"col-md-10","col-lg-6","col-xl-7","d-flex","align-items-center","order-1","order-lg-2"],["alt","Sample image",1,"img-fluid",3,"src"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Nuevo Verificador"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),Q(16,"i",14),V(17," Cerrrar Sesion"),A()()()()()()(),Q(18,"br")(19,"br")(20,"br"),k(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20)(27,"div",21),Q(28,"p",22),k(29,"form",23)(30,"div",24),Q(31,"i",25),k(32,"div",26),Q(33,"input",27),k(34,"label",28),V(35,"Usuario"),A()()(),k(36,"div",24),Q(37,"i",29),k(38,"div",26),Q(39,"input",30),k(40,"label",31),V(41,"Nombre"),A()()(),k(42,"div",24),Q(43,"i",32),k(44,"div",26),Q(45,"input",33),k(46,"label",34),V(47,"Apellido Paterno"),A()()(),k(48,"div",24),Q(49,"i",35),k(50,"div",26),Q(51,"input",36),k(52,"label",37),V(53,"Apellido Materno"),A()()(),k(54,"div",24),Q(55,"i",35),k(56,"div",26),Q(57,"input",38),k(58,"label",37),V(59,"Contrase\xf1a"),A()()(),k(60,"div",39)(61,"button",40),V(62,"Registrar"),A()()()(),k(63,"div",41),Q(64,"img",42),A()(),Q(65,"br")(66,"br")(67,"br"),A()()()()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(60),Kr("src",r.iconV,Zi))},styles:[".colorwhite[_ngcontent-%COMP%]{color:#fff}"]}),e})(),une=(()=>{class e{constructor(){this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:105,vars:1,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page","href","#",1,"btn","btn-outline-success"],[1,"bi","bi-person-fill-gear"],[1,"bi","bi-clock"],[1,"bi","bi-play-fill"],["aria-current","page","href","#",1,"btn","btn-outline-danger"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"btn","btn-success"],[1,"table-responsive"],[1,"table","table-dark","border"],["scope","col"],["colspan","2",1,"text-center"],["scope","row"],["type","button",1,"btn","btn-outline-warning"],[1,"bi","bi-pencil-square"],["type","button",1,"btn","btn-outline-danger"],[1,"bi","bi-person-dash-fill"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","400px"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Administracion de Verificadores"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),Q(16,"i",14),V(17," Administrar Verificadores"),A()(),Q(18,"br"),k(19,"li",12)(20,"button",13),Q(21,"i",15),V(22," Horarios de Servicio"),A()(),Q(23,"br"),k(24,"li",12)(25,"button",13),Q(26,"i",16),V(27," Servicio Iniciado"),A()(),Q(28,"br"),k(29,"li",12)(30,"button",17),Q(31,"i",18),V(32," Cerrrar Sesion"),A()()()()()()(),Q(33,"br")(34,"br")(35,"br")(36,"br")(37,"br")(38,"br"),k(39,"div",19)(40,"button",20),V(41,"Agregar Usuario"),A(),Q(42,"br")(43,"br"),k(44,"div",21)(45,"table",22)(46,"thead")(47,"tr")(48,"th",23),V(49,"Usuario"),A(),k(50,"th",23),V(51,"Nombre"),A(),k(52,"th",23),V(53,"Apellido"),A(),k(54,"th",23),V(55,"Rol"),A(),Q(56,"th",24),A()(),k(57,"tbody")(58,"tr")(59,"th",25),V(60,"1"),A(),k(61,"td"),V(62,"Mark"),A(),k(63,"td"),V(64,"Otto"),A(),k(65,"td"),V(66,"Otto"),A(),k(67,"td")(68,"button",26),Q(69,"i",27),A()(),k(70,"td")(71,"button",28),Q(72,"i",29),A()()(),k(73,"tr")(74,"th",25),V(75,"2"),A(),k(76,"td"),V(77,"Jacob"),A(),k(78,"td"),V(79,"Thornton"),A(),k(80,"td"),V(81,"Thornton"),A(),k(82,"td")(83,"button",26),Q(84,"i",27),A()(),k(85,"td")(86,"button",28),Q(87,"i",29),A()()(),k(88,"tr")(89,"th",25),V(90,"3"),A(),k(91,"td"),V(92,"Larry"),A(),k(93,"td"),V(94,"the Bird"),A(),k(95,"td"),V(96,"the Bird"),A(),k(97,"td")(98,"button",26),Q(99,"i",27),A()(),k(100,"td")(101,"button",28),Q(102,"i",29),A()()()()()(),k(103,"div",30),Q(104,"img",31),A()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi))}}),e})();var Qc=1200,B_=1252,hne=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],dP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},DS=function(e){-1!=hne.indexOf(e)&&(B_=dP[0]=e)},$u=function(e){Qc=e,DS(e)};function MS(){$u(1200),function dne(){DS(1252)}()}function kS(e){for(var n=[],t=0,r=e.length;t<r;++t)n[t]=e.charCodeAt(t);return n}function L6(e){for(var n=[],t=0;t<e.length>>1;++t)n[t]=String.fromCharCode(e.charCodeAt(2*t+1)+(e.charCodeAt(2*t)<<8));return n.join("")}var wi,Pv=function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1);return 255==n&&254==t?function fne(e){for(var n=[],t=0;t<e.length>>1;++t)n[t]=String.fromCharCode(e.charCodeAt(2*t)+(e.charCodeAt(2*t+1)<<8));return n.join("")}(e.slice(2)):254==n&&255==t?L6(e.slice(2)):65279==n?e.slice(1):e},qw=function(n){return String.fromCharCode(n)},fP=function(n){return String.fromCharCode(n)},Xs=null,Xw=!0,kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Zw(e){for(var n="",t=0,r=0,i=0,s=0,a=0,l=0,d=0,m=0;m<e.length;)s=(t=e.charCodeAt(m++))>>2,a=(3&t)<<4|(r=e.charCodeAt(m++))>>4,l=(15&r)<<2|(i=e.charCodeAt(m++))>>6,d=63&i,isNaN(r)?l=d=64:isNaN(i)&&(d=64),n+=kg.charAt(s)+kg.charAt(a)+kg.charAt(l)+kg.charAt(d);return n}function eu(e){var n="",s=0,a=0,l=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var m=0;m<e.length;)s=kg.indexOf(e.charAt(m++)),a=kg.indexOf(e.charAt(m++)),n+=String.fromCharCode(s<<2|a>>4),64!==(l=kg.indexOf(e.charAt(m++)))&&(n+=String.fromCharCode((15&a)<<4|l>>2)),64!==(d=kg.indexOf(e.charAt(m++)))&&(n+=String.fromCharCode((3&l)<<6|d));return n}var Hr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Np=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(n,t){return t?new Buffer(n,t):new Buffer(n)}:Buffer.from.bind(Buffer)}return function(){}}();function Ag(e){return Hr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function F6(e){return Hr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var tu=function(n){return Hr?Np(n,"binary"):n.split("").map(function(t){return 255&t.charCodeAt(0)})};function Ig(e){if(Array.isArray(e))return e.map(function(r){return String.fromCharCode(r)}).join("");for(var n=[],t=0;t<e.length;++t)n[t]=String.fromCharCode(e[t]);return n.join("")}function pP(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return pP(new Uint8Array(e));for(var n=new Array(e.length),t=0;t<e.length;++t)n[t]=e[t];return n}var wa=Hr?function(e){return Buffer.concat(e.map(function(n){return Buffer.isBuffer(n)?n:Np(n)}))}:function(e){if(typeof Uint8Array<"u"){var n=0,t=0;for(n=0;n<e.length;++n)t+=e[n].length;var r=new Uint8Array(t),i=0;for(n=0,t=0;n<e.length;t+=i,++n)if(i=e[n].length,e[n]instanceof Uint8Array)r.set(e[n],t);else{if("string"==typeof e[n])throw"wtf";r.set(new Uint8Array(e[n]),t)}return r}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))},ol=/\u0000/g,Jw=/[\u0001-\u0006]/g;function Ov(e){for(var n="",t=e.length-1;t>=0;)n+=e.charAt(t--);return n}function Gh(e,n){var t=""+e;return t.length>=n?t:Ks("0",n-t.length)+t}function mP(e,n){var t=""+e;return t.length>=n?t:Ks(" ",n-t.length)+t}function AS(e,n){var t=""+e;return t.length>=n?t:t+Ks(" ",n-t.length)}var R6=Math.pow(2,32);function Lv(e,n){return e>R6||e<-R6?function gne(e,n){var t=""+Math.round(e);return t.length>=n?t:Ks("0",n-t.length)+t}(e,n):function _ne(e,n){var t=""+e;return t.length>=n?t:Ks("0",n-t.length)+t}(Math.round(e),n)}function IS(e,n){return e.length>=7+(n=n||0)&&103==(32|e.charCodeAt(n))&&101==(32|e.charCodeAt(n+1))&&110==(32|e.charCodeAt(n+2))&&101==(32|e.charCodeAt(n+3))&&114==(32|e.charCodeAt(n+4))&&97==(32|e.charCodeAt(n+5))&&108==(32|e.charCodeAt(n+6))}var N6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],gP=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],Zn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},B6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},vne={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function PS(e,n,t){for(var r=e<0?-1:1,i=e*r,s=0,a=1,l=0,d=1,m=0,y=0,T=Math.floor(i);m<n&&(l=(T=Math.floor(i))*a+s,y=T*m+d,!(i-T<5e-8));)i=1/(i-T),s=a,a=l,d=m,m=y;if(y>n&&(m>n?(y=d,l=s):(y=m,l=a)),!t)return[0,r*l,y];var D=Math.floor(r*l/y);return[D,r*l-D*y,y]}function Pg(e,n,t){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,a=[],l={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),n&&n.date1904&&(r+=1462),l.u>.9999&&(l.u=0,86400==++i&&(l.T=i=0,++r,++l.D)),60===r)a=t?[1317,10,29]:[1900,2,29],s=3;else if(0===r)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var d=new Date(1900,0,1);d.setDate(d.getDate()+r-1),a=[d.getFullYear(),d.getMonth()+1,d.getDate()],s=d.getDay(),r<60&&(s=(s+6)%7),t&&(s=function Ene(e,n){n[0]-=581;var t=e.getDay();return e<60&&(t=(t+6)%7),t}(d,a))}return l.y=a[0],l.m=a[1],l.d=a[2],l.S=i%60,i=Math.floor(i/60),l.M=i%60,i=Math.floor(i/60),l.H=i,l.q=s,l}var z6=new Date(1899,11,31,0,0,0),xne=z6.getTime(),bne=new Date(1900,2,1,0,0,0);function V6(e,n){var t=e.getTime();return n?t-=1262304e5:e>=bne&&(t+=864e5),(t-(xne+6e4*(e.getTimezoneOffset()-z6.getTimezoneOffset())))/864e5}function _P(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Qw(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function Cne(e){var n=e<0?12:11,t=_P(e.toFixed(12));return t.length<=n||(t=e.toPrecision(10)).length<=n?t:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function Tne(e){var n=_P(e.toFixed(11));return n.length>(e<0?12:11)||"0"===n||"-0"===n?e.toPrecision(6):n}(e),_P(function wne(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function z_(e,n){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Qw(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return nu(14,V6(e,n&&n.date1904),n)}throw new Error("unsupported value in General format: "+e)}function Sne(e,n,t,r){var d,i="",s=0,a=0,l=t.y,m=0;switch(e){case 98:l=t.y+543;case 121:switch(n.length){case 1:case 2:d=l%100,m=2;break;default:d=l%1e4,m=4}break;case 109:switch(n.length){case 1:case 2:d=t.m,m=n.length;break;case 3:return gP[t.m-1][1];case 5:return gP[t.m-1][0];default:return gP[t.m-1][2]}break;case 100:switch(n.length){case 1:case 2:d=t.d,m=n.length;break;case 3:return N6[t.q][0];default:return N6[t.q][1]}break;case 104:switch(n.length){case 1:case 2:d=1+(t.H+11)%12,m=n.length;break;default:throw"bad hour format: "+n}break;case 72:switch(n.length){case 1:case 2:d=t.H,m=n.length;break;default:throw"bad hour format: "+n}break;case 77:switch(n.length){case 1:case 2:d=t.M,m=n.length;break;default:throw"bad minute format: "+n}break;case 115:if("s"!=n&&"ss"!=n&&".0"!=n&&".00"!=n&&".000"!=n)throw"bad second format: "+n;return 0!==t.u||"s"!=n&&"ss"!=n?(a=r>=2?3===r?1e3:100:1===r?10:1,(s=Math.round(a*(t.S+t.u)))>=60*a&&(s=0),"s"===n?0===s?"0":""+s/a:(i=Gh(s,2+r),"ss"===n?i.substr(0,2):"."+i.substr(2,n.length-1))):Gh(t.S,n.length);case 90:switch(n){case"[h]":case"[hh]":d=24*t.D+t.H;break;case"[m]":case"[mm]":d=60*(24*t.D+t.H)+t.M;break;case"[s]":case"[ss]":d=60*(60*(24*t.D+t.H)+t.M)+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+n}m=3===n.length?1:2;break;case 101:d=l,m=1}return m>0?Gh(d,m):""}function Og(e){if(e.length<=3)return e;for(var t=e.length%3,r=e.substr(0,t);t!=e.length;t+=3)r+=(r.length>0?",":"")+e.substr(t,3);return r}var U6=/%/g;function j6(e,n){var t,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==n)return"0.0E+0";if(n<0)return"-"+j6(e,-n);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(n)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(t=(n/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var a=Math.floor(Math.log(n)*Math.LOG10E);for(-1===t.indexOf(".")?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);"0."===t.substr(0,2);)t=(t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,m,y){return d+m+y.substr(0,(i+s)%i)+"."+y.substr(s)+"E"})}else t=n.toExponential(r);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var H6=/# (\?+)( ?)\/( ?)(\d+)/,$6=/^#*0*\.([0#]+)/,W6=/\).*[0#]/,G6=/\(###\) ###\\?-####/;function Hl(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function Y6(e,n){var t=Math.pow(10,n);return""+Math.round(e*t)/t}function q6(e,n){var t=e-Math.floor(e),r=Math.pow(10,n);return n<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Wu(e,n,t){if(40===e.charCodeAt(0)&&!n.match(W6)){var r=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Wu("n",r,t):"("+Wu("n",r,-t)+")"}if(44===n.charCodeAt(n.length-1))return function Mne(e,n,t){for(var r=n.length-1;44===n.charCodeAt(r-1);)--r;return Bp(e,n.substr(0,r),t/Math.pow(10,3*(n.length-r)))}(e,n,t);if(-1!==n.indexOf("%"))return function Dne(e,n,t){var r=n.replace(U6,""),i=n.length-r.length;return Bp(e,r,t*Math.pow(10,2*i))+Ks("%",i)}(e,n,t);if(-1!==n.indexOf("E"))return j6(n,t);if(36===n.charCodeAt(0))return"$"+Wu(e,n.substr(" "==n.charAt(1)?2:1),t);var i,s,a,l,d=Math.abs(t),m=t<0?"-":"";if(n.match(/^00+$/))return m+Lv(d,n.length);if(n.match(/^[#?]+$/))return"0"===(i=Lv(t,0))&&(i=""),i.length>n.length?i:Hl(n.substr(0,n.length-i.length))+i;if(s=n.match(H6))return function kne(e,n,t){var r=parseInt(e[4],10),i=Math.round(n*r),s=Math.floor(i/r),a=i-s*r,l=r;return t+(0===s?"":""+s)+" "+(0===a?Ks(" ",e[1].length+1+e[4].length):mP(a,e[1].length)+e[2]+"/"+e[3]+Gh(l,e[4].length))}(s,d,m);if(n.match(/^#+0+$/))return m+Lv(d,n.length-n.indexOf("0"));if(s=n.match($6))return i=Y6(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Hl(s[1])).replace(/\.$/,"."+Hl(s[1])).replace(/\.(\d*)$/,function(F,L){return"."+L+Ks("0",Hl(s[1]).length-L.length)}),-1!==n.indexOf("0.")?i:i.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),s=n.match(/^(0*)\.(#*)$/))return m+Y6(d,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=n.match(/^#{1,3},##0(\.?)$/))return m+Og(Lv(d,0));if(s=n.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Wu(e,n,-t):Og(""+(Math.floor(t)+function Ine(e,n){return n<(""+Math.round((e-Math.floor(e))*Math.pow(10,n))).length?1:0}(t,s[1].length)))+"."+Gh(q6(t,s[1].length),s[1].length);if(s=n.match(/^#,#*,#0/))return Wu(e,n.replace(/^#,#*,/,""),t);if(s=n.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ov(Wu(e,n.replace(/[\\-]/g,""),t)),a=0,Ov(Ov(n.replace(/\\/g,"")).replace(/[0#]/g,function(F){return a<i.length?i.charAt(a++):"0"===F?"0":""}));if(n.match(G6))return"("+(i=Wu(e,"##########",t)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var y="";if(s=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),l=PS(d,Math.pow(10,a)-1,!1),i=""+m," "==(y=Bp("n",s[1],l[1])).charAt(y.length-1)&&(y=y.substr(0,y.length-1)+"0"),i+=y+s[2]+"/"+s[3],(y=AS(l[2],a)).length<s[4].length&&(y=Hl(s[4].substr(s[4].length-y.length))+y),i+=y;if(s=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),m+((l=PS(d,Math.pow(10,a)-1,!0))[0]||(l[1]?"":"0"))+" "+(l[1]?mP(l[1],a)+s[2]+"/"+s[3]+AS(l[2],a):Ks(" ",2*a+1+s[2].length+s[3].length));if(s=n.match(/^[#0?]+$/))return i=Lv(t,0),n.length<=i.length?i:Hl(n.substr(0,n.length-i.length))+i;if(s=n.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var T=n.indexOf(".")-a,D=n.length-i.length-T;return Hl(n.substr(0,T)+i+n.substr(n.length-D))}if(s=n.match(/^00,000\.([#0]*0)$/))return a=q6(t,s[1].length),t<0?"-"+Wu(e,n,-t):Og(function Pne(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(F){return"00,"+(F.length<3?Gh(0,3-F.length):"")+F})+"."+Gh(a,s[1].length);switch(n){case"###,##0.00":return Wu(e,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var I=Og(Lv(d,0));return"0"!==I?m+I:"";case"###,###.00":return Wu(e,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Wu(e,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+n+"|")}function X6(e,n){var t,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==n)return"0.0E+0";if(n<0)return"-"+X6(e,-n);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(n)*Math.LOG10E)%i;if(s<0&&(s+=i),!(t=(n/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(n)*Math.LOG10E);-1===t.indexOf(".")?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,m,y){return d+m+y.substr(0,(i+s)%i)+"."+y.substr(s)+"E"})}else t=n.toExponential(r);return e.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),e.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function af(e,n,t){if(40===e.charCodeAt(0)&&!n.match(W6)){var r=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?af("n",r,t):"("+af("n",r,-t)+")"}if(44===n.charCodeAt(n.length-1))return function One(e,n,t){for(var r=n.length-1;44===n.charCodeAt(r-1);)--r;return Bp(e,n.substr(0,r),t/Math.pow(10,3*(n.length-r)))}(e,n,t);if(-1!==n.indexOf("%"))return function Lne(e,n,t){var r=n.replace(U6,""),i=n.length-r.length;return Bp(e,r,t*Math.pow(10,2*i))+Ks("%",i)}(e,n,t);if(-1!==n.indexOf("E"))return X6(n,t);if(36===n.charCodeAt(0))return"$"+af(e,n.substr(" "==n.charAt(1)?2:1),t);var i,s,a,l,d=Math.abs(t),m=t<0?"-":"";if(n.match(/^00+$/))return m+Gh(d,n.length);if(n.match(/^[#?]+$/))return i=""+t,0===t&&(i=""),i.length>n.length?i:Hl(n.substr(0,n.length-i.length))+i;if(s=n.match(H6))return function Ane(e,n,t){return t+(0===n?"":""+n)+Ks(" ",e[1].length+2+e[4].length)}(s,d,m);if(n.match(/^#+0+$/))return m+Gh(d,n.length-n.indexOf("0"));if(s=n.match($6))return i=(i=(""+t).replace(/^([^\.]+)$/,"$1."+Hl(s[1])).replace(/\.$/,"."+Hl(s[1]))).replace(/\.(\d*)$/,function(F,L){return"."+L+Ks("0",Hl(s[1]).length-L.length)}),-1!==n.indexOf("0.")?i:i.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),s=n.match(/^(0*)\.(#*)$/))return m+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=n.match(/^#{1,3},##0(\.?)$/))return m+Og(""+d);if(s=n.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+af(e,n,-t):Og(""+t)+"."+Ks("0",s[1].length);if(s=n.match(/^#,#*,#0/))return af(e,n.replace(/^#,#*,/,""),t);if(s=n.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ov(af(e,n.replace(/[\\-]/g,""),t)),a=0,Ov(Ov(n.replace(/\\/g,"")).replace(/[0#]/g,function(F){return a<i.length?i.charAt(a++):"0"===F?"0":""}));if(n.match(G6))return"("+(i=af(e,"##########",t)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var y="";if(s=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),l=PS(d,Math.pow(10,a)-1,!1),i=""+m," "==(y=Bp("n",s[1],l[1])).charAt(y.length-1)&&(y=y.substr(0,y.length-1)+"0"),i+=y+s[2]+"/"+s[3],(y=AS(l[2],a)).length<s[4].length&&(y=Hl(s[4].substr(s[4].length-y.length))+y),i+=y;if(s=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),m+((l=PS(d,Math.pow(10,a)-1,!0))[0]||(l[1]?"":"0"))+" "+(l[1]?mP(l[1],a)+s[2]+"/"+s[3]+AS(l[2],a):Ks(" ",2*a+1+s[2].length+s[3].length));if(s=n.match(/^[#0?]+$/))return n.length<=(i=""+t).length?i:Hl(n.substr(0,n.length-i.length))+i;if(s=n.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var T=n.indexOf(".")-a,D=n.length-i.length-T;return Hl(n.substr(0,T)+i+n.substr(n.length-D))}if(s=n.match(/^00,000\.([#0]*0)$/))return t<0?"-"+af(e,n,-t):Og(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(F){return"00,"+(F.length<3?Gh(0,3-F.length):"")+F})+"."+Gh(0,s[1].length);switch(n){case"###,###":case"##,###":case"#,###":var I=Og(""+d);return"0"!==I?m+I:"";default:if(n.match(/\.[0#?]*$/))return af(e,n.slice(0,n.lastIndexOf(".")),t)+Hl(n.slice(n.lastIndexOf(".")))}throw new Error("unsupported format |"+n+"|")}function Bp(e,n,t){return(0|t)===t?af(e,n,t):Wu(e,n,t)}var Z6=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function V_(e){for(var n=0,t="",r="";n<e.length;)switch(t=e.charAt(n)){case"G":IS(e,n)&&(n+=6),n++;break;case'"':for(;34!==e.charCodeAt(++n)&&n<e.length;);++n;break;case"\\":case"_":n+=2;break;case"@":++n;break;case"B":case"b":if("1"===e.charAt(n+1)||"2"===e.charAt(n+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(n,3).toUpperCase()||"AM/PM"===e.substr(n,5).toUpperCase()||"\u4e0a\u5348/\u4e0b\u5348"===e.substr(n,5).toUpperCase())return!0;++n;break;case"[":for(r=t;"]"!==e.charAt(n++)&&n<e.length;)r+=e.charAt(n);if(r.match(Z6))return!0;break;case".":case"0":case"#":for(;n<e.length&&("0#?.,E+-%".indexOf(t=e.charAt(++n))>-1||"\\"==t&&"-"==e.charAt(n+1)&&"0#".indexOf(e.charAt(n+2))>-1););break;case"?":for(;e.charAt(++n)===t;);break;case"*":++n,(" "==e.charAt(n)||"*"==e.charAt(n))&&++n;break;case"(":case")":++n;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;n<e.length&&"0123456789".indexOf(e.charAt(++n))>-1;);break;default:++n}return!1}var K6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function J6(e,n){if(null==n)return!1;var t=parseFloat(n[2]);switch(n[1]){case"=":if(e==t)return!0;break;case">":if(e>t)return!0;break;case"<":if(e<t)return!0;break;case"<>":if(e!=t)return!0;break;case">=":if(e>=t)return!0;break;case"<=":if(e<=t)return!0}return!1}function nu(e,n,t){null==t&&(t={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&t.dateNF?t.dateNF:e;break;case"number":null==(r=14==e&&t.dateNF?t.dateNF:(null!=t.table?t.table:Zn)[e])&&(r=t.table&&t.table[B6[e]]||Zn[B6[e]]),null==r&&(r=vne[e]||"General")}if(IS(r,0))return z_(n,t);n instanceof Date&&(n=V6(n,t.date1904));var i=function Nne(e,n){var t=function Fne(e){for(var n=[],t=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:n[n.length]=e.substr(i,r-i),i=r+1}if(n[n.length]=e.substr(i),!0===t)throw new Error("Format |"+e+"| unterminated string ");return n}(e),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if("number"!=typeof n)return[4,4===t.length||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"]}var s=n>0?t[0]:n<0?t[1]:t[2];if(-1===t[0].indexOf("[")&&-1===t[1].indexOf("["))return[r,s];if(null!=t[0].match(/\[[=<>]/)||null!=t[1].match(/\[[=<>]/)){var a=t[0].match(K6),l=t[1].match(K6);return J6(n,a)?[r,t[0]]:J6(n,l)?[r,t[1]]:[r,t[null!=a&&null!=l?2:1]]}return[r,s]}(r,n);if(IS(i[1]))return z_(n,t);if(!0===n)n="TRUE";else if(!1===n)n="FALSE";else if(""===n||null==n)return"";return function Rne(e,n,t,r){for(var m,y,T,i=[],s="",a=0,l="",d="t",D="H";a<e.length;)switch(l=e.charAt(a)){case"G":if(!IS(e,a))throw new Error("unrecognized character "+l+" in "+e);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";34!==(T=e.charCodeAt(++a))&&a<e.length;)s+=String.fromCharCode(T);i[i.length]={t:"t",v:s},++a;break;case"\\":var I=e.charAt(++a);i[i.length]={t:"("===I||")"===I?I:"t",v:I},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:n},++a;break;case"B":case"b":if("1"===e.charAt(a+1)||"2"===e.charAt(a+1)){if(null==m&&null==(m=Pg(n,t,"2"===e.charAt(a+1))))return"";i[i.length]={t:"X",v:e.substr(a,2)},d=l,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(n<0||null==m&&null==(m=Pg(n,t)))return"";for(s=l;++a<e.length&&e.charAt(a).toLowerCase()===l;)s+=l;"m"===l&&"h"===d.toLowerCase()&&(l="M"),"h"===l&&(l=D),i[i.length]={t:l,v:s},d=l;break;case"A":case"a":case"\u4e0a":var L={t:l,v:l};if(null==m&&(m=Pg(n,t)),"A/P"===e.substr(a,3).toUpperCase()?(null!=m&&(L.v=m.H>=12?"P":"A"),L.t="T",D="h",a+=3):"AM/PM"===e.substr(a,5).toUpperCase()?(null!=m&&(L.v=m.H>=12?"PM":"AM"),L.t="T",a+=5,D="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(a,5).toUpperCase()?(null!=m&&(L.v=m.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),L.t="T",a+=5,D="h"):(L.t="t",++a),null==m&&"T"===L.t)return"";i[i.length]=L,d=l;break;case"[":for(s=l;"]"!==e.charAt(a++)&&a<e.length;)s+=e.charAt(a);if("]"!==s.slice(-1))throw'unterminated "[" block: |'+s+"|";if(s.match(Z6)){if(null==m&&null==(m=Pg(n,t)))return"";i[i.length]={t:"Z",v:s.toLowerCase()},d=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",V_(e)||(i[i.length]={t:"t",v:s}));break;case".":if(null!=m){for(s=l;++a<e.length&&"0"===(l=e.charAt(a));)s+=l;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++a<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(a))>-1;)s+=l;i[i.length]={t:"n",v:s};break;case"?":for(s=l;e.charAt(++a)===l;)s+=l;i[i.length]={t:l,v:s},d=l;break;case"*":++a,(" "==e.charAt(a)||"*"==e.charAt(a))&&++a;break;case"(":case")":i[i.length]={t:1===r?"t":l,v:l},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;a<e.length&&"0123456789".indexOf(e.charAt(++a))>-1;)s+=e.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:l,v:l},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(l))throw new Error("unrecognized character "+l+" in "+e);i[i.length]={t:"t",v:l},++a}var Z,B=0,G=0;for(a=i.length-1,d="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=D,d="h",B<1&&(B=1);break;case"s":(Z=i[a].v.match(/\.0+$/))&&(G=Math.max(G,Z[0].length-1)),B<3&&(B=3);case"d":case"y":case"M":case"e":d=i[a].t;break;case"m":"s"===d&&(i[a].t="M",B<2&&(B=2));break;case"X":break;case"Z":B<1&&i[a].v.match(/[Hh]/)&&(B=1),B<2&&i[a].v.match(/[Mm]/)&&(B=2),B<3&&i[a].v.match(/[Ss]/)&&(B=3)}switch(B){case 0:break;case 1:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M),m.M>=60&&(m.M=0,++m.H);break;case 2:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M)}var oe,q="";for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=Sne(i[a].t.charCodeAt(0),i[a].v,m,G),i[a].t="t";break;case"n":case"?":for(oe=a+1;null!=i[oe]&&("?"===(l=i[oe].t)||"D"===l||(" "===l||"t"===l)&&null!=i[oe+1]&&("?"===i[oe+1].t||"t"===i[oe+1].t&&"/"===i[oe+1].v)||"("===i[a].t&&(" "===l||"n"===l||")"===l)||"t"===l&&("/"===i[oe].v||" "===i[oe].v&&null!=i[oe+1]&&"?"==i[oe+1].t));)i[a].v+=i[oe].v,i[oe]={v:"",t:";"},++oe;q+=i[a].v,a=oe-1;break;case"G":i[a].t="t",i[a].v=z_(n,t)}var fe,ae,_e="";if(q.length>0){40==q.charCodeAt(0)?(fe=n<0&&45===q.charCodeAt(0)?-n:n,ae=Bp("n",q,fe)):(ae=Bp("n",q,fe=n<0&&r>1?-n:n),fe<0&&i[0]&&"t"==i[0].t&&(ae=ae.substr(1),i[0].v="-"+i[0].v)),oe=ae.length-1;var De=i.length;for(a=0;a<i.length;++a)if(null!=i[a]&&"t"!=i[a].t&&i[a].v.indexOf(".")>-1){De=a;break}var Ie=i.length;if(De===i.length&&-1===ae.indexOf("E")){for(a=i.length-1;a>=0;--a)null==i[a]||-1==="n?".indexOf(i[a].t)||(oe>=i[a].v.length-1?i[a].v=ae.substr(1+(oe-=i[a].v.length),i[a].v.length):oe<0?i[a].v="":(i[a].v=ae.substr(0,oe+1),oe=-1),i[a].t="t",Ie=a);oe>=0&&Ie<i.length&&(i[Ie].v=ae.substr(0,oe+1)+i[Ie].v)}else if(De!==i.length&&-1===ae.indexOf("E")){for(oe=ae.indexOf(".")-1,a=De;a>=0;--a)if(null!=i[a]&&-1!=="n?".indexOf(i[a].t)){for(y=i[a].v.indexOf(".")>-1&&a===De?i[a].v.indexOf(".")-1:i[a].v.length-1,_e=i[a].v.substr(y+1);y>=0;--y)oe>=0&&("0"===i[a].v.charAt(y)||"#"===i[a].v.charAt(y))&&(_e=ae.charAt(oe--)+_e);i[a].v=_e,i[a].t="t",Ie=a}for(oe>=0&&Ie<i.length&&(i[Ie].v=ae.substr(0,oe+1)+i[Ie].v),oe=ae.indexOf(".")+1,a=De;a<i.length;++a)if(null!=i[a]&&(-1!=="n?(".indexOf(i[a].t)||a===De)){for(y=i[a].v.indexOf(".")>-1&&a===De?i[a].v.indexOf(".")+1:0,_e=i[a].v.substr(0,y);y<i[a].v.length;++y)oe<ae.length&&(_e+=ae.charAt(oe++));i[a].v=_e,i[a].t="t",Ie=a}}}for(a=0;a<i.length;++a)null!=i[a]&&"n?".indexOf(i[a].t)>-1&&(i[a].v=Bp(i[a].t,i[a].v,fe=r>1&&n<0&&a>0&&"-"===i[a-1].v?-n:n),i[a].t="t");var qe="";for(a=0;a!==i.length;++a)null!=i[a]&&(qe+=i[a].v);return qe}(i[1],n,t,i[0])}function lf(e,n){if("number"!=typeof n){n=+n||-1;for(var t=0;t<392;++t)if(null!=Zn[t]){if(Zn[t]==e){n=t;break}}else n<0&&(n=t);n<0&&(n=391)}return Zn[n]=e,n}function Fv(){Zn=function yne(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',e}()}var zne={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Q6=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,jne=function(){var e={version:"1.2.0"},t=function n(){for(var ae=0,De=new Array(256),Ie=0;256!=Ie;++Ie)De[Ie]=ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=Ie)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1;return typeof Int32Array<"u"?new Int32Array(De):De}(),i=function r(ae){var De=0,Ie=0,qe=0,Je=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(qe=0;256!=qe;++qe)Je[qe]=ae[qe];for(qe=0;256!=qe;++qe)for(Ie=ae[qe],De=256+qe;De<4096;De+=256)Ie=Je[De]=Ie>>>8^ae[255&Ie];var $e=[];for(qe=1;16!=qe;++qe)$e[qe-1]=typeof Int32Array<"u"?Je.subarray(256*qe,256*qe+256):Je.slice(256*qe,256*qe+256);return $e}(t),s=i[0],a=i[1],l=i[2],d=i[3],m=i[4],y=i[5],T=i[6],D=i[7],I=i[8],F=i[9],L=i[10],B=i[11],G=i[12],Z=i[13],q=i[14];return e.table=t,e.bstr=function oe(ae,De){for(var Ie=-1^De,qe=0,Je=ae.length;qe<Je;)Ie=Ie>>>8^t[255&(Ie^ae.charCodeAt(qe++))];return~Ie},e.buf=function _e(ae,De){for(var Ie=-1^De,qe=ae.length-15,Je=0;Je<qe;)Ie=q[ae[Je++]^255&Ie]^Z[ae[Je++]^Ie>>8&255]^G[ae[Je++]^Ie>>16&255]^B[ae[Je++]^Ie>>>24]^L[ae[Je++]]^F[ae[Je++]]^I[ae[Je++]]^D[ae[Je++]]^T[ae[Je++]]^y[ae[Je++]]^m[ae[Je++]]^d[ae[Je++]]^l[ae[Je++]]^a[ae[Je++]]^s[ae[Je++]]^t[ae[Je++]];for(qe+=15;Je<qe;)Ie=Ie>>>8^t[255&(Ie^ae[Je++])];return~Ie},e.str=function fe(ae,De){for(var Ie=-1^De,qe=0,Je=ae.length,$e=0,jt=0;qe<Je;)($e=ae.charCodeAt(qe++))<128?Ie=Ie>>>8^t[255&(Ie^$e)]:$e<2048?Ie=(Ie=Ie>>>8^t[255&(Ie^(192|$e>>6&31))])>>>8^t[255&(Ie^(128|63&$e))]:$e>=55296&&$e<57344?($e=64+(1023&$e),jt=1023&ae.charCodeAt(qe++),Ie=(Ie=(Ie=(Ie=Ie>>>8^t[255&(Ie^(240|$e>>8&7))])>>>8^t[255&(Ie^(128|$e>>2&63))])>>>8^t[255&(Ie^(128|jt>>6&15|(3&$e)<<4))])>>>8^t[255&(Ie^(128|63&jt))]):Ie=(Ie=(Ie=Ie>>>8^t[255&(Ie^(224|$e>>12&15))])>>>8^t[255&(Ie^(128|$e>>6&63))])>>>8^t[255&(Ie^(128|63&$e))];return~Ie},e}(),Xn=function(){var d,n={};function r(ie){if("/"==ie.charAt(ie.length-1))return-1===ie.slice(0,-1).indexOf("/")?ie:r(ie.slice(0,-1));var Se=ie.lastIndexOf("/");return-1===Se?ie:ie.slice(0,Se+1)}function i(ie){if("/"==ie.charAt(ie.length-1))return i(ie.slice(0,-1));var Se=ie.lastIndexOf("/");return-1===Se?ie:ie.slice(Se+1)}function s(ie,Se){"string"==typeof Se&&(Se=new Date(Se));var ye=Se.getHours();ye=(ye=ye<<6|Se.getMinutes())<<5|Se.getSeconds()>>>1,ie.write_shift(2,ye);var we=Se.getFullYear()-1980;we=(we=we<<4|Se.getMonth()+1)<<5|Se.getDate(),ie.write_shift(2,we)}function l(ie){Wa(ie,0);for(var Se={},ye=0;ie.l<=ie.length-4;){var we=ie.read_shift(2),Me=ie.read_shift(2),Ae=ie.l+Me,dt={};21589===we&&(1&(ye=ie.read_shift(1))&&(dt.mtime=ie.read_shift(4)),Me>5&&(2&ye&&(dt.atime=ie.read_shift(4)),4&ye&&(dt.ctime=ie.read_shift(4))),dt.mtime&&(dt.mt=new Date(1e3*dt.mtime))),ie.l=Ae,Se[we]=dt}return Se}function m(){return d||(d={})}function y(ie,Se){if(80==ie[0]&&75==ie[1])return nW(ie,Se);if(109==(32|ie[0])&&105==(32|ie[1]))return function ike(ie,Se){if("mime-version:"!=Pt(ie.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var ye=Se&&Se.root||"",we=(Hr&&Buffer.isBuffer(ie)?ie.toString("binary"):Pt(ie)).split("\r\n"),Me=0,Ae="";for(Me=0;Me<we.length;++Me)if(/^Content-Location:/i.test(Ae=we[Me])&&(Ae=Ae.slice(Ae.indexOf("file")),ye||(ye=Ae.slice(0,Ae.lastIndexOf("/")+1)),Ae.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=(ye=ye.slice(0,ye.length-1)).slice(0,ye.lastIndexOf("/")+1),Ae.slice(0,ye.length)!=ye););var dt=(we[1]||"").match(/boundary="(.*?)"/);if(!dt)throw new Error("MAD cannot find boundary");var Lt="--"+(dt[1]||""),vt={FileIndex:[],FullPaths:[]};ae(vt);var nn,dn=0;for(Me=0;Me<we.length;++Me){var Rn=we[Me];Rn!==Lt&&Rn!==Lt+"--"||(dn++&&rke(vt,we.slice(nn,Me),ye),nn=Me)}return vt}(ie,Se);if(ie.length<512)throw new Error("CFB file size "+ie.length+" < 512");var ye,Me,Ae,dt,Lt,gt,we=512,pt=[],vt=ie.slice(0,512);Wa(vt,0);var nn=function T(ie){if(80==ie[ie.l]&&75==ie[ie.l+1])return[0,0];ie.chk(ln,"Header Signature: "),ie.l+=16;var Se=ie.read_shift(2,"u");return[ie.read_shift(2,"u"),Se]}(vt);switch(ye=nn[0]){case 3:we=512;break;case 4:we=4096;break;case 0:if(0==nn[1])return nW(ie,Se);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}512!==we&&Wa(vt=ie.slice(0,we),28);var dn=ie.slice(0,we);!function D(ie,Se){var ye;switch(ie.l+=2,ye=ie.read_shift(2)){case 9:if(3!=Se)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(4!=Se)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}ie.chk("0600","Mini Sector Shift: "),ie.chk("000000000000","Reserved: ")}(vt,ye);var Rn=vt.read_shift(4,"i");if(3===ye&&0!==Rn)throw new Error("# Directory Sectors: Expected 0 saw "+Rn);vt.l+=4,dt=vt.read_shift(4,"i"),vt.l+=4,vt.chk("00100000","Mini Stream Cutoff Size: "),Lt=vt.read_shift(4,"i"),Me=vt.read_shift(4,"i"),gt=vt.read_shift(4,"i"),Ae=vt.read_shift(4,"i");for(var fn=-1,xn=0;xn<109&&!((fn=vt.read_shift(4,"i"))<0);++xn)pt[xn]=fn;var Sr=function I(ie,Se){for(var ye=Math.ceil(ie.length/Se)-1,we=[],Me=1;Me<ye;++Me)we[Me-1]=ie.slice(Me*Se,(Me+1)*Se);return we[ye-1]=ie.slice(ye*Se),we}(ie,we);B(gt,Ae,Sr,we,pt);var Ms=function Z(ie,Se,ye,we){var Me=ie.length,Ae=[],dt=[],Lt=[],gt=[],pt=we-1,vt=0,nn=0,dn=0,Rn=0;for(vt=0;vt<Me;++vt)if(Lt=[],(dn=vt+Se)>=Me&&(dn-=Me),!dt[dn]){gt=[];var fn=[];for(nn=dn;nn>=0;){fn[nn]=!0,dt[nn]=!0,Lt[Lt.length]=nn,gt.push(ie[nn]);var xn=ye[Math.floor(4*nn/we)];if(we<4+(Rn=4*nn&pt))throw new Error("FAT boundary crossed: "+nn+" 4 "+we);if(!ie[xn]||fn[nn=j_(ie[xn],Rn)])break}Ae[dn]={nodes:Lt,data:wz([gt])}}return Ae}(Sr,dt,pt,we);Ms[dt].name="!Directory",Me>0&&Lt!==jt&&(Ms[Lt].name="!MiniFAT"),Ms[pt[0]].name="!FAT",Ms.fat_addrs=pt,Ms.ssz=we;var qo=[],fu=[],kC=[];(function q(ie,Se,ye,we,Me,Ae,dt,Lt){for(var Rn,gt=0,pt=we.length?2:0,vt=Se[ie].data,nn=0,dn=0;nn<vt.length;nn+=128){var fn=vt.slice(nn,nn+128);Wa(fn,64),dn=fn.read_shift(2),Rn=BS(fn,0,dn-pt),we.push(Rn);var xn={name:Rn,type:fn.read_shift(1),color:fn.read_shift(1),L:fn.read_shift(4,"i"),R:fn.read_shift(4,"i"),C:fn.read_shift(4,"i"),clsid:fn.read_shift(16),state:fn.read_shift(4,"i"),start:0,size:0};0!==fn.read_shift(2)+fn.read_shift(2)+fn.read_shift(2)+fn.read_shift(2)&&(xn.ct=oe(fn,fn.l-8)),0!==fn.read_shift(2)+fn.read_shift(2)+fn.read_shift(2)+fn.read_shift(2)&&(xn.mt=oe(fn,fn.l-8)),xn.start=fn.read_shift(4,"i"),xn.size=fn.read_shift(4,"i"),xn.size<0&&xn.start<0&&(xn.size=xn.type=0,xn.start=jt,xn.name=""),5===xn.type?(gt=xn.start,Me>0&&gt!==jt&&(Se[gt].name="!StreamData")):xn.size>=4096?(xn.storage="fat",void 0===Se[xn.start]&&(Se[xn.start]=G(ye,xn.start,Se.fat_addrs,Se.ssz)),Se[xn.start].name=xn.name,xn.content=Se[xn.start].data.slice(0,xn.size)):(xn.storage="minifat",xn.size<0?xn.size=0:gt!==jt&&xn.start!==jt&&Se[gt]&&(xn.content=L(xn,Se[gt].data,(Se[Lt]||{}).data))),xn.content&&Wa(xn.content,0),Ae[Rn]=xn,dt.push(xn)}})(dt,Ms,Sr,qo,Me,{},fu,Lt),function F(ie,Se,ye){for(var we=0,Me=0,Ae=0,dt=0,Lt=0,gt=ye.length,pt=[],vt=[];we<gt;++we)pt[we]=vt[we]=we,Se[we]=ye[we];for(;Lt<vt.length;++Lt)Me=ie[we=vt[Lt]].L,Ae=ie[we].R,dt=ie[we].C,pt[we]===we&&(-1!==Me&&pt[Me]!==Me&&(pt[we]=pt[Me]),-1!==Ae&&pt[Ae]!==Ae&&(pt[we]=pt[Ae])),-1!==dt&&(pt[dt]=we),-1!==Me&&we!=pt[we]&&(pt[Me]=pt[we],vt.lastIndexOf(Me)<Lt&&vt.push(Me)),-1!==Ae&&we!=pt[we]&&(pt[Ae]=pt[we],vt.lastIndexOf(Ae)<Lt&&vt.push(Ae));for(we=1;we<gt;++we)pt[we]===we&&(-1!==Ae&&pt[Ae]!==Ae?pt[we]=pt[Ae]:-1!==Me&&pt[Me]!==Me&&(pt[we]=pt[Me]));for(we=1;we<gt;++we)if(0!==ie[we].type){if((Lt=we)!=pt[Lt])do{Se[we]=Se[Lt=pt[Lt]]+"/"+Se[we]}while(0!==Lt&&-1!==pt[Lt]&&Lt!=pt[Lt]);pt[we]=-1}for(Se[0]+="/",we=1;we<gt;++we)2!==ie[we].type&&(Se[we]+="/")}(fu,kC,qo),qo.shift();var AC={FileIndex:fu,FullPaths:kC};return Se&&Se.raw&&(AC.raw={header:dn,sectors:Sr}),AC}function L(ie,Se,ye){for(var Me=ie.size,Ae=[],dt=ie.start;ye&&Me>0&&dt>=0;)Ae.push(Se.slice(dt*$e,dt*$e+$e)),Me-=$e,dt=j_(ye,4*dt);return 0===Ae.length?At(0):wa(Ae).slice(0,ie.size)}function B(ie,Se,ye,we,Me){var Ae=jt;if(ie===jt){if(0!==Se)throw new Error("DIFAT chain shorter than expected")}else if(-1!==ie){var dt=ye[ie],Lt=(we>>>2)-1;if(!dt)return;for(var gt=0;gt<Lt&&(Ae=j_(dt,4*gt))!==jt;++gt)Me.push(Ae);B(j_(dt,we-4),Se-1,ye,we,Me)}}function G(ie,Se,ye,we,Me){var Ae=[],dt=[];Me||(Me=[]);var Lt=we-1,gt=0,pt=0;for(gt=Se;gt>=0;){Me[gt]=!0,Ae[Ae.length]=gt,dt.push(ie[gt]);var vt=ye[Math.floor(4*gt/we)];if(we<4+(pt=4*gt&Lt))throw new Error("FAT boundary crossed: "+gt+" 4 "+we);if(!ie[vt])break;gt=j_(ie[vt],pt)}return{nodes:Ae,data:wz([dt])}}function oe(ie,Se){return new Date(1e3*(Ca(ie,Se+4)/1e7*Math.pow(2,32)+Ca(ie,Se)/1e7-11644473600))}function ae(ie,Se){var ye=Se||{},we=ye.root||"Root Entry";if(ie.FullPaths||(ie.FullPaths=[]),ie.FileIndex||(ie.FileIndex=[]),ie.FullPaths.length!==ie.FileIndex.length)throw new Error("inconsistent CFB structure");0===ie.FullPaths.length&&(ie.FullPaths[0]=we+"/",ie.FileIndex[0]={name:we,type:5}),ye.CLSID&&(ie.FileIndex[0].clsid=ye.CLSID),function De(ie){var Se="\x01Sh33tJ5";if(!Xn.find(ie,"/"+Se)){var ye=At(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,ie.FileIndex.push({name:Se,type:2,content:ye,size:4,L:69,R:69,C:69}),ie.FullPaths.push(ie.FullPaths[0]+Se),Ie(ie)}}(ie)}function Ie(ie,Se){ae(ie);for(var ye=!1,we=!1,Me=ie.FullPaths.length-1;Me>=0;--Me){var Ae=ie.FileIndex[Me];switch(Ae.type){case 0:we?ye=!0:(ie.FileIndex.pop(),ie.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Ae.R*Ae.L*Ae.C)&&(ye=!0),Ae.R>-1&&Ae.L>-1&&Ae.R==Ae.L&&(ye=!0);break;default:ye=!0}}if(ye||Se){var dt=new Date(1987,1,19),Lt=0,gt=Object.create?Object.create(null):{},pt=[];for(Me=0;Me<ie.FullPaths.length;++Me)gt[ie.FullPaths[Me]]=!0,0!==ie.FileIndex[Me].type&&pt.push([ie.FullPaths[Me],ie.FileIndex[Me]]);for(Me=0;Me<pt.length;++Me){var vt=r(pt[Me][0]);(we=gt[vt])||(pt.push([vt,{name:i(vt).replace("/",""),type:1,clsid:yt,ct:dt,mt:dt,content:null}]),gt[vt]=!0)}for(pt.sort(function(Rn,fn){return function t(ie,Se){for(var ye=ie.split("/"),we=Se.split("/"),Me=0,Ae=0,dt=Math.min(ye.length,we.length);Me<dt;++Me){if(Ae=ye[Me].length-we[Me].length)return Ae;if(ye[Me]!=we[Me])return ye[Me]<we[Me]?-1:1}return ye.length-we.length}(Rn[0],fn[0])}),ie.FullPaths=[],ie.FileIndex=[],Me=0;Me<pt.length;++Me)ie.FullPaths[Me]=pt[Me][0],ie.FileIndex[Me]=pt[Me][1];for(Me=0;Me<pt.length;++Me){var nn=ie.FileIndex[Me],dn=ie.FullPaths[Me];if(nn.name=i(dn).replace("/",""),nn.L=nn.R=nn.C=-(nn.color=1),nn.size=nn.content?nn.content.length:0,nn.start=0,nn.clsid=nn.clsid||yt,0===Me)nn.C=pt.length>1?1:-1,nn.size=0,nn.type=5;else if("/"==dn.slice(-1)){for(Lt=Me+1;Lt<pt.length&&r(ie.FullPaths[Lt])!=dn;++Lt);for(nn.C=Lt>=pt.length?-1:Lt,Lt=Me+1;Lt<pt.length&&r(ie.FullPaths[Lt])!=r(dn);++Lt);nn.R=Lt>=pt.length?-1:Lt,nn.type=1}else r(ie.FullPaths[Me+1]||"")==r(dn)&&(nn.R=Me+1),nn.type=2}}}function qe(ie,Se){var ye=Se||{};if("mad"==ye.fileType)return function ske(ie,Se){for(var ye=Se||{},we=ye.boundary||"SheetJS",Me=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(we="------="+we).slice(2)+'"',"","",""],Ae=ie.FullPaths[0],dt=Ae,Lt=ie.FileIndex[0],gt=1;gt<ie.FullPaths.length;++gt)if(dt=ie.FullPaths[gt].slice(Ae.length),(Lt=ie.FileIndex[gt]).size&&Lt.content&&"\x01Sh33tJ5"!=dt){dt=dt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var pt=Lt.content,vt=Hr&&Buffer.isBuffer(pt)?pt.toString("binary"):Pt(pt),nn=0,dn=Math.min(1024,vt.length),Rn=0,fn=0;fn<=dn;++fn)(Rn=vt.charCodeAt(fn))>=32&&Rn<128&&++nn;var xn=nn>=4*dn/5;Me.push(we),Me.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+dt),Me.push("Content-Transfer-Encoding: "+(xn?"quoted-printable":"base64")),Me.push("Content-Type: "+QMe(Lt,dt)),Me.push(""),Me.push(xn?tke(vt):eke(vt))}return Me.push(we+"--\r\n"),Me.join("\r\n")}(ie,ye);if("zip"===(Ie(ie),ye.fileType))return function JMe(ie,Se){var ye=Se||{},we=[],Me=[],Ae=At(1),dt=ye.compression?8:0,Lt=0,pt=0,vt=0,nn=0,dn=0,Rn=ie.FullPaths[0],fn=Rn,xn=ie.FileIndex[0],Sr=[],Ms=0;for(pt=1;pt<ie.FullPaths.length;++pt)if(fn=ie.FullPaths[pt].slice(Rn.length),(xn=ie.FileIndex[pt]).size&&xn.content&&"\x01Sh33tJ5"!=fn){var Sc=nn,qo=At(fn.length);for(vt=0;vt<fn.length;++vt)qo.write_shift(1,127&fn.charCodeAt(vt));qo=qo.slice(0,qo.l),Sr[dn]=jne.buf(xn.content,0);var fu=xn.content;8==dt&&(fu=Re(fu)),(Ae=At(30)).write_shift(4,67324752),Ae.write_shift(2,20),Ae.write_shift(2,Lt),Ae.write_shift(2,dt),xn.mt?s(Ae,xn.mt):Ae.write_shift(4,0),Ae.write_shift(-4,8&Lt?0:Sr[dn]),Ae.write_shift(4,8&Lt?0:fu.length),Ae.write_shift(4,8&Lt?0:xn.content.length),Ae.write_shift(2,qo.length),Ae.write_shift(2,0),nn+=Ae.length,we.push(Ae),nn+=qo.length,we.push(qo),nn+=fu.length,we.push(fu),8&Lt&&((Ae=At(12)).write_shift(-4,Sr[dn]),Ae.write_shift(4,fu.length),Ae.write_shift(4,xn.content.length),nn+=Ae.l,we.push(Ae)),(Ae=At(46)).write_shift(4,33639248),Ae.write_shift(2,0),Ae.write_shift(2,20),Ae.write_shift(2,Lt),Ae.write_shift(2,dt),Ae.write_shift(4,0),Ae.write_shift(-4,Sr[dn]),Ae.write_shift(4,fu.length),Ae.write_shift(4,xn.content.length),Ae.write_shift(2,qo.length),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(4,0),Ae.write_shift(4,Sc),Ms+=Ae.l,Me.push(Ae),Ms+=qo.length,Me.push(qo),++dn}return(Ae=At(22)).write_shift(4,101010256),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,dn),Ae.write_shift(2,dn),Ae.write_shift(4,Ms),Ae.write_shift(4,nn),Ae.write_shift(2,0),wa([wa(we),wa(Me),Ae])}(ie,ye);var we=function(Rn){for(var fn=0,xn=0,Sr=0;Sr<Rn.FileIndex.length;++Sr){var Ms=Rn.FileIndex[Sr];if(Ms.content){var Sc=Ms.content.length;Sc>0&&(Sc<4096?fn+=Sc+63>>6:xn+=Sc+511>>9)}}for(var qo=Rn.FullPaths.length+3>>2,kC=fn+127>>7,AC=(fn+7>>3)+xn+qo+kC,Ny=AC+127>>7,dF=Ny<=109?0:Math.ceil((Ny-109)/127);AC+Ny+dF+127>>7>Ny;)dF=++Ny<=109?0:Math.ceil((Ny-109)/127);var cm=[1,dF,Ny,kC,qo,xn,fn,0];return Rn.FileIndex[0].size=fn<<6,cm[7]=(Rn.FileIndex[0].start=cm[0]+cm[1]+cm[2]+cm[3]+cm[4]+cm[5])+(cm[6]+7>>3),cm}(ie),Me=At(we[7]<<9),Ae=0,dt=0;for(Ae=0;Ae<8;++Ae)Me.write_shift(1,zt[Ae]);for(Ae=0;Ae<8;++Ae)Me.write_shift(2,0);for(Me.write_shift(2,62),Me.write_shift(2,3),Me.write_shift(2,65534),Me.write_shift(2,9),Me.write_shift(2,6),Ae=0;Ae<3;++Ae)Me.write_shift(2,0);for(Me.write_shift(4,0),Me.write_shift(4,we[2]),Me.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Me.write_shift(4,0),Me.write_shift(4,4096),Me.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:jt),Me.write_shift(4,we[3]),Me.write_shift(-4,we[1]?we[0]-1:jt),Me.write_shift(4,we[1]),Ae=0;Ae<109;++Ae)Me.write_shift(-4,Ae<we[2]?we[1]+Ae:-1);if(we[1])for(dt=0;dt<we[1];++dt){for(;Ae<236+127*dt;++Ae)Me.write_shift(-4,Ae<we[2]?we[1]+Ae:-1);Me.write_shift(-4,dt===we[1]-1?jt:dt+1)}var Lt=function(Rn){for(dt+=Rn;Ae<dt-1;++Ae)Me.write_shift(-4,Ae+1);Rn&&(++Ae,Me.write_shift(-4,jt))};for(dt=Ae=0,dt+=we[1];Ae<dt;++Ae)Me.write_shift(-4,xt.DIFSECT);for(dt+=we[2];Ae<dt;++Ae)Me.write_shift(-4,xt.FATSECT);Lt(we[3]),Lt(we[4]);for(var gt=0,pt=0,vt=ie.FileIndex[0];gt<ie.FileIndex.length;++gt)(vt=ie.FileIndex[gt]).content&&!((pt=vt.content.length)<4096)&&(vt.start=dt,Lt(pt+511>>9));for(Lt(we[6]+7>>3);511&Me.l;)Me.write_shift(-4,xt.ENDOFCHAIN);for(dt=Ae=0,gt=0;gt<ie.FileIndex.length;++gt)(vt=ie.FileIndex[gt]).content&&(pt=vt.content.length)&&!(pt>=4096)&&(vt.start=dt,Lt(pt+63>>6));for(;511&Me.l;)Me.write_shift(-4,xt.ENDOFCHAIN);for(Ae=0;Ae<we[4]<<2;++Ae){var nn=ie.FullPaths[Ae];if(nn&&0!==nn.length){vt=ie.FileIndex[Ae],0===Ae&&(vt.start=vt.size?vt.start-1:jt);var dn=0===Ae&&ye.root||vt.name;if(pt=2*(dn.length+1),Me.write_shift(64,dn,"utf16le"),Me.write_shift(2,pt),Me.write_shift(1,vt.type),Me.write_shift(1,vt.color),Me.write_shift(-4,vt.L),Me.write_shift(-4,vt.R),Me.write_shift(-4,vt.C),vt.clsid)Me.write_shift(16,vt.clsid,"hex");else for(gt=0;gt<4;++gt)Me.write_shift(4,0);Me.write_shift(4,vt.state||0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,vt.start),Me.write_shift(4,vt.size),Me.write_shift(4,0)}else{for(gt=0;gt<17;++gt)Me.write_shift(4,0);for(gt=0;gt<3;++gt)Me.write_shift(4,-1);for(gt=0;gt<12;++gt)Me.write_shift(4,0)}}for(Ae=1;Ae<ie.FileIndex.length;++Ae)if((vt=ie.FileIndex[Ae]).size>=4096)if(Me.l=vt.start+1<<9,Hr&&Buffer.isBuffer(vt.content))vt.content.copy(Me,Me.l,0,vt.size),Me.l+=vt.size+511&-512;else{for(gt=0;gt<vt.size;++gt)Me.write_shift(1,vt.content[gt]);for(;511&gt;++gt)Me.write_shift(1,0)}for(Ae=1;Ae<ie.FileIndex.length;++Ae)if((vt=ie.FileIndex[Ae]).size>0&&vt.size<4096)if(Hr&&Buffer.isBuffer(vt.content))vt.content.copy(Me,Me.l,0,vt.size),Me.l+=vt.size+63&-64;else{for(gt=0;gt<vt.size;++gt)Me.write_shift(1,vt.content[gt]);for(;63&gt;++gt)Me.write_shift(1,0)}if(Hr)Me.l=Me.length;else for(;Me.l<Me.length;)Me.write_shift(1,0);return Me}n.version="1.2.1";var St,$e=64,jt=-2,ln="d0cf11e0a1b11ae1",zt=[208,207,17,224,161,177,26,225],yt="00000000000000000000000000000000",xt={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:jt,FREESECT:-1,HEADER_SIGNATURE:ln,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:yt,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Pt(ie){for(var Se=new Array(ie.length),ye=0;ye<ie.length;++ye)Se[ye]=String.fromCharCode(ie[ye]);return Se.join("")}function Re(ie){return St?St.deflateRawSync(ie):Yr(ie)}for(var ie,Se,je=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],en=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],qt=typeof Uint8Array<"u",Vt=qt?new Uint8Array(256):[],wr=0;wr<256;++wr)Vt[wr]=(void 0,255&((Se=139536&((ie=wr)<<1|ie<<11)|558144&(ie<<5|ie<<15))>>16|Se>>8|Se));function Ne(ie,Se){var ye=Vt[255&ie];return Se<=8?ye>>>8-Se:(ye=ye<<8|Vt[ie>>8&255],Se<=16?ye>>>16-Se:(ye=ye<<8|Vt[ie>>16&255])>>>24-Se)}function Hi(ie,Se){var ye=7&Se,we=Se>>>3;return(ie[we]|(ye<=6?0:ie[we+1]<<8))>>>ye&3}function ni(ie,Se){var ye=7&Se,we=Se>>>3;return(ie[we]|(ye<=5?0:ie[we+1]<<8))>>>ye&7}function ri(ie,Se){var ye=7&Se,we=Se>>>3;return(ie[we]|(ye<=3?0:ie[we+1]<<8))>>>ye&31}function Tn(ie,Se){var ye=7&Se,we=Se>>>3;return(ie[we]|(ye<=1?0:ie[we+1]<<8))>>>ye&127}function Co(ie,Se,ye){var we=7&Se,Me=Se>>>3,dt=ie[Me]>>>we;return ye<8-we||(dt|=ie[Me+1]<<8-we,ye<16-we)||(dt|=ie[Me+2]<<16-we,ye<24-we)||(dt|=ie[Me+3]<<24-we),dt&(1<<ye)-1}function dh(ie,Se,ye){var we=7&Se,Me=Se>>>3;return we<=5?ie[Me]|=(7&ye)<<we:(ie[Me]|=ye<<we&255,ie[Me+1]=(7&ye)>>8-we),Se+3}function Tf(ie,Se,ye){return ie[Se>>>3]|=ye=(1&ye)<<(7&Se),Se+1}function am(ie,Se,ye){var Me=Se>>>3;return ie[Me]|=255&(ye<<=7&Se),ie[Me+1]=ye>>>=8,Se+8}function DC(ie,Se,ye){var Me=Se>>>3;return ie[Me]|=255&(ye<<=7&Se),ie[Me+1]=255&(ye>>>=8),ie[Me+2]=ye>>>8,Se+16}function a0(ie,Se){var ye=ie.length,we=2*ye>Se?2*ye:Se+5,Me=0;if(ye>=Se)return ie;if(Hr){var Ae=F6(we);if(ie.copy)ie.copy(Ae);else for(;Me<ie.length;++Me)Ae[Me]=ie[Me];return Ae}if(qt){var dt=new Uint8Array(we);if(dt.set)dt.set(ie);else for(;Me<ye;++Me)dt[Me]=ie[Me];return dt}return ie.length=we,ie}function du(ie){for(var Se=new Array(ie),ye=0;ye<ie;++ye)Se[ye]=0;return Se}function lm(ie,Se,ye){var we=1,Me=0,Ae=0,dt=0,Lt=0,gt=ie.length,pt=qt?new Uint16Array(32):du(32);for(Ae=0;Ae<32;++Ae)pt[Ae]=0;for(Ae=gt;Ae<ye;++Ae)ie[Ae]=0;gt=ie.length;var vt=qt?new Uint16Array(gt):du(gt);for(Ae=0;Ae<gt;++Ae)pt[Me=ie[Ae]]++,we<Me&&(we=Me),vt[Ae]=0;for(pt[0]=0,Ae=1;Ae<=we;++Ae)pt[Ae+16]=Lt=Lt+pt[Ae-1]<<1;for(Ae=0;Ae<gt;++Ae)0!=(Lt=ie[Ae])&&(vt[Ae]=pt[Lt+16]++);var nn=0;for(Ae=0;Ae<gt;++Ae)if(0!=(nn=ie[Ae]))for(Lt=Ne(vt[Ae],we)>>we-nn,dt=(1<<we+4-nn)-1;dt>=0;--dt)Se[Lt|dt<<nn]=15&nn|Ae<<4;return we}var l0=qt?new Uint16Array(512):du(512),MC=qt?new Uint16Array(32):du(32);if(!qt){for(var Yl=0;Yl<512;++Yl)l0[Yl]=0;for(Yl=0;Yl<32;++Yl)MC[Yl]=0}!function(){for(var ie=[],Se=0;Se<32;Se++)ie.push(5);lm(ie,MC,32);var ye=[];for(Se=0;Se<=143;Se++)ye.push(8);for(;Se<=255;Se++)ye.push(9);for(;Se<=279;Se++)ye.push(7);for(;Se<=287;Se++)ye.push(8);lm(ye,l0,288)}();var Ef=function(){for(var Se=qt?new Uint8Array(32768):[],ye=0,we=0;ye<en.length-1;++ye)for(;we<en[ye+1];++we)Se[we]=ye;for(;we<32768;++we)Se[we]=29;var Me=qt?new Uint8Array(259):[];for(ye=0,we=0;ye<Dt.length-1;++ye)for(;we<Dt[ye+1];++we)Me[we]=ye;return function(gt,pt){return gt.length<8?function Ae(Lt,gt){for(var pt=0;pt<Lt.length;){var vt=Math.min(65535,Lt.length-pt);for(gt.write_shift(1,+(pt+vt==Lt.length)),gt.write_shift(2,vt),gt.write_shift(2,65535&~vt);vt-- >0;)gt[gt.l++]=Lt[pt++]}return gt.l}(gt,pt):function dt(Lt,gt){for(var pt=0,vt=0,nn=qt?new Uint16Array(32768):[];vt<Lt.length;){var dn=Math.min(65535,Lt.length-vt);if(dn<10){for(7&(pt=dh(gt,pt,+(vt+dn==Lt.length)))&&(pt+=8-(7&pt)),gt.l=pt/8|0,gt.write_shift(2,dn),gt.write_shift(2,65535&~dn);dn-- >0;)gt[gt.l++]=Lt[vt++];pt=8*gt.l}else{pt=dh(gt,pt,+(vt+dn==Lt.length)+2);for(var Rn=0;dn-- >0;){var fn=Lt[vt],xn=-1,Sr=0;if((xn=nn[Rn=32767&(Rn<<5^fn)])&&((xn|=-32768&vt)>vt&&(xn-=32768),xn<vt))for(;Lt[xn+Sr]==Lt[vt+Sr]&&Sr<250;)++Sr;if(Sr>2){(fn=Me[Sr])<=22?pt=am(gt,pt,Vt[fn+1]>>1)-1:(am(gt,pt,3),am(gt,pt+=5,Vt[fn-23]>>5),pt+=3);var Ms=fn<8?0:fn-4>>2;Ms>0&&(DC(gt,pt,Sr-Dt[fn]),pt+=Ms),pt=am(gt,pt,Vt[fn=Se[vt-xn]]>>3),pt-=3;var Sc=fn<4?0:fn-2>>1;Sc>0&&(DC(gt,pt,vt-xn-en[fn]),pt+=Sc);for(var qo=0;qo<Sr;++qo)nn[Rn]=32767&vt,Rn=32767&(Rn<<5^Lt[vt]),++vt;dn-=Sr-1}else fn<=143?fn+=48:pt=Tf(gt,pt,1),pt=am(gt,pt,Vt[fn]),nn[Rn]=32767&vt,++vt}pt=am(gt,pt,0)-1}}return gt.l=(pt+7)/8|0,gt.l}(gt,pt)}}();function Yr(ie){var Se=At(50+Math.floor(1.1*ie.length)),ye=Ef(ie,Se);return Se.slice(0,ye)}var To=qt?new Uint16Array(32768):du(32768),fh=qt?new Uint16Array(32768):du(32768),ua=qt?new Uint16Array(128):du(128),Ry=1,Q$=1;function XMe(ie,Se){var ye=ri(ie,Se)+257,we=ri(ie,Se+=5)+1,Me=function $i(ie,Se){var ye=7&Se,we=Se>>>3;return(ie[we]|(ye<=4?0:ie[we+1]<<8))>>>ye&15}(ie,Se+=5)+4;Se+=4;for(var Ae=0,dt=qt?new Uint8Array(19):du(19),Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],gt=1,pt=qt?new Uint8Array(8):du(8),vt=qt?new Uint8Array(8):du(8),nn=dt.length,dn=0;dn<Me;++dn)dt[je[dn]]=Ae=ni(ie,Se),gt<Ae&&(gt=Ae),pt[Ae]++,Se+=3;var Rn=0;for(pt[0]=0,dn=1;dn<=gt;++dn)vt[dn]=Rn=Rn+pt[dn-1]<<1;for(dn=0;dn<nn;++dn)0!=(Rn=dt[dn])&&(Lt[dn]=vt[Rn]++);var fn=0;for(dn=0;dn<nn;++dn)if(0!=(fn=dt[dn])){Rn=Vt[Lt[dn]]>>8-fn;for(var xn=(1<<7-fn)-1;xn>=0;--xn)ua[Rn|xn<<fn]=7&fn|dn<<3}var Sr=[];for(gt=1;Sr.length<ye+we;)switch(Rn=ua[Tn(ie,Se)],Se+=7&Rn,Rn>>>=3){case 16:for(Ae=3+Hi(ie,Se),Se+=2,Rn=Sr[Sr.length-1];Ae-- >0;)Sr.push(Rn);break;case 17:for(Ae=3+ni(ie,Se),Se+=3;Ae-- >0;)Sr.push(0);break;case 18:for(Ae=11+Tn(ie,Se),Se+=7;Ae-- >0;)Sr.push(0);break;default:Sr.push(Rn),gt<Rn&&(gt=Rn)}var Ms=Sr.slice(0,ye),Sc=Sr.slice(ye);for(dn=ye;dn<286;++dn)Ms[dn]=0;for(dn=we;dn<30;++dn)Sc[dn]=0;return Ry=lm(Ms,To,286),Q$=lm(Sc,fh,30),Se}function eW(ie,Se){var we=function ZMe(ie,Se){if(3==ie[0]&&!(3&ie[1]))return[Ag(Se),2];for(var ye=0,we=0,Me=F6(Se||1<<18),Ae=0,dt=Me.length>>>0,Lt=0,gt=0;!(1&we);)if(we=ni(ie,ye),ye+=3,we>>>1)for(we>>1==1?(Lt=9,gt=5):(ye=XMe(ie,ye),Lt=Ry,gt=Q$);;){!Se&&dt<Ae+32767&&(dt=(Me=a0(Me,Ae+32767)).length);var vt=Co(ie,ye,Lt),nn=we>>>1==1?l0[vt]:To[vt];if(ye+=15&nn,(nn>>>=4)>>>8&255){if(256==nn)break;var dn=(nn-=257)<8?0:nn-4>>2;dn>5&&(dn=0);var Rn=Ae+Dt[nn];dn>0&&(Rn+=Co(ie,ye,dn),ye+=dn),vt=Co(ie,ye,gt),ye+=15&(nn=we>>>1==1?MC[vt]:fh[vt]);var fn=(nn>>>=4)<4?0:nn-2>>1,xn=en[nn];for(fn>0&&(xn+=Co(ie,ye,fn),ye+=fn),!Se&&dt<Rn&&(dt=(Me=a0(Me,Rn+100)).length);Ae<Rn;)Me[Ae]=Me[Ae-xn],++Ae}else Me[Ae++]=nn}else{7&ye&&(ye+=8-(7&ye));var pt=ie[ye>>>3]|ie[1+(ye>>>3)]<<8;if(ye+=32,pt>0)for(!Se&&dt<Ae+pt&&(dt=(Me=a0(Me,Ae+pt)).length);pt-- >0;)Me[Ae++]=ie[ye>>>3],ye+=8}return Se?[Me,ye+7>>>3]:[Me.slice(0,Ae),ye+7>>>3]}(ie.slice(ie.l||0),Se);return ie.l+=we[1],we[0]}function tW(ie,Se){if(!ie)throw new Error(Se);typeof console<"u"&&console.error(Se)}function nW(ie,Se){var ye=ie;Wa(ye,0);var Ae={FileIndex:[],FullPaths:[]};ae(Ae,{root:Se.root});for(var dt=ye.length-4;(80!=ye[dt]||75!=ye[dt+1]||5!=ye[dt+2]||6!=ye[dt+3])&&dt>=0;)--dt;ye.l=dt+4,ye.l+=4;var Lt=ye.read_shift(2);ye.l+=6;var gt=ye.read_shift(4);for(ye.l=gt,dt=0;dt<Lt;++dt){ye.l+=20;var pt=ye.read_shift(4),vt=ye.read_shift(4),nn=ye.read_shift(2),dn=ye.read_shift(2),Rn=ye.read_shift(2);ye.l+=8;var fn=ye.read_shift(4),xn=l(ye.slice(ye.l+nn,ye.l+nn+dn));ye.l+=nn+dn+Rn;var Sr=ye.l;ye.l=fn+4,KMe(ye,pt,vt,Ae,xn),ye.l=Sr}return Ae}function KMe(ie,Se,ye,we,Me){ie.l+=2;var Ae=ie.read_shift(2),dt=ie.read_shift(2),Lt=function a(ie){var Se=65535&ie.read_shift(2),ye=65535&ie.read_shift(2),we=new Date,Me=31&ye,Ae=15&(ye>>>=5);ye>>>=4,we.setMilliseconds(0),we.setFullYear(ye+1980),we.setMonth(Ae-1),we.setDate(Me);var dt=31&Se,Lt=63&(Se>>>=5);return we.setHours(Se>>>=6),we.setMinutes(Lt),we.setSeconds(dt<<1),we}(ie);if(8257&Ae)throw new Error("Unsupported ZIP encryption");ie.read_shift(4);for(var pt=ie.read_shift(4),vt=ie.read_shift(4),nn=ie.read_shift(2),dn=ie.read_shift(2),Rn="",fn=0;fn<nn;++fn)Rn+=String.fromCharCode(ie[ie.l++]);if(dn){var xn=l(ie.slice(ie.l,ie.l+dn));(xn[21589]||{}).mt&&(Lt=xn[21589].mt),((Me||{})[21589]||{}).mt&&(Lt=Me[21589].mt)}ie.l+=dn;var Sr=ie.slice(ie.l,ie.l+pt);switch(dt){case 8:Sr=function ut(ie,Se){if(!St)return eW(ie,Se);var we=new(0,St.InflateRaw),Me=we._processChunk(ie.slice(ie.l),we._finishFlushFlag);return ie.l+=we.bytesRead,Me}(ie,vt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+dt)}var Ms=!1;8&Ae&&(134695760==ie.read_shift(4)&&(ie.read_shift(4),Ms=!0),pt=ie.read_shift(4),vt=ie.read_shift(4)),pt!=Se&&tW(Ms,"Bad compressed size: "+Se+" != "+pt),vt!=ye&&tW(Ms,"Bad uncompressed size: "+ye+" != "+vt),hF(we,Rn,Sr,{unsafe:!0,mt:Lt})}var zM={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function QMe(ie,Se){if(ie.ctype)return ie.ctype;var ye=ie.name||"",we=ye.match(/\.([^\.]+)$/);return we&&zM[we[1]]||Se&&(we=(ye=Se).match(/[\.\\]([^\.\\])+$/))&&zM[we[1]]?zM[we[1]]:"application/octet-stream"}function eke(ie){for(var Se=Zw(ie),ye=[],we=0;we<Se.length;we+=76)ye.push(Se.slice(we,we+76));return ye.join("\r\n")+"\r\n"}function tke(ie){var Se=ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(pt){var vt=pt.charCodeAt(0).toString(16).toUpperCase();return"="+(1==vt.length?"0"+vt:vt)});"\n"==(Se=Se.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(Se="=0D"+Se.slice(1));for(var ye=[],we=(Se=Se.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),Me=0;Me<we.length;++Me){var Ae=we[Me];if(0!=Ae.length)for(var dt=0;dt<Ae.length;){var Lt=76,gt=Ae.slice(dt,dt+Lt);"="==gt.charAt(Lt-1)?Lt--:"="==gt.charAt(Lt-2)?Lt-=2:"="==gt.charAt(Lt-3)&&(Lt-=3),gt=Ae.slice(dt,dt+Lt),(dt+=Lt)<Ae.length&&(gt+="="),ye.push(gt)}else ye.push("")}return ye.join("\r\n")}function rke(ie,Se,ye){for(var dt,we="",Me="",Ae="",Lt=0;Lt<10;++Lt){var gt=Se[Lt];if(!gt||gt.match(/^\s*$/))break;var pt=gt.match(/^(.*?):\s*([^\s].*)$/);if(pt)switch(pt[1].toLowerCase()){case"content-location":we=pt[2].trim();break;case"content-type":Ae=pt[2].trim();break;case"content-transfer-encoding":Me=pt[2].trim()}}switch(++Lt,Me.toLowerCase()){case"base64":dt=tu(eu(Se.slice(Lt).join("")));break;case"quoted-printable":dt=function nke(ie){for(var Se=[],ye=0;ye<ie.length;++ye){for(var we=ie[ye];ye<=ie.length&&"="==we.charAt(we.length-1);)we=we.slice(0,we.length-1)+ie[++ye];Se.push(we)}for(var Me=0;Me<Se.length;++Me)Se[Me]=Se[Me].replace(/[=][0-9A-Fa-f]{2}/g,function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))});return tu(Se.join("\r\n"))}(Se.slice(Lt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Me)}var vt=hF(ie,we.slice(ye.length),dt,{unsafe:!0});Ae&&(vt.ctype=Ae)}function hF(ie,Se,ye,we){var Me=we&&we.unsafe;Me||ae(ie);var Ae=!Me&&Xn.find(ie,Se);if(!Ae){var dt=ie.FullPaths[0];Se.slice(0,dt.length)==dt?dt=Se:("/"!=dt.slice(-1)&&(dt+="/"),dt=(dt+Se).replace("//","/")),Ae={name:i(Se),type:2},ie.FileIndex.push(Ae),ie.FullPaths.push(dt),Me||Xn.utils.cfb_gc(ie)}return Ae.content=ye,Ae.size=ye?ye.length:0,we&&(we.CLSID&&(Ae.clsid=we.CLSID),we.mt&&(Ae.mt=we.mt),we.ct&&(Ae.ct=we.ct)),Ae}return n.find=function Je(ie,Se){var ye=ie.FullPaths.map(function(gt){return gt.toUpperCase()}),we=ye.map(function(gt){var pt=gt.split("/");return pt[pt.length-("/"==gt.slice(-1)?2:1)]}),Me=!1;47===Se.charCodeAt(0)?(Me=!0,Se=ye[0].slice(0,-1)+Se):Me=-1!==Se.indexOf("/");var Ae=Se.toUpperCase(),dt=!0===Me?ye.indexOf(Ae):we.indexOf(Ae);if(-1!==dt)return ie.FileIndex[dt];var Lt=!Ae.match(Jw);for(Ae=Ae.replace(ol,""),Lt&&(Ae=Ae.replace(Jw,"!")),dt=0;dt<ye.length;++dt)if((Lt?ye[dt].replace(Jw,"!"):ye[dt]).replace(ol,"")==Ae||(Lt?we[dt].replace(Jw,"!"):we[dt]).replace(ol,"")==Ae)return ie.FileIndex[dt];return null},n.read=function fe(ie,Se){var ye=Se&&Se.type;switch(ye||Hr&&Buffer.isBuffer(ie)&&(ye="buffer"),ye||"base64"){case"file":return function _e(ie,Se){return m(),y(d.readFileSync(ie),Se)}(ie,Se);case"base64":return y(tu(eu(ie)),Se);case"binary":return y(tu(ie),Se)}return y(ie,Se)},n.parse=y,n.write=function an(ie,Se){var ye=qe(ie,Se);switch(Se&&Se.type||"buffer"){case"file":return m(),d.writeFileSync(Se.filename,ye),ye;case"binary":return"string"==typeof ye?ye:Pt(ye);case"base64":return Zw("string"==typeof ye?ye:Pt(ye));case"buffer":if(Hr)return Buffer.isBuffer(ye)?ye:Np(ye);case"array":return"string"==typeof ye?tu(ye):ye}return ye},n.writeFile=function Zt(ie,Se,ye){m();var we=qe(ie,ye);d.writeFileSync(Se,we)},n.utils={cfb_new:function oke(ie){var Se={};return ae(Se,ie),Se},cfb_add:hF,cfb_del:function ake(ie,Se){ae(ie);var ye=Xn.find(ie,Se);if(ye)for(var we=0;we<ie.FileIndex.length;++we)if(ie.FileIndex[we]==ye)return ie.FileIndex.splice(we,1),ie.FullPaths.splice(we,1),!0;return!1},cfb_mov:function lke(ie,Se,ye){ae(ie);var we=Xn.find(ie,Se);if(we)for(var Me=0;Me<ie.FileIndex.length;++Me)if(ie.FileIndex[Me]==we)return ie.FileIndex[Me].name=i(ye),ie.FullPaths[Me]=ye,!0;return!1},cfb_gc:function cke(ie){Ie(ie,!0)},ReadShift:o2,CheckField:Lz,prep_blob:Wa,bconcat:wa,use_zlib:function Pe(ie){try{var ye=new(0,ie.InflateRaw);if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),!ye.bytesRead)throw new Error("zlib does not expose bytesRead");St=ie}catch(we){console.error("cannot use native zlib: "+(we.message||we))}},_deflateRaw:Yr,_inflateRaw:eW,consts:xt},n}();let Lg;function Zs(e){for(var n=Object.keys(e),t=[],r=0;r<n.length;++r)Object.prototype.hasOwnProperty.call(e,n[r])&&t.push(n[r]);return t}function OS(e){for(var n=[],t=Zs(e),r=0;r!==t.length;++r)n[e[t[r]]]=t[r];return n}var FS=new Date(1899,11,30,0,0,0);function sa(e,n){var t=e.getTime();return n&&(t-=1263168e5),(t-(FS.getTime()+6e4*(e.getTimezoneOffset()-FS.getTimezoneOffset())))/864e5}var tz=new Date,Gne=FS.getTime()+6e4*(tz.getTimezoneOffset()-FS.getTimezoneOffset()),nz=tz.getTimezoneOffset();function RS(e){var n=new Date;return n.setTime(24*e*60*60*1e3+Gne),n.getTimezoneOffset()!==nz&&n.setTime(n.getTime()+6e4*(n.getTimezoneOffset()-nz)),n}function Yne(e){var n=0,t=0,r=!1,i=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(t=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":t*=24;case"H":t*=60;case"M":if(!r)throw new Error("Unsupported ISO Duration Field: M");t*=60}n+=t*parseInt(i[s],10)}return n}var rz=new Date("2017-02-19T19:06:09.000Z"),iz=isNaN(rz.getFullYear())?new Date("2/19/17"):rz,qne=2017==iz.getFullYear();function Vs(e,n){var t=new Date(e);if(qne)return n>0?t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3):n<0&&t.setTime(t.getTime()-60*t.getTimezoneOffset()*1e3),t;if(e instanceof Date)return e;if(1917==iz.getFullYear()&&!isNaN(t.getFullYear())){var r=t.getFullYear();return e.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function U_(e,n){if(Hr&&Buffer.isBuffer(e)){if(n){if(255==e[0]&&254==e[1])return uf(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return uf(L6(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(n){if(255==e[0]&&254==e[1])return uf(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return uf(new TextDecoder("utf-16be").decode(e.slice(2)))}var t={"\u20ac":"\x80","\u201a":"\x82",\u0192:"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87",\u02c6:"\x88","\u2030":"\x89",\u0160:"\x8a","\u2039":"\x8b",\u0152:"\x8c",\u017d:"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99",\u0161:"\x9a","\u203a":"\x9b",\u0153:"\x9c",\u017e:"\x9e",\u0178:"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function Qi(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=Qi(e[t]));return n}function Ks(e,n){for(var t="";t.length<n;)t+=e;return t}function Yh(e){var n=Number(e);if(!isNaN(n))return isFinite(n)?n:NaN;if(!/\d/.test(e))return n;var t=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return isNaN(n=Number(r))&&(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),isNaN(n=Number(r)))?n:n/t}var Xne=["january","february","march","april","may","june","july","august","september","october","november","december"];function Rv(e){var n=new Date(e),t=new Date(NaN),r=n.getYear(),i=n.getMonth(),s=n.getDate();if(isNaN(s))return t;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Xne.indexOf(a))return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&101!=r?n:e.match(/[^-0-9:,\/\\]/)?t:n}var Zne=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,r,i){if(e||"string"==typeof r)return t.split(r);for(var s=t.split(r),a=[s[0]],l=1;l<s.length;++l)a.push(i),a.push(s[l]);return a}}();function sz(e){return e?e.content&&e.type?U_(e.content,!0):e.data?Pv(e.data):e.asNodeBuffer&&Hr?Pv(e.asNodeBuffer().toString("binary")):e.asBinary?Pv(e.asBinary()):e._data&&e._data.getContent?Pv(U_(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function oz(e){if(!e)return null;if(e.data)return kS(e.data);if(e.asNodeBuffer&&Hr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var n=e._data.getContent();return"string"==typeof n?kS(n):Array.prototype.slice.call(n)}return e.content&&e.type?e.content:null}function Gu(e,n){for(var t=e.FullPaths||Zs(e.files),r=n.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<t.length;++s){var a=t[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return e.files?e.files[t[s]]:e.FileIndex[s]}return null}function yP(e,n){var t=Gu(e,n);if(null==t)throw new Error("Cannot find file "+n+" in zip");return t}function Uo(e,n,t){if(!t)return function Kne(e){return e&&".bin"===e.name.slice(-4)?oz(e):sz(e)}(yP(e,n));if(!n)return null;try{return Uo(e,n)}catch{return null}}function ru(e,n,t){if(!t)return sz(yP(e,n));if(!n)return null;try{return ru(e,n)}catch{return null}}function az(e,n,t){if(!t)return oz(yP(e,n));if(!n)return null;try{return az(e,n)}catch{return null}}function lz(e){for(var n=e.FullPaths||Zs(e.files),t=[],r=0;r<n.length;++r)"/"!=n[r].slice(-1)&&t.push(n[r].replace(/^Root Entry[\/]/,""));return t.sort()}function cz(e,n){switch(n.type){case"base64":return Xn.read(e,{type:"base64"});case"binary":return Xn.read(e,{type:"binary"});case"buffer":case"array":return Xn.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+n.type)}function n2(e,n){if("/"==e.charAt(0))return e.slice(1);var t=n.split("/");"/"!=n.slice(-1)&&t.pop();for(var r=e.split("/");0!==r.length;){var i=r.shift();".."===i?t.pop():"."!==i&&t.push(i)}return t.join("/")}var jo='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',Jne=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,uz=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,al=jo.match(uz)?uz:/<[^>]*>/g,ere=/<\w*:/,tre=/<(\/?)\w+:/;function ur(e,n,t){for(var r={},i=0,s=0;i!==e.length&&32!==(s=e.charCodeAt(i))&&10!==s&&13!==s;++i);if(n||(r[0]=e.slice(0,i)),i===e.length)return r;var a=e.match(Jne),l=0,d="",m=0,y="",T="",D=1;if(a)for(m=0;m!=a.length;++m){for(T=a[m],s=0;s!=T.length&&61!==T.charCodeAt(s);++s);for(y=T.slice(0,s).trim();32==T.charCodeAt(s+1);)++s;for(D=34==(i=T.charCodeAt(s+1))||39==i?1:0,d=T.slice(s+1+D,T.length-D),l=0;l!=y.length&&58!==y.charCodeAt(l);++l);if(l===y.length)y.indexOf("_")>0&&(y=y.slice(0,y.indexOf("_"))),r[y]=d,t||(r[y.toLowerCase()]=d);else{var I=(5===l&&"xmlns"===y.slice(0,5)?"xmlns":"")+y.slice(l+1);if(r[I]&&"ext"==y.slice(l-3,l))continue;r[I]=d,t||(r[I.toLowerCase()]=d)}}return r}function cf(e){return e.replace(tre,"<$1")}var hz={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},xP=OS(hz),Si=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,n=/_x([\da-fA-F]{4})_/gi;return function t(r){var i=r+"",s=i.indexOf("<![CDATA[");if(-1==s)return i.replace(e,function(l,d){return hz[l]||String.fromCharCode(parseInt(d,l.indexOf("x")>-1?16:10))||l}).replace(n,function(l,d){return String.fromCharCode(parseInt(d,16))});var a=i.indexOf("]]>");return t(i.slice(0,s))+i.slice(s+9,a)+t(i.slice(a+3))}}(),bP=/[&<>'"]/g,fz=/[\u0000-\u001f]/g;function wP(e){return(e+"").replace(bP,function(t){return xP[t]}).replace(/\n/g,"<br/>").replace(fz,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}var pz=function(){var e=/&#(\d+);/g;function n(t,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(e,n)}}();function bs(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function CP(e){for(var n="",t=0,r=0,i=0,s=0,a=0,l=0;t<e.length;)(r=e.charCodeAt(t++))<128?n+=String.fromCharCode(r):(i=e.charCodeAt(t++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,n+=String.fromCharCode(a)):(s=e.charCodeAt(t++),r<240?n+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(l=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(a=e.charCodeAt(t++)))-65536,n+=String.fromCharCode(55296+(l>>>10&1023)),n+=String.fromCharCode(56320+(1023&l)))));return n}function mz(e){var t,r,l,n=Ag(2*e.length),i=1,s=0,a=0;for(r=0;r<e.length;r+=i)i=1,(l=e.charCodeAt(r))<128?t=l:l<224?(t=64*(31&l)+(63&e.charCodeAt(r+1)),i=2):l<240?(t=4096*(15&l)+64*(63&e.charCodeAt(r+1))+(63&e.charCodeAt(r+2)),i=3):(i=4,t=262144*(7&l)+4096*(63&e.charCodeAt(r+1))+64*(63&e.charCodeAt(r+2))+(63&e.charCodeAt(r+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(n[s++]=255&a,n[s++]=a>>>8,a=0),n[s++]=t%256,n[s++]=t>>>8;return n.slice(0,s).toString("ucs2")}function gz(e){return Np(e,"binary").toString("utf8")}var NS="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Yi=Hr&&(gz(NS)==CP(NS)&&gz||mz(NS)==CP(NS)&&mz)||CP,uf=Hr?function(e){return Np(e,"utf8").toString("binary")}:function(e){for(var n=[],t=0,r=0,i=0;t<e.length;)switch(r=e.charCodeAt(t++),!0){case r<128:n.push(String.fromCharCode(r));break;case r<2048:n.push(String.fromCharCode(192+(r>>6))),n.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(t++)-56320+(r<<10),n.push(String.fromCharCode(240+(i>>18&7))),n.push(String.fromCharCode(144+(i>>12&63))),n.push(String.fromCharCode(128+(i>>6&63))),n.push(String.fromCharCode(128+(63&i)));break;default:n.push(String.fromCharCode(224+(r>>12))),n.push(String.fromCharCode(128+(r>>6&63))),n.push(String.fromCharCode(128+(63&r)))}return n.join("")},r2=function(){var e={};return function(t,r){var i=t+"|"+(r||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}}(),_z=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(n){return[new RegExp("&"+n[0]+";","ig"),n[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),i=0;i<e.length;++i)r=r.replace(e[i][0],e[i][1]);return r}}(),sre=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),ore=/<\/?(?:vt:)?variant>/g,are=/<(?:vt:)([^>]*)>([\s\S]*)</;function yz(e,n){var t=ur(e),r=e.match(sre(t.baseType))||[],i=[];if(r.length!=t.size){if(n.WTF)throw new Error("unexpected vector length "+r.length+" != "+t.size);return i}return r.forEach(function(s){var a=s.replace(ore,"").match(are);a&&i.push({v:Yi(a[2]),t:a[1]})}),i}var vz=/(^\s|\s$|\n)/;function cn(e,n,t){return"<"+e+(null!=t?function xz(e){return Zs(e).map(function(n){return" "+n+'="'+e[n]+'"'}).join("")}(t):"")+(null!=n?(n.match(vz)?' xml:space="preserve"':"")+">"+n+"</"+e:"/")+">"}function EP(e){if(Hr&&Buffer.isBuffer(e))return e.toString("utf8");if("string"==typeof e)return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Yi(Ig(pP(e)));throw new Error("Bad input format: expected Buffer or string")}var s2=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,Ho={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Fg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],bz=function(e){for(var n=[],r=0;r<e[0].length;++r)if(e[0][r])for(var i=0,s=e[0][r].length;i<s;i+=10240)n.push.apply(n,e[0][r].slice(i,i+10240));return n},wz=Hr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(n){return Buffer.isBuffer(n)?n:Np(n)})):bz(e)}:bz,Cz=function(e,n,t){for(var r=[],i=n;i<t;i+=2)r.push(String.fromCharCode(zp(e,i)));return r.join("").replace(ol,"")},BS=Hr?function(e,n,t){return Buffer.isBuffer(e)?e.toString("utf16le",n,t).replace(ol,""):Cz(e,n,t)}:Cz,Tz=function(e,n,t){for(var r=[],i=n;i<n+t;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},Ez=Hr?function(e,n,t){return Buffer.isBuffer(e)?e.toString("hex",n,n+t):Tz(e,n,t)}:Tz,Sz=function(e,n,t){for(var r=[],i=n;i<t;i++)r.push(String.fromCharCode(Bv(e,i)));return r.join("")},Nv=Hr?function(n,t,r){return Buffer.isBuffer(n)?n.toString("utf8",t,r):Sz(n,t,r)}:Sz,Dz=function(e,n){var t=Ca(e,n);return t>0?Nv(e,n+4,n+4+t-1):""},SP=Dz,Mz=function(e,n){var t=Ca(e,n);return t>0?Nv(e,n+4,n+4+t-1):""},DP=Mz,kz=function(e,n){var t=2*Ca(e,n);return t>0?Nv(e,n+4,n+4+t-1):""},MP=kz,Az=function(n,t){var r=Ca(n,t);return r>0?BS(n,t+4,t+4+r):""},kP=Az,Iz=function(e,n){var t=Ca(e,n);return t>0?Nv(e,n+4,n+4+t):""},AP=Iz,Pz=function(e,n){return function cre(e,n){for(var t=1-2*(e[n+7]>>>7),r=((127&e[n+7])<<4)+(e[n+6]>>>4&15),i=15&e[n+6],s=5;s>=0;--s)i=256*i+e[n+s];return 2047==r?0==i?t*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}(e,n)},zS=Pz,IP=function(n){return Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array};Hr&&(SP=function(n,t){if(!Buffer.isBuffer(n))return Dz(n,t);var r=n.readUInt32LE(t);return r>0?n.toString("utf8",t+4,t+4+r-1):""},DP=function(n,t){if(!Buffer.isBuffer(n))return Mz(n,t);var r=n.readUInt32LE(t);return r>0?n.toString("utf8",t+4,t+4+r-1):""},MP=function(n,t){if(!Buffer.isBuffer(n))return kz(n,t);var r=2*n.readUInt32LE(t);return n.toString("utf16le",t+4,t+4+r-1)},kP=function(n,t){if(!Buffer.isBuffer(n))return Az(n,t);var r=n.readUInt32LE(t);return n.toString("utf16le",t+4,t+4+r)},AP=function(n,t){if(!Buffer.isBuffer(n))return Iz(n,t);var r=n.readUInt32LE(t);return n.toString("utf8",t+4,t+4+r)},zS=function(n,t){return Buffer.isBuffer(n)?n.readDoubleLE(t):Pz(n,t)},IP=function(n){return Buffer.isBuffer(n)||Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array}),typeof wi<"u"&&function Oz(){BS=function(e,n,t){return wi.utils.decode(1200,e.slice(n,t)).replace(ol,"")},Nv=function(e,n,t){return wi.utils.decode(65001,e.slice(n,t))},SP=function(e,n){var t=Ca(e,n);return t>0?wi.utils.decode(B_,e.slice(n+4,n+4+t-1)):""},DP=function(e,n){var t=Ca(e,n);return t>0?wi.utils.decode(Qc,e.slice(n+4,n+4+t-1)):""},MP=function(e,n){var t=2*Ca(e,n);return t>0?wi.utils.decode(1200,e.slice(n+4,n+4+t-1)):""},kP=function(e,n){var t=Ca(e,n);return t>0?wi.utils.decode(1200,e.slice(n+4,n+4+t)):""},AP=function(e,n){var t=Ca(e,n);return t>0?wi.utils.decode(65001,e.slice(n+4,n+4+t)):""}}();var Bv=function(e,n){return e[n]},zp=function(e,n){return 256*e[n+1]+e[n]},hre=function(e,n){var t=256*e[n+1]+e[n];return t<32768?t:-1*(65535-t+1)},Ca=function(e,n){return e[n+3]*(1<<24)+(e[n+2]<<16)+(e[n+1]<<8)+e[n]},j_=function(e,n){return e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]},dre=function(e,n){return e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]};function o2(e,n){var r,i,a,l,d,m,t="",s=[];switch(n){case"dbcs":if(m=this.l,Hr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)t+=String.fromCharCode(zp(this,m)),m+=2;e*=2;break;case"utf8":t=Nv(this,this.l,this.l+e);break;case"utf16le":t=BS(this,this.l,this.l+(e*=2));break;case"wstr":if(!(typeof wi<"u"))return o2.call(this,e,"dbcs");t=wi.utils.decode(Qc,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":t=SP(this,this.l),e=4+Ca(this,this.l);break;case"lpstr-cp":t=DP(this,this.l),e=4+Ca(this,this.l);break;case"lpwstr":t=MP(this,this.l),e=4+2*Ca(this,this.l);break;case"lpp4":e=4+Ca(this,this.l),t=kP(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Ca(this,this.l),t=AP(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,t="";0!==(a=Bv(this,this.l+e++));)s.push(qw(a));t=s.join("");break;case"_wstr":for(e=0,t="";0!==(a=zp(this,this.l+e));)s.push(qw(a)),e+=2;e+=2,t=s.join("");break;case"dbcs-cont":for(t="",m=this.l,d=0;d<e;++d){if(this.lens&&-1!==this.lens.indexOf(m))return a=Bv(this,m),this.l=m+1,l=o2.call(this,e-d,a?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(qw(zp(this,m))),m+=2}t=s.join(""),e*=2;break;case"cpstr":if(typeof wi<"u"){t=wi.utils.decode(Qc,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(t="",m=this.l,d=0;d!=e;++d){if(this.lens&&-1!==this.lens.indexOf(m))return a=Bv(this,m),this.l=m+1,l=o2.call(this,e-d,a?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(qw(Bv(this,m))),m+=1}t=s.join("");break;default:switch(e){case 1:return r=Bv(this,this.l),this.l++,r;case 2:return r=("i"===n?hre:zp)(this,this.l),this.l+=2,r;case 4:case-4:return"i"!==n&&128&this[this.l+3]?(i=Ca(this,this.l),this.l+=4,i):(r=(e>0?j_:dre)(this,this.l),this.l+=4,r);case 8:case-8:if("f"===n)return i=8==e?zS(this,this.l):zS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:t=Ez(this,this.l,e)}}return this.l+=e,t}var fre=function(e,n,t){e[t]=255&n,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24&255},pre=function(e,n,t){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},mre=function(e,n,t){e[t]=255&n,e[t+1]=n>>>8&255};function gre(e,n,t){var r=0,i=0;if("dbcs"===t){for(i=0;i!=n.length;++i)mre(this,n.charCodeAt(i),this.l+2*i);r=2*n.length}else if("sbcs"===t){if(typeof wi<"u"&&874==B_)for(i=0;i!=n.length;++i){var s=wi.utils.encode(B_,n.charAt(i));this[this.l+i]=s[0]}else for(n=n.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=n.length;++i)this[this.l+i]=255&n.charCodeAt(i);r=n.length}else{if("hex"===t){for(;i<e;++i)this[this.l++]=parseInt(n.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===t){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(n.length,e);++i){var l=n.charCodeAt(i);this[this.l++]=255&l,this[this.l++]=l>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&n;break;case 2:r=2,this[this.l]=255&n,this[this.l+1]=255&(n>>>=8);break;case 3:r=3,this[this.l]=255&n,this[this.l+1]=255&(n>>>=8),this[this.l+2]=255&(n>>>=8);break;case 4:r=4,fre(this,n,this.l);break;case 8:if(r=8,"f"===t){!function ure(e,n,t){var r=(n<0||1/n==-1/0?1:0)<<7,i=0,s=0,a=r?-n:n;isFinite(a)?0==a?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(n)?26985:0);for(var l=0;l<=5;++l,s/=256)e[t+l]=255&s;e[t+6]=(15&i)<<4|15&s,e[t+7]=i>>4|r}(this,n,this.l);break}case 16:break;case-4:r=4,pre(this,n,this.l)}}return this.l+=r,this}function Lz(e,n){var t=Ez(this,this.l,e.length>>1);if(t!==e)throw new Error(n+"Expected "+e+" saw "+t);this.l+=e.length>>1}function Wa(e,n){e.l=n,e.read_shift=o2,e.chk=Lz,e.write_shift=gre}function ll(e,n){e.l+=n}function At(e){var n=Ag(e);return Wa(n,0),n}function Vp(e,n,t){if(e){var r,i,s;Wa(e,e.l||0);for(var a=e.length,l=0,d=0;e.l<a;){128&(l=e.read_shift(1))&&(l=(127&l)+((127&e.read_shift(1))<<7));var m=E2[l]||E2[65535];for(s=127&(r=e.read_shift(1)),i=1;i<4&&128&r;++i)s+=(127&(r=e.read_shift(1)))<<7*i;d=e.l+s;var y=m.f&&m.f(e,s,t);if(e.l=d,n(y,m,l))return}}}function $l(){var e=[],n=Hr?256:2048,t=function(m){var y=At(m);return Wa(y,0),y},r=t(n),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(m){return r&&m<r.length-r.l?r:(i(),r=t(Math.max(m+1,n)))};return{next:s,push:function(m){i(),null==(r=m).l&&(r.l=r.length),s(n)},end:function(){return i(),wa(e)},_bufs:e}}function a2(e,n,t){var r=Qi(e);if(n.s?(r.cRel&&(r.c+=n.s.c),r.rRel&&(r.r+=n.s.r)):(r.cRel&&(r.c+=n.c),r.rRel&&(r.r+=n.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Fz(e,n,t){var r=Qi(e);return r.s=a2(r.s,n.s,t),r.e=a2(r.e,n.s,t),r}function l2(e,n){if(e.cRel&&e.c<0)for(e=Qi(e);e.c<0;)e.c+=n>8?16384:256;if(e.rRel&&e.r<0)for(e=Qi(e);e.r<0;)e.r+=n>8?1048576:n>5?65536:16384;var t=hr(e);return!e.cRel&&null!=e.cRel&&(t=function vre(e){return e.replace(/^([A-Z])/,"$$$1")}(t)),!e.rRel&&null!=e.rRel&&(t=function _re(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(t)),t}function PP(e,n){return 0!=e.s.r||e.s.rRel||e.e.r!=(n.biff>=12?1048575:n.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(n.biff>=12?16383:255)||e.e.cRel?l2(e.s,n.biff)+":"+l2(e.e,n.biff):(e.s.rRel?"":"$")+Js(e.s.r)+":"+(e.e.rRel?"":"$")+Js(e.e.r):(e.s.cRel?"":"$")+ws(e.s.c)+":"+(e.e.cRel?"":"$")+ws(e.e.c)}function OP(e){return parseInt(function yre(e){return e.replace(/\$(\d+)$/,"$1")}(e),10)-1}function Js(e){return""+(e+1)}function LP(e){for(var n=function xre(e){return e.replace(/^\$([A-Z])/,"$1")}(e),t=0,r=0;r!==n.length;++r)t=26*t+n.charCodeAt(r)-64;return t-1}function ws(e){if(e<0)throw new Error("invalid column "+e);var n="";for(++e;e;e=Math.floor((e-1)/26))n=String.fromCharCode((e-1)%26+65)+n;return n}function Us(e){for(var n=0,t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?n=10*n+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:n-1}}function hr(e){for(var n=e.c+1,t="";n;n=(n-1)/26|0)t=String.fromCharCode((n-1)%26+65)+t;return t+(e.r+1)}function su(e){var n=e.indexOf(":");return-1==n?{s:Us(e),e:Us(e)}:{s:Us(e.slice(0,n)),e:Us(e.slice(n+1))}}function kr(e,n){return typeof n>"u"||"number"==typeof n?kr(e.s,e.e):("string"!=typeof e&&(e=hr(e)),"string"!=typeof n&&(n=hr(n)),e==n?e:e+":"+n)}function ui(e){var n={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=e.length;for(t=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(n.s.c=--t,t=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(n.s.r=--t,r===s||10!=i)return n.e.c=n.s.c,n.e.r=n.s.r,n;for(++r,t=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(n.e.c=--t,t=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return n.e.r=--t,n}function hf(e,n,t){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&t&&t.dateNF&&(e.z=t.dateNF),"e"==e.t?Up[e.v]||e.v:function Rz(e,n){var t="d"==e.t&&n instanceof Date;if(null!=e.z)try{return e.w=nu(e.z,t?sa(n):n)}catch{}try{return e.w=nu((e.XF||{}).numFmtId||(t?14:0),t?sa(n):n)}catch{return""+n}}(e,null==n?e.v:n))}function Rg(e,n){var t=n&&n.sheet?n.sheet:"Sheet1",r={};return r[t]=e,{SheetNames:[t],Sheets:r}}function Nz(e,n,t){var r=t||{},i=e?Array.isArray(e):r.dense;null!=Xs&&null==i&&(i=Xs);var s=e||(i?[]:{}),a=0,l=0;if(s&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var d="string"==typeof r.origin?Us(r.origin):r.origin;a=d.r,l=d.c}s["!ref"]||(s["!ref"]="A1:A1")}var m={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var y=ui(s["!ref"]);m.s.c=y.s.c,m.s.r=y.s.r,m.e.c=Math.max(m.e.c,y.e.c),m.e.r=Math.max(m.e.r,y.e.r),-1==a&&(m.e.r=a=y.e.r+1)}for(var T=0;T!=n.length;++T)if(n[T]){if(!Array.isArray(n[T]))throw new Error("aoa_to_sheet expects an array of arrays");for(var D=0;D!=n[T].length;++D)if(!(typeof n[T][D]>"u")){var I={v:n[T][D]},F=a+T,L=l+D;if(m.s.r>F&&(m.s.r=F),m.s.c>L&&(m.s.c=L),m.e.r<F&&(m.e.r=F),m.e.c<L&&(m.e.c=L),!n[T][D]||"object"!=typeof n[T][D]||Array.isArray(n[T][D])||n[T][D]instanceof Date)if(Array.isArray(I.v)&&(I.f=n[T][D][1],I.v=I.v[0]),null===I.v)if(I.f)I.t="n";else if(r.nullError)I.t="e",I.v=0;else{if(!r.sheetStubs)continue;I.t="z"}else"number"==typeof I.v?I.t="n":"boolean"==typeof I.v?I.t="b":I.v instanceof Date?(I.z=r.dateNF||Zn[14],r.cellDates?(I.t="d",I.w=nu(I.z,sa(I.v))):(I.t="n",I.v=sa(I.v),I.w=nu(I.z,I.v))):I.t="s";else I=n[T][D];if(i)s[F]||(s[F]=[]),s[F][L]&&s[F][L].z&&(I.z=s[F][L].z),s[F][L]=I;else{var B=hr({c:L,r:F});s[B]&&s[B].z&&(I.z=s[B].z),s[B]=I}}}return m.s.c<1e7&&(s["!ref"]=kr(m)),s}function zv(e,n){return Nz(null,e,n)}function cl(e){var n=e.read_shift(4);return 0===n?"":e.read_shift(n,"dbcs")}function Cre(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function FP(e,n){var t=e.l,r=e.read_shift(1),i=cl(e),s=[],a={t:i,h:i};if(1&r){for(var l=e.read_shift(4),d=0;d!=l;++d)s.push(Cre(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=t+n,a}var Ere=FP;function Yu(e){var n=e.read_shift(4),t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:n,iStyleRef:t}}function $_(e){var n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:n}}var Dre=cl;function RP(e){var n=e.read_shift(4);return 0===n||4294967295===n?"":e.read_shift(n,"dbcs")}var Mre=cl,BP=RP;function VP(e){var n=e.slice(e.l,e.l+4),t=1&n[0],r=2&n[0];e.l+=4;var i=0===r?zS([0,0,0,0,252&n[0],n[1],n[2],n[3]],0):j_(n,0)>>2;return t?i/100:i}function Vz(e){var n={s:{},e:{}};return n.s.r=e.read_shift(4),n.e.r=e.read_shift(4),n.s.c=e.read_shift(4),n.e.c=e.read_shift(4),n}var G_=Vz;function ul(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Uz(e,n){var r=e.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return e.l-=4,e.read_shift(0,1==n?"lpstr":"lpwstr")}var UP=2,Cc=3,jz=12,Hz=81,Bre=[80,Hz],jP={1:{n:"CodePage",t:UP},2:{n:"Category",t:80},3:{n:"PresentationFormat",t:80},4:{n:"ByteCount",t:Cc},5:{n:"LineCount",t:Cc},6:{n:"ParagraphCount",t:Cc},7:{n:"SlideCount",t:Cc},8:{n:"NoteCount",t:Cc},9:{n:"HiddenCount",t:Cc},10:{n:"MultimediaClipCount",t:Cc},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:80},15:{n:"Company",t:80},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:Cc},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:Cc,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:80},27:{n:"ContentStatus",t:80},28:{n:"Language",t:80},29:{n:"Version",t:80},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},HP={1:{n:"CodePage",t:UP},2:{n:"Title",t:80},3:{n:"Subject",t:80},4:{n:"Author",t:80},5:{n:"Keywords",t:80},6:{n:"Comments",t:80},7:{n:"Template",t:80},8:{n:"LastAuthor",t:80},9:{n:"RevNumber",t:80},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:Cc},15:{n:"WordCount",t:Cc},16:{n:"CharCount",t:Cc},17:{n:"Thumbnail",t:71},18:{n:"Application",t:80},19:{n:"DocSecurity",t:Cc},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},$z={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},zre=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Vre(e){return e.map(function(n){return[n>>16&255,n>>8&255,255&n]})}var q_=Qi(Vre([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Up={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Wz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},$P={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Ar={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function c2(e){var n=e.lastIndexOf("/");return e.slice(0,n+1)+"_rels/"+e.slice(n+1)+".rels"}function u2(e,n){var t={"!id":{}};if(!e)return t;"/"!==n.charAt(0)&&(n="/"+n);var r={};return(e.match(al)||[]).forEach(function(i){var s=ur(i);if("<Relationship"===s[0]){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var l="External"===s.TargetMode?s.Target:n2(s.Target,n);t[l]=a,r[s.Id]=a}}),t["!id"]=r,t}var Hre="application/vnd.oasis.opendocument.spreadsheet",qu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Xre=function(){for(var e=new Array(qu.length),n=0;n<qu.length;++n){var t=qu[n],r="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);e[n]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return e}();function qz(e){var n={};e=Yi(e);for(var t=0;t<qu.length;++t){var r=qu[t],i=e.match(Xre[t]);null!=i&&i.length>0&&(n[r[1]]=Si(i[1])),"date"===r[2]&&n[r[1]]&&(n[r[1]]=Vs(n[r[1]]))}return n}var X_=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Kz(e,n,t,r){var i=[];if("string"==typeof e)i=yz(e,r);else for(var s=0;s<e.length;++s)i=i.concat(e[s].map(function(y){return{v:y}}));var a="string"==typeof n?yz(n,r).map(function(y){return y.v}):n,l=0,d=0;if(a.length>0)for(var m=0;m!==i.length;m+=2){switch(d=+i[m+1].v,i[m].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":t.Worksheets=d,t.SheetNames=a.slice(l,l+d);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":t.NamedRanges=d,t.DefinedNames=a.slice(l,l+d);break;case"Charts":case"Diagramme":t.Chartsheets=d,t.ChartNames=a.slice(l,l+d)}l+=d}}var qP,Kre=/<[^>]+>[^<]*/g,YP={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Qre(e,n,t){qP||(qP=OS(YP)),e[n=qP[n]||n]=t}function XP(e){var n=e.read_shift(4),t=e.read_shift(4);return new Date(1e3*(t/1e7*Math.pow(2,32)+n/1e7-11644473600)).toISOString().replace(/\.000/,"")}function e8(e,n,t){var r=e.l,i=e.read_shift(0,"lpstr-cp");if(t)for(;e.l-r&3;)++e.l;return i}function t8(e,n,t){var r=e.read_shift(0,"lpwstr");return t&&(e.l+=4-(r.length+1&3)&3),r}function n8(e,n,t){return 31===n?t8(e):e8(e,0,t)}function ZP(e,n,t){return n8(e,n,!1===t?0:4)}function oie(e){var n=e.l,t=GS(e,Hz);return 0==e[e.l]&&0==e[e.l+1]&&e.l-n&2&&(e.l+=2),[t,GS(e,Cc)]}function r8(e,n){for(var t=e.read_shift(4),r={},i=0;i!=t;++i){var s=e.read_shift(4),a=e.read_shift(4);r[s]=e.read_shift(a,1200===n?"utf16le":"utf8").replace(ol,"").replace(Jw,"!"),1200===n&&a%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),r}function i8(e){var n=e.read_shift(4),t=e.slice(e.l,e.l+n);return e.l+=n,(3&n)>0&&(e.l+=4-(3&n)&3),t}function GS(e,n,t){var i,r=e.read_shift(2),s=t||{};if(e.l+=2,n!==jz&&r!==n&&-1===Bre.indexOf(n)&&(4126!=(65534&n)||4126!=(65534&r)))throw new Error("Expected type "+n+" saw "+r);switch(n===jz?r:n){case 2:return i=e.read_shift(2,"i"),s.raw||(e.l+=2),i;case 3:return e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return e.read_shift(4);case 30:return e8(e,0,4).replace(ol,"");case 31:return t8(e);case 64:return XP(e);case 65:return i8(e);case 71:return function lie(e){var n={};return n.Size=e.read_shift(4),e.l+=n.Size+3-(n.Size-1)%4,n}(e);case 80:return ZP(e,r,!s.raw).replace(ol,"");case 81:return function rie(e,n){if(!n)throw new Error("VtUnalignedString must have positive length");return n8(e,n,0)}(e,r).replace(ol,"");case 4108:return function aie(e){for(var n=e.read_shift(4),t=[],r=0;r<n/2;++r)t.push(oie(e));return t}(e);case 4126:case 4127:return 4127==r?function iie(e){for(var n=e.read_shift(4),t=[],r=0;r!=n;++r){var i=e.l;t[r]=e.read_shift(0,"lpwstr").replace(ol,""),e.l-i&2&&(e.l+=2)}return t}(e):function sie(e){for(var n=e.read_shift(4),t=[],r=0;r!=n;++r)t[r]=e.read_shift(0,"lpstr-cp").replace(ol,"");return t}(e);default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+r)}}function o8(e,n){var t=e.l,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0,l=0,d=-1,m={};for(a=0;a!=i;++a){var y=e.read_shift(4),T=e.read_shift(4);s[a]=[y,T+t]}s.sort(function(Z,q){return Z[1]-q[1]});var D={};for(a=0;a!=i;++a){if(e.l!==s[a][1]){var I=!0;if(a>0&&n)switch(n[s[a-1][0]].t){case 2:e.l+2===s[a][1]&&(e.l+=2,I=!1);break;case 80:case 4108:e.l<=s[a][1]&&(e.l=s[a][1],I=!1)}if((!n||0==a)&&e.l<=s[a][1]&&(I=!1,e.l=s[a][1]),I)throw new Error("Read Error: Expected address "+s[a][1]+" at "+e.l+" :"+a)}if(n){var F=n[s[a][0]];if(D[F.n]=GS(e,F.t,{raw:!0}),"version"===F.p&&(D[F.n]=String(D[F.n]>>16)+"."+("0000"+String(65535&D[F.n])).slice(-4)),"CodePage"==F.n)switch(D[F.n]){case 0:D[F.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:$u(l=D[F.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+D[F.n])}}else if(1===s[a][0]){if(l=D.CodePage=GS(e,UP),$u(l),-1!==d){var L=e.l;e.l=s[d][1],m=r8(e,l),e.l=L}}else if(0===s[a][0]){if(0===l){d=a,e.l=s[a+1][1];continue}m=r8(e,l)}else{var G,B=m[s[a][0]];switch(e[e.l]){case 65:e.l+=4,G=i8(e);break;case 30:case 31:e.l+=4,G=ZP(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,G=e.read_shift(4,"i");break;case 19:e.l+=4,G=e.read_shift(4);break;case 5:e.l+=4,G=e.read_shift(8,"f");break;case 11:e.l+=4,G=wo(e,4);break;case 64:e.l+=4,G=Vs(XP(e));break;default:throw new Error("unparsed value: "+e[e.l])}D[B]=G}}return e.l=t+r,D}function c8(e,n,t){var r=e.content;if(!r)return{};Wa(r,0);var i,s,a,l,d=0;r.chk("feff","Byte Order: "),r.read_shift(2);var m=r.read_shift(4),y=r.read_shift(16);if(y!==Xn.utils.consts.HEADER_CLSID&&y!==t)throw new Error("Bad PropertySet CLSID "+y);if(1!==(i=r.read_shift(4))&&2!==i)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),l=r.read_shift(4),1===i&&l!==r.l)throw new Error("Length mismatch: "+l+" !== "+r.l);2===i&&(a=r.read_shift(16),d=r.read_shift(4));var F,T=o8(r,n),D={SystemIdentifier:m};for(var I in T)D[I]=T[I];if(D.FMTID=s,1===i)return D;if(d-r.l==2&&(r.l+=2),r.l!==d)throw new Error("Length mismatch 2: "+r.l+" !== "+d);try{F=o8(r,null)}catch{}for(I in F)D[I]=F[I];return D.FMTID=[s,a],D}function Ng(e,n){return e.read_shift(n),null}function wo(e,n){return 1===e.read_shift(n)}function $o(e){return e.read_shift(2,"u")}function h8(e,n){return function hie(e,n,t){for(var r=[],i=e.l+n;e.l<i;)r.push(t(e,i-e.l));if(i!==e.l)throw new Error("Slurp error");return r}(e,n,$o)}function h2(e,n,t){var r=e.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont",s=Qc;t&&t.biff>=8&&(Qc=1200),t&&8!=t.biff?12==t.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont"),t.biff>=2&&t.biff<=5&&(i="cpstr");var l=r?e.read_shift(r,i):"";return Qc=s,l}function fie(e){var n=Qc;Qc=1200;var d,t=e.read_shift(2),r=e.read_shift(1),i=4&r,s=8&r,a=1+(1&r),l=0,m={};s&&(l=e.read_shift(2)),i&&(d=e.read_shift(4));var T=0===t?"":e.read_shift(t,2==a?"dbcs-cont":"sbcs-cont");return s&&(e.l+=4*l),i&&(e.l+=d),m.t=T,s||(m.raw="<t>"+m.t+"</t>",m.r=m.t),Qc=n,m}function Z_(e,n,t){if(t){if(t.biff>=2&&t.biff<=5)return e.read_shift(n,"cpstr");if(t.biff>=12)return e.read_shift(n,"dbcs-cont")}var i=e.read_shift(1);return e.read_shift(n,0===i?"sbcs-cont":"dbcs-cont")}function d2(e,n,t){var r=e.read_shift(t&&2==t.biff?1:2);return 0===r?(e.l++,""):Z_(e,r,t)}function K_(e,n,t){if(t.biff>5)return d2(e,0,t);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,t.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function YS(e){var n=e.read_shift(4);return n>0?e.read_shift(n,"utf16le").replace(ol,""):""}function m8(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function g8(e,n){var t=m8(e);return t[3]=0,t}function df(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function Cie(e,n,t){var r=t.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function _8(e){return[e.read_shift(2),VP(e)]}function qS(e){var n=e.read_shift(2),t=e.read_shift(2);return{s:{c:e.read_shift(2),r:n},e:{c:e.read_shift(2),r:t}}}function v8(e){var n=e.read_shift(2),t=e.read_shift(2);return{s:{c:e.read_shift(1),r:n},e:{c:e.read_shift(1),r:t}}}var Eie=v8;function x8(e){e.l+=4;var n=e.read_shift(2),t=e.read_shift(2),r=e.read_shift(2);return e.l+=12,[t,n,r]}function hl(e){e.l+=2,e.l+=e.read_shift(2)}var Mie={0:hl,4:hl,5:hl,6:hl,7:function Die(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:hl,9:hl,10:hl,11:hl,12:hl,13:function Sie(e){var n={};return e.l+=4,e.l+=16,n.fSharedNote=e.read_shift(2),e.l+=4,n},14:hl,15:hl,16:hl,17:hl,18:hl,19:hl,20:hl,21:x8};function XS(e,n){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=e.read_shift(2),(n-=2)>=2&&(t.dt=e.read_shift(2),e.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(n>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return e.read_shift(n),t}function b8(e,n,t){var r=0;t&&2==t.biff||(r=e.read_shift(2));var i=e.read_shift(2);return t&&2==t.biff&&(r=1-(i>>15),i&=32767),[{Unsynced:1&r,DyZero:(2&r)>>1,ExAsc:(4&r)>>2,ExDsc:(8&r)>>3},i]}var tse=K_;function w8(e,n,t){var r=e.l+n,i=8!=t.biff&&t.biff?2:4,s=e.read_shift(i),a=e.read_shift(i),l=e.read_shift(2),d=e.read_shift(2);return e.l=r,{s:{r:s,c:l},e:{r:a,c:d}}}function T8(e,n,t){var r=df(e);(2==t.biff||9==n)&&++e.l;var i=function die(e){var n=e.read_shift(1);return 1===e.read_shift(1)?n:1===n}(e);return r.val=i,r.t=!0===i||!1===i?"b":"e",r}var E8=function wie(e,n,t){return 0===n?"":K_(e,0,t)};function S8(e,n,t){var i,r=e.read_shift(2),s={fBuiltIn:1&r,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return 14849===t.sbcch&&(i=function Tie(e,n,t){e.l+=4;var r=e.l+(n-=4),i=h2(e,0,t),s=e.read_shift(2);if(s!==(r-=e.l))throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return e.l+=s,i}(e,n-2,t)),s.body=i||e.read_shift(n-2),"string"==typeof i&&(s.Name=i),s}var pse=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function D8(e,n,t){var r=e.l+n,i=e.read_shift(2),s=e.read_shift(1),a=e.read_shift(1),l=e.read_shift(t&&2==t.biff?1:2),d=0;(!t||t.biff>=5)&&(5!=t.biff&&(e.l+=2),d=e.read_shift(2),5==t.biff&&(e.l+=2),e.l+=4);var m=Z_(e,a,t);32&i&&(m=pse[m.charCodeAt(0)]);var y=r-e.l;t&&2==t.biff&&--y;var T=r!=e.l&&0!==l&&y>0?function kce(e,n,t,r){var a,i=e.l+n,s=x2(e,r,t);return i!==e.l&&(a=v2(e,i-e.l,s,t)),[s,a]}(e,y,t,l):[];return{chKey:s,Name:m,itab:d,rgce:T}}function M8(e,n,t){if(t.biff<8)return function mse(e,n,t){3==e[e.l+1]&&e[e.l]++;var r=h2(e,0,t);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,t);for(var r=[],i=e.l+n,s=e.read_shift(t.biff>8?4:2);0!=s--;)r.push(Cie(e,0,t));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function k8(e,n,t){var r=Eie(e,6);switch(t.biff){case 2:e.l++,n-=7;break;case 3:case 4:e.l+=2,n-=8;break;default:e.l+=6,n-=12}return[r,Dce(e,n,t)]}var Tse={8:function(e,n){var t=e.l+n;e.l+=10;var r=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var i=e.read_shift(1);return e.l+=i,e.l=t,{fmt:r}}};function A8(e,n,t){if(!t.cellStyles)return ll(e,n);var r=t&&t.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),l=e.read_shift(r),d=e.read_shift(2);2==r&&(e.l+=2);var m={s:i,e:s,w:a,ixfe:l,flags:d};return(t.biff>=5||!t.biff)&&(m.level=d>>8&7),m}var Vse=df,Use=h8,jse=d2,Jse=[2,3,48,49,131,139,140,245],JP=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},n=OS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,d){var m=d||{};m.dateNF||(m.dateNF="yyyymmdd");var y=zv(function t(l,d){var m=[],y=Ag(1);switch(d.type){case"base64":y=tu(eu(l));break;case"binary":y=tu(l);break;case"buffer":case"array":y=l}Wa(y,0);var T=y.read_shift(1),D=!!(136&T),I=!1,F=!1;switch(T){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:I=!0,D=!0;break;case 140:F=!0;break;default:throw new Error("DBF Unsupported Version: "+T.toString(16))}var L=0,B=521;2==T&&(L=y.read_shift(2)),y.l+=3,2!=T&&(L=y.read_shift(4)),L>1048576&&(L=1e6),2!=T&&(B=y.read_shift(2));var G=y.read_shift(2),Z=d.codepage||1252;2!=T&&(y.l+=16,y.read_shift(1),0!==y[y.l]&&(Z=e[y[y.l]]),y.l+=1,y.l+=2),F&&(y.l+=36);for(var q=[],oe={},_e=Math.min(y.length,2==T?521:B-10-(I?264:0)),fe=F?32:11;y.l<_e&&13!=y[y.l];)switch(oe={},oe.name=wi.utils.decode(Z,y.slice(y.l,y.l+fe)).replace(/[\u0000\r\n].*$/g,""),y.l+=fe,oe.type=String.fromCharCode(y.read_shift(1)),2!=T&&!F&&(oe.offset=y.read_shift(4)),oe.len=y.read_shift(1),2==T&&(oe.offset=y.read_shift(2)),oe.dec=y.read_shift(1),oe.name.length&&q.push(oe),2!=T&&(y.l+=F?13:14),oe.type){case"B":(!I||8!=oe.len)&&d.WTF&&console.log("Skipping "+oe.name+":"+oe.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+oe.name+":"+oe.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+oe.type)}if(13!==y[y.l]&&(y.l=B-1),13!==y.read_shift(1))throw new Error("DBF Terminator not found "+y.l+" "+y[y.l]);y.l=B;var ae=0,De=0;for(m[0]=[],De=0;De!=q.length;++De)m[0][De]=q[De].name;for(;L-- >0;)if(42!==y[y.l])for(++y.l,m[++ae]=[],De=0,De=0;De!=q.length;++De){var Ie=y.slice(y.l,y.l+q[De].len);y.l+=q[De].len,Wa(Ie,0);var qe=wi.utils.decode(Z,Ie);switch(q[De].type){case"C":qe.trim().length&&(m[ae][De]=qe.replace(/\s+$/,""));break;case"D":m[ae][De]=8===qe.length?new Date(+qe.slice(0,4),+qe.slice(4,6)-1,+qe.slice(6,8)):qe;break;case"F":m[ae][De]=parseFloat(qe.trim());break;case"+":case"I":m[ae][De]=F?2147483648^Ie.read_shift(-4,"i"):Ie.read_shift(4,"i");break;case"L":switch(qe.trim().toUpperCase()){case"Y":case"T":m[ae][De]=!0;break;case"N":case"F":m[ae][De]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+qe+"|")}break;case"M":if(!D)throw new Error("DBF Unexpected MEMO for type "+T.toString(16));m[ae][De]="##MEMO##"+(F?parseInt(qe.trim(),10):Ie.read_shift(4));break;case"N":(qe=qe.replace(/\u0000/g,"").trim())&&"."!=qe&&(m[ae][De]=+qe||0);break;case"@":m[ae][De]=new Date(Ie.read_shift(-8,"f")-621356832e5);break;case"T":m[ae][De]=new Date(864e5*(Ie.read_shift(4)-2440588)+Ie.read_shift(4));break;case"Y":m[ae][De]=Ie.read_shift(4,"i")/1e4+Ie.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":m[ae][De]=-Ie.read_shift(-8,"f");break;case"B":if(I&&8==q[De].len){m[ae][De]=Ie.read_shift(8,"f");break}case"G":case"P":Ie.l+=q[De].len;break;case"0":if("_NullFlags"===q[De].name)break;default:throw new Error("DBF Unsupported data type "+q[De].type)}}else y.l+=G;if(2!=T&&y.l<y.length&&26!=y[y.l++])throw new Error("DBF EOF Marker missing "+(y.l-1)+" of "+y.length+" "+y[y.l-1].toString(16));return d&&d.sheetRows&&(m=m.slice(0,d.sheetRows)),d.DBF=q,m}(l,m),m);return y["!cols"]=m.DBF.map(function(T){return{wch:T.len,DBF:T}}),delete m.DBF,y}var s={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function i(l,d){try{return Rg(r(l,d),d)}catch(m){if(d&&d.WTF)throw m}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function a(l,d){var m=d||{};if(+m.codepage>=0&&$u(+m.codepage),"string"==m.type)throw new Error("Cannot write DBF to JS string");var y=$l(),T=oD(l,{header:1,raw:!0,cellDates:!0}),D=T[0],I=T.slice(1),F=l["!cols"]||[],L=0,B=0,G=0,Z=1;for(L=0;L<D.length;++L)if(((F[L]||{}).DBF||{}).name)D[L]=F[L].DBF.name,++G;else if(null!=D[L]){if(++G,"number"==typeof D[L]&&(D[L]=D[L].toString(10)),"string"!=typeof D[L])throw new Error("DBF Invalid column name "+D[L]+" |"+typeof D[L]+"|");if(D.indexOf(D[L])!==L)for(B=0;B<1024;++B)if(-1==D.indexOf(D[L]+"_"+B)){D[L]+="_"+B;break}}var q=ui(l["!ref"]),oe=[],_e=[],fe=[];for(L=0;L<=q.e.c-q.s.c;++L){var ae="",De="",Ie=0,qe=[];for(B=0;B<I.length;++B)null!=I[B][L]&&qe.push(I[B][L]);if(0!=qe.length&&null!=D[L]){for(B=0;B<qe.length;++B){switch(typeof qe[B]){case"number":De="B";break;case"string":default:De="C";break;case"boolean":De="L";break;case"object":De=qe[B]instanceof Date?"D":"C"}Ie=Math.max(Ie,String(qe[B]).length),ae=ae&&ae!=De?"C":De}Ie>250&&(Ie=250),"C"==(De=((F[L]||{}).DBF||{}).type)&&F[L].DBF.len>Ie&&(Ie=F[L].DBF.len),"B"==ae&&"N"==De&&(ae="N",fe[L]=F[L].DBF.dec,Ie=F[L].DBF.len),_e[L]="C"==ae||"N"==De?Ie:s[ae]||0,Z+=_e[L],oe[L]=ae}else oe[L]="?"}var Je=y.next(32);for(Je.write_shift(4,318902576),Je.write_shift(4,I.length),Je.write_shift(2,296+32*G),Je.write_shift(2,Z),L=0;L<4;++L)Je.write_shift(4,0);for(Je.write_shift(4,0|(+n[B_]||3)<<8),L=0,B=0;L<D.length;++L)if(null!=D[L]){var $e=y.next(32),jt=(D[L].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);$e.write_shift(1,jt,"sbcs"),$e.write_shift(1,"?"==oe[L]?"C":oe[L],"sbcs"),$e.write_shift(4,B),$e.write_shift(1,_e[L]||s[oe[L]]||0),$e.write_shift(1,fe[L]||0),$e.write_shift(1,2),$e.write_shift(4,0),$e.write_shift(1,0),$e.write_shift(4,0),$e.write_shift(4,0),B+=_e[L]||s[oe[L]]||0}var ln=y.next(264);for(ln.write_shift(4,13),L=0;L<65;++L)ln.write_shift(4,0);for(L=0;L<I.length;++L){var zt=y.next(Z);for(zt.write_shift(1,0),B=0;B<D.length;++B)if(null!=D[B])switch(oe[B]){case"L":zt.write_shift(1,null==I[L][B]?63:I[L][B]?84:70);break;case"B":zt.write_shift(8,I[L][B]||0,"f");break;case"N":var yt="0";for("number"==typeof I[L][B]&&(yt=I[L][B].toFixed(fe[B]||0)),G=0;G<_e[B]-yt.length;++G)zt.write_shift(1,32);zt.write_shift(1,yt,"sbcs");break;case"D":I[L][B]?(zt.write_shift(4,("0000"+I[L][B].getFullYear()).slice(-4),"sbcs"),zt.write_shift(2,("00"+(I[L][B].getMonth()+1)).slice(-2),"sbcs"),zt.write_shift(2,("00"+I[L][B].getDate()).slice(-2),"sbcs")):zt.write_shift(8,"00000000","sbcs");break;case"C":var xt=String(null!=I[L][B]?I[L][B]:"").slice(0,_e[B]);for(zt.write_shift(1,xt,"sbcs"),G=0;G<_e[B]-xt.length;++G)zt.write_shift(1,32)}}return y.next(1).write_shift(1,26),y.end()}}}(),I8=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},n=new RegExp("\x1bN("+Zs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(D,I){var F=e[I];return"number"==typeof F?fP(F):F},r=function(D,I,F){var L=I.charCodeAt(0)-32<<4|F.charCodeAt(0)-48;return 59==L?D:fP(L)};function s(D,I){var Je,F=D.split(/[\n\r]+/),L=-1,B=-1,G=0,Z=0,q=[],oe=[],_e=null,fe={},ae=[],De=[],Ie=[],qe=0;for(+I.codepage>=0&&$u(+I.codepage);G!==F.length;++G){qe=0;var zt,$e=F[G].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(n,t),jt=$e.replace(/;;/g,"\0").split(";").map(function(je){return je.replace(/\u0000/g,";")});if($e.length>0)switch(jt[0]){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==jt[1].charAt(0)&&oe.push($e.slice(3).replace(/;;/g,";"));break;case"C":var yt=!1,xt=!1,Zt=!1,Pt=!1,an=-1,St=-1;for(Z=1;Z<jt.length;++Z)switch(jt[Z].charAt(0)){case"A":case"G":break;case"X":B=parseInt(jt[Z].slice(1))-1,xt=!0;break;case"Y":for(L=parseInt(jt[Z].slice(1))-1,xt||(B=0),Je=q.length;Je<=L;++Je)q[Je]=[];break;case"K":'"'===(zt=jt[Z].slice(1)).charAt(0)?zt=zt.slice(1,zt.length-1):"TRUE"===zt?zt=!0:"FALSE"===zt?zt=!1:isNaN(Yh(zt))?isNaN(Rv(zt).getDate())||(zt=Vs(zt)):(zt=Yh(zt),null!==_e&&V_(_e)&&(zt=RS(zt))),typeof wi<"u"&&"string"==typeof zt&&"string"!=(I||{}).type&&(I||{}).codepage&&(zt=wi.utils.decode(I.codepage,zt)),yt=!0;break;case"E":Pt=!0;var Pe=$v(jt[Z].slice(1),{r:L,c:B});q[L][B]=[q[L][B],Pe];break;case"S":Zt=!0,q[L][B]=[q[L][B],"S5S"];break;case"R":an=parseInt(jt[Z].slice(1))-1;break;case"C":St=parseInt(jt[Z].slice(1))-1;break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+$e)}if(yt&&(q[L][B]&&2==q[L][B].length?q[L][B][0]=zt:q[L][B]=zt,_e=null),Zt){if(Pt)throw new Error("SYLK shared formula cannot have own formula");var ut=an>-1&&q[an][St];if(!ut||!ut[1])throw new Error("SYLK shared formula cannot find base");q[L][B][1]=K8(ut[1],{r:L-an,c:B-St})}break;case"F":var Re=0;for(Z=1;Z<jt.length;++Z)switch(jt[Z].charAt(0)){case"X":B=parseInt(jt[Z].slice(1))-1,++Re;break;case"Y":for(L=parseInt(jt[Z].slice(1))-1,Je=q.length;Je<=L;++Je)q[Je]=[];break;case"M":qe=parseInt(jt[Z].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":_e=oe[parseInt(jt[Z].slice(1))];break;case"W":for(Ie=jt[Z].slice(1).split(" "),Je=parseInt(Ie[0],10);Je<=parseInt(Ie[1],10);++Je)qe=parseInt(Ie[2],10),De[Je-1]=0===qe?{hidden:!0}:{wch:qe},ey(De[Je-1]);break;case"C":De[B=parseInt(jt[Z].slice(1))-1]||(De[B]={});break;case"R":ae[L=parseInt(jt[Z].slice(1))-1]||(ae[L]={}),qe>0?(ae[L].hpt=qe,ae[L].hpx=jv(qe)):0===qe&&(ae[L].hidden=!0);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+$e)}Re<1&&(_e=null);break;default:if(I&&I.WTF)throw new Error("SYLK bad record "+$e)}}return ae.length>0&&(fe["!rows"]=ae),De.length>0&&(fe["!cols"]=De),I&&I.sheetRows&&(q=q.slice(0,I.sheetRows)),[q,fe]}function a(D,I){var F=function i(D,I){switch(I.type){case"base64":return s(eu(D),I);case"binary":return s(D,I);case"buffer":return s(Hr&&Buffer.isBuffer(D)?D.toString("binary"):Ig(D),I);case"array":return s(U_(D),I)}throw new Error("Unrecognized type "+I.type)}(D,I),B=F[1],G=zv(F[0],I);return Zs(B).forEach(function(Z){G[Z]=B[Z]}),G}function d(D,I,F,L){var B="C;Y"+(F+1)+";X"+(L+1)+";K";switch(D.t){case"n":B+=D.v||0,D.f&&!D.F&&(B+=";E"+oO(D.f,{r:F,c:L}));break;case"b":B+=D.v?"TRUE":"FALSE";break;case"e":B+=D.w||D.v;break;case"d":B+='"'+(D.w||D.v)+'"';break;case"s":B+='"'+D.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return B}return e["|"]=254,{to_workbook:function l(D,I){return Rg(a(D,I),I)},to_sheet:a,from_sheet:function T(D,I){var G,F=["ID;PWXL;N;E"],L=[],B=ui(D["!ref"]),Z=Array.isArray(D),q="\r\n";F.push("P;PGeneral"),F.push("F;P0;DG0G8;M255"),D["!cols"]&&function m(D,I){I.forEach(function(F,L){var B="F;W"+(L+1)+" "+(L+1)+" ";F.hidden?B+="0":("number"==typeof F.width&&!F.wpx&&(F.wpx=p2(F.width)),"number"==typeof F.wpx&&!F.wch&&(F.wch=m2(F.wpx)),"number"==typeof F.wch&&(B+=Math.round(F.wch)))," "!=B.charAt(B.length-1)&&D.push(B)})}(F,D["!cols"]),D["!rows"]&&function y(D,I){I.forEach(function(F,L){var B="F;";F.hidden?B+="M0;":F.hpt?B+="M"+20*F.hpt+";":F.hpx&&(B+="M"+20*g2(F.hpx)+";"),B.length>2&&D.push(B+"R"+(L+1))})}(F,D["!rows"]),F.push("B;Y"+(B.e.r-B.s.r+1)+";X"+(B.e.c-B.s.c+1)+";D"+[B.s.c,B.s.r,B.e.c,B.e.r].join(" "));for(var oe=B.s.r;oe<=B.e.r;++oe)for(var _e=B.s.c;_e<=B.e.c;++_e){var fe=hr({r:oe,c:_e});(G=Z?(D[oe]||[])[_e]:D[fe])&&(null!=G.v||G.f&&!G.F)&&L.push(d(G,0,oe,_e))}return F.join(q)+q+L.join(q)+q+"E"+q}}}(),P8=function(){function n(s,a){for(var l=s.split("\n"),d=-1,m=-1,y=0,T=[];y!==l.length;++y)if("BOT"!==l[y].trim()){if(!(d<0)){for(var D=l[y].trim().split(","),I=D[0],F=D[1],L=l[++y]||"";1&(L.match(/["]/g)||[]).length&&y<l.length-1;)L+="\n"+l[++y];switch(L=L.trim(),+I){case-1:if("BOT"===L){T[++d]=[],m=0;continue}if("EOD"!==L)throw new Error("Unrecognized DIF special command "+L);break;case 0:T[d][m]="TRUE"===L||"FALSE"!==L&&(isNaN(Yh(F))?isNaN(Rv(F).getDate())?F:Vs(F):Yh(F)),++m;break;case 1:L=(L=L.slice(1,L.length-1)).replace(/""/g,'"'),Xw&&L&&L.match(/^=".*"$/)&&(L=L.slice(2,-1)),T[d][m++]=""!==L?L:null}if("EOD"===L)break}}else T[++d]=[],m=0;return a&&a.sheetRows&&(T=T.slice(0,a.sheetRows)),T}function t(s,a){return zv(function e(s,a){switch(a.type){case"base64":return n(eu(s),a);case"binary":return n(s,a);case"buffer":return n(Hr&&Buffer.isBuffer(s)?s.toString("binary"):Ig(s),a);case"array":return n(U_(s),a)}throw new Error("Unrecognized type "+a.type)}(s,a),a)}return{to_workbook:function r(s,a){return Rg(t(s,a),a)},to_sheet:t,from_sheet:function(){var s=function(d,m,y,T,D){d.push(m),d.push(y+","+T),d.push('"'+D.replace(/"/g,'""')+'"')},a=function(d,m,y,T){d.push(m+","+y),d.push(1==m?'"'+T.replace(/"/g,'""')+'"':T)};return function(d){var T,m=[],y=ui(d["!ref"]),D=Array.isArray(d);s(m,"TABLE",0,1,"sheetjs"),s(m,"VECTORS",0,y.e.r-y.s.r+1,""),s(m,"TUPLES",0,y.e.c-y.s.c+1,""),s(m,"DATA",0,0,"");for(var I=y.s.r;I<=y.e.r;++I){a(m,-1,0,"BOT");for(var F=y.s.c;F<=y.e.c;++F){var L=hr({r:I,c:F});if(T=D?(d[I]||[])[F]:d[L])switch(T.t){case"n":var B=Xw?T.w:T.v;!B&&null!=T.v&&(B=T.v),null==B?a(m,1,0,Xw&&T.f&&!T.F?"="+T.f:""):a(m,0,B,"V");break;case"b":a(m,0,T.v?1:0,T.v?"TRUE":"FALSE");break;case"s":a(m,1,0,!Xw||isNaN(T.v)?T.v:'="'+T.v+'"');break;case"d":T.w||(T.w=nu(T.z||Zn[14],sa(Vs(T.v)))),Xw?a(m,0,T.w,"V"):a(m,1,0,T.w);break;default:a(m,1,0,"")}else a(m,1,0,"")}}return a(m,-1,0,"EOD"),m.join("\r\n")}}()}}(),O8=function(){function e(T){return T.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function n(T){return T.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(T,D){return zv(function t(T,D){for(var I=T.split("\n"),F=-1,L=-1,B=0,G=[];B!==I.length;++B){var Z=I[B].trim().split(":");if("cell"===Z[0]){var q=Us(Z[1]);if(G.length<=q.r)for(F=G.length;F<=q.r;++F)G[F]||(G[F]=[]);switch(F=q.r,L=q.c,Z[2]){case"t":G[F][L]=e(Z[3]);break;case"v":G[F][L]=+Z[3];break;case"vtf":var oe=Z[Z.length-1];case"vtc":G[F][L]="nl"===Z[3]?!!+Z[4]:+Z[4],"vtf"==Z[2]&&(G[F][L]=[G[F][L],oe])}}}return D&&D.sheetRows&&(G=G.slice(0,D.sheetRows)),G}(T,D),D)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),d="--SocialCalcSpreadsheetControlSave--";function m(T){if(!T||!T["!ref"])return"";for(var F,D=[],I=[],L="",B=su(T["!ref"]),G=Array.isArray(T),Z=B.s.r;Z<=B.e.r;++Z)for(var q=B.s.c;q<=B.e.c;++q)if(L=hr({r:Z,c:q}),(F=G?(T[Z]||[])[q]:T[L])&&null!=F.v&&"z"!==F.t){switch(I=["cell",L,"t"],F.t){case"s":case"str":I.push(n(F.v));break;case"n":F.f?(I[2]="vtf",I[3]="n",I[4]=F.v,I[5]=n(F.f)):(I[2]="v",I[3]=F.v);break;case"b":I[2]="vt"+(F.f?"f":"c"),I[3]="nl",I[4]=F.v?"1":"0",I[5]=n(F.f||(F.v?"TRUE":"FALSE"));break;case"d":var oe=sa(Vs(F.v));I[2]="vtc",I[3]="nd",I[4]=""+oe,I[5]=F.w||nu(F.z||Zn[14],oe);break;case"e":continue}D.push(I.join(":"))}return D.push("sheet:c:"+(B.e.c-B.s.c+1)+":r:"+(B.e.r-B.s.r+1)+":tvf:1"),D.push("valueformat:1:text-wiki"),D.join("\n")}return{to_workbook:function i(T,D){return Rg(r(T,D),D)},to_sheet:r,from_sheet:function y(T){return[s,a,l,a,m(T),d].join("\n")}}}(),Uv=function(){function e(y,T,D,I,F){F.raw?T[D][I]=y:""===y||(T[D][I]="TRUE"===y||"FALSE"!==y&&(isNaN(Yh(y))?isNaN(Rv(y).getDate())?y:Vs(y):Yh(y)))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(y){for(var T={},D=!1,I=0,F=0;I<y.length;++I)34==(F=y.charCodeAt(I))?D=!D:!D&&F in t&&(T[F]=(T[F]||0)+1);for(I in F=[],T)Object.prototype.hasOwnProperty.call(T,I)&&F.push([T[I],I]);if(!F.length)for(I in T=r)Object.prototype.hasOwnProperty.call(T,I)&&F.push([T[I],I]);return F.sort(function(L,B){return L[0]-B[0]||r[L[1]]-r[B[1]]}),t[F.pop()[1]]||44}function a(y,T){return!T||!T.PRN||T.FS||"sep="==y.slice(0,4)||y.indexOf("\t")>=0||y.indexOf(",")>=0||y.indexOf(";")>=0?function s(y,T){var D=T||{},I="";null!=Xs&&null==D.dense&&(D.dense=Xs);var F=D.dense?[]:{},L={s:{c:0,r:0},e:{c:0,r:0}};"sep="==y.slice(0,4)?13==y.charCodeAt(5)&&10==y.charCodeAt(6)?(I=y.charAt(4),y=y.slice(7)):13==y.charCodeAt(5)||10==y.charCodeAt(5)?(I=y.charAt(4),y=y.slice(6)):I=i(y.slice(0,1024)):I=D&&D.FS?D.FS:i(y.slice(0,1024));var B=0,G=0,Z=0,q=0,oe=0,_e=I.charCodeAt(0),fe=!1,ae=0,De=y.charCodeAt(0);y=y.replace(/\r\n/gm,"\n");var Ie=null!=D.dateNF?function Vne(e){var n="number"==typeof e?Zn[e]:e;return n=n.replace(Q6,"(\\d+)"),new RegExp("^"+n+"$")}(D.dateNF):null;function qe(){var Je=y.slice(q,oe),$e={};if('"'==Je.charAt(0)&&'"'==Je.charAt(Je.length-1)&&(Je=Je.slice(1,-1).replace(/""/g,'"')),0===Je.length)$e.t="z";else if(D.raw)$e.t="s",$e.v=Je;else if(0===Je.trim().length)$e.t="s",$e.v=Je;else if(61==Je.charCodeAt(0))34==Je.charCodeAt(1)&&34==Je.charCodeAt(Je.length-1)?($e.t="s",$e.v=Je.slice(2,-1).replace(/""/g,'"')):function fle(e){return 1!=e.length}(Je)?($e.t="n",$e.f=Je.slice(1)):($e.t="s",$e.v=Je);else if("TRUE"==Je)$e.t="b",$e.v=!0;else if("FALSE"==Je)$e.t="b",$e.v=!1;else if(isNaN(Z=Yh(Je)))if(!isNaN(Rv(Je).getDate())||Ie&&Je.match(Ie)){$e.z=D.dateNF||Zn[14];var jt=0;Ie&&Je.match(Ie)&&(Je=function Une(e,n,t){var r=-1,i=-1,s=-1,a=-1,l=-1,d=-1;(n.match(Q6)||[]).forEach(function(T,D){var I=parseInt(t[D+1],10);switch(T.toLowerCase().charAt(0)){case"y":r=I;break;case"d":s=I;break;case"h":a=I;break;case"s":d=I;break;case"m":a>=0?l=I:i=I}}),d>=0&&-1==l&&i>=0&&(l=i,i=-1);var m=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==m.length&&(m="0"+m),8==m.length&&(m="20"+m);var y=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return-1==a&&-1==l&&-1==d?m:-1==r&&-1==i&&-1==s?y:m+"T"+y}(0,D.dateNF,Je.match(Ie)||[]),jt=1),D.cellDates?($e.t="d",$e.v=Vs(Je,jt)):($e.t="n",$e.v=sa(Vs(Je,jt))),!1!==D.cellText&&($e.w=nu($e.z,$e.v instanceof Date?sa($e.v):$e.v)),D.cellNF||delete $e.z}else $e.t="s",$e.v=Je;else $e.t="n",!1!==D.cellText&&($e.w=Je),$e.v=Z;if("z"==$e.t||(D.dense?(F[B]||(F[B]=[]),F[B][G]=$e):F[hr({c:G,r:B})]=$e),De=y.charCodeAt(q=oe+1),L.e.c<G&&(L.e.c=G),L.e.r<B&&(L.e.r=B),ae==_e)++G;else if(G=0,++B,D.sheetRows&&D.sheetRows<=B)return!0}e:for(;oe<y.length;++oe)switch(ae=y.charCodeAt(oe)){case 34:34===De&&(fe=!fe);break;case _e:case 10:case 13:if(!fe&&qe())break e}return oe-q>0&&qe(),F["!ref"]=kr(L),F}(y,T):zv(function n(y,T){var D=T||{},I=[];if(!y||0===y.length)return I;for(var F=y.split(/[\r\n]/),L=F.length-1;L>=0&&0===F[L].length;)--L;for(var B=10,G=0,Z=0;Z<=L;++Z)-1==(G=F[Z].indexOf(" "))?G=F[Z].length:G++,B=Math.max(B,G);for(Z=0;Z<=L;++Z){I[Z]=[];var q=0;for(e(F[Z].slice(0,B).trim(),I,Z,q,D),q=1;q<=(F[Z].length-B)/10+1;++q)e(F[Z].slice(B+10*(q-1),B+10*q).trim(),I,Z,q,D)}return D.sheetRows&&(I=I.slice(0,D.sheetRows)),I}(y,T),T)}function l(y,T){var D="",I="string"==T.type?[0,0,0,0]:CO(y,T);switch(T.type){case"base64":D=eu(y);break;case"binary":case"string":D=y;break;case"buffer":D=65001==T.codepage?y.toString("utf8"):T.codepage&&typeof wi<"u"?wi.utils.decode(T.codepage,y):Hr&&Buffer.isBuffer(y)?y.toString("binary"):Ig(y);break;case"array":D=U_(y);break;default:throw new Error("Unrecognized type "+T.type)}return 239==I[0]&&187==I[1]&&191==I[2]?D=Yi(D.slice(3)):"string"!=T.type&&"buffer"!=T.type&&65001==T.codepage?D=Yi(D):"binary"==T.type&&typeof wi<"u"&&T.codepage&&(D=wi.utils.decode(T.codepage,wi.utils.encode(28591,D))),"socialcalc:version:"==D.slice(0,19)?O8.to_sheet("string"==T.type?D:Yi(D),T):a(D,T)}return{to_workbook:function d(y,T){return Rg(l(y,T),T)},to_sheet:l,from_sheet:function m(y){for(var I,T=[],D=ui(y["!ref"]),F=Array.isArray(y),L=D.s.r;L<=D.e.r;++L){for(var B=[],G=D.s.c;G<=D.e.c;++G){var Z=hr({r:L,c:G});if((I=F?(y[L]||[])[G]:y[Z])&&null!=I.v){for(var q=(I.w||(hf(I),I.w)||"").slice(0,10);q.length<10;)q+=" ";B.push(q+(0===G?" ":""))}else B.push("          ")}T.push(B.join(""))}return T.join("\n")}}}(),Q_=function(){function e(Pe,ut,Re){if(Pe){Wa(Pe,Pe.l||0);for(var je=Re.Enum||an;Pe.l<Pe.length;){var Dt=Pe.read_shift(2),en=je[Dt]||je[65535],tn=Pe.read_shift(2),qt=Pe.l+tn,Vt=en.f&&en.f(Pe,tn,Re);if(Pe.l=qt,ut(Vt,en,Dt))return}}}function t(Pe,ut){if(!Pe)return Pe;var Re=ut||{};null!=Xs&&null==Re.dense&&(Re.dense=Xs);var je=Re.dense?[]:{},Dt="Sheet1",en="",tn=0,qt={},Vt=[],wr=[],Ne={s:{r:0,c:0},e:{r:0,c:0}},Hi=Re.sheetRows||0;if(0==Pe[2]&&(8==Pe[3]||9==Pe[3])&&Pe.length>=16&&5==Pe[14]&&108===Pe[15])throw new Error("Unsupported Works 3 for Mac file");if(2==Pe[2])Re.Enum=an,e(Pe,function(Tn,Co,dh){switch(dh){case 0:Re.vers=Tn,Tn>=4096&&(Re.qpro=!0);break;case 6:Ne=Tn;break;case 204:Tn&&(en=Tn);break;case 222:en=Tn;break;case 15:case 51:Re.qpro||(Tn[1].v=Tn[1].v.slice(1));case 13:case 14:case 16:14==dh&&112==(112&Tn[2])&&(15&Tn[2])>1&&(15&Tn[2])<15&&(Tn[1].z=Re.dateNF||Zn[14],Re.cellDates&&(Tn[1].t="d",Tn[1].v=RS(Tn[1].v))),Re.qpro&&Tn[3]>tn&&(je["!ref"]=kr(Ne),qt[Dt]=je,Vt.push(Dt),je=Re.dense?[]:{},Ne={s:{r:0,c:0},e:{r:0,c:0}},tn=Tn[3],Dt=en||"Sheet"+(tn+1),en="");var Tf=Re.dense?(je[Tn[0].r]||[])[Tn[0].c]:je[hr(Tn[0])];if(Tf){Tf.t=Tn[1].t,Tf.v=Tn[1].v,null!=Tn[1].z&&(Tf.z=Tn[1].z),null!=Tn[1].f&&(Tf.f=Tn[1].f);break}Re.dense?(je[Tn[0].r]||(je[Tn[0].r]=[]),je[Tn[0].r][Tn[0].c]=Tn[1]):je[hr(Tn[0])]=Tn[1]}},Re);else{if(26!=Pe[2]&&14!=Pe[2])throw new Error("Unrecognized LOTUS BOF "+Pe[2]);Re.Enum=St,14==Pe[2]&&(Re.qpro=!0,Pe.l=0),e(Pe,function(Tn,Co,dh){switch(dh){case 204:Dt=Tn;break;case 22:Tn[1].v=Tn[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Tn[3]>tn&&(je["!ref"]=kr(Ne),qt[Dt]=je,Vt.push(Dt),je=Re.dense?[]:{},Ne={s:{r:0,c:0},e:{r:0,c:0}},Dt="Sheet"+((tn=Tn[3])+1)),Hi>0&&Tn[0].r>=Hi)break;Re.dense?(je[Tn[0].r]||(je[Tn[0].r]=[]),je[Tn[0].r][Tn[0].c]=Tn[1]):je[hr(Tn[0])]=Tn[1],Ne.e.c<Tn[0].c&&(Ne.e.c=Tn[0].c),Ne.e.r<Tn[0].r&&(Ne.e.r=Tn[0].r);break;case 27:Tn[14e3]&&(wr[Tn[14e3][0]]=Tn[14e3][1]);break;case 1537:wr[Tn[0]]=Tn[1],Tn[0]==tn&&(Dt=Tn[1])}},Re)}if(je["!ref"]=kr(Ne),qt[en||Dt]=je,Vt.push(en||Dt),!wr.length)return{SheetNames:Vt,Sheets:qt};for(var ni={},$i=[],ri=0;ri<wr.length;++ri)qt[Vt[ri]]?($i.push(wr[ri]||Vt[ri]),ni[wr[ri]]=qt[wr[ri]]||qt[Vt[ri]]):($i.push(wr[ri]),ni[wr[ri]]={"!ref":"A1"});return{SheetNames:$i,Sheets:ni}}function m(Pe,ut,Re){var je=[{c:0,r:0},{t:"n",v:0},0,0];return Re.qpro&&20768!=Re.vers?(je[0].c=Pe.read_shift(1),je[3]=Pe.read_shift(1),je[0].r=Pe.read_shift(2),Pe.l+=2):(je[2]=Pe.read_shift(1),je[0].c=Pe.read_shift(2),je[0].r=Pe.read_shift(2)),je}function y(Pe,ut,Re){var je=Pe.l+ut,Dt=m(Pe,0,Re);if(Dt[1].t="s",20768==Re.vers){Pe.l++;var en=Pe.read_shift(1);return Dt[1].v=Pe.read_shift(en,"utf8"),Dt}return Re.qpro&&Pe.l++,Dt[1].v=Pe.read_shift(je-Pe.l,"cstr"),Dt}function T(Pe,ut,Re){var je=At(7+Re.length);je.write_shift(1,255),je.write_shift(2,ut),je.write_shift(2,Pe),je.write_shift(1,39);for(var Dt=0;Dt<je.length;++Dt){var en=Re.charCodeAt(Dt);je.write_shift(1,en>=128?95:en)}return je.write_shift(1,0),je}function I(Pe,ut,Re){var je=At(7);return je.write_shift(1,255),je.write_shift(2,ut),je.write_shift(2,Pe),je.write_shift(2,Re,"i"),je}function L(Pe,ut,Re){var je=At(13);return je.write_shift(1,255),je.write_shift(2,ut),je.write_shift(2,Pe),je.write_shift(8,Re,"f"),je}function G(Pe,ut,Re){var je=32768&ut;return ut=(je?Pe:0)+((ut&=-32769)>=8192?ut-16384:ut),(je?"":"$")+(Re?ws(ut):Js(ut))}var Z={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},q=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function _e(Pe){var ut=[{c:0,r:0},{t:"n",v:0},0];return ut[0].r=Pe.read_shift(2),ut[3]=Pe[Pe.l++],ut[0].c=Pe[Pe.l++],ut}function ae(Pe,ut,Re,je){var Dt=At(6+je.length);Dt.write_shift(2,Pe),Dt.write_shift(1,Re),Dt.write_shift(1,ut),Dt.write_shift(1,39);for(var en=0;en<je.length;++en){var tn=je.charCodeAt(en);Dt.write_shift(1,tn>=128?95:tn)}return Dt.write_shift(1,0),Dt}function Ie(Pe,ut){var Re=_e(Pe),je=Pe.read_shift(4),Dt=Pe.read_shift(4),en=Pe.read_shift(2);if(65535==en)return 0===je&&3221225472===Dt?(Re[1].t="e",Re[1].v=15):0===je&&3489660928===Dt?(Re[1].t="e",Re[1].v=42):Re[1].v=0,Re;var tn=32768&en;return en=(32767&en)-16446,Re[1].v=(1-2*tn)*(Dt*Math.pow(2,en+32)+je*Math.pow(2,en)),Re}function qe(Pe,ut,Re,je){var Dt=At(14);if(Dt.write_shift(2,Pe),Dt.write_shift(1,Re),Dt.write_shift(1,ut),0==je)return Dt.write_shift(4,0),Dt.write_shift(4,0),Dt.write_shift(2,65535),Dt;var en=0,tn=0,Vt=0;return je<0&&(en=1,je=-je),tn=0|Math.log2(je),2147483648&(Vt=(je/=Math.pow(2,tn-31))>>>0)||(++tn,Vt=(je/=2)>>>0),je-=Vt,Vt|=2147483648,Vt>>>=0,je*=Math.pow(2,32),Dt.write_shift(4,je>>>0),Dt.write_shift(4,Vt),Dt.write_shift(2,tn+=16383+(en?32768:0)),Dt}function jt(Pe,ut){var Re=_e(Pe),je=Pe.read_shift(8,"f");return Re[1].v=je,Re}function zt(Pe,ut){return 0==Pe[Pe.l+ut-1]?Pe.read_shift(ut,"cstr"):""}function Pt(Pe,ut){var Re=At(5+Pe.length);Re.write_shift(2,14e3),Re.write_shift(2,ut);for(var je=0;je<Pe.length;++je){var Dt=Pe.charCodeAt(je);Re[Re.l++]=Dt>127?95:Dt}return Re[Re.l++]=0,Re}var an={0:{n:"BOF",f:$o},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function l(Pe,ut,Re){var je={s:{c:0,r:0},e:{c:0,r:0}};return 8==ut&&Re.qpro?(je.s.c=Pe.read_shift(1),Pe.l++,je.s.r=Pe.read_shift(2),je.e.c=Pe.read_shift(1),Pe.l++,je.e.r=Pe.read_shift(2),je):(je.s.c=Pe.read_shift(2),je.s.r=Pe.read_shift(2),12==ut&&Re.qpro&&(Pe.l+=2),je.e.c=Pe.read_shift(2),je.e.r=Pe.read_shift(2),12==ut&&Re.qpro&&(Pe.l+=2),65535==je.s.c&&(je.s.c=je.e.c=je.s.r=je.e.r=0),je)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function D(Pe,ut,Re){var je=m(Pe,0,Re);return je[1].v=Pe.read_shift(2,"i"),je}},14:{n:"NUMBER",f:function F(Pe,ut,Re){var je=m(Pe,0,Re);return je[1].v=Pe.read_shift(8,"f"),je}},15:{n:"LABEL",f:y},16:{n:"FORMULA",f:function B(Pe,ut,Re){var je=Pe.l+ut,Dt=m(Pe,0,Re);if(Dt[1].v=Pe.read_shift(8,"f"),Re.qpro)Pe.l=je;else{var en=Pe.read_shift(2);(function oe(Pe,ut){Wa(Pe,0);for(var Re=[],je=0,Dt="",en="",tn="",qt="";Pe.l<Pe.length;){var Vt=Pe[Pe.l++];switch(Vt){case 0:Re.push(Pe.read_shift(8,"f"));break;case 1:en=G(ut[0].c,Pe.read_shift(2),!0),Dt=G(ut[0].r,Pe.read_shift(2),!1),Re.push(en+Dt);break;case 2:var wr=G(ut[0].c,Pe.read_shift(2),!0),Ne=G(ut[0].r,Pe.read_shift(2),!1);en=G(ut[0].c,Pe.read_shift(2),!0),Dt=G(ut[0].r,Pe.read_shift(2),!1),Re.push(wr+Ne+":"+en+Dt);break;case 3:if(Pe.l<Pe.length)return void console.error("WK1 premature formula end");break;case 4:Re.push("("+Re.pop()+")");break;case 5:Re.push(Pe.read_shift(2));break;case 6:for(var Hi="";Vt=Pe[Pe.l++];)Hi+=String.fromCharCode(Vt);Re.push('"'+Hi.replace(/"/g,'""')+'"');break;case 8:Re.push("-"+Re.pop());break;case 23:Re.push("+"+Re.pop());break;case 22:Re.push("NOT("+Re.pop()+")");break;case 20:case 21:qt=Re.pop(),tn=Re.pop(),Re.push(["AND","OR"][Vt-20]+"("+tn+","+qt+")");break;default:if(Vt<32&&q[Vt])qt=Re.pop(),tn=Re.pop(),Re.push(tn+q[Vt]+qt);else{if(!Z[Vt])return Vt<=7?console.error("WK1 invalid opcode "+Vt.toString(16)):Vt<=24?console.error("WK1 unsupported op "+Vt.toString(16)):Vt<=30?console.error("WK1 invalid opcode "+Vt.toString(16)):Vt<=115?console.error("WK1 unsupported function opcode "+Vt.toString(16)):console.error("WK1 unrecognized opcode "+Vt.toString(16));if(69==(je=Z[Vt][1])&&(je=Pe[Pe.l++]),je>Re.length)return void console.error("WK1 bad formula parse 0x"+Vt.toString(16)+":|"+Re.join("|")+"|");var ni=Re.slice(-je);Re.length-=je,Re.push(Z[Vt][0]+"("+ni.join(",")+")")}}}1==Re.length?ut[1].f=""+Re[0]:console.error("WK1 bad formula parse |"+Re.join("|")+"|")})(Pe.slice(Pe.l,Pe.l+en),Dt),Pe.l+=en}return Dt}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:y},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:zt},222:{n:"SHEETNAMELP",f:function yt(Pe,ut){var Re=Pe[Pe.l++];Re>ut-1&&(Re=ut-1);for(var je="";je.length<Re;)je+=String.fromCharCode(Pe[Pe.l++]);return je}},65535:{n:""}},St={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function fe(Pe,ut){var Re=_e(Pe);return Re[1].t="s",Re[1].v=Pe.read_shift(ut-4,"cstr"),Re}},23:{n:"NUMBER17",f:Ie},24:{n:"NUMBER18",f:function De(Pe,ut){var Re=_e(Pe);Re[1].v=Pe.read_shift(2);var je=Re[1].v>>1;if(1&Re[1].v)switch(7&je){case 0:je=5e3*(je>>3);break;case 1:je=500*(je>>3);break;case 2:je=(je>>3)/20;break;case 3:je=(je>>3)/200;break;case 4:je=(je>>3)/2e3;break;case 5:je=(je>>3)/2e4;break;case 6:je=(je>>3)/16;break;case 7:je=(je>>3)/64}return Re[1].v=je,Re}},25:{n:"FORMULA19",f:function Je(Pe,ut){var Re=Ie(Pe);return Pe.l+=ut-14,Re}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function Zt(Pe,ut){for(var Re={},je=Pe.l+ut;Pe.l<je;){var Dt=Pe.read_shift(2);if(14e3==Dt){for(Re[Dt]=[0,""],Re[Dt][0]=Pe.read_shift(2);Pe[Pe.l];)Re[Dt][1]+=String.fromCharCode(Pe[Pe.l]),Pe.l++;Pe.l++}}return Re}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function $e(Pe,ut){var Re=_e(Pe),je=Pe.read_shift(4);return Re[1].v=je>>6,Re}},38:{n:"??"},39:{n:"NUMBER27",f:jt},40:{n:"FORMULA28",f:function ln(Pe,ut){var Re=jt(Pe);return Pe.l+=ut-10,Re}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:zt},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function xt(Pe,ut,Re){if(Re.qpro&&!(ut<21)){var je=Pe.read_shift(1);return Pe.l+=17,Pe.l+=1,Pe.l+=2,[je,Pe.read_shift(ut-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function r(Pe,ut){var Re=ut||{};if(+Re.codepage>=0&&$u(+Re.codepage),"string"==Re.type)throw new Error("Cannot write WK1 to JS string");var je=$l(),Dt=ui(Pe["!ref"]),en=Array.isArray(Pe),tn=[];un(je,0,function s(Pe){var ut=At(2);return ut.write_shift(2,Pe),ut}(1030)),un(je,6,function d(Pe){var ut=At(8);return ut.write_shift(2,Pe.s.c),ut.write_shift(2,Pe.s.r),ut.write_shift(2,Pe.e.c),ut.write_shift(2,Pe.e.r),ut}(Dt));for(var qt=Math.min(Dt.e.r,8191),Vt=Dt.s.r;Vt<=qt;++Vt)for(var wr=Js(Vt),Ne=Dt.s.c;Ne<=Dt.e.c;++Ne){Vt===Dt.s.r&&(tn[Ne]=ws(Ne));var ni=en?(Pe[Vt]||[])[Ne]:Pe[tn[Ne]+wr];ni&&"z"!=ni.t&&("n"==ni.t?(0|ni.v)==ni.v&&ni.v>=-32768&&ni.v<=32767?un(je,13,I(Vt,Ne,ni.v)):un(je,14,L(Vt,Ne,ni.v)):un(je,15,T(Vt,Ne,hf(ni).slice(0,239))))}return un(je,1),je.end()},book_to_wk3:function i(Pe,ut){var Re=ut||{};if(+Re.codepage>=0&&$u(+Re.codepage),"string"==Re.type)throw new Error("Cannot write WK3 to JS string");var je=$l();un(je,0,function a(Pe){var ut=At(26);ut.write_shift(2,4096),ut.write_shift(2,4),ut.write_shift(4,0);for(var Re=0,je=0,Dt=0,en=0;en<Pe.SheetNames.length;++en){var qt=Pe.Sheets[Pe.SheetNames[en]];if(qt&&qt["!ref"]){++Dt;var Vt=su(qt["!ref"]);Re<Vt.e.r&&(Re=Vt.e.r),je<Vt.e.c&&(je=Vt.e.c)}}return Re>8191&&(Re=8191),ut.write_shift(2,Re),ut.write_shift(1,Dt),ut.write_shift(1,je),ut.write_shift(2,0),ut.write_shift(2,0),ut.write_shift(1,1),ut.write_shift(1,2),ut.write_shift(4,0),ut.write_shift(4,0),ut}(Pe));for(var Dt=0,en=0;Dt<Pe.SheetNames.length;++Dt)(Pe.Sheets[Pe.SheetNames[Dt]]||{})["!ref"]&&un(je,27,Pt(Pe.SheetNames[Dt],en++));var tn=0;for(Dt=0;Dt<Pe.SheetNames.length;++Dt){var qt=Pe.Sheets[Pe.SheetNames[Dt]];if(qt&&qt["!ref"]){for(var Vt=ui(qt["!ref"]),wr=Array.isArray(qt),Ne=[],Hi=Math.min(Vt.e.r,8191),ni=Vt.s.r;ni<=Hi;++ni)for(var $i=Js(ni),ri=Vt.s.c;ri<=Vt.e.c;++ri){ni===Vt.s.r&&(Ne[ri]=ws(ri));var Co=wr?(qt[ni]||[])[ri]:qt[Ne[ri]+$i];Co&&"z"!=Co.t&&("n"==Co.t?un(je,23,qe(ni,ri,tn,Co.v)):un(je,22,ae(ni,ri,tn,hf(Co).slice(0,239))))}++tn}}return un(je,1),je.end()},to_workbook:function n(Pe,ut){switch(ut.type){case"base64":return t(tu(eu(Pe)),ut);case"binary":return t(tu(Pe),ut);case"buffer":case"array":return t(Pe,ut)}throw"Unsupported type "+ut.type}}}(),toe=function(){var e=r2("t"),n=r2("rPr");function t(s){var a=s.match(e);if(!a)return{t:"s",v:""};var l={t:"s",v:Si(a[1])},d=s.match(n);return d&&(l.s=function eoe(e){var n={},t=e.match(al),r=0,i=!1;if(t)for(;r!=t.length;++r){var s=ur(t[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":n.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==s.val)break;n.cp=dP[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":n.outline=1;break;case"</outline>":break;case"<rFont":n.name=s.val;break;case"<sz":n.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":n.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":n.uval="double";break;case"singleAccounting":n.uval="single-accounting";break;case"doubleAccounting":n.uval="double-accounting"}case"<u>":case"<u/>":n.u=1;break;case"</u>":break;case"<b":if("0"==s.val)break;case"<b>":case"<b/>":n.b=1;break;case"</b>":break;case"<i":if("0"==s.val)break;case"<i>":case"<i/>":n.i=1;break;case"</i>":break;case"<color":s.rgb&&(n.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":n.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":n.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(47!==s[0].charCodeAt(1)&&!i)throw new Error("Unrecognized rich format "+s[0])}}return n}(d[1])),l}var r=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(r,"").split(i).map(t).filter(function(l){return l.v})}}(),noe=function(){var n=/(\r\n|\n)/g;function r(i){var s=[[],i.v,[]];return i.v?(i.s&&function t(i,s,a){var l=[];i.u&&l.push("text-decoration: underline;"),i.uval&&l.push("text-underline-style:"+i.uval+";"),i.sz&&l.push("font-size:"+i.sz+"pt;"),i.outline&&l.push("text-effect: outline;"),i.shadow&&l.push("text-shadow: auto;"),s.push('<span style="'+l.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var d=i.valign||"";"superscript"==d||"super"==d?d="sup":"subscript"==d&&(d="sub"),""!=d&&(s.push("<"+d+">"),a.push("</"+d+">")),a.push("</span>")}(i.s,s[0],s[2]),s[0].join("")+s[1].replace(n,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}}(),roe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ioe=/<(?:\w+:)?r>/,soe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function QP(e,n){var t=!n||n.cellHTML,r={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=Si(Yi(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Yi(e),t&&(r.h=wP(r.t))):e.match(ioe)&&(r.r=Yi(e),r.t=Si(Yi((e.replace(soe,"").match(roe)||[]).join("").replace(al,""))),t&&(r.h=noe(toe(r.r)))),r):{t:""}}var ooe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,aoe=/<(?:\w+:)?(?:si|sstItem)>/g,loe=/<\/(?:\w+:)?(?:si|sstItem)>/;function F8(e){if(typeof wi<"u")return wi.utils.encode(B_,e);for(var n=[],t=e.split(""),r=0;r<t.length;++r)n[r]=t[r].charCodeAt(0);return n}function jp(e,n){var t={};return t.Major=e.read_shift(2),t.Minor=e.read_shift(2),n>=4&&(e.l+=n-4),t}function _oe(e){for(var n=e.read_shift(4),t=e.l+n-4,r={},i=e.read_shift(4),s=[];i-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(r.name=e.read_shift(0,"lpp4"),r.comps=s,e.l!=t)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+t);return r}function R8(e,n){var t=e.l+n,r={};r.Flags=63&e.read_shift(4),e.l+=4,r.AlgID=e.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=36==r.Flags;break;case 26625:i=4==r.Flags;break;case 0:i=16==r.Flags||4==r.Flags||36==r.Flags;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=e.read_shift(4),r.KeySize=e.read_shift(4),r.ProviderType=e.read_shift(4),e.l+=8,r.CSPName=e.read_shift(t-e.l>>1,"utf16le"),e.l=t,r}function N8(e,n){var t={},r=e.l+n;return e.l+=4,t.Salt=e.slice(e.l,e.l+16),e.l+=16,t.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),t.VerifierHash=e.slice(e.l,r),e.l=r,t}function Coe(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:R8(e,t),v:N8(e,e.length-e.l)}}function Toe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Eoe(e){var n=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var t=e.read_shift(e.length-e.l,"utf8"),r={};return t.replace(al,function(s){var a=ur(s);switch(cf(a[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":n.forEach(function(l){r[l]=a[l]});break;case"<dataIntegrity":r.encryptedHmacKey=a.encryptedHmacKey,r.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"<keyEncryptor":r.uri=a.uri;break;case"<encryptedKey":r.encs.push(a);break;default:throw a[0]}}),r}var B8=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],n=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(a,l){return function(a){return 255&(a/2|128*a)}(a^l)};return function(a){for(var l=F8(a),d=function(a){for(var l=n[a.length-1],d=104,m=a.length-1;m>=0;--m)for(var y=a[m],T=0;7!=T;++T)64&y&&(l^=t[d]),y*=2,--d;return l}(l),m=l.length,y=Ag(16),T=0;16!=T;++T)y[T]=0;var F;for(1==(1&m)&&(y[m]=i(e[0],d>>8),y[--m]=i(l[l.length-1],255&d));m>0;)y[--m]=i(l[m],d>>8),y[--m]=i(l[m],255&d);for(m=15,F=15-l.length;F>0;)y[m]=i(e[F],d>>8),--F,y[--m]=i(l[m],255&d),--m,--F;return y}}();var z8=function(){function e(i,s){switch(s.type){case"base64":return n(eu(i),s);case"binary":return n(i,s);case"buffer":return n(Hr&&Buffer.isBuffer(i)?i.toString("binary"):Ig(i),s);case"array":return n(U_(i),s)}throw new Error("Unrecognized type "+s.type)}function n(i,s){var l=(s||{}).dense?[]:{},d=i.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var m={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(y,T){Array.isArray(l)&&(l[T]=[]);for(var F,D=/\\\w+\b/g,I=0,L=-1;F=D.exec(y);){if("\\cell"===F[0]){var B=y.slice(I,D.lastIndex-F[0].length);if(" "==B[0]&&(B=B.slice(1)),++L,B.length){var G={v:B,t:"s"};Array.isArray(l)?l[T][L]=G:l[hr({r:T,c:L})]=G}}I=D.lastIndex}L>m.e.c&&(m.e.c=L)}),l["!ref"]=kr(m),l}return{to_workbook:function t(i,s){return Rg(e(i,s),s)},to_sheet:e,from_sheet:function r(i){for(var l,s=["{\\rtf1\\ansi"],a=ui(i["!ref"]),d=Array.isArray(i),m=a.s.r;m<=a.e.r;++m){s.push("\\trowd\\trautofit1");for(var y=a.s.c;y<=a.e.c;++y)s.push("\\cellx"+(y+1));for(s.push("\\pard\\intbl"),y=a.s.c;y<=a.e.c;++y){var T=hr({r:m,c:y});(l=d?(i[m]||[])[y]:i[T])&&(null!=l.v||l.f&&!l.F)&&(s.push(" "+(l.w||(hf(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}}}();function f2(e){for(var n=0,t=1;3!=n;++n)t=256*t+(e[n]>255?255:e[n]<0?0:e[n]);return t.toString(16).toUpperCase().slice(1)}function ZS(e,n){if(0===n)return e;var t=function Loe(e){var n=e[0]/255,t=e[1]/255,r=e[2]/255,i=Math.max(n,t,r),s=Math.min(n,t,r),a=i-s;if(0===a)return[0,0,n];var d,l=0,m=i+s;switch(d=a/(m>1?2-m:m),i){case n:l=((t-r)/a+6)%6;break;case t:l=(r-n)/a+2;break;case r:l=(n-t)/a+4}return[l/6,d,m/2]}(function Ooe(e){var n=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}(e));return t[2]=n<0?t[2]*(1+n):1-(1-t[2])*(1-n),f2(function Foe(e){var d,t=e[1],r=e[2],i=2*t*(r<.5?r:1-r),s=r-i/2,a=[s,s,s],l=6*e[0];if(0!==t)switch(0|l){case 0:case 6:d=i*l,a[0]+=i,a[1]+=d;break;case 1:a[0]+=d=i*(2-l),a[1]+=i;break;case 2:d=i*(l-2),a[1]+=i,a[2]+=d;break;case 3:a[1]+=d=i*(4-l),a[2]+=i;break;case 4:d=i*(l-4),a[2]+=i,a[0]+=d;break;case 5:a[2]+=d=i*(6-l),a[0]+=i}for(var m=0;3!=m;++m)a[m]=Math.round(255*a[m]);return a}(t))}var V8=6,Roe=15,Noe=1,dl=V8;function p2(e){return Math.floor((e+Math.round(128/dl)/256)*dl)}function m2(e){return Math.floor((e-5)/dl*100+.5)/100}function KS(e){return Math.round((e*dl+5)/dl*256)/256}function tO(e){return KS(m2(p2(e)))}function nO(e){var n=Math.abs(e-tO(e)),t=dl;if(n>.005)for(dl=Noe;dl<Roe;++dl)Math.abs(e-tO(e))<=n&&(n=Math.abs(e-tO(e)),t=dl);dl=t}function ey(e){e.width?(e.wpx=p2(e.width),e.wch=m2(e.wpx),e.MDW=dl):e.wpx?(e.wch=m2(e.wpx),e.width=KS(e.wch),e.MDW=dl):"number"==typeof e.wch&&(e.width=KS(e.wch),e.wpx=p2(e.width),e.MDW=dl),e.customWidth&&delete e.customWidth}var U8=96;function g2(e){return 96*e/U8}function jv(e){return e*U8/96}var zoe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"},JS=["numFmtId","fillId","fontId","borderId","xfId"],QS=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"],Yoe=function(){var n=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,d,m){var T,y={};return l?((T=(l=l.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(n))&&function Hoe(e,n,t){n.NumberFmt=[];for(var r=Zs(Zn),i=0;i<r.length;++i)n.NumberFmt[r[i]]=Zn[r[i]];var s=e[0].match(al);if(s)for(i=0;i<s.length;++i){var a=ur(s[i]);switch(cf(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var l=Si(Yi(a.formatCode)),d=parseInt(a.numFmtId,10);if(n.NumberFmt[d]=l,d>0){if(d>392){for(d=392;d>60&&null!=n.NumberFmt[d];--d);n.NumberFmt[d]=l}lf(l,d)}break;default:if(t.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}(T,y,m),(T=l.match(i))&&function joe(e,n,t,r){n.Fonts=[];var i={},s=!1;(e[0].match(al)||[]).forEach(function(a){var l=ur(a);switch(cf(l[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":n.Fonts.push(i),i={};break;case"<name":l.val&&(i.name=Yi(l.val));break;case"<b":i.bold=l.val?bs(l.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=l.val?bs(l.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(l.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=l.val?bs(l.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=l.val?bs(l.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=l.val?bs(l.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=l.val?bs(l.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=l.val?bs(l.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":l.val&&(i.sz=+l.val);break;case"<vertAlign":l.val&&(i.vertAlign=l.val);break;case"<family":l.val&&(i.family=parseInt(l.val,10));break;case"<scheme":l.val&&(i.scheme=l.val);break;case"<charset":if("1"==l.val)break;l.codepage=dP[parseInt(l.val,10)];break;case"<color":if(i.color||(i.color={}),l.auto&&(i.color.auto=bs(l.auto)),l.rgb)i.color.rgb=l.rgb.slice(-6);else if(l.indexed){i.color.index=parseInt(l.indexed,10);var d=q_[i.color.index];81==i.color.index&&(d=q_[1]),d||(d=q_[1]),i.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else l.theme&&(i.color.theme=parseInt(l.theme,10),l.tint&&(i.color.tint=parseFloat(l.tint)),l.theme&&t.themeElements&&t.themeElements.clrScheme&&(i.color.rgb=ZS(t.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fonts")}})}(T,y,d,m),(T=l.match(r))&&function Uoe(e,n,t,r){n.Fills=[];var i={},s=!1;(e[0].match(al)||[]).forEach(function(a){var l=ur(a);switch(cf(l[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":n.Fills.push(i={});break;case"<gradientFill":case"</gradientFill>":n.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":l.patternType&&(i.patternType=l.patternType);break;case"<bgColor":i.bgColor||(i.bgColor={}),l.indexed&&(i.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(i.bgColor.theme=parseInt(l.theme,10)),l.tint&&(i.bgColor.tint=parseFloat(l.tint)),l.rgb&&(i.bgColor.rgb=l.rgb.slice(-6));break;case"<fgColor":i.fgColor||(i.fgColor={}),l.theme&&(i.fgColor.theme=parseInt(l.theme,10)),l.tint&&(i.fgColor.tint=parseFloat(l.tint)),null!=l.rgb&&(i.fgColor.rgb=l.rgb.slice(-6));break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+l[0]+" in fills")}})}(T,y,0,m),(T=l.match(s))&&function Voe(e,n,t,r){n.Borders=[];var i={},s=!1;(e[0].match(al)||[]).forEach(function(a){var l=ur(a);switch(cf(l[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":i={},l.diagonalUp&&(i.diagonalUp=bs(l.diagonalUp)),l.diagonalDown&&(i.diagonalDown=bs(l.diagonalDown)),n.Borders.push(i);break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+l[0]+" in borders")}})}(T,y,0,m),(T=l.match(t))&&function Woe(e,n,t){n.CellXf=[];var r,i=!1;(e[0].match(al)||[]).forEach(function(s){var a=ur(s),l=0;switch(cf(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(r=a)[0],l=0;l<JS.length;++l)r[JS[l]]&&(r[JS[l]]=parseInt(r[JS[l]],10));for(l=0;l<QS.length;++l)r[QS[l]]&&(r[QS[l]]=bs(r[QS[l]]));if(n.NumberFmt&&r.numFmtId>392)for(l=392;l>60;--l)if(n.NumberFmt[r.numFmtId]==n.NumberFmt[l]){r.numFmtId=l;break}n.CellXf.push(r);break;case"<alignment":case"<alignment/>":var d={};a.vertical&&(d.vertical=a.vertical),a.horizontal&&(d.horizontal=a.horizontal),null!=a.textRotation&&(d.textRotation=a.textRotation),a.indent&&(d.indent=a.indent),a.wrapText&&(d.wrapText=bs(a.wrapText)),r.alignment=d;break;case"<AlternateContent":case"<ext":i=!0;break;case"</AlternateContent>":case"</ext>":i=!1;break;default:if(t&&t.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}(T,y,m),y):y}}(),Qoe=ll,tae=ll,gae=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function _ae(e,n,t){n.themeElements.clrScheme=[];var r={};(e[0].match(al)||[]).forEach(function(i){var s=ur(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"<a:sysClr":r.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===s[0].charAt(1)?(n.themeElements.clrScheme[gae.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function yae(){}function vae(){}var xae=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,bae=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,wae=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/,Tae=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function W8(e,n){(!e||0===e.length)&&(e=function iO(e,n){if(n&&n.themeXLSX)return n.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var t=[jo];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',t[t.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',t[t.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',t[t.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',t[t.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',t[t.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',t[t.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}());var t,r={};if(!(t=e.match(Tae)))throw new Error("themeElements not found in theme");return function Cae(e,n,t){var r;n.themeElements={},[["clrScheme",xae,_ae],["fontScheme",bae,yae],["fmtScheme",wae,vae]].forEach(function(i){if(!(r=e.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](r,n,t)})}(t[0],r,n),r.raw=e,r}function Aae(e){var n=e.read_shift(2),t=e.read_shift(2)-4,r=[n];switch(n){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=function Dae(e){var n={};switch(n.xclrType=e.read_shift(2),n.nTintShade=e.read_shift(2),n.xclrType){case 0:case 4:e.l+=4;break;case 1:n.xclrValue=function Mae(e,n){return ll(e,n)}(e,4);break;case 2:n.xclrValue=m8(e);break;case 3:n.xclrValue=function Sae(e){return e.read_shift(4)}(e)}return e.l+=8,n}(e);break;case 6:r[1]=function kae(e,n){return ll(e,n)}(e,t);break;case 14:case 15:r[1]=e.read_shift(1===t?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+n+" "+t)}return r}function Pae(e,n){n.forEach(function(t){})}function q8(e,n,t,r){var s,i=Array.isArray(e);n.forEach(function(a){var l=Us(a.ref);if(i?(e[l.r]||(e[l.r]=[]),s=e[l.r][l.c]):s=e[a.ref],!s){s={t:"z"},i?e[l.r][l.c]=s:e[a.ref]=s;var d=ui(e["!ref"]||"BDWGO1000001:A1");d.s.r>l.r&&(d.s.r=l.r),d.e.r<l.r&&(d.e.r=l.r),d.s.c>l.c&&(d.s.c=l.c),d.e.c<l.c&&(d.e.c=l.c);var m=kr(d);m!==e["!ref"]&&(e["!ref"]=m)}s.c||(s.c=[]);var y={a:a.author,t:a.t,r:a.r,T:t};a.h&&(y.h=a.h);for(var T=s.c.length-1;T>=0;--T){if(!t&&s.c[T].T)return;t&&!s.c[T].T&&s.c.splice(T,1)}if(t&&r)for(T=0;T<r.length;++T)if(y.a==r[T].id){y.a=r[T].name||y.a;break}s.c.push(y)})}var tle=cl,sle="application/vnd.ms-office.vbaProject",$v=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,n={r:0,c:0};function t(r,i,s,a){var l=!1,d=!1;0==s.length?d=!0:"["==s.charAt(0)&&(d=!0,s=s.slice(1,-1)),0==a.length?l=!0:"["==a.charAt(0)&&(l=!0,a=a.slice(1,-1));var m=s.length>0?0|parseInt(s,10):0,y=a.length>0?0|parseInt(a,10):0;return l?y+=n.c:--y,d?m+=n.r:--m,i+(l?"":"$")+ws(y)+(d?"":"$")+Js(m)}return function(i,s){return n=s,i.replace(e,t)}}(),sO=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oO=function(){return function(n,t){return n.replace(sO,function(r,i,s,a,l,d){var m=LP(a)-(s?0:t.c),y=OP(d)-(l?0:t.r);return i+"R"+(0==y?"":l?y+1:"["+y+"]")+"C"+(0==m?"":s?m+1:"["+m+"]")})}}();function K8(e,n){return e.replace(sO,function(t,r,i,s,a,l){return r+("$"==i?i+s:ws(LP(s)+n.c))+("$"==a?a+l:Js(OP(l)+n.r))})}function dle(e,n,t){var i=su(n).s,s=Us(t);return K8(e,{r:s.r-i.r,c:s.c-i.c})}function J8(e){return e.replace(/_xlfn\./g,"")}function Wo(e){e.l+=1}function Bg(e,n){var t=e.read_shift(1==n?1:2);return[16383&t,t>>14&1,t>>15&1]}function Q8(e,n,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return eV(e);12==t.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=Bg(e,2),l=Bg(e,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function eV(e){var n=Bg(e,2),t=Bg(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:n[0],c:r,cRel:n[1],rRel:n[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function tV(e,n,t){if(t&&t.biff>=2&&t.biff<=5)return function mle(e){var n=Bg(e,2),t=e.read_shift(1);return{r:n[0],c:t,cRel:n[1],rRel:n[2]}}(e);var r=e.read_shift(t&&12==t.biff?4:2),i=Bg(e,2);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function gle(e){var n=e.read_shift(2),t=e.read_shift(2);return{r:n,c:255&t,fQuoted:!!(16384&t),cRel:t>>15,rRel:t>>15}}function nV(e){var n=1&e[e.l+1];return e.l+=4,[n,1]}function rV(e){return[e.read_shift(1),e.read_shift(1)]}function Wle(e,n){var t=[e.read_shift(1)];if(12==n)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2}switch(t[0]){case 4:t[1]=wo(e,1)?"TRUE":"FALSE",12!=n&&(e.l+=7);break;case 37:case 16:t[1]=Up[e[e.l]],e.l+=12==n?4:8;break;case 0:e.l+=8;break;case 1:t[1]=ul(e);break;case 2:t[1]=K_(e,0,{biff:n>0&&n<8?2:n});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Gle(e,n,t){for(var r=e.read_shift(12==t.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==t.biff?G_:qS)(e,8));return i}function Yle(e,n,t){var r=0,i=0;12==t.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,0==--i&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var l=0;l!=i;++l)a[s][l]=Wle(e,t.biff);return a}function y2(e,n,t){return e.l+=2,[gle(e)]}function aO(e){return e.l+=6,[]}function iV(e){return e.l+=2,[$o(e),1&e.read_shift(2)]}var fce=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],sV={1:{n:"PtgExp",f:function zle(e,n,t){return e.l++,t&&12==t.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(t&&2==t.biff?1:2)]}},2:{n:"PtgTbl",f:ll},3:{n:"PtgAdd",f:Wo},4:{n:"PtgSub",f:Wo},5:{n:"PtgMul",f:Wo},6:{n:"PtgDiv",f:Wo},7:{n:"PtgPower",f:Wo},8:{n:"PtgConcat",f:Wo},9:{n:"PtgLt",f:Wo},10:{n:"PtgLe",f:Wo},11:{n:"PtgEq",f:Wo},12:{n:"PtgGe",f:Wo},13:{n:"PtgGt",f:Wo},14:{n:"PtgNe",f:Wo},15:{n:"PtgIsect",f:Wo},16:{n:"PtgUnion",f:Wo},17:{n:"PtgRange",f:Wo},18:{n:"PtgUplus",f:Wo},19:{n:"PtgUminus",f:Wo},20:{n:"PtgPercent",f:Wo},21:{n:"PtgParen",f:Wo},22:{n:"PtgMissArg",f:Wo},23:{n:"PtgStr",f:function $le(e,n,t){return e.l++,h2(e,0,t)}},26:{n:"PtgSheet",f:function gce(e,n,t){return e.l+=5,e.l+=2,e.l+=2==t.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function _ce(e,n,t){return e.l+=2==t.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function Vle(e){return e.l++,Up[e.read_shift(1)]}},29:{n:"PtgBool",f:function jle(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function Ule(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function Hle(e){return e.l++,ul(e)}},32:{n:"PtgArray",f:function Tle(e,n,t){var r=(96&e[e.l++])>>5;return e.l+=2==t.biff?6:12==t.biff?14:7,[r]}},33:{n:"PtgFunc",f:function Fle(e,n,t){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(t&&t.biff<=3?1:2);return[Bce[i],lV[i],r]}},34:{n:"PtgFuncVar",f:function Rle(e,n,t){var r=e[e.l++],i=e.read_shift(1),s=t&&t.biff<=3?[88==r?-1:0,e.read_shift(1)]:function Nle(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?lV:Nce)[s[1]]]}},35:{n:"PtgName",f:function qle(e,n,t){var r=e.read_shift(1)>>>5&3,s=e.read_shift(!t||t.biff>=8?4:2);switch(t.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function Ple(e,n,t){var r=(96&e[e.l])>>5;return e.l+=1,[r,tV(e,0,t)]}},37:{n:"PtgArea",f:function vle(e,n,t){return[(96&e[e.l++])>>5,Q8(e,0,t)]}},38:{n:"PtgMemArea",f:function Kle(e,n,t){var r=e.read_shift(1)>>>5&3;return e.l+=t&&2==t.biff?3:4,[r,e.read_shift(t&&2==t.biff?1:2)]}},39:{n:"PtgMemErr",f:ll},40:{n:"PtgMemNoMem",f:ll},41:{n:"PtgMemFunc",f:function Jle(e,n,t){return[e.read_shift(1)>>>5&3,e.read_shift(t&&2==t.biff?1:2)]}},42:{n:"PtgRefErr",f:function Qle(e,n,t){var r=e.read_shift(1)>>>5&3;return e.l+=4,t.biff<8&&e.l--,12==t.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function ble(e,n,t){var r=(96&e[e.l++])>>5;return e.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function Ole(e,n,t){var r=(96&e[e.l])>>5;e.l+=1;var i=function _le(e,n,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return function yle(e){var n=e.read_shift(2),t=e.read_shift(1),r=(32768&n)>>15,i=(16384&n)>>14;return n&=16383,1==r&&n>=8192&&(n-=16384),1==i&&t>=128&&(t-=256),{r:n,c:t,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(16384&s)>>14,l=(32768&s)>>15;if(s&=16383,1==l)for(;i>524287;)i-=1048576;if(1==a)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:a,rRel:l}}(e,0,t);return[r,i]}},45:{n:"PtgAreaN",f:function Cle(e,n,t){var r=(96&e[e.l++])>>5,i=function ple(e,n,t){if(t.biff<8)return eV(e);var r=e.read_shift(12==t.biff?4:2),i=e.read_shift(12==t.biff?4:2),s=Bg(e,2),a=Bg(e,2);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,t);return[r,i]}},46:{n:"PtgMemAreaN",f:function yce(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function vce(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function Xle(e,n,t){return 5==t.biff?function Zle(e){var n=e.read_shift(1)>>>5&3,t=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[n,t,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function Lle(e,n,t){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return t&&5==t.biff&&(e.l+=12),[r,i,tV(e,0,t)]}},59:{n:"PtgArea3d",f:function xle(e,n,t){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(t&&5===t.biff)e.l+=12;return[r,i,Q8(e,0,t)]}},60:{n:"PtgRefErr3d",f:function ece(e,n,t){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function wle(e,n,t){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(t)switch(t.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},bce={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wce={1:{n:"PtgElfLel",f:iV},2:{n:"PtgElfRw",f:y2},3:{n:"PtgElfCol",f:y2},6:{n:"PtgElfRwV",f:y2},7:{n:"PtgElfColV",f:y2},10:{n:"PtgElfRadical",f:y2},11:{n:"PtgElfRadicalS",f:aO},13:{n:"PtgElfColS",f:aO},15:{n:"PtgElfColSV",f:aO},16:{n:"PtgElfRadicalLel",f:iV},25:{n:"PtgList",f:function pce(e){e.l+=2;var n=e.read_shift(2),t=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:n,coltype:3&t,rt:fce[t>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function mce(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Cce={0:{n:"PtgAttrNoop",f:function xce(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function kle(e,n,t){var r=255&e[e.l+1]?1:0;return e.l+=t&&2==t.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function Dle(e,n,t){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(t&&2==t.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function Ele(e,n,t){e.l+=2;for(var r=e.read_shift(t&&2==t.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(t&&2==t.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function Sle(e,n,t){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(t&&2==t.biff?1:2)]}},16:{n:"PtgAttrSum",f:function Ble(e,n,t){e.l+=t&&2==t.biff?3:4}},32:{n:"PtgAttrBaxcel",f:nV},33:{n:"PtgAttrBaxcel",f:nV},64:{n:"PtgAttrSpace",f:function Ale(e){return e.read_shift(2),rV(e)}},65:{n:"PtgAttrSpaceSemi",f:function Ile(e){return e.read_shift(2),rV(e)}},128:{n:"PtgAttrIfError",f:function Mle(e){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(2)]}},255:{}};function v2(e,n,t,r){if(r.biff<8)return ll(e,n);for(var i=e.l+n,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=Yle(e,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=Gle(e,0,r),s.push(t[a][2]);break;case"PtgExp":r&&12==r.biff&&(t[a][1][1]=e.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return 0!=(n=i-e.l)&&s.push(ll(e,n)),s}function x2(e,n,t){for(var i,s,r=e.l+n,a=[];r!=e.l;)n=r-e.l,i=sV[s=e[e.l]]||sV[bce[s]],(24===s||25===s)&&(i=(24===s?wce:Cce)[e[e.l+1]]),i&&i.f?a.push([i.n,i.f(e,n,t)]):ll(e,n);return a}function Tce(e){for(var n=[],t=0;t<e.length;++t){for(var r=e[t],i=[],s=0;s<r.length;++s){var a=r[s];i.push(a?2===a[0]?'"'+a[1].replace(/"/g,'""')+'"':a[1]:"")}n.push(i.join(","))}return n.join(";")}var Ece={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function oV(e,n,t){if(!e)return"SH33TJSERR0";if(t.biff>8&&(!e.XTI||!e.XTI[n]))return e.SheetNames[n];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[n];if(t.biff<8)return n>1e4&&(n-=65536),n<0&&(n=-n),0==n?"":e.XTI[n-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=t.SID?e.SheetNames[t.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function aV(e,n,t){var r=oV(e,n,t);return"#REF"==r?r:function Sce(e,n){if(!(e||n&&n.biff<=5&&n.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,t)}function fl(e,n,t,r,i){var d,m,y,I,s=i&&i.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},l=[],T=0,D=0,F="";if(!e[0]||!e[0][0])return"";for(var L=-1,B="",G=0,Z=e[0].length;G<Z;++G){var q=e[0][G];switch(q[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=l.pop(),m=l.pop(),L>=0){switch(e[0][L][1][0]){case 0:B=Ks(" ",e[0][L][1][1]);break;case 1:B=Ks("\r",e[0][L][1][1]);break;default:if(B="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][L][1][0])}m+=B,L=-1}l.push(m+Ece[q[0]]+d);break;case"PtgIsect":d=l.pop(),m=l.pop(),l.push(m+" "+d);break;case"PtgUnion":d=l.pop(),m=l.pop(),l.push(m+","+d);break;case"PtgRange":d=l.pop(),m=l.pop(),l.push(m+":"+d);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":y=a2(q[1][1],a,i),l.push(l2(y,s));break;case"PtgRefN":y=t?a2(q[1][1],t,i):q[1][1],l.push(l2(y,s));break;case"PtgRef3d":T=q[1][1],y=a2(q[1][2],a,i),F=aV(r,T,i),l.push(F+"!"+l2(y,s));break;case"PtgFunc":case"PtgFuncVar":var _e=q[1][0],fe=q[1][1];_e||(_e=0);var ae=0==(_e&=127)?[]:l.slice(-_e);l.length-=_e,"User"===fe&&(fe=ae.shift()),l.push(fe+"("+ae.join(",")+")");break;case"PtgBool":l.push(q[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":l.push(q[1]);break;case"PtgNum":l.push(String(q[1]));break;case"PtgStr":l.push('"'+q[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":I=Fz(q[1][1],t?{s:t}:a,i),l.push(PP(I,i));break;case"PtgArea":I=Fz(q[1][1],a,i),l.push(PP(I,i));break;case"PtgArea3d":I=q[1][2],F=aV(r,T=q[1][1],i),l.push(F+"!"+PP(I,i));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgName":var De=(r.names||[])[(D=q[1][2])-1]||(r[0]||[])[D],Ie=De?De.Name:"SH33TJSNAME"+String(D);Ie&&"_xlfn."==Ie.slice(0,6)&&!i.xlfn&&(Ie=Ie.slice(6)),l.push(Ie);break;case"PtgNameX":var Je,qe=q[1][1];if(D=q[1][2],!(i.biff<=5)){var $e="";if(14849==((r[qe]||[])[0]||[])[0]||(1025==((r[qe]||[])[0]||[])[0]?r[qe][D]&&r[qe][D].itab>0&&($e=r.SheetNames[r[qe][D].itab-1]+"!"):$e=r.SheetNames[D-1]+"!"),r[qe]&&r[qe][D])$e+=r[qe][D].Name;else if(r[0]&&r[0][D])$e+=r[0][D].Name;else{var jt=(oV(r,qe,i)||"").split(";;");jt[D-1]?$e=jt[D-1]:$e+="SH33TJSERRX"}l.push($e);break}qe<0&&(qe=-qe),r[qe]&&(Je=r[qe][D]),Je||(Je={Name:"SH33TJSERRY"}),l.push(Je.Name);break;case"PtgParen":var ln="(",zt=")";if(L>=0){switch(B="",e[0][L][1][0]){case 2:ln=Ks(" ",e[0][L][1][1])+ln;break;case 3:ln=Ks("\r",e[0][L][1][1])+ln;break;case 4:zt=Ks(" ",e[0][L][1][1])+zt;break;case 5:zt=Ks("\r",e[0][L][1][1])+zt;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][L][1][0])}L=-1}l.push(ln+l.pop()+zt);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":l.push("#REF!");break;case"PtgExp":var yt={c:t.c,r:t.r};if(r.sharedf[hr(y={c:q[1][1],r:q[1][0]})]){var xt=r.sharedf[hr(y)];l.push(fl(xt,0,yt,r,i))}else{var Zt=!1;for(d=0;d!=r.arrayf.length;++d)if(!(y.c<(m=r.arrayf[d])[0].s.c||y.c>m[0].e.c||y.r<m[0].s.r||y.r>m[0].e.r)){l.push(fl(m[1],0,yt,r,i)),Zt=!0;break}Zt||l.push(q[1])}break;case"PtgArray":l.push("{"+Tce(q[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":L=G;break;case"PtgMissArg":l.push("");break;case"PtgList":l.push("Table"+q[1].idx+"[#"+q[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(q))}if(3!=i.biff&&L>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][G][0])){var an=!0;switch((q=e[0][L])[1][0]){case 4:an=!1;case 0:B=Ks(" ",q[1][1]);break;case 5:an=!1;case 1:B=Ks("\r",q[1][1]);break;default:if(B="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+q[1][0])}l.push((an?B:"")+l.pop()+(an?"":B)),L=-1}}if(l.length>1&&i.WTF)throw new Error("bad formula stack");return l[0]}function Dce(e,n,t){var s,r=e.l+n,i=2==t.biff?1:2,a=e.read_shift(i);if(65535==a)return[[],ll(e,n-2)];var l=x2(e,a,t);return n!==a+i&&(s=v2(e,n-a-i,l,t)),e.l=r,[l,s]}function Ace(e,n,t){var i,r=e.l+n,s=e.read_shift(2),a=x2(e,s,t);return 65535==s?[[],ll(e,n-2)]:(n!==s+2&&(i=v2(e,r-s-2,a,t)),[a,i])}function lO(e,n,t){var r=e.l+n,i=df(e);2==t.biff&&++e.l;var s=function Ice(e){var n;if(65535!==zp(e,e.l+6))return[ul(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return n=1===e[e.l+2],e.l+=8,[n,"b"];case 2:return n=e[e.l+2],e.l+=8,[n,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),a=e.read_shift(1);2!=t.biff&&(e.read_shift(1),t.biff>=5&&e.read_shift(4));var l=function Mce(e,n,t){var s,r=e.l+n,i=2==t.biff?1:2,a=e.read_shift(i);if(65535==a)return[[],ll(e,n-2)];var l=x2(e,a,t);return n!==a+i&&(s=v2(e,n-a-i,l,t)),e.l=r,[l,s]}(e,r-e.l,t);return{cell:i,val:s[0],formula:l,shared:a>>3&1,tt:s[1]}}function eD(e,n,t){var r=e.read_shift(4),i=x2(e,r,t),s=e.read_shift(4);return[i,s>0?v2(e,s,i,t):null]}var Lce=eD,tD=eD,Fce=eD,Rce=eD,Nce={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},lV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Bce={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cV(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(n,t){return t.replace(/\./g,"")})).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function cO(e){var n=e.split(":");return[n[0].split(".")[0],n[0].split(".")[1]+(n.length>1?":"+(n[1].split(".")[1]||n[1].split(".")[0]):"")]}var b2={},Wv={};function ty(e,n){if(e){var t=[.7,.7,.75,.75,.3,.3];"xlml"==n&&(t=[1,1,1,1,.5,.5]),null==e.left&&(e.left=t[0]),null==e.right&&(e.right=t[1]),null==e.top&&(e.top=t[2]),null==e.bottom&&(e.bottom=t[3]),null==e.header&&(e.header=t[4]),null==e.footer&&(e.footer=t[5])}}function uV(e,n,t,r,i,s){try{r.cellNF&&(e.z=Zn[n])}catch(l){if(r.WTF)throw l}if("z"!==e.t||r.cellStyles){if("d"===e.t&&"string"==typeof e.v&&(e.v=Vs(e.v)),(!r||!1!==r.cellText)&&"z"!==e.t)try{if(null==Zn[n]&&lf(zne[n]||"General",n),"e"===e.t)e.w=e.w||Up[e.v];else if(0===n)if("n"===e.t)e.w=(0|e.v)===e.v?e.v.toString(10):Qw(e.v);else if("d"===e.t){var a=sa(e.v);e.w=(0|a)===a?a.toString(10):Qw(a)}else{if(void 0===e.v)return"";e.w=z_(e.v,Wv)}else e.w=nu(n,"d"===e.t?sa(e.v):e.v,Wv)}catch(l){if(r.WTF)throw l}if(r.cellStyles&&null!=t)try{e.s=s.Fills[t],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=ZS(i.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),r.WTF&&(e.s.fgColor.raw_rgb=i.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=ZS(i.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),r.WTF&&(e.s.bgColor.raw_rgb=i.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(r.WTF&&s.Fills)throw l}}}var Uce=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,jce=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Hce=/<(?:\w:)?hyperlink [^>]*>/gm,$ce=/"(\w*:\w*)"/,Wce=/<(?:\w:)?col\b[^>]*[\/]?>/g,Gce=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Yce=/<(?:\w:)?pageMargins[^>]*\/>/g,hV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,qce=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Xce=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function hO(e,n,t,r){var i=ur(e);t.Sheets[r]||(t.Sheets[r]={}),i.codeName&&(t.Sheets[r].CodeName=Si(Yi(i.codeName)))}var uue=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/,pue=function(){var e=/<(?:\w+:)?c[ \/>]/,n=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=r2("v"),a=r2("f");return function(d,m,y,T,D,I){for(var fe,ae,qe,Je,zt,F=0,L="",B=[],G=[],Z=0,q=0,oe=0,_e="",De=0,Ie=0,$e=0,jt=0,ln=Array.isArray(I.CellXf),yt=[],xt=[],Zt=Array.isArray(m),Pt=[],an={},St=!1,Pe=!!y.sheetStubs,ut=d.split(n),Re=0,je=ut.length;Re!=je;++Re){var Dt=(L=ut[Re].trim()).length;if(0!==Dt){var en=0;e:for(F=0;F<Dt;++F)switch(L[F]){case">":if("/"!=L[F-1]){++F;break e}if(y&&y.cellStyles){if(De=null!=(ae=ur(L.slice(en,F),!0)).r?parseInt(ae.r,10):De+1,Ie=-1,y.sheetRows&&y.sheetRows<De)continue;an={},St=!1,ae.ht&&(St=!0,an.hpt=parseFloat(ae.ht),an.hpx=jv(an.hpt)),"1"==ae.hidden&&(St=!0,an.hidden=!0),null!=ae.outlineLevel&&(St=!0,an.level=+ae.outlineLevel),St&&(Pt[De-1]=an)}break;case"<":en=F}if(en>=F)break;if(De=null!=(ae=ur(L.slice(en,F),!0)).r?parseInt(ae.r,10):De+1,Ie=-1,!(y.sheetRows&&y.sheetRows<De)){T.s.r>De-1&&(T.s.r=De-1),T.e.r<De-1&&(T.e.r=De-1),y&&y.cellStyles&&(an={},St=!1,ae.ht&&(St=!0,an.hpt=parseFloat(ae.ht),an.hpx=jv(an.hpt)),"1"==ae.hidden&&(St=!0,an.hidden=!0),null!=ae.outlineLevel&&(St=!0,an.level=+ae.outlineLevel),St&&(Pt[De-1]=an)),B=L.slice(F).split(e);for(var tn=0;tn!=B.length&&"<"==B[tn].trim().charAt(0);++tn);for(B=B.slice(tn),F=0;F!=B.length;++F)if(0!==(L=B[F].trim()).length){if(G=L.match(t),Z=F,q=0,oe=0,L="<c "+("<"==L.slice(0,1)?">":"")+L,null!=G&&2===G.length){for(Z=0,_e=G[1],q=0;q!=_e.length&&!((oe=_e.charCodeAt(q)-64)<1||oe>26);++q)Z=26*Z+oe;Ie=--Z}else++Ie;for(q=0;q!=L.length&&62!==L.charCodeAt(q);++q);if(++q,(ae=ur(L.slice(0,q),!0)).r||(ae.r=hr({r:De-1,c:Ie})),fe={t:""},null!=(G=(_e=L.slice(q)).match(s))&&""!==G[1]&&(fe.v=Si(G[1])),y.cellFormula){if(null!=(G=_e.match(a))&&""!==G[1]){if(fe.f=Si(Yi(G[1])).replace(/\r\n/g,"\n"),y.xlfn||(fe.f=J8(fe.f)),G[0].indexOf('t="array"')>-1)fe.F=(_e.match(i)||[])[1],fe.F.indexOf(":")>-1&&yt.push([ui(fe.F),fe.F]);else if(G[0].indexOf('t="shared"')>-1){Je=ur(G[0]);var qt=Si(Yi(G[1]));y.xlfn||(qt=J8(qt)),xt[parseInt(Je.si,10)]=[Je,qt,ae.r]}}else(G=_e.match(/<f[^>]*\/>/))&&xt[(Je=ur(G[0])).si]&&(fe.f=dle(xt[Je.si][1],xt[Je.si][2],ae.r));var Vt=Us(ae.r);for(q=0;q<yt.length;++q)Vt.r>=yt[q][0].s.r&&Vt.r<=yt[q][0].e.r&&Vt.c>=yt[q][0].s.c&&Vt.c<=yt[q][0].e.c&&(fe.F=yt[q][1])}if(null==ae.t&&void 0===fe.v)if(fe.f||fe.F)fe.v=0,fe.t="n";else{if(!Pe)continue;fe.t="z"}else fe.t=ae.t||"n";switch(T.s.c>Ie&&(T.s.c=Ie),T.e.c<Ie&&(T.e.c=Ie),fe.t){case"n":if(""==fe.v||null==fe.v){if(!Pe)continue;fe.t="z"}else fe.v=parseFloat(fe.v);break;case"s":if(typeof fe.v>"u"){if(!Pe)continue;fe.t="z"}else qe=b2[parseInt(fe.v,10)],fe.v=qe.t,fe.r=qe.r,y.cellHTML&&(fe.h=qe.h);break;case"str":fe.t="s",fe.v=null!=fe.v?Yi(fe.v):"",y.cellHTML&&(fe.h=wP(fe.v));break;case"inlineStr":G=_e.match(r),fe.t="s",null!=G&&(qe=QP(G[1]))?(fe.v=qe.t,y.cellHTML&&(fe.h=qe.h)):fe.v="";break;case"b":fe.v=bs(fe.v);break;case"d":y.cellDates?fe.v=Vs(fe.v,1):(fe.v=sa(Vs(fe.v,1)),fe.t="n");break;case"e":(!y||!1!==y.cellText)&&(fe.w=fe.v),fe.v=Wz[fe.v]}if($e=jt=0,zt=null,ln&&void 0!==ae.s&&null!=(zt=I.CellXf[ae.s])&&(null!=zt.numFmtId&&($e=zt.numFmtId),y.cellStyles&&null!=zt.fillId&&(jt=zt.fillId)),uV(fe,$e,jt,y,D,I),y.cellDates&&ln&&"n"==fe.t&&V_(Zn[$e])&&(fe.t="d",fe.v=RS(fe.v)),ae.cm&&y.xlmeta){var wr=(y.xlmeta.Cell||[])[+ae.cm-1];wr&&"XLDAPR"==wr.type&&(fe.D=!0)}if(Zt){var Ne=Us(ae.r);m[Ne.r]||(m[Ne.r]=[]),m[Ne.r][Ne.c]=fe}else m[ae.r]=fe}}}}Pt.length>0&&(m["!rows"]=Pt)}}(),vue=G_;function fV(e){return[$_(e),ul(e),"n"]}var nhe=G_,pV=["left","right","top","bottom","header","footer"];var dO=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Bhe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],zhe=[],Vhe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function mV(e,n){for(var t=0;t!=e.length;++t)for(var r=e[t],i=0;i!=n.length;++i){var s=n[i];if(null==r[s[0]])r[s[0]]=s[1];else switch(s[2]){case"bool":"string"==typeof r[s[0]]&&(r[s[0]]=bs(r[s[0]]));break;case"int":"string"==typeof r[s[0]]&&(r[s[0]]=parseInt(r[s[0]],10))}}}function gV(e,n){for(var t=0;t!=n.length;++t){var r=n[t];if(null==e[r[0]])e[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof e[r[0]]&&(e[r[0]]=bs(e[r[0]]));break;case"int":"string"==typeof e[r[0]]&&(e[r[0]]=parseInt(e[r[0]],10))}}}function _V(e){gV(e.WBProps,dO),gV(e.CalcPr,Vhe),mV(e.WBView,Bhe),mV(e.Sheets,zhe),Wv.date1904=bs(e.WBProps.date1904)}var jhe="][*?/\\".split("");var $he=/<\w+:workbook/;function Zhe(e,n){var t={};return e.read_shift(4),t.ArchID=e.read_shift(4),e.l+=n-8,t}function sde(e,n,t,r,i,s,a,l){return".bin"===n.slice(-4)?function vhe(e,n,t,r,i,s,a){if(!e)return e;var l=n||{};r||(r={"!id":{}}),null!=Xs&&null==l.dense&&(l.dense=Xs);var m,F,L,B,G,Z,q,oe,_e,fe,d=l.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=[],D=!1,I=!1,ae=[];l.biff=12,l["!row"]=0;var De=0,Ie=!1,qe=[],Je={},$e=l.supbooks||i.supbooks||[[]];if($e.sharedf=Je,$e.arrayf=qe,$e.SheetNames=i.SheetNames||i.Sheets.map(function(an){return an.name}),!l.supbooks&&(l.supbooks=$e,i.Names))for(var jt=0;jt<i.Names.length;++jt)$e[0][jt+1]=i.Names[jt];var xt,Zt,ln=[],zt=[],yt=!1;if(E2[16]={n:"BrtShortReal",f:fV},Vp(e,function(St,Pe,ut){if(!I)switch(ut){case 148:m=St;break;case 0:F=St,l.sheetRows&&l.sheetRows<=F.r&&(I=!0),_e=Js(G=F.r),l["!row"]=F.r,(St.hidden||St.hpt||null!=St.level)&&(St.hpt&&(St.hpx=jv(St.hpt)),zt[St.r]=St);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(L={t:St[2]},St[2]){case"n":L.v=St[1];break;case"s":L.v=(oe=b2[St[1]]).t,L.r=oe.r;break;case"b":L.v=!!St[1];break;case"e":L.v=St[1],!1!==l.cellText&&(L.w=Up[L.v]);break;case"str":L.t="s",L.v=St[1];break;case"is":L.t="s",L.v=St[1].t}if((B=a.CellXf[St[0].iStyleRef])&&uV(L,B.numFmtId,null,l,s,a),Z=-1==St[0].c?Z+1:St[0].c,l.dense?(d[G]||(d[G]=[]),d[G][Z]=L):d[ws(Z)+_e]=L,l.cellFormula){for(Ie=!1,De=0;De<qe.length;++De){var Re=qe[De];F.r>=Re[0].s.r&&F.r<=Re[0].e.r&&Z>=Re[0].s.c&&Z<=Re[0].e.c&&(L.F=kr(Re[0]),Ie=!0)}!Ie&&St.length>3&&(L.f=St[3])}if(y.s.r>F.r&&(y.s.r=F.r),y.s.c>Z&&(y.s.c=Z),y.e.r<F.r&&(y.e.r=F.r),y.e.c<Z&&(y.e.c=Z),l.cellDates&&B&&"n"==L.t&&V_(Zn[B.numFmtId])){var je=Pg(L.v);je&&(L.t="d",L.v=new Date(je.y,je.m-1,je.d,je.H,je.M,je.S,je.u))}xt&&("XLDAPR"==xt.type&&(L.D=!0),xt=void 0),Zt&&(Zt=void 0);break;case 1:case 12:if(!l.sheetStubs||D)break;L={t:"z",v:void 0},Z=-1==St[0].c?Z+1:St[0].c,l.dense?(d[G]||(d[G]=[]),d[G][Z]=L):d[ws(Z)+_e]=L,y.s.r>F.r&&(y.s.r=F.r),y.s.c>Z&&(y.s.c=Z),y.e.r<F.r&&(y.e.r=F.r),y.e.c<Z&&(y.e.c=Z),xt&&("XLDAPR"==xt.type&&(L.D=!0),xt=void 0),Zt&&(Zt=void 0);break;case 176:ae.push(St);break;case 49:xt=((l.xlmeta||{}).Cell||[])[St-1];break;case 494:var Dt=r["!id"][St.relId];for(Dt?(St.Target=Dt.Target,St.loc&&(St.Target+="#"+St.loc),St.Rel=Dt):""==St.relId&&(St.Target="#"+St.loc),G=St.rfx.s.r;G<=St.rfx.e.r;++G)for(Z=St.rfx.s.c;Z<=St.rfx.e.c;++Z)l.dense?(d[G]||(d[G]=[]),d[G][Z]||(d[G][Z]={t:"z",v:void 0}),d[G][Z].l=St):(q=hr({c:Z,r:G}),d[q]||(d[q]={t:"z",v:void 0}),d[q].l=St);break;case 426:if(!l.cellFormula)break;qe.push(St),(fe=l.dense?d[G][Z]:d[ws(Z)+_e]).f=fl(St[1],0,{r:F.r,c:Z},$e,l),fe.F=kr(St[0]);break;case 427:if(!l.cellFormula)break;Je[hr(St[0].s)]=St[1],(fe=l.dense?d[G][Z]:d[ws(Z)+_e]).f=fl(St[1],0,{r:F.r,c:Z},$e,l);break;case 60:if(!l.cellStyles)break;for(;St.e>=St.s;)ln[St.e--]={width:St.w/256,hidden:!!(1&St.flags),level:St.level},yt||(yt=!0,nO(St.w/256)),ey(ln[St.e+1]);break;case 161:d["!autofilter"]={ref:kr(St)};break;case 476:d["!margins"]=St;break;case 147:i.Sheets[t]||(i.Sheets[t]={}),St.name&&(i.Sheets[t].CodeName=St.name),(St.above||St.left)&&(d["!outline"]={above:St.above,left:St.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),St.RTL&&(i.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:D=!0;break;case 36:D=!1;break;case 37:T.push(ut),D=!0;break;case 38:T.pop(),D=!1;break;default:if(!Pe.T&&(!D||l.WTF))throw new Error("Unexpected record 0x"+ut.toString(16))}},l),delete l.supbooks,delete l["!row"],!d["!ref"]&&(y.s.r<2e6||m&&(m.e.r>0||m.e.c>0||m.s.r>0||m.s.c>0))&&(d["!ref"]=kr(m||y)),l.sheetRows&&d["!ref"]){var Pt=ui(d["!ref"]);l.sheetRows<=+Pt.e.r&&(Pt.e.r=l.sheetRows-1,Pt.e.r>y.e.r&&(Pt.e.r=y.e.r),Pt.e.r<Pt.s.r&&(Pt.s.r=Pt.e.r),Pt.e.c>y.e.c&&(Pt.e.c=y.e.c),Pt.e.c<Pt.s.c&&(Pt.s.c=Pt.e.c),d["!fullref"]=d["!ref"],d["!ref"]=kr(Pt))}return ae.length>0&&(d["!merges"]=ae),ln.length>0&&(d["!cols"]=ln),zt.length>0&&(d["!rows"]=zt),d}(e,r,t,i,s,a,l):function Zce(e,n,t,r,i,s,a){if(!e)return e;r||(r={"!id":{}}),null!=Xs&&null==n.dense&&(n.dense=Xs);var l=n.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},m="",y="",T=e.match(jce);T?(m=e.slice(0,T.index),y=e.slice(T.index+T[0].length)):m=y=e;var D=m.match(hV);D?hO(D[0],0,i,t):(D=m.match(qce))&&function Jce(e,n,t,r,i){hO(e.slice(0,e.indexOf(">")),0,r,i)}(D[0],0,0,i,t);var I=(m.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(I>0){var F=m.slice(I,I+50).match($ce);F&&function Vce(e,n){var t=ui(n);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(e["!ref"]=kr(t))}(l,F[1])}var L=m.match(Xce);L&&L[1]&&function hue(e,n){n.Views||(n.Views=[{}]),(e.match(uue)||[]).forEach(function(t,r){var i=ur(t);n.Views[r]||(n.Views[r]={}),+i.zoomScale&&(n.Views[r].zoom=+i.zoomScale),bs(i.rightToLeft)&&(n.Views[r].RTL=!0)})}(L[1],i);var B=[];if(n.cellStyles){var G=m.match(Wce);G&&function oue(e,n){for(var t=!1,r=0;r!=n.length;++r){var i=ur(n[r],!0);i.hidden&&(i.hidden=bs(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!t&&i.width&&(t=!0,nO(i.width)),ey(i);s<=a;)e[s++]=Qi(i)}}(B,G)}T&&pue(T[1],l,n,d,s,a);var Z=y.match(Gce);Z&&(l["!autofilter"]=function lue(e){return{ref:(e.match(/ref="([^"]*)"/)||[])[1]}}(Z[0]));var q=[],oe=y.match(Uce);if(oe)for(I=0;I!=oe.length;++I)q[I]=ui(oe[I].slice(oe[I].indexOf('"')+1));var _e=y.match(Hce);_e&&function rue(e,n,t){for(var r=Array.isArray(e),i=0;i!=n.length;++i){var s=ur(Yi(n[i]),!0);if(!s.ref)return;var a=((t||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+Si(s.location))):(s.Target="#"+Si(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var l=ui(s.ref),d=l.s.r;d<=l.e.r;++d)for(var m=l.s.c;m<=l.e.c;++m){var y=hr({c:m,r:d});r?(e[d]||(e[d]=[]),e[d][m]||(e[d][m]={t:"z",v:void 0}),e[d][m].l=s):(e[y]||(e[y]={t:"z",v:void 0}),e[y].l=s)}}}(l,_e,r);var fe=y.match(Yce);if(fe&&(l["!margins"]=function iue(e){var n={};return["left","right","top","bottom","header","footer"].forEach(function(t){e[t]&&(n[t]=parseFloat(e[t]))}),n}(ur(fe[0]))),!l["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(l["!ref"]=kr(d)),n.sheetRows>0&&l["!ref"]){var ae=ui(l["!ref"]);n.sheetRows<=+ae.e.r&&(ae.e.r=n.sheetRows-1,ae.e.r>d.e.r&&(ae.e.r=d.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>d.e.c&&(ae.e.c=d.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),l["!fullref"]=l["!ref"],l["!ref"]=kr(ae))}return B.length>0&&(l["!cols"]=B),q.length>0&&(l["!merges"]=q),l}(e,r,t,i,s,a,l)}var C2,bV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,wV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Xh(e,n){var t=e.split(/\s+/),r=[];if(n||(r[0]=t[0]),1===t.length)return r;var s,a,d,i=e.match(bV);if(i)for(d=0;d!=i.length;++d)-1===(a=(s=i[d].match(wV))[1].indexOf(":"))?r[s[1]]=s[2].slice(1,s[2].length-1):r["xmlns:"===s[1].slice(0,6)?"xmlns"+s[1].slice(6):s[1].slice(a+1)]=s[2].slice(1,s[2].length-1);return r}function wde(e){var t={};if(1===e.split(/\s+/).length)return t;var i,s,l,r=e.match(bV);if(r)for(l=0;l!=r.length;++l)-1===(s=(i=r[l].match(wV))[1].indexOf(":"))?t[i[1]]=i[2].slice(1,i[2].length-1):t["xmlns:"===i[1].slice(0,6)?"xmlns"+i[1].slice(6):i[1].slice(s+1)]=i[2].slice(1,i[2].length-1);return t}function Tde(e,n,t,r){var i=r;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=bs(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=Vs(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}e[Si(n)]=i}function Sde(e,n,t){if(t.cellStyles&&n.Interior){var r=n.Interior;r.Pattern&&(r.patternType=zoe[r.Pattern]||r.Pattern)}e[n.ID]=n}function Dde(e,n,t,r,i,s,a,l,d,m){var y="General",T=r.StyleID,D={};m=m||{};var I=[],F=0;for(void 0===T&&l&&(T=l.StyleID),void 0===T&&a&&(T=a.StyleID);void 0!==s[T]&&(s[T].nf&&(y=s[T].nf),s[T].Interior&&I.push(s[T].Interior),s[T].Parent);)T=s[T].Parent;switch(t.Type){case"Boolean":r.t="b",r.v=bs(e);break;case"String":r.t="s",r.r=pz(Si(e)),r.v=e.indexOf("<")>-1?Si(n||e).replace(/<.*?>/g,""):r.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),r.v=(Vs(e)-new Date(Date.UTC(1899,11,30)))/864e5,r.v!=r.v?r.v=Si(e):r.v<60&&(r.v=r.v-1),(!y||"General"==y)&&(y="yyyy-mm-dd");case"Number":void 0===r.v&&(r.v=+e),r.t||(r.t="n");break;case"Error":r.t="e",r.v=Wz[e],!1!==m.cellText&&(r.w=e);break;default:""==e&&""==n?r.t="z":(r.t="s",r.v=pz(n||e))}if(function Ede(e,n,t){if("z"!==e.t){if(!t||!1!==t.cellText)try{e.w="e"===e.t?e.w||Up[e.v]:"General"===n?"n"===e.t?(0|e.v)===e.v?e.v.toString(10):Qw(e.v):z_(e.v):function Cde(e,n){var t=C2[e]||Si(e);return"General"===t?z_(n):nu(t,n)}(n||"General",e.v)}catch(s){if(t.WTF)throw s}try{var r=C2[n]||n||"General";if(t.cellNF&&(e.z=r),t.cellDates&&"n"==e.t&&V_(r)){var i=Pg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(t.WTF)throw s}}}(r,y,m),!1!==m.cellFormula)if(r.Formula){var L=Si(r.Formula);61==L.charCodeAt(0)&&(L=L.slice(1)),r.f=$v(L,i),delete r.Formula,"RC"==r.ArrayRange?r.F=$v("RC:RC",i):r.ArrayRange&&(r.F=$v(r.ArrayRange,i),d.push([ui(r.F),r.F]))}else for(F=0;F<d.length;++F)i.r>=d[F][0].s.r&&i.r<=d[F][0].e.r&&i.c>=d[F][0].s.c&&i.c<=d[F][0].e.c&&(r.F=d[F][1]);m.cellStyles&&(I.forEach(function(B){!D.patternType&&B.patternType&&(D.patternType=B.patternType)}),r.s=D),void 0!==r.StyleID&&(r.ixfe=r.StyleID)}function Mde(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function fO(e,n){var t=n||{};Fv();var r=Pv(EP(e));("binary"==t.type||"array"==t.type||"base64"==t.type)&&(r=typeof wi<"u"?wi.utils.decode(65001,kS(r)):Yi(r));var i=r.slice(0,1024).toLowerCase(),s=!1;if((1023&(i=i.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&i.indexOf(","),1023&i.indexOf(";"))){var a=Qi(t);return a.type="string",Uv.to_workbook(r,a)}if(-1==i.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach(function(Co){i.indexOf("<"+Co)>=0&&(s=!0)}),s)return function ufe(e,n){var t=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||0==t.length)throw new Error("Invalid HTML: could not find <table>");if(1==t.length)return Rg(SV(t[0],n),n);var r={SheetNames:[],Sheets:{}};return t.forEach(function(i,s){kO(r,SV(i,n),"Sheet"+(s+1))}),r}(r,t);C2={"General Number":"General","General Date":Zn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Zn[15],"Short Date":Zn[14],"Long Time":Zn[19],"Medium Time":Zn[18],"Short Time":Zn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Zn[2],Standard:Zn[4],Percent:Zn[10],Scientific:Zn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,m,d=[];null!=Xs&&null==t.dense&&(t.dense=Xs);var xt,y={},T=[],D=t.dense?[]:{},I="",F={},L={},B=Xh('<Data ss:Type="String">'),G=0,Z=0,q=0,oe={s:{r:2e6,c:2e6},e:{r:0,c:0}},_e={},fe={},ae="",De=0,Ie=[],qe={},Je={},$e=0,jt=[],ln=[],zt={},yt=[],Zt=!1,Pt=[],an=[],St={},Pe=0,ut=0,Re={Sheets:[],WBProps:{date1904:!1}},je={};s2.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"");for(var Dt="";l=s2.exec(r);)switch(l[3]=(Dt=l[3]).toLowerCase()){case"data":if("data"==Dt){if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else"/"!==l[0].charAt(l[0].length-2)&&d.push([l[3],!0]);break}if(d[d.length-1][1])break;"/"===l[1]?Dde(r.slice(G,l.index),ae,B,"comment"==d[d.length-1][0]?zt:F,{c:Z,r:q},_e,yt[Z],L,Pt,t):(ae="",B=Xh(l[0]),G=l.index+l[0].length);break;case"cell":if("/"===l[1])if(ln.length>0&&(F.c=ln),(!t.sheetRows||t.sheetRows>q)&&void 0!==F.v&&(t.dense?(D[q]||(D[q]=[]),D[q][Z]=F):D[ws(Z)+Js(q)]=F),F.HRef&&(F.l={Target:Si(F.HRef)},F.HRefScreenTip&&(F.l.Tooltip=F.HRefScreenTip),delete F.HRef,delete F.HRefScreenTip),(F.MergeAcross||F.MergeDown)&&(Pe=Z+(0|parseInt(F.MergeAcross,10)),ut=q+(0|parseInt(F.MergeDown,10)),Ie.push({s:{c:Z,r:q},e:{c:Pe,r:ut}})),t.sheetStubs)if(F.MergeAcross||F.MergeDown){for(var en=Z;en<=Pe;++en)for(var tn=q;tn<=ut;++tn)(en>Z||tn>q)&&(t.dense?(D[tn]||(D[tn]=[]),D[tn][en]={t:"z"}):D[ws(en)+Js(tn)]={t:"z"});Z=Pe+1}else++Z;else F.MergeAcross?Z=Pe+1:++Z;else(F=wde(l[0])).Index&&(Z=+F.Index-1),Z<oe.s.c&&(oe.s.c=Z),Z>oe.e.c&&(oe.e.c=Z),"/>"===l[0].slice(-2)&&++Z,ln=[];break;case"row":"/"===l[1]||"/>"===l[0].slice(-2)?(q<oe.s.r&&(oe.s.r=q),q>oe.e.r&&(oe.e.r=q),"/>"===l[0].slice(-2)&&(L=Xh(l[0])).Index&&(q=+L.Index-1),Z=0,++q):((L=Xh(l[0])).Index&&(q=+L.Index-1),St={},("0"==L.AutoFitHeight||L.Height)&&(St.hpx=parseInt(L.Height,10),St.hpt=g2(St.hpx),an[q]=St),"1"==L.Hidden&&(St.hidden=!0,an[q]=St));break;case"worksheet":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"));T.push(I),oe.s.r<=oe.e.r&&oe.s.c<=oe.e.c&&(D["!ref"]=kr(oe),t.sheetRows&&t.sheetRows<=oe.e.r&&(D["!fullref"]=D["!ref"],oe.e.r=t.sheetRows-1,D["!ref"]=kr(oe))),Ie.length&&(D["!merges"]=Ie),yt.length>0&&(D["!cols"]=yt),an.length>0&&(D["!rows"]=an),y[I]=D}else oe={s:{r:2e6,c:2e6},e:{r:0,c:0}},q=Z=0,d.push([l[3],!1]),m=Xh(l[0]),I=Si(m.Name),D=t.dense?[]:{},Ie=[],Pt=[],an=[],Re.Sheets.push(je={name:I,Hidden:0});break;case"table":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else{if("/>"==l[0].slice(-2))break;d.push([l[3],!1]),yt=[],Zt=!1}break;case"style":"/"===l[1]?Sde(_e,fe,t):fe=Xh(l[0]);break;case"numberformat":fe.nf=Si(Xh(l[0]).Format||"General"),C2[fe.nf]&&(fe.nf=C2[fe.nf]);for(var qt=0;392!=qt&&Zn[qt]!=fe.nf;++qt);if(392==qt)for(qt=57;392!=qt;++qt)if(null==Zn[qt]){lf(fe.nf,qt);break}break;case"column":if("table"!==d[d.length-1][0])break;if((xt=Xh(l[0])).Hidden&&(xt.hidden=!0,delete xt.Hidden),xt.Width&&(xt.wpx=parseInt(xt.Width,10)),!Zt&&xt.wpx>10){Zt=!0,dl=V8;for(var Vt=0;Vt<yt.length;++Vt)yt[Vt]&&ey(yt[Vt])}Zt&&ey(xt),yt[xt.Index-1||yt.length]=xt;for(var wr=0;wr<+xt.Span;++wr)yt[yt.length]=Qi(xt);break;case"namedrange":if("/"===l[1])break;Re.Names||(Re.Names=[]);var Ne=ur(l[0]),Hi={Name:Ne.Name,Ref:$v(Ne.RefersTo.slice(1),{r:0,c:0})};Re.Sheets.length>0&&(Hi.Sheet=Re.Sheets.length-1),Re.Names.push(Hi);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===l[0].slice(-2))break;"/"===l[1]?ae+=r.slice(De,l.index):De=l.index+l[0].length;break;case"interior":if(!t.cellStyles)break;fe.Interior=Xh(l[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===l[0].slice(-2))break;"/"===l[1]?Qre(qe,Dt,r.slice($e,l.index)):$e=l.index+l[0].length;break;case"styles":case"workbook":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else d.push([l[3],!1]);break;case"comment":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"));Mde(zt),ln.push(zt)}else d.push([l[3],!1]),zt={a:(m=Xh(l[0])).Author};break;case"autofilter":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else if("/"!==l[0].charAt(l[0].length-2)){var ni=Xh(l[0]);D["!autofilter"]={ref:$v(ni.Range).replace(/\$/g,"")},d.push([l[3],!0])}break;case"datavalidation":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else"/"!==l[0].charAt(l[0].length-2)&&d.push([l[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===l[1]){if((m=d.pop())[0]!==l[3])throw new Error("Bad state: "+m.join("|"))}else"/"!==l[0].charAt(l[0].length-2)&&d.push([l[3],!0]);break;default:if(0==d.length&&"document"==l[3]||0==d.length&&"uof"==l[3])return BV(r,t);var $i=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:$i=!1}break;case"componentoptions":switch(l[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:$i=!1}break;case"excelworkbook":switch(l[3]){case"date1904":Re.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:$i=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":case"height":case"width":break;default:$i=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if("/>"!==l[0].slice(-2))if("/"===l[1])switch(r.slice($e,l.index)){case"SheetHidden":je.Hidden=1;break;case"SheetVeryHidden":je.Hidden=2}else $e=l.index+l[0].length;break;case"header":D["!margins"]||ty(D["!margins"]={},"xlml"),isNaN(+ur(l[0]).Margin)||(D["!margins"].header=+ur(l[0]).Margin);break;case"footer":D["!margins"]||ty(D["!margins"]={},"xlml"),isNaN(+ur(l[0]).Margin)||(D["!margins"].footer=+ur(l[0]).Margin);break;case"pagemargins":var ri=ur(l[0]);D["!margins"]||ty(D["!margins"]={},"xlml"),isNaN(+ri.Top)||(D["!margins"].top=+ri.Top),isNaN(+ri.Left)||(D["!margins"].left=+ri.Left),isNaN(+ri.Right)||(D["!margins"].right=+ri.Right),isNaN(+ri.Bottom)||(D["!margins"].bottom=+ri.Bottom);break;case"displayrighttoleft":Re.Views||(Re.Views=[]),Re.Views[0]||(Re.Views[0]={}),Re.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":D["!outline"]||(D["!outline"]={}),D["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":D["!outline"]||(D["!outline"]={}),D["!outline"].left=!0;break;default:$i=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:$i=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:$i=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:$i=!1}break;case"querytable":switch(l[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:$i=!1}break;case"datavalidation":switch(l[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:$i=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:$i=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:$i=!1}break;case"smarttags":break;default:$i=!1}if($i||l[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+d.join("|");if("customdocumentproperties"===d[d.length-1][0]){if("/>"===l[0].slice(-2))break;"/"===l[1]?Tde(Je,Dt,jt,r.slice($e,l.index)):(jt=l,$e=l.index+l[0].length);break}if(t.WTF)throw"Unrecognized tag: "+l[3]+"|"+d.join("|")}var Tn={};return!t.bookSheets&&!t.bookProps&&(Tn.Sheets=y),Tn.SheetNames=T,Tn.Workbook=Re,Tn.SSF=Qi(Zn),Tn.Props=qe,Tn.Custprops=Je,Tn}function pO(e,n){switch(bO(n=n||{}),n.type||"base64"){case"base64":return fO(eu(e),n);case"binary":case"buffer":case"file":return fO(e,n);case"array":return fO(Ig(e),n)}}var jde=[60,1084,2066,2165,2175];function Hde(e,n,t,r,i){var s=r,a=[],l=t.slice(t.l,t.l+s);if(i&&i.enc&&i.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:i.enc.insitu(l)}a.push(l),t.l+=s;for(var d=zp(t,t.l),m=mO[d],y=0;null!=m&&jde.indexOf(d)>-1;)s=zp(t,t.l+2),y=t.l+4,2066==d?y+=4:(2165==d||2175==d)&&(y+=12),l=t.slice(y,t.l+4+s),a.push(l),t.l+=4+s,m=mO[d=zp(t,t.l)];var T=wa(a);Wa(T,0);var D=0;T.lens=[];for(var I=0;I<a.length;++I)T.lens.push(D),D+=a[I].length;if(T.length<r)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+T.length+" < "+r;return n.f(T,T.length,i)}function ff(e,n,t){if("z"!==e.t&&e.XF){var r=0;try{r=e.z||e.XF.numFmtId||0,n.cellNF&&(e.z=Zn[r])}catch(s){if(n.WTF)throw s}if(!n||!1!==n.cellText)try{e.w="e"===e.t?e.w||Up[e.v]:0===r||"General"==r?"n"===e.t?(0|e.v)===e.v?e.v.toString(10):Qw(e.v):z_(e.v):nu(r,e.v,{date1904:!!t,dateNF:n&&n.dateNF})}catch(s){if(n.WTF)throw s}if(n.cellDates&&r&&"n"==e.t&&V_(Zn[r]||String(r))){var i=Pg(e.v);i&&(e.t="d",e.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function rD(e,n,t){return{v:e,ixfe:n,t}}var T2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function TV(e,n){var t,r,i,s;if(n||(n={}),bO(n),MS(),n.codepage&&DS(n.codepage),e.FullPaths){if(Xn.find(e,"/encryption"))throw new Error("File is password-protected");t=Xn.find(e,"!CompObj"),r=Xn.find(e,"/Workbook")||Xn.find(e,"/Book")}else{switch(n.type){case"base64":e=tu(eu(e));break;case"binary":e=tu(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}Wa(e,0),r={content:e}}if(t&&function Ude(e){var n={},t=e.content;if(t.l=28,n.AnsiUserType=t.read_shift(0,"lpstr-ansi"),n.AnsiClipboardFormat=function Pre(e){return Uz(e,1)}(t),t.length-t.l<=4)return n;var r=t.read_shift(4);if(0==r||r>40||(t.l-=4,n.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||1907505652!==(r=t.read_shift(4))||(n.UnicodeClipboardFormat=function Ore(e){return Uz(e,2)}(t),0==(r=t.read_shift(4))||r>40))return n;t.l-=4,n.Reserved2=t.read_shift(0,"lpwstr")}(t),n.bookProps&&!n.bookSheets)i={};else{var a=Hr?"buffer":"array";if(r&&r.content)i=function $de(e,n){var t={opts:{}},r={};null!=Xs&&null==n.dense&&(n.dense=Xs);var T,I,L,B,q,oe,i=n.dense?[]:{},s={},a={},l=null,d=[],m="",y={},D="",G={},Z=[],_e=[],fe=[],ae={Sheets:[],WBProps:{date1904:!1},Views:[{}]},De={},Ie=function(Yr){return Yr<8?q_[Yr]:Yr<64&&fe[Yr-8]||q_[Yr]},Je=function(Yr,To,fh){if(!(St>1||fh.sheetRows&&Yr.r>=fh.sheetRows)){if(fh.cellStyles&&To.XF&&To.XF.data&&function(Yr,To,fh){var Ry,ua=To.XF.data;ua&&ua.patternType&&fh&&fh.cellStyles&&(To.s={},To.s.patternType=ua.patternType,(Ry=f2(Ie(ua.icvFore)))&&(To.s.fgColor={rgb:Ry}),(Ry=f2(Ie(ua.icvBack)))&&(To.s.bgColor={rgb:Ry}))}(0,To,fh),delete To.ixfe,delete To.XF,T=Yr,D=hr(Yr),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Yr.r<a.s.r&&(a.s.r=Yr.r),Yr.c<a.s.c&&(a.s.c=Yr.c),Yr.r+1>a.e.r&&(a.e.r=Yr.r+1),Yr.c+1>a.e.c&&(a.e.c=Yr.c+1),fh.cellFormula&&To.f)for(var ua=0;ua<Z.length;++ua)if(!(Z[ua][0].s.c>Yr.c||Z[ua][0].s.r>Yr.r||Z[ua][0].e.c<Yr.c||Z[ua][0].e.r<Yr.r)){To.F=kr(Z[ua][0]),(Z[ua][0].s.c!=Yr.c||Z[ua][0].s.r!=Yr.r)&&delete To.f,To.f&&(To.f=""+fl(Z[ua][1],0,Yr,Pt,$e));break}fh.dense?(i[Yr.r]||(i[Yr.r]=[]),i[Yr.r][Yr.c]=To):i[D]=To}},$e={enc:!1,sbcch:0,snames:[],sharedf:G,arrayf:Z,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!n&&!!n.cellStyles,WTF:!!n&&!!n.wtf};n.password&&($e.password=n.password);var jt,ln=[],zt=[],yt=[],xt=[],Zt=!1,Pt=[];Pt.SheetNames=$e.snames,Pt.sharedf=$e.sharedf,Pt.arrayf=$e.arrayf,Pt.names=[],Pt.XTI=[];var je,an=0,St=0,Pe=0,ut=[],Re=[];$e.codepage=1200,$u(1200);for(var Dt=!1;e.l<e.length-1;){var en=e.l,tn=e.read_shift(2);if(0===tn&&10===an)break;var qt=e.l===e.length?0:e.read_shift(2),Vt=mO[tn];if(Vt&&Vt.f){if(n.bookSheets&&133===an&&133!==tn)break;if(an=tn,2===Vt.r||12==Vt.r){var wr=e.read_shift(2);if(qt-=2,!$e.enc&&wr!==tn&&((255&wr)<<8|wr>>8)!==tn)throw new Error("rt mismatch: "+wr+"!="+tn);12==Vt.r&&(e.l+=10,qt-=10)}var Ne={};if(Ne=10===tn?Vt.f(e,qt,$e):Hde(tn,Vt,e,qt,$e),0==St&&-1===[9,521,1033,2057].indexOf(an))continue;switch(tn){case 34:t.opts.Date1904=ae.WBProps.date1904=Ne;break;case 134:t.opts.WriteProtect=!0;break;case 47:if($e.enc||(e.l=0),$e.enc=Ne,!n.password)throw new Error("File is password-protected");if(null==Ne.valid)throw new Error("Encryption scheme unsupported");if(!Ne.valid)throw new Error("Password is incorrect");break;case 92:$e.lastuser=Ne;break;case 66:var Hi=Number(Ne);switch(Hi){case 21010:Hi=1200;break;case 32768:Hi=1e4;break;case 32769:Hi=1252}$u($e.codepage=Hi),Dt=!0;break;case 317:$e.rrtabid=Ne;break;case 25:$e.winlocked=Ne;break;case 439:t.opts.RefreshAll=Ne;break;case 12:t.opts.CalcCount=Ne;break;case 16:t.opts.CalcDelta=Ne;break;case 17:t.opts.CalcIter=Ne;break;case 13:t.opts.CalcMode=Ne;break;case 14:t.opts.CalcPrecision=Ne;break;case 95:t.opts.CalcSaveRecalc=Ne;break;case 15:$e.CalcRefMode=Ne;break;case 2211:t.opts.FullCalc=Ne;break;case 129:Ne.fDialog&&(i["!type"]="dialog"),Ne.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),Ne.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:_e.push(Ne);break;case 430:Pt.push([Ne]),Pt[Pt.length-1].XTI=[];break;case 35:case 547:Pt[Pt.length-1].push(Ne);break;case 24:case 536:je={Name:Ne.Name,Ref:fl(Ne.rgce,0,null,Pt,$e)},Ne.itab>0&&(je.Sheet=Ne.itab-1),Pt.names.push(je),Pt[0]||(Pt[0]=[],Pt[0].XTI=[]),Pt[Pt.length-1].push(Ne),"_xlnm._FilterDatabase"==Ne.Name&&Ne.itab>0&&Ne.rgce&&Ne.rgce[0]&&Ne.rgce[0][0]&&"PtgArea3d"==Ne.rgce[0][0][0]&&(Re[Ne.itab-1]={ref:kr(Ne.rgce[0][0][1][2])});break;case 22:$e.ExternCount=Ne;break;case 23:0==Pt.length&&(Pt[0]=[],Pt[0].XTI=[]),Pt[Pt.length-1].XTI=Pt[Pt.length-1].XTI.concat(Ne),Pt.XTI=Pt.XTI.concat(Ne);break;case 2196:if($e.biff<8)break;null!=je&&(je.Comment=Ne[1]);break;case 18:i["!protect"]=Ne;break;case 19:0!==Ne&&$e.WTF&&console.error("Password verifier: "+Ne);break;case 133:s[Ne.pos]=Ne,$e.snames.push(Ne.name);break;case 10:if(--St)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=kr(a),n.sheetRows&&n.sheetRows<=a.e.r){var ni=a.e.r;a.e.r=n.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=kr(a),a.e.r=ni}a.e.r++,a.e.c++}ln.length>0&&(i["!merges"]=ln),zt.length>0&&(i["!objects"]=zt),yt.length>0&&(i["!cols"]=yt),xt.length>0&&(i["!rows"]=xt),ae.Sheets.push(De)}""===m?y=i:r[m]=i,i=n.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===$e.biff&&($e.biff={9:2,521:3,1033:4}[tn]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Ne.BIFFVer]||8),$e.biffguess=0==Ne.BIFFVer,0==Ne.BIFFVer&&4096==Ne.dt&&($e.biff=5,Dt=!0,$u($e.codepage=28591)),8==$e.biff&&0==Ne.BIFFVer&&16==Ne.dt&&($e.biff=2),St++)break;if(i=n.dense?[]:{},$e.biff<8&&!Dt&&(Dt=!0,$u($e.codepage=n.codepage||1252)),$e.biff<5||0==Ne.BIFFVer&&4096==Ne.dt){""===m&&(m="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var $i={pos:e.l-qt,name:m};s[$i.pos]=$i,$e.snames.push(m)}else m=(s[en]||{name:""}).name;32==Ne.dt&&(i["!type"]="chart"),64==Ne.dt&&(i["!type"]="macro"),ln=[],zt=[],$e.arrayf=Z=[],yt=[],xt=[],Zt=!1,De={Hidden:(s[en]||{hs:0}).hs,name:m};break;case 515:case 3:case 2:"chart"==i["!type"]&&(n.dense?(i[Ne.r]||[])[Ne.c]:i[hr({c:Ne.c,r:Ne.r})])&&++Ne.c,q={ixfe:Ne.ixfe,XF:_e[Ne.ixfe]||{},v:Ne.val,t:"n"},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n);break;case 5:case 517:q={ixfe:Ne.ixfe,XF:_e[Ne.ixfe],v:Ne.val,t:Ne.t},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n);break;case 638:q={ixfe:Ne.ixfe,XF:_e[Ne.ixfe],v:Ne.rknum,t:"n"},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n);break;case 189:for(var ri=Ne.c;ri<=Ne.C;++ri){var Tn=Ne.rkrec[ri-Ne.c][0];q={ixfe:Tn,XF:_e[Tn],v:Ne.rkrec[ri-Ne.c][1],t:"n"},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:ri,r:Ne.r},q,n)}break;case 6:case 518:case 1030:if("String"==Ne.val){l=Ne;break}if((q=rD(Ne.val,Ne.cell.ixfe,Ne.tt)).XF=_e[q.ixfe],n.cellFormula){var Co=Ne.formula;if(Co&&Co[0]&&Co[0][0]&&"PtgExp"==Co[0][0][0]){var dh=Co[0][0][1][0],Tf=Co[0][0][1][1],am=hr({r:dh,c:Tf});G[am]?q.f=""+fl(Ne.formula,0,Ne.cell,Pt,$e):q.F=((n.dense?(i[dh]||[])[Tf]:i[am])||{}).F}else q.f=""+fl(Ne.formula,0,Ne.cell,Pt,$e)}Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je(Ne.cell,q,n),l=Ne;break;case 7:case 519:if(!l)throw new Error("String record expects Formula");l.val=Ne,(q=rD(Ne,l.cell.ixfe,"s")).XF=_e[q.ixfe],n.cellFormula&&(q.f=""+fl(l.formula,0,l.cell,Pt,$e)),Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je(l.cell,q,n),l=null;break;case 33:case 545:Z.push(Ne);var DC=hr(Ne[0].s);if(I=n.dense?(i[Ne[0].s.r]||[])[Ne[0].s.c]:i[DC],n.cellFormula&&I){if(!l||!DC||!I)break;I.f=""+fl(Ne[1],0,Ne[0],Pt,$e),I.F=kr(Ne[0])}break;case 1212:if(!n.cellFormula)break;if(D){if(!l)break;G[hr(l.cell)]=Ne[0],((I=n.dense?(i[l.cell.r]||[])[l.cell.c]:i[hr(l.cell)])||{}).f=""+fl(Ne[0],0,T,Pt,$e)}break;case 253:q=rD(d[Ne.isst].t,Ne.ixfe,"s"),d[Ne.isst].h&&(q.h=d[Ne.isst].h),q.XF=_e[q.ixfe],Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n);break;case 513:n.sheetStubs&&(q={ixfe:Ne.ixfe,XF:_e[Ne.ixfe],t:"z"},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n));break;case 190:if(n.sheetStubs)for(var a0=Ne.c;a0<=Ne.C;++a0){var du=Ne.ixfe[a0-Ne.c];q={ixfe:du,XF:_e[du],t:"z"},Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:a0,r:Ne.r},q,n)}break;case 214:case 516:case 4:(q=rD(Ne.val,Ne.ixfe,"s")).XF=_e[q.ixfe],Pe>0&&(q.z=ut[q.ixfe>>8&63]),ff(q,n,t.opts.Date1904),Je({c:Ne.c,r:Ne.r},q,n);break;case 0:case 512:1===St&&(a=Ne);break;case 252:d=Ne;break;case 1054:if(4==$e.biff){ut[Pe++]=Ne[1];for(var lm=0;lm<Pe+163&&Zn[lm]!=Ne[1];++lm);lm>=163&&lf(Ne[1],Pe+163)}else lf(Ne[1],Ne[0]);break;case 30:ut[Pe++]=Ne;for(var l0=0;l0<Pe+163&&Zn[l0]!=Ne;++l0);l0>=163&&lf(Ne,Pe+163);break;case 229:ln=ln.concat(Ne);break;case 93:zt[Ne.cmo[0]]=$e.lastobj=Ne;break;case 438:$e.lastobj.TxO=Ne;break;case 127:$e.lastobj.ImData=Ne;break;case 440:for(B=Ne[0].s.r;B<=Ne[0].e.r;++B)for(L=Ne[0].s.c;L<=Ne[0].e.c;++L)(I=n.dense?(i[B]||[])[L]:i[hr({c:L,r:B})])&&(I.l=Ne[1]);break;case 2048:for(B=Ne[0].s.r;B<=Ne[0].e.r;++B)for(L=Ne[0].s.c;L<=Ne[0].e.c;++L)(I=n.dense?(i[B]||[])[L]:i[hr({c:L,r:B})])&&I.l&&(I.l.Tooltip=Ne[1]);break;case 28:if($e.biff<=5&&$e.biff>=2)break;I=n.dense?(i[Ne[0].r]||[])[Ne[0].c]:i[hr(Ne[0])];var MC=zt[Ne[2]];I||(n.dense?(i[Ne[0].r]||(i[Ne[0].r]=[]),I=i[Ne[0].r][Ne[0].c]={t:"z"}):I=i[hr(Ne[0])]={t:"z"},a.e.r=Math.max(a.e.r,Ne[0].r),a.s.r=Math.min(a.s.r,Ne[0].r),a.e.c=Math.max(a.e.c,Ne[0].c),a.s.c=Math.min(a.s.c,Ne[0].c)),I.c||(I.c=[]),I.c.push({a:Ne[1],t:MC.TxO.t});break;case 2173:Pae(0,Ne.ext);break;case 125:if(!$e.cellStyles)break;for(;Ne.e>=Ne.s;)yt[Ne.e--]={width:Ne.w/256,level:Ne.level||0,hidden:!!(1&Ne.flags)},Zt||(Zt=!0,nO(Ne.w/256)),ey(yt[Ne.e+1]);break;case 520:var Yl={};null!=Ne.level&&(xt[Ne.r]=Yl,Yl.level=Ne.level),Ne.hidden&&(xt[Ne.r]=Yl,Yl.hidden=!0),Ne.hpt&&(xt[Ne.r]=Yl,Yl.hpt=Ne.hpt,Yl.hpx=jv(Ne.hpt));break;case 38:case 39:case 40:case 41:i["!margins"]||ty(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[tn]]=Ne;break;case 161:i["!margins"]||ty(i["!margins"]={}),i["!margins"].header=Ne.header,i["!margins"].footer=Ne.footer;break;case 574:Ne.RTL&&(ae.Views[0].RTL=!0);break;case 146:fe=Ne;break;case 2198:jt=Ne;break;case 140:oe=Ne;break;case 442:m?De.CodeName=Ne||De.name:ae.WBProps.CodeName=Ne||"ThisWorkbook"}}else Vt||console.error("Missing Info for XLS Record 0x"+tn.toString(16)),e.l+=qt}return t.SheetNames=Zs(s).sort(function(Ef,Yr){return Number(Ef)-Number(Yr)}).map(function(Ef){return s[Ef].name}),n.bookSheets||(t.Sheets=r),!t.SheetNames.length&&y["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=y)):t.Preamble=y,t.Sheets&&Re.forEach(function(Ef,Yr){t.Sheets[t.SheetNames[Yr]]["!autofilter"]=Ef}),t.Strings=d,t.SSF=Qi(Zn),$e.enc&&(t.Encryption=$e.enc),jt&&(t.Themes=jt),t.Metadata={},void 0!==oe&&(t.Metadata.Country=oe),Pt.names.length>0&&(ae.Names=Pt.names),t.Workbook=ae,t}(r.content,n);else if((s=Xn.find(e,"PerfectOffice_MAIN"))&&s.content)i=Q_.to_workbook(s.content,(n.type=a,n));else{if(!(s=Xn.find(e,"NativeContent_MAIN"))||!s.content)throw(s=Xn.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");i=Q_.to_workbook(s.content,(n.type=a,n))}n.bookVBA&&e.FullPaths&&Xn.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=function ole(e){var n=Xn.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(t,r){if("/"!==t.slice(-1)&&t.match(/_VBA_PROJECT_CUR/)){var i=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Xn.utils.cfb_add(n,i,e.FileIndex[r].content)}}),Xn.write(n)}(e))}var l={};return e.FullPaths&&function Wde(e,n,t){var r=Xn.find(e,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=c8(r,jP,T2.DSI);for(var s in i)n[s]=i[s]}catch(m){if(t.WTF)throw m}var a=Xn.find(e,"/!SummaryInformation");if(a&&a.size>0)try{var l=c8(a,HP,T2.SI);for(var d in l)null==n[d]&&(n[d]=l[d])}catch(m){if(t.WTF)throw m}n.HeadingPairs&&n.TitlesOfParts&&(Kz(n.HeadingPairs,n.TitlesOfParts,n,t),delete n.HeadingPairs,delete n.TitlesOfParts)}(e,l,n),i.Props=i.Custprops=l,n.bookFiles&&(i.cfb=e),i}var E2={0:{f:function gue(e,n){var t={},r=e.l+n;t.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(t.level=7&s),16&s&&(t.hidden=!0),32&s&&(t.hpt=i/20),t}},1:{f:function Tue(e){return[Yu(e)]}},2:{f:function Hue(e){return[Yu(e),VP(e),"n"]}},3:{f:function Pue(e){return[Yu(e),e.read_shift(1),"e"]}},4:{f:function Mue(e){return[Yu(e),e.read_shift(1),"b"]}},5:{f:function Vue(e){return[Yu(e),ul(e),"n"]}},6:{f:function que(e){return[Yu(e),cl(e),"str"]}},7:{f:function Rue(e){return[Yu(e),e.read_shift(4),"s"]}},8:{f:function the(e,n,t){var r=e.l+n,i=Yu(e);i.r=t["!row"];var a=[i,cl(e),"str"];if(t.cellFormula){e.l+=2;var l=tD(e,r-e.l,t);a[3]=fl(l,0,i,t.supbooks,t)}else e.l=r;return a}},9:{f:function ehe(e,n,t){var r=e.l+n,i=Yu(e);i.r=t["!row"];var a=[i,ul(e),"n"];if(t.cellFormula){e.l+=2;var l=tD(e,r-e.l,t);a[3]=fl(l,0,i,t.supbooks,t)}else e.l=r;return a}},10:{f:function Jue(e,n,t){var r=e.l+n,i=Yu(e);i.r=t["!row"];var a=[i,e.read_shift(1),"b"];if(t.cellFormula){e.l+=2;var l=tD(e,r-e.l,t);a[3]=fl(l,0,i,t.supbooks,t)}else e.l=r;return a}},11:{f:function Que(e,n,t){var r=e.l+n,i=Yu(e);i.r=t["!row"];var a=[i,e.read_shift(1),"e"];if(t.cellFormula){e.l+=2;var l=tD(e,r-e.l,t);a[3]=fl(l,0,i,t.supbooks,t)}else e.l=r;return a}},12:{f:function Sue(e){return[$_(e)]}},13:{f:function Wue(e){return[$_(e),VP(e),"n"]}},14:{f:function Lue(e){return[$_(e),e.read_shift(1),"e"]}},15:{f:function Aue(e){return[$_(e),e.read_shift(1),"b"]}},16:{f:fV},17:{f:function Zue(e){return[$_(e),cl(e),"str"]}},18:{f:function Bue(e){return[$_(e),e.read_shift(4),"s"]}},19:{f:FP},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function Khe(e,n,t){var r=e.l+n;e.l+=4,e.l+=1;var i=e.read_shift(4),s=Mre(e),a=Fce(e,0,t),l=RP(e);e.l=r;var d={Name:s,Ptg:a};return i<268435455&&(d.Sheet=i),l&&(d.Comment=l),d}},40:{},42:{},43:{f:function Zoe(e,n,t){var r={};r.sz=e.read_shift(2)/20;var i=function Are(e){var n=e.read_shift(1);return e.l++,{fBold:1&n,fItalic:2&n,fUnderline:4&n,fStrikeout:8&n,fOutline:16&n,fShadow:32&n,fCondense:64&n,fExtend:128&n}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=e.read_shift(1);0!=a&&(r.underline=a);var l=e.read_shift(1);l>0&&(r.family=l);var d=e.read_shift(1);switch(d>0&&(r.charset=d),e.l++,r.color=function kre(e){var n={},r=e.read_shift(1)>>>1,i=e.read_shift(1),s=e.read_shift(2,"i"),a=e.read_shift(1),l=e.read_shift(1),d=e.read_shift(1);switch(e.l++,r){case 0:n.auto=1;break;case 1:n.index=i;var m=q_[i];m&&(n.rgb=f2(m));break;case 2:n.rgb=f2([a,l,d]);break;case 3:n.theme=i}return 0!=s&&(n.tint=s>0?s/32767:s/32768),n}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=cl(e),r}},44:{f:function qoe(e,n){return[e.read_shift(2),cl(e)]}},45:{f:Qoe},46:{f:tae},47:{f:function eae(e,n){var t=e.l+n,r=e.read_shift(2),i=e.read_shift(2);return e.l=t,{ixfe:r,numFmtId:i}}},48:{},49:{f:function wre(e){return e.read_shift(4,"i")}},50:{},51:{f:function Fae(e){for(var n=[],t=e.read_shift(4);t-- >0;)n.push([e.read_shift(4),e.read_shift(4)]);return n}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:A8},62:{f:function Yue(e){return[Yu(e),FP(e),"is"]}},63:{f:function $ae(e){var n={};n.i=e.read_shift(4);var t={};t.r=e.read_shift(4),t.c=e.read_shift(4),n.r=hr(t);var r=e.read_shift(1);return 2&r&&(n.l="1"),8&r&&(n.a="1"),n}},64:{f:function _he(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ll,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function fhe(e){var n=e.read_shift(2);return e.l+=28,{RTL:32&n}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function wue(e,n){var t={},r=e[e.l];return++e.l,t.above=!(64&r),t.left=!(128&r),e.l+=18,t.name=Dre(e,n-19),t}},148:{f:vue,p:16},151:{f:function ahe(){}},152:{},153:{f:function qhe(e,n){var t={},r=e.read_shift(4);t.defaultThemeVersion=e.read_shift(4);var i=n>8?cl(e):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(65536&r),t.backupFile=!!(64&r),t.checkCompatibility=!!(4096&r),t.date1904=!!(1&r),t.filterPrivacy=!!(8&r),t.hidePivotFieldList=!!(1024&r),t.promptedSolutions=!!(16&r),t.publishItems=!!(2048&r),t.refreshAllConnections=!!(262144&r),t.saveExternalLinkValues=!!(128&r),t.showBorderUnselectedTables=!!(4&r),t.showInkAnnotation=!!(32&r),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(32768&r),t.updateLinks=["userSet","never","always"][r>>8&3],t}},154:{},155:{},156:{f:function Ghe(e,n){var t={};return t.Hidden=e.read_shift(4),t.iTabID=e.read_shift(4),t.strRelID=BP(e,n-8),t.name=cl(e),t}},157:{},158:{},159:{T:1,f:function hoe(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:G_},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:nhe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function Oae(e,n){return{flags:e.read_shift(4),version:e.read_shift(4),name:cl(e)}}},336:{T:-1},337:{f:function Bae(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BP},357:{},358:{},359:{},360:{T:1},361:{},362:{f:M8},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function lhe(e,n,t){var r=e.l+n,i=Vz(e),s=e.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var l=Lce(e,r-e.l,t);a[1]=l}else e.l=r;return a}},427:{f:function che(e,n,t){var r=e.l+n,s=[G_(e,16)];if(t.cellFormula){var a=Rce(e,r-e.l,t);s[1]=a,e.l=r}else e.l=r;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function hhe(e){var n={};return pV.forEach(function(t){n[t]=ul(e)}),n}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function bue(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function she(e,n){var t=e.l+n,r=G_(e,16),i=RP(e),s=cl(e),a=cl(e),l=cl(e);e.l=t;var d={rfx:r,relId:i,loc:s,display:l};return a&&(d.Tooltip=a),d}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BP},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tle},633:{T:1},634:{T:-1},635:{T:1,f:function Qae(e){var n={};n.iauthor=e.read_shift(4);var t=G_(e,16);return n.rfx=t.s,n.ref=hr(t.s),e.l+=16,n}},636:{T:-1},637:{f:Ere},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function Fhe(e,n){return e.l+=10,{name:cl(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function yhe(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},mO={6:{f:lO},10:{f:Ng},12:{f:$o},13:{f:$o},14:{f:wo},15:{f:wo},16:{f:ul},17:{f:wo},18:{f:wo},19:{f:$o},20:{f:E8},21:{f:E8},23:{f:M8},24:{f:D8},25:{f:wo},26:{},27:{},28:{f:function xse(e,n,t){return function vse(e,n,t){if(!(t.biff<8)){var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),l=K_(e,0,t);return t.biff<8&&e.read_shift(1),[{r,c:i},l,a,s]}}(e,0,t)}},29:{},34:{f:wo},35:{f:S8},38:{f:ul},39:{f:ul},40:{f:ul},41:{f:ul},42:{f:wo},43:{f:wo},47:{f:function Poe(e,n,t){var r={Type:t.biff>=8?e.read_shift(2):0};return r.Type?function Ioe(e,n,t){var r=t||{};return r.Info=e.read_shift(2),e.l-=2,r.Data=1===r.Info?function Doe(e){var n={},t=n.EncryptionVersionInfo=jp(e,4);if(1!=t.Major||1!=t.Minor)throw"unrecognized version code "+t.Major+" : "+t.Minor;return n.Salt=e.read_shift(16),n.EncryptedVerifier=e.read_shift(16),n.EncryptedVerifierHash=e.read_shift(16),n}(e):function Soe(e,n){var t={},r=t.EncryptionVersionInfo=jp(e,4);if(n-=4,2!=r.Minor)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);t.Flags=e.read_shift(4),n-=4;var i=e.read_shift(4);return n-=4,t.EncryptionHeader=R8(e,i),t.EncryptionVerifier=N8(e,n-=i),t}(e,n),r}(e,n-2,r):function Aoe(e,n,t,r){var i={key:$o(e),verificationBytes:$o(e)};t.password&&(i.verifier=function eO(e){var t,s,n=0,r=F8(e),i=r.length+1;for((t=Ag(i))[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)n=((16384&n?1:0)|n<<1&32767)^t[s];return 52811^n}(t.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=function(e){var n=0,t=B8(e);return function(r){var i=function(e,n,t,r,i){var s,a;for(i||(i=n),r||(r=B8("")),s=0;s!=n.length;++s)a=n[s],i[s]=a=255&((a^=r[t])>>5|a<<3),++t;return[i,t,r]}(0,r,n,t);return n=i[1],i[0]}}(t.password))}(e,0,t,r),r}},49:{f:function Yie(e,n,t){var r={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return r.name=h2(e,0,t),r}},51:{f:$o},60:{},61:{f:function jie(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:wo},65:{f:function Gie(){}},66:{f:$o},77:{},80:{},81:{},82:{},85:{f:$o},89:{},90:{},91:{},92:{f:function Iie(e,n,t){if(t.enc)return e.l+=n,"";var r=e.l,i=K_(e,0,t);return e.read_shift(n+r-e.l),i}},93:{f:function Cse(e,n,t){if(t&&t.biff<8)return function Ese(e,n,t){e.l+=4;var r=e.read_shift(2),i=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6;var a=[];return a.push((Tse[r]||ll)(e,n-=36,t)),{cmo:[i,r,s],ft:a}}(e,n,t);var r=x8(e),i=function kie(e,n){for(var t=e.l+n,r=[];e.l<t;){var i=e.read_shift(2);e.l-=2;try{r.push(Mie[i](e,t-e.l))}catch{return e.l=t,r}}return e.l!=t&&(e.l=t),r}(e,n-22);return{cmo:r,ft:i}}},94:{},95:{f:wo},96:{},97:{},99:{f:wo},125:{f:A8},128:{f:function lse(e){e.l+=4;var n=[e.read_shift(2),e.read_shift(2)];if(0!==n[0]&&n[0]--,0!==n[1]&&n[1]--,n[0]>7||n[1]>7)throw new Error("Bad Gutters: "+n.join("|"));return n}},129:{f:function Oie(e,n,t){var r=t&&8==t.biff||2==n?e.read_shift(2):(e.l+=n,0);return{fDialog:16&r,fBelow:64&r,fRight:128&r}}},130:{f:$o},131:{f:wo},132:{f:wo},133:{f:function Lie(e,n,t){var r=e.read_shift(4),i=3&e.read_shift(1),s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule"}var a=h2(e,0,t);return 0===a.length&&(a="Sheet1"),{pos:r,hs:i,dt:s,name:a}}},134:{},140:{f:function Ise(e){var t,n=[0,0];return t=e.read_shift(2),n[0]=$z[t]||t,t=e.read_shift(2),n[1]=$z[t]||t,n}},141:{f:$o},144:{},146:{f:function Lse(e){for(var n=e.read_shift(2),t=[];n-- >0;)t.push(g8(e));return t}},151:{},152:{},153:{},154:{},155:{},156:{f:$o},157:{},158:{},160:{f:Use},161:{f:function Nse(e,n){var t={};return n<32||(e.l+=16,t.header=ul(e),t.footer=ul(e),e.l+=2),t}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function ise(e,n){for(var t=e.l+n-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<t;)s.push(_8(e));if(e.l!==t)throw new Error("MulRK read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r,c:i,C:a,rkrec:s}}},190:{f:function sse(e,n){for(var t=e.l+n-2,r=e.read_shift(2),i=e.read_shift(2),s=[];e.l<t;)s.push(e.read_shift(2));if(e.l!==t)throw new Error("MulBlank read error");var a=e.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r,c:i,C:a,ixfe:s}}},193:{f:Ng},197:{},198:{},199:{},200:{},201:{},202:{f:wo},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:$o},220:{},221:{f:wo},222:{},224:{f:function ase(e,n,t){var r={};return r.ifnt=e.read_shift(2),r.numFmtId=e.read_shift(2),r.flags=e.read_shift(2),r.fStyle=r.flags>>2&1,r.data=function ose(e,n,t,r){var i={},s=e.read_shift(4),a=e.read_shift(4),l=e.read_shift(4),d=e.read_shift(2);return i.patternType=zre[l>>26],r.cellStyles&&(i.alc=7&s,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=15&a,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=127&l,i.icvBottom=l>>7&127,i.icvDiag=l>>14&127,i.dgDiag=l>>21&15,i.icvFore=127&d,i.icvBack=d>>7&127,i.fsxButton=d>>14&1),i}(e,0,0,t),r}},225:{f:function Aie(e,n){return 0===n||e.read_shift(2),1200}},226:{f:Ng},227:{},229:{f:function bse(e,n){for(var t=[],r=e.read_shift(2);r--;)t.push(qS(e));return t}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function Rie(e,n){for(var t=e.l+n,r=e.read_shift(4),i=e.read_shift(4),s=[],a=0;a!=i&&e.l<t;++a)s.push(fie(e));return s.Count=r,s.Unique=i,s}},253:{f:function Xie(e){var n=df(e);return n.isst=e.read_shift(4),n}},255:{f:function Bie(e,n){var t={};return t.dsst=e.read_shift(2),e.l+=n-2,t}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:h8},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:wo},353:{f:Ng},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function fse(e,n,t){var r=e.l+n,i=e.read_shift(2),s=e.read_shift(2);if(t.sbcch=s,1025==s||14849==s)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=Z_(e,s),l=[];r>e.l;)l.push(d2(e));return[s,i,a,l]}},431:{f:wo},432:{},433:{},434:{},437:{},438:{f:function Sse(e,n,t){var r=e.l,i="";try{e.l+=4,-1==[0,5,7,11,12,14].indexOf((t.lastobj||{cmo:[0,0]}).cmo[1])?e.l+=6:function mie(e){var n=e.read_shift(1);e.l++;var t=e.read_shift(2);e.l+=2}(e);var l=e.read_shift(2);e.read_shift(2),$o(e);var d=e.read_shift(2);e.l+=d;for(var m=1;m<e.lens.length-1;++m){if(e.l-r!=e.lens[m])throw new Error("TxO: bad continue record");var y=e[e.l];if((i+=Z_(e,e.lens[m+1]-e.lens[m]-1)).length>=(y?l:2*l))break}if(i.length!==l&&i.length!==2*l)throw new Error("cchText: "+l+" != "+i.length);return e.l=r+n,{t:i}}catch{return e.l=r+n,{t:i}}}},439:{f:wo},440:{f:function Dse(e,n){var t=qS(e);e.l+=16;var r=function vie(e,n){var t=e.l+n,r=e.read_shift(4);if(2!==r)throw new Error("Unrecognized streamVersion: "+r);var i=e.read_shift(2);e.l+=2;var s,a,l,d,y,T,m="";16&i&&(s=YS(e)),128&i&&(a=YS(e)),257==(257&i)&&(l=YS(e)),1==(257&i)&&(d=function yie(e,n){var t=e.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return function gie(e){var n=e.read_shift(4),t=e.l,r=!1;n>24&&(e.l+=n-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(r=!0),e.l=t);var i=e.read_shift((r?n-24:n)>>1,"utf16le").replace(ol,"");return r&&(e.l+=24),i}(e);case"0303000000000000c000000000000046":return function _ie(e){for(var n=e.read_shift(2),t="";n-- >0;)t+="../";var r=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return t+r.replace(/\\/g,"/");var s=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return t+e.read_shift(s>>1,"utf16le").replace(ol,"")}(e);default:throw new Error("Unsupported Moniker "+t)}}(e)),8&i&&(m=YS(e)),32&i&&(y=e.read_shift(16)),64&i&&(T=XP(e)),e.l=t;var D=a||l||d||"";D&&m&&(D+="#"+m),D||(D="#"+m),2&i&&"/"==D.charAt(0)&&"/"!=D.charAt(1)&&(D="file://"+D);var I={Target:D};return y&&(I.guid=y),T&&(I.time=T),s&&(I.Tooltip=s),I}(e,n-24);return[t,r]}},441:{},442:{f:d2},443:{},444:{f:$o},445:{},446:{},448:{f:Ng},449:{f:function Uie(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:Ng},512:{f:w8},513:{f:Vse},515:{f:function hse(e,n,t){t.biffguess&&2==t.biff&&(t.biff=5);var r=df(e),i=ul(e);return r.val=i,r}},516:{f:function Kie(e,n,t){t.biffguess&&2==t.biff&&(t.biff=5);var i=df(e);2==t.biff&&e.l++;var s=d2(e,0,t);return i.val=s,i}},517:{f:T8},519:{f:jse},520:{f:function zie(e){var n={};n.r=e.read_shift(2),n.c=e.read_shift(2),n.cnt=e.read_shift(2)-n.c;var t=e.read_shift(2);e.l+=4;var r=e.read_shift(1);return e.l+=3,7&r&&(n.level=7&r),32&r&&(n.hidden=!0),64&r&&(n.hpt=t/20),n}},523:{},545:{f:k8},549:{f:b8},566:{},574:{f:function $ie(e,n,t){return t&&t.biff>=2&&t.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function rse(e){var n=e.read_shift(2),t=e.read_shift(2),r=_8(e);return{r:n,c:t,ixfe:r[0],rknum:r[1]}}},659:{},1048:{},1054:{f:function Qie(e,n,t){return[e.read_shift(2),K_(e,0,t)]}},1084:{},1212:{f:function _se(e,n,t){var r=v8(e);e.l++;var i=e.read_shift(1);return[Ace(e,n-=8,t),i,r]}},2048:{f:function kse(e,n){e.read_shift(2);var t=qS(e),r=e.read_shift((n-10)/2,"dbcs-cont");return[t,r=r.replace(ol,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:XS},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ng},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function Fse(e){e.l+=2;var n={cxfs:0,crc:0};return n.cxfs=e.read_shift(2),n.crc=e.read_shift(4),n},r:12},2173:{f:function Iae(e,n){e.l+=2;var r=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),s=[];i-- >0;)s.push(Aae(e));return{ixfe:r,ext:s}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:wo,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function gse(e,n,t){if(!(t.biff<8)){var r=e.read_shift(2),i=e.read_shift(2);return[Z_(e,r,t),Z_(e,i,t)]}e.l+=n},r:12},2197:{},2198:{f:function Eae(e,n,t){var r=e.l+n;if(124226!==e.read_shift(4)){if(!t.cellStyles)return void(e.l=r);var a,s=e.slice(e.l);e.l=r;try{a=cz(s,{type:"array"})}catch{return}var l=ru(a,"theme/theme/theme1.xml",!0);if(l)return W8(l,t)}},r:12},2199:{},2200:{},2201:{},2202:{f:function yse(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:Ng},2204:{},2205:{},2206:{},2207:{},2211:{f:function Vie(e){var n=function bie(e){var n=e.read_shift(2),t=e.read_shift(2);return e.l+=8,{type:n,flags:t}}(e);if(2211!=n.type)throw new Error("Invalid Future Record "+n.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:$o},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function Bse(e,n,t){var r={area:!1};if(5!=t.biff)return e.l+=n,r;var i=e.read_shift(1);return e.l+=3,16&i&&(r.area=!0),r}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function Ose(e){for(var n=e.read_shift(2),t=[];n-- >0;)t.push(g8(e));return t}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:w8},1:{},2:{f:function Yse(e){var n=df(e);++e.l;var t=e.read_shift(2);return n.t="n",n.val=t,n}},3:{f:function Wse(e){var n=df(e);++e.l;var t=ul(e);return n.t="n",n.val=t,n}},4:{f:function $se(e,n,t){t.biffguess&&5==t.biff&&(t.biff=2);var r=df(e);++e.l;var i=K_(e,0,t);return r.t="str",r.val=i,r}},5:{f:T8},7:{f:function Xse(e){var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,"sbcs-cont")}},8:{},9:{f:XS},11:{},22:{f:$o},30:{f:tse},31:{},32:{},33:{f:k8},36:{},37:{f:b8},50:{f:function Zse(e,n){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=n-13}},62:{},52:{},67:{},68:{f:$o},69:{},86:{},126:{},127:{f:function Hse(e){var n=e.read_shift(2),t=e.read_shift(2),r=e.read_shift(4),i={fmt:n,env:t,len:r,data:e.slice(e.l,e.l+r)};return e.l+=r,i}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function Kse(e,n,t){var r=e.l+n,i=df(e),s=e.read_shift(2),a=Z_(e,s,t);return e.l=r,i.t="str",i.val=a,i}},223:{},234:{},354:{},421:{},518:{f:lO},521:{f:XS},536:{f:D8},547:{f:S8},561:{},579:{},1030:{f:lO},1033:{f:XS},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function un(e,n,t,r){var i=n;if(!isNaN(i)){var s=r||(t||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&IP(t)&&e.push(t)}}function SV(e,n){var t=n||{};null!=Xs&&null==t.dense&&(t.dense=Xs);var r=t.dense?[]:{},i=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),a=i.index,l=s&&s.index||e.length,d=Zne(e.slice(a,l),/(:?<tr[^>]*>)/i,"<tr>"),m=-1,y=0,T=0,D=0,I={s:{r:1e7,c:1e7},e:{r:0,c:0}},F=[];for(a=0;a<d.length;++a){var L=d[a].trim(),B=L.slice(0,3).toLowerCase();if("<tr"!=B){if("<td"==B||"<th"==B){var G=L.split(/<\/t[dh]>/i);for(l=0;l<G.length;++l){var Z=G[l].trim();if(Z.match(/<t[dh]/i)){for(var q=Z,oe=0;"<"==q.charAt(0)&&(oe=q.indexOf(">"))>-1;)q=q.slice(oe+1);for(var _e=0;_e<F.length;++_e){var fe=F[_e];fe.s.c==y&&fe.s.r<m&&m<=fe.e.r&&(y=fe.e.c+1,_e=-1)}var ae=ur(Z.slice(0,Z.indexOf(">")));D=ae.colspan?+ae.colspan:1,((T=+ae.rowspan)>1||D>1)&&F.push({s:{r:m,c:y},e:{r:m+(T||1)-1,c:y+D-1}});var De=ae.t||ae["data-t"]||"";if(!q.length){y+=D;continue}if(q=_z(q),I.s.r>m&&(I.s.r=m),I.e.r<m&&(I.e.r=m),I.s.c>y&&(I.s.c=y),I.e.c<y&&(I.e.c=y),!q.length){y+=D;continue}var Ie={t:"s",v:q};t.raw||!q.trim().length||"s"==De||("TRUE"===q?Ie={t:"b",v:!0}:"FALSE"===q?Ie={t:"b",v:!1}:isNaN(Yh(q))?isNaN(Rv(q).getDate())||(Ie={t:"d",v:Vs(q)},t.cellDates||(Ie={t:"n",v:sa(Ie.v)}),Ie.z=t.dateNF||Zn[14]):Ie={t:"n",v:Yh(q)}),t.dense?(r[m]||(r[m]=[]),r[m][y]=Ie):r[hr({r:m,c:y})]=Ie,y+=D}}}}else{if(++m,t.sheetRows&&t.sheetRows<=m){--m;break}y=0}}return r["!ref"]=kr(I),F.length&&(r["!merges"]=F),r}function DV(e,n,t,r){for(var i=e["!merges"]||[],s=[],a=n.s.c;a<=n.e.c;++a){for(var l=0,d=0,m=0;m<i.length;++m)if(!(i[m].s.r>t||i[m].s.c>a||i[m].e.r<t||i[m].e.c<a)){if(i[m].s.r<t||i[m].s.c<a){l=-1;break}l=i[m].e.r-i[m].s.r+1,d=i[m].e.c-i[m].s.c+1;break}if(!(l<0)){var y=hr({r:t,c:a}),T=r.dense?(e[t]||[])[a]:e[y],D=T&&null!=T.v&&(T.h||wP(T.w||(hf(T),T.w)||""))||"",I={};l>1&&(I.rowspan=l),d>1&&(I.colspan=d),r.editable?D='<span contenteditable="true">'+D+"</span>":T&&(I["data-t"]=T&&T.t||"z",null!=T.v&&(I["data-v"]=T.v),null!=T.z&&(I["data-z"]=T.z),T.l&&"#"!=(T.l.Target||"#").charAt(0)&&(D='<a href="'+T.l.Target+'">'+D+"</a>")),I.id=(r.id||"sjs")+"-"+y,s.push(cn("td",D,I))}}return"<tr>"+s.join("")+"</tr>"}var MV='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',kV="</body></html>";function PV(e,n,t){var r=t||{};null!=Xs&&(r.dense=Xs);var i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?Us(r.origin):r.origin;i=a.r,s=a.c}var l=n.getElementsByTagName("tr"),d=Math.min(r.sheetRows||1e7,l.length),m={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var y=su(e["!ref"]);m.s.r=Math.min(m.s.r,y.s.r),m.s.c=Math.min(m.s.c,y.s.c),m.e.r=Math.max(m.e.r,y.e.r),m.e.c=Math.max(m.e.c,y.e.c),-1==i&&(m.e.r=i=y.e.r+1)}var T=[],D=0,I=e["!rows"]||(e["!rows"]=[]),F=0,L=0,B=0,G=0,Z=0,q=0;for(e["!cols"]||(e["!cols"]=[]);F<l.length&&L<d;++F){var oe=l[F];if(LV(oe)){if(r.display)continue;I[L]={hidden:!0}}var _e=oe.children;for(B=G=0;B<_e.length;++B){var fe=_e[B];if(!r.display||!LV(fe)){var ae=fe.hasAttribute("data-v")?fe.getAttribute("data-v"):fe.hasAttribute("v")?fe.getAttribute("v"):_z(fe.innerHTML),De=fe.getAttribute("data-z")||fe.getAttribute("z");for(D=0;D<T.length;++D){var Ie=T[D];Ie.s.c==G+s&&Ie.s.r<L+i&&L+i<=Ie.e.r&&(G=Ie.e.c+1-s,D=-1)}q=+fe.getAttribute("colspan")||1,((Z=+fe.getAttribute("rowspan")||1)>1||q>1)&&T.push({s:{r:L+i,c:G+s},e:{r:L+i+(Z||1)-1,c:G+s+(q||1)-1}});var qe={t:"s",v:ae},Je=fe.getAttribute("data-t")||fe.getAttribute("t")||"";null!=ae&&(0==ae.length?qe.t=Je||"z":r.raw||0==ae.trim().length||"s"==Je||("TRUE"===ae?qe={t:"b",v:!0}:"FALSE"===ae?qe={t:"b",v:!1}:isNaN(Yh(ae))?isNaN(Rv(ae).getDate())||(qe={t:"d",v:Vs(ae)},r.cellDates||(qe={t:"n",v:sa(qe.v)}),qe.z=r.dateNF||Zn[14]):qe={t:"n",v:Yh(ae)})),void 0===qe.z&&null!=De&&(qe.z=De);var $e="",jt=fe.getElementsByTagName("A");if(jt&&jt.length)for(var ln=0;ln<jt.length&&(!jt[ln].hasAttribute("href")||"#"==($e=jt[ln].getAttribute("href")).charAt(0));++ln);$e&&"#"!=$e.charAt(0)&&(qe.l={Target:$e}),r.dense?(e[L+i]||(e[L+i]=[]),e[L+i][G+s]=qe):e[hr({c:G+s,r:L+i})]=qe,m.e.c<G+s&&(m.e.c=G+s),G+=q}}++L}return T.length&&(e["!merges"]=(e["!merges"]||[]).concat(T)),m.e.r=Math.max(m.e.r,L-1+i),e["!ref"]=kr(m),L>=d&&(e["!fullref"]=kr((m.e.r=l.length-F+L-1+i,m))),e}function OV(e,n){return PV((n||{}).dense?[]:{},e,n)}function LV(e){var n="",t=function dfe(e){return e.ownerDocument.defaultView&&"function"==typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(e);return t&&(n=t(e).getPropertyValue("display")),n||(n=e.style&&e.style.display),"none"===n}function ffe(e){var n=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[Si(n.replace(/<[^>]*>/g,""))]}var FV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function RV(e,n){var t=n||{};null!=Xs&&null==t.dense&&(t.dense=Xs);var s,a,y,T,L,B,r=EP(e),i=[],l={name:""},d="",m=0,D={},I=[],F=t.dense?[]:{},G={value:""},Z="",q=0,_e=[],fe=-1,ae=-1,De={s:{r:1e6,c:1e7},e:{r:0,c:0}},Ie=0,qe={},Je=[],$e={},jt=0,ln=0,zt=[],yt=1,xt=1,Zt=[],Pt={Names:[]},an={},St=["",""],Pe=[],ut={},Re="",je=0,Dt=!1,en=!1,tn=0;for(s2.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");L=s2.exec(r);)switch(L[3]=L[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===L[1]?(F["!ref"]=De.e.c>=De.s.c&&De.e.r>=De.s.r?kr(De):"A1:A1",t.sheetRows>0&&t.sheetRows<=De.e.r&&(F["!fullref"]=F["!ref"],De.e.r=t.sheetRows-1,F["!ref"]=kr(De)),Je.length&&(F["!merges"]=Je),zt.length&&(F["!rows"]=zt),y.name=y.\u540d\u79f0||y.name,typeof JSON<"u"&&JSON.stringify(y),I.push(y.name),D[y.name]=F,en=!1):"/"!==L[0].charAt(L[0].length-2)&&(y=ur(L[0],!1),fe=ae=-1,De.s.r=De.s.c=1e7,De.e.r=De.e.c=0,F=t.dense?[]:{},Je=[],zt=[],en=!0);break;case"table-row-group":"/"===L[1]?--Ie:++Ie;break;case"table-row":case"\u884c":if("/"===L[1]){fe+=yt,yt=1;break}if((T=ur(L[0],!1)).\u884c\u53f7?fe=T.\u884c\u53f7-1:-1==fe&&(fe=0),(yt=+T["number-rows-repeated"]||1)<10)for(tn=0;tn<yt;++tn)Ie>0&&(zt[fe+tn]={level:Ie});ae=-1;break;case"covered-table-cell":"/"!==L[1]&&++ae,t.sheetStubs&&(t.dense?(F[fe]||(F[fe]=[]),F[fe][ae]={t:"z"}):F[hr({r:fe,c:ae})]={t:"z"}),Z="",_e=[];break;case"table-cell":case"\u6570\u636e":if("/"===L[0].charAt(L[0].length-2))++ae,G=ur(L[0],!1),xt=parseInt(G["number-columns-repeated"]||"1",10),B={t:"z",v:null},G.formula&&0!=t.cellFormula&&(B.f=cV(Si(G.formula))),"string"==(G.\u6570\u636e\u7c7b\u578b||G["value-type"])&&(B.t="s",B.v=Si(G["string-value"]||""),t.dense?(F[fe]||(F[fe]=[]),F[fe][ae]=B):F[hr({r:fe,c:ae})]=B),ae+=xt-1;else if("/"!==L[1]){Z="",q=0,_e=[],xt=1;var qt=yt?fe+yt-1:fe;if(++ae>De.e.c&&(De.e.c=ae),ae<De.s.c&&(De.s.c=ae),fe<De.s.r&&(De.s.r=fe),qt>De.e.r&&(De.e.r=qt),Pe=[],ut={},B={t:(G=ur(L[0],!1)).\u6570\u636e\u7c7b\u578b||G["value-type"],v:null},t.cellFormula)if(G.formula&&(G.formula=Si(G.formula)),G["number-matrix-columns-spanned"]&&G["number-matrix-rows-spanned"]&&(jt=parseInt(G["number-matrix-rows-spanned"],10)||0,ln=parseInt(G["number-matrix-columns-spanned"],10)||0,B.F=kr($e={s:{r:fe,c:ae},e:{r:fe+jt-1,c:ae+ln-1}}),Zt.push([$e,B.F])),G.formula)B.f=cV(G.formula);else for(tn=0;tn<Zt.length;++tn)fe>=Zt[tn][0].s.r&&fe<=Zt[tn][0].e.r&&ae>=Zt[tn][0].s.c&&ae<=Zt[tn][0].e.c&&(B.F=Zt[tn][1]);switch((G["number-columns-spanned"]||G["number-rows-spanned"])&&(jt=parseInt(G["number-rows-spanned"],10)||0,ln=parseInt(G["number-columns-spanned"],10)||0,Je.push($e={s:{r:fe,c:ae},e:{r:fe+jt-1,c:ae+ln-1}})),G["number-columns-repeated"]&&(xt=parseInt(G["number-columns-repeated"],10)),B.t){case"boolean":B.t="b",B.v=bs(G["boolean-value"]);break;case"float":case"percentage":case"currency":B.t="n",B.v=parseFloat(G.value);break;case"date":B.t="d",B.v=Vs(G["date-value"]),t.cellDates||(B.t="n",B.v=sa(B.v)),B.z="m/d/yy";break;case"time":B.t="n",B.v=Yne(G["time-value"])/86400,t.cellDates&&(B.t="d",B.v=RS(B.v)),B.z="HH:MM:SS";break;case"number":B.t="n",B.v=parseFloat(G.\u6570\u636e\u6570\u503c);break;default:if("string"!==B.t&&"text"!==B.t&&B.t)throw new Error("Unsupported value type "+B.t);B.t="s",null!=G["string-value"]&&(Z=Si(G["string-value"]),_e=[])}}else{if(Dt=!1,"s"===B.t&&(B.v=Z||"",_e.length&&(B.R=_e),Dt=0==q),an.Target&&(B.l=an),Pe.length>0&&(B.c=Pe,Pe=[]),Z&&!1!==t.cellText&&(B.w=Z),Dt&&(B.t="z",delete B.v),(!Dt||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=fe))for(var Vt=0;Vt<yt;++Vt){if(xt=parseInt(G["number-columns-repeated"]||"1",10),t.dense)for(F[fe+Vt]||(F[fe+Vt]=[]),F[fe+Vt][ae]=0==Vt?B:Qi(B);--xt>0;)F[fe+Vt][ae+xt]=Qi(B);else for(F[hr({r:fe+Vt,c:ae})]=B;--xt>0;)F[hr({r:fe+Vt,c:ae+xt})]=Qi(B);De.e.c<=ae&&(De.e.c=ae)}ae+=(xt=parseInt(G["number-columns-repeated"]||"1",10))-1,xt=0,B={},Z="",_e=[]}an={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===L[1]){if((s=i.pop())[0]!==L[3])throw"Bad state: "+s}else"/"!==L[0].charAt(L[0].length-2)&&i.push([L[3],!0]);break;case"annotation":if("/"===L[1]){if((s=i.pop())[0]!==L[3])throw"Bad state: "+s;ut.t=Z,_e.length&&(ut.R=_e),ut.a=Re,Pe.push(ut)}else"/"!==L[0].charAt(L[0].length-2)&&i.push([L[3],!1]);Re="",je=0,Z="",q=0,_e=[];break;case"creator":"/"===L[1]?Re=r.slice(je,L.index):je=L.index+L[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===L[1]){if((s=i.pop())[0]!==L[3])throw"Bad state: "+s}else"/"!==L[0].charAt(L[0].length-2)&&i.push([L[3],!1]);Z="",q=0,_e=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===L[1]){if(qe[l.name]=d,(s=i.pop())[0]!==L[3])throw"Bad state: "+s}else"/"!==L[0].charAt(L[0].length-2)&&(d="",l=ur(L[0],!1),i.push([L[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=ur(L[0],!1),d+=FV[L[3]]["long"===a.style?1:0]}break;case"text":if("/>"===L[0].slice(-2))break;if("/"===L[1])switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":d+=r.slice(m,L.index)}else m=L.index+L[0].length;break;case"named-range":St=cO((a=ur(L[0],!1))["cell-range-address"]);var wr={Name:a.name,Ref:St[0]+"!"+St[1]};en&&(wr.Sheet=I.length),Pt.Names.push(wr);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if("/"!==L[1]||G&&G["string-value"])ur(L[0],!1),q=L.index+L[0].length;else{var Ne=ffe(r.slice(q,L.index));Z=(Z.length>0?Z+"\n":"")+Ne[0]}break;case"database-range":if("/"===L[1])break;try{D[(St=cO(ur(L[0])["target-range-address"]))[0]]["!autofilter"]={ref:St[1]}}catch{}break;case"a":if("/"!==L[1]){if(!(an=ur(L[0],!1)).href)break;an.Target=Si(an.href),delete an.href,"#"==an.Target.charAt(0)&&an.Target.indexOf(".")>-1?(St=cO(an.Target.slice(1)),an.Target="#"+St[0]+"!"+St[1]):an.Target.match(/^\.\.[\\\/]/)&&(an.Target=an.Target.slice(3))}break;default:switch(L[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(t.WTF)throw new Error(L)}}var Hi={Sheets:D,SheetNames:I,Workbook:Pt};return t.bookSheets&&delete Hi.Sheets,Hi}function BV(e,n){return RV(e,n)}function ny(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function gO(e){return typeof TextDecoder<"u"?(new TextDecoder).decode(e):Yi(Ig(e))}function Vg(e){var n=e.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(n),r=0;return e.forEach(function(i){t.set(i,r),r+=i.length}),t}function UV(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function D2(e,n){var t=n?n[0]:0,r=127&e[t];e:if(e[t++]>=128&&(r|=(127&e[t])<<7,e[t++]<128||(r|=(127&e[t])<<14,e[t++]<128)||(r|=(127&e[t])<<21,e[t++]<128)||(r+=(127&e[t])*Math.pow(2,28),++t,e[t++]<128)||(r+=(127&e[t])*Math.pow(2,35),++t,e[t++]<128)||(r+=(127&e[t])*Math.pow(2,42),++t,e[t++]<128)))break e;return n&&(n[0]=t),r}function Qs(e){var n=0,t=127&e[n];e:if(e[n++]>=128){if(t|=(127&e[n])<<7,e[n++]<128||(t|=(127&e[n])<<14,e[n++]<128)||(t|=(127&e[n])<<21,e[n++]<128))break e;t|=(127&e[n])<<28}return t}function Oi(e){for(var n=[],t=[0];t[0]<e.length;){var l,r=t[0],i=D2(e,t),s=7&i,a=0;if(0==(i=Math.floor(i/8)))break;switch(s){case 0:for(var d=t[0];e[t[0]++]>=128;);l=e.slice(d,t[0]);break;case 5:l=e.slice(t[0],t[0]+(a=4)),t[0]+=a;break;case 1:l=e.slice(t[0],t[0]+(a=8)),t[0]+=a;break;case 2:a=D2(e,t),l=e.slice(t[0],t[0]+a),t[0]+=a;break;default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var m={data:l,type:s};null==n[i]?n[i]=[m]:n[i].push(m)}return n}function _O(e,n){return e?.map(function(t){return n(t.data)})||[]}function vfe(e,n){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var t=[0],r=D2(n,t),i=[];t[0]<n.length;){var s=3&n[t[0]];if(0!=s){var d=0,m=0;if(1==s?(m=4+(n[t[0]]>>2&7),d=(224&n[t[0]++])<<3,d|=n[t[0]++]):(m=1+(n[t[0]++]>>2),2==s?(d=n[t[0]]|n[t[0]+1]<<8,t[0]+=2):(d=(n[t[0]]|n[t[0]+1]<<8|n[t[0]+2]<<16|n[t[0]+3]<<24)>>>0,t[0]+=4)),i=[Vg(i)],0==d)throw new Error("Invalid offset 0");if(d>i[0].length)throw new Error("Invalid offset beyond length");if(m>=d)for(i.push(i[0].slice(-d)),m-=d;m>=i[i.length-1].length;)i.push(i[i.length-1]),m-=i[i.length-1].length;i.push(i[0].slice(-d,-d+m))}else{var a=n[t[0]++]>>2;if(a<60)++a;else{var l=a-59;a=n[t[0]],l>1&&(a|=n[t[0]+1]<<8),l>2&&(a|=n[t[0]+2]<<16),l>3&&(a|=n[t[0]+3]<<24),a>>>=0,a++,t[0]+=l}i.push(n.slice(t[0],t[0]+a)),t[0]+=a}}var y=Vg(i);if(y.length!=r)throw new Error("Unexpected length: ".concat(y.length," != ").concat(r));return y}function wfe(e,n,t){switch(e[0]){case 0:case 1:case 2:case 3:return function xfe(e,n,t,r){var T,i=ny(e),s=i.getUint32(4,!0),a=(r>1?12:8)+4*UV(s&(r>1?3470:398)),l=-1,d=-1,m=NaN,y=new Date(2001,0,1);switch(512&s&&(l=i.getUint32(a,!0),a+=4),a+=4*UV(s&(r>1?12288:4096)),16&s&&(d=i.getUint32(a,!0),a+=4),32&s&&(m=i.getFloat64(a,!0),a+=8),64&s&&(y.setTime(y.getTime()+1e3*i.getFloat64(a,!0)),a+=8),e[2]){case 0:break;case 2:T={t:"n",v:m};break;case 3:T={t:"s",v:n[d]};break;case 5:T={t:"d",v:y};break;case 6:T={t:"b",v:m>0};break;case 7:T={t:"n",v:m/86400};break;case 8:T={t:"e",v:0};break;case 9:if(l>-1)T={t:"s",v:t[l]};else if(d>-1)T={t:"s",v:n[d]};else{if(isNaN(m))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));T={t:"n",v:m}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return T}(e,n,t,e[0]);case 5:return function bfe(e,n,t){var T,r=ny(e),i=r.getUint32(8,!0),s=12,a=-1,l=-1,d=NaN,m=NaN,y=new Date(2001,0,1);switch(1&i&&(d=function _fe(e,n){for(var t=(127&e[n+15])<<7|e[n+14]>>1,r=1&e[n+14],i=n+13;i>=n;--i)r=256*r+e[i];return(128&e[n+15]?-r:r)*Math.pow(10,t-6176)}(e,s),s+=16),2&i&&(m=r.getFloat64(s,!0),s+=8),4&i&&(y.setTime(y.getTime()+1e3*r.getFloat64(s,!0)),s+=8),8&i&&(l=r.getUint32(s,!0),s+=4),16&i&&(a=r.getUint32(s,!0),s+=4),e[1]){case 0:break;case 2:case 10:T={t:"n",v:d};break;case 3:T={t:"s",v:n[l]};break;case 5:T={t:"d",v:y};break;case 6:T={t:"b",v:m>0};break;case 7:T={t:"n",v:m/86400};break;case 8:T={t:"e",v:0};break;case 9:if(!(a>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&i," : ").concat(e.slice(0,4)));T={t:"s",v:t[a]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&i," : ").concat(e.slice(0,4)))}return T}(e,n,t);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function pl(e){return D2(Oi(e)[1][0].data)}function jV(e,n){var t=Oi(n.data),r=Qs(t[1][0].data),s=[];return(t[3]||[]).forEach(function(a){var l=Oi(a.data),d=Qs(l[1][0].data)>>>0;switch(r){case 1:s[d]=gO(l[3][0].data);break;case 8:var y=Oi(e[pl(l[9][0].data)][0].data),T=e[pl(y[1][0].data)][0],D=Qs(T.meta[1][0].data);if(2001!=D)throw new Error("2000 unexpected reference to ".concat(D));var I=Oi(T.data);s[d]=I[3].map(function(F){return gO(F.data)}).join("")}}),s}function Sfe(e,n){var r={"!ref":"A1"},i=e[pl(Oi(n.data)[2][0].data)],s=Qs(i[0].meta[1][0].data);if(6001!=s)throw new Error("6000 unexpected reference to ".concat(s));return function Efe(e,n,t){var r,i=Oi(n.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Qs(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(Qs(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));t["!ref"]=kr(s);var a=Oi(i[4][0].data),l=jV(e,e[pl(a[4][0].data)][0]),d=null!=(r=a[17])&&r[0]?jV(e,e[pl(a[17][0].data)][0]):[],m=Oi(a[3][0].data),y=0;m[1].forEach(function(T){var D=Oi(T.data),I=e[pl(D[2][0].data)][0],F=Qs(I.meta[1][0].data);if(6002!=F)throw new Error("6001 unexpected reference to ".concat(F));var L=function Tfe(e,n){var t,r=Oi(n.data),i=null!=(t=r?.[7])&&t[0]?Qs(r[7][0].data)>>>0>0?1:0:-1,s=_O(r[5],function(a){return function Cfe(e,n){var t,r,i,s,a,l,d,m,y,T,D,I,F,L,oe,_e,B=Oi(e),G=Qs(B[1][0].data)>>>0,Z=Qs(B[2][0].data)>>>0,q=(null==(r=null==(t=B[8])?void 0:t[0])?void 0:r.data)&&Qs(B[8][0].data)>0||!1;if(null!=(s=null==(i=B[7])?void 0:i[0])&&s.data&&0!=n)oe=null==(l=null==(a=B[7])?void 0:a[0])?void 0:l.data,_e=null==(m=null==(d=B[6])?void 0:d[0])?void 0:m.data;else{if(null==(T=null==(y=B[4])?void 0:y[0])||!T.data||1==n)throw"NUMBERS Tile missing ".concat(n," cell storage");oe=null==(I=null==(D=B[4])?void 0:D[0])?void 0:I.data,_e=null==(L=null==(F=B[3])?void 0:F[0])?void 0:L.data}for(var fe=q?4:1,ae=ny(oe),De=[],Ie=0;Ie<oe.length/2;++Ie){var qe=ae.getUint16(2*Ie,!0);qe<65535&&De.push([Ie,qe])}if(De.length!=Z)throw"Expected ".concat(Z," cells, found ").concat(De.length);var Je=[];for(Ie=0;Ie<De.length-1;++Ie)Je[De[Ie][0]]=_e.subarray(De[Ie][1]*fe,De[Ie+1][1]*fe);return De.length>=1&&(Je[De[De.length-1][0]]=_e.subarray(De[De.length-1][1]*fe)),{R:G,cells:Je}}(a,i)});return{nrows:Qs(r[4][0].data)>>>0,data:s.reduce(function(a,l){return a[l.R]||(a[l.R]=[]),l.cells.forEach(function(d,m){if(a[l.R][m])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(m));a[l.R][m]=d}),a},[])}}(0,I);L.data.forEach(function(B,G){B.forEach(function(Z,q){var oe=hr({r:y+G,c:q}),_e=wfe(Z,l,d);_e&&(t[oe]=_e)})}),y+=L.nrows})}(e,i[0],r),r}function xO(e){var n,t,r,i,s={},a=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var m,y;try{m=function Ku(e){for(var n=[],t=0;t<e.length;){var r=e[t++],i=e[t]|e[t+1]<<8|e[t+2]<<16;n.push(vfe(r,e.slice(t+=3,t+i))),t+=i}if(t!==e.length)throw new Error("data is not a valid framed stream!");return Vg(n)}(d.content)}catch(T){return console.log("?? "+d.content.length+" "+(T.message||T))}try{y=function Zu(e){for(var n,t=[],r=[0];r[0]<e.length;){var i=D2(e,r),s=Oi(e.slice(r[0],r[0]+i));r[0]+=i;var a={id:Qs(s[1][0].data),messages:[]};s[2].forEach(function(l){var d=Oi(l.data),m=Qs(d[3][0].data);a.messages.push({meta:d,data:e.slice(r[0],r[0]+m)}),r[0]+=m}),null!=(n=s[3])&&n[0]&&(a.merge=Qs(s[3][0].data)>>>0>0),t.push(a)}return t}(m)}catch(T){return console.log("## "+(T.message||T))}y.forEach(function(T){s[T.id]=T.messages,a.push(T.id)})}}),!a.length)throw new Error("File has no messages");var l=(null==(i=null==(r=null==(t=null==(n=s?.[1])?void 0:n[0])?void 0:t.meta)?void 0:r[1])?void 0:i[0].data)&&1==Qs(s[1][0].meta[1][0].data)&&s[1][0];if(l||a.forEach(function(d){s[d].forEach(function(m){if(1==Qs(m.meta[1][0].data)>>>0){if(l)throw new Error("Document has multiple roots");l=m}})}),!l)throw new Error("Cannot find Document root");return function Mfe(e,n){var t={SheetNames:[],Sheets:{}};if(_O(Oi(n.data)[1],pl).forEach(function(s){e[s].forEach(function(a){if(2==Qs(a.meta[1][0].data)){var d=function Dfe(e,n){var t,r=Oi(n.data),i={name:null!=(t=r[1])&&t[0]?gO(r[1][0].data):"",sheets:[]};return _O(r[2],pl).forEach(function(a){e[a].forEach(function(l){6e3==Qs(l.meta[1][0].data)&&i.sheets.push(Sfe(e,l))})}),i}(e,a);d.sheets.forEach(function(m,y){kO(t,m,0==y?d.name:d.name+"_"+y,!0)})}})}),0==t.SheetNames.length)throw new Error("Empty NUMBERS file");return t}(s,l)}function bO(e){!function HV(e){return function(t){for(var r=0;r!=e.length;++r){var i=e[r];void 0===t[i[0]]&&(t[i[0]]=i[1]),"n"===i[2]&&(t[i[0]]=Number(t[i[0]]))}}}([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Ife(e){return Ar.WS.indexOf(e)>-1?"sheet":Ar.CS&&e==Ar.CS?"chart":Ar.DS&&e==Ar.DS?"dialog":Ar.MS&&e==Ar.MS?"macro":e&&e.length?e:"sheet"}function Ofe(e,n,t,r,i,s,a,l,d,m,y,T){try{s[r]=u2(ru(e,t,!0),n);var I,D=Uo(e,n);switch(l){case"sheet":I=sde(D,n,i,d,s[r],m,y,T);break;case"chart":if(!(I=function ode(e,n,t,r,i,s,a,l){return".bin"===n.slice(-4)?function Rhe(e,n,t,r,i){if(!e)return e;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=[],l=!1;return Vp(e,function(m,y,T){switch(T){case 550:s["!rel"]=m;break;case 651:i.Sheets[t]||(i.Sheets[t]={}),m.name&&(i.Sheets[t].CodeName=m.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:a.push(T);break;case 38:a.pop();break;default:if(y.T>0)a.push(T);else if(y.T<0)a.pop();else if(!l||n.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}},n),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}(e,r,t,i,s):function Ohe(e,n,t,r,i){if(!e)return e;r||(r={"!id":{}});var a,s={"!type":"chart","!drawel":null,"!rel":""},l=e.match(hV);return l&&hO(l[0],0,i,t),(a=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}(e,0,t,i,s)}(D,n,i,d,s[r],m))||!I["!drawel"])break;var F=n2(I["!drawel"].Target,n),L=c2(F),B=function Yae(e,n){if(!e)return"??";var t=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return n["!id"][t].Target}(ru(e,F,!0),u2(ru(e,L,!0),F)),G=n2(B,F),Z=c2(G);I=function Phe(e,n,t,r,i,s){var a=s||{"!type":"chart"};if(!e)return s;var l=0,d=0,m="A",y={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(T){var D=function Ihe(e){var r,n=[],t=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(n[+a[1]]=t?+a[2]:a[2])});var i=Si((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach(function(s){r=s.replace(/<.*?>/g,"")}),[n,i,r]}(T);y.s.r=y.s.c=0,y.e.c=l,m=ws(l),D[0].forEach(function(I,F){a[m+Js(F)]={t:"n",v:I,z:D[1]},d=F}),y.e.r<d&&(y.e.r=d),++l}),l>0&&(a["!ref"]=kr(y)),a}(ru(e,G,!0),0,0,u2(ru(e,Z,!0),G),0,I);break;case"macro":I=function ade(e,n,t,r,i,s,a,l){return n.slice(-4),{"!type":"macro"}}(0,n);break;case"dialog":I=function lde(e,n,t,r,i,s,a,l){return n.slice(-4),{"!type":"dialog"}}(0,n);break;default:throw new Error("Unrecognized sheet type "+l)}a[r]=I;var q=[];s&&s[r]&&Zs(s[r]).forEach(function(oe){var _e="";if(s[r][oe].Type==Ar.CMNT){_e=n2(s[r][oe].Target,n);var fe=function dde(e,n,t){return".bin"===n.slice(-4)?function rle(e,n){var t=[],r=[],i={},s=!1;return Vp(e,function(l,d,m){switch(m){case 632:r.push(l);break;case 635:i=l;break;case 637:i.t=l.t,i.h=l.h,i.r=l.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,n.sheetRows&&i.rfx&&n.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,t.push(i);break;case 3072:case 37:case 38:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!d.T&&(!s||n.WTF))throw new Error("Unexpected record 0x"+m.toString(16))}}),t}(e,t):function qae(e,n){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],r=[],i=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(""!==a&&""!==a.trim()){var l=a.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&t.push(l[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(""!==a&&""!==a.trim()){var l=a.match(/<(?:\w+:)?comment[^>]*>/);if(l){var d=ur(l[0]),m={author:d.authorId&&t[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},y=Us(d.ref);if(!(n.sheetRows&&n.sheetRows<=y.r)){var T=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),D=!!T&&!!T[1]&&QP(T[1])||{r:"",t:"",h:""};m.r=D.r,"<t></t>"==D.r&&(D.t=D.h=""),m.t=(D.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),n.cellHTML&&(m.h=D.h),r.push(m)}}}}),r}(e,t)}(Uo(e,_e,!0),_e,d);if(!fe||!fe.length)return;q8(I,fe,!1)}s[r][oe].Type==Ar.TCMNT&&(_e=n2(s[r][oe].Target,n),q=q.concat(function Xae(e,n){var t=[],r=!1,i={},s=0;return e.replace(al,function(l,d){var m=ur(l);switch(cf(m[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":i={author:m.personId,guid:m.id,ref:m.ref,T:1};break;case"</threadedComment>":null!=i.t&&t.push(i);break;case"<text>":case"<text":s=d+l.length;break;case"</text>":i.t=e.slice(s,d).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":r=!0;break;case"</mentions>":case"</ext>":r=!1;break;default:if(!r&&n.WTF)throw new Error("unrecognized "+m[0]+" in threaded comments")}return l}),t}(Uo(e,_e,!0),d)))}),q&&q.length&&q8(I,q,!0,d.people||[])}catch(oe){if(d.WTF)throw oe}}function Ju(e){return"/"==e.charAt(0)?e.slice(1):e}function Lfe(e,n){if(Fv(),bO(n=n||{}),Gu(e,"META-INF/manifest.xml")||Gu(e,"objectdata.xml"))return function NV(e,n){n=n||{},Gu(e,"META-INF/manifest.xml")&&function $re(e,n){for(var r,i,t=EP(e);r=s2.exec(t);)switch(r[3]){case"manifest":break;case"file-entry":if("/"==(i=ur(r[0],!1)).path&&i.type!==Hre)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(n&&n.WTF)throw r}}(Uo(e,"META-INF/manifest.xml"),n);var t=ru(e,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var r=RV(Yi(t),n);return Gu(e,"meta.xml")&&(r.Props=qz(Uo(e,"meta.xml"))),r}(e,n);if(Gu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return xO(e);var t=Xn.utils.cfb_new();return lz(e).forEach(function(ln){!function Lr(e,n,t){if(e.FullPaths){var r;if("string"==typeof t)return r=Hr?Np(t):function mne(e){for(var n=[],t=0,r=e.length+250,i=Ag(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var l=1023&e.charCodeAt(++s);i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|l>>6&15|(3&a)<<4,i[t++]=128|63&l}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|63&a;t>r&&(n.push(i.slice(0,t)),t=0,i=Ag(65535),r=65530)}return n.push(i.slice(0,t)),wa(n)}(t),Xn.utils.cfb_add(e,n,r);Xn.utils.cfb_add(e,n,t)}else e.file(n,t)}(t,ln,az(e,ln))}),xO(t)}if(!Gu(e,"[Content_Types].xml"))throw Gu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a,l,r=lz(e),i=function jre(e){var n={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return n;var t={};if((e.match(al)||[]).forEach(function(r){var i=ur(r);switch(i[0].replace(ere,"<")){case"<?xml":break;case"<Types":n.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[i.Extension]=i.ContentType;break;case"<Override":void 0!==n[$P[i.ContentType]]&&n[$P[i.ContentType]].push(i.PartName)}}),n.xmlns!==Ho.CT)throw new Error("Unknown Namespace: "+n.xmlns);return n.calcchain=n.calcchains.length>0?n.calcchains[0]:"",n.sst=n.strs.length>0?n.strs[0]:"",n.style=n.styles.length>0?n.styles[0]:"",n.defaults=t,delete n.calcchains,n}(ru(e,"[Content_Types].xml")),s=!1;if(0===i.workbooks.length&&Uo(e,l="xl/workbook.xml",!0)&&i.workbooks.push(l),0===i.workbooks.length){if(!Uo(e,l="xl/workbook.bin",!0))throw new Error("Could not find workbook");i.workbooks.push(l),s=!0}"bin"==i.workbooks[0].slice(-3)&&(s=!0);var d={},m={};if(!n.bookSheets&&!n.bookProps){if(b2=[],i.sst)try{b2=function hde(e,n,t){return".bin"===n.slice(-4)?function doe(e,n){var t=[],r=!1;return Vp(e,function(s,a,l){switch(l){case 159:t.Count=s[0],t.Unique=s[1];break;case 19:t.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(!r||n.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t}(e,t):function coe(e,n){var t=[],r="";if(!e)return t;var i=e.match(ooe);if(i){r=i[2].replace(aoe,"").split(loe);for(var s=0;s!=r.length;++s){var a=QP(r[s].trim(),n);null!=a&&(t[t.length]=a)}i=ur(i[1]),t.Count=i.count,t.Unique=i.uniqueCount}return t}(e,t)}(Uo(e,Ju(i.sst)),i.sst,n)}catch(ln){if(n.WTF)throw ln}n.cellStyles&&i.themes.length&&(d=function ude(e,n,t){return W8(e,t)}(ru(e,i.themes[0].replace(/^\//,""),!0)||"",0,n)),i.style&&(m=function cde(e,n,t,r){return".bin"===n.slice(-4)?function sae(e,n,t){var r={NumberFmt:[]};for(var i in Zn)r.NumberFmt[i]=Zn[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return Vp(e,function(d,m,y){switch(y){case 44:r.NumberFmt[d[0]]=d[1],lf(d[1],d[0]);break;case 43:r.Fonts.push(d),null!=d.color.theme&&n&&n.themeElements&&n.themeElements.clrScheme&&(d.color.rgb=ZS(n.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==s[s.length-1]&&r.CellXf.push(d);break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(y),a=!0;break;case 38:s.pop(),a=!1;break;default:if(m.T>0)s.push(y);else if(m.T<0)s.pop();else if(!a||t.WTF&&37!=s[s.length-1])throw new Error("Unexpected record 0x"+y.toString(16))}}),r}(e,t,r):Yoe(e,t,r)}(Uo(e,Ju(i.style)),i.style,d,n))}i.links.map(function(ln){try{return u2(ru(e,c2(Ju(ln))),ln),function pde(e,n,t,r){return".bin"===t.slice(-4)?function Gae(e,n,t,r){if(!e)return e;var i=r||{},s=!1;Vp(e,function(d,m,y){switch(y){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!m.T&&(!s||i.WTF))throw new Error("Unexpected record 0x"+y.toString(16))}},i)}(e,0,0,r):void 0}(Uo(e,Ju(ln)),0,ln,n)}catch{}});var y=function ide(e,n,t){return".bin"===n.slice(-4)?function Jhe(e,n){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;n||(n={}),n.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],E2[16]={n:"BrtFRTArchID$",f:Zhe},Vp(e,function(d,m,y){switch(y){case 156:a.SheetNames.push(d.name),t.Sheets.push(d);break;case 153:t.WBProps=d;break;case 39:null!=d.Sheet&&(n.SID=d.Sheet),d.Ref=fl(d.Ptg,0,null,a,n),delete n.SID,delete d.Ptg,s.push(d);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:a[0].length?a.push([y,d]):a[0]=[y,d],a[a.length-1].XTI=[];break;case 362:0===a.length&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(d),a.XTI=a.XTI.concat(d);break;case 35:case 37:r.push(y),i=!0;break;case 36:case 38:r.pop(),i=!1;break;default:if(!m.T&&(!i||n.WTF&&37!=r[r.length-1]&&35!=r[r.length-1]))throw new Error("Unexpected record 0x"+y.toString(16))}},n),_V(t),t.Names=s,t.supbooks=a,t}(e,t):function Whe(e,n){if(!e)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(e.replace(al,function(d,m){var y=ur(d);switch(cf(y[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":d.match($he)&&(i="xmlns"+d.match(/<(\w+):/)[1]),t.xmlns=y[i];break;case"<fileVersion":delete y[0],t.AppVersion=y;break;case"<workbookPr":case"<workbookPr/>":dO.forEach(function(T){if(null!=y[T[0]])switch(T[2]){case"bool":t.WBProps[T[0]]=bs(y[T[0]]);break;case"int":t.WBProps[T[0]]=parseInt(y[T[0]],10);break;default:t.WBProps[T[0]]=y[T[0]]}}),y.codeName&&(t.WBProps.CodeName=Yi(y.codeName));break;case"<workbookView":case"<workbookView/>":delete y[0],t.WBView.push(y);break;case"<sheet":switch(y.state){case"hidden":y.Hidden=1;break;case"veryHidden":y.Hidden=2;break;default:y.Hidden=0}delete y.state,y.name=Si(Yi(y.name)),delete y[0],t.Sheets.push(y);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":r=!1;break;case"<definedName":(s={}).Name=Yi(y.name),y.comment&&(s.Comment=y.comment),y.localSheetId&&(s.Sheet=+y.localSheetId),bs(y.hidden||"0")&&(s.Hidden=!0),a=m+d.length;break;case"</definedName>":s.Ref=Si(Yi(e.slice(a,m))),t.Names.push(s);break;case"<calcPr":case"<calcPr/>":delete y[0],t.CalcPr=y;break;default:if(!r&&n.WTF)throw new Error("unrecognized "+y[0]+" in workbook")}return d}),-1===Fg.indexOf(t.xmlns))throw new Error("Unknown Namespace: "+t.xmlns);return _V(t),t}(e,t)}(Uo(e,Ju(i.workbooks[0])),i.workbooks[0],n),T={},D="";i.coreprops.length&&((D=Uo(e,Ju(i.coreprops[0]),!0))&&(T=qz(D)),0!==i.extprops.length&&(D=Uo(e,Ju(i.extprops[0]),!0))&&function Zre(e,n,t){var r={};n||(n={}),e=Yi(e),X_.forEach(function(i){var s=(e.match(r2(i[0]))||[])[1];switch(i[2]){case"string":s&&(n[i[1]]=Si(s));break;case"bool":n[i[1]]="true"===s;break;case"raw":var a=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(r[i[1]]=a[1])}}),r.HeadingPairs&&r.TitlesOfParts&&Kz(r.HeadingPairs,r.TitlesOfParts,n,t)}(D,T,n));var I={};(!n.bookSheets||n.bookProps)&&0!==i.custprops.length&&(D=ru(e,Ju(i.custprops[0]),!0))&&(I=function Jre(e,n){var t={},r="",i=e.match(Kre);if(i)for(var s=0;s!=i.length;++s){var a=i[s],l=ur(a);switch(l[0]){case"<?xml":case"<Properties":break;case"<property":r=Si(l.name);break;case"</property>":r=null;break;default:if(0===a.indexOf("<vt:")){var d=a.split(">"),m=d[0].slice(4),y=d[1];switch(m){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":t[r]=Si(y);break;case"bool":t[r]=bs(y);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[r]=parseInt(y,10);break;case"r4":case"r8":case"decimal":t[r]=parseFloat(y);break;case"filetime":case"date":t[r]=Vs(y);break;default:if("/"==m.slice(-1))break;n.WTF&&typeof console<"u"&&console.warn("Unexpected",a,m,d)}}else if("</"!==a.slice(0,2)&&n.WTF)throw new Error(a)}}return t}(D,n));var F={};if((n.bookSheets||n.bookProps)&&(y.Sheets?a=y.Sheets.map(function(zt){return zt.name}):T.Worksheets&&T.SheetNames.length>0&&(a=T.SheetNames),n.bookProps&&(F.Props=T,F.Custprops=I),n.bookSheets&&typeof a<"u"&&(F.SheetNames=a),n.bookSheets?F.SheetNames:n.bookProps))return F;a={};var L={};n.bookDeps&&i.calcchain&&(L=function fde(e,n,t){return".bin"===n.slice(-4)?function Wae(e,n,t){var r=[];return Vp(e,function(a,l,d){if(63===d)r.push(a);else if(!l.T)throw new Error("Unexpected record 0x"+d.toString(16))}),r}(e):function Hae(e){var n=[];if(!e)return n;var t=1;return(e.match(al)||[]).forEach(function(r){var i=ur(r);switch(i[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?t=i.i:i.i=t,n.push(i)}}),n}(e)}(Uo(e,Ju(i.calcchain)),i.calcchain));var Z,q,B=0,G={},oe=y.Sheets;T.Worksheets=oe.length,T.SheetNames=[];for(var _e=0;_e!=oe.length;++_e)T.SheetNames[_e]=oe[_e].name;var fe=s?"bin":"xml",ae=i.workbooks[0].lastIndexOf("/"),De=(i.workbooks[0].slice(0,ae+1)+"_rels/"+i.workbooks[0].slice(ae+1)+".rels").replace(/^\//,"");Gu(e,De)||(De="xl/_rels/workbook."+fe+".rels");var Ie=u2(ru(e,De,!0),De.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(n.xlmeta=function mde(e,n,t){return".bin"===n.slice(-4)?function Vae(e,n,t){var r={Types:[],Cell:[],Value:[]},i=t||{},s=[],a=!1,l=2;return Vp(e,function(d,m,y){switch(y){case 335:r.Types.push({name:d.name});break;case 51:d.forEach(function(T){1==l?r.Cell.push({type:r.Types[T[0]-1].name,index:T[1]}):0==l&&r.Value.push({type:r.Types[T[0]-1].name,index:T[1]})});break;case 337:l=d?1:0;break;case 338:l=2;break;case 35:s.push(y),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!m.T&&(!a||i.WTF&&35!=s[s.length-1]))throw new Error("Unexpected record 0x"+y.toString(16))}}),r}(e,0,t):function jae(e,n,t){var r={Types:[],Cell:[],Value:[]};if(!e)return r;var a,i=!1,s=2;return e.replace(al,function(l){var d=ur(l);switch(cf(d[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":r.Types.push({name:d.name});break;case"<futureMetadata":for(var m=0;m<r.Types.length;++m)r.Types[m].name==d.name&&(a=r.Types[m]);break;case"<rc":1==s?r.Cell.push({type:r.Types[d.t-1].name,index:+d.v}):0==s&&r.Value.push({type:r.Types[d.t-1].name,index:+d.v});break;case"<cellMetadata":s=1;break;case"</cellMetadata>":case"</valueMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+d.i);break;default:if(!i&&t.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return l}),r}(e,0,t)}(Uo(e,Ju(i.metadata[0])),i.metadata[0],n)),(i.people||[]).length>=1&&(n.people=function Kae(e,n){var t=[],r=!1;return e.replace(al,function(s){var a=ur(s);switch(cf(a[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":t.push({name:a.displayname,id:a.id});break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&n.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),t}(Uo(e,Ju(i.people[0])),n)),Ie&&(Ie=function Pfe(e,n){if(!e)return 0;try{e=n.map(function(r){return r.id||(r.id=r.strRelID),[r.name,e["!id"][r.id].Target,Ife(e["!id"][r.id].Type)]})}catch{return null}return e&&0!==e.length?e:null}(Ie,y.Sheets));var qe=Uo(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(B=0;B!=T.Worksheets;++B){var Je="sheet";if(Ie&&Ie[B]?(Z="xl/"+Ie[B][1].replace(/[\/]?xl\//,""),Gu(e,Z)||(Z=Ie[B][1]),Gu(e,Z)||(Z=De.replace(/_rels\/.*$/,"")+Ie[B][1]),Je=Ie[B][2]):Z=(Z="xl/worksheets/sheet"+(B+1-qe)+"."+fe).replace(/sheet0\./,"sheet."),q=Z.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),n&&null!=n.sheets)switch(typeof n.sheets){case"number":if(B!=n.sheets)continue e;break;case"string":if(T.SheetNames[B].toLowerCase()!=n.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(n.sheets)){for(var $e=!1,jt=0;jt!=n.sheets.length;++jt)"number"==typeof n.sheets[jt]&&n.sheets[jt]==B&&($e=1),"string"==typeof n.sheets[jt]&&n.sheets[jt].toLowerCase()==T.SheetNames[B].toLowerCase()&&($e=1);if(!$e)continue e}}Ofe(e,Z,q,T.SheetNames[B],B,G,a,Je,n,y,d,m)}return F={Directory:i,Workbook:y,Props:T,Custprops:I,Deps:L,Sheets:a,SheetNames:T.SheetNames,Strings:b2,Styles:m,Themes:d,SSF:Qi(Zn)},n&&n.bookFiles&&(e.files?(F.keys=r,F.files=e.files):(F.keys=[],F.files={},e.FullPaths.forEach(function(ln,zt){ln=ln.replace(/^Root Entry[\/]/,""),F.keys.push(ln),F.files[ln]=e.FileIndex[zt]}))),n&&n.bookVBA&&(i.vba.length>0?F.vbaraw=Uo(e,Ju(i.vba[0]),!0):i.defaults&&i.defaults.bin===sle&&(F.vbaraw=Uo(e,"xl/vbaProject.bin",!0))),F}function Ffe(e,n){var t=n||{},r="Workbook",i=Xn.find(e,r);try{if(!(i=Xn.find(e,r="/!DataSpaces/Version"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(function goe(e){var n={};n.id=e.read_shift(0,"lpp4"),n.R=jp(e,4),n.U=jp(e,4),n.W=jp(e,4)}(i.content),!(i=Xn.find(e,r="/!DataSpaces/DataSpaceMap"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=function yoe(e){var n=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)n.push(_oe(e));return n}(i.content);if(1!==s.length||1!==s[0].comps.length||0!==s[0].comps[0].t||"StrongEncryptionDataSpace"!==s[0].name||"EncryptedPackage"!==s[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+r);if(!(i=Xn.find(e,r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=function voe(e){var n=[];e.l+=4;for(var t=e.read_shift(4);t-- >0;)n.push(e.read_shift(0,"lpp4"));return n}(i.content);if(1!=a.length||"StrongEncryptionTransform"!=a[0])throw new Error("ECMA-376 Encrypted file bad "+r);if(!(i=Xn.find(e,r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);!function boe(e){var n=function xoe(e){var n={};return e.read_shift(4),e.l+=4,n.id=e.read_shift(0,"lpp4"),n.name=e.read_shift(0,"lpp4"),n.R=jp(e,4),n.U=jp(e,4),n.W=jp(e,4),n}(e);if(n.ename=e.read_shift(0,"8lpp4"),n.blksz=e.read_shift(4),n.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return n}(i.content)}catch{}if(!(i=Xn.find(e,r="/EncryptionInfo"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var l=function woe(e){var n=jp(e);switch(n.Minor){case 2:return[n.Minor,Coe(e)];case 3:return[n.Minor,Toe()];case 4:return[n.Minor,Eoe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+n.Minor)}(i.content);if(!(i=Xn.find(e,r="/EncryptedPackage"))||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(4==l[0]&&typeof decrypt_agile<"u")return decrypt_agile(l[1],i.content,t.password||"",t);if(2==l[0]&&typeof decrypt_std76<"u")return decrypt_std76(l[1],i.content,t.password||"",t);throw new Error("File is password-protected")}function CO(e,n){var t="";switch((n||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":t=eu(e.slice(0,12));break;case"binary":t=e;break;default:throw new Error("Unrecognized type "+(n&&n.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function WV(e,n){var t=0;e:for(;t<e.length;)switch(e.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return pO(e.slice(t),n);default:break e}return Uv.to_workbook(e,n)}function TO(e,n,t,r){return r?(t.type="string",Uv.to_workbook(e,t)):Uv.to_workbook(n,t)}function iD(e,n){MS();var t=n||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return iD(new Uint8Array(e),((t=Qi(t)).type="array",t));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var i,r=e,s=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),Wv={},t.dateNF&&(Wv.dateNF=t.dateNF),t.type||(t.type=Hr&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==t.type&&(t.type=Hr?"buffer":"binary",r=function $ne(e){if(typeof Lg<"u")return Lg.readFileSync(e);if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var n=File(e);n.open("r"),n.encoding="binary";var t=n.read();return n.close(),t}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+e)}(e),typeof Uint8Array<"u"&&!Hr&&(t.type="array")),"string"==t.type&&(s=!0,t.type="binary",t.codepage=65001,r=function jfe(e){return e.match(/[^\x00-\x7F]/)?uf(e):e}(e)),"array"==t.type&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),l=new Uint8Array(a);if(l.foo="bar",!l.foo)return(t=Qi(t)).type="array",iD(pP(r),t)}switch((i=CO(r,t))[0]){case 208:if(207===i[1]&&17===i[2]&&224===i[3]&&161===i[4]&&177===i[5]&&26===i[6]&&225===i[7])return function Bfe(e,n){return Xn.find(e,"EncryptedPackage")?Ffe(e,n):TV(e,n)}(Xn.read(r,t),t);break;case 9:if(i[1]<=8)return TV(r,t);break;case 60:return pO(r,t);case 73:if(73===i[1]&&42===i[2]&&0===i[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===i[1])return function Qse(e,n){var t=n||{},r=!!t.WTF;t.WTF=!0;try{var i=I8.to_workbook(e,t);return t.WTF=r,i}catch(s){if(t.WTF=r,!s.message.match(/SYLK bad record ID/)&&r)throw s;return Uv.to_workbook(e,n)}}(r,t);break;case 84:if(65===i[1]&&66===i[2]&&76===i[3])return P8.to_workbook(r,t);break;case 80:return 75===i[1]&&i[2]<9&&i[3]<9?function zfe(e,n){var r=e,i=n||{};return i.type||(i.type=Hr&&Buffer.isBuffer(e)?"buffer":"base64"),Lfe(cz(r,i),i)}(r,t):TO(e,r,t,s);case 239:return 60===i[3]?pO(r,t):TO(e,r,t,s);case 255:if(254===i[1])return function Ufe(e,n){var t=e;return"base64"==n.type&&(t=eu(t)),t=wi.utils.decode(1200,t.slice(2),"str"),n.type="binary",WV(t,n)}(r,t);if(0===i[1]&&2===i[2]&&0===i[3])return Q_.to_workbook(r,t);break;case 0:if(0===i[1]&&(i[2]>=2&&0===i[3]||0===i[2]&&(8===i[3]||9===i[3])))return Q_.to_workbook(r,t);break;case 3:case 131:case 139:case 140:return JP.to_workbook(r,t);case 123:if(92===i[1]&&114===i[2]&&116===i[3])return z8.to_workbook(r,t);break;case 10:case 13:case 32:return function Vfe(e,n){var t="",r=CO(e,n);switch(n.type){case"base64":t=eu(e);break;case"binary":t=e;break;case"buffer":t=e.toString("binary");break;case"array":t=U_(e);break;default:throw new Error("Unrecognized type "+n.type)}return 239==r[0]&&187==r[1]&&191==r[2]&&(t=Yi(t)),n.type="binary",WV(t,n)}(r,t);case 137:if(80===i[1]&&78===i[2]&&71===i[3])throw new Error("PNG Image File is not a spreadsheet")}return Jse.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?JP.to_workbook(r,t):TO(e,r,t,s)}function XV(e,n,t,r,i,s,a,l){var d=Js(t),m=l.defval,y=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),T=!0,D=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(D,"__rowNum__",{value:t,enumerable:!1})}catch{D.__rowNum__=t}else D.__rowNum__=t;if(!a||e[t])for(var I=n.s.c;I<=n.e.c;++I){var F=a?e[t][I]:e[r[I]+d];if(void 0!==F&&void 0!==F.t){var L=F.v;switch(F.t){case"z":if(null==L)break;continue;case"e":L=0==L?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+F.t)}if(null!=s[I]){if(null==L)if("e"==F.t&&null===L)D[s[I]]=null;else if(void 0!==m)D[s[I]]=m;else{if(!y||null!==L)continue;D[s[I]]=null}else D[s[I]]=y&&("n"!==F.t||"n"===F.t&&!1!==l.rawNumbers)?L:hf(F,L,l);null!=L&&(T=!1)}}else{if(void 0===m)continue;null!=s[I]&&(D[s[I]]=m)}}return{row:D,isempty:T}}function oD(e,n){if(null==e||null==e["!ref"])return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,l="",d={s:{r:0,c:0},e:{r:0,c:0}},m=n||{},y=null!=m.range?m.range:e["!ref"];switch(1===m.header?r=1:"A"===m.header?r=2:Array.isArray(m.header)?r=3:null==m.header&&(r=0),typeof y){case"string":d=ui(y);break;case"number":(d=ui(e["!ref"])).s.r=y;break;default:d=y}r>0&&(i=0);var T=Js(d.s.r),D=[],I=[],F=0,L=0,B=Array.isArray(e),G=d.s.r,Z=0,q={};B&&!e[G]&&(e[G]=[]);var oe=m.skipHidden&&e["!cols"]||[],_e=m.skipHidden&&e["!rows"]||[];for(Z=d.s.c;Z<=d.e.c;++Z)if(!(oe[Z]||{}).hidden)switch(D[Z]=ws(Z),t=B?e[G][Z]:e[D[Z]+T],r){case 1:s[Z]=Z-d.s.c;break;case 2:s[Z]=D[Z];break;case 3:s[Z]=m.header[Z-d.s.c];break;default:if(null==t&&(t={w:"__EMPTY",t:"s"}),l=a=hf(t,null,m),L=q[a]||0){do{l=a+"_"+L++}while(q[l]);q[a]=L,q[l]=1}else q[a]=1;s[Z]=l}for(G=d.s.r+i;G<=d.e.r;++G)if(!(_e[G]||{}).hidden){var fe=XV(e,d,G,D,r,s,B,m);(!1===fe.isempty||(1===r?!1!==m.blankrows:m.blankrows))&&(I[F++]=fe.row)}return I.length=F,I}var ZV=/"/g;function KV(e,n,t,r,i,s,a,l){for(var d=!0,m=[],y="",T=Js(t),D=n.s.c;D<=n.e.c;++D)if(r[D]){var I=l.dense?(e[t]||[])[D]:e[r[D]+T];if(null==I)y="";else if(null!=I.v){d=!1,y=""+(l.rawNumbers&&"n"==I.t?I.v:hf(I,null,l));for(var F=0,L=0;F!==y.length;++F)if((L=y.charCodeAt(F))===i||L===s||34===L||l.forceQuotes){y='"'+y.replace(ZV,'""')+'"';break}"ID"==y&&(y='"ID"')}else null==I.f||I.F?y="":(d=!1,(y="="+I.f).indexOf(",")>=0&&(y='"'+y.replace(ZV,'""')+'"'));m.push(y)}return!1===l.blankrows&&d?null:m.join(a)}function DO(e,n){var t=[],r=n??{};if(null==e||null==e["!ref"])return"";var i=ui(e["!ref"]),s=void 0!==r.FS?r.FS:",",a=s.charCodeAt(0),l=void 0!==r.RS?r.RS:"\n",d=l.charCodeAt(0),m=new RegExp(("|"==s?"\\|":s)+"+$"),y="",T=[];r.dense=Array.isArray(e);for(var D=r.skipHidden&&e["!cols"]||[],I=r.skipHidden&&e["!rows"]||[],F=i.s.c;F<=i.e.c;++F)(D[F]||{}).hidden||(T[F]=ws(F));for(var L=0,B=i.s.r;B<=i.e.r;++B)(I[B]||{}).hidden||null!=(y=KV(e,i,B,T,a,d,s,r))&&(r.strip&&(y=y.replace(m,"")),(y||!1!==r.blankrows)&&t.push((L++?l:"")+y));return delete r.dense,t.join("")}function QV(e,n,t){var r=t||{},i=+!r.skipHeader,s=e||{},a=0,l=0;if(s&&null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var d="string"==typeof r.origin?Us(r.origin):r.origin;a=d.r,l=d.c}var m,y={s:{c:0,r:0},e:{c:l,r:a+n.length-1+i}};if(s["!ref"]){var T=ui(s["!ref"]);y.e.c=Math.max(y.e.c,T.e.c),y.e.r=Math.max(y.e.r,T.e.r),-1==a&&(y.e.r=(a=T.e.r+1)+n.length-1+i)}else-1==a&&(a=0,y.e.r=n.length-1+i);var D=r.header||[],I=0;n.forEach(function(L,B){Zs(L).forEach(function(G){-1==(I=D.indexOf(G))&&(D[I=D.length]=G);var Z=L[G],q="z",oe="",_e=hr({c:l+I,r:a+B+i});m=M2(s,_e),!Z||"object"!=typeof Z||Z instanceof Date?("number"==typeof Z?q="n":"boolean"==typeof Z?q="b":"string"==typeof Z?q="s":Z instanceof Date?(q="d",r.cellDates||(q="n",Z=sa(Z)),oe=r.dateNF||Zn[14]):null===Z&&r.nullError&&(q="e",Z=0),m?(m.t=q,m.v=Z,delete m.w,delete m.R,oe&&(m.z=oe)):s[_e]=m={t:q,v:Z},oe&&(m.z=oe)):s[_e]=Z})}),y.e.c=Math.max(y.e.c,l+D.length-1);var F=Js(a);if(i)for(I=0;I<D.length;++I)s[ws(I+l)+F]={t:"s",v:D[I]};return s["!ref"]=kr(y),s}function M2(e,n,t){if("string"==typeof n){if(Array.isArray(e)){var r=Us(n);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[n]||(e[n]={t:"z"})}return M2(e,hr("number"!=typeof n?n:{r:n,c:t||0}))}function kO(e,n,t,r){var i=1;if(!t)for(;i<=65535&&-1!=e.SheetNames.indexOf(t="Sheet"+i);++i,t=void 0);if(!t||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(t=a+i);++i);}if(function yV(e,n){if(e.length>31){if(n)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var t=!0;return jhe.forEach(function(r){if(-1!=e.indexOf(r)){if(!n)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");t=!1}}),t}(t),e.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return e.SheetNames.push(t),e.Sheets[t]=n,t}function eU(e,n,t){return n?(e.l={Target:n},t&&(e.l.Tooltip=t)):delete e.l,e}var tpe={encode_col:ws,encode_row:Js,encode_cell:hr,encode_range:kr,decode_col:LP,decode_row:OP,split_cell:function bre(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Us,decode_range:su,format_cell:hf,sheet_add_aoa:Nz,sheet_add_json:QV,sheet_add_dom:PV,aoa_to_sheet:zv,json_to_sheet:function qfe(e,n){return QV(null,e,n)},table_to_sheet:OV,table_to_book:function hfe(e,n){return Rg(OV(e,n),n)},sheet_to_csv:DO,sheet_to_txt:function JV(e,n){n||(n={}),n.FS="\t",n.RS="\n";var t=DO(e,n);if(typeof wi>"u"||"string"==n.type)return t;var r=wi.utils.encode(1200,t,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r},sheet_to_json:oD,sheet_to_html:function IV(e,n){var t=n||{},i=null!=t.footer?t.footer:kV,s=[null!=t.header?t.header:MV],a=su(e["!ref"]);t.dense=Array.isArray(e),s.push(function AV(e,n,t){return[].join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}(0,0,t));for(var l=a.s.r;l<=a.e.r;++l)s.push(DV(e,a,l,t));return s.push("</table>"+i),s.join("")},sheet_to_formulae:function Yfe(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var l,i=ui(e["!ref"]),s="",a=[],d=[],m=Array.isArray(e);for(l=i.s.c;l<=i.e.c;++l)a[l]=ws(l);for(var y=i.s.r;y<=i.e.r;++y)for(s=Js(y),l=i.s.c;l<=i.e.c;++l)if(n=a[l]+s,r="",void 0!==(t=m?(e[y]||[])[l]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}d[d.length]=n+"="+r}return d},sheet_to_row_object_array:oD,sheet_get_cell:M2,book_new:function MO(){return{SheetNames:[],Sheets:{}}},book_append_sheet:kO,book_set_sheet_visibility:function Zfe(e,n,t){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function Xfe(e,n){if("number"==typeof n){if(n>=0&&e.SheetNames.length>n)return n;throw new Error("Cannot find sheet # "+n)}if("string"==typeof n){var t=e.SheetNames.indexOf(n);if(t>-1)return t;throw new Error("Cannot find sheet name |"+n+"|")}throw new Error("Cannot find sheet |"+n+"|")}(e,n);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}e.Workbook.Sheets[r].Hidden=t},cell_set_number_format:function Kfe(e,n){return e.z=n,e},cell_set_hyperlink:eU,cell_set_internal_link:function Jfe(e,n,t){return eU(e,"#"+n,t)},cell_add_comment:function Qfe(e,n,t){e.c||(e.c=[]),e.c.push({t:n,a:t||"SheetJS"})},sheet_set_array_formula:function epe(e,n,t,r){for(var i="string"!=typeof n?n:ui(n),s="string"==typeof n?n:kr(n),a=i.s.r;a<=i.e.r;++a)for(var l=i.s.c;l<=i.e.c;++l){var d=M2(e,a,l);d.t="n",d.F=s,delete d.v,a==i.s.r&&l==i.s.c&&(d.f=t,r&&(d.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function ope(e,n){if(1&e&&(k(0,"tr")(1,"td"),V(2),A(),k(3,"td"),V(4),A(),k(5,"td"),V(6),A(),k(7,"td"),V(8),A(),k(9,"td"),V(10),A(),k(11,"td"),V(12),A()()),2&e){const t=n.$implicit;ce(2),$t(t.tipoUnidad),ce(2),$t(t.ruta),ce(2),$t(t.economico),ce(2),$t(t.tarjeton),ce(2),$t(t.nomChofer),ce(2),$t(t.fkCorrida)}}function ape(e,n){1&e&&(k(0,"div",42),V(1,"Asignacion Correcta"),A())}function lpe(e,n){1&e&&(k(0,"div",42),V(1,"Hubo un error"),A())}function cpe(e,n){1&e&&(k(0,"div",43),V(1,"Sin asignacion"),A())}function upe(e,n){1&e&&(k(0,"div",43),V(1,"Ya existe una asignacion"),A())}const hpe=[{path:"Operadora/Agregar/Servicio",component:(()=>{class e{constructor(t,r){this.router=t,this.http=r,this.icongif="assets/iconBlackAcotma.gif",this.estado=[]}fileUpload(t){const r=t.target.files[0],i=new FileReader;i.readAsBinaryString(r),i.onload=s=>{var a=iD(i.result,{type:"binary"});this.ExcelData=tpe.sheet_to_json(a.Sheets[a.SheetNames[0]]),console.log(this.ExcelData)}}sendAsignacion(){this.http.post("http://prueba252.somee.com/api/Agregar/Servicio",this.ExcelData).toPromise().then(t=>{this.respuesta=t})}obtenerAsignacion(){this.http.get("http://prueba252.somee.com/api/consultarAsignacionDay").subscribe(t=>{this.estado=t,Array.isArray(this.estado)&&0===this.estado.length||(this.estadodiv="hey")})}ngOnInit(){this.obtenerAsignacion()}goServiciosIniciados(){this.router.navigate(["Operadora/ServiciosIniciados"])}goHorarioServicio(){this.router.navigate(["Operadora/HorarioServicio"])}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:87,vars:6,consts:[[2,"background-color","#9c223c","height","127vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["id","offcanvasDarkNavbarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page","href","#",1,"btn","btn-outline-success"],[1,"bi","bi-person-fill-gear"],["aria-current","page",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-clock"],[1,"bi","bi-play-fill"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],["id","file-upload-form",1,"uploader"],["id","file-upload","type","file","name","fileUpload","accept",".xls,.xlsx",3,"change"],["for","file-upload","id","file-drag"],["id","start"],["aria-hidden","true",1,"fa","fa-download"],["id","notimage",1,"hidden"],["id","file-upload-btn",1,"btn","btn-primary"],["id","response",1,"hidden"],["id","messages"],["id","file-progress","value","0",1,"progress"],[1,"container"],[2,"color","#9c223c"],[1,"ex1"],[1,"table","table-responsive"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],["align","right"],[1,"btn","btn-success",3,"click"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6," Apertura de Servicio"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8)(11,"h5",9),V(12,"Menu"),A(),Q(13,"button",10),A(),k(14,"div",11)(15,"ul",12)(16,"li",13)(17,"button",14),Q(18,"i",15),V(19," Administrar Verificadores"),A()(),Q(20,"br"),k(21,"li",13)(22,"button",16),rt("click",function(){return r.goHorarioServicio()}),Q(23,"i",17),V(24," Horarios de Servicio"),A()(),Q(25,"br"),k(26,"li",13)(27,"button",16),rt("click",function(){return r.goServiciosIniciados()}),Q(28,"i",18),V(29," Servicio Iniciado"),A()(),Q(30,"br"),k(31,"li",13)(32,"button",19),rt("click",function(){return r.goCerrar()}),Q(33,"i",20),V(34," Cerrrar Sesion"),A()()()()()()(),Q(35,"br")(36,"br")(37,"br")(38,"br")(39,"br")(40,"br"),k(41,"div")(42,"form",21)(43,"input",22),rt("change",function(s){return r.fileUpload(s)}),A(),k(44,"label",23)(45,"div",24),Q(46,"i",25),k(47,"div"),V(48,"Selecciona un archivo o suelta aqui"),A(),Q(49,"div",26),k(50,"span",27),V(51,"Selecciona un documento"),A()(),k(52,"div",28),Q(53,"div",29),k(54,"progress",30)(55,"span"),V(56,"0"),A(),V(57,"% "),A()()()()(),k(58,"div",31)(59,"p",32),V(60,"tu no haz visto nada."),A(),k(61,"div",33)(62,"table",34)(63,"table",35)(64,"thead")(65,"tr")(66,"th",36),V(67,"Tipo Unidad"),A(),k(68,"th"),V(69,"Ruta"),A(),k(70,"th"),V(71,"Economico"),A(),k(72,"th"),V(73,"No Tarjeton"),A(),k(74,"th"),V(75,"Nombre"),A(),k(76,"th"),V(77,"Corrida"),A()()(),k(78,"tbody"),Rt(79,ope,13,6,"tr",37),A()()()(),k(80,"p",38)(81,"button",39),rt("click",function(){return r.sendAsignacion()}),V(82,"Subir Asignaicon"),A()(),Rt(83,ape,2,0,"div",40),Rt(84,lpe,2,0,"div",40),Rt(85,cpe,2,0,"div",41),Rt(86,upe,2,0,"div",41),A()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(75),ze("ngForOf",r.ExcelData),ce(4),ze("ngIf",1==r.respuesta),ce(1),ze("ngIf",0==r.respuesta),ce(1),ze("ngIf",null==r.estadodiv),ce(1),ze("ngIf",null!=r.estadodiv))},dependencies:[vs,Hh,Fp,Lp,Wh],styles:['@import"https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css";@import"https://fonts.googleapis.com/css?family=Roboto";.uploader[_ngcontent-%COMP%]{display:block;clear:both;margin:0 auto;width:85%;max-width:300%}.uploader[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:left;clear:both;width:100%;padding:2rem 1.5rem;text-align:center;background:#060606;border-radius:7px;border:3px solid #060606;transition:all .2s ease;-webkit-user-select:none;user-select:none}.uploader[_ngcontent-%COMP%]   #response[_ngcontent-%COMP%]{float:left;clear:both;width:100%}.uploader[_ngcontent-%COMP%]   #response.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   #response[_ngcontent-%COMP%]   #messages[_ngcontent-%COMP%]{margin-bottom:.5rem}.uploader[_ngcontent-%COMP%]   #file-image[_ngcontent-%COMP%]{display:inline;margin:0 auto .5rem;width:auto;height:auto;max-width:180px}.uploader[_ngcontent-%COMP%]   #file-image.hidden[_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%], .uploader[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{display:inline;clear:both;margin:0 auto;width:100%;max-width:180px;height:8px;border:0;border-radius:4px;background-color:#eee;overflow:hidden}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-webkit-progress-bar{border-radius:4px;background-color:#eee}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-webkit-progress-value{background:linear-gradient(to right,#393f90 0%,#454cad 50%);border-radius:4px}.uploader[_ngcontent-%COMP%]   .progress[value][_ngcontent-%COMP%]::-moz-progress-bar{background:linear-gradient(to right,#393f90 0%,#454cad 50%);border-radius:4px}.uploader[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#5f6982}.uploader[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-block;margin:.5rem .5rem 1rem;clear:both;font-family:inherit;font-weight:700;font-size:14px;text-decoration:none;text-transform:initial;border:none;border-radius:.2rem;outline:none;padding:0 1rem;height:36px;line-height:36px;color:#fff;transition:all .2s ease-in-out;box-sizing:border-box;background:#454cad;border-color:#454cad;cursor:pointer}div.ex1[_ngcontent-%COMP%]{height:300px;width:100%;overflow-y:auto;top:0;bottom:0;position:sticky}']}),e})()},{path:"Operadora/ServiciosIniciados",component:tne},{path:"Operadora/HorarioServicio",component:ine},{path:"Operadora/EditarServicio/:idAsignacion",component:one},{path:"Operadora/EditarHoraServicio",component:ane},{path:"Operadora/AdminVerificadores",component:une},{path:"Operadora/Agregar/Verificador",component:cne},{path:"Operadora/Editar/Verificador",component:lne}];let dpe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e,bootstrap:[e]}),e.\u0275inj=si({imports:[wc.forRoot(hpe),E6,wc]}),e})();const fpe=[{path:"login",component:(()=>{class e{constructor(){this.icongif="assets/iACOTMA.gif",this.iconfiPink="assets/iconPinkAcotma.gif"}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:29,vars:1,consts:[[1,"vh-100",2,"background-color","#9A616D"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col","col-xl-10"],[1,"card",2,"border-radius","1rem"],[1,"row","g-0"],[1,"col-md-6","col-lg-5","d-none","d-md-block","text-center","align-items-center"],[1,"img-fluid",2,"border-radius","1rem 0 0 1rem","width","600px",3,"src"],[1,"col-md-6","col-lg-7","d-flex","align-items-center"],[1,"card-body","p-4","p-lg-5","text-black"],[1,"d-flex","align-items-center","mb-3","pb-1"],[1,"fas","fa-cubes","fa-2x","me-3",2,"color","#ff6219"],[1,"h1","fw-bold","mb-0"],[1,"fw-normal","mb-3","pb-3",2,"letter-spacing","1px"],[1,"form-outline","mb-4"],["type","email","id","form2Example17","placeholder","Ingresa tu Usuario",1,"form-control","form-control-lg"],["for","form2Example17",1,"form-label"],["type","password","id","form2Example27","placeholder","Ingresa tu Contrase\xf1a",1,"form-control","form-control-lg"],["for","form2Example27",1,"form-label"],[1,"pt-1","mb-4"],[1,"text-center"],["type","button",1,"btn","btn-dark","btn-lg","btn-block"]],template:function(t,r){1&t&&(k(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),Q(7,"img",7),A(),k(8,"div",8)(9,"div",9)(10,"form")(11,"div",10),Q(12,"i",11),k(13,"span",12),V(14,"ACOTMA"),A()(),k(15,"h5",13),V(16,"Inicia Sesion con tu Cuenta"),A(),k(17,"div",14),Q(18,"input",15),k(19,"label",16),V(20,"Usuario"),A()(),k(21,"div",14),Q(22,"input",17),k(23,"label",18),V(24,"Contrase\xf1a"),A()(),k(25,"div",19)(26,"div",20)(27,"button",21),V(28,"Entrar"),A()()()()()()()()()()()()),2&t&&(ce(7),Kr("src",r.iconfiPink,Zi))}}),e})()}];let ppe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot(fpe),wc]}),e})();function mpe(e,n){if(1&e){const t=Gn();k(0,"tr")(1,"th"),V(2),A(),k(3,"td"),V(4),A(),k(5,"td"),V(6),A(),k(7,"td"),V(8),A(),k(9,"td")(10,"button",26),rt("click",function(){const s=mn(t).$implicit;return gn(bt().goValidar(s.idAsignacion))}),Q(11,"i",27),A()()()}if(2&e){const t=n.$implicit;ce(2),$t(t.tipoUnidad),ce(2),$t(t.ruta),ce(2),$t(t.corrida),ce(2),$t(t.economico)}}let gpe=(()=>{class e{constructor(t,r){this.router=t,this.http=r,this.icongif="assets/iconBlackAcotma.gif"}filterItems(t,r){return-1!==t.nombre.toLowerCase().indexOf(r.toLowerCase())}getAsignacion(){this.http.get("http://prueba252.somee.com/api/Verificacion/Servicio/Completo").subscribe(t=>{this.dataVerificacion=t,console.log(t)})}ngOnInit(){setInterval(()=>{this.getAsignacion()},1e3)}goValidar(t){console.log(t),this.router.navigate(["Verificadores/VerificarUnidad",t])}goReportar(){this.router.navigate(["Verificadores/ReportarUnidad"])}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:48,vars:6,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","80px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],[1,"input-group","flex-nowrap"],["id","addon-wrapping",1,"input-group-text"],[1,"bi","bi-search"],["type","text","placeholder","Buscar","aria-label","Username","aria-describedby","addon-wrapping",1,"form-control",3,"ngModel","ngModelChange"],[1,"ex1"],[1,"table","table-dark","border"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","400px"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-bag-check"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Verificacion de Unidades"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goCerrar()}),Q(16,"i",14),V(17," Cerrrar Sesion"),A()()()()()()(),Q(18,"br")(19,"br")(20,"br")(21,"br")(22,"br"),k(23,"div",15)(24,"div",16)(25,"span",17),Q(26,"i",18),A(),k(27,"input",19),rt("ngModelChange",function(s){return r.filtro=s}),A()(),Q(28,"br"),k(29,"div",20)(30,"table",21)(31,"thead")(32,"tr")(33,"th",22),V(34,"Unidad "),A(),k(35,"th",22),V(36,"Ruta"),A(),k(37,"th",22),V(38,"Corrida"),A(),k(39,"th",22),V(40,"Economico"),A(),k(41,"th",22),V(42,"Accion"),A()()(),k(43,"tbody"),Rt(44,mpe,12,4,"tr",23),Ji(45,"filter"),A()()()(),k(46,"div",24),Q(47,"img",25),A()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(23),ze("ngModel",r.filtro),ce(17),ze("ngForOf",zl(45,3,r.dataVerificacion,r.filtro)))},dependencies:[vs,va,Ha,ba,R_],styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:1%;white-space:nowrap}div.ex1[_ngcontent-%COMP%]{height:300px;width:100%;overflow-y:auto}"]}),e})();function _pe(e,n){if(1&e){const t=Gn();k(0,"div",19)(1,"div",20)(2,"label",21),V(3,"No.Unidad"),A(),Q(4,"input",22),A(),Q(5,"br")(6,"br")(7,"br"),k(8,"div",20)(9,"label",23),V(10,"No.Tarjeton"),A(),Q(11,"input",22),A(),Q(12,"br")(13,"br")(14,"br"),k(15,"div",20)(16,"label",23),V(17,"Ruta"),A(),Q(18,"input",22),A(),Q(19,"br")(20,"br")(21,"br"),k(22,"div",20)(23,"label",23),V(24,"Corrida"),A(),Q(25,"input",24),A(),Q(26,"br")(27,"br")(28,"br"),k(29,"div",20)(30,"label",23),V(31,"Hora de Acople"),A(),k(32,"input",25),rt("ngModelChange",function(i){return gn(mn(t).$implicit.horarioSalida=i)}),A()(),Q(33,"br")(34,"br")(35,"br"),k(36,"div",20)(37,"label",26),V(38,"Observaciones"),A(),k(39,"textarea",27),rt("ngModelChange",function(i){return mn(t),gn(bt().Observaciones=i)}),A()(),Q(40,"br"),k(41,"div",28)(42,"button",29),rt("click",function(){const s=mn(t).$implicit;return gn(bt().goLiberarUnidad(s.corrida,s.fecha,s.idAsignacion))}),V(43,"Liberar"),A()(),Q(44,"br")(45,"br"),k(46,"div",28)(47,"button",30),V(48,"Reportar"),A()()()}if(2&e){const t=n.$implicit,r=bt();ce(4),Kr("value",t.economico),ze("disabled",r.isDisable),ce(7),Kr("value",t.tarjeton),ze("disabled",r.isDisable),ce(7),Kr("value",t.ruta),ze("disabled",r.isDisable),ce(7),Kr("value",t.corrida),ze("disabled",r.isDisable),ce(7),Kr("value",t.horarioSalida),ze("ngModel",t.horarioSalida)("disabled",r.isDisable),ce(7),ze("ngModel",r.Observaciones)}}const ype=[{path:"Verificadores/ConsultaServicio",component:gpe},{path:"Verificadores/VerificarUnidad/:idAsignacion",component:(()=>{class e{constructor(t,r,i){this.router=t,this.route=r,this.http=i,this.isDisable=!1,this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){this.toggleDisabled(),this.idAsigancion=this.route.snapshot.params.idAsignacion,console.log(this.idAsigancion),this.http.get(`http://prueba252.somee.com/api/Verificacion/Servicio?idAsignacion=${this.idAsigancion}`).pipe(jn(r=>{this.dataAsignacion=r})).subscribe()}goLiberarUnidad(t,r,i){const s=new Date,a=s.getHours(),l=s.getMinutes();this.horaLlegada=`${a}:${l}`,this.http.post("http://prueba252.somee.com/api/Liberar/Unidades",{corrida:t,fecha:r,horaLlegada:this.horaLlegada}).toPromise().then(D=>{!0===D&&this.router.navigate(["Verificadores/ConsultaServicio"])}),this.http.post("http://prueba252.somee.com/api/addverificacion",{estado:"Verificado",observaciones:this.Observaciones,horaSalida:this.horaLlegada,fkAsignacion:i}).toPromise().then(D=>{!0===D&&console.log("checale  ")})}goReportarUnidad(t,r){const i=new Date,s=i.getHours(),a=i.getMinutes();this.horaLlegada=`${s}:${a}`,this.http.post("http://prueba252.somee.com/api/Liberar/Unidades",{corrida:t,fecha:r,horaLlegada:this.horaLlegada}).toPromise().then(m=>{!0===m&&this.router.navigate(["Verificadores/ConsultaServicio"])})}toggleDisabled(){const t=document.getElementById("editBlock");this.isDisable=!this.isDisable,t.textContent=1==this.isDisable?"Editar":"Bloquear"}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs),We(Cg),We(xs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:29,vars:2,consts:[[2,"background-color","#9c223c","height","115vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],["align","right"],["id","editBlock",1,"btn","btn-warning",3,"click"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"form-group"],["for","exampleFormControlInput",1,"colorwhite"],["type","email","id","exampleFormControlInput1",1,"form-control",3,"value","disabled"],["for","exampleFormControlInput1",1,"colorwhite"],["type","text","id","corrida","name","corrida",1,"form-control",3,"value","disabled"],["type","email","id","horarioSalida",1,"form-control",3,"value","ngModel","disabled","ngModelChange"],["for","exampleFormControlTextarea1",1,"colorwhite"],["id","Observaciones","rows","7","name","Observaciones","placeholder","Introduce tus observaciones",1,"form-control",3,"ngModel","ngModelChange"],["align","center"],["type","submit",1,"btn","btn-success","text-center","col-12",3,"click"],["type","submit",1,"btn","btn-danger","text-center","col-12"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Verificar Unidad"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goCerrar()}),Q(16,"i",14),V(17," Cerrrar Sesion"),A()()()()()()(),Q(18,"br")(19,"br")(20,"br")(21,"br")(22,"br")(23,"br"),k(24,"div",15)(25,"p",16)(26,"button",17),rt("click",function(){return r.toggleDisabled()}),A()(),Rt(27,_pe,49,12,"div",18),Q(28,"br"),A()()),2&t&&(ce(4),Kr("src",r.icongif,Zi),ce(23),ze("ngForOf",r.dataAsignacion))},dependencies:[vs,va,Ha,ba],styles:[".colorwhite[_ngcontent-%COMP%]{color:#fff}"]}),e})()},{path:"Verificadores/ReportarUnidad",component:(()=>{class e{constructor(t){this.router=t,this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){}goValidarReporte(){this.router.navigate(["Verificadores/ConsultaServicio"])}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:69,vars:1,consts:[[2,"background-color","#9c223c","height","100vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page","href","#",1,"btn","btn-outline-danger"],[1,"bi","bi-box-arrow-left"],[1,"container"],["action","","method","post"],[1,"row"],[1,"form-group"],["for","exampleFormControlInput1",1,"colorwhite"],["type","email","id","exampleFormControlInput1","placeholder","102","readonly","",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","502","readonly","",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","T01","readonly","",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","106","readonly","",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","5:50","readonly","",1,"form-control"],["for","exampleFormControlTextarea1",1,"colorwhite"],["id","exampleFormControlTextarea1","rows","7","placeholder","Introduce tus observaciones",1,"form-control"],["align","center"],["type","submit",1,"btn","text-center","col-12","colorwhite","backgroundButton"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Reportar Unidad"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),Q(16,"i",14),V(17," Cerrrar Sesion"),A()()()()()()(),Q(18,"br")(19,"br")(20,"br")(21,"br")(22,"br"),k(23,"div",15)(24,"form",16)(25,"div",17)(26,"div",18)(27,"label",19),V(28,"No.Unidad"),A(),Q(29,"input",20),A(),Q(30,"br")(31,"br")(32,"br"),k(33,"div",18)(34,"label",19),V(35,"No.Tarjeton"),A(),Q(36,"input",21),A(),Q(37,"br")(38,"br")(39,"br"),k(40,"div",18)(41,"label",19),V(42,"Ruta"),A(),Q(43,"input",22),A(),Q(44,"br")(45,"br")(46,"br"),k(47,"div",18)(48,"label",19),V(49,"Corrida"),A(),Q(50,"input",23),A(),Q(51,"br")(52,"br")(53,"br"),k(54,"div",18)(55,"label",19),V(56,"Hora de Acople"),A(),Q(57,"input",24),A(),Q(58,"br")(59,"br")(60,"br"),k(61,"div",18)(62,"label",25),V(63,"Observaciones"),A(),Q(64,"textarea",26),A()(),Q(65,"br"),k(66,"div",27)(67,"button",28),V(68,"Reportar"),A()()()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi))},styles:[".colorwhite[_ngcontent-%COMP%]{color:#fff}.backgroundButton[_ngcontent-%COMP%]{background-color:#49a7a7}"]}),e})()},{path:"Verificadores/VerificacionDia",component:(()=>{class e{constructor(t){this.router=t,this.icongif="assets/iconBlackAcotma.gif"}ngOnInit(){}goCerrar(){this.router.navigate(["login"])}}return e.\u0275fac=function(t){return new(t||e)(We(zs))},e.\u0275cmp=bn({type:e,selectors:[["ng-component"]],decls:79,vars:1,consts:[[2,"background-color","#9c223c","height","120vh","width","auto"],[1,"navbar","navbar-dark","bg-dark","fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["alt","logo",2,"width","90px",3,"src"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item"],["aria-current","page",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-box-arrow-left"],[1,"container"],["action","","method","post"],[1,"row"],[1,"form-group"],["for","exampleFormControlInput1",1,"colorwhite"],[1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","Introduce Numero de Unidad",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","Introduce tipo de unidad",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","Introduce Numero de Tarjeton",1,"form-control"],["type","email","id","exampleFormControlInput1","placeholder","Introduce Ruta",1,"form-control"],["for","exampleFormControlTextarea1",1,"colorwhite"],["id","exampleFormControlTextarea1","rows","7","placeholder","Introduce tus observaciones",1,"form-control"],["align","center"],["type","submit",1,"btn","text-center","col-12","colorwhite","backgroundButton"],[1,"text-center"],["src","https://i.ibb.co/WkMWkrt/image.png ",2,"width","600px"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),Q(4,"img",4),A(),k(5,"a",3),V(6,"Verificacion del Dia"),A(),k(7,"button",5),Q(8,"span",6),A(),k(9,"div",7)(10,"div",8),Q(11,"button",9),A(),k(12,"div",10)(13,"ul",11)(14,"li",12)(15,"button",13),rt("click",function(){return r.goCerrar()}),Q(16,"i",14),V(17," Cerrrar Sesion"),A()()()()()()(),Q(18,"br")(19,"br")(20,"br")(21,"br")(22,"br"),k(23,"div",15)(24,"form",16)(25,"div",17)(26,"div",18)(27,"label",19),V(28,"Estado"),A(),k(29,"select",20)(30,"option"),V(31,"- - Seleccione Uno - -"),A(),k(32,"option"),V(33,"Entrada"),A(),k(34,"option"),V(35,"Salida"),A()()(),Q(36,"br")(37,"br")(38,"br"),k(39,"div",18)(40,"label",19),V(41,"No.Unidad"),A(),Q(42,"input",21),A(),Q(43,"br")(44,"br")(45,"br"),k(46,"div",18)(47,"label",19),V(48,"Tipo Unidad"),A(),Q(49,"input",22),A(),Q(50,"br")(51,"br")(52,"br"),k(53,"div",18)(54,"label",19),V(55,"No.Tarjeton"),A(),Q(56,"input",23),A(),Q(57,"br")(58,"br")(59,"br"),k(60,"div",18)(61,"label",19),V(62,"Ruta"),A(),Q(63,"input",24),A(),Q(64,"br")(65,"br")(66,"br"),k(67,"div",18)(68,"label",25),V(69,"Observaciones"),A(),Q(70,"textarea",26),A()(),Q(71,"br"),k(72,"div",27)(73,"button",28),V(74,"Reportar"),A()()(),Q(75,"br")(76,"br"),k(77,"div",29),Q(78,"img",30),A()()()),2&t&&(ce(4),Kr("src",r.icongif,Zi))},styles:[".colorwhite[_ngcontent-%COMP%]{color:#fff}.backgroundButton[_ngcontent-%COMP%]{background-color:#49a7a7}"]}),e})()}];let vpe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[wc.forRoot(ype),wc]}),e})();class xpe{constructor(n,t){this.open=n,this.close=t||n}isManual(){return"manual"===this.open||"manual"===this.close}}const bpe={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function AO(e,n=bpe){const t=(e||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(s=>s.split(":")).map(s=>{const a=n[s[0]]||s;return new xpe(a[0],a[1])}),i=r.filter(s=>s.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}const oa=typeof window<"u"&&window||{};let Hp;function tU(){const e=oa.document.createElement("span");e.innerText="testing bs version",e.classList.add("d-none"),e.classList.add("pl-1"),oa.document.head.appendChild(e);const n=oa.getComputedStyle(e).paddingLeft;return n&&parseFloat(n)?(oa.document.head.removeChild(e),"bs4"):(oa.document.head.removeChild(e),"bs5")}function qv(){return{isBs4:(Hp||(Hp=tU()),"bs4"===Hp),isBs5:(Hp||(Hp=tU()),"bs5"===Hp)}}function kpe(){const e="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(s){const a=this[i];this[i]=s,a!==s&&this[r+e]&&this[r+e].emit(s)}})}}typeof console>"u"||console;const Ipe=["addListener","removeListener"],Ppe=["addEventListener","removeEventListener"],Ope=["on","off"];function Xv(e,n,t,r){if($r(t)&&(r=t,t=void 0),r)return Xv(e,n,t).pipe(oI(r));const[i,s]=function Rpe(e){return $r(e.addEventListener)&&$r(e.removeEventListener)}(e)?Ppe.map(a=>l=>e[a](n,l,t)):function Lpe(e){return $r(e.addListener)&&$r(e.removeListener)}(e)?Ipe.map(rU(e,n)):function Fpe(e){return $r(e.on)&&$r(e.off)}(e)?Ope.map(rU(e,n)):[];if(!i&&hd(e))return Ct(a=>Xv(a,n,t))(te(e));if(!i)throw new TypeError("Invalid event target");return new er(a=>{const l=(...d)=>a.next(1<d.length?d:d[0]);return i(l),()=>s(l)})}function rU(e,n){return t=>r=>e[t](n,r)}class Npe extends Et{constructor(n,t){super()}schedule(n,t=0){return this}}const lD={setInterval(e,n,...t){const{delegate:r}=lD;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=lD;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class IO extends Npe{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(n,t,r=0){return lD.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&lD.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const k2={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=k2;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(s=>{t=void 0,e(s)});return new Et(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=k2;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=k2;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0},iU={now:()=>(iU.delegate||Date).now(),delegate:void 0};class A2{constructor(n,t=A2.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}A2.now=iU.now;class PO extends A2{constructor(n,t=A2.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const Vpe=new class zpe extends PO{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class Bpe extends IO{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=k2.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:s}=n;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(k2.cancelAnimationFrame(t),n._scheduled=void 0)}});var cD=(()=>{return(e=cD||(cD={})).top="top",e.bottom="bottom",e.left="left",e.right="right",e.auto="auto",e.end="right",e.start="left",e["top left"]="top left",e["top right"]="top right",e["right top"]="right top",e["right bottom"]="right bottom",e["bottom right"]="bottom right",e["bottom left"]="bottom left",e["left bottom"]="left bottom",e["left top"]="left top",e["top start"]="top left",e["top end"]="top right",e["end top"]="right top",e["end bottom"]="right bottom",e["bottom end"]="bottom right",e["bottom start"]="bottom left",e["start bottom"]="start bottom",e["start top"]="left top",cD;var e})(),Zv=(()=>{return(e=Zv||(Zv={})).top="top",e.bottom="bottom",e.left="start",e.right="end",e.auto="auto",e.end="end",e.start="start",e["top left"]="top start",e["top right"]="top end",e["right top"]="end top",e["right bottom"]="end bottom",e["bottom right"]="bottom end",e["bottom left"]="bottom start",e["left bottom"]="start bottom",e["left top"]="start top",e["top start"]="top start",e["top end"]="top end",e["end top"]="end top",e["end bottom"]="end bottom",e["bottom end"]="bottom end",e["bottom start"]="bottom start",e["start bottom"]="start bottom",e["start top"]="start top",Zv;var e})();function ry(e,n){if(1!==e.nodeType)return[];const r=e.ownerDocument.defaultView?.getComputedStyle(e,null);return n?r&&r[n]:r}function OO(e){if(!e)return document.documentElement;let r,t=e?.offsetParent;for(;null===t&&e.nextElementSibling&&r!==e.nextElementSibling;)r=e.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===ry(t,"position")?OO(t):t:r?r.ownerDocument.documentElement:document.documentElement}function LO(e){return null!==e.parentNode?LO(e.parentNode):e}function uD(e,n){if(!(e&&e.nodeType&&n&&n.nodeType))return document.documentElement;const t=e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?e:n,i=t?n:e,s=document.createRange();s.setStart(r,0),s.setEnd(i,0);const a=s.commonAncestorContainer;if(e!==a&&n!==a||r.contains(i))return function Upe(e){const{nodeName:n}=e;return"BODY"!==n&&("HTML"===n||OO(e.firstElementChild)===e)}(a)?a:OO(a);const l=LO(e);return l.host?uD(l.host,n):uD(e,LO(n).host)}function sU(e){if(!e||!e.parentElement)return document.documentElement;let n=e.parentElement;for(;n?.parentElement&&"none"===ry(n,"transform");)n=n.parentElement;return n||document.documentElement}function oU(e,n){const t="x"===n?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(e[`border${t}Width`])+parseFloat(e[`border${r}Width`])}function aU(e,n,t,r){return Math.max(n[`offset${e}`],n[`scroll${e}`],t[`client${e}`],t[`offset${e}`],t[`scroll${e}`],0)}function lU(e){const n=e.body,t=e.documentElement;return{height:aU("Height",n,t),width:aU("Width",n,t)}}function I2(e){return{...e,right:(e.left||0)+e.width,bottom:(e.top||0)+e.height}}function Is(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function cU(e){const n=e.getBoundingClientRect();if(!(n&&Is(n.top)&&Is(n.left)&&Is(n.bottom)&&Is(n.right)))return n;const t={left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top},r="HTML"===e.nodeName?lU(e.ownerDocument):void 0,i=r?.width||e.clientWidth||Is(n.right)&&Is(t.left)&&n.right-t.left||0,s=r?.height||e.clientHeight||Is(n.bottom)&&Is(t.top)&&n.bottom-t.top||0;let a=e.offsetWidth-i,l=e.offsetHeight-s;if(a||l){const d=ry(e);a-=oU(d,"x"),l-=oU(d,"y"),t.width-=a,t.height-=l}return I2(t)}function FO(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function RO(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}const{overflow:n,overflowX:t,overflowY:r}=ry(e);return/(auto|scroll|overlay)/.test(String(n)+String(r)+String(t))?e:RO(FO(e))}function NO(e,n,t=!1){const r="HTML"===n.nodeName,i=cU(e),s=cU(n),l=(RO(e),ry(n)),d=parseFloat(l.borderTopWidth),m=parseFloat(l.borderLeftWidth);t&&r&&(s.top=Math.max(s.top??0,0),s.left=Math.max(s.left??0,0));const y=I2({top:(i.top??0)-(s.top??0)-d,left:(i.left??0)-(s.left??0)-m,width:i.width,height:i.height});if(y.marginTop=0,y.marginLeft=0,r){const T=parseFloat(l.marginTop),D=parseFloat(l.marginLeft);Is(y.top)&&(y.top-=d-T),Is(y.bottom)&&(y.bottom-=d-T),Is(y.left)&&(y.left-=m-D),Is(y.right)&&(y.right-=m-D),y.marginTop=T,y.marginLeft=D}return y}function uU(e,n="top"){const t="top"===n?"scrollTop":"scrollLeft",r=e.nodeName;return"BODY"===r||"HTML"===r?(e.ownerDocument.scrollingElement||e.ownerDocument.documentElement)[t]:e[t]}function hU(e){const n=e.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===ry(e,"position")||hU(FO(e)))}function BO(e,n,t=0,r,i=!1){let s={top:0,left:0};const a=i?sU(e):uD(e,n);if("viewport"===r)s=function Hpe(e,n=!1){const t=e.ownerDocument.documentElement,r=NO(e,t),i=Math.max(t.clientWidth,window.innerWidth||0),s=Math.max(t.clientHeight,window.innerHeight||0),a=n?0:uU(t),l=n?0:uU(t,"left");return I2({top:a-Number(r?.top)+Number(r?.marginTop),left:l-Number(r?.left)+Number(r?.marginLeft),width:i,height:s})}(a,i);else{let l;"scrollParent"===r?(l=RO(FO(n)),"BODY"===l.nodeName&&(l=e.ownerDocument.documentElement)):l="window"===r?e.ownerDocument.documentElement:r;const d=NO(l,a,i);if(d&&"HTML"===l.nodeName&&!hU(a)){const{height:m,width:y}=lU(e.ownerDocument);Is(s.top)&&Is(d.top)&&Is(d.marginTop)&&(s.top+=d.top-d.marginTop),Is(s.top)&&(s.bottom=Number(m)+Number(d.top)),Is(s.left)&&Is(d.left)&&Is(d.marginLeft)&&(s.left+=d.left-d.marginLeft),Is(s.top)&&(s.right=Number(y)+Number(d.left))}else d&&(s=d)}return Is(s.left)&&(s.left+=t),Is(s.top)&&(s.top+=t),Is(s.right)&&(s.right-=t),Is(s.bottom)&&(s.bottom-=t),s}function $pe({width:e,height:n}){return e*n}function dU(e,n,t,r,i=["top","bottom","right","left"],s="viewport",a=0){if(-1===e.indexOf("auto"))return e;const l=BO(t,r,a,s),d={top:{width:l?.width??0,height:(n?.top??0)-(l?.top??0)},right:{width:(l?.right??0)-(n?.right??0),height:l?.height??0},bottom:{width:l?.width??0,height:(l?.bottom??0)-(n?.bottom??0)},left:{width:(n.left??0)-(l?.left??0),height:l?.height??0}},m=Object.keys(d).map(I=>({position:I,...d[I],area:$pe(d[I])})).sort((I,F)=>F.area-I.area);let y=m.filter(({width:I,height:F})=>I>=t.clientWidth&&F>=t.clientHeight);y=y.filter(({position:I})=>i.some(F=>F===I));const T=y.length>0?y[0].position:m[0].position,D=e.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${qv().isBs5?Zv[T]:T}`),T+(D?`-${D}`:"")}const hD=(e,n=0)=>e?parseFloat(e):n;function fU(e){const t=e.ownerDocument.defaultView?.getComputedStyle(e),r=hD(t?.marginTop)+hD(t?.marginBottom),i=hD(t?.marginLeft)+hD(t?.marginRight);return{width:Number(e.offsetWidth)+i,height:Number(e.offsetHeight)+r}}function pU(e,n,t){return NO(n,t?sU(e):uD(e,n),t)}function zO(e,n,t){const r=t.split(" ")[0],i=fU(e),s={width:i.width,height:i.height},a=-1!==["right","left"].indexOf(r),l=a?"top":"left",d=a?"left":"top",m=a?"height":"width",y=a?"width":"height";return s[l]=(n[l]??0)+n[m]/2-i[m]/2,s[d]=r===d?(n[d]??0)-i[y]:n[function Gpe(e){const n={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,t=>n[t])}(d)]??0,s}function mU(e,n){return!!e.modifiers[n]?.enabled}const qpe={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function dD(e,n){return!!qv().isBs5&&qpe[n].includes(e)}function gU(e,n,t){!e||!n||Object.keys(n).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function jpe(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(Number(e))}(n[r])&&(i="px"),t?t.setStyle(e,r,`${String(n[r])}${i}`):e.style[r]=String(n[r])+i})}function Kpe(e){let n=e.offsets.target;const t=e.instance.target.querySelector(".arrow");if(!t)return e;const r=-1!==["left","right"].indexOf(e.placement.split(" ")[0]),i=r?"height":"width",s=r?"Top":"Left",a=s.toLowerCase(),l=r?"left":"top",d=r?"bottom":"right",m=fU(t)[i],y=e.placement.split(" ")[1];(e.offsets.host[d]??0)-m<(n[a]??0)&&(n[a]-=(n[a]??0)-((e.offsets.host[d]??0)-m)),Number(e.offsets.host[a])+Number(m)>(n[d]??0)&&(n[a]+=Number(e.offsets.host[a])+Number(m)-Number(n[d])),n=I2(n);const T=ry(e.instance.target),D=parseFloat(T[`margin${s}`])||0,I=parseFloat(T[`border${s}Width`])||0;let F;if(y){const B=parseFloat(T.borderRadius)||0,G=Number(D+I+B);F=a===y?Number(e.offsets.host[a])+G:Number(e.offsets.host[a])+Number(e.offsets.host[i]-G)}else F=Number(e.offsets.host[a])+Number(e.offsets.host[i]/2-m/2);let L=F-(n[a]??0)-D-I;return L=Math.max(Math.min(n[i]-(m+5),L),0),e.offsets.arrow={[a]:Math.round(L),[l]:""},e.instance.arrow=t,e}function Jpe(e){if(e.offsets.target=I2(e.offsets.target),!mU(e.options,"flip"))return e.offsets.target={...e.offsets.target,...zO(e.instance.target,e.offsets.host,e.placement)},e;const n=BO(e.instance.target,e.instance.host,0,"viewport",!1);let t=e.placement.split(" ")[0],r=e.placement.split(" ")[1]||"";const l=dU("auto",e.offsets.host,e.instance.target,e.instance.host,e.options.allowedPositions),d=[t,l];return d.forEach((m,y)=>{if(t!==m||d.length===y+1)return;t=e.placement.split(" ")[0];const T="left"===t&&Math.floor(e.offsets.target.right??0)>Math.floor(e.offsets.host.left??0)||"right"===t&&Math.floor(e.offsets.target.left??0)<Math.floor(e.offsets.host.right??0)||"top"===t&&Math.floor(e.offsets.target.bottom??0)>Math.floor(e.offsets.host.top??0)||"bottom"===t&&Math.floor(e.offsets.target.top??0)<Math.floor(e.offsets.host.bottom??0),D=Math.floor(e.offsets.target.left??0)<Math.floor(n.left??0),I=Math.floor(e.offsets.target.right??0)>Math.floor(n.right??0),F=Math.floor(e.offsets.target.top??0)<Math.floor(n.top??0),L=Math.floor(e.offsets.target.bottom??0)>Math.floor(n.bottom??0),B="left"===t&&D||"right"===t&&I||"top"===t&&F||"bottom"===t&&L,G=-1!==["top","bottom"].indexOf(t),Z=G&&"left"===r&&D||G&&"right"===r&&I||!G&&"left"===r&&F||!G&&"right"===r&&L;(T||B||Z)&&((T||B)&&(t=d[y+1]),Z&&(r=function Ype(e){return"right"===e?"left":"left"===e?"right":e}(r)),e.placement=t+(r?` ${r}`:""),e.offsets.target={...e.offsets.target,...zO(e.instance.target,e.offsets.host,e.placement)})}),e}function eme(e){if(!mU(e.options,"preventOverflow"))return e;const n="transform",t=e.instance.target.style,{top:r,left:i,[n]:s}=t;t.top="",t.left="",t[n]="";const a=BO(e.instance.target,e.instance.host,0,e.options.modifiers.preventOverflow?.boundariesElement||"scrollParent",!1);t.top=r,t.left=i,t[n]=s;const d={primary(m){let y=e.offsets.target[m];return(e.offsets.target[m]??0)<(a[m]??0)&&(y=Math.max(e.offsets.target[m]??0,a[m]??0)),{[m]:y}},secondary(m){const y="right"===m,T=y?"left":"top";let I=e.offsets.target[T];return(e.offsets.target[m]??0)>(a[m]??0)&&(I=Math.min(e.offsets.target[T]??0,(a[m]??0)-e.offsets.target[y?"width":"height"])),{[T]:I}}};return["left","right","top","bottom"].forEach(m=>{const y=-1!==["left","top","start"].indexOf(m)?d.primary:d.secondary;e.offsets.target={...e.offsets.target,...y(m)}}),e}function tme(e){const n=e.placement,t=n.split(" ")[0],r=n.split(" ")[1];if(r){const{host:i,target:s}=e.offsets,a=-1!==["bottom","top"].indexOf(t),l=a?"left":"top",d=a?"width":"height",m={start:{[l]:i[l]},end:{[l]:(i[l]??0)+i[d]-s[d]}};e.offsets.target={...s,[l]:l===r?m.start[l]:m.end[l]}}return e}const rme=new class nme{position(n,t){return this.offset(n,t)}offset(n,t){return pU(t,n)}positionElements(n,t,r,i,s){const a=[Jpe,tme,eme,Kpe],d=function Qpe(e,n,t,r){if(!e||!n)return;const i=pU(e,n);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const s=!!t.match(/auto/g);let a=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const l=a.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return l&&(a=l[1]+(l[2]?` ${l[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(a)&&(a="auto"),a=dU(a,i,e,n,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:e,host:n,arrow:void 0},offsets:{target:zO(e,i,a),host:i,arrow:void 0},positionFixed:!1,placement:a,placementAuto:s}}(t,n,cD[r],s);if(d)return a.reduce((m,y)=>y(m),d)}};function ime(e,n,t,r,i,s){const a=rme.positionElements(e,n,t,r,i);if(!a)return;const l=function Wpe(e){return{width:e.offsets.target.width,height:e.offsets.target.height,left:Math.floor(e.offsets.target.left??0),top:Math.round(e.offsets.target.top??0),bottom:Math.round(e.offsets.target.bottom??0),right:Math.floor(e.offsets.target.right??0)}}(a);gU(n,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${l.left}px, ${l.top}px, 0px)`},s),a.instance.arrow&&gU(a.instance.arrow,a.offsets.arrow,s),function Zpe(e,n){const t=e.instance.target;let r=t.className;const i=qv().isBs5?Zv[e.placement]:e.placement;e.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function Xpe(e){return qv().isBs5?dD(e,"end")?"ms-2":dD(e,"start")?"me-2":dD(e,"top")?"mb-2":dD(e,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),n?n.setAttribute(t,"class",r):t.className=r}(a,s)}let Kv=(()=>{class e{constructor(t,r,i){this.update$$=new qi,this.positionElements=new Map,this.isDisabled=!1,ZA(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=Oc(Xv(window,"scroll",{passive:!0}),Xv(window,"resize",{passive:!0}),qn(0,Vpe),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(s=>{ime(fD(s.target),fD(s.element),s.attachment,s.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(fD(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(fD(t))}setOptions(t){this.options=t}}return e.\u0275fac=function(t){return new(t||e)(Jt(ns),Jt(tg),Jt(yv))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function fD(e){return"string"==typeof e?document.querySelector(e):e instanceof _s?e.nativeElement:e??null}class P2{constructor(n,t,r){this.nodes=n,this.viewRef=t,this.componentRef=r}}class sme{constructor(n,t,r,i,s,a,l,d,m){this._viewContainerRef=n,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=s,this._ngZone=a,this._applicationRef=l,this._posService=d,this._document=m,this.onBeforeShow=new rr,this.onShown=new rr,this.onBeforeHide=new rr,this.onHidden=new rr,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(n){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(n),this}to(n){return this.container=n||this.container,this}position(n){return n?(this.attachment=n.attachment||this.attachment,this._elementRef=n.target||this._elementRef,this):this}provide(n){return this._providers.push(n),this}show(n={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(n.content,n.context,n.initialState);const t=na.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,n),this.container instanceof _s&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof this._document<"u"){const r=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(n.id?{id:n.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(n){if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const t=this._componentRef.location.nativeElement;return t.parentNode?.removeChild(t),this._contentRef?.componentRef?.destroy(),this._viewContainerRef&&this._contentRef?.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),this._contentRef?.viewRef?.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(n?{id:n}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(n){this.triggers=n.triggers||this.triggers,this._listenOpts.outsideClick=n.outsideClick,this._listenOpts.outsideEsc=n.outsideEsc,n.target=n.target||this._elementRef?.nativeElement;const t=this._listenOpts.hide=()=>n.hide?n.hide():void this.hide(),r=this._listenOpts.show=s=>{n.show?n.show(s):this.show(s),s()};return this._renderer&&(this._unregisterListenersFn=function wpe(e,n){const t=AO(n.triggers),r=n.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],s=[],a=()=>{s.forEach(l=>i.push(l())),s.length=0};return t.forEach(l=>{const d=l.open===l.close,m=d?n.toggle:n.show;if(!d&&l.close&&n.hide){const y=e.listen(r,l.close,n.hide);s.push(()=>y)}m&&i.push(e.listen(r,l.open,()=>m(a)))}),()=>{i.forEach(l=>l())}}(this._renderer,{target:n.target,triggers:n.triggers,show:r,hide:t,toggle:s=>{this.isShown?t():r(s)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(n,t){return n&&t&&(this._inlineViewRef=n.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const n=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function Cpe(e,n){return n.outsideClick?e.listen("document","click",t=>{n.target&&n.target.contains(t.target)||n.targets&&n.targets.some(r=>r.contains(t.target))||n.hide&&n.hide()}):Function.prototype}(this._renderer,{targets:[n,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function Tpe(e,n){return n.outsideEsc?e.listen("document","keyup.esc",t=>{n.target&&n.target.contains(t.target)||n.targets&&n.targets.some(r=>r.contains(t.target))||n.hide&&n.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{this._posService.position({element:this._componentRef?.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{this._componentRef&&this._posService.calcPosition()}))}_unsubscribePositioning(){this._zoneSubscription&&(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(n,t,r){if(!n)return new P2([]);if(n instanceof nf){if(this._viewContainerRef){const a=this._viewContainerRef.createEmbeddedView(n,t);return a.markForCheck(),new P2([a.rootNodes],a)}const s=n.createEmbeddedView({});return this._applicationRef.attachView(s),new P2([s.rootNodes],s)}if("function"==typeof n){const s=this._componentFactoryResolver.resolveComponentFactory(n),a=na.create({providers:this._providers,parent:this._injector}),l=s.create(a);return Object.assign(l.instance,r),this._applicationRef.attachView(l.hostView),new P2([[l.location.nativeElement]],l.hostView,l)}const i=this._renderer?[this._renderer.createText(`${n}`)]:[];return new P2([i])}}let O2=(()=>{class e{constructor(t,r,i,s,a,l){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=s,this._applicationRef=a,this._document=l}createLoader(t,r,i){return new sme(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}}return e.\u0275fac=function(t){return new(t||e)(Jt(Rh),Jt(ns),Jt(na),Jt(Kv),Jt(C_),Jt(No))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const _U=new PO(IO),ome=_U;function yU(e=0,n,t=ome){let r=-1;return null!=n&&(tr(n)?t=n:r=n),new er(i=>{let s=function ame(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;s<0&&(s=0);let a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const lme=["*"];let VO=(()=>{class e{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),cme=(()=>{class e{constructor(t){Object.assign(this,t)}get _bsVersions(){return qv()}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=Zv[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}}return e.\u0275fac=function(t){return new(t||e)(We(VO))},e.\u0275cmp=bn({type:e,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(t,r){2&t&&(ft("id",r.id),RF("show tooltip in tooltip-"+r.placement+" bs-tooltip-"+r.placement+" "+r.placement+" "+r.containerClass))},ngContentSelectors:lme,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(t,r){1&t&&(yc(),Q(0,"div",0),k(1,"div",1),y_(2),A())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none}.bs3.tooltip.top[_nghost-%COMP%] > .arrow[_ngcontent-%COMP%]{margin-left:-2px}.bs3.tooltip.bottom[_nghost-%COMP%]{margin-top:0}.bs3.bs-tooltip-left[_nghost-%COMP%], .bs3.bs-tooltip-right[_nghost-%COMP%]{margin:0}.bs3.bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs3.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{margin:.3rem 0}"],changeDetection:0}),e})(),ume=0,hme=(()=>{class e{constructor(t,r,i,s,a,l){this._elementRef=s,this._renderer=a,this._positionService=l,this.tooltipId=ume++,this.adaptivePosition=!0,this.tooltipChange=new rr,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new rr,this._tooltip=r.createLoader(this._elementRef,t,this._renderer).provide({provide:VO,useValue:i}),Object.assign(this,i),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}get isOpen(){return this._tooltip.isShown}set isOpen(t){t?this.show():this.hide()}set htmlContent(t){this.tooltip=t}set _placement(t){this.placement=t}set _isOpen(t){this.isOpen=t}get _isOpen(){return this.isOpen}set _enable(t){this.isDisabled=!t}get _enable(){return this.isDisabled}set _appendToBody(t){this.container=t?"body":this.container}get _appendToBody(){return"body"===this.container}set _popupClass(t){}set _tooltipContext(t){}set _tooltipPopupDelay(t){this.delay=t}get _tooltipTrigger(){return this.triggers}set _tooltipTrigger(t){this.triggers=(t||"").toString()}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(t=>{t||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const t=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(cme).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},r=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=yU(this.delay).subscribe(()=>{t(),r()}),this.triggers&&AO(this.triggers).forEach(i=>{i.close&&(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,i.close,()=>{this._delaySubscription?.unsubscribe(),r()}))})):t()}hide(){this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance?.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(We(vc),We(O2),We(VO),We(_s),We(ta),We(Kv))},e.\u0275dir=Un({type:e,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:["tooltipHtml","htmlContent"],_placement:["tooltipPlacement","_placement"],_isOpen:["tooltipIsOpen","_isOpen"],_enable:["tooltipEnable","_enable"],_appendToBody:["tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:["tooltipClass","_popupClass"],_tooltipContext:["tooltipContext","_tooltipContext"],_tooltipPopupDelay:["tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:["tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]}),function gu(e,n,t,r){var a,i=arguments.length,s=i<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,n,t,r);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(s=(i<3?a(s):i>3?a(n,t,s):a(n,t))||s);i>3&&s&&Object.defineProperty(n,t,s)}([kpe(),Tl("design:type",Object)],e.prototype,"tooltip",void 0),e})(),vU=(()=>{class e{static forRoot(){return{ngModule:e,providers:[O2,Kv]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[_w]}),e})();function xU(e){return yi((n,t)=>{te(e).subscribe(ki(t,()=>t.complete(),ka)),!t.closed&&n.subscribe(t)})}function UO(e,n=ha){return e=e??dme,yi((t,r)=>{let i,s=!0;t.subscribe(ki(r,a=>{const l=n(a);(s||!e(i,l))&&(s=!1,i=l,r.next(a))}))})}function dme(e,n){return e===n}function iy(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Gl(e){return"string"==typeof e}function pD(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function Ug(e){return e&&e.getTime&&!isNaN(e.getTime())}function sy(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function oy(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function Ps(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function ml(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function ay(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function bU(e){return void 0===e}function Qr(e){const n=+e;let t=0;return 0!==n&&isFinite(n)&&(t=iy(n)),t}const L2={},wU={date:"day",hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function gl(e,n){const t=e.toLowerCase();let r=e;t in wU&&(r=wU[t]),L2[t]=L2[`${t}s`]=L2[n]=r}function CU(e){return Gl(e)?L2[e]||L2[e.toLowerCase()]:void 0}const Zh=0,$p=1,mf=2,aa=3,Kh=4,Wp=5,ly=6,gme=7,_me=8;function Gp(e,n,t){const r=`${Math.abs(e)}`;return(e>=0?t?"+":"":"-")+Math.pow(10,Math.max(0,n-r.length)).toString().substr(1)+r}const jO={},Jv={},TU=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;function br(e,n,t,r){e&&(Jv[e]=r),n&&(Jv[n[0]]=function(){return Gp(r.apply(null,arguments),n[1],n[2])}),t&&(Jv[t]=function(i,s){return s.locale.ordinal(r.apply(null,arguments),e)})}function vme(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function mD(e,n,t){const r=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(r.getUTCFullYear())&&r.setUTCFullYear(e),r}function gD(e,n=0,t=1,r=0,i=0,s=0,a=0){const l=new Date(e,n,t,r,i,s,a);return e<100&&e>=0&&isFinite(l.getFullYear())&&l.setFullYear(e),l}function ei(e,n=!1){return n?e.getUTCHours():e.getHours()}function Qv(e,n=!1){return n?e.getUTCMinutes():e.getMinutes()}function HO(e,n=!1){return n?e.getUTCSeconds():e.getSeconds()}function Yp(e,n=!1){return n?e.getUTCMilliseconds():e.getMilliseconds()}function gf(e,n=!1){return n?e.getUTCDay():e.getDay()}function cy(e,n=!1){return n?e.getUTCDate():e.getDate()}function ti(e,n=!1){return n?e.getUTCMonth():e.getMonth()}function js(e,n=!1){return n?e.getUTCFullYear():e.getFullYear()}function ex(e,n){return!(!e||!n)&&tx(e,n)&&ti(e)===ti(n)}function tx(e,n){return!(!e||!n)&&js(e)===js(n)}function jg(e,n){return!(!e||!n)&&tx(e,n)&&ex(e,n)&&cy(e)===cy(n)}const EU=/\d/,au=/\d\d/,SU=/\d{3}/,$O=/\d{4}/,_D=/[+-]?\d{6}/,Cs=/\d\d?/,DU=/\d\d\d\d?/,MU=/\d\d\d\d\d\d?/,yD=/\d{1,3}/,WO=/\d{1,4}/,vD=/[+-]?\d{1,6}/,Eme=/\d+/,xD=/[+-]?\d+/,bD=/Z|[+-]\d\d(?::?\d\d)?/gi,Dme=/[+-]?\d+(\.\d{1,3})?/,F2=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,wD={};function Yn(e,n,t){wD[e]=sy(n)?n:function(r,i){return r&&t?t:n}}function Mme(e,n){return ml(wD,e)?wD[e](!1,n):new RegExp(function kme(e){return uy(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(n,t,r,i,s)=>t||r||i||s))}(e))}function uy(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const GO={};function Ts(e,n){const t=Gl(e)?[e]:e;let r=n;if(oy(n)&&(r=function(i,s,a){return s[n]=Qr(i),a}),Ps(t)&&sy(r)){let i;for(i=0;i<t.length;i++)GO[t[i]]=r}}function R2(e,n){Ts(e,function(t,r,i,s){return i._w=i._w||{},n(t,i._w,i,s)})}function Ame(e,n,t){return null!=n&&ml(GO,e)&&GO[e](n,t._a,t,e),t}const Ime={};function _l(e,n){Ime[e]=n}function Di(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function YO(e,n){return n.locale.getFullYear?n.locale.getFullYear(e,n.isUTC).toString():js(e,n.isUTC).toString()}function qO(e){return Qr(e)+(Qr(e)>68?1900:2e3)}function N2(e){return XO(e)?366:365}function XO(e){return e%4==0&&e%100!=0||e%400==0}function CD(e,n){if(isNaN(e)||isNaN(n))return NaN;const t=function fme(e,n){return(e%n+n)%n}(n,12);return 1===t?XO(e+(n-t)/12)?29:28:31-t%7%2}const Rme={year:0,month:0,day:0,hour:0,minute:0,seconds:0};function Sa(e,n){const t=Object.assign({},Rme,n),r=e.getFullYear()+(t.year||0),i=e.getMonth()+(t.month||0);let s=e.getDate()+(t.day||0);return t.month&&!t.day&&(s=Math.min(s,CD(r,i))),gD(r,i,s,e.getHours()+(t.hour||0),e.getMinutes()+(t.minute||0),e.getSeconds()+(t.seconds||0))}function nx(e,n){return oy(n)?n:e}function hy(e,n,t){const r=Math.min(cy(e),CD(js(e),n));return t?e.setUTCMonth(n,r):e.setMonth(n,r),e}function ZO(e,n,t){return t?e.setUTCDate(n):e.setDate(n),e}function qp(e){return new Date(e.getTime())}function Xp(e,n,t){const r=qp(e);switch(n){case"year":hy(r,0,t);case"quarter":case"month":ZO(r,1,t);case"week":case"isoWeek":case"day":case"date":!function zme(e,n,t){t?e.setUTCHours(n):e.setHours(n)}(r,0,t);case"hours":!function Vme(e,n,t){t?e.setUTCMinutes(n):e.setMinutes(n)}(r,0,t);case"minutes":!function Ume(e,n,t){t?e.setUTCSeconds(n):e.setSeconds(n)}(r,0,t);case"seconds":!function jme(e,n,t){t?e.setUTCMilliseconds(n):e.setMilliseconds(n)}(r,0,t)}return"week"===n&&function t0e(e,n,t={}){vf(e,n-c3(e,t.locale,t.isUTC),"day")}(r,0,{isUTC:t}),"isoWeek"===n&&function n0e(e,n,t={}){const r=function e0e(e,n=la()){return Gl(e)?n.weekdaysParse(e)%7||7:oy(e)&&isNaN(e)?null:e}(n,t.locale);j2(e,function Go(e,n){return gf(e,n)}(e)%7?r:r-7)}(r,1),"quarter"===n&&hy(r,3*Math.floor(ti(r,t)/3),t),r}function TD(e,n,t){let r=n;return"date"===r&&(r="day"),function Kge(e,n,t,r){return tj(e,l3(n,t),-1,r)}(vf(Xp(e,r,t),1,"isoWeek"===r?"week":r,t),1,"milliseconds",t)}function KO(e,n){const t=+Xp(e,"day",n),r=+Xp(e,"year",n);return Math.round((t-r)/864e5)+1}function ED(e,n,t){const r=n-t+7;return-(mD(e,0,r).getUTCDay()-n+7)%7+r-1}function rx(e,n,t,r){const i=ED(js(e,r),n,t),s=Math.floor((KO(e,r)-i-1)/7)+1;let a,l;return s<1?(l=js(e,r)-1,a=s+dy(l,n,t)):s>dy(js(e,r),n,t)?(a=s-dy(js(e,r),n,t),l=js(e,r)+1):(l=js(e,r),a=s),{week:a,year:l}}function dy(e,n,t){const r=ED(e,n,t),i=ED(e+1,n,t);return(N2(e)-r+i)/7}const AU=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Wme="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),IU="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Gme="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),PU="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Yme="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),OU={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Zme=F2,Kme=F2;class LU{constructor(n){n&&this.set(n)}set(n){let t;for(t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];this[sy(r)?t:`_${t}`]=r}this._config=n}calendar(n,t,r){const i=this._calendar[n]||this._calendar.sameElse;return sy(i)?i.call(null,t,r):i}longDateFormat(n){const t=this._longDateFormat[n],r=this._longDateFormat[n.toUpperCase()];return t||!r?t:(this._longDateFormat[n]=r.replace(/MMMM|MM|DD|dddd/g,function(i){return i.slice(1)}),this._longDateFormat[n])}get invalidDate(){return this._invalidDate}set invalidDate(n){this._invalidDate=n}ordinal(n,t){return this._ordinal.replace("%d",n.toString(10))}preparse(n,t){return n}getFullYear(n,t=!1){return js(n,t)}postformat(n){return n}relativeTime(n,t,r,i){const s=this._relativeTime[r];return sy(s)?s(n,t,r,i):s.replace(/%d/i,n.toString(10))}pastFuture(n,t){const r=this._relativeTime[n>0?"future":"past"];return sy(r)?r(t):r.replace(/%s/i,t)}months(n,t,r=!1){if(!n)return Ps(this._months)?this._months:this._months.standalone;if(Ps(this._months))return this._months[ti(n,r)];const i=(this._months.isFormat||AU).test(t)?"format":"standalone";return this._months[i][ti(n,r)]}monthsShort(n,t,r=!1){if(!n)return Ps(this._monthsShort)?this._monthsShort:this._monthsShort.standalone;if(Ps(this._monthsShort))return this._monthsShort[ti(n,r)];const i=AU.test(t)?"format":"standalone";return this._monthsShort[i][ti(n,r)]}monthsParse(n,t,r){let i,s,a;if(this._monthsParseExact)return this.handleMonthStrictParse(n,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(i=new Date(Date.UTC(2e3,a)),r&&!this._longMonthsParse[a]){const l=this.months(i,"",!0).replace(".",""),d=this.monthsShort(i,"",!0).replace(".","");this._longMonthsParse[a]=new RegExp(`^${l}$`,"i"),this._shortMonthsParse[a]=new RegExp(`^${d}$`,"i")}if(!r&&!this._monthsParse[a]&&(s=`^${this.months(i,"",!0)}|^${this.monthsShort(i,"",!0)}`,this._monthsParse[a]=new RegExp(s.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[a].test(n)||r&&"MMM"===t&&this._shortMonthsParse[a].test(n)||!r&&this._monthsParse[a].test(n))return a}}monthsRegex(n){return this._monthsParseExact?(ml(this,"_monthsRegex")||this.computeMonthsParse(),n?this._monthsStrictRegex:this._monthsRegex):(ml(this,"_monthsRegex")||(this._monthsRegex=Kme),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}monthsShortRegex(n){return this._monthsParseExact?(ml(this,"_monthsRegex")||this.computeMonthsParse(),n?this._monthsShortStrictRegex:this._monthsShortRegex):(ml(this,"_monthsShortRegex")||(this._monthsShortRegex=Zme),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}week(n,t){return rx(n,this._week.dow,this._week.doy,t).week}firstDayOfWeek(){return this._week.dow}firstDayOfYear(){return this._week.doy}weekdays(n,t,r){if(!n)return Ps(this._weekdays)?this._weekdays:this._weekdays.standalone;if(Ps(this._weekdays))return this._weekdays[gf(n,r)];const i=this._weekdays.isFormat.test(t)?"format":"standalone";return this._weekdays[i][gf(n,r)]}weekdaysMin(n,t,r){return n?this._weekdaysMin[gf(n,r)]:this._weekdaysMin}weekdaysShort(n,t,r){return n?this._weekdaysShort[gf(n,r)]:this._weekdaysShort}weekdaysParse(n,t,r){let i,s;if(this._weekdaysParseExact)return this.handleWeekStrictParse(n,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){const a=j2(new Date(Date.UTC(2e3,1)),i,null,!0);if(r&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp(`^${this.weekdays(a,"",!0).replace(".",".?")}$`,"i"),this._shortWeekdaysParse[i]=new RegExp(`^${this.weekdaysShort(a,"",!0).replace(".",".?")}$`,"i"),this._minWeekdaysParse[i]=new RegExp(`^${this.weekdaysMin(a,"",!0).replace(".",".?")}$`,"i")),this._weekdaysParse[i]||(s=`^${this.weekdays(a,"",!0)}|^${this.weekdaysShort(a,"",!0)}|^${this.weekdaysMin(a,"",!0)}`,this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),!(Ps(this._fullWeekdaysParse)&&Ps(this._shortWeekdaysParse)&&Ps(this._minWeekdaysParse)&&Ps(this._weekdaysParse)))return;if(r&&"dddd"===t&&this._fullWeekdaysParse[i].test(n))return i;if(r&&"ddd"===t&&this._shortWeekdaysParse[i].test(n))return i;if(r&&"dd"===t&&this._minWeekdaysParse[i].test(n))return i;if(!r&&this._weekdaysParse[i].test(n))return i}}weekdaysRegex(n){return this._weekdaysParseExact?(ml(this,"_weekdaysRegex")||this.computeWeekdaysParse(),n?this._weekdaysStrictRegex:this._weekdaysRegex):(ml(this,"_weekdaysRegex")||(this._weekdaysRegex=F2),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}weekdaysShortRegex(n){return this._weekdaysParseExact?(ml(this,"_weekdaysRegex")||this.computeWeekdaysParse(),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ml(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=F2),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}weekdaysMinRegex(n){return this._weekdaysParseExact?(ml(this,"_weekdaysRegex")||this.computeWeekdaysParse(),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ml(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=F2),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}isPM(n){return"p"===n.toLowerCase().charAt(0)}meridiem(n,t,r){return n>11?r?"pm":"PM":r?"am":"AM"}formatLongDate(n){this._longDateFormat=this._longDateFormat?this._longDateFormat:OU;const t=this._longDateFormat[n],r=this._longDateFormat[n.toUpperCase()];return t||!r?t:(this._longDateFormat[n]=r.replace(/MMMM|MM|DD|dddd/g,i=>i.slice(1)),this._longDateFormat[n])}handleMonthStrictParse(n,t,r){const i=n.toLocaleLowerCase();let s,a,l;if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)l=new Date(2e3,s),this._shortMonthsParse[s]=this.monthsShort(l,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(l,"").toLocaleLowerCase();return r?"MMM"===t?(a=this._shortMonthsParse.indexOf(i),-1!==a?a:null):(a=this._longMonthsParse.indexOf(i),-1!==a?a:null):"MMM"===t?(a=this._shortMonthsParse.indexOf(i),-1!==a?a:(a=this._longMonthsParse.indexOf(i),-1!==a?a:null)):(a=this._longMonthsParse.indexOf(i),-1!==a?a:(a=this._shortMonthsParse.indexOf(i),-1!==a?a:null))}handleWeekStrictParse(n,t,r){let i;const s=n.toLocaleLowerCase();if(!this._weekdaysParse){let a;for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a){const l=j2(new Date(Date.UTC(2e3,1)),a,null,!0);this._minWeekdaysParse[a]=this.weekdaysMin(l).toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(l).toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(l,"").toLocaleLowerCase()}}if(Ps(this._weekdaysParse)&&Ps(this._shortWeekdaysParse)&&Ps(this._minWeekdaysParse))return r?"dddd"===t?(i=this._weekdaysParse.indexOf(s),-1!==i?i:null):"ddd"===t?(i=this._shortWeekdaysParse.indexOf(s),-1!==i?i:null):(i=this._minWeekdaysParse.indexOf(s),-1!==i?i:null):"dddd"===t?(i=this._weekdaysParse.indexOf(s),-1!==i||(i=this._shortWeekdaysParse.indexOf(s),-1!==i)?i:(i=this._minWeekdaysParse.indexOf(s),-1!==i?i:null)):"ddd"===t?(i=this._shortWeekdaysParse.indexOf(s),-1!==i||(i=this._weekdaysParse.indexOf(s),-1!==i)?i:(i=this._minWeekdaysParse.indexOf(s),-1!==i?i:null)):(i=this._minWeekdaysParse.indexOf(s),-1!==i||(i=this._weekdaysParse.indexOf(s),-1!==i)?i:(i=this._shortWeekdaysParse.indexOf(s),-1!==i?i:null))}computeMonthsParse(){const n=[],t=[],r=[];let i,s;for(s=0;s<12;s++)i=new Date(2e3,s),n.push(this.monthsShort(i,"")),t.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(fy),t.sort(fy),r.sort(fy),s=0;s<12;s++)n[s]=uy(n[s]),t[s]=uy(t[s]);for(s=0;s<24;s++)r[s]=uy(r[s]);this._monthsRegex=new RegExp(`^(${r.join("|")})`,"i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp(`^(${t.join("|")})`,"i"),this._monthsShortStrictRegex=new RegExp(`^(${n.join("|")})`,"i")}computeWeekdaysParse(){const n=[],t=[],r=[],i=[];let s;for(s=0;s<7;s++){const a=j2(new Date(Date.UTC(2e3,1)),s,null,!0),l=this.weekdaysMin(a),d=this.weekdaysShort(a),m=this.weekdays(a);n.push(l),t.push(d),r.push(m),i.push(l),i.push(d),i.push(m)}for(n.sort(fy),t.sort(fy),r.sort(fy),i.sort(fy),s=0;s<7;s++)t[s]=uy(t[s]),r[s]=uy(r[s]),i[s]=uy(i[s]);this._weekdaysRegex=new RegExp(`^(${i.join("|")})`,"i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp(`^(${r.join("|")})`,"i"),this._weekdaysShortStrictRegex=new RegExp(`^(${t.join("|")})`,"i"),this._weekdaysMinStrictRegex=new RegExp(`^(${n.join("|")})`,"i")}}function fy(e,n){return n.length-e.length}const FU={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:OU,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Wme,monthsShort:IU,week:{dow:0,doy:6},weekdays:Gme,weekdaysMin:Yme,weekdaysShort:PU,meridiemParse:/[ap]\.?m?\.?/i};function Jme(e,n,t){const r=Math.min(e.length,n.length),i=Math.abs(e.length-n.length);let a,s=0;for(a=0;a<r;a++)(t&&e[a]!==n[a]||!t&&Qr(e[a])!==Qr(n[a]))&&s++;return s+i}function SD(e,n){br(null,[e,e.length,!1],null,n)}function RU(e,n){return QO(e,n.locale).toString()}function NU(e){return BU(e).toString()}function QO(e,n=la(),t){return rx(e,n.firstDayOfWeek(),n.firstDayOfYear(),t).year}function BU(e,n){return rx(e,1,4,n).year}function VU(e,n){br(e,null,null,function(t,r){let i=function my(e,n={}){return n._isUTC?n._offset||0:function UU(e){return 15*-Math.round(e.getTimezoneOffset()/15)}(e)}(t,{_isUTC:r.isUTC,_offset:r.offset}),s="+";return i<0&&(i=-i,s="-"),s+Gp(~~(i/60),2)+n+Gp(~~i%60,2)})}const lge=/([\+\-]|\d\d)/gi;const Da={},B2={};let z2;function jU(e){return e&&e.toLowerCase().replace("_","-")}function $U(e){return Da[e]||console.error(`Khronos locale error: please load locale "${e}" before using it`),Da[e]}function t3(e,n){let t;return e&&(bU(n)?t=la(e):Gl(e)&&(t=WU(e,n)),t&&(z2=t)),z2&&z2._abbr}function WU(e,n){if(null===n)return delete Da[e],z2=la("en"),null;if(!n)return;let t=FU;if(n.abbr=e,null!=n.parentLocale){if(null==Da[n.parentLocale])return B2[n.parentLocale]||(B2[n.parentLocale]=[]),B2[n.parentLocale].push({name:e,config:n}),null;t=Da[n.parentLocale]._config}return Da[e]=new LU(function HU(e,n){const t=Object.assign({},e);for(const r in n)ml(n,r)&&(ay(e[r])&&ay(n[r])?(t[r]={},Object.assign(t[r],e[r]),Object.assign(t[r],n[r])):null!=n[r]?t[r]=n[r]:delete t[r]);for(const r in e)ml(e,r)&&!ml(n,r)&&ay(e[r])&&(t[r]=Object.assign({},t[r]));return t}(t,n)),B2[e]&&B2[e].forEach(function(r){WU(r.name,r.config)}),t3(e),Da[e]}function la(e){return function pge(){Da.en||(t3("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal(e){const n=e%10;return e+(1===Qr(e%100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th")}}),function Qme(){br("w",["ww",2,!1],"wo",function(e,n){return function py(e,n=la(),t){return n.week(e,t)}(e,n.locale).toString(10)}),br("W",["WW",2,!1],"Wo",function(e){return function JO(e,n){return rx(e,1,4,n).week}(e).toString(10)}),gl("week","w"),gl("isoWeek","W"),_l("week",5),_l("isoWeek",5),Yn("w",Cs),Yn("ww",Cs,au),Yn("W",Cs),Yn("WW",Cs,au),R2(["w","ww","W","WW"],function(e,n,t,r){return n[r.substr(0,1)]=Qr(e),t})}(),function ege(){br(null,["gg",2,!1],null,function(e,n){return(QO(e,n.locale)%100).toString()}),br(null,["GG",2,!1],null,function(e){return(BU(e)%100).toString()}),SD("gggg",RU),SD("ggggg",RU),SD("GGGG",NU),SD("GGGGG",NU),gl("weekYear","gg"),gl("isoWeekYear","GG"),_l("weekYear",1),_l("isoWeekYear",1),Yn("G",xD),Yn("g",xD),Yn("GG",Cs,au),Yn("gg",Cs,au),Yn("GGGG",WO,$O),Yn("gggg",WO,$O),Yn("GGGGG",vD,_D),Yn("ggggg",vD,_D),R2(["gggg","ggggg","GGGG","GGGGG"],function(e,n,t,r){return n[r.substr(0,2)]=Qr(e),t}),R2(["gg","GG"],function(e,n,t,r){return n[r]=qO(e),t})}(),function Lme(){br("Y",null,null,function(e,n){const t=js(e,n.isUTC);return t<=9999?t.toString(10):`+${t}`}),br(null,["YY",2,!1],null,function(e,n){return(js(e,n.isUTC)%100).toString(10)}),br(null,["YYYY",4,!1],null,YO),br(null,["YYYYY",5,!1],null,YO),br(null,["YYYYYY",6,!0],null,YO),gl("year","y"),_l("year",1),Yn("Y",xD),Yn("YY",Cs,au),Yn("YYYY",WO,$O),Yn("YYYYY",vD,_D),Yn("YYYYYY",vD,_D),Ts(["YYYYY","YYYYYY"],Zh),Ts("YYYY",function(e,n,t){return n[Zh]=2===e.length?qO(e):Qr(e),t}),Ts("YY",function(e,n,t){return n[Zh]=qO(e),t}),Ts("Y",function(e,n,t){return n[Zh]=parseInt(e,10),t})}(),function nge(){br("z",null,null,function(e,n){return n.isUTC?"UTC":""}),br("zz",null,null,function(e,n){return n.isUTC?"Coordinated Universal Time":""})}(),function rge(){br("X",null,null,function(e){return function bme(e){return Math.floor(e.valueOf()/1e3)}(e).toString(10)}),br("x",null,null,function(e){return e.valueOf().toString(10)}),Yn("x",xD),Yn("X",Dme),Ts("X",function(e,n,t){return t._d=new Date(1e3*parseFloat(e)),t}),Ts("x",function(e,n,t){return t._d=new Date(Qr(e)),t})}(),function ige(){br("s",["ss",2,!1],null,function(e,n){return HO(e,n.isUTC).toString(10)}),gl("second","s"),_l("second",15),Yn("s",Cs),Yn("ss",Cs,au),Ts(["s","ss"],Wp)}(),function sge(){br("Q",null,"Qo",function(e,n){return function oge(e,n=!1){return Math.ceil((ti(e,n)+1)/3)}(e,n.isUTC).toString(10)}),gl("quarter","Q"),_l("quarter",7),Yn("Q",EU),Ts("Q",function(e,n,t){return n[$p]=3*(Qr(e)-1),t})}(),function age(){VU("Z",":"),VU("ZZ",""),Yn("Z",bD),Yn("ZZ",bD),Ts(["Z","ZZ"],function(e,n,t){return t._useUTC=!0,t._tzm=function e3(e,n){const t=(n||"").match(e);if(null===t)return null;const i=t[t.length-1].match(lge)||["-","0","0"],s=60*parseInt(i[1],10)+Qr(i[2]);return 0===s?0:"+"===i[0]?s:-s}(bD,e),t})}(),function Fme(){br("M",["MM",2,!1],"Mo",function(e,n){return(ti(e,n.isUTC)+1).toString(10)}),br("MMM",null,null,function(e,n){return n.locale.monthsShort(e,n.format,n.isUTC)}),br("MMMM",null,null,function(e,n){return n.locale.months(e,n.format,n.isUTC)}),gl("month","M"),_l("month",8),Yn("M",Cs),Yn("MM",Cs,au),Yn("MMM",function(e,n){return n.monthsShortRegex(e)}),Yn("MMMM",function(e,n){return n.monthsRegex(e)}),Ts(["M","MM"],function(e,n,t){return n[$p]=Qr(e)-1,t}),Ts(["MMM","MMMM"],function(e,n,t,r){const i=t._locale.monthsParse(e,r,t._strict);return null!=i?n[$p]=i:Di(t).invalidMonth=!!e,t})}(),function uge(){br("m",["mm",2,!1],null,function(e,n){return Qv(e,n.isUTC).toString(10)}),gl("minute","m"),_l("minute",14),Yn("m",Cs),Yn("mm",Cs,au),Ts(["m","mm"],Kh)}(),function hge(){let e;for(br("S",null,null,function(t,r){return(~~(Yp(t,r.isUTC)/100)).toString(10)}),br(null,["SS",2,!1],null,function(t,r){return(~~(Yp(t,r.isUTC)/10)).toString(10)}),br(null,["SSS",3,!1],null,function(t,r){return Yp(t,r.isUTC).toString(10)}),br(null,["SSSS",4,!1],null,function(t,r){return(10*Yp(t,r.isUTC)).toString(10)}),br(null,["SSSSS",5,!1],null,function(t,r){return(100*Yp(t,r.isUTC)).toString(10)}),br(null,["SSSSSS",6,!1],null,function(t,r){return(1e3*Yp(t,r.isUTC)).toString(10)}),br(null,["SSSSSSS",7,!1],null,function(t,r){return(1e4*Yp(t,r.isUTC)).toString(10)}),br(null,["SSSSSSSS",8,!1],null,function(t,r){return(1e5*Yp(t,r.isUTC)).toString(10)}),br(null,["SSSSSSSSS",9,!1],null,function(t,r){return(1e6*Yp(t,r.isUTC)).toString(10)}),gl("millisecond","ms"),_l("millisecond",16),Yn("S",yD,EU),Yn("SS",yD,au),Yn("SSS",yD,SU),e="SSSS";e.length<=9;e+="S")Yn(e,Eme);function n(t,r,i){return r[ly]=Qr(1e3*parseFloat(`0.${t}`)),i}for(e="S";e.length<=9;e+="S")Ts(e,n)}(),function dge(){function e(i,s){return ei(i,s)%12||12}function t(i,s){br(i,null,null,function(a,l){return l.locale.meridiem(ei(a,l.isUTC),Qv(a,l.isUTC),s)})}function r(i,s){return s._meridiemParse}br("H",["HH",2,!1],null,function(i,s){return ei(i,s.isUTC).toString(10)}),br("h",["hh",2,!1],null,function(i,s){return e(i,s.isUTC).toString(10)}),br("k",["kk",2,!1],null,function(i,s){return function n(i,s){return ei(i,s)||24}(i,s.isUTC).toString(10)}),br("hmm",null,null,function(i,s){return`${e(i,s.isUTC)}${Gp(Qv(i,s.isUTC),2)}`}),br("hmmss",null,null,function(i,s){return`${e(i,s.isUTC)}${Gp(Qv(i,s.isUTC),2)}${Gp(HO(i,s.isUTC),2)}`}),br("Hmm",null,null,function(i,s){return`${ei(i,s.isUTC)}${Gp(Qv(i,s.isUTC),2)}`}),br("Hmmss",null,null,function(i,s){return`${ei(i,s.isUTC)}${Gp(Qv(i,s.isUTC),2)}${Gp(HO(i,s.isUTC),2)}`}),t("a",!0),t("A",!1),gl("hour","h"),_l("hour",13),Yn("a",r),Yn("A",r),Yn("H",Cs),Yn("h",Cs),Yn("k",Cs),Yn("HH",Cs,au),Yn("hh",Cs,au),Yn("kk",Cs,au),Yn("hmm",DU),Yn("hmmss",MU),Yn("Hmm",DU),Yn("Hmmss",MU),Ts(["H","HH"],aa),Ts(["k","kk"],function(i,s,a){const l=Qr(i);return s[aa]=24===l?0:l,a}),Ts(["a","A"],function(i,s,a){return a._isPm=a._locale.isPM(i),a._meridiem=i,a}),Ts(["h","hh"],function(i,s,a){return s[aa]=Qr(i),Di(a).bigHour=!0,a}),Ts("hmm",function(i,s,a){const l=i.length-2;return s[aa]=Qr(i.substr(0,l)),s[Kh]=Qr(i.substr(l)),Di(a).bigHour=!0,a}),Ts("hmmss",function(i,s,a){const l=i.length-4,d=i.length-2;return s[aa]=Qr(i.substr(0,l)),s[Kh]=Qr(i.substr(l,2)),s[Wp]=Qr(i.substr(d)),Di(a).bigHour=!0,a}),Ts("Hmm",function(i,s,a){const l=i.length-2;return s[aa]=Qr(i.substr(0,l)),s[Kh]=Qr(i.substr(l)),a}),Ts("Hmmss",function(i,s,a){const l=i.length-4,d=i.length-2;return s[aa]=Qr(i.substr(0,l)),s[Kh]=Qr(i.substr(l,2)),s[Wp]=Qr(i.substr(d)),a})}(),function $me(){br("DDD",["DDDD",3,!1],"DDDo",function(e){return KO(e).toString(10)}),gl("dayOfYear","DDD"),_l("dayOfYear",4),Yn("DDD",yD),Yn("DDDD",SU),Ts(["DDD","DDDD"],function(e,n,t){return t._dayOfYear=Qr(e),t})}(),function Jge(){br("d",null,"do",function(e,n){return gf(e,n.isUTC).toString(10)}),br("dd",null,null,function(e,n){return n.locale.weekdaysMin(e,n.format,n.isUTC)}),br("ddd",null,null,function(e,n){return n.locale.weekdaysShort(e,n.format,n.isUTC)}),br("dddd",null,null,function(e,n){return n.locale.weekdays(e,n.format,n.isUTC)}),br("e",null,null,function(e,n){return c3(e,n.locale,n.isUTC).toString(10)}),br("E",null,null,function(e,n){return function nj(e,n){return gf(e,n)||7}(e,n.isUTC).toString(10)}),gl("day","d"),gl("weekday","e"),gl("isoWeekday","E"),_l("day",11),_l("weekday",11),_l("isoWeekday",11),Yn("d",Cs),Yn("e",Cs),Yn("E",Cs),Yn("dd",function(e,n){return n.weekdaysMinRegex(e)}),Yn("ddd",function(e,n){return n.weekdaysShortRegex(e)}),Yn("dddd",function(e,n){return n.weekdaysRegex(e)}),R2(["dd","ddd","dddd"],function(e,n,t,r){const i=t._locale.weekdaysParse(e,r,t._strict);return null!=i?n.d=i:Di(t).invalidWeekday=!!e,t}),R2(["d","e","E"],function(e,n,t,r){return n[r]=Qr(e),t})}(),function Pme(){br("D",["DD",2,!1],"Do",function(e,n){return cy(e,n.isUTC).toString(10)}),gl("date","D"),_l("date",9),Yn("D",Cs),Yn("DD",Cs,au),Yn("Do",function(e,n){return n._dayOfMonthOrdinalParse||n._ordinalParse}),Ts(["D","DD"],mf),Ts("Do",function(e,n,t){return n[mf]=Qr(e.match(Cs)[0]),t})}())}(),e?function fge(e){let n,t,r=0;for(;r<e.length;){const i=jU(e[r]).split("-");let s=i.length;for(n=jU(e[r+1]),n=n?n.split("-"):null;s>0;){if(t=$U(i.slice(0,s).join("-")),t)return t;if(n&&n.length>=s&&Jme(i,n,!0)>=s-1)break;s--}r++}return null}(Ps(e)?e:[e]):z2}const V2=["year","quarter","month","week","day","hours","minutes","seconds","milliseconds"],mge=V2.reduce((e,n)=>(e[n]=!0,e),{});function GU(e){return e<0?Math.floor(e):Math.ceil(e)}function YU(e){return 4800*e/146097}function n3(e){return 146097*e/4800}let Hg=Math.round;const _f_ss=44,_f_s=45,_f_m=45,_f_h=22,_f_d=26,_f_M=11;function yge(e,n,t,r,i){return i.relativeTime(n||1,!!t,e,r)}class qU{constructor(n,t={}){this._data={},this._locale=la(),this._locale=t&&t._locale||la();const i=n.year||0,s=n.quarter||0,a=n.month||0,l=n.week||0,d=n.day||0,m=n.hours||0,y=n.minutes||0,T=n.seconds||0,D=n.milliseconds||0;return this._isValid=function gge(e){if(Object.keys(e).some(r=>r in mge&&null===e[r]||isNaN(e[r])))return!1;let t=!1;for(let r=0;r<V2.length;++r)if(e[V2[r]]){if(t)return!1;e[V2[r]]!==Qr(e[V2[r]])&&(t=!0)}return!0}(n),this._milliseconds=+D+1e3*T+60*y*1e3+1e3*m*60*60,this._days=+d+7*l,this._months=+a+3*s+12*i,function _ge(e){let n=e._milliseconds,t=e._days,r=e._months;const i=e._data;n>=0&&t>=0&&r>=0||n<=0&&t<=0&&r<=0||(n+=864e5*GU(n3(r)+t),t=0,r=0),i.milliseconds=n%1e3;const s=iy(n/1e3);i.seconds=s%60;const a=iy(s/60);i.minutes=a%60;const l=iy(a/60);i.hours=l%24,t+=iy(l/24);const d=iy(YU(t));r+=d,t-=GU(n3(d));const m=iy(r/12);return r%=12,i.day=t,i.month=r,i.year=m,e}(this)}isValid(){return this._isValid}humanize(n){if(!this.isValid())return this.localeData().invalidDate;const t=this.localeData();let r=function vge(e,n,t){const r=l3(e).abs(),i=Hg(r.as("s")),s=Hg(r.as("m")),a=Hg(r.as("h")),l=Hg(r.as("d")),d=Hg(r.as("M")),m=Hg(r.as("y")),y=i<=_f_ss&&["s",i]||i<_f_s&&["ss",i]||s<=1&&["m"]||s<_f_m&&["mm",s]||a<=1&&["h"]||a<_f_h&&["hh",a]||l<=1&&["d"]||l<_f_d&&["dd",l]||d<=1&&["M"]||d<_f_M&&["MM",d]||m<=1&&["y"]||["yy",m];return yge.apply(null,[y[0],y[1],n,+e>0,t])}(this,!n,t);return n&&(r=t.pastFuture(+this,r)),t.postformat(r)}localeData(){return this._locale}locale(n){return n?(this._locale=la(n)||this._locale,this):this._locale._abbr}abs(){const n=Math.abs,t=this._data;return this._milliseconds=n(this._milliseconds),this._days=n(this._days),this._months=n(this._months),t.milliseconds=n(t.milliseconds),t.seconds=n(t.seconds),t.minutes=n(t.minutes),t.hours=n(t.hours),t.month=n(t.month),t.year=n(t.year),this}as(n){if(!this.isValid())return NaN;let t,r;const i=this._milliseconds,s=CU(n);if("month"===s||"year"===s)return t=this._days+i/864e5,r=this._months+YU(t),"month"===s?r:r/12;switch(t=this._days+Math.round(n3(this._months)),s){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hours":return 24*t+i/36e5;case"minutes":return 1440*t+i/6e4;case"seconds":return 86400*t+i/1e3;case"milliseconds":return Math.floor(864e5*t)+i;default:throw new Error(`Unknown unit ${s}`)}}valueOf(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Qr(this._months/12):NaN}}function r3(e){if(null==e._isValid){const n=Di(e),t=Array.prototype.some.call(n.parsedDateParts,function(i){return null!=i});let r=!isNaN(e._d&&e._d.getTime())&&n.overflow<0&&!n.empty&&!n.invalidMonth&&!n.invalidWeekday&&!n.weekdayMismatch&&!n.nullInput&&!n.invalidFormat&&!n.userInvalidated&&(!n.meridiem||n.meridiem&&t);if(e._strict&&(r=r&&0===n.charsLeftOver&&0===n.unusedTokens.length&&void 0===n.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function MD(e,n){return e._d=new Date(NaN),Object.assign(Di(e),n||{userInvalidated:!0}),e}const wge=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cge=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tge=/Z|[+-]\d\d(?::?\d\d)?/,kD=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/,!0],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/,!0],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/,!0],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/,!0],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/,!0],["YYYYMMDD",/\d{8}/,!0],["GGGG[W]WWE",/\d{4}W\d{3}/,!0],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/,!0]],i3=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ege=/^\/?Date\((\-?\d+)/i,Sge={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},Dge=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function XU(e){if(!Gl(e._i))return e;const n=e._i,t=wge.exec(n)||Cge.exec(n);let r,i,s,a,l,d;if(!t)return e._isValid=!1,e;for(l=0,d=kD.length;l<d;l++)if(kD[l][1].exec(t[1])){i=kD[l][0],r=!1!==kD[l][2];break}if(null==i)return e._isValid=!1,e;if(t[3]){for(l=0,d=i3.length;l<d;l++)if(i3[l][1].exec(t[3])){s=(t[2]||" ")+i3[l][0];break}if(null==s)return e._isValid=!1,e}if(!r&&null!=s)return e._isValid=!1,e;if(t[4]){if(!Tge.exec(t[4]))return e._isValid=!1,e;a="Z"}return e._f=i+(s||"")+(a||""),o3(e)}function kge(e){const n=parseInt(e,10);return n<=49?n+2e3:n}function ZU(e){if(!Gl(e._i))return e;const n=Dge.exec(function Age(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e._i));if(!n)return function bge(e){return e._isValid=!1,e}(e);const t=function Mge(e,n,t,r,i,s){const a=[kge(e),IU.indexOf(n),parseInt(t,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}(n[4],n[3],n[2],n[5],n[6],n[7]);return function Ige(e,n,t){return!e||PU.indexOf(e)===new Date(n[0],n[1],n[2]).getDay()||(Di(t).weekdayMismatch=!0,t._isValid=!1,!1)}(n[1],t,e)&&(e._a=t,e._tzm=function Pge(e,n,t){if(e)return Sge[e];if(n)return 0;{const r=parseInt(t,10),i=r%100;return(r-i)/100*60+i}}(n[8],n[9],n[10]),e._d=mD.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Di(e).rfc2822=!0),e}function Qu(e,n,t,r,i=0){const s=la(t||"en");if(!s)throw new Error(`Locale "${t}" is not defined, please add it with "defineLocale(...)"`);const l=function Lge(e,n,t,r,i=0){if(!Ug(e))return t.invalidDate;const s=KU(n,t);return jO[s]=jO[s]||function yme(e){const n=e.match(TU),t=n.length,r=new Array(t);for(let i=0;i<t;i++)r[i]=Jv[n[i]]?Jv[n[i]]:vme(n[i]);return function(i,s,a,l=0){let d="";for(let m=0;m<t;m++)d+=sy(r[m])?r[m].call(null,i,{format:e,locale:s,isUTC:a,offset:l}):r[m];return d}}(s),jO[s](e,t,r,i)}(e,n||(r?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"),s,r,i);return l&&s.postformat(l)}function KU(e,n){let t=e,r=5;const i=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,s=a=>n.formatLongDate(a)||a;for(i.lastIndex=0;r>=0&&i.test(t);)t=t.replace(i,s),i.lastIndex=0,r-=1;return t}function ix(e,n,t){return e??n??t}function s3(e){const n=[];let t,r,i;if(e._d)return e;const s=function Fge(e){const n=new Date;return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}(e);for(e._w&&null==e._a[mf]&&null==e._a[$p]&&function Rge(e){let n,t,r,i,s,a,l;const d=e._w;if(null!=d.GG||null!=d.W||null!=d.E)i=1,s=4,n=ix(d.GG,e._a[Zh],rx(new Date,1,4).year),t=ix(d.W,1),r=ix(d.E,1),(r<1||r>7)&&(l=!0);else{i=e._locale._week.dow,s=e._locale._week.doy;const m=rx(new Date,i,s);n=ix(d.gg,e._a[Zh],m.year),t=ix(d.w,m.week),null!=d.d?(r=d.d,(r<0||r>6)&&(l=!0)):null!=d.e?(r=d.e+i,(d.e<0||d.e>6)&&(l=!0)):r=i}t<1||t>dy(n,i,s)?Di(e)._overflowWeeks=!0:null!=l?Di(e)._overflowWeekday=!0:(a=function kU(e,n,t,r,i){const l=1+7*(n-1)+(7+t-r)%7+ED(e,r,i);let d,m;return l<=0?(d=e-1,m=N2(d)+l):l>N2(e)?(d=e+1,m=l-N2(e)):(d=e,m=l),{year:d,dayOfYear:m}}(n,t,r,i,s),e._a[Zh]=a.year,e._dayOfYear=a.dayOfYear)}(e),null!=e._dayOfYear&&(i=ix(e._a[Zh],s[Zh]),(e._dayOfYear>N2(i)||0===e._dayOfYear)&&(Di(e)._overflowDayOfYear=!0),r=new Date(Date.UTC(i,0,e._dayOfYear)),e._a[$p]=r.getUTCMonth(),e._a[mf]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=n[t]=s[t];for(;t<7;t++)e._a[t]=n[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[aa]&&0===e._a[Kh]&&0===e._a[Wp]&&0===e._a[ly]&&(e._nextDay=!0,e._a[aa]=0),e._d=(e._useUTC?mD:gD).apply(null,n);const a=e._useUTC?e._d.getUTCDay():e._d.getDay();return null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[aa]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==a&&(Di(e).weekdayMismatch=!0),e}function JU(e){let n;const t=e._a;return t&&-2===Di(e).overflow&&(n=t[$p]<0||t[$p]>11?$p:t[mf]<1||t[mf]>CD(t[Zh],t[$p])?mf:t[aa]<0||t[aa]>24||24===t[aa]&&(0!==t[Kh]||0!==t[Wp]||0!==t[ly])?aa:t[Kh]<0||t[Kh]>59?Kh:t[Wp]<0||t[Wp]>59?Wp:t[ly]<0||t[ly]>999?ly:-1,Di(e)._overflowDayOfYear&&(n<Zh||n>mf)&&(n=mf),Di(e)._overflowWeeks&&-1===n&&(n=gme),Di(e)._overflowWeekday&&-1===n&&(n=_me),Di(e).overflow=n),e}const Nge="ISO_8601",Bge="RFC_2822";function o3(e){if(e._f===Nge)return XU(e);if(e._f===Bge)return ZU(e);if(e._a=[],Di(e).empty=!0,Ps(e._f)||!e._i&&0!==e._i)return e;let n=e._i.toString(),t=0;const r=n.length,i=KU(e._f,e._locale).match(TU)||[];let s,a,l,d;for(s=0;s<i.length;s++)a=i[s],l=(n.match(Mme(a,e._locale))||[])[0],l&&(d=n.substr(0,n.indexOf(l)),d.length>0&&Di(e).unusedInput.push(d),n=n.slice(n.indexOf(l)+l.length),t+=l.length),Jv[a]?(l?Di(e).empty=!1:Di(e).unusedTokens.push(a),Ame(a,l,e)):e._strict&&!l&&Di(e).unusedTokens.push(a);return Di(e).charsLeftOver=r-t,n.length>0&&Di(e).unusedInput.push(n),e._a[aa]<=12&&!0===Di(e).bigHour&&e._a[aa]>0&&(Di(e).bigHour=void 0),Di(e).parsedDateParts=e._a.slice(0),Di(e).meridiem=e._meridiem,e._a[aa]=function zge(e,n,t){let r=n;if(null==t)return r;if(null!=e.meridiemHour)return e.meridiemHour(r,t);if(null==e.isPM)return r;const i=e.isPM(t);return i&&r<12&&(r+=12),!i&&12===r&&(r=0),r}(e._locale,e._a[aa],e._meridiem),s3(e),JU(e)}function jge(e){const n=JU(function Hge(e){let n=e._i;const t=e._f;return e._locale=e._locale||la(e._l),null===n||void 0===t&&""===n?MD(e,{nullInput:!0}):(Gl(n)&&(e._i=n=e._locale.preparse(n,t)),pD(n)?(e._d=qp(n),e):(Ps(t)?function Vge(e){let n,t,r,i,s;if(!e._f||0===e._f.length)return Di(e).invalidFormat=!0,MD(e);for(s=0;s<e._f.length;s++)i=0,n=Object.assign({},e),null!=e._useUTC&&(n._useUTC=e._useUTC),n._f=e._f[s],o3(n),r3(n)&&(i+=Di(n).charsLeftOver,i+=10*Di(n).unusedTokens.length,Di(n).score=i,(null==r||i<r)&&(r=i,t=n));Object.assign(e,t||n)}(e):t?o3(e):function $ge(e){const n=e._i;if(bU(n))e._d=new Date;else if(pD(n))e._d=qp(n);else if(Gl(n))!function Oge(e){if(!Gl(e._i))return e;const n=Ege.exec(e._i);null!==n?e._d=new Date(+n[1]):(XU(e),!1!==e._isValid||(delete e._isValid,ZU(e),!1!==e._isValid||(delete e._isValid,MD(e))))}(e);else if(Ps(n)&&n.length){const t=n.slice(0);e._a=t.map(r=>Gl(r)?parseInt(r,10):r),s3(e)}else if(ay(n))!function Uge(e){if(e._d)return e;const n=e._i;if(ay(n)){const t=function mme(e){const n={};let t,r;for(r in e)ml(e,r)&&(t=CU(r),t&&(n[t]=e[r]));return n}(n);e._a=[t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds].map(r=>Gl(r)?parseInt(r,10):r)}return s3(e)}(e);else{if(!oy(n))return MD(e);e._d=new Date(n)}}(e),r3(e)||(e._d=null),e))}(e));return n._d=new Date(null!=n._d?n._d.getTime():NaN),r3(Object.assign({},n,{_isValid:null}))||(n._d=new Date(NaN)),n}function U2(e,n,t,r,i){return pD(e)?e:function Wge(e,n,t,r,i){const s={};let a=e;return(ay(a)&&function pme(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;let n;for(n in e)if(e.hasOwnProperty(n))return!1;return!0}(a)||Ps(a)&&0===a.length)&&(a=void 0),s._useUTC=s._isUTC=i,s._l=t,s._i=a,s._f=n,s._strict=r,jge(s)}(e,n,t,r,i)._d}function QU(e){return e instanceof Date?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()):null}function a3(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Jh(e,n,t="milliseconds"){return!(!e||!n)&&("milliseconds"===t?e.valueOf()>n.valueOf():n.valueOf()<Xp(e,t).valueOf())}function yf(e,n,t="milliseconds"){return!(!e||!n)&&("milliseconds"===t?e.valueOf()<n.valueOf():TD(e,t).valueOf()<n.valueOf())}function sx(e,n,t="milliseconds"){if(!e||!n)return!1;if("milliseconds"===t)return e.valueOf()===n.valueOf();const r=n.valueOf();return Xp(e,t).valueOf()<=r&&r<=TD(e,t).valueOf()}const Yge=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,qge=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function l3(e,n,t={}){const r=function Xge(e,n){if(null==e)return{};if(function xge(e){return e instanceof qU}(e))return{milliseconds:e._milliseconds,day:e._days,month:e._months};if(oy(e))return n?{[n]:e}:{milliseconds:e};if(Gl(e)){let t=Yge.exec(e);if(t){const r="-"===t[1]?-1:1;return{year:0,day:Qr(t[mf])*r,hours:Qr(t[aa])*r,minutes:Qr(t[Kh])*r,seconds:Qr(t[Wp])*r,milliseconds:Qr(a3(1e3*Qr(t[ly])))*r}}if(t=qge.exec(e),t){const r="-"===t[1]?-1:1;return{year:gy(t[2],r),month:gy(t[3],r),week:gy(t[4],r),day:gy(t[5],r),hours:gy(t[6],r),minutes:gy(t[7],r),seconds:gy(t[8],r)}}}if(ay(e)&&("from"in e||"to"in e)){const t=function Zge(e,n){if(!Ug(e)||!Ug(n))return{milliseconds:0,months:0};let t;const r=function cge(e,n,t={}){if(!t._isUTC)return e;const r=qp(n),i=6e4*(t._offset||0),s=e.valueOf()-r.valueOf()+i;return r.setTime(r.valueOf()+s),r}(n,e,{_offset:e.getTimezoneOffset()});return yf(e,r)?t=ej(e,r):(t=ej(r,e),t.milliseconds=-t.milliseconds,t.months=-t.months),t}(U2(e.from),U2(e.to));return{milliseconds:t.milliseconds,month:t.months}}return e}(e,n);return new qU(r,t)}function gy(e,n){const t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n}function ej(e,n){const t={milliseconds:0,months:0};return t.months=ti(n)-ti(e)+12*(js(n)-js(e)),Jh(vf(qp(e),t.months,"month"),n)&&--t.months,t.milliseconds=+n-+vf(qp(e),t.months,"month"),t}function vf(e,n,t,r){return tj(e,l3(n,t),1,r)}function tj(e,n,t,r){const i=n._milliseconds,s=a3(n._days),a=a3(n._months);return a&&hy(e,ti(e,r)+a*t,r),s&&ZO(e,cy(e,r)+s*t,r),i&&function Hme(e,n){e.setTime(n)}(e,function xme(e){return e.getTime()}(e)+i*t),qp(e)}function j2(e,n,t=la(),r){const i=gf(e,r),s=function Qge(e,n){if(!Gl(e))return e;const t=parseInt(e,10);if(!isNaN(t))return t;const r=n.weekdaysParse(e);return oy(r)?r:null}(n,t);return vf(e,s-i,"day")}function c3(e,n=la(),t){return(gf(e,t)+7-n.firstDayOfWeek())%7}const rj=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},s0e={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},eh=function(e){return function(n,t){const r=rj(n);let i=s0e[e][rj(n)];return 2===r&&(i=i[t?0:1]),i.replace(/%d/i,n.toString())}};"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),eh("s"),eh("s"),eh("m"),eh("m"),eh("h"),eh("h"),eh("d"),eh("d"),eh("M"),eh("M"),eh("y"),eh("y"),"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"gen._feb._mar._abr._mai._jun._jul._ago._set._oct._nov._des.".split("_"),"ene_feb_mar_abr_mai_jun_jul_ago_set_oct_nov_des".split("_"),"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),"diu._dil._dim._dix._dij._div._dis.".split("_"),"dg_dl_dt_dc_dj_dv_ds".split("_");const h3="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),d3="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_");(function(e,n){let t,r=[];for(t=0;t<12;t++)r[t]=new RegExp("^"+e[t]+"$|^"+n[t]+"$","i")})(h3,d3),function(e){let n,t=[];for(n=0;n<12;n++)t[n]=new RegExp("^"+e[n]+"$","i")}(d3),function(e){let n,t=[];for(n=0;n<12;n++)t[n]=new RegExp("^"+e[n]+"$","i")}(h3),"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),"Januar_Februar_Marts_April_Maj_Juni_Juli_August_September_Oktober_November_December".split("_"),"Jan_Feb_Mar_Apr_Maj_Jun_Jul_Aug_Sep_Okt_Nov_Dec".split("_"),"S\xf8ndag_Mandag_Tirsdag_Onsdag_Torsdag_Fredag_L\xf8rdag".split("_"),"S\xf8n_Man_Tir_Ons_Tor_Fre_L\xf8r".split("_"),"S\xf8_Ma_Ti_On_To_Fr_L\xf8".split("_"),"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),"do_lu_ma_mi_ju_vi_s\xe1".split("_"),"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),"P_E_T_K_N_R_L".split("_"),"P_E_T_K_N_R_L".split("_"),"nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"su_ma_ti_ke_to_pe_la".split("_"),"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),"dim._lun._mar._mer._jeu._ven._sam.".split("_"),"di_lu_ma_me_je_ve_sa".split("_"),"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),"xan_feb_mar_abr_mai_xu\xf1_xul_ago_set_out_nov_dec".split("_"),"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),"vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" "),"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),"v_h_k_sze_cs_p_szo".split("_"),"Sije\u010danj_Velja\u010da_O\u017eujak_Travanj_Svibanj_Lipanj_Srpanj_Kolovoz_Rujan_Listopad_Studeni_Prosinac".split("_"),"Sij_Velj_O\u017eu_Tra_Svi_Lip_Srp_Kol_Ruj_Lis_Stu_Pro".split("_"),"Nedjelja_Ponedjeljak_Utorak_Srijeda_\u010cetvrtak_Petak_Subota".split("_"),"Ned_Pon_Uto_Sri_\u010cet_Pet_Sub".split("_"),"Ne_Po_Ut_Sr_\u010ce_Pe_Su".split("_"),"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),"dom_lun_mar_mer_gio_ven_sab".split("_"),"do_lu_ma_me_gi_ve_sa".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_"),"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),"S_P_A_T_K_Pn_\u0160".split("_"),"Janv\u0101ris_Febru\u0101ris_Marts_Apr\u012blis_Maijs_J\u016bnijs_J\u016blijs_Augusts_Septembris_Oktobris_Novembris_Decembris".split("_"),"Jan_Feb_Mar_Apr_Mai_J\u016bn_J\u016bl_Aug_Sep_Okt_Nov_Dec".split("_"),"Sv\u0113tdiena_Pirmdiena_Otrdiena_Tre\u0161diena_Ceturtdiena_Piektdiena_Sestdiena".split("_"),"Sv\u0113td_Pirmd_Otrd_Tre\u0161d_Ceturtd_Piektd_Sestd".split("_"),"Sv_Pi_Ot_Tr_Ce_Pk_Se".split("_"),"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),"zo._ma._di._wo._do._vr._za.".split("_"),"zo_ma_di_wo_do_vr_za".split("_"),"stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),"stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_"),"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),"jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_"),"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"ne_po_ut_st_\u0161t_pi_so".split("_"),"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),"ne_po_to_sr_\u010de_pe_so".split("_"),"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),"E Diel\xeb_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),"Di_He_Ma_Me_En_Pr_Sh".split("_"),"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_");const wj={abbr:"th-be",months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:e=>"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===e,meridiem:(e,n,t)=>e<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07",calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"},preparse(e,n){const t=wj.longDateFormat[n]?wj.longDateFormat[n]:n;return-1!==t.indexOf("YYYY",t.length-4)?e.substr(0,e.length-4)+(parseInt(e.substr(e.length-4),10)-543):e},getFullYear:(e,n=!1)=>543+(n?e.getUTCFullYear():e.getFullYear())};function hx(e){return function(n){return e+"\u043e"+(11===ei(n)?"\u0431":"")+"] LT"}}"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_"),"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),hx("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),hx("[\u0417\u0430\u0432\u0442\u0440\u0430 "),hx("[\u0412\u0447\u043e\u0440\u0430 "),hx("[\u0423] dddd ["),"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"CN_T2_T3_T4_T5_T6_T7".split("_"),"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_");const M0e=new class D0e extends PO{}(class S0e extends IO{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}schedule(n,t=0){return t>0?super.schedule(n,t):(this.delay=t,this.state=n,this.scheduler.flush(this),this)}execute(n,t){return t>0||this.closed?super.execute(n,t):this._execute(n,t)}requestAsyncId(n,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(n,t,r):(n.flush(this),0)}});class Cj extends Va{constructor(n,t,r){super(n),t.pipe(tc(M0e)).pipe(uI((a,l)=>l?r(a,l):a,n)).subscribe(a=>this.next(a))}}class ID extends er{constructor(n,t,r){super(),this._dispatcher=n,this._reducer=t,this.source=r}select(n){return(this.source?.pipe(jn(n))||(new er).pipe(jn(n))).pipe(UO())}lift(n){const t=new ID(this._dispatcher,this._reducer,this);return t.operator=n,t}dispatch(n){this._dispatcher.next(n)}next(n){this._dispatcher.next(n)}error(n){this._dispatcher.error(n)}complete(){}}function k0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0\xa0\xa0"),A())}function A0e(e,n){if(1&e){const t=Gn();k(0,"td")(1,"a",1),rt("click",function(){mn(t);const i=bt();return gn(i.changeMinutes(i.minuteStep))}),Q(2,"span",2),A()()}if(2&e){const t=bt();ce(1),_i("disabled",!t.canIncrementMinutes||!t.isEditable)}}function I0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0"),A())}function P0e(e,n){if(1&e){const t=Gn();k(0,"td")(1,"a",1),rt("click",function(){mn(t);const i=bt();return gn(i.changeSeconds(i.secondsStep))}),Q(2,"span",2),A()()}if(2&e){const t=bt();ce(1),_i("disabled",!t.canIncrementSeconds||!t.isEditable)}}function O0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0\xa0\xa0"),A())}function L0e(e,n){1&e&&Q(0,"td")}function F0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0:\xa0"),A())}function R0e(e,n){if(1&e){const t=Gn();k(0,"td",4)(1,"input",5),rt("wheel",function(i){mn(t);const s=bt();return s.prevDef(i),gn(s.changeMinutes(s.minuteStep*s.wheelSign(i),"wheel"))})("keydown.ArrowUp",function(){mn(t);const i=bt();return gn(i.changeMinutes(i.minuteStep,"key"))})("keydown.ArrowDown",function(){mn(t);const i=bt();return gn(i.changeMinutes(-i.minuteStep,"key"))})("change",function(i){return mn(t),gn(bt().updateMinutes(i.target))}),A()()}if(2&e){const t=bt();_i("has-error",t.invalidMinutes),ce(1),_i("is-invalid",t.invalidMinutes),ze("placeholder",t.minutesPlaceholder)("readonly",t.readonlyInput)("disabled",t.disabled)("value",t.minutes),ft("aria-label",t.labelMinutes)}}function N0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0:\xa0"),A())}function B0e(e,n){if(1&e){const t=Gn();k(0,"td",4)(1,"input",5),rt("wheel",function(i){mn(t);const s=bt();return s.prevDef(i),gn(s.changeSeconds(s.secondsStep*s.wheelSign(i),"wheel"))})("keydown.ArrowUp",function(){mn(t);const i=bt();return gn(i.changeSeconds(i.secondsStep,"key"))})("keydown.ArrowDown",function(){mn(t);const i=bt();return gn(i.changeSeconds(-i.secondsStep,"key"))})("change",function(i){return mn(t),gn(bt().updateSeconds(i.target))}),A()()}if(2&e){const t=bt();_i("has-error",t.invalidSeconds),ce(1),_i("is-invalid",t.invalidSeconds),ze("placeholder",t.secondsPlaceholder)("readonly",t.readonlyInput)("disabled",t.disabled)("value",t.seconds),ft("aria-label",t.labelSeconds)}}function z0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0\xa0\xa0"),A())}function V0e(e,n){if(1&e){const t=Gn();k(0,"td")(1,"button",8),rt("click",function(){return mn(t),gn(bt().toggleMeridian())}),V(2),A()()}if(2&e){const t=bt();ce(1),_i("disabled",!t.isEditable||!t.canToggleMeridian),ze("disabled",!t.isEditable||!t.canToggleMeridian),ce(1),Nl("",t.meridian," ")}}function U0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0\xa0\xa0"),A())}function j0e(e,n){if(1&e){const t=Gn();k(0,"td")(1,"a",1),rt("click",function(){mn(t);const i=bt();return gn(i.changeMinutes(-i.minuteStep))}),Q(2,"span",7),A()()}if(2&e){const t=bt();ce(1),_i("disabled",!t.canDecrementMinutes||!t.isEditable)}}function H0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0"),A())}function $0e(e,n){if(1&e){const t=Gn();k(0,"td")(1,"a",1),rt("click",function(){mn(t);const i=bt();return gn(i.changeSeconds(-i.secondsStep))}),Q(2,"span",7),A()()}if(2&e){const t=bt();ce(1),_i("disabled",!t.canDecrementSeconds||!t.isEditable)}}function W0e(e,n){1&e&&(k(0,"td"),V(1,"\xa0\xa0\xa0"),A())}function G0e(e,n){1&e&&Q(0,"td")}let Zp=(()=>{class e{writeValue(t){return{type:e.WRITE_VALUE,payload:t}}changeHours(t){return{type:e.CHANGE_HOURS,payload:t}}changeMinutes(t){return{type:e.CHANGE_MINUTES,payload:t}}changeSeconds(t){return{type:e.CHANGE_SECONDS,payload:t}}setTime(t){return{type:e.SET_TIME_UNIT,payload:t}}updateControls(t){return{type:e.UPDATE_CONTROLS,payload:t}}}return e.WRITE_VALUE="[timepicker] write value from ng model",e.CHANGE_HOURS="[timepicker] change hours",e.CHANGE_MINUTES="[timepicker] change minutes",e.CHANGE_SECONDS="[timepicker] change seconds",e.SET_TIME_UNIT="[timepicker] set time unit",e.UPDATE_CONTROLS="[timepicker] update controls",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Y0e=10,q0e=24,Tj=12,X0e=60,Z0e=60;function w3(e){return!(!e||e instanceof Date&&isNaN(e.getHours()))&&("string"!=typeof e||w3(new Date(e)))}function C3(e,n){return!(e.min&&n<e.min||e.max&&n>e.max)}function xy(e){return typeof e>"u"?NaN:"number"==typeof e?e:parseInt(e,Y0e)}function Ej(e,n=!1){const t=xy(e);return isNaN(t)||t<0||t>(n?Tj:q0e)?NaN:t}function Sj(e){const n=xy(e);return isNaN(n)||n<0||n>X0e?NaN:n}function Dj(e){const n=xy(e);return isNaN(n)||n<0||n>Z0e?NaN:n}function Mj(e){return"string"==typeof e?new Date(e):e}function ah(e,n){if(!e)return ah(PD(new Date,0,0,0),n);if(!n)return e;let t=e.getHours(),r=e.getMinutes(),i=e.getSeconds();return n.hour&&(t+=xy(n.hour)),n.minute&&(r+=xy(n.minute)),n.seconds&&(i+=xy(n.seconds)),PD(e,t,r,i)}function kj(e,n){let t=Ej(n.hour);const r=Sj(n.minute),i=Dj(n.seconds)||0;return n.isPM&&12!==t&&(t+=Tj),e?isNaN(t)||isNaN(r)?e:PD(e,t,r,i):isNaN(t)||isNaN(r)?e:PD(new Date,t,r,i)}function PD(e,n,t,r){const i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),n,t,r,e.getMilliseconds());return i.setFullYear(e.getFullYear()),i.setMonth(e.getMonth()),i.setDate(e.getDate()),i}function T3(e){const n=e.toString();return n.length>1?n:`0${n}`}function Aj(e,n){return!isNaN(Ej(e,n))}function Ij(e){return!isNaN(Sj(e))}function Pj(e){return!isNaN(Dj(e))}function Oj(e,n="0",t="0",r){return Aj(e,r)&&Ij(n)&&Pj(t)}function OD(e,n){return!(e.readonlyInput||e.disabled||n&&("wheel"===n.source&&!e.mousewheel||"key"===n.source&&!e.arrowkeys))}function Lj(e){const{hourStep:n,minuteStep:t,secondsStep:r,readonlyInput:i,disabled:s,mousewheel:a,arrowkeys:l,showSpinners:d,showMeridian:m,showSeconds:y,meridians:T,min:D,max:I}=e;return{hourStep:n,minuteStep:t,secondsStep:r,readonlyInput:i,disabled:s,mousewheel:a,arrowkeys:l,showSpinners:d,showMeridian:m,showSeconds:y,meridians:T,min:D,max:I}}let Fj=(()=>{class e{constructor(){this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.showMeridian=!0,this.meridians=["AM","PM"],this.readonlyInput=!1,this.disabled=!1,this.allowEmptyTime=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showSeconds=!1,this.showMinutes=!0,this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.ariaLabelHours="hours",this.ariaLabelMinutes="minutes",this.ariaLabelSeconds="seconds"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Rj={value:void 0,config:new Fj,controls:{canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0}};function Nj(e=Rj,n){switch(n.type){case Zp.WRITE_VALUE:return Object.assign({},e,{value:n.payload});case Zp.CHANGE_HOURS:{if(!OD(e.config,n.payload)||!function Q0e(e,n){return!(!e.step||e.step>0&&!n.canIncrementHours||e.step<0&&!n.canDecrementHours)}(n.payload,e.controls))return e;const t=ah(e.value,{hour:n.payload.step});return!e.config.max&&!e.config.min||C3(e.config,t)?Object.assign({},e,{value:t}):e}case Zp.CHANGE_MINUTES:{if(!OD(e.config,n.payload)||!function e_e(e,n){return!(!e.step||e.step>0&&!n.canIncrementMinutes||e.step<0&&!n.canDecrementMinutes)}(n.payload,e.controls))return e;const t=ah(e.value,{minute:n.payload.step});return!e.config.max&&!e.config.min||C3(e.config,t)?Object.assign({},e,{value:t}):e}case Zp.CHANGE_SECONDS:{if(!OD(e.config,n.payload)||!function t_e(e,n){return!(!e.step||e.step>0&&!n.canIncrementSeconds||e.step<0&&!n.canDecrementSeconds)}(n.payload,e.controls))return e;const t=ah(e.value,{seconds:n.payload.step});return!e.config.max&&!e.config.min||C3(e.config,t)?Object.assign({},e,{value:t}):e}case Zp.SET_TIME_UNIT:{if(!OD(e.config))return e;const t=kj(e.value,n.payload);return Object.assign({},e,{value:t})}case Zp.UPDATE_CONTROLS:{const t=function n_e(e,n){const{min:i,max:s,hourStep:a,minuteStep:l,secondsStep:d,showSeconds:m}=n,y={canIncrementHours:!0,canIncrementMinutes:!0,canIncrementSeconds:!0,canDecrementHours:!0,canDecrementMinutes:!0,canDecrementSeconds:!0,canToggleMeridian:!0};if(!e)return y;if(s){const T=ah(e,{hour:a});if(y.canIncrementHours=s>T&&e.getHours()+a<24,!y.canIncrementHours){const D=ah(e,{minute:l});y.canIncrementMinutes=m?s>D:s>=D}if(!y.canIncrementMinutes){const D=ah(e,{seconds:d});y.canIncrementSeconds=s>=D}e.getHours()<12&&(y.canToggleMeridian=ah(e,{hour:12})<s)}if(i){const T=ah(e,{hour:-a});if(y.canDecrementHours=i<T,!y.canDecrementHours){const D=ah(e,{minute:-l});y.canDecrementMinutes=m?i<D:i<=D}if(!y.canDecrementMinutes){const D=ah(e,{seconds:-d});y.canDecrementSeconds=i<=D}e.getHours()>=12&&(y.canToggleMeridian=ah(e,{hour:-12})>i)}return y}(e.value,n.payload),r={value:e.value,config:n.payload,controls:t};return e.config.showMeridian!==r.config.showMeridian&&e.value&&(r.value=new Date(e.value)),Object.assign({},e,r)}default:return e}}let LD=(()=>{class e extends ID{constructor(){const t=new Va({type:"[mini-ngrx] dispatcher init"});super(t,Nj,new Cj(Rj,t,Nj))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const r_e={provide:Jc,useExisting:Rr(()=>E3),multi:!0};let E3=(()=>{class e{constructor(t,r,i,s){this._cd=r,this._store=i,this._timepickerActions=s,this.hourStep=1,this.minuteStep=5,this.secondsStep=10,this.readonlyInput=!1,this.disabled=!1,this.mousewheel=!0,this.arrowkeys=!0,this.showSpinners=!0,this.showMeridian=!0,this.showMinutes=!0,this.showSeconds=!1,this.meridians=["AM","PM"],this.hoursPlaceholder="HH",this.minutesPlaceholder="MM",this.secondsPlaceholder="SS",this.isValid=new rr,this.meridianChange=new rr,this.hours="",this.minutes="",this.seconds="",this.meridian="",this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1,this.labelHours="hours",this.labelMinutes="minutes",this.labelSeconds="seconds",this.canIncrementHours=!0,this.canIncrementMinutes=!0,this.canIncrementSeconds=!0,this.canDecrementHours=!0,this.canDecrementMinutes=!0,this.canDecrementSeconds=!0,this.canToggleMeridian=!0,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.config=t,Object.assign(this,this.config),this.timepickerSub=i.select(a=>a.value).subscribe(a=>{this._renderTime(a),this.onChange(a),this._store.dispatch(this._timepickerActions.updateControls(Lj(this)))}),i.select(a=>a.controls).subscribe(a=>{const l=Oj(this.hours,this.minutes,this.seconds,this.isPM()),d=this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||l;this.isValid.emit(d),Object.assign(this,a),r.markForCheck()})}get isSpinnersVisible(){return this.showSpinners&&!this.readonlyInput}get isEditable(){return!(this.readonlyInput||this.disabled)}resetValidation(){this.invalidHours=!1,this.invalidMinutes=!1,this.invalidSeconds=!1}isPM(){return this.showMeridian&&this.meridian===this.meridians[1]}prevDef(t){t.preventDefault()}wheelSign(t){return-1*Math.sign(t.deltaY||0)}ngOnChanges(){this._store.dispatch(this._timepickerActions.updateControls(Lj(this)))}changeHours(t,r=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeHours({step:t,source:r}))}changeMinutes(t,r=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeMinutes({step:t,source:r}))}changeSeconds(t,r=""){this.resetValidation(),this._store.dispatch(this._timepickerActions.changeSeconds({step:t,source:r}))}updateHours(t){this.resetValidation(),this.hours=t.value;const r=Aj(this.hours,this.isPM())&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||r))return this.invalidHours=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateMinutes(t){this.resetValidation(),this.minutes=t.value;const r=Ij(this.minutes)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||r))return this.invalidMinutes=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}updateSeconds(t){this.resetValidation(),this.seconds=t.value;const r=Pj(this.seconds)&&this.isValidLimit();if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||r))return this.invalidSeconds=!0,this.isValid.emit(!1),void this.onChange(null);this._updateTime()}isValidLimit(){return function K0e(e,n,t){const r=kj(new Date,e);return!(!r||n&&r>n||t&&r<t)}({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()},this.max,this.min)}isOneOfDatesIsEmpty(){return function J0e(e,n,t){return 0===e.length||0===n.length||0===t.length}(this.hours,this.minutes,this.seconds)}_updateTime(){const i=Oj(this.hours,this.showMinutes?this.minutes:void 0,this.showSeconds?this.seconds:void 0,this.isPM());if(!(this.config.allowEmptyTime&&this.isOneOfDatesIsEmpty()||i))return this.isValid.emit(!1),void this.onChange(null);this._store.dispatch(this._timepickerActions.setTime({hour:this.hours,minute:this.minutes,seconds:this.seconds,isPM:this.isPM()}))}toggleMeridian(){this.showMeridian&&this.isEditable&&this._store.dispatch(this._timepickerActions.changeHours({step:12,source:""}))}writeValue(t){w3(t)?(this.resetValidation(),this._store.dispatch(this._timepickerActions.writeValue(Mj(t)))):null==t&&this._store.dispatch(this._timepickerActions.writeValue())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._cd.markForCheck()}ngOnDestroy(){this.timepickerSub?.unsubscribe()}_renderTime(t){if(!t||!w3(t))return this.hours="",this.minutes="",this.seconds="",this.meridian=this.meridians[0],void this.meridianChange.emit(this.meridian);const r=Mj(t);if(!r)return;let s=r.getHours();this.showMeridian&&(this.meridian=this.meridians[s>=12?1:0],this.meridianChange.emit(this.meridian),s%=12,0===s&&(s=12)),this.hours=T3(s),this.minutes=T3(r.getMinutes()),this.seconds=T3(r.getUTCSeconds())}}return e.\u0275fac=function(t){return new(t||e)(We(Fj),We(T_),We(LD),We(Zp))},e.\u0275cmp=bn({type:e,selectors:[["timepicker"]],inputs:{hourStep:"hourStep",minuteStep:"minuteStep",secondsStep:"secondsStep",readonlyInput:"readonlyInput",disabled:"disabled",mousewheel:"mousewheel",arrowkeys:"arrowkeys",showSpinners:"showSpinners",showMeridian:"showMeridian",showMinutes:"showMinutes",showSeconds:"showSeconds",meridians:"meridians",min:"min",max:"max",hoursPlaceholder:"hoursPlaceholder",minutesPlaceholder:"minutesPlaceholder",secondsPlaceholder:"secondsPlaceholder"},outputs:{isValid:"isValid",meridianChange:"meridianChange"},features:[Ui([r_e,LD]),ho],decls:31,vars:33,consts:[[1,"text-center",3,"hidden"],["href","javascript:void(0);",1,"btn","btn-link",3,"click"],[1,"bs-chevron","bs-chevron-up"],[4,"ngIf"],[1,"form-group","mb-3"],["type","text","maxlength","2",1,"form-control","text-center","bs-timepicker-field",3,"placeholder","readonly","disabled","value","wheel","keydown.ArrowUp","keydown.ArrowDown","change"],["class","form-group mb-3",3,"has-error",4,"ngIf"],[1,"bs-chevron","bs-chevron-down"],["type","button",1,"btn","btn-default","text-center",3,"disabled","click"]],template:function(t,r){1&t&&(k(0,"table")(1,"tbody")(2,"tr",0)(3,"td")(4,"a",1),rt("click",function(){return r.changeHours(r.hourStep)}),Q(5,"span",2),A()(),Rt(6,k0e,2,0,"td",3),Rt(7,A0e,3,2,"td",3),Rt(8,I0e,2,0,"td",3),Rt(9,P0e,3,2,"td",3),Rt(10,O0e,2,0,"td",3),Rt(11,L0e,1,0,"td",3),A(),k(12,"tr")(13,"td",4)(14,"input",5),rt("wheel",function(s){return r.prevDef(s),r.changeHours(r.hourStep*r.wheelSign(s),"wheel")})("keydown.ArrowUp",function(){return r.changeHours(r.hourStep,"key")})("keydown.ArrowDown",function(){return r.changeHours(-r.hourStep,"key")})("change",function(s){return r.updateHours(s.target)}),A()(),Rt(15,F0e,2,0,"td",3),Rt(16,R0e,2,9,"td",6),Rt(17,N0e,2,0,"td",3),Rt(18,B0e,2,9,"td",6),Rt(19,z0e,2,0,"td",3),Rt(20,V0e,3,4,"td",3),A(),k(21,"tr",0)(22,"td")(23,"a",1),rt("click",function(){return r.changeHours(-r.hourStep)}),Q(24,"span",7),A()(),Rt(25,U0e,2,0,"td",3),Rt(26,j0e,3,2,"td",3),Rt(27,H0e,2,0,"td",3),Rt(28,$0e,3,2,"td",3),Rt(29,W0e,2,0,"td",3),Rt(30,G0e,1,0,"td",3),A()()()),2&t&&(ce(2),ze("hidden",!r.showSpinners),ce(2),_i("disabled",!r.canIncrementHours||!r.isEditable),ce(2),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showMeridian),ce(1),ze("ngIf",r.showMeridian),ce(2),_i("has-error",r.invalidHours),ce(1),_i("is-invalid",r.invalidHours),ze("placeholder",r.hoursPlaceholder)("readonly",r.readonlyInput)("disabled",r.disabled)("value",r.hours),ft("aria-label",r.labelHours),ce(1),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showMeridian),ce(1),ze("ngIf",r.showMeridian),ce(1),ze("hidden",!r.showSpinners),ce(2),_i("disabled",!r.canDecrementHours||!r.isEditable),ce(2),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showMinutes),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showSeconds),ce(1),ze("ngIf",r.showMeridian),ce(1),ze("ngIf",r.showMeridian))},dependencies:[Hh],styles:[".bs-chevron{border-style:solid;display:block;width:9px;height:9px;position:relative;border-width:3px 0px 0 3px}.bs-chevron-up{transform:rotate(45deg);top:2px}.bs-chevron-down{transform:rotate(-135deg);top:-2px}.bs-timepicker-field{width:65px;padding:.375rem .55rem}\n"],encapsulation:2,changeDetection:0}),e})(),i_e=(()=>{class e{static forRoot(){return{ngModule:e,providers:[Zp,LD]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({providers:[LD],imports:[_w]}),e})();class Bj{}class s_e{}const Kp="*";function S3(e,n=null){return{type:4,styles:n,timings:e}}function zj(e,n=null){return{type:2,steps:e,options:n}}function dx(e){return{type:6,styles:e,offset:null}}function Vj(e,n,t){return{type:0,name:e,styles:n,options:t}}function D3(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function Uj(e){Promise.resolve().then(e)}class $2{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Uj(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jj{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,r=0,i=0;const s=this.players.length;0==s?Uj(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++r==s&&this._onDestroy()}),a.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const M3="!";function a_e(e,n){if(1&e){const t=Gn();k(0,"button",2),rt("click",function(){const s=mn(t).$implicit;return gn(bt().selectFromRanges(s))}),V(1),A()}if(2&e){const t=n.$implicit,r=bt();_i("selected",t.value===r.selectedRange),ce(1),Nl(" ",t.label," ")}}function l_e(e,n){1&e&&Q(0,"bs-current-date",4)}function c_e(e,n){1&e&&Q(0,"bs-timepicker")}const u_e=[[["bs-datepicker-navigation-view"]],"*"],h_e=["bs-datepicker-navigation-view","*"],d_e=["bsDatepickerDayDecorator",""];function f_e(e,n){if(1&e){const t=Gn();Li(0),V(1," \u200b "),k(2,"button",2),rt("click",function(){return mn(t),gn(bt().view("month"))}),k(3,"span"),V(4),A()(),As()}if(2&e){const t=bt();ce(2),ze("disabled",t.isDisabled),ce(2),$t(t.calendar.monthTitle)}}function p_e(e,n){1&e&&Q(0,"th")}function m_e(e,n){if(1&e&&(k(0,"th",5),V(1),A()),2&e){const t=n.index,r=bt();ce(1),Nl("",r.calendar.weekdays[t]," ")}}function g_e(e,n){if(1&e){const t=Gn();k(0,"span",11),rt("click",function(){mn(t);const i=bt(2).$implicit;return gn(bt().selectWeek(i))}),V(1),A()}if(2&e){const t=bt(2).index,r=bt();ce(1),$t(r.calendar.weekNumbers[t])}}function __e(e,n){if(1&e){const t=Gn();k(0,"span",12),rt("click",function(){mn(t);const i=bt(2).$implicit;return gn(bt().selectWeek(i))})("mouseenter",function(){mn(t);const i=bt(2).$implicit;return gn(bt().weekHoverHandler(i,!0))})("mouseleave",function(){mn(t);const i=bt(2).$implicit;return gn(bt().weekHoverHandler(i,!1))}),V(1),A()}if(2&e){const t=bt(2).index,r=bt();ce(1),$t(r.calendar.weekNumbers[t])}}function y_e(e,n){if(1&e&&(k(0,"td",8),Rt(1,g_e,2,1,"span",9),Rt(2,__e,2,1,"span",10),A()),2&e){const t=bt(2);_i("active-week",t.isWeekHovered),ce(1),ze("ngIf",t.isiOS),ce(1),ze("ngIf",!t.isiOS)}}function v_e(e,n){if(1&e){const t=Gn();k(0,"span",17),rt("click",function(){mn(t);const i=bt().$implicit;return gn(bt(2).selectDay(i))})("mouseenter",function(){mn(t);const i=bt().$implicit;return gn(bt(2).hoverDay(i,!0))})("mouseleave",function(){mn(t);const i=bt().$implicit;return gn(bt(2).hoverDay(i,!1))}),V(1),A()}if(2&e){const t=bt().$implicit;Kr("tooltip",t.tooltipText),ze("day",t),ce(1),Nl("",t.label," 3")}}function x_e(e,n){if(1&e){const t=Gn();k(0,"span",18),rt("click",function(){mn(t);const i=bt().$implicit;return gn(bt(2).selectDay(i))})("mouseenter",function(){mn(t);const i=bt().$implicit;return gn(bt(2).hoverDay(i,!0))})("mouseleave",function(){mn(t);const i=bt().$implicit;return gn(bt(2).hoverDay(i,!1))}),V(1),A()}if(2&e){const t=bt().$implicit;ze("day",t),ce(1),Nl("",t.label," 2")}}function b_e(e,n){if(1&e){const t=Gn();k(0,"span",19),rt("click",function(){mn(t);const i=bt().$implicit;return gn(bt(2).selectDay(i))}),V(1),A()}if(2&e){const t=bt().$implicit;ze("day",t),ce(1),Nl("",t.label," 1")}}function w_e(e,n){if(1&e&&(k(0,"td",13),Rt(1,v_e,2,3,"span",14),Rt(2,x_e,2,2,"span",15),Rt(3,b_e,2,2,"span",16),A()),2&e){const t=bt(2);ce(1),ze("ngIf",!t.isiOS&&t.isShowTooltip),ce(1),ze("ngIf",!t.isiOS&&!t.isShowTooltip),ce(1),ze("ngIf",t.isiOS)}}function C_e(e,n){if(1&e&&(k(0,"tr"),Rt(1,y_e,3,4,"td",6),Rt(2,w_e,4,3,"td",7),A()),2&e){const t=n.$implicit,r=bt();ce(1),ze("ngIf",r.options&&r.options.showWeekNumbers),ce(1),ze("ngForOf",t.days)}}function T_e(e,n){if(1&e){const t=Gn();k(0,"td",4),rt("click",function(){const s=mn(t).$implicit;return gn(bt(2).viewMonth(s))})("mouseenter",function(){const s=mn(t).$implicit;return gn(bt(2).hoverMonth(s,!0))})("mouseleave",function(){const s=mn(t).$implicit;return gn(bt(2).hoverMonth(s,!1))}),k(1,"span"),V(2),A()()}if(2&e){const t=n.$implicit;_i("disabled",t.isDisabled)("is-highlighted",t.isHovered),ce(1),_i("selected",t.isSelected),ce(1),$t(t.label)}}function E_e(e,n){if(1&e&&(k(0,"tr"),Rt(1,T_e,3,7,"td",3),A()),2&e){const t=n.$implicit;ce(1),ze("ngForOf",t)}}function S_e(e,n){if(1&e){const t=Gn();k(0,"td",4),rt("click",function(){const s=mn(t).$implicit;return gn(bt(2).viewYear(s))})("mouseenter",function(){const s=mn(t).$implicit;return gn(bt(2).hoverYear(s,!0))})("mouseleave",function(){const s=mn(t).$implicit;return gn(bt(2).hoverYear(s,!1))}),k(1,"span"),V(2),A()()}if(2&e){const t=n.$implicit;_i("disabled",t.isDisabled)("is-highlighted",t.isHovered),ce(1),_i("selected",t.isSelected),ce(1),$t(t.label)}}function D_e(e,n){if(1&e&&(k(0,"tr"),Rt(1,S_e,3,7,"td",3),A()),2&e){const t=n.$implicit;ce(1),ze("ngForOf",t)}}const Hj=["startTP"];function M_e(e,n){if(1&e){const t=Gn();k(0,"bs-days-calendar-view",11),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).dayHoverHandler(i))})("onHoverWeek",function(i){return mn(t),gn(bt(3).weekHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).daySelectHandler(i))}),Ji(1,"async"),A()}if(2&e){const t=n.$implicit,r=bt(3);_i("bs-datepicker-multiple",r.multipleCalendars),ze("calendar",t)("isDisabled",r.isDatePickerDisabled)("options",Zc(1,5,r.options$))}}function k_e(e,n){1&e&&Q(0,"timepicker",13,16),2&e&&ze("disabled",bt(4).isDatePickerDisabled)}function A_e(e,n){if(1&e&&(k(0,"div",12),Q(1,"timepicker",13,14),Rt(3,k_e,2,1,"timepicker",15),A()),2&e){const t=bt(3);ce(1),ze("disabled",t.isDatePickerDisabled),ce(2),ze("ngIf",t.isRangePicker)}}function I_e(e,n){if(1&e&&(Li(0),k(1,"div",8),Rt(2,M_e,2,7,"bs-days-calendar-view",9),Ji(3,"async"),A(),Rt(4,A_e,4,2,"div",10),As()),2&e){const t=bt(2);ce(2),ze("ngForOf",Zc(3,2,t.daysCalendar$)),ce(2),ze("ngIf",t.withTimepicker)}}function P_e(e,n){if(1&e){const t=Gn();k(0,"bs-month-calendar-view",18),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).monthHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).monthSelectHandler(i))}),A()}if(2&e){const t=n.$implicit;_i("bs-datepicker-multiple",bt(3).multipleCalendars),ze("calendar",t)}}function O_e(e,n){if(1&e&&(k(0,"div",8),Rt(1,P_e,1,3,"bs-month-calendar-view",17),Ji(2,"async"),A()),2&e){const t=bt(2);ce(1),ze("ngForOf",Zc(2,1,t.monthsCalendar))}}function L_e(e,n){if(1&e){const t=Gn();k(0,"bs-years-calendar-view",18),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).yearHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).yearSelectHandler(i))}),A()}if(2&e){const t=n.$implicit;_i("bs-datepicker-multiple",bt(3).multipleCalendars),ze("calendar",t)}}function F_e(e,n){if(1&e&&(k(0,"div",8),Rt(1,L_e,1,3,"bs-years-calendar-view",17),Ji(2,"async"),A()),2&e){const t=bt(2);ce(1),ze("ngForOf",Zc(2,1,t.yearsCalendar))}}function R_e(e,n){1&e&&(k(0,"div",19)(1,"button",20),V(2,"Apply"),A(),k(3,"button",21),V(4,"Cancel"),A()())}function N_e(e,n){if(1&e){const t=Gn();k(0,"div",24)(1,"button",25),rt("click",function(){return mn(t),gn(bt(3).setToday())}),V(2),A()()}if(2&e){const t=bt(3);_i("today-left","left"===t.todayPos)("today-right","right"===t.todayPos)("today-center","center"===t.todayPos),ce(2),$t(t.todayBtnLbl)}}function B_e(e,n){if(1&e){const t=Gn();k(0,"div",26)(1,"button",25),rt("click",function(){return mn(t),gn(bt(3).clearDate())}),V(2),A()()}if(2&e){const t=bt(3);_i("clear-left","left"===t.clearPos)("clear-right","right"===t.clearPos)("clear-center","center"===t.clearPos),ce(2),$t(t.clearBtnLbl)}}function z_e(e,n){if(1&e&&(k(0,"div",19),Rt(1,N_e,3,7,"div",22),Rt(2,B_e,3,7,"div",23),A()),2&e){const t=bt(2);ce(1),ze("ngIf",t.showTodayBtn),ce(1),ze("ngIf",t.showClearBtn)}}function V_e(e,n){if(1&e){const t=Gn();k(0,"div",27)(1,"bs-custom-date-view",28),rt("onSelect",function(i){return mn(t),gn(bt(2).setRangeOnCalendar(i))}),A()()}if(2&e){const t=bt(2);ce(1),ze("selectedRange",t.chosenRange)("ranges",t.customRanges)("customRangeLabel",t.customRangeBtnLbl)}}function U_e(e,n){if(1&e){const t=Gn();k(0,"div",1)(1,"div",2),rt("@datepickerAnimation.done",function(){return mn(t),gn(bt().positionServiceEnable())}),k(2,"div",3),Ji(3,"async"),Rt(4,I_e,5,4,"ng-container",4),Rt(5,O_e,3,3,"div",5),Rt(6,F_e,3,3,"div",5),A(),Rt(7,R_e,5,0,"div",6),Rt(8,z_e,3,2,"div",6),A(),Rt(9,V_e,2,3,"div",7),A()}if(2&e){const t=bt();ze("ngClass",t.containerClass),ce(1),ze("@datepickerAnimation",t.animationState),ce(1),ze("ngSwitch",Zc(3,9,t.viewMode)),ce(2),ze("ngSwitchCase","day"),ce(1),ze("ngSwitchCase","month"),ce(1),ze("ngSwitchCase","year"),ce(1),ze("ngIf",!1),ce(1),ze("ngIf",t.showTodayBtn||t.showClearBtn),ce(1),ze("ngIf",t.customRanges&&t.customRanges.length>0)}}const tye=["endTP"];function nye(e,n){if(1&e){const t=Gn();k(0,"bs-days-calendar-view",11),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).dayHoverHandler(i))})("onHoverWeek",function(i){return mn(t),gn(bt(3).weekHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).daySelectHandler(i))}),Ji(1,"async"),A()}if(2&e){const t=n.$implicit,r=bt(3);_i("bs-datepicker-multiple",r.multipleCalendars),ze("calendar",t)("isDisabled",r.isDatePickerDisabled)("options",Zc(1,5,r.options$))}}function rye(e,n){1&e&&Q(0,"timepicker",13,16),2&e&&ze("disabled",bt(4).isDatePickerDisabled)}function iye(e,n){if(1&e&&(k(0,"div",12),Q(1,"timepicker",13,14),Rt(3,rye,2,1,"timepicker",15),A()),2&e){const t=bt(3);ce(1),ze("disabled",t.isDatePickerDisabled),ce(2),ze("ngIf",t.isRangePicker)}}function sye(e,n){if(1&e&&(Li(0),k(1,"div",8),Rt(2,nye,2,7,"bs-days-calendar-view",9),Ji(3,"async"),A(),Rt(4,iye,4,2,"div",10),As()),2&e){const t=bt(2);ce(2),ze("ngForOf",Zc(3,2,t.daysCalendar$)),ce(2),ze("ngIf",t.withTimepicker)}}function oye(e,n){if(1&e){const t=Gn();k(0,"bs-month-calendar-view",18),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).monthHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).monthSelectHandler(i))}),A()}if(2&e){const t=n.$implicit;_i("bs-datepicker-multiple",bt(3).multipleCalendars),ze("calendar",t)}}function aye(e,n){if(1&e&&(k(0,"div",8),Rt(1,oye,1,3,"bs-month-calendar-view",17),Ji(2,"async"),A()),2&e){const t=bt(2);ce(1),ze("ngForOf",Zc(2,1,t.monthsCalendar))}}function lye(e,n){if(1&e){const t=Gn();k(0,"bs-years-calendar-view",18),rt("onNavigate",function(i){return mn(t),gn(bt(3).navigateTo(i))})("onViewMode",function(i){return mn(t),gn(bt(3).setViewMode(i))})("onHover",function(i){return mn(t),gn(bt(3).yearHoverHandler(i))})("onSelect",function(i){return mn(t),gn(bt(3).yearSelectHandler(i))}),A()}if(2&e){const t=n.$implicit;_i("bs-datepicker-multiple",bt(3).multipleCalendars),ze("calendar",t)}}function cye(e,n){if(1&e&&(k(0,"div",8),Rt(1,lye,1,3,"bs-years-calendar-view",17),Ji(2,"async"),A()),2&e){const t=bt(2);ce(1),ze("ngForOf",Zc(2,1,t.yearsCalendar))}}function uye(e,n){1&e&&(k(0,"div",19)(1,"button",20),V(2,"Apply"),A(),k(3,"button",21),V(4,"Cancel"),A()())}function hye(e,n){if(1&e){const t=Gn();k(0,"div",24)(1,"button",25),rt("click",function(){return mn(t),gn(bt(3).setToday())}),V(2),A()()}if(2&e){const t=bt(3);_i("today-left","left"===t.todayPos)("today-right","right"===t.todayPos)("today-center","center"===t.todayPos),ce(2),$t(t.todayBtnLbl)}}function dye(e,n){if(1&e){const t=Gn();k(0,"div",26)(1,"button",25),rt("click",function(){return mn(t),gn(bt(3).clearDate())}),V(2),A()()}if(2&e){const t=bt(3);_i("clear-left","left"===t.clearPos)("clear-right","right"===t.clearPos)("clear-center","center"===t.clearPos),ce(2),$t(t.clearBtnLbl)}}function fye(e,n){if(1&e&&(k(0,"div",19),Rt(1,hye,3,7,"div",22),Rt(2,dye,3,7,"div",23),A()),2&e){const t=bt(2);ce(1),ze("ngIf",t.showTodayBtn),ce(1),ze("ngIf",t.showClearBtn)}}function pye(e,n){if(1&e){const t=Gn();k(0,"div",27)(1,"bs-custom-date-view",28),rt("onSelect",function(i){return mn(t),gn(bt(2).setRangeOnCalendar(i))}),A()()}if(2&e){const t=bt(2);ce(1),ze("selectedRange",t.chosenRange)("ranges",t.customRanges)("customRangeLabel",t.customRangeBtnLbl)}}function mye(e,n){if(1&e){const t=Gn();k(0,"div",1)(1,"div",2),rt("@datepickerAnimation.done",function(){return mn(t),gn(bt().positionServiceEnable())}),k(2,"div",3),Ji(3,"async"),Rt(4,sye,5,4,"ng-container",4),Rt(5,aye,3,3,"div",5),Rt(6,cye,3,3,"div",5),A(),Rt(7,uye,5,0,"div",6),Rt(8,fye,3,2,"div",6),A(),Rt(9,pye,2,3,"div",7),A()}if(2&e){const t=bt();ze("ngClass",t.containerClass),ce(1),ze("@datepickerAnimation",t.animationState),ce(1),ze("ngSwitch",Zc(3,9,t.viewMode)),ce(2),ze("ngSwitchCase","day"),ce(1),ze("ngSwitchCase","month"),ce(1),ze("ngSwitchCase","year"),ce(1),ze("ngIf",!1),ce(1),ze("ngIf",t.showTodayBtn||t.showClearBtn),ce(1),ze("ngIf",t.customRanges&&t.customRanges.length>0)}}let Jp=(()=>{class e{constructor(){this.adaptivePosition=!1,this.useUtc=!1,this.isAnimated=!1,this.startView="day",this.returnFocusToInput=!1,this.containerClass="theme-green",this.displayMonths=1,this.showWeekNumbers=!0,this.dateInputFormat="L",this.rangeSeparator=" - ",this.rangeInputFormat="L",this.monthTitle="MMMM",this.yearTitle="YYYY",this.dayLabel="D",this.monthLabel="MMMM",this.yearLabel="YYYY",this.weekNumbers="w",this.showTodayButton=!1,this.showClearButton=!1,this.todayPosition="center",this.clearPosition="right",this.todayButtonLabel="Today",this.clearButtonLabel="Clear",this.customRangeButtonLabel="Custom Range",this.withTimepicker=!1,this.allowedPositions=["top","bottom"],this.keepDatepickerOpened=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $j="220ms cubic-bezier(0, 0, 0.2, 1)",Wj=function o_e(e,n){return{type:7,name:e,definitions:n,options:{}}}("datepickerAnimation",[Vj("animated-down",dx({height:"*",overflow:"hidden"})),D3("* => animated-down",[dx({height:0,overflow:"hidden"}),S3($j)]),Vj("animated-up",dx({height:"*",overflow:"hidden"})),D3("* => animated-up",[dx({height:"*",overflow:"hidden"}),S3($j)]),D3("* => unanimated",S3("0s"))]);class Gj{constructor(){this.containerClass="",this.customRanges=[],this.chosenRange=[],this._daysCalendarSub=new Et,this.selectedTimeSub=new Et}set minDate(n){this._effects?.setMinDate(n)}set maxDate(n){this._effects?.setMaxDate(n)}set daysDisabled(n){this._effects?.setDaysDisabled(n)}set datesDisabled(n){this._effects?.setDatesDisabled(n)}set datesEnabled(n){this._effects?.setDatesEnabled(n)}set isDisabled(n){this._effects?.setDisabled(n)}set dateCustomClasses(n){this._effects?.setDateCustomClasses(n)}set dateTooltipTexts(n){this._effects?.setDateTooltipTexts(n)}set daysCalendar$(n){this._daysCalendar$=n,this._daysCalendarSub.unsubscribe(),this._daysCalendarSub.add(this._daysCalendar$.subscribe(t=>{this.multipleCalendars=!!t&&t.length>1}))}get daysCalendar$(){return this._daysCalendar$}setViewMode(n){}navigateTo(n){}dayHoverHandler(n){}weekHoverHandler(n){}monthHoverHandler(n){}yearHoverHandler(n){}timeSelectHandler(n,t){}daySelectHandler(n){}monthSelectHandler(n){}yearSelectHandler(n){}setRangeOnCalendar(n){}setToday(){}clearDate(){}_stopPropagation(n){n.stopPropagation()}}let Yo=(()=>{class e{calculate(){return{type:e.CALCULATE}}format(){return{type:e.FORMAT}}flag(){return{type:e.FLAG}}select(t){return{type:e.SELECT,payload:t}}selectTime(t,r){return{type:e.SELECT_TIME,payload:{date:t,index:r}}}changeViewMode(t){return{type:e.CHANGE_VIEWMODE,payload:t}}navigateTo(t){return{type:e.NAVIGATE_TO,payload:t}}navigateStep(t){return{type:e.NAVIGATE_OFFSET,payload:t}}setOptions(t){return{type:e.SET_OPTIONS,payload:t}}selectRange(t){return{type:e.SELECT_RANGE,payload:t}}hoverDay(t){return{type:e.HOVER,payload:t.isHovered?t.cell.date:null}}minDate(t){return{type:e.SET_MIN_DATE,payload:t}}maxDate(t){return{type:e.SET_MAX_DATE,payload:t}}daysDisabled(t){return{type:e.SET_DAYSDISABLED,payload:t}}datesDisabled(t){return{type:e.SET_DATESDISABLED,payload:t}}datesEnabled(t){return{type:e.SET_DATESENABLED,payload:t}}isDisabled(t){return{type:e.SET_IS_DISABLED,payload:t}}setDateCustomClasses(t){return{type:e.SET_DATE_CUSTOM_CLASSES,payload:t}}setDateTooltipTexts(t){return{type:e.SET_DATE_TOOLTIP_TEXTS,payload:t}}setLocale(t){return{type:e.SET_LOCALE,payload:t}}}return e.CALCULATE="[datepicker] calculate dates matrix",e.FORMAT="[datepicker] format datepicker values",e.FLAG="[datepicker] set flags",e.SELECT="[datepicker] select date",e.NAVIGATE_OFFSET="[datepicker] shift view date",e.NAVIGATE_TO="[datepicker] change view date",e.SET_OPTIONS="[datepicker] update render options",e.HOVER="[datepicker] hover date",e.CHANGE_VIEWMODE="[datepicker] switch view mode",e.SET_MIN_DATE="[datepicker] set min date",e.SET_MAX_DATE="[datepicker] set max date",e.SET_DAYSDISABLED="[datepicker] set days disabled",e.SET_DATESDISABLED="[datepicker] set dates disabled",e.SET_DATESENABLED="[datepicker] set dates enabled",e.SET_IS_DISABLED="[datepicker] set is disabled",e.SET_DATE_CUSTOM_CLASSES="[datepicker] set date custom classes",e.SET_DATE_TOOLTIP_TEXTS="[datepicker] set date tooltip texts",e.SET_LOCALE="[datepicker] set datepicker locale",e.SELECT_TIME="[datepicker] select time",e.SELECT_RANGE="[daterangepicker] select dates range",e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),FD=(()=>{class e{constructor(){this._defaultLocale="en",this._locale=new Va(this._defaultLocale),this._localeChange=this._locale.asObservable()}get locale(){return this._locale}get localeChange(){return this._localeChange}get currentLocale(){return this._locale.getValue()}use(t){t!==this.currentLocale&&this._locale.next(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),W2=(()=>{class e{constructor(t,r){this._actions=t,this._localeService=r,this._subs=[]}init(t){return this._store=t,this}setValue(t){this._store?.dispatch(this._actions.select(t))}setRangeValue(t){this._store?.dispatch(this._actions.selectRange(t))}setMinDate(t){return this._store?.dispatch(this._actions.minDate(t)),this}setMaxDate(t){return this._store?.dispatch(this._actions.maxDate(t)),this}setDaysDisabled(t){return this._store?.dispatch(this._actions.daysDisabled(t)),this}setDatesDisabled(t){return this._store?.dispatch(this._actions.datesDisabled(t)),this}setDatesEnabled(t){return this._store?.dispatch(this._actions.datesEnabled(t)),this}setDisabled(t){return this._store?.dispatch(this._actions.isDisabled(t)),this}setDateCustomClasses(t){return this._store?.dispatch(this._actions.setDateCustomClasses(t)),this}setDateTooltipTexts(t){return this._store?.dispatch(this._actions.setDateTooltipTexts(t)),this}setOptions(t){const r=Object.assign({locale:this._localeService.currentLocale},t);return this._store?.dispatch(this._actions.setOptions(r)),this}setBindings(t){return this._store?(t.selectedTime=this._store.select(r=>r.selectedTime).pipe(Ri(r=>!!r)),t.daysCalendar$=this._store.select(r=>r.flaggedMonths).pipe(Ri(r=>!!r)),t.monthsCalendar=this._store.select(r=>r.flaggedMonthsCalendar).pipe(Ri(r=>!!r)),t.yearsCalendar=this._store.select(r=>r.yearsCalendarFlagged).pipe(Ri(r=>!!r)),t.viewMode=this._store.select(r=>r.view?.mode),t.options$=aI([this._store.select(r=>r.showWeekNumbers),this._store.select(r=>r.displayMonths)]).pipe(jn(r=>({showWeekNumbers:r[0],displayMonths:r[1]}))),this):this}setEventHandlers(t){return t.setViewMode=r=>{this._store?.dispatch(this._actions.changeViewMode(r))},t.navigateTo=r=>{this._store?.dispatch(this._actions.navigateStep(r.step))},t.dayHoverHandler=r=>{const i=r.cell;i.isOtherMonth||i.isDisabled||(this._store?.dispatch(this._actions.hoverDay(r)),i.isHovered=r.isHovered)},t.monthHoverHandler=r=>{r.cell.isHovered=r.isHovered},t.yearHoverHandler=r=>{r.cell.isHovered=r.isHovered},this}registerDatepickerSideEffects(){return this._store?(this._subs.push(this._store.select(t=>t.view).subscribe(()=>{this._store?.dispatch(this._actions.calculate())})),this._subs.push(this._store.select(t=>t.monthsModel).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.format()))),this._subs.push(this._store.select(t=>t.formattedMonths).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.selectedDate).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.selectedRange).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.monthsCalendar).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.yearsCalendarModel).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.hoveredDate).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.dateCustomClasses).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._store.select(t=>t.dateTooltipTexts).pipe(Ri(t=>!!t)).subscribe(()=>this._store?.dispatch(this._actions.flag()))),this._subs.push(this._localeService.localeChange.subscribe(t=>this._store?.dispatch(this._actions.setLocale(t)))),this):this}destroy(){for(const t of this._subs)t.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(Jt(Yo),Jt(FD))},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Iye={date:new Date,mode:"day"},Yj=Object.assign(new Jp,{locale:"en",view:Iye,selectedRange:[],selectedTime:[],monthViewOptions:{width:7,height:6}});function k3(e,n,t){const r=n&&yf(TD(e,"month"),n,"day"),i=t&&Jh(Xp(e,"month"),t,"day");return r||i||!1}function G2(e,n,t){const r=n&&yf(TD(e,"year"),n,"day"),i=t&&Jh(Xp(e,"year"),t,"day");return r||i||!1}function A3(e,n,t){return!!(n&&Ps(n)&&n.length)&&(t&&"year"===t&&!n[0].getDate()?n.some(r=>sx(e,r,"year")):n.some(r=>sx(e,r,"date")))}function I3(e,n,t){return!!(n&&Ps(n)&&n.length)&&!n.some(r=>sx(e,r,t||"date"))}function qj(e,n=0){const t=e&&e.yearsCalendarModel&&e.yearsCalendarModel[n];return t?.years[0]&&t.years[0][0]&&t.years[0][0].date}function Lye(e,n){return!e||!n||!e.length&&!e[0].value||e.forEach(t=>(!t||!t.value||t.value instanceof Date||!(t.value instanceof Array&&t.value.length)||(t.value=Zj(t.value,n)),e)),e}function Xj(e,n){return!e||!n||e instanceof Array&&!e.length||e instanceof Date?e:Zj(e,n)}function Zj(e,n){return e instanceof Array?e.map(r=>r&&(Jh(r,n,"date")&&(r=n),r)):e}function Kj(e){return e&&Qj(e)}function Jj(e){return e?.length&&e.map(n=>n&&Qj(n)),e}function Qj(e){const n=new Date;return e.setMilliseconds(n.getMilliseconds()),e.setSeconds(n.getSeconds()),e.setMinutes(n.getMinutes()),e.setHours(n.getHours()),e}function P3(e,n){let t=e.initialDate;const r=new Array(e.height);for(let i=0;i<e.height;i++){r[i]=new Array(e.width);for(let s=0;s<e.width;s++)r[i][s]=n(t),t=Sa(t,e.shift)}return r}function O3(e,n){const t=function wme(e){return gD(e.getFullYear(),e.getMonth(),1,e.getHours(),e.getMinutes(),e.getSeconds())}(e),r=function Pye(e,n){if(function Tme(e,n){return e.getDay()===Number(n)}(e,n.firstDayOfWeek))return e;const r=function Oye(e,n){const t=Number(n);if(isNaN(t))return 0;if(0===t)return e;const r=e-t%7;return r<0?r+7:r}(gf(e),n.firstDayOfWeek);return Sa(e,{day:-r})}(t,n);return{daysMatrix:P3({width:n.width||0,height:n.height||0,initialDate:r,shift:{day:1}},a=>a),month:t}}function Rye(e,n,t){return e.map(r=>r[0]?Qu(r[0],n,t):"")}function Nye(e){const n=la(e),t=n.weekdaysShort(),r=n.firstDayOfWeek();return[...t.slice(r),...t.slice(0,r)]}function e9(e,n){return!n||e>=n}const Vye=4,Uye=3,jye={month:1};function t9(e,n){const t=Xp(e,"year");return{months:P3({width:Uye,height:Vye,initialDate:t,shift:jye},s=>({date:s,label:Qu(s,n.monthLabel,n.locale)})),monthTitle:"",yearTitle:Qu(e,n.yearTitle,n.locale),hideRightArrow:!1,hideLeftArrow:!1,disableRightArrow:!1,disableLeftArrow:!1}}const L3=4,F3=4,RD=L3*F3,n9=-1*(Math.floor(RD/2)-1),$ye={year:1};function r9(e,n,t){const r=function Wye(e,n){return n&&e.getFullYear()>=n.getFullYear()&&e.getFullYear()<n.getFullYear()+RD?n:Sa(e,{year:n9})}(e,t),s=P3({width:F3,height:L3,initialDate:r,shift:$ye},l=>({date:l,label:Qu(l,n.yearLabel,n.locale)})),a=function Gye(e,n){return`${Qu(e[0][0].date,n.yearTitle,n.locale)} - ${Qu(e[L3-1][F3-1].date,n.yearTitle,n.locale)}`}(s,n);return{years:s,monthTitle:"",yearTitle:a,hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}function R3(e,n){!e||!isNaN(e.getTime())||(e.setHours(n.getHours()),e.setMinutes(n.getMinutes()),e.setSeconds(n.getSeconds()),e.setMilliseconds(n.getMilliseconds()))}function i9(e=Yj,n){switch(n.type){case Yo.CALCULATE:return function qye(e){if(!e.view)return e;let n;n=e.displayOneMonthRange&&s9(e.view.date,e.minDate,e.maxDate)?1:e.displayMonths||1;let t=e.view.date;if("day"===e.view.mode&&e.monthViewOptions){e.showPreviousMonth&&e.selectedRange&&0===e.selectedRange.length&&(t=Sa(t,{month:-1})),e.monthViewOptions.firstDayOfWeek=la(e.locale).firstDayOfWeek();let r=new Array(n);for(let i=0;i<n;i++)r[i]=O3(t,e.monthViewOptions),t=Sa(t,{month:1});if(e.preventChangeToNextMonth&&e.flaggedMonths&&e.hoveredDate){const i=O3(e.view.date,e.monthViewOptions);e.flaggedMonths.length&&e.flaggedMonths[1].month.getMonth()===i.month.getMonth()&&(r=e.flaggedMonths.map(s=>e.monthViewOptions?O3(s.month,e.monthViewOptions):null).filter(s=>null!==s))}return Object.assign({},e,{monthsModel:r})}if("month"===e.view.mode){const r=new Array(n);for(let i=0;i<n;i++)r[i]=t9(t,Y2(e)),t=Sa(t,{year:1});return Object.assign({},e,{monthsCalendar:r})}if("year"===e.view.mode){const r=new Array(n);for(let i=0;i<n;i++)r[i]=r9(t,Y2(e),"year"===e.minMode?qj(e,i):void 0),t=Sa(t,{year:RD});return Object.assign({},e,{yearsCalendarModel:r})}return e}(e);case Yo.FORMAT:return function Xye(e){if(!e.view)return e;if("day"===e.view.mode&&e.monthsModel){const r=e.monthsModel.map((i,s)=>function Fye(e,n,t){return{month:e.month,monthTitle:Qu(e.month,n.monthTitle,n.locale),yearTitle:Qu(e.month,n.yearTitle,n.locale),weekNumbers:Rye(e.daysMatrix,n.weekNumbers,n.locale),weekdays:Nye(n.locale),weeks:e.daysMatrix.map((r,i)=>({days:r.map((s,a)=>({date:s,label:Qu(s,n.dayLabel,n.locale),monthIndex:t,weekIndex:i,dayIndex:a}))})),hideLeftArrow:!1,hideRightArrow:!1,disableLeftArrow:!1,disableRightArrow:!1}}(i,Y2(e),s));return Object.assign({},e,{formattedMonths:r})}const n=e.displayMonths||1;let t=e.view.date;if("month"===e.view.mode){const r=new Array(n);for(let i=0;i<n;i++)r[i]=t9(t,Y2(e)),t=Sa(t,{year:1});return Object.assign({},e,{monthsCalendar:r})}if("year"===e.view.mode){const r=new Array(n);for(let i=0;i<n;i++)r[i]=r9(t,Y2(e)),t=Sa(t,{year:16});return Object.assign({},e,{yearsCalendarModel:r})}return e}(e);case Yo.FLAG:return function Zye(e){if(!e.view)return e;const n=s9(e.view.date,e.minDate,e.maxDate)?1:e.displayMonths;if(e.formattedMonths&&"day"===e.view.mode){const t=e.formattedMonths.map((r,i)=>function Bye(e,n){return e.weeks.forEach(t=>{t.days.forEach((r,i)=>{const s=!ex(r.date,e.month),a=!s&&jg(r.date,n.hoveredDate),l=!s&&n.selectedRange&&jg(r.date,n.selectedRange[0]),d=!s&&n.selectedRange&&jg(r.date,n.selectedRange[1]),m=!s&&jg(r.date,n.selectedDate)||l||d,y=!s&&n.selectedRange&&function zye(e,n,t){return!!(e&&n&&n[0])&&(n[1]?e>n[0]&&e<=n[1]:!!t&&e>n[0]&&e<=t)}(r.date,n.selectedRange,n.hoveredDate),T=n.isDisabled||yf(r.date,n.minDate,"day")||Jh(r.date,n.maxDate,"day")||function Gge(e,n){return!(typeof n>"u"||!n||!n.length)&&n.some(t=>t===e.getDay())}(r.date,n.daysDisabled)||A3(r.date,n.datesDisabled)||I3(r.date,n.datesEnabled),I=!s&&jg(r.date,new Date),F=n.dateCustomClasses&&n.dateCustomClasses.map(G=>jg(r.date,G.date)?G.classes:[]).reduce((G,Z)=>G.concat(Z),[]).join(" ")||"",L=n.dateTooltipTexts&&n.dateTooltipTexts.map(G=>jg(r.date,G.date)?G.tooltipText:"").reduce((G,Z)=>(G.push(Z),G),[]).join(" ")||"",B=Object.assign({},r,{isOtherMonth:s,isHovered:a,isSelected:m,isSelectionStart:l,isSelectionEnd:d,isInRange:y,isDisabled:T,isToday:I,customClasses:F,tooltipText:L});(r.isOtherMonth!==B.isOtherMonth||r.isHovered!==B.isHovered||r.isSelected!==B.isSelected||r.isSelectionStart!==B.isSelectionStart||r.isSelectionEnd!==B.isSelectionEnd||r.isDisabled!==B.isDisabled||r.isInRange!==B.isInRange||r.customClasses!==B.customClasses||r.tooltipText!==B.tooltipText)&&(t.days[i]=B)})}),e.hideLeftArrow=n.isDisabled||!!n.monthIndex&&n.monthIndex>0&&n.monthIndex!==n.displayMonths,e.hideRightArrow=n.isDisabled||(!!n.monthIndex||0===n.monthIndex)&&!!n.displayMonths&&n.monthIndex<n.displayMonths&&n.monthIndex+1!==n.displayMonths,e.disableLeftArrow=k3(Sa(e.month,{month:-1}),n.minDate,n.maxDate),e.disableRightArrow=k3(Sa(e.month,{month:1}),n.minDate,n.maxDate),e}(r,{isDisabled:e.isDisabled,minDate:e.minDate,maxDate:e.maxDate,daysDisabled:e.daysDisabled,datesDisabled:e.datesDisabled,datesEnabled:e.datesEnabled,hoveredDate:e.hoveredDate,selectedDate:e.selectedDate,selectedRange:e.selectedRange,displayMonths:n,dateCustomClasses:e.dateCustomClasses,dateTooltipTexts:e.dateTooltipTexts,monthIndex:i}));return Object.assign({},e,{flaggedMonths:t})}if("month"===e.view.mode&&e.monthsCalendar){const t=e.monthsCalendar.map((r,i)=>function Hye(e,n){return e.months.forEach((t,r)=>{t.forEach((i,s)=>{let a;const l=ex(i.date,n.hoveredMonth),d=n.isDisabled||A3(i.date,n.datesDisabled)||I3(i.date,n.datesEnabled,"month")||k3(i.date,n.minDate,n.maxDate);!n.selectedDate&&n.selectedRange?(a=ex(i.date,n.selectedRange[0]),a||(a=ex(i.date,n.selectedRange[1]))):a=ex(i.date,n.selectedDate);const m=Object.assign(i,{isHovered:l,isDisabled:d,isSelected:a});(i.isHovered!==m.isHovered||i.isDisabled!==m.isDisabled||i.isSelected!==m.isSelected)&&(e.months[r][s]=m)})}),e.hideLeftArrow=!!n.monthIndex&&n.monthIndex>0&&n.monthIndex!==n.displayMonths,e.hideRightArrow=(!!n.monthIndex||0===n.monthIndex)&&(!!n.displayMonths||0===n.displayMonths)&&n.monthIndex<n.displayMonths&&n.monthIndex+1!==n.displayMonths,e.disableLeftArrow=G2(Sa(e.months[0][0].date,{year:-1}),n.minDate,n.maxDate),e.disableRightArrow=G2(Sa(e.months[0][0].date,{year:1}),n.minDate,n.maxDate),e}(r,{isDisabled:e.isDisabled,minDate:e.minDate,maxDate:e.maxDate,hoveredMonth:e.hoveredMonth,selectedDate:e.selectedDate,datesDisabled:e.datesDisabled,datesEnabled:e.datesEnabled,selectedRange:e.selectedRange,displayMonths:n,monthIndex:i}));return Object.assign({},e,{flaggedMonthsCalendar:t})}if("year"===e.view.mode&&e.yearsCalendarModel){const t=e.yearsCalendarModel.map((r,i)=>function Yye(e,n){e.years.forEach((i,s)=>{i.forEach((a,l)=>{let d;const m=tx(a.date,n.hoveredYear),y=n.isDisabled||A3(a.date,n.datesDisabled,"year")||I3(a.date,n.datesEnabled,"year")||G2(a.date,n.minDate,n.maxDate);!n.selectedDate&&n.selectedRange?(d=tx(a.date,n.selectedRange[0]),d||(d=tx(a.date,n.selectedRange[1]))):d=tx(a.date,n.selectedDate);const T=Object.assign(a,{isHovered:m,isDisabled:y,isSelected:d});(a.isHovered!==T.isHovered||a.isDisabled!==T.isDisabled||a.isSelected!==T.isSelected)&&(e.years[s][l]=T)})}),e.hideLeftArrow=!!n.yearIndex&&n.yearIndex>0&&n.yearIndex!==n.displayMonths,e.hideRightArrow=!!n.yearIndex&&!!n.displayMonths&&n.yearIndex<n.displayMonths&&n.yearIndex+1!==n.displayMonths,e.disableLeftArrow=G2(Sa(e.years[0][0].date,{year:-1}),n.minDate,n.maxDate);const t=e.years.length-1;return e.disableRightArrow=G2(Sa(e.years[t][e.years[t].length-1].date,{year:1}),n.minDate,n.maxDate),e}(r,{isDisabled:e.isDisabled,minDate:e.minDate,maxDate:e.maxDate,hoveredYear:e.hoveredYear,selectedDate:e.selectedDate,datesDisabled:e.datesDisabled,datesEnabled:e.datesEnabled,selectedRange:e.selectedRange,displayMonths:n,yearIndex:i}));return Object.assign({},e,{yearsCalendarFlagged:t})}return e}(e);case Yo.NAVIGATE_OFFSET:return function Kye(e,n){if(!e.view)return e;const t=function Jye(e,n){if(e.view){if("year"===e.view.mode&&"year"===e.minMode){const t=qj(e,0);if(t){const r=Sa(t,{year:-n9});return Sa(r,n.payload)}}return Sa(Xp(e.view.date,"month"),n.payload)}}(e,n);if(!t)return e;return Object.assign({},e,{view:{mode:e.view.mode,date:t}})}(e,n);case Yo.NAVIGATE_TO:{const t=n.payload;if(!e.view||!t.unit)return e;const r=function Nme(e,n){return gD(nx(e.getFullYear(),n.year),nx(e.getMonth(),n.month),1,nx(e.getHours(),n.hour),nx(e.getMinutes(),n.minute),nx(e.getSeconds(),n.seconds),nx(e.getMilliseconds(),n.milliseconds))}(e.view.date,t.unit);let i,s;return e9(t.viewMode,e.minMode)?(s=t.viewMode,i={view:{date:r,mode:s}}):(s=e.view.mode,i={selectedDate:r,view:{date:r,mode:s}}),Object.assign({},e,i)}case Yo.CHANGE_VIEWMODE:return e9(n.payload,e.minMode)&&e.view?Object.assign({},e,{view:{date:e.view.date,mode:n.payload}}):e;case Yo.HOVER:return Object.assign({},e,{hoveredDate:n.payload});case Yo.SELECT:{if(!e.view)return e;const t={selectedDate:n.payload,view:e.view};if(Array.isArray(e.selectedTime)){const a=e.selectedTime[0];t.selectedDate&&a&&R3(t.selectedDate,a)}const r=e.view.mode,s=N3(n.payload||e.view.date,e.minDate,e.maxDate);return t.view={mode:r,date:s},Object.assign({},e,t)}case Yo.SELECT_TIME:{const{date:t,index:r}=n.payload,i=e.selectedTime?[...e.selectedTime]:[];return i[r]=t,Object.assign({},e,{selectedTime:i})}case Yo.SET_OPTIONS:{if(!e.view)return e;const t=n.payload,r=t.minMode?t.minMode:e.view.mode,s=N3(Ug(t.value)&&t.value||Ps(t.value)&&Ug(t.value[0])&&t.value[0]||e.view.date,t.minDate,t.maxDate);return t.view={mode:r,date:s},t.value&&(Ps(t.value)&&(t.selectedRange=t.value,t.selectedTime=t.value.map(a=>a)),t.value instanceof Date&&(t.selectedDate=t.value,t.selectedTime=[t.value])),Object.assign({},e,t)}case Yo.SELECT_RANGE:{if(!e.view)return e;const t={selectedRange:n.payload,view:e.view};t.selectedRange?.forEach((a,l)=>{if(Array.isArray(e.selectedTime)){const d=e.selectedTime[l];d&&R3(a,d)}});const r=e.view.mode,s=N3(n.payload&&n.payload[0]||e.view.date,e.minDate,e.maxDate);return t.view={mode:r,date:s},Object.assign({},e,t)}case Yo.SET_MIN_DATE:return Object.assign({},e,{minDate:n.payload});case Yo.SET_MAX_DATE:return Object.assign({},e,{maxDate:n.payload});case Yo.SET_IS_DISABLED:return Object.assign({},e,{isDisabled:n.payload});case Yo.SET_DATE_CUSTOM_CLASSES:return Object.assign({},e,{dateCustomClasses:n.payload});case Yo.SET_DATE_TOOLTIP_TEXTS:return Object.assign({},e,{dateTooltipTexts:n.payload});default:return e}}function Y2(e){return{locale:e.locale,monthTitle:e.monthTitle,yearTitle:e.yearTitle,dayLabel:e.dayLabel,monthLabel:e.monthLabel,yearLabel:e.yearLabel,weekNumbers:e.weekNumbers}}function N3(e,n,t){const r=Array.isArray(e)?e[0]:e;return n&&Jh(n,r,"day")?n:t&&yf(t,r,"day")?t:r}function s9(e,n,t){return!(!t||!sx(t,e,"day"))||n&&t&&n.getMonth()===t.getMonth()}let q2=(()=>{class e extends ID{constructor(){const t=new Va({type:"[datepicker] dispatcher init"});super(t,i9,new Cj(Yj,t,i9))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),o9=(()=>{class e{constructor(){this.onSelect=new rr}selectFromRanges(t){this.onSelect.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-custom-date-view"]],inputs:{ranges:"ranges",selectedRange:"selectedRange",customRangeLabel:"customRangeLabel"},outputs:{onSelect:"onSelect"},decls:2,vars:1,consts:[[1,"bs-datepicker-predefined-btns"],["type","button","class","btn",3,"selected","click",4,"ngFor","ngForOf"],["type","button",1,"btn",3,"click"]],template:function(t,r){1&t&&(k(0,"div",0),Rt(1,a_e,2,3,"button",1),A()),2&t&&(ce(1),ze("ngForOf",r.ranges))},dependencies:[vs],encapsulation:2,changeDetection:0}),e})();var Gg=(()=>{return(e=Gg||(Gg={}))[e.UP=0]="UP",e[e.DOWN=1]="DOWN",Gg;var e})();let fx,Qye=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-current-date"]],inputs:{title:"title"},decls:3,vars:1,consts:[[1,"current-timedate"]],template:function(t,r){1&t&&(k(0,"div",0)(1,"span"),V(2),A()()),2&t&&(ce(2),$t(r.title))},encapsulation:2}),e})(),e1e=(()=>{class e{constructor(){this.ampm="ok",this.hours=0,this.minutes=0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-timepicker"]],decls:16,vars:3,consts:[[1,"bs-timepicker-container"],[1,"bs-timepicker-controls"],["type","button",1,"bs-decrease"],["type","text","placeholder","00",3,"value"],["type","button",1,"bs-increase"],["type","button",1,"switch-time-format"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAYAAABi8KSDAAABSElEQVQYV3XQPUvDUBQG4HNuagtVqc6KgouCv6GIuIntYBLB9hcIQpLStCAIV7DYmpTcRWcXqZio3Vwc/UCc/QEqfgyKGbr0I7nS1EiHeqYzPO/h5SD0jaxUZjmSLCB+OFb+UFINFwASAEAdpu9gaGXVyAHHFQBkHpKHc6a9dzECvADyY9sqlAMsK9W0jzxDXqeytr3mhQckxSji27TJJ5/rPmIpwJJq3HrtduriYOurv1a4i1p5HnhkG9OFymi0ReoO05cGwb+ayv4dysVygjeFmsP05f8wpZQ8fsdvfmuY9zjWSNqUtgYFVnOVReILYoBFzdQI5/GGFzNHhGbeZnopDGU29sZbscgldmC99w35VOATTycIMMcBXIfpSVGzZhA6C8hh00conln6VQ9TGgV32OEAKQC4DrBq7CJwd0ggR7Vq/rPrfgB+C3sGypY5DAAAAABJRU5ErkJggg==","alt",""]],template:function(t,r){1&t&&(k(0,"div",0)(1,"div",1)(2,"button",2),V(3,"-"),A(),Q(4,"input",3),k(5,"button",4),V(6,"+"),A()(),k(7,"div",1)(8,"button",2),V(9,"-"),A(),Q(10,"input",3),k(11,"button",4),V(12,"+"),A()(),k(13,"button",5),V(14),Q(15,"img",6),A()()),2&t&&(ce(4),ze("value",r.hours),ce(6),ze("value",r.minutes),ce(4),Nl("",r.ampm," "))},encapsulation:2}),e})(),B3=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-calendar-layout"]],ngContentSelectors:h_e,decls:6,vars:2,consts:[["title","hey there",4,"ngIf"],[1,"bs-datepicker-head"],[1,"bs-datepicker-body"],[4,"ngIf"],["title","hey there"]],template:function(t,r){1&t&&(yc(u_e),Rt(0,l_e,1,0,"bs-current-date",0),k(1,"div",1),y_(2),A(),k(3,"div",2),y_(4,1),A(),Rt(5,c_e,1,0,"bs-timepicker",3)),2&t&&(ze("ngIf",!1),ce(5),ze("ngIf",!1))},dependencies:[Hh,Qye,e1e],encapsulation:2}),e})(),t1e=(()=>{class e{constructor(t,r,i){this._config=t,this._elRef=r,this._renderer=i,this.day={date:new Date,label:""}}ngOnInit(){this.day?.isToday&&this._config&&this._config.customTodayClass&&this._renderer.addClass(this._elRef.nativeElement,this._config.customTodayClass),"string"==typeof this.day?.customClasses&&this.day?.customClasses.split(" ").filter(t=>t).forEach(t=>{this._renderer.addClass(this._elRef.nativeElement,t)})}}return e.\u0275fac=function(t){return new(t||e)(We(Jp),We(_s),We(ta))},e.\u0275cmp=bn({type:e,selectors:[["","bsDatepickerDayDecorator",""]],hostVars:16,hostBindings:function(t,r){2&t&&_i("disabled",r.day.isDisabled)("is-highlighted",r.day.isHovered)("is-other-month",r.day.isOtherMonth)("is-active-other-month",r.day.isOtherMonthHovered)("in-range",r.day.isInRange)("select-start",r.day.isSelectionStart)("select-end",r.day.isSelectionEnd)("selected",r.day.isSelected)},inputs:{day:"day"},attrs:d_e,decls:1,vars:1,template:function(t,r){1&t&&V(0),2&t&&$t(r.day&&r.day.label||"")},encapsulation:2,changeDetection:0}),e})(),z3=(()=>{class e{constructor(){this.isDisabled=!1,this.onNavigate=new rr,this.onViewMode=new rr}navTo(t){this.onNavigate.emit(t?Gg.DOWN:Gg.UP)}view(t){this.isDisabled||this.onViewMode.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-datepicker-navigation-view"]],inputs:{calendar:"calendar",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode"},decls:12,vars:9,consts:[["type","button",1,"previous",3,"disabled","click"],[4,"ngIf"],["type","button",1,"current",3,"disabled","click"],["type","button",1,"next",3,"disabled","click"]],template:function(t,r){1&t&&(k(0,"button",0),rt("click",function(){return r.navTo(!0)}),k(1,"span"),V(2,"\u2039"),A()(),Rt(3,f_e,5,2,"ng-container",1),V(4," \u200b "),k(5,"button",2),rt("click",function(){return r.view("year")}),k(6,"span"),V(7),A()(),V(8," \u200b "),k(9,"button",3),rt("click",function(){return r.navTo(!1)}),k(10,"span"),V(11,"\u203a"),A()()),2&t&&(hE("visibility",r.calendar.hideLeftArrow?"hidden":"visible"),ze("disabled",r.calendar.disableLeftArrow),ce(3),ze("ngIf",r.calendar&&r.calendar.monthTitle),ce(2),ze("disabled",r.isDisabled),ce(2),$t(r.calendar.yearTitle),ce(2),hE("visibility",r.calendar.hideRightArrow?"hidden":"visible"),ze("disabled",r.calendar.disableRightArrow))},dependencies:[Hh],encapsulation:2,changeDetection:0}),e})(),a9=(()=>{class e{constructor(t){this._config=t,this.onNavigate=new rr,this.onViewMode=new rr,this.onSelect=new rr,this.onHover=new rr,this.onHoverWeek=new rr,this.isiOS=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,this._config.dateTooltipTexts&&this._config.dateTooltipTexts.length>0&&(this.isShowTooltip=!0)}navigateTo(t){this.onNavigate.emit({step:{month:Gg.DOWN===t?-1:1}})}changeViewMode(t){this.onViewMode.emit(t)}selectDay(t){this.onSelect.emit(t)}selectWeek(t){if(!this._config.selectWeek&&!this._config.selectWeekDateRange||0===t.days.length)return;if(this._config.selectWeek&&t.days[0]&&!t.days[0].isDisabled&&this._config.selectFromOtherMonth)return void this.onSelect.emit(t.days[0]);const r=t.days.find(i=>(this._config.selectFromOtherMonth||!i.isOtherMonth)&&!i.isDisabled);if(this.onSelect.emit(r),this._config.selectWeekDateRange){const s=t.days.slice(0).reverse().find(a=>(this._config.selectFromOtherMonth||!a.isOtherMonth)&&!a.isDisabled);this.onSelect.emit(s)}}weekHoverHandler(t,r){(this._config.selectWeek||this._config.selectWeekDateRange)&&t.days.find(s=>(this._config.selectFromOtherMonth||!s.isOtherMonth)&&!s.isDisabled)&&(t.isHovered=r,this.isWeekHovered=r,this.onHoverWeek.emit(t))}hoverDay(t,r){this._config.selectFromOtherMonth&&t.isOtherMonth&&(t.isOtherMonthHovered=r),this._config.dateTooltipTexts&&(t.tooltipText="",this._config.dateTooltipTexts.forEach(i=>{jg(i.date,t.date)&&(t.tooltipText=i.tooltipText)})),this.onHover.emit({cell:t,isHovered:r})}}return e.\u0275fac=function(t){return new(t||e)(We(Jp))},e.\u0275cmp=bn({type:e,selectors:[["bs-days-calendar-view"]],inputs:{calendar:"calendar",options:"options",isDisabled:"isDisabled"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover",onHoverWeek:"onHoverWeek"},decls:9,vars:5,consts:[[3,"calendar","isDisabled","onNavigate","onViewMode"],["role","grid",1,"days","weeks"],[4,"ngIf"],["aria-label","weekday",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["aria-label","weekday"],["class","week",3,"active-week",4,"ngIf"],["role","gridcell",4,"ngFor","ngForOf"],[1,"week"],[3,"click",4,"ngIf"],[3,"click","mouseenter","mouseleave",4,"ngIf"],[3,"click"],[3,"click","mouseenter","mouseleave"],["role","gridcell"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","click",4,"ngIf"],["bsDatepickerDayDecorator","",3,"day","tooltip","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click","mouseenter","mouseleave"],["bsDatepickerDayDecorator","",3,"day","click"]],template:function(t,r){1&t&&(k(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),rt("onNavigate",function(s){return r.navigateTo(s)})("onViewMode",function(s){return r.changeViewMode(s)}),A(),k(2,"table",1)(3,"thead")(4,"tr"),Rt(5,p_e,1,0,"th",2),Rt(6,m_e,2,1,"th",3),A()(),k(7,"tbody"),Rt(8,C_e,3,2,"tr",4),A()()()),2&t&&(ce(1),ze("calendar",r.calendar)("isDisabled",!!r.isDisabled),ce(4),ze("ngIf",r.options&&r.options.showWeekNumbers),ce(1),ze("ngForOf",r.calendar.weekdays),ce(2),ze("ngForOf",r.calendar.weeks))},dependencies:[vs,Hh,hme,B3,t1e,z3],encapsulation:2}),e})(),l9=(()=>{class e{constructor(){this.onNavigate=new rr,this.onViewMode=new rr,this.onSelect=new rr,this.onHover=new rr}navigateTo(t){this.onNavigate.emit({step:{year:Gg.DOWN===t?-1:1}})}viewMonth(t){this.onSelect.emit(t)}hoverMonth(t,r){this.onHover.emit({cell:t,isHovered:r})}changeViewMode(t){this.onViewMode.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-month-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"months"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(t,r){1&t&&(k(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),rt("onNavigate",function(s){return r.navigateTo(s)})("onViewMode",function(s){return r.changeViewMode(s)}),A(),k(2,"table",1)(3,"tbody"),Rt(4,E_e,2,1,"tr",2),A()()()),2&t&&(ce(1),ze("calendar",r.calendar),ce(3),ze("ngForOf",null==r.calendar?null:r.calendar.months))},dependencies:[vs,B3,z3],encapsulation:2}),e})(),c9=(()=>{class e{constructor(){this.onNavigate=new rr,this.onViewMode=new rr,this.onSelect=new rr,this.onHover=new rr}navigateTo(t){this.onNavigate.emit({step:{year:(Gg.DOWN===t?-1:1)*RD}})}viewYear(t){this.onSelect.emit(t)}hoverYear(t,r){this.onHover.emit({cell:t,isHovered:r})}changeViewMode(t){this.onViewMode.emit(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=bn({type:e,selectors:[["bs-years-calendar-view"]],inputs:{calendar:"calendar"},outputs:{onNavigate:"onNavigate",onViewMode:"onViewMode",onSelect:"onSelect",onHover:"onHover"},decls:5,vars:2,consts:[[3,"calendar","onNavigate","onViewMode"],["role","grid",1,"years"],[4,"ngFor","ngForOf"],["role","gridcell",3,"disabled","is-highlighted","click","mouseenter","mouseleave",4,"ngFor","ngForOf"],["role","gridcell",3,"click","mouseenter","mouseleave"]],template:function(t,r){1&t&&(k(0,"bs-calendar-layout")(1,"bs-datepicker-navigation-view",0),rt("onNavigate",function(s){return r.navigateTo(s)})("onViewMode",function(s){return r.changeViewMode(s)}),A(),k(2,"table",1)(3,"tbody"),Rt(4,D_e,2,1,"tr",2),A()()()),2&t&&(ce(1),ze("calendar",r.calendar),ce(3),ze("ngForOf",null==r.calendar?null:r.calendar.years))},dependencies:[vs,B3,z3],encapsulation:2}),e})(),n1e=(()=>{class e extends Gj{constructor(t,r,i,s,a,l,d){super(),this._config=r,this._store=i,this._element=s,this._actions=a,this._positionService=d,this.valueChange=new rr,this.animationState="void",this.isRangePicker=!1,this._subs=[],this._effects=l,t.setStyle(s.nativeElement,"display","block"),t.setStyle(s.nativeElement,"position","absolute")}set value(t){this._effects?.setValue(t)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}ngOnInit(){let t;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe(Ul(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.containerClass=this._config.containerClass,this.showTodayBtn=this._config.showTodayButton,this.todayBtnLbl=this._config.todayButtonLabel,this.todayPos=this._config.todayPosition,this.showClearBtn=this._config.showClearButton,this.clearBtnLbl=this._config.clearButtonLabel,this.clearPos=this._config.clearPosition,this.customRangeBtnLbl=this._config.customRangeButtonLabel,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(r=>r.selectedDate).subscribe(r=>{t=r,this.valueChange.emit(r)})),this._subs.push(this._store.select(r=>r.selectedTime).subscribe(r=>{!r[0]||!(r[0]instanceof Date)||r[0]===t||this.valueChange.emit(r[0])})),this._store.dispatch(this._actions.changeViewMode(this._config.startView))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(t=>{Array.isArray(t)&&t.length>=1&&this.startTimepicker?.writeValue(t[0])})),this.startTimepicker?.registerOnChange(t=>{this.timeSelectHandler(t,0)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(t,r){this._store.dispatch(this._actions.selectTime(t,r))}daySelectHandler(t){!t||(this.isOtherMonthsActive?t.isDisabled:t.isOtherMonth||t.isDisabled)||this._store.dispatch(this._actions.select(t.date))}monthSelectHandler(t){!t||t.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{month:ti(t.date),year:js(t.date)},viewMode:"day"}))}yearSelectHandler(t){!t||t.isDisabled||this._store.dispatch(this._actions.navigateTo({unit:{year:js(t.date)},viewMode:"month"}))}setToday(){this._store.dispatch(this._actions.select(new Date))}clearDate(){this._store.dispatch(this._actions.select(void 0))}ngOnDestroy(){for(const t of this._subs)t.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}}return e.\u0275fac=function(t){return new(t||e)(We(ta),We(Jp),We(q2),We(_s),We(Yo),We(W2),We(Kv))},e.\u0275cmp=bn({type:e,selectors:[["bs-datepicker-container"]],viewQuery:function(t,r){if(1&t&&cw(Hj,5),2&t){let i;pv(i=mv())&&(r.startTimepicker=i.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(t,r){1&t&&rt("click",function(s){return r._stopPropagation(s)}),2&t&&ft("disabled",r.isDatepickerDisabled)("readonly",r.isDatepickerReadonly)},features:[Ui([q2,W2]),u],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(t,r){1&t&&(Rt(0,U_e,10,11,"div",0),Ji(1,"async")),2&t&&ze("ngIf",Zc(1,1,r.viewMode))},dependencies:[RE,vs,Hh,gw,GA,E3,o9,a9,l9,c9,YA],encapsulation:2,data:{animation:[Wj]}}),e})(),r1e=(()=>{class e{constructor(t,r,i,s,a){this._config=t,this._elementRef=r,this._renderer=i,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new qi,this.isDisabled=!1,this.bsValueChange=new rr,this._subs=[],this._dateInputFormat$=new qi,Object.assign(this,this._config),this._datepicker=a.createLoader(r,s,i),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Va(this.isOpen)}get readonlyValue(){return this.isDisabled?"":null}get isOpen(){return this._datepicker.isShown}set isOpen(t){this.isOpen$.next(t)}set bsValue(t){this._bsValue&&t&&this._bsValue.getTime()===t.getTime()||(!this._bsValue&&t&&!this._config.withTimepicker&&R3(t,new Date),t&&this.bsConfig?.initCurrentTime&&(t=Kj(t)),this.initPreviousValue(),this._bsValue=t,this.bsValueChange.emit(t))}get dateInputFormat$(){return this._dateInputFormat$}ngOnInit(){this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.setConfig(),this.initPreviousValue()}initPreviousValue(){fx=this._bsValue}ngOnChanges(t){t.bsConfig&&(t.bsConfig.currentValue?.initCurrentTime&&t.bsConfig.currentValue?.initCurrentTime!==t.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Kj(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._dateInputFormat$.next(this.bsConfig&&this.bsConfig.dateInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(t.minDate&&(this._datepickerRef.instance.minDate=this.minDate),t.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),t.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),t.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),t.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),t.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),t.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses),t.dateTooltipTexts&&(this._datepickerRef.instance.dateTooltipTexts=this.dateTooltipTexts))}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(t=>{this._datepickerRef&&(this._datepickerRef.instance.value=t)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.subscribe(t=>{this.initPreviousValue(),this.bsValue=t,!this.keepDatepickerModalOpened()&&this.hide()}))}keepDatepickerModalOpened(){return!!(fx&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return fx instanceof Date&&this._bsValue?.getDate()===fx?.getDate()&&this._bsValue?.getMonth()===fx?.getMonth()&&this._bsValue?.getFullYear()===fx?.getFullYear()}ngAfterViewInit(){this.isOpen$.pipe(Ri(t=>t!==this.isOpen),xU(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Jp,useValue:this._config}).attach(n1e).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}hide(){this.isOpen&&this._datepicker.hide();for(const t of this._subs)t.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:Xj(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,dateTooltipTexts:this.dateTooltipTexts||this.bsConfig&&this.bsConfig.dateTooltipTexts,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,minMode:this.minMode||this.bsConfig&&this.bsConfig.minMode,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened})}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(t=>t.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}}return e.\u0275fac=function(t){return new(t||e)(We(Jp),We(_s),We(ta),We(vc),We(O2))},e.\u0275dir=Un({type:e,selectors:[["","bsDatepicker",""]],hostVars:1,hostBindings:function(t,r){2&t&&ft("readonly",r.readonlyValue)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",minMode:"minMode",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled",dateCustomClasses:"dateCustomClasses",dateTooltipTexts:"dateTooltipTexts",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDatepicker"],features:[ho]}),e})(),i1e=(()=>{class e extends Gj{constructor(t,r,i,s,a,l,d){super(),this._config=r,this._store=i,this._element=s,this._actions=a,this._positionService=d,this.valueChange=new rr,this.animationState="void",this._rangeStack=[],this.chosenRange=[],this._subs=[],this.isRangePicker=!0,this._effects=l,this.customRanges=this._config.ranges||[],this.customRangeBtnLbl=this._config.customRangeButtonLabel,t.setStyle(s.nativeElement,"display","block"),t.setStyle(s.nativeElement,"position","absolute")}set value(t){this._effects?.setRangeValue(t)}get isDatePickerDisabled(){return!!this._config.isDisabled}get isDatepickerDisabled(){return this.isDatePickerDisabled?"":null}get isDatepickerReadonly(){return this.isDatePickerDisabled?"":null}ngOnInit(){let t;this._positionService.setOptions({modifiers:{flip:{enabled:this._config.adaptivePosition},preventOverflow:{enabled:this._config.adaptivePosition}},allowedPositions:this._config.allowedPositions}),this._positionService.event$?.pipe(Ul(1)).subscribe(()=>{this._positionService.disable(),this.animationState=this._config.isAnimated?this.isTopPosition?"animated-up":"animated-down":"unanimated"}),this.containerClass=this._config.containerClass,this.isOtherMonthsActive=this._config.selectFromOtherMonth,this.withTimepicker=this._config.withTimepicker,this._effects?.init(this._store).setOptions(this._config).setBindings(this).setEventHandlers(this).registerDatepickerSideEffects(),this._subs.push(this._store.select(r=>r.selectedRange).subscribe(r=>{t=r,this.valueChange.emit(r),this.chosenRange=r||[]})),this._subs.push(this._store.select(r=>r.selectedTime).subscribe(r=>{!r[0]||!r[1]||!(r[0]instanceof Date)||!(r[1]instanceof Date)||t&&r[0]===t[0]&&r[1]===t[1]||(this.valueChange.emit(r),this.chosenRange=r||[])}))}ngAfterViewInit(){this.selectedTimeSub.add(this.selectedTime?.subscribe(t=>{Array.isArray(t)&&t.length>=2&&(this.startTimepicker?.writeValue(t[0]),this.endTimepicker?.writeValue(t[1]))})),this.startTimepicker?.registerOnChange(t=>{this.timeSelectHandler(t,0)}),this.endTimepicker?.registerOnChange(t=>{this.timeSelectHandler(t,1)})}get isTopPosition(){return this._element.nativeElement.classList.contains("top")}positionServiceEnable(){this._positionService.enable()}timeSelectHandler(t,r){this._store.dispatch(this._actions.selectTime(t,r))}daySelectHandler(t){!t||(this.isOtherMonthsActive?t.isDisabled:t.isOtherMonth||t.isDisabled)||this.rangesProcessing(t)}monthSelectHandler(t){if(t&&!t.isDisabled){if(t.isSelected=!0,"month"!==this._config.minMode){if(t.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{month:ti(t.date),year:js(t.date)},viewMode:"day"}))}this.rangesProcessing(t)}}yearSelectHandler(t){if(t&&!t.isDisabled){if(t.isSelected=!0,"year"!==this._config.minMode){if(t.isDisabled)return;return void this._store.dispatch(this._actions.navigateTo({unit:{year:js(t.date)},viewMode:"month"}))}this.rangesProcessing(t)}}rangesProcessing(t){1===this._rangeStack.length&&(this._rangeStack=t.date>=this._rangeStack[0]?[this._rangeStack[0],t.date]:[t.date]),this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(t.date),0===this._rangeStack.length&&(this._rangeStack=[t.date],this._config.maxDateRange&&this.setMaxDateRangeOnCalendar(t.date)),this._store.dispatch(this._actions.selectRange(this._rangeStack)),2===this._rangeStack.length&&(this._rangeStack=[])}ngOnDestroy(){for(const t of this._subs)t.unsubscribe();this.selectedTimeSub.unsubscribe(),this._effects?.destroy()}setRangeOnCalendar(t){t&&(this._rangeStack=t.value instanceof Date?[t.value]:t.value),this._store.dispatch(this._actions.selectRange(this._rangeStack))}setMaxDateRangeOnCalendar(t){let r=new Date(t);if(this._config.maxDate){const i=this._config.maxDate.getTime(),s=t.getTime()+864e5*(this._config.maxDateRange||0);r=s>i?new Date(this._config.maxDate):new Date(s)}else r.setDate(t.getDate()+(this._config.maxDateRange||0));this._effects?.setMaxDate(r)}}return e.\u0275fac=function(t){return new(t||e)(We(ta),We(Jp),We(q2),We(_s),We(Yo),We(W2),We(Kv))},e.\u0275cmp=bn({type:e,selectors:[["bs-daterangepicker-container"]],viewQuery:function(t,r){if(1&t&&(cw(Hj,5),cw(tye,5)),2&t){let i;pv(i=mv())&&(r.startTimepicker=i.first),pv(i=mv())&&(r.endTimepicker=i.first)}},hostAttrs:["role","dialog","aria-label","calendar",1,"bottom"],hostVars:2,hostBindings:function(t,r){1&t&&rt("click",function(s){return r._stopPropagation(s)}),2&t&&ft("disabled",r.isDatepickerDisabled)("readonly",r.isDatepickerReadonly)},features:[Ui([q2,W2]),u],decls:2,vars:3,consts:[["class","bs-datepicker",3,"ngClass",4,"ngIf"],[1,"bs-datepicker",3,"ngClass"],[1,"bs-datepicker-container"],["role","application",1,"bs-calendar-container",3,"ngSwitch"],[4,"ngSwitchCase"],["class","bs-media-container",4,"ngSwitchCase"],["class","bs-datepicker-buttons",4,"ngIf"],["class","bs-datepicker-custom-range",4,"ngIf"],[1,"bs-media-container"],[3,"bs-datepicker-multiple","calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect",4,"ngFor","ngForOf"],["class","bs-timepicker-in-datepicker-container",4,"ngIf"],[3,"calendar","isDisabled","options","onNavigate","onViewMode","onHover","onHoverWeek","onSelect"],[1,"bs-timepicker-in-datepicker-container"],[3,"disabled"],["startTP",""],[3,"disabled",4,"ngIf"],["endTP",""],[3,"bs-datepicker-multiple","calendar","onNavigate","onViewMode","onHover","onSelect",4,"ngFor","ngForOf"],[3,"calendar","onNavigate","onViewMode","onHover","onSelect"],[1,"bs-datepicker-buttons"],["type","button",1,"btn","btn-success"],["type","button",1,"btn","btn-default"],["class","btn-today-wrapper",3,"today-left","today-right","today-center",4,"ngIf"],["class","btn-clear-wrapper",3,"clear-left","clear-right","clear-center",4,"ngIf"],[1,"btn-today-wrapper"],[1,"btn","btn-success",3,"click"],[1,"btn-clear-wrapper"],[1,"bs-datepicker-custom-range"],[3,"selectedRange","ranges","customRangeLabel","onSelect"]],template:function(t,r){1&t&&(Rt(0,mye,10,11,"div",0),Ji(1,"async")),2&t&&ze("ngIf",Zc(1,1,r.viewMode))},dependencies:[RE,vs,Hh,gw,GA,E3,o9,a9,l9,c9,YA],encapsulation:2,data:{animation:[Wj]}}),e})();const s1e={provide:Jc,useExisting:Rr(()=>u9),multi:!0},o1e={provide:xa,useExisting:Rr(()=>u9),multi:!0};let Yg,u9=(()=>{class e{constructor(t,r,i,s,a){this._picker=t,this._localeService=r,this._renderer=i,this._elRef=s,this.changeDetection=a,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Et}ngOnInit(){const t=r=>{this._setInputValue(r),this._value!==r&&(this._value=r,this._onChange(r),this._onTouched()),this.changeDetection.markForCheck()};this._picker._bsValue&&t(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(t)),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.dateInputFormat$.pipe(UO()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(t){(13===t.keyCode||"Enter"===t.code)&&this.hide()}_setInputValue(t){const r=t?Qu(t,this._picker._config.dateInputFormat,this._localeService.currentLocale):"";this._renderer.setProperty(this._elRef.nativeElement,"value",r)}onChange(t){this.writeValue(t.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(t){const r=t.value;if(null==r||""===r)return null;if(pD(r)){if(!Ug(r))return{bsDate:{invalid:r}};if(this._picker&&this._picker.minDate&&yf(r,this._picker.minDate,"date"))return this.writeValue(this._picker.minDate),{bsDate:{minDate:this._picker.minDate}};if(this._picker&&this._picker.maxDate&&Jh(r,this._picker.maxDate,"date"))return this.writeValue(this._picker.maxDate),{bsDate:{maxDate:this._picker.maxDate}}}return null}registerOnValidatorChange(t){this._validatorChange=t}writeValue(t){if(t){const r=this._localeService.currentLocale;if(!la(r))throw new Error(`Locale "${r}" is not defined, please add it with "defineLocale(...)"`);this._value=U2(t,this._picker._config.dateInputFormat,this._localeService.currentLocale),this._picker._config.useUtc&&(this._value=QU(this._value))}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(t){this._picker.isDisabled=t,t?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}}return e.\u0275fac=function(t){return new(t||e)(We(r1e,1),We(FD),We(ta),We(_s),We(T_))},e.\u0275dir=Un({type:e,selectors:[["input","bsDatepicker",""]],hostBindings:function(t,r){1&t&&rt("change",function(s){return r.onChange(s)})("keyup.esc",function(){return r.hide()})("keydown",function(s){return r.onKeydownEvent(s)})("blur",function(){return r.onBlur()})},features:[Ui([s1e,o1e])]}),e})(),a1e=(()=>{class e extends Jp{constructor(){super(...arguments),this.displayMonths=2}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=po(e)))(r||e)}}(),e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),l1e=(()=>{class e{constructor(t,r,i,s,a){this._config=t,this._elementRef=r,this._renderer=i,this.placement="bottom",this.triggers="click",this.outsideClick=!0,this.container="body",this.outsideEsc=!0,this.isDestroy$=new qi,this.isDisabled=!1,this.bsValueChange=new rr,this._subs=[],this._rangeInputFormat$=new qi,this._datepicker=a.createLoader(r,s,i),Object.assign(this,t),this.onShown=this._datepicker.onShown,this.onHidden=this._datepicker.onHidden,this.isOpen$=new Va(this.isOpen)}get isOpen(){return this._datepicker.isShown}set isOpen(t){this.isOpen$.next(t)}set bsValue(t){this._bsValue!==t&&(t&&this.bsConfig?.initCurrentTime&&(t=Jj(t)),this.initPreviousValue(),this._bsValue=t,this.bsValueChange.emit(t))}get isDatepickerReadonly(){return this.isDisabled?"":null}get rangeInputFormat$(){return this._rangeInputFormat$}ngOnInit(){this.isDestroy$=new qi,this._datepicker.listen({outsideClick:this.outsideClick,outsideEsc:this.outsideEsc,triggers:this.triggers,show:()=>this.show()}),this.initPreviousValue(),this.setConfig()}ngOnChanges(t){t.bsConfig&&(t.bsConfig.currentValue?.initCurrentTime&&t.bsConfig.currentValue?.initCurrentTime!==t.bsConfig.previousValue?.initCurrentTime&&this._bsValue&&(this.initPreviousValue(),this._bsValue=Jj(this._bsValue),this.bsValueChange.emit(this._bsValue)),this.setConfig(),this._rangeInputFormat$.next(t.bsConfig.currentValue&&t.bsConfig.currentValue.rangeInputFormat)),this._datepickerRef&&this._datepickerRef.instance&&(t.minDate&&(this._datepickerRef.instance.minDate=this.minDate),t.maxDate&&(this._datepickerRef.instance.maxDate=this.maxDate),t.datesDisabled&&(this._datepickerRef.instance.datesDisabled=this.datesDisabled),t.datesEnabled&&(this._datepickerRef.instance.datesEnabled=this.datesEnabled),t.daysDisabled&&(this._datepickerRef.instance.daysDisabled=this.daysDisabled),t.isDisabled&&(this._datepickerRef.instance.isDisabled=this.isDisabled),t.dateCustomClasses&&(this._datepickerRef.instance.dateCustomClasses=this.dateCustomClasses))}ngAfterViewInit(){this.isOpen$.pipe(Ri(t=>t!==this.isOpen),xU(this.isDestroy$)).subscribe(()=>this.toggle())}show(){this._datepicker.isShown||(this.setConfig(),this._datepickerRef=this._datepicker.provide({provide:Jp,useValue:this._config}).attach(i1e).to(this.container).position({attachment:this.placement}).show({placement:this.placement}),this.initSubscribes())}initSubscribes(){this._subs.push(this.bsValueChange.subscribe(t=>{this._datepickerRef&&(this._datepickerRef.instance.value=t)})),this._datepickerRef&&this._subs.push(this._datepickerRef.instance.valueChange.pipe(Ri(t=>t&&t[0]&&!!t[1])).subscribe(t=>{this.initPreviousValue(),this.bsValue=t,!this.keepDatepickerModalOpened()&&this.hide()}))}initPreviousValue(){Yg=this._bsValue}keepDatepickerModalOpened(){return!!(Yg&&this.bsConfig?.keepDatepickerOpened&&this._config.withTimepicker)&&this.isDateSame()}isDateSame(){return this._bsValue?.[0]?.getDate()===Yg?.[0]?.getDate()&&this._bsValue?.[0]?.getMonth()===Yg?.[0]?.getMonth()&&this._bsValue?.[0]?.getFullYear()===Yg?.[0]?.getFullYear()&&this._bsValue?.[1]?.getDate()===Yg?.[1]?.getDate()&&this._bsValue?.[1]?.getMonth()===Yg?.[1]?.getMonth()&&this._bsValue?.[1]?.getFullYear()===Yg?.[1]?.getFullYear()}setConfig(){this._config=Object.assign({},this._config,this.bsConfig,{value:Xj(this._bsValue,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),isDisabled:this.isDisabled,minDate:this.minDate||this.bsConfig&&this.bsConfig.minDate,maxDate:this.maxDate||this.bsConfig&&this.bsConfig.maxDate,daysDisabled:this.daysDisabled||this.bsConfig&&this.bsConfig.daysDisabled,dateCustomClasses:this.dateCustomClasses||this.bsConfig&&this.bsConfig.dateCustomClasses,datesDisabled:this.datesDisabled||this.bsConfig&&this.bsConfig.datesDisabled,datesEnabled:this.datesEnabled||this.bsConfig&&this.bsConfig.datesEnabled,ranges:Lye(this.bsConfig&&this.bsConfig.ranges,this.maxDate||this.bsConfig&&this.bsConfig.maxDate),maxDateRange:this.bsConfig&&this.bsConfig.maxDateRange,initCurrentTime:this.bsConfig?.initCurrentTime,keepDatepickerOpened:this.bsConfig?.keepDatepickerOpened})}hide(){this.isOpen&&this._datepicker.hide();for(const t of this._subs)t.unsubscribe();this._config.returnFocusToInput&&this._renderer.selectRootElement(this._elementRef.nativeElement).focus()}toggle(){if(this.isOpen)return this.hide();this.show()}unsubscribeSubscriptions(){this._subs?.length&&(this._subs.map(t=>t.unsubscribe()),this._subs.length=0)}ngOnDestroy(){this._datepicker.dispose(),this.isOpen$.next(!1),this.isDestroy$&&(this.isDestroy$.next(null),this.isDestroy$.complete()),this.unsubscribeSubscriptions()}}return e.\u0275fac=function(t){return new(t||e)(We(a1e),We(_s),We(ta),We(vc),We(O2))},e.\u0275dir=Un({type:e,selectors:[["","bsDaterangepicker",""]],hostVars:1,hostBindings:function(t,r){2&t&&ft("readonly",r.isDatepickerReadonly)},inputs:{placement:"placement",triggers:"triggers",outsideClick:"outsideClick",container:"container",outsideEsc:"outsideEsc",isOpen:"isOpen",bsValue:"bsValue",bsConfig:"bsConfig",isDisabled:"isDisabled",minDate:"minDate",maxDate:"maxDate",dateCustomClasses:"dateCustomClasses",daysDisabled:"daysDisabled",datesDisabled:"datesDisabled",datesEnabled:"datesEnabled"},outputs:{onShown:"onShown",onHidden:"onHidden",bsValueChange:"bsValueChange"},exportAs:["bsDaterangepicker"],features:[ho]}),e})();const c1e={provide:Jc,useExisting:Rr(()=>h9),multi:!0},u1e={provide:xa,useExisting:Rr(()=>h9),multi:!0};let h9=(()=>{class e{constructor(t,r,i,s,a){this._picker=t,this._localeService=r,this._renderer=i,this._elRef=s,this.changeDetection=a,this._onChange=Function.prototype,this._onTouched=Function.prototype,this._validatorChange=Function.prototype,this._subs=new Et}ngOnInit(){this._picker._bsValue&&(r=>{this._setInputValue(r),this._value!==r&&(this._value=r,this._onChange(r),this._onTouched()),this.changeDetection.markForCheck()})(this._picker._bsValue),this._subs.add(this._picker.bsValueChange.subscribe(r=>{this._setInputValue(r),this._value!==r&&(this._value=r,this._onChange(r),this._onTouched()),this.changeDetection.markForCheck()})),this._subs.add(this._localeService.localeChange.subscribe(()=>{this._setInputValue(this._value)})),this._subs.add(this._picker.rangeInputFormat$.pipe(UO()).subscribe(()=>{this._setInputValue(this._value)}))}ngOnDestroy(){this._subs.unsubscribe()}onKeydownEvent(t){(13===t.keyCode||"Enter"===t.code)&&this.hide()}_setInputValue(t){let r="";if(t){const i=t[0]?Qu(t[0],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"",s=t[1]?Qu(t[1],this._picker._config.rangeInputFormat,this._localeService.currentLocale):"";r=i&&s?i+this._picker._config.rangeSeparator+s:""}this._renderer.setProperty(this._elRef.nativeElement,"value",r)}onChange(t){this.writeValue(t.target.value),this._onChange(this._value),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus(),this._onTouched()}validate(t){let r=t.value;const i=[];if(null==r||!Ps(r))return null;r=r.slice().sort((l,d)=>l.getTime()-d.getTime());const s=Ug(r[0]),a=Ug(r[1]);return s?a?(this._picker&&this._picker.minDate&&yf(r[0],this._picker.minDate,"date")&&(r[0]=this._picker.minDate,i.push({bsDate:{minDate:this._picker.minDate}})),this._picker&&this._picker.maxDate&&Jh(r[1],this._picker.maxDate,"date")&&(r[1]=this._picker.maxDate,i.push({bsDate:{maxDate:this._picker.maxDate}})),i.length>0?(this.writeValue(r),i):null):{bsDate:{invalid:r[1]}}:{bsDate:{invalid:r[0]}}}registerOnValidatorChange(t){this._validatorChange=t}writeValue(t){if(t){const r=this._localeService.currentLocale;if(!la(r))throw new Error(`Locale "${r}" is not defined, please add it with "defineLocale(...)"`);let s=[];if("string"==typeof t){const a=this._picker._config.rangeSeparator.trim();s=t.replace(/[^-]/g,"").length>1?t.split(this._picker._config.rangeSeparator):t.split(a.length>0?a:this._picker._config.rangeSeparator).map(l=>l.trim())}Array.isArray(t)&&(s=t),this._value=s.map(a=>this._picker._config.useUtc?QU(U2(a,this._picker._config.rangeInputFormat,this._localeService.currentLocale)):U2(a,this._picker._config.rangeInputFormat,this._localeService.currentLocale)).map(a=>isNaN(a.valueOf())?void 0:a)}else this._value=void 0;this._picker.bsValue=this._value}setDisabledState(t){this._picker.isDisabled=t,t?this._renderer.setAttribute(this._elRef.nativeElement,"disabled","disabled"):this._renderer.removeAttribute(this._elRef.nativeElement,"disabled")}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}onBlur(){this._onTouched()}hide(){this._picker.hide(),this._renderer.selectRootElement(this._elRef.nativeElement).blur(),this._picker._config.returnFocusToInput&&this._renderer.selectRootElement(this._elRef.nativeElement).focus()}}return e.\u0275fac=function(t){return new(t||e)(We(l1e,1),We(FD),We(ta),We(_s),We(T_))},e.\u0275dir=Un({type:e,selectors:[["input","bsDaterangepicker",""]],hostBindings:function(t,r){1&t&&rt("change",function(s){return r.onChange(s)})("keyup.esc",function(){return r.hide()})("keydown",function(s){return r.onKeydownEvent(s)})("blur",function(){return r.onBlur()})},features:[Ui([c1e,u1e])]}),e})(),h1e=(()=>{class e{static forRoot(){return{ngModule:e,providers:[O2,Kv,q2,Yo,W2,FD,Zp]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[_w,vU,i_e]}),e})();function d9(e){return new Mt(3e3,!1)}function G1e(){return typeof window<"u"&&typeof window.document<"u"}function V3(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function qg(e){switch(e.length){case 0:return new $2;case 1:return e[0];default:return new jj(e)}}function f9(e,n,t,r,i=new Map,s=new Map){const a=[],l=[];let d=-1,m=null;if(r.forEach(y=>{const T=y.get("offset"),D=T==d,I=D&&m||new Map;y.forEach((F,L)=>{let B=L,G=F;if("offset"!==L)switch(B=n.normalizePropertyName(B,a),G){case M3:G=i.get(L);break;case Kp:G=s.get(L);break;default:G=n.normalizeStyleValue(L,B,G,a)}I.set(B,G)}),D||l.push(I),m=I,d=T}),a.length)throw function L1e(e){return new Mt(3502,!1)}();return l}function U3(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&j3(t,"start",e)));break;case"done":e.onDone(()=>r(t&&j3(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&j3(t,"destroy",e)))}}function j3(e,n,t){const s=H3(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),a=e._data;return null!=a&&(s._data=a),s}function H3(e,n,t,r,i="",s=0,a){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!a}}function lu(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function p9(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}let $3=(e,n)=>!1,m9=(e,n,t)=>[],g9=null;function W3(e){const n=e.parentNode||e.host;return n===g9?null:n}(V3()||typeof Element<"u")&&(G1e()?(g9=(()=>document.documentElement)(),$3=(e,n)=>{for(;n;){if(n===e)return!0;n=W3(n)}return!1}):$3=(e,n)=>e.contains(n),m9=(e,n,t)=>{if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]});let by=null,_9=!1;const y9=$3,v9=m9;let x9=(()=>{class e{validateStyleProperty(t){return function q1e(e){by||(by=function X1e(){return typeof document<"u"?document.body:null}()||{},_9=!!by.style&&"WebkitAppearance"in by.style);let n=!0;return by.style&&!function Y1e(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in by.style,!n&&_9&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in by.style)),n}(t)}matchesElement(t,r){return!1}containsElement(t,r){return y9(t,r)}getParentElement(t){return W3(t)}query(t,r,i){return v9(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,a,l=[],d){return new $2(i,s)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),G3=(()=>{class e{}return e.NOOP=new x9,e})();const Z1e=1e3,Y3="ng-enter",ND="ng-leave",BD="ng-trigger",zD=".ng-trigger",w9="ng-animating",q3=".ng-animating";function Qp(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:X3(parseFloat(n[1]),n[2])}function X3(e,n){return"s"===n?e*Z1e:e}function VD(e,n,t){return e.hasOwnProperty("duration")?e:function J1e(e,n,t){let i,s=0,a="";if("string"==typeof e){const l=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return n.push(d9()),{duration:0,delay:0,easing:""};i=X3(parseFloat(l[1]),l[2]);const d=l[3];null!=d&&(s=X3(parseFloat(d),l[4]));const m=l[5];m&&(a=m)}else i=e;if(!t){let l=!1,d=n.length;i<0&&(n.push(function d1e(){return new Mt(3100,!1)}()),l=!0),s<0&&(n.push(function f1e(){return new Mt(3101,!1)}()),l=!0),l&&n.splice(d,0,d9())}return{duration:i,delay:s,easing:a}}(e,n,t)}function X2(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function C9(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function Xg(e,n=new Map,t){if(t)for(let[r,i]of t)n.set(r,i);for(let[r,i]of e)n.set(r,i);return n}function E9(e,n,t){return t?n+":"+t+";":""}function S9(e){let n="";for(let t=0;t<e.style.length;t++){const r=e.style.item(t);n+=E9(0,r,e.style.getPropertyValue(r))}for(const t in e.style)e.style.hasOwnProperty(t)&&!t.startsWith("_")&&(n+=E9(0,nve(t),e.style[t]));e.setAttribute("style",n)}function xf(e,n,t){e.style&&(n.forEach((r,i)=>{const s=K3(i);t&&!t.has(i)&&t.set(i,e.style[s]),e.style[s]=r}),V3()&&S9(e))}function wy(e,n){e.style&&(n.forEach((t,r)=>{const i=K3(r);e.style[i]=""}),V3()&&S9(e))}function Z2(e){return Array.isArray(e)?1==e.length?e[0]:zj(e):e}const Z3=new RegExp("{{\\s*(.+?)\\s*}}","g");function D9(e){let n=[];if("string"==typeof e){let t;for(;t=Z3.exec(e);)n.push(t[1]);Z3.lastIndex=0}return n}function K2(e,n,t){const r=e.toString(),i=r.replace(Z3,(s,a)=>{let l=n[a];return null==l&&(t.push(function m1e(e){return new Mt(3003,!1)}()),l=""),l.toString()});return i==r?e:i}function UD(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const tve=/-+([a-z0-9])/g;function K3(e){return e.replace(tve,(...n)=>n[1].toUpperCase())}function nve(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function cu(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function g1e(e){return new Mt(3004,!1)}()}}function M9(e,n){return window.getComputedStyle(e)[n]}const $D="*";function lve(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function cve(e,n,t){if(":"==e[0]){const d=function uve(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function A1e(e){return new Mt(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof d)return void n.push(d);e=d}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function k1e(e){return new Mt(3015,!1)}()),n;const i=r[1],s=r[2],a=r[3];n.push(k9(i,a));"<"==s[0]&&!(i==$D&&a==$D)&&n.push(k9(a,i))}(r,t,n)):t.push(e),t}const WD=new Set(["true","1"]),GD=new Set(["false","0"]);function k9(e,n){const t=WD.has(e)||GD.has(e),r=WD.has(n)||GD.has(n);return(i,s)=>{let a=e==$D||e==i,l=n==$D||n==s;return!a&&t&&"boolean"==typeof i&&(a=i?WD.has(e):GD.has(e)),!l&&r&&"boolean"==typeof s&&(l=s?WD.has(n):GD.has(n)),a&&l}}const hve=new RegExp("s*:selfs*,?","g");function J3(e,n,t,r){return new dve(e).build(n,t,r)}class dve{constructor(n){this._driver=n}build(n,t,r){const i=new mve(t);return this._resetContextStyleTimingState(i),cu(this,Z2(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],a=[];return"@"==n.name.charAt(0)&&t.errors.push(function y1e(){return new Mt(3006,!1)}()),n.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),0==l.type){const d=l,m=d.name;m.toString().split(/\s*,\s*/).forEach(y=>{d.name=y,s.push(this.visitState(d,t))}),d.name=m}else if(1==l.type){const d=this.visitTransition(l,t);r+=d.queryCount,i+=d.depCount,a.push(d)}else t.errors.push(function v1e(){return new Mt(3007,!1)}())}),{type:7,name:n.name,states:s,transitions:a,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const s=new Set,a=i||{};r.styles.forEach(l=>{l instanceof Map&&l.forEach(d=>{D9(d).forEach(m=>{a.hasOwnProperty(m)||s.add(m)})})}),s.size&&(UD(s.values()),t.errors.push(function x1e(e,n){return new Mt(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=cu(this,Z2(n.animation),t);return{type:1,matchers:lve(n.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Cy(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(r=>cu(this,r,t)),options:Cy(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const s=n.steps.map(a=>{t.currentTime=r;const l=cu(this,a,t);return i=Math.max(i,t.currentTime),l});return t.currentTime=i,{type:3,steps:s,options:Cy(n.options)}}visitAnimate(n,t){const r=function _ve(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return Q3(VD(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Q3(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=VD(t,n);return Q3(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,s=n.styles?n.styles:dx({});if(5==s.type)i=this.visitKeyframes(s,t);else{let a=n.styles,l=!1;if(!a){l=!0;const m={};r.easing&&(m.easing=r.easing),a=dx(m)}t.currentTime+=r.duration+r.delay;const d=this.visitStyle(a,t);d.isEmptyStep=l,i=d}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let l of i)"string"==typeof l?l===Kp?r.push(l):t.errors.push(new Mt(3002,!1)):r.push(C9(l));let s=!1,a=null;return r.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!s))for(let d of l.values())if(d.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:a,offset:n.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),n.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,d)=>{const m=t.collectedStyles.get(t.currentQuerySelector),y=m.get(d);let T=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(function w1e(e,n,t,r,i){return new Mt(3010,!1)}()),T=!1),s=y.startTime),T&&m.set(d,{startTime:s,endTime:i}),t.options&&function eve(e,n,t){const r=n.params||{},i=D9(e);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function p1e(e){return new Mt(3001,!1)}())})}(l,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function C1e(){return new Mt(3011,!1)}()),r;let s=0;const a=[];let l=!1,d=!1,m=0;const y=n.steps.map(G=>{const Z=this._makeStyleAst(G,t);let q=null!=Z.offset?Z.offset:function gve(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(Z.styles),oe=0;return null!=q&&(s++,oe=Z.offset=q),d=d||oe<0||oe>1,l=l||oe<m,m=oe,a.push(oe),Z});d&&t.errors.push(function T1e(){return new Mt(3012,!1)}()),l&&t.errors.push(function E1e(){return new Mt(3200,!1)}());const T=n.steps.length;let D=0;s>0&&s<T?t.errors.push(function S1e(){return new Mt(3202,!1)}()):0==s&&(D=1/(T-1));const I=T-1,F=t.currentTime,L=t.currentAnimateTimings,B=L.duration;return y.forEach((G,Z)=>{const q=D>0?Z==I?1:D*Z:a[Z],oe=q*B;t.currentTime=F+L.delay+oe,L.duration=oe,this._validateStyleAst(G,t),G.offset=q,r.styles.push(G)}),r}visitReference(n,t){return{type:8,animation:cu(this,Z2(n.animation),t),options:Cy(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:Cy(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:Cy(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[s,a]=function fve(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(hve,"")),e=e.replace(/@\*/g,zD).replace(/@\w+/g,t=>zD+"-"+t.slice(1)).replace(/:animating/g,q3),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+s:s,lu(t.collectedStyles,t.currentQuerySelector,new Map);const l=cu(this,Z2(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:l,originalSelector:n.selector,options:Cy(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function D1e(){return new Mt(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:VD(n.timings,t.errors,!0);return{type:12,animation:cu(this,Z2(n.animation),t),timings:r,options:null}}}class mve{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Cy(e){return e?(e=X2(e)).params&&(e.params=function pve(e){return e?X2(e):null}(e.params)):e={},e}function Q3(e,n,t){return{duration:e,delay:n,easing:t}}function eL(e,n,t,r,i,s,a=null,l=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:a,subTimeline:l}}class YD{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const xve=new RegExp(":enter","g"),wve=new RegExp(":leave","g");function tL(e,n,t,r,i,s=new Map,a=new Map,l,d,m=[]){return(new Cve).buildKeyframes(e,n,t,r,i,s,a,l,d,m)}class Cve{buildKeyframes(n,t,r,i,s,a,l,d,m,y=[]){m=m||new YD;const T=new nL(n,t,m,i,s,y,[]);T.options=d;const D=d.delay?Qp(d.delay):0;T.currentTimeline.delayNextStep(D),T.currentTimeline.setStyles([a],null,T.errors,d),cu(this,r,T);const I=T.timelines.filter(F=>F.containsAnimation());if(I.length&&l.size){let F;for(let L=I.length-1;L>=0;L--){const B=I[L];if(B.element===t){F=B;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([l],null,T.errors,d)}return I.length?I.map(F=>F.buildKeyframes()):[eL(t,[],[],[],0,D,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const s=i?.delay;if(s){const a="number"==typeof s?s:Qp(K2(s,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(n,t,r){let s=t.currentTimeline.currentTime;const a=null!=r.duration?Qp(r.duration):null,l=null!=r.delay?Qp(r.delay):null;return 0!==a&&n.forEach(d=>{const m=t.appendInstructionToTimeline(d,a,l);s=Math.max(s,m.duration+m.delay)}),s}visitReference(n,t){t.updateOptions(n.options,!0),cu(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const s=n.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=qD);const a=Qp(s.delay);i.delayNextStep(a)}n.steps.length&&(n.steps.forEach(a=>cu(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const s=n.options&&n.options.delay?Qp(n.options.delay):0;n.steps.forEach(a=>{const l=t.createSubContext(n.options);s&&l.delayNextStep(s),cu(this,a,l),i=Math.max(i,l.currentTimeline.currentTime),r.push(l.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return VD(t.params?K2(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=n.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(s):r.setStyles(n.styles,s,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,l=t.createSubContext().currentTimeline;l.easing=r.easing,n.styles.forEach(d=>{l.forwardTime((d.offset||0)*s),l.setStyles(d.styles,d.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(i+s),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},s=i.delay?Qp(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qD);let a=r;const l=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=l.length;let d=null;l.forEach((m,y)=>{t.currentQueryIndex=y;const T=t.createSubContext(n.options,m);s&&T.delayNextStep(s),m===t.element&&(d=T.currentTimeline),cu(this,n.animation,T),T.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),d&&(t.currentTimeline.mergeTimelineCollectedStyles(d),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,s=n.timings,a=Math.abs(s.duration),l=a*(t.currentQueryTotal-1);let d=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=l-d;break;case"full":d=r.currentStaggerTime}const y=t.currentTimeline;d&&y.delayNextStep(d);const T=y.currentTime;cu(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const qD={};class nL{constructor(n,t,r,i,s,a,l,d){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new XD(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=Qp(r.duration)),null!=r.delay&&(i.delay=Qp(r.delay));const s=r.params;if(s){let a=i.params;a||(a=this.options.params={}),Object.keys(s).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=K2(s[l],a,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,s=new nL(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(n),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(n){return this.previousNode=qD,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},s=new Tve(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,s,a){let l=[];if(i&&l.push(this.element),n.length>0){n=(n=n.replace(xve,"."+this._enterClassName)).replace(wve,"."+this._leaveClassName);let m=this._driver.query(this.element,n,1!=r);0!==r&&(m=r<0?m.slice(m.length+r,m.length):m.slice(0,r)),l.push(...m)}return!s&&0==l.length&&a.push(function M1e(e){return new Mt(3014,!1)}()),l}}class XD{constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new XD(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Kp),this._currentKeyframe.set(t,Kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},a=function Eve(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||n.keys();for(let s of r)t.set(s,Kp)}else Xg(i,t)}),t}(n,this._globalTimelineStyles);for(let[l,d]of a){const m=K2(d,s,r);this._pendingStyles.set(l,m),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??Kp),this._updateStyle(l,m)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((l,d)=>{const m=Xg(l,new Map,this._backFill);m.forEach((y,T)=>{y===M3?n.add(T):y===Kp&&t.add(T)}),r||m.set("offset",d/this.duration),i.push(m)});const s=n.size?UD(n.values()):[],a=t.size?UD(t.values()):[];if(r){const l=i[0],d=new Map(l);l.set("offset",0),d.set("offset",1),i=[l,d]}return eL(this.element,i,s,a,this.duration,this.startTime,this.easing,!1)}}class Tve extends XD{constructor(n,t,r,i,s,a,l=!1){super(n,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=r+t,l=t/a,d=Xg(n[0]);d.set("offset",0),s.push(d);const m=Xg(n[0]);m.set("offset",P9(l)),s.push(m);const y=n.length-1;for(let T=1;T<=y;T++){let D=Xg(n[T]);const I=D.get("offset");D.set("offset",P9((t+I*r)/a)),s.push(D)}r=a,t=0,i="",n=s}return eL(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function P9(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class rL{}const Sve=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Dve extends rL{normalizePropertyName(n,t){return K3(n)}normalizeStyleValue(n,t,r,i){let s="";const a=r.toString().trim();if(Sve.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const l=r.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&i.push(function _1e(e,n){return new Mt(3005,!1)}())}return a+s}}function O9(e,n,t,r,i,s,a,l,d,m,y,T,D){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:a,timelines:l,queriedElements:d,preStyleProps:m,postStyleProps:y,totalTime:T,errors:D}}const iL={};class L9{constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Mve(e,n,t,r,i){return e.some(s=>s(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,s,a,l,d,m,y){const T=[],D=this.ast.options&&this.ast.options.params||iL,F=this.buildStyles(r,l&&l.params||iL,T),L=d&&d.params||iL,B=this.buildStyles(i,L,T),G=new Set,Z=new Map,q=new Map,oe="void"===i,_e={params:kve(L,D),delay:this.ast.options?.delay},fe=y?[]:tL(n,t,this.ast.animation,s,a,F,B,_e,m,T);let ae=0;if(fe.forEach(Ie=>{ae=Math.max(Ie.duration+Ie.delay,ae)}),T.length)return O9(t,this._triggerName,r,i,oe,F,B,[],[],Z,q,ae,T);fe.forEach(Ie=>{const qe=Ie.element,Je=lu(Z,qe,new Set);Ie.preStyleProps.forEach(jt=>Je.add(jt));const $e=lu(q,qe,new Set);Ie.postStyleProps.forEach(jt=>$e.add(jt)),qe!==t&&G.add(qe)});const De=UD(G.values());return O9(t,this._triggerName,r,i,oe,F,B,fe,De,Z,q,ae)}}function kve(e,n){const t=X2(n);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class Ave{constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=X2(this.defaultParams);return Object.keys(n).forEach(s=>{const a=n[s];null!==a&&(i[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{a&&(a=K2(a,i,t));const d=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,d,a,t),r.set(l,a)})}),r}}class Pve{constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Ave(i.style,i.options&&i.options.params||{},r))}),F9(this.states,"true","1"),F9(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new L9(n,i,this.states))}),this.fallbackTransition=function Ove(e,n,t){return new L9(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,l)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(a=>a.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function F9(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const Lve=new YD;class Fve{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const r=[],i=[],s=J3(this._driver,t,r,i);if(r.length)throw function F1e(e){return new Mt(3503,!1)}();this._animations.set(n,s)}_buildPlayer(n,t,r){const i=n.element,s=f9(0,this._normalizer,0,n.keyframes,t,r);return this._driver.animate(i,s,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],s=this._animations.get(n);let a;const l=new Map;if(s?(a=tL(this._driver,t,s,Y3,ND,new Map,new Map,r,Lve,i),a.forEach(y=>{const T=lu(l,y.element,new Map);y.postStyleProps.forEach(D=>T.set(D,null))})):(i.push(function R1e(){return new Mt(3300,!1)}()),a=[]),i.length)throw function N1e(e){return new Mt(3504,!1)}();l.forEach((y,T)=>{y.forEach((D,I)=>{y.set(I,this._driver.computeStyle(T,I,Kp))})});const m=qg(a.map(y=>{const T=l.get(y.element);return this._buildPlayer(y,new Map,T)}));return this._playersById.set(n,m),m.onDestroy(()=>this.destroy(n)),this.players.push(m),m}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function B1e(e){return new Mt(3301,!1)}();return t}listen(n,t,r,i){const s=H3(t,"","","");return U3(this._getPlayer(n),r,s,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const s=this._getPlayer(n);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const R9="ng-animate-queued",sL="ng-animate-disabled",Vve=[],N9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Uve={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},lh="__ng_removed";class oL{get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function Wve(e){return e??null}(r?n.value:n),r){const s=X2(n);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const J2="void",aL=new oL(J2);class jve{constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,ch(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function z1e(e,n){return new Mt(3302,!1)}();if(null==r||0==r.length)throw function V1e(e){return new Mt(3303,!1)}();if(!function Gve(e){return"start"==e||"done"==e}(r))throw function U1e(e,n){return new Mt(3400,!1)}();const s=lu(this._elementListeners,n,[]),a={name:t,phase:r,callback:i};s.push(a);const l=lu(this._engine.statesByElement,n,new Map);return l.has(t)||(ch(n,BD),ch(n,BD+"-"+t),l.set(t,aL)),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(a);d>=0&&s.splice(d,1),this._triggers.has(t)||l.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function j1e(e){return new Mt(3401,!1)}();return t}trigger(n,t,r,i=!0){const s=this._getTrigger(t),a=new lL(this.id,t,n);let l=this._engine.statesByElement.get(n);l||(ch(n,BD),ch(n,BD+"-"+t),this._engine.statesByElement.set(n,l=new Map));let d=l.get(t);const m=new oL(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&d&&m.absorbOptions(d.options),l.set(t,m),d||(d=aL),m.value!==J2&&d.value===m.value){if(!function Xve(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!n.hasOwnProperty(s)||e[s]!==n[s])return!1}return!0}(d.params,m.params)){const L=[],B=s.matchStyles(d.value,d.params,L),G=s.matchStyles(m.value,m.params,L);L.length?this._engine.reportError(L):this._engine.afterFlush(()=>{wy(n,B),xf(n,G)})}return}const D=lu(this._engine.playersByElement,n,[]);D.forEach(L=>{L.namespaceId==this.id&&L.triggerName==t&&L.queued&&L.destroy()});let I=s.matchTransition(d.value,m.value,n,m.params),F=!1;if(!I){if(!i)return;I=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:I,fromState:d,toState:m,player:a,isFallbackTransition:F}),F||(ch(n,R9),a.onStart(()=>{px(n,R9)})),a.onDone(()=>{let L=this.players.indexOf(a);L>=0&&this.players.splice(L,1);const B=this._engine.playersByElement.get(n);if(B){let G=B.indexOf(a);G>=0&&B.splice(G,1)}}),this.players.push(a),D.push(a),a}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,zD,!0);r.forEach(i=>{if(i[lh])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const s=this._engine.statesByElement.get(n),a=new Map;if(s){const l=[];if(s.forEach((d,m)=>{if(a.set(m,d.value),this._triggers.has(m)){const y=this.trigger(n,m,J2,i);y&&l.push(y)}}),l.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,a),r&&qg(l).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(s=>{const a=s.name;if(i.has(a))return;i.add(a);const d=this._triggers.get(a).fallbackTransition,m=r.get(a)||aL,y=new oL(J2),T=new lL(this.id,a,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:a,transition:d,fromState:m,toState:y,player:T,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(n):[];if(s&&s.length)i=!0;else{let a=n;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const s=n[lh];(!s||s===N9)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){ch(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,a=this._elementListeners.get(s);a&&a.forEach(l=>{if(l.name==r.triggerName){const d=H3(s,r.triggerName,r.fromState.value,r.toState.value);d._data=n,U3(r.player,l.phase,d,l.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let t=!1;return this._elementListeners.has(n)&&(t=!0),t=!!this._queue.find(r=>r.element===n)||t,t}}class Hve{_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new jve(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){const d=i.get(l);if(d){const m=r.indexOf(d);r.splice(m+1,0,n),a=!0;break}l=this.driver.getParentElement(l)}a||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(n,t,r,i){if(ZD(t)){const s=this._fetchNamespace(n);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!ZD(t))return;const s=t[lh];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(n){const a=this._fetchNamespace(n);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),ch(n,sL)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),px(n,sL))}removeNode(n,t,r,i){if(ZD(t)){const s=n?this._fetchNamespace(n):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i),r){const a=this.namespacesByHostElement.get(t);a&&a.id!==n&&a.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,r,i,s){this.collectedLeaveElements.push(t),t[lh]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(n,t,r,i,s){return ZD(t)?this._fetchNamespace(n).listen(t,r,i,s):()=>{}}_buildInstruction(n,t,r,i,s){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,s)}destroyInnerAnimations(n){let t=this.driver.query(n,zD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,q3,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return qg(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[lh];if(t&&t.setForRemoval){if(n[lh]=N9,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(sL)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ch(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?qg(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function H1e(e){return new Mt(3402,!1)}()}_flushAnimations(n,t){const r=new YD,i=[],s=new Map,a=[],l=new Map,d=new Map,m=new Map,y=new Set;this.disabledNodes.forEach(yt=>{y.add(yt);const xt=this.driver.query(yt,".ng-animate-queued",!0);for(let Zt=0;Zt<xt.length;Zt++)y.add(xt[Zt])});const T=this.bodyNode,D=Array.from(this.statesByElement.keys()),I=V9(D,this.collectedEnterElements),F=new Map;let L=0;I.forEach((yt,xt)=>{const Zt=Y3+L++;F.set(xt,Zt),yt.forEach(Pt=>ch(Pt,Zt))});const B=[],G=new Set,Z=new Set;for(let yt=0;yt<this.collectedLeaveElements.length;yt++){const xt=this.collectedLeaveElements[yt],Zt=xt[lh];Zt&&Zt.setForRemoval&&(B.push(xt),G.add(xt),Zt.hasAnimation?this.driver.query(xt,".ng-star-inserted",!0).forEach(Pt=>G.add(Pt)):Z.add(xt))}const q=new Map,oe=V9(D,Array.from(G));oe.forEach((yt,xt)=>{const Zt=ND+L++;q.set(xt,Zt),yt.forEach(Pt=>ch(Pt,Zt))}),n.push(()=>{I.forEach((yt,xt)=>{const Zt=F.get(xt);yt.forEach(Pt=>px(Pt,Zt))}),oe.forEach((yt,xt)=>{const Zt=q.get(xt);yt.forEach(Pt=>px(Pt,Zt))}),B.forEach(yt=>{this.processLeaveNode(yt)})});const _e=[],fe=[];for(let yt=this._namespaceList.length-1;yt>=0;yt--)this._namespaceList[yt].drainQueuedTransitions(t).forEach(Zt=>{const Pt=Zt.player,an=Zt.element;if(_e.push(Pt),this.collectedEnterElements.length){const en=an[lh];if(en&&en.setForMove){if(en.previousTriggersValues&&en.previousTriggersValues.has(Zt.triggerName)){const tn=en.previousTriggersValues.get(Zt.triggerName),qt=this.statesByElement.get(Zt.element);if(qt&&qt.has(Zt.triggerName)){const Vt=qt.get(Zt.triggerName);Vt.value=tn,qt.set(Zt.triggerName,Vt)}}return void Pt.destroy()}}const St=!T||!this.driver.containsElement(T,an),Pe=q.get(an),ut=F.get(an),Re=this._buildInstruction(Zt,r,ut,Pe,St);if(Re.errors&&Re.errors.length)return void fe.push(Re);if(St)return Pt.onStart(()=>wy(an,Re.fromStyles)),Pt.onDestroy(()=>xf(an,Re.toStyles)),void i.push(Pt);if(Zt.isFallbackTransition)return Pt.onStart(()=>wy(an,Re.fromStyles)),Pt.onDestroy(()=>xf(an,Re.toStyles)),void i.push(Pt);const je=[];Re.timelines.forEach(en=>{en.stretchStartingKeyframe=!0,this.disabledNodes.has(en.element)||je.push(en)}),Re.timelines=je,r.append(an,Re.timelines),a.push({instruction:Re,player:Pt,element:an}),Re.queriedElements.forEach(en=>lu(l,en,[]).push(Pt)),Re.preStyleProps.forEach((en,tn)=>{if(en.size){let qt=d.get(tn);qt||d.set(tn,qt=new Set),en.forEach((Vt,wr)=>qt.add(wr))}}),Re.postStyleProps.forEach((en,tn)=>{let qt=m.get(tn);qt||m.set(tn,qt=new Set),en.forEach((Vt,wr)=>qt.add(wr))})});if(fe.length){const yt=[];fe.forEach(xt=>{yt.push(function $1e(e,n){return new Mt(3505,!1)}())}),_e.forEach(xt=>xt.destroy()),this.reportError(yt)}const ae=new Map,De=new Map;a.forEach(yt=>{const xt=yt.element;r.has(xt)&&(De.set(xt,xt),this._beforeAnimationBuild(yt.player.namespaceId,yt.instruction,ae))}),i.forEach(yt=>{const xt=yt.element;this._getPreviousPlayers(xt,!1,yt.namespaceId,yt.triggerName,null).forEach(Pt=>{lu(ae,xt,[]).push(Pt),Pt.destroy()})});const Ie=B.filter(yt=>j9(yt,d,m)),qe=new Map;z9(qe,this.driver,Z,m,Kp).forEach(yt=>{j9(yt,d,m)&&Ie.push(yt)});const $e=new Map;I.forEach((yt,xt)=>{z9($e,this.driver,new Set(yt),d,M3)}),Ie.forEach(yt=>{const xt=qe.get(yt),Zt=$e.get(yt);qe.set(yt,new Map([...Array.from(xt?.entries()??[]),...Array.from(Zt?.entries()??[])]))});const jt=[],ln=[],zt={};a.forEach(yt=>{const{element:xt,player:Zt,instruction:Pt}=yt;if(r.has(xt)){if(y.has(xt))return Zt.onDestroy(()=>xf(xt,Pt.toStyles)),Zt.disabled=!0,Zt.overrideTotalTime(Pt.totalTime),void i.push(Zt);let an=zt;if(De.size>1){let Pe=xt;const ut=[];for(;Pe=Pe.parentNode;){const Re=De.get(Pe);if(Re){an=Re;break}ut.push(Pe)}ut.forEach(Re=>De.set(Re,an))}const St=this._buildAnimation(Zt.namespaceId,Pt,ae,s,$e,qe);if(Zt.setRealPlayer(St),an===zt)jt.push(Zt);else{const Pe=this.playersByElement.get(an);Pe&&Pe.length&&(Zt.parentPlayer=qg(Pe)),i.push(Zt)}}else wy(xt,Pt.fromStyles),Zt.onDestroy(()=>xf(xt,Pt.toStyles)),ln.push(Zt),y.has(xt)&&i.push(Zt)}),ln.forEach(yt=>{const xt=s.get(yt.element);if(xt&&xt.length){const Zt=qg(xt);yt.setRealPlayer(Zt)}}),i.forEach(yt=>{yt.parentPlayer?yt.syncPlayerEvents(yt.parentPlayer):yt.destroy()});for(let yt=0;yt<B.length;yt++){const xt=B[yt],Zt=xt[lh];if(px(xt,ND),Zt&&Zt.hasAnimation)continue;let Pt=[];if(l.size){let St=l.get(xt);St&&St.length&&Pt.push(...St);let Pe=this.driver.query(xt,q3,!0);for(let ut=0;ut<Pe.length;ut++){let Re=l.get(Pe[ut]);Re&&Re.length&&Pt.push(...Re)}}const an=Pt.filter(St=>!St.destroyed);an.length?Yve(this,xt,an):this.processLeaveNode(xt)}return B.length=0,jt.forEach(yt=>{this.players.push(yt),yt.onDone(()=>{yt.destroy();const xt=this.players.indexOf(yt);this.players.splice(xt,1)}),yt.play()}),jt}elementContainsData(n,t){let r=!1;const i=t[lh];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(n).elementContainsData(t)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,s){let a=[];if(t){const l=this.playersByQueriedElement.get(n);l&&(a=l)}else{const l=this.playersByElement.get(n);if(l){const d=!s||s==J2;l.forEach(m=>{m.queued||!d&&m.triggerName!=i||a.push(m)})}}return(r||i)&&(a=a.filter(l=>!(r&&r!=l.namespaceId||i&&i!=l.triggerName))),a}_beforeAnimationBuild(n,t,r){const s=t.element,a=t.isRemovalTransition?void 0:n,l=t.isRemovalTransition?void 0:t.triggerName;for(const d of t.timelines){const m=d.element,y=m!==s,T=lu(r,m,[]);this._getPreviousPlayers(m,y,a,l,t.toState).forEach(I=>{const F=I.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),I.destroy(),T.push(I)})}wy(s,t.fromStyles)}_buildAnimation(n,t,r,i,s,a){const l=t.triggerName,d=t.element,m=[],y=new Set,T=new Set,D=t.timelines.map(F=>{const L=F.element;y.add(L);const B=L[lh];if(B&&B.removedBeforeQueried)return new $2(F.duration,F.delay);const G=L!==d,Z=function qve(e){const n=[];return U9(e,n),n}((r.get(L)||Vve).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===L),q=s.get(L),oe=a.get(L),_e=f9(0,this._normalizer,0,F.keyframes,q,oe),fe=this._buildPlayer(F,_e,Z);if(F.subTimeline&&i&&T.add(L),G){const ae=new lL(n,l,L);ae.setRealPlayer(fe),m.push(ae)}return fe});m.forEach(F=>{lu(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function $ve(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,F.element,F))}),y.forEach(F=>ch(F,w9));const I=qg(D);return I.onDestroy(()=>{y.forEach(F=>px(F,w9)),xf(d,t.toStyles)}),T.forEach(F=>{lu(i,F,[]).push(I)}),I}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new $2(n.duration,n.delay)}}class lL{constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r,this._player=new $2,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>U3(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){lu(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function ZD(e){return e&&1===e.nodeType}function B9(e,n){const t=e.style.display;return e.style.display=n??"none",t}function z9(e,n,t,r,i){const s=[];t.forEach(d=>s.push(B9(d)));const a=[];r.forEach((d,m)=>{const y=new Map;d.forEach(T=>{const D=n.computeStyle(m,T,i);y.set(T,D),(!D||0==D.length)&&(m[lh]=Uve,a.push(m))}),e.set(m,y)});let l=0;return t.forEach(d=>B9(d,s[l++])),a}function V9(e,n){const t=new Map;if(e.forEach(l=>t.set(l,[])),0==n.length)return t;const r=1,i=new Set(n),s=new Map;function a(l){if(!l)return r;let d=s.get(l);if(d)return d;const m=l.parentNode;return d=t.has(m)?m:i.has(m)?r:a(m),s.set(l,d),d}return n.forEach(l=>{const d=a(l);d!==r&&t.get(d).push(l)}),t}function ch(e,n){e.classList?.add(n)}function px(e,n){e.classList?.remove(n)}function Yve(e,n,t){qg(t).onDone(()=>e.processLeaveNode(n))}function U9(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof jj?U9(r.players,n):n.push(r)}}function j9(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(s=>i.add(s)):n.set(e,r),t.delete(e),!0}class KD{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Hve(n,t,r),this._timelineEngine=new Fve(n,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(n,t,r,i,s){const a=n+"-"+i;let l=this._triggerCache[a];if(!l){const d=[],m=[],y=J3(this._driver,s,d,m);if(d.length)throw function O1e(e,n){return new Mt(3404,!1)}();l=function Ive(e,n,t){return new Pve(e,n,t)}(i,y,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,i,l)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r,i){this._transitionEngine.removeNode(n,t,i||!1,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[s,a]=p9(r);this._timelineEngine.command(s,t,a,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,s){if("@"==r.charAt(0)){const[a,l]=p9(r);return this._timelineEngine.listen(a,t,l,s)}return this._transitionEngine.listen(n,t,r,i,s)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Kve=(()=>{class e{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=e.initialStylesByElement.get(t);s||e.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&xf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xf(this._element,this._initialStyles),this._endStyles&&(xf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(wy(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wy(this._element,this._endStyles),this._endStyles=null),xf(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function cL(e){let n=null;return e.forEach((t,r)=>{(function Jve(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class H9{constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:M9(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Qve{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return y9(n,t)}getParentElement(n){return W3(n)}query(n,t,r){return v9(n,t,r)}computeStyle(n,t,r){return window.getComputedStyle(n)[t]}animate(n,t,r,i,s,a=[]){const d={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(d.easing=s);const m=new Map,y=a.filter(I=>I instanceof H9);(function rve(e,n){return 0===e||0===n})(r,i)&&y.forEach(I=>{I.currentSnapshot.forEach((F,L)=>m.set(L,F))});let T=function Q1e(e){return e.length?e[0]instanceof Map?e:e.map(n=>C9(n)):[]}(t).map(I=>Xg(I));T=function ive(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((s,a)=>{r.has(a)||i.push(a),r.set(a,s)}),i.length)for(let s=1;s<n.length;s++){let a=n[s];i.forEach(l=>a.set(l,M9(e,l)))}}return n}(n,T,m);const D=function Zve(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=cL(n[0]),n.length>1&&(r=cL(n[n.length-1]))):n instanceof Map&&(t=cL(n)),t||r?new Kve(e,t,r):null}(n,T);return new H9(n,T,d,D)}}let exe=(()=>{class e extends Bj{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ja.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?zj(t):t;return $9(this._renderer,null,r,"register",[i]),new txe(r,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(Jt(tg),Jt(No))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();class txe extends s_e{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new nxe(this._id,n,t||{},this._renderer)}}class nxe{constructor(n,t,r,i){this.id=n,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return $9(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function $9(e,n,t,r,i){return e.setProperty(n,`@@${t}:${r}`,i)}const W9="@.disabled";let rxe=(()=>{class e{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,a)=>{const l=a?.parentNode(s);l&&a.removeChild(l,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let y=this._rendererCache.get(s);return y||(y=new G9("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,y)),y}const a=r.id,l=r.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);const d=y=>{Array.isArray(y)?y.forEach(d):this.engine.registerTrigger(a,l,t,y.name,y)};return r.data.animation.forEach(d),new ixe(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,l]=s;a(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(Jt(tg),Jt(KD),Jt(ns))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();class G9{constructor(n,t,r,i){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==W9?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r){return this.delegate.listen(n,t,r)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class ixe extends G9{constructor(n,t,r,i,s){super(t,r,i,s),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==W9?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r){if("@"==t.charAt(0)){const i=function sxe(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function oxe(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(s)),this.engine.listen(this.namespaceId,i,s,a,l=>{this.factory.scheduleListenerCallback(l._data||-1,r,l)})}return this.delegate.listen(n,t,r)}}let axe=(()=>{class e extends KD{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(Jt(No),Jt(G3),Jt(rL),Jt(C_))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();const Y9=[{provide:Bj,useClass:exe},{provide:rL,useFactory:function lxe(){return new Dve}},{provide:KD,useClass:axe},{provide:tg,useFactory:function cxe(e,n,t){return new rxe(e,n,t)},deps:[jE,KD,ns]}],uL=[{provide:G3,useFactory:()=>new Qve},{provide:E4,useValue:"BrowserAnimations"},...Y9],q9=[{provide:G3,useClass:x9},{provide:E4,useValue:"NoopAnimations"},...Y9];let uxe=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?q9:uL}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({providers:uL,imports:[GN]}),e})();function Q2(e){return(Q2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}function Fn(e,n,t){return(n=function dxe(e){var n=function hxe(e,n){if("object"!==Q2(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==Q2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===Q2(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function mx(e){return e+.5|0}const em=(e,n,t)=>Math.max(Math.min(e,t),n);function eC(e){return em(mx(2.55*e),0,255)}function Zg(e){return em(mx(255*e),0,255)}function tm(e){return em(mx(e/2.55)/100,0,1)}function X9(e){return em(mx(100*e),0,100)}const uh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hL=[..."0123456789ABCDEF"],fxe=e=>hL[15&e],pxe=e=>hL[(240&e)>>4]+hL[15&e],QD=e=>(240&e)>>4==(15&e),vxe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Z9(e,n,t){const r=n*Math.min(t,1-t),i=(s,a=(s+e/30)%12)=>t-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function xxe(e,n,t){const r=(i,s=(i+e/60)%6)=>t-t*n*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function bxe(e,n,t){const r=Z9(e,1,.5);let i;for(n+t>1&&(i=1/(n+t),n*=i,t*=i),i=0;i<3;i++)r[i]*=1-n-t,r[i]+=n;return r}function dL(e){const t=e.r/255,r=e.g/255,i=e.b/255,s=Math.max(t,r,i),a=Math.min(t,r,i),l=(s+a)/2;let d,m,y;return s!==a&&(y=s-a,m=l>.5?y/(2-s-a):y/(s+a),d=function wxe(e,n,t,r,i){return e===i?(n-t)/r+(n<t?6:0):n===i?(t-e)/r+2:(e-n)/r+4}(t,r,i,y,s),d=60*d+.5),[0|d,m||0,l]}function fL(e,n,t,r){return(Array.isArray(n)?e(n[0],n[1],n[2]):e(n,t,r)).map(Zg)}function pL(e,n,t){return fL(Z9,e,n,t)}function K9(e){return(e%360+360)%360}const J9={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q9={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let eM;const Axe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,mL=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,gx=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function tM(e,n,t){if(e){let r=dL(e);r[n]=Math.max(0,Math.min(r[n]+r[n]*t,0===n?360:1)),r=pL(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function e7(e,n){return e&&Object.assign(n||{},e)}function t7(e){var n={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(n={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(n.a=Zg(e[3]))):(n=e7(e,{r:0,g:0,b:0,a:1})).a=Zg(n.a),n}function Lxe(e){return"r"===e.charAt(0)?function Ixe(e){const n=Axe.exec(e);let r,i,s,t=255;if(n){if(n[7]!==r){const a=+n[7];t=n[8]?eC(a):em(255*a,0,255)}return r=+n[1],i=+n[3],s=+n[5],r=255&(n[2]?eC(r):em(r,0,255)),i=255&(n[4]?eC(i):em(i,0,255)),s=255&(n[6]?eC(s):em(s,0,255)),{r,g:i,b:s,a:t}}}(e):function Exe(e){const n=vxe.exec(e);let r,t=255;if(!n)return;n[5]!==r&&(t=n[6]?eC(+n[5]):Zg(+n[5]));const i=K9(+n[2]),s=+n[3]/100,a=+n[4]/100;return r="hwb"===n[1]?function Cxe(e,n,t){return fL(bxe,e,n,t)}(i,s,a):"hsv"===n[1]?function Txe(e,n,t){return fL(xxe,e,n,t)}(i,s,a):pL(i,s,a),{r:r[0],g:r[1],b:r[2],a:t}}(e)}class _x{constructor(n){if(n instanceof _x)return n;const t=typeof n;let r;"object"===t?r=t7(n):"string"===t&&(r=function gxe(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*uh[e[1]],g:255&17*uh[e[2]],b:255&17*uh[e[3]],a:5===n?17*uh[e[4]]:255}:(7===n||9===n)&&(t={r:uh[e[1]]<<4|uh[e[2]],g:uh[e[3]]<<4|uh[e[4]],b:uh[e[5]]<<4|uh[e[6]],a:9===n?uh[e[7]]<<4|uh[e[8]]:255})),t}(n)||function kxe(e){eM||(eM=function Mxe(){const e={},n=Object.keys(Q9),t=Object.keys(J9);let r,i,s,a,l;for(r=0;r<n.length;r++){for(a=l=n[r],i=0;i<t.length;i++)s=t[i],l=l.replace(s,J9[s]);s=parseInt(Q9[a],16),e[l]=[s>>16&255,s>>8&255,255&s]}return e}(),eM.transparent=[0,0,0,0]);const n=eM[e.toLowerCase()];return n&&{r:n[0],g:n[1],b:n[2],a:4===n.length?n[3]:255}}(n)||Lxe(n)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var n=e7(this._rgb);return n&&(n.a=tm(n.a)),n}set rgb(n){this._rgb=t7(n)}rgbString(){return this._valid?function Pxe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${tm(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function yxe(e){var n=(e=>QD(e.r)&&QD(e.g)&&QD(e.b)&&QD(e.a))(e)?fxe:pxe;return e?"#"+n(e.r)+n(e.g)+n(e.b)+((e,n)=>e<255?n(e):"")(e.a,n):void 0}(this._rgb):void 0}hslString(){return this._valid?function Dxe(e){if(!e)return;const n=dL(e),t=n[0],r=X9(n[1]),i=X9(n[2]);return e.a<255?`hsla(${t}, ${r}%, ${i}%, ${tm(e.a)})`:`hsl(${t}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(n,t){if(n){const r=this.rgb,i=n.rgb;let s;const a=t===s?.5:t,l=2*a-1,d=r.a-i.a,m=((l*d==-1?l:(l+d)/(1+l*d))+1)/2;s=1-m,r.r=255&m*r.r+s*i.r+.5,r.g=255&m*r.g+s*i.g+.5,r.b=255&m*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(n,t){return n&&(this._rgb=function Oxe(e,n,t){const r=gx(tm(e.r)),i=gx(tm(e.g)),s=gx(tm(e.b));return{r:Zg(mL(r+t*(gx(tm(n.r))-r))),g:Zg(mL(i+t*(gx(tm(n.g))-i))),b:Zg(mL(s+t*(gx(tm(n.b))-s))),a:e.a+t*(n.a-e.a)}}(this._rgb,n._rgb,t)),this}clone(){return new _x(this.rgb)}alpha(n){return this._rgb.a=Zg(n),this}clearer(n){return this._rgb.a*=1-n,this}greyscale(){const n=this._rgb,t=mx(.3*n.r+.59*n.g+.11*n.b);return n.r=n.g=n.b=t,this}opaquer(n){return this._rgb.a*=1+n,this}negate(){const n=this._rgb;return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,this}lighten(n){return tM(this._rgb,2,n),this}darken(n){return tM(this._rgb,2,-n),this}saturate(n){return tM(this._rgb,1,n),this}desaturate(n){return tM(this._rgb,1,-n),this}rotate(n){return function Sxe(e,n){var t=dL(e);t[0]=K9(t[0]+n),t=pL(t),e.r=t[0],e.g=t[1],e.b=t[2]}(this._rgb,n),this}}function nm(){}const Fxe=(()=>{let e=0;return()=>e++})();function Mi(e){return null===e||typeof e>"u"}function Es(e){if(Array.isArray&&Array.isArray(e))return!0;const n=Object.prototype.toString.call(e);return"[object"===n.slice(0,7)&&"Array]"===n.slice(-6)}function hi(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function eo(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function uu(e,n){return eo(e)?e:n}function Ir(e,n){return typeof e>"u"?n:e}const n7=(e,n)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*n:+e;function ss(e,n,t){if(e&&"function"==typeof e.call)return e.apply(t,n)}function ji(e,n,t,r){let i,s,a;if(Es(e))if(s=e.length,r)for(i=s-1;i>=0;i--)n.call(t,e[i],i);else for(i=0;i<s;i++)n.call(t,e[i],i);else if(hi(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)n.call(t,e[a[i]],a[i])}function nM(e,n){let t,r,i,s;if(!e||!n||e.length!==n.length)return!1;for(t=0,r=e.length;t<r;++t)if(i=e[t],s=n[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function rM(e){if(Es(e))return e.map(rM);if(hi(e)){const n=Object.create(null),t=Object.keys(e),r=t.length;let i=0;for(;i<r;++i)n[t[i]]=rM(e[t[i]]);return n}return e}function r7(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Nxe(e,n,t,r){if(!r7(e))return;const i=n[e],s=t[e];hi(i)&&hi(s)?tC(i,s,r):n[e]=rM(s)}function tC(e,n,t){const r=Es(n)?n:[n],i=r.length;if(!hi(e))return e;const s=(t=t||{}).merger||Nxe;let a;for(let l=0;l<i;++l){if(a=r[l],!hi(a))continue;const d=Object.keys(a);for(let m=0,y=d.length;m<y;++m)s(d[m],e,a,t)}return e}function nC(e,n){return tC(e,n,{merger:Bxe})}function Bxe(e,n,t){if(!r7(e))return;const r=n[e],i=t[e];hi(r)&&hi(i)?nC(r,i):Object.prototype.hasOwnProperty.call(n,e)||(n[e]=rM(i))}const s7={"":e=>e,x:e=>e.x,y:e=>e.y};function Kg(e,n){return(s7[n]||(s7[n]=function Vxe(e){const n=function zxe(e){const n=e.split("."),t=[];let r="";for(const i of n)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}(e);return t=>{for(const r of n){if(""===r)break;t=t&&t[r]}return t}}(n)))(e)}function gL(e){return e.charAt(0).toUpperCase()+e.slice(1)}const hh=e=>typeof e<"u",Jg=e=>"function"==typeof e,o7=(e,n)=>{if(e.size!==n.size)return!1;for(const t of e)if(!n.has(t))return!1;return!0},Os=Math.PI,Ss=2*Os,jxe=Ss+Os,iM=Number.POSITIVE_INFINITY,Hxe=Os/180,to=Os/2,Ty=Os/4,a7=2*Os/3,Qg=Math.log10,bf=Math.sign;function rC(e,n,t){return Math.abs(e-n)<t}function l7(e){const n=Math.round(e);e=rC(e,n,e/1e3)?n:e;const t=Math.pow(10,Math.floor(Qg(e))),r=e/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function yx(e){return!isNaN(parseFloat(e))&&isFinite(e)}function c7(e,n,t){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][t],isNaN(s)||(n.min=Math.min(n.min,s),n.max=Math.max(n.max,s))}function ed(e){return e*(Os/180)}function _L(e){return e*(180/Os)}function u7(e){if(!eo(e))return;let n=1,t=0;for(;Math.round(e*n)/n!==e;)n*=10,t++;return t}function h7(e,n){const t=n.x-e.x,r=n.y-e.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Os&&(s+=Ss),{angle:s,distance:i}}function yL(e,n){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Gxe(e,n){return(e-n+jxe)%Ss-Os}function hu(e){return(e%Ss+Ss)%Ss}function iC(e,n,t,r){const i=hu(e),s=hu(n),a=hu(t),l=hu(s-i),d=hu(a-i),m=hu(i-s),y=hu(i-a);return i===s||i===a||r&&s===a||l>d&&m<y}function Ma(e,n,t){return Math.max(n,Math.min(t,e))}function rm(e,n,t,r=1e-6){return e>=Math.min(n,t)-r&&e<=Math.max(n,t)+r}function vL(e,n,t){t=t||(a=>e[a]<n);let s,r=e.length-1,i=0;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const im=(e,n,t,r)=>vL(e,t,r?i=>{const s=e[i][n];return s<t||s===t&&e[i+1][n]===t}:i=>e[i][n]<t),qxe=(e,n,t)=>vL(e,t,r=>e[r][n]>=t),d7=["push","pop","shift","splice","unshift"];function f7(e,n){const t=e._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(n);-1!==i&&r.splice(i,1),!(r.length>0)&&(d7.forEach(s=>{delete e[s]}),delete e._chartjs)}function p7(e){const n=new Set;let t,r;for(t=0,r=e.length;t<r;++t)n.add(e[t]);return n.size===r?e:Array.from(n)}const m7=typeof window>"u"?function(e){return e()}:window.requestAnimationFrame;function g7(e,n){let t=[],r=!1;return function(...i){t=i,r||(r=!0,m7.call(window,()=>{r=!1,e.apply(n,t)}))}}const xL=e=>"start"===e?"left":"end"===e?"right":"center",yl=(e,n,t)=>"start"===e?n:"end"===e?t:(n+t)/2;function _7(e,n,t){const r=n.length;let i=0,s=r;if(e._sorted){const{iScale:a,_parsed:l}=e,d=a.axis,{min:m,max:y,minDefined:T,maxDefined:D}=a.getUserBounds();T&&(i=Ma(Math.min(im(l,a.axis,m).lo,t?r:im(n,d,a.getPixelForValue(m)).lo),0,r-1)),s=D?Ma(Math.max(im(l,a.axis,y,!0).hi+1,t?0:im(n,d,a.getPixelForValue(y),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function y7(e){const{xScale:n,yScale:t,_scaleRanges:r}=e,i={xmin:n.min,xmax:n.max,ymin:t.min,ymax:t.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==n.min||r.xmax!==n.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const sM=e=>0===e||1===e,v7=(e,n,t)=>-Math.pow(2,10*(e-=1))*Math.sin((e-n)*Ss/t),x7=(e,n,t)=>Math.pow(2,-10*e)*Math.sin((e-n)*Ss/t)+1,sC={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*to),easeOutSine:e=>Math.sin(e*to),easeInOutSine:e=>-.5*(Math.cos(Os*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>sM(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>sM(e)?e:v7(e,.075,.3),easeOutElastic:e=>sM(e)?e:x7(e,.075,.3),easeInOutElastic:e=>sM(e)?e:e<.5?.5*v7(2*e,.1125,.45):.5+.5*x7(2*e-1,.1125,.45),easeInBack:e=>e*e*(2.70158*e-1.70158),easeOutBack:e=>(e-=1)*e*(2.70158*e+1.70158)+1,easeInOutBack(e){let n=1.70158;return(e/=.5)<1?e*e*((1+(n*=1.525))*e-n)*.5:.5*((e-=2)*e*((1+(n*=1.525))*e+n)+2)},easeInBounce:e=>1-sC.easeOutBounce(1-e),easeOutBounce:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,easeInOutBounce:e=>e<.5?.5*sC.easeInBounce(2*e):.5*sC.easeOutBounce(2*e-1)+.5};function b7(e){if(e&&"object"==typeof e){const n=e.toString();return"[object CanvasPattern]"===n||"[object CanvasGradient]"===n}return!1}function w7(e){return b7(e)?e:new _x(e)}function bL(e){return b7(e)?e:new _x(e).saturate(.5).darken(.1).hexString()}const Qxe=["x","y","borderWidth","radius","tension"],ebe=["color","borderColor","backgroundColor"],C7=new Map;function oC(e,n,t){return function rbe(e,n){n=n||{};const t=e+JSON.stringify(n);let r=C7.get(t);return r||(r=new Intl.NumberFormat(e,n),C7.set(t,r)),r}(n,t).format(e)}const T7={values:e=>Es(e)?e:""+e,numeric(e,n,t){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(t.length>1){const m=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(m<1e-4||m>1e15)&&(i="scientific"),s=function ibe(e,n){let t=n.length>3?n[2].value-n[1].value:n[1].value-n[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}(e,t)}const a=Qg(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(a),20),0),d={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),oC(e,r,d)},logarithmic(e,n,t){if(0===e)return"0";const r=t[n].significand||e/Math.pow(10,Math.floor(Qg(e)));return[1,2,3,5,10,15].includes(r)||n>.8*t.length?T7.numeric.call(this,e,n,t):""}};var oM={formatters:T7};const Ey=Object.create(null),wL=Object.create(null);function aC(e,n){if(!n)return e;const t=n.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];e=e[s]||(e[s]=Object.create(null))}return e}function CL(e,n,t){return"string"==typeof n?tC(aC(e,n),t):tC(aC(e,""),n)}class obe{constructor(n,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>bL(i.backgroundColor),this.hoverBorderColor=(r,i)=>bL(i.borderColor),this.hoverColor=(r,i)=>bL(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(n),this.apply(t)}set(n,t){return CL(this,n,t)}get(n){return aC(this,n)}describe(n,t){return CL(wL,n,t)}override(n,t){return CL(Ey,n,t)}route(n,t,r,i){const s=aC(this,n),a=aC(this,r),l="_"+t;Object.defineProperties(s,{[l]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[l],m=a[i];return hi(d)?Object.assign({},m,d):Ir(d,m)},set(d){this[l]=d}}})}apply(n){n.forEach(t=>t(this))}}var no=new obe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function tbe(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>"onProgress"!==n&&"onComplete"!==n&&"fn"!==n}),e.set("animations",{colors:{type:"color",properties:ebe},numbers:{type:"number",properties:Qxe}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>0|n}}}})},function nbe(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function sbe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:oM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&"callback"!==n&&"parser"!==n,_indexable:n=>"borderDash"!==n&&"tickBorderDash"!==n&&"dash"!==n}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:n=>"backdropPadding"!==n&&"callback"!==n,_indexable:n=>"backdropPadding"!==n})}]);function aM(e,n,t,r,i){let s=n[i];return s||(s=n[i]=e.measureText(i).width,t.push(i)),s>r&&(r=s),r}function lbe(e,n,t,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==n&&(i=r.data={},s=r.garbageCollect=[],r.font=n),e.save(),e.font=n;let a=0;const l=t.length;let d,m,y,T,D;for(d=0;d<l;d++)if(T=t[d],null!=T&&!0!==Es(T))a=aM(e,i,s,a,T);else if(Es(T))for(m=0,y=T.length;m<y;m++)D=T[m],null!=D&&!Es(D)&&(a=aM(e,i,s,a,D));e.restore();const I=s.length/2;if(I>t.length){for(d=0;d<I;d++)delete i[s[d]];s.splice(0,I)}return a}function Sy(e,n,t){const r=e.currentDevicePixelRatio,i=0!==t?Math.max(t/2,.5):0;return Math.round((n-i)*r)/r+i}function E7(e,n){(n=n||e.getContext("2d")).save(),n.resetTransform(),n.clearRect(0,0,e.width,e.height),n.restore()}function TL(e,n,t,r){S7(e,n,t,r,null)}function S7(e,n,t,r,i){let s,a,l,d,m,y,T,D;const I=n.pointStyle,F=n.rotation,L=n.radius;let B=(F||0)*Hxe;if(I&&"object"==typeof I&&(s=I.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(t,r),e.rotate(B),e.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),void e.restore();if(!(isNaN(L)||L<=0)){switch(e.beginPath(),I){default:i?e.ellipse(t,r,i/2,L,0,0,Ss):e.arc(t,r,L,0,Ss),e.closePath();break;case"triangle":y=i?i/2:L,e.moveTo(t+Math.sin(B)*y,r-Math.cos(B)*L),B+=a7,e.lineTo(t+Math.sin(B)*y,r-Math.cos(B)*L),B+=a7,e.lineTo(t+Math.sin(B)*y,r-Math.cos(B)*L),e.closePath();break;case"rectRounded":m=.516*L,d=L-m,a=Math.cos(B+Ty)*d,T=Math.cos(B+Ty)*(i?i/2-m:d),l=Math.sin(B+Ty)*d,D=Math.sin(B+Ty)*(i?i/2-m:d),e.arc(t-T,r-l,m,B-Os,B-to),e.arc(t+D,r-a,m,B-to,B),e.arc(t+T,r+l,m,B,B+to),e.arc(t-D,r+a,m,B+to,B+Os),e.closePath();break;case"rect":if(!F){d=Math.SQRT1_2*L,y=i?i/2:d,e.rect(t-y,r-d,2*y,2*d);break}B+=Ty;case"rectRot":T=Math.cos(B)*(i?i/2:L),a=Math.cos(B)*L,l=Math.sin(B)*L,D=Math.sin(B)*(i?i/2:L),e.moveTo(t-T,r-l),e.lineTo(t+D,r-a),e.lineTo(t+T,r+l),e.lineTo(t-D,r+a),e.closePath();break;case"crossRot":B+=Ty;case"cross":T=Math.cos(B)*(i?i/2:L),a=Math.cos(B)*L,l=Math.sin(B)*L,D=Math.sin(B)*(i?i/2:L),e.moveTo(t-T,r-l),e.lineTo(t+T,r+l),e.moveTo(t+D,r-a),e.lineTo(t-D,r+a);break;case"star":T=Math.cos(B)*(i?i/2:L),a=Math.cos(B)*L,l=Math.sin(B)*L,D=Math.sin(B)*(i?i/2:L),e.moveTo(t-T,r-l),e.lineTo(t+T,r+l),e.moveTo(t+D,r-a),e.lineTo(t-D,r+a),B+=Ty,T=Math.cos(B)*(i?i/2:L),a=Math.cos(B)*L,l=Math.sin(B)*L,D=Math.sin(B)*(i?i/2:L),e.moveTo(t-T,r-l),e.lineTo(t+T,r+l),e.moveTo(t+D,r-a),e.lineTo(t-D,r+a);break;case"line":a=i?i/2:Math.cos(B)*L,l=Math.sin(B)*L,e.moveTo(t-a,r-l),e.lineTo(t+a,r+l);break;case"dash":e.moveTo(t,r),e.lineTo(t+Math.cos(B)*(i?i/2:L),r+Math.sin(B)*L);break;case!1:e.closePath()}e.fill(),n.borderWidth>0&&e.stroke()}}function lC(e,n,t){return t=t||.5,!n||e&&e.x>n.left-t&&e.x<n.right+t&&e.y>n.top-t&&e.y<n.bottom+t}function lM(e,n){e.save(),e.beginPath(),e.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip()}function cM(e){e.restore()}function cbe(e,n,t,r,i){if(!n)return e.lineTo(t.x,t.y);if("middle"===i){const s=(n.x+t.x)/2;e.lineTo(s,n.y),e.lineTo(s,t.y)}else"after"===i!=!!r?e.lineTo(n.x,t.y):e.lineTo(t.x,n.y);e.lineTo(t.x,t.y)}function ube(e,n,t,r){if(!n)return e.lineTo(t.x,t.y);e.bezierCurveTo(r?n.cp1x:n.cp2x,r?n.cp1y:n.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Dy(e,n,t,r,i,s={}){const a=Es(n)?n:[n],l=s.strokeWidth>0&&""!==s.strokeColor;let d,m;for(e.save(),e.font=i.string,function hbe(e,n){n.translation&&e.translate(n.translation[0],n.translation[1]),Mi(n.rotation)||e.rotate(n.rotation),n.color&&(e.fillStyle=n.color),n.textAlign&&(e.textAlign=n.textAlign),n.textBaseline&&(e.textBaseline=n.textBaseline)}(e,s),d=0;d<a.length;++d)m=a[d],s.backdrop&&fbe(e,s.backdrop),l&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Mi(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(m,t,r,s.maxWidth)),e.fillText(m,t,r,s.maxWidth),dbe(e,t,r,m,s),r+=i.lineHeight;e.restore()}function dbe(e,n,t,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=n-s.actualBoundingBoxLeft,l=n+s.actualBoundingBoxRight,m=t+s.actualBoundingBoxDescent,y=i.strikethrough?(t-s.actualBoundingBoxAscent+m)/2:m;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,y),e.lineTo(l,y),e.stroke()}}function fbe(e,n){const t=e.fillStyle;e.fillStyle=n.color,e.fillRect(n.left,n.top,n.width,n.height),e.fillStyle=t}function cC(e,n){const{x:t,y:r,w:i,h:s,radius:a}=n;e.arc(t+a.topLeft,r+a.topLeft,a.topLeft,-to,Os,!0),e.lineTo(t,r+s-a.bottomLeft),e.arc(t+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Os,to,!0),e.lineTo(t+i-a.bottomRight,r+s),e.arc(t+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,to,0,!0),e.lineTo(t+i,r+a.topRight),e.arc(t+i-a.topRight,r+a.topRight,a.topRight,0,-to,!0),e.lineTo(t+a.topLeft,r)}const pbe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mbe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gbe(e,n){const t=(""+e).match(pbe);if(!t||"normal"===t[1])return 1.2*n;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100}return n*e}const _be=e=>+e||0;function EL(e,n){const t={},r=hi(n),i=r?Object.keys(n):n,s=hi(e)?r?a=>Ir(e[a],e[n[a]]):a=>e[a]:()=>e;for(const a of i)t[a]=_be(s(a));return t}function D7(e){return EL(e,{top:"y",right:"x",bottom:"y",left:"x"})}function My(e){return EL(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vl(e){const n=D7(e);return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function ca(e,n){let t=Ir((e=e||{}).size,(n=n||no.font).size);"string"==typeof t&&(t=parseInt(t,10));let r=Ir(e.style,n.style);r&&!(""+r).match(mbe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ir(e.family,n.family),lineHeight:gbe(Ir(e.lineHeight,n.lineHeight),t),size:t,style:r,weight:Ir(e.weight,n.weight),string:""};return i.string=function abe(e){return!e||Mi(e.size)||Mi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function uC(e,n,t,r){let s,a,l,i=!0;for(s=0,a=e.length;s<a;++s)if(l=e[s],void 0!==l&&(void 0!==n&&"function"==typeof l&&(l=l(n),i=!1),void 0!==t&&Es(l)&&(l=l[t%l.length],i=!1),void 0!==l))return r&&!i&&(r.cacheable=!1),l}function e0(e,n){return Object.assign(Object.create(e),n)}function SL(e,n=[""],t=e,r,i=(()=>e[0])){hh(r)||(r=P7("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:t,_fallback:r,_getTarget:i,override:a=>SL([a,...e],n,t,r)};return new Proxy(s,{deleteProperty:(a,l)=>(delete a[l],delete a._keys,delete e[0][l],!0),get:(a,l)=>k7(a,l,()=>function Sbe(e,n,t,r){let i;for(const s of n)if(i=P7(vbe(s,e),t),hh(i))return DL(e,i)?ML(t,r,e,i):i}(l,n,e,a)),getOwnPropertyDescriptor:(a,l)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(a,l)=>O7(a).includes(l),ownKeys:a=>O7(a),set(a,l,d){const m=a._storage||(a._storage=i());return a[l]=m[l]=d,delete a._keys,!0}})}function vx(e,n,t,r){const i={_cacheable:!1,_proxy:e,_context:n,_subProxy:t,_stack:new Set,_descriptors:M7(e,r),setContext:s=>vx(e,s,t,r),override:s=>vx(e.override(s),n,t,r)};return new Proxy(i,{deleteProperty:(s,a)=>(delete s[a],delete e[a],!0),get:(s,a,l)=>k7(s,a,()=>function xbe(e,n,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let l=r[n];return Jg(l)&&a.isScriptable(n)&&(l=function bbe(e,n,t,r){const{_proxy:i,_context:s,_subProxy:a,_stack:l}=t;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);return l.add(e),n=n(s,a||r),l.delete(e),DL(e,n)&&(n=ML(i._scopes,i,e,n)),n}(n,l,e,t)),Es(l)&&l.length&&(l=function wbe(e,n,t,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=t;if(hh(s.index)&&r(e))n=n[s.index%n.length];else if(hi(n[0])){const d=n,m=i._scopes.filter(y=>y!==d);n=[];for(const y of d){const T=ML(m,i,e,y);n.push(vx(T,s,a&&a[e],l))}}return n}(n,l,e,a.isIndexable)),DL(n,l)&&(l=vx(l,i,s&&s[n],a)),l}(s,a,l)),getOwnPropertyDescriptor:(s,a)=>s._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(s,a)=>Reflect.has(e,a),ownKeys:()=>Reflect.ownKeys(e),set:(s,a,l)=>(e[a]=l,delete s[a],!0)})}function M7(e,n={scriptable:!0,indexable:!0}){const{_scriptable:t=n.scriptable,_indexable:r=n.indexable,_allKeys:i=n.allKeys}=e;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Jg(t)?t:()=>t,isIndexable:Jg(r)?r:()=>r}}const vbe=(e,n)=>e?e+gL(n):n,DL=(e,n)=>hi(n)&&"adapters"!==e&&(null===Object.getPrototypeOf(n)||n.constructor===Object);function k7(e,n,t){if(Object.prototype.hasOwnProperty.call(e,n))return e[n];const r=t();return e[n]=r,r}function A7(e,n,t){return Jg(e)?e(n,t):e}const Cbe=(e,n)=>!0===e?n:"string"==typeof e?Kg(n,e):void 0;function Tbe(e,n,t,r,i){for(const s of n){const a=Cbe(t,s);if(a){e.add(a);const l=A7(a._fallback,t,i);if(hh(l)&&l!==t&&l!==r)return l}else if(!1===a&&hh(r)&&t!==r)return null}return!1}function ML(e,n,t,r){const i=n._rootScopes,s=A7(n._fallback,t,r),a=[...e,...i],l=new Set;l.add(r);let d=I7(l,a,t,s||t,r);return!(null===d||hh(s)&&s!==t&&(d=I7(l,a,s,d,r),null===d))&&SL(Array.from(l),[""],i,s,()=>function Ebe(e,n,t){const r=e._getTarget();n in r||(r[n]={});const i=r[n];return Es(i)&&hi(t)?t:i||{}}(n,t,r))}function I7(e,n,t,r,i){for(;t;)t=Tbe(e,n,t,r,i);return t}function P7(e,n){for(const t of n){if(!t)continue;const r=t[e];if(hh(r))return r}}function O7(e){let n=e._keys;return n||(n=e._keys=function Dbe(e){const n=new Set;for(const t of e)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))n.add(r);return Array.from(n)}(e._scopes)),n}function L7(e,n,t,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let l,d,m,y;for(l=0,d=r;l<d;++l)m=l+t,y=n[m],a[l]={r:i.parse(Kg(y,s),m)};return a}const Mbe=Number.EPSILON||1e-14,xx=(e,n)=>n<e.length&&!e[n].skip&&e[n],F7=e=>"x"===e?"y":"x";function kbe(e,n,t,r){const i=e.skip?n:e,s=n,a=t.skip?n:t,l=yL(s,i),d=yL(a,s);let m=l/(l+d),y=d/(l+d);m=isNaN(m)?0:m,y=isNaN(y)?0:y;const T=r*m,D=r*y;return{previous:{x:s.x-T*(a.x-i.x),y:s.y-T*(a.y-i.y)},next:{x:s.x+D*(a.x-i.x),y:s.y+D*(a.y-i.y)}}}function uM(e,n,t){return Math.max(Math.min(e,t),n)}function Lbe(e,n,t,r,i){let s,a,l,d;if(n.spanGaps&&(e=e.filter(m=>!m.skip)),"monotone"===n.cubicInterpolationMode)!function Pbe(e,n="x"){const t=F7(n),r=e.length,i=Array(r).fill(0),s=Array(r);let a,l,d,m=xx(e,0);for(a=0;a<r;++a)if(l=d,d=m,m=xx(e,a+1),d){if(m){const y=m[n]-d[n];i[a]=0!==y?(m[t]-d[t])/y:0}s[a]=l?m?bf(i[a-1])!==bf(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}(function Abe(e,n,t){const r=e.length;let i,s,a,l,d,m=xx(e,0);for(let y=0;y<r-1;++y)if(d=m,m=xx(e,y+1),d&&m){if(rC(n[y],0,Mbe)){t[y]=t[y+1]=0;continue}i=t[y]/n[y],s=t[y+1]/n[y],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(a=3/Math.sqrt(l),t[y]=i*a*n[y],t[y+1]=s*a*n[y])}})(e,i,s),function Ibe(e,n,t="x"){const r=F7(t),i=e.length;let s,a,l,d=xx(e,0);for(let m=0;m<i;++m){if(a=l,l=d,d=xx(e,m+1),!l)continue;const y=l[t],T=l[r];a&&(s=(y-a[t])/3,l[`cp1${t}`]=y-s,l[`cp1${r}`]=T-s*n[m]),d&&(s=(d[t]-y)/3,l[`cp2${t}`]=y+s,l[`cp2${r}`]=T+s*n[m])}}(e,s,n)}(e,i);else{let m=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)l=e[s],d=kbe(m,l,e[Math.min(s+1,a-(r?0:1))%a],n.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,m=l}n.capBezierPoints&&function Obe(e,n){let t,r,i,s,a,l=lC(e[0],n);for(t=0,r=e.length;t<r;++t)a=s,s=l,l=t<r-1&&lC(e[t+1],n),s&&(i=e[t],a&&(i.cp1x=uM(i.cp1x,n.left,n.right),i.cp1y=uM(i.cp1y,n.top,n.bottom)),l&&(i.cp2x=uM(i.cp2x,n.left,n.right),i.cp2y=uM(i.cp2y,n.top,n.bottom)))}(e,t)}function R7(){return typeof window<"u"&&typeof document<"u"}function kL(e){let n=e.parentNode;return n&&"[object ShadowRoot]"===n.toString()&&(n=n.host),n}function hM(e,n,t){let r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*n.parentNode[t])):r=e,r}const dM=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),Rbe=["top","right","bottom","left"];function ky(e,n,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=Rbe[i];r[s]=parseFloat(e[n+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Nbe=(e,n,t)=>(e>0||n>0)&&(!t||!t.shadowRoot);function Ay(e,n){if("native"in e)return e;const{canvas:t,currentDevicePixelRatio:r}=n,i=dM(t),s="border-box"===i.boxSizing,a=ky(i,"padding"),l=ky(i,"border","width"),{x:d,y:m,box:y}=function Bbe(e,n){const t=e.touches,r=t&&t.length?t[0]:e,{offsetX:i,offsetY:s}=r;let l,d,a=!1;if(Nbe(i,s,e.target))l=i,d=s;else{const m=n.getBoundingClientRect();l=r.clientX-m.left,d=r.clientY-m.top,a=!0}return{x:l,y:d,box:a}}(e,t),T=a.left+(y&&l.left),D=a.top+(y&&l.top);let{width:I,height:F}=n;return s&&(I-=a.width+l.width,F-=a.height+l.height),{x:Math.round((d-T)/I*t.width/r),y:Math.round((m-D)/F*t.height/r)}}const fM=e=>Math.round(10*e)/10;function N7(e,n,t){const r=n||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${e.height}px`,a.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const Ube=function(){let e=!1;try{const n={get passive(){return e=!0,!1}};window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{}return e}();function B7(e,n){const t=function Fbe(e,n){return dM(e).getPropertyValue(n)}(e,n),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Iy(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)}}function jbe(e,n,t,r){return{x:e.x+t*(n.x-e.x),y:"middle"===r?t<.5?e.y:n.y:"after"===r?t<1?e.y:n.y:t>0?n.y:e.y}}function Hbe(e,n,t,r){const i={x:e.cp2x,y:e.cp2y},s={x:n.cp1x,y:n.cp1y},a=Iy(e,i,t),l=Iy(i,s,t),d=Iy(s,n,t),m=Iy(a,l,t),y=Iy(l,d,t);return Iy(m,y,t)}const $be=function(e,n){return{x:t=>e+e+n-t,setWidth(t){n=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,r)=>t-r,leftForLtr:(t,r)=>t-r}},Wbe=function(){return{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,n)=>e+n,leftForLtr:(e,n)=>e}};function bx(e,n,t){return e?$be(n,t):Wbe()}function z7(e,n){let t,r;("ltr"===n||"rtl"===n)&&(t=e.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",n,"important"),e.prevTextDirection=r)}function V7(e,n){void 0!==n&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",n[0],n[1]))}function U7(e){return"angle"===e?{between:iC,compare:Gxe,normalize:hu}:{between:rm,compare:(n,t)=>n-t,normalize:n=>n}}function j7({start:e,end:n,count:t,loop:r,style:i}){return{start:e%t,end:n%t,loop:r&&(n-e+1)%t==0,style:i}}function H7(e,n,t){if(!t)return[e];const{property:r,start:i,end:s}=t,a=n.length,{compare:l,between:d,normalize:m}=U7(r),{start:y,end:T,loop:D,style:I}=function Gbe(e,n,t){const{property:r,start:i,end:s}=t,{between:a,normalize:l}=U7(r),d=n.length;let D,I,{start:m,end:y,loop:T}=e;if(T){for(m+=d,y+=d,D=0,I=d;D<I&&a(l(n[m%d][r]),i,s);++D)m--,y--;m%=d,y%=d}return y<m&&(y+=d),{start:m,end:y,loop:T,style:e.style}}(e,n,t),F=[];let G,Z,q,L=!1,B=null;for(let De=y,Ie=y;De<=T;++De)Z=n[De%a],!Z.skip&&(G=m(Z[r]),G!==q&&(L=d(G,i,s),null===B&&(L||d(i,q,G)&&0!==l(i,q))&&(B=0===l(G,i)?De:Ie),null!==B&&(!L||0===l(s,G)||d(s,q,G))&&(F.push(j7({start:B,end:De,loop:D,count:a,style:I})),B=null),Ie=De,q=G));return null!==B&&F.push(j7({start:B,end:T,loop:D,count:a,style:I})),F}function $7(e,n){const t=[],r=e.segments;for(let i=0;i<r.length;i++){const s=H7(r[i],e.points,n);s.length&&t.push(...s)}return t}function G7(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Kbe(e,n){return n&&JSON.stringify(e)!==JSON.stringify(n)}class Jbe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(n,t,r,i){const a=t.duration;t.listeners[i].forEach(l=>l({chart:n,initial:t.initial,numSteps:a,currentStep:Math.min(r-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=m7.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(n=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let d,a=s.length-1,l=!1;for(;a>=0;--a)d=s[a],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(n),l=!0):(s[a]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,n,"progress")),s.length||(r.running=!1,this._notify(i,r,n,"complete"),r.initial=!1),t+=s.length}),this._lastDate=n,0===t&&(this._running=!1)}_getAnims(n){const t=this._charts;let r=t.get(n);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(n,r)),r}listen(n,t,r){this._getAnims(n).listeners[t].push(r)}add(n,t){!t||!t.length||this._getAnims(n).items.push(...t)}has(n){return this._getAnims(n).items.length>0}start(n){const t=this._charts.get(n);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(n){if(!this._running)return!1;const t=this._charts.get(n);return!(!t||!t.running||!t.items.length)}stop(n){const t=this._charts.get(n);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(n,t,Date.now(),"complete")}remove(n){return this._charts.delete(n)}}var sm=new Jbe;const Y7="transparent",Qbe={boolean:(e,n,t)=>t>.5?n:e,color(e,n,t){const r=w7(e||Y7),i=r.valid&&w7(n||Y7);return i&&i.valid?i.mix(r,t).hexString():n},number:(e,n,t)=>e+(n-e)*t};class ewe{constructor(n,t,r,i){const s=t[r];i=uC([n.to,i,s,n.from]);const a=uC([n.from,s,i]);this._active=!0,this._fn=n.fn||Qbe[n.type||typeof a],this._easing=sC[n.easing]||sC.linear,this._start=Math.floor(Date.now()+(n.delay||0)),this._duration=this._total=Math.floor(n.duration),this._loop=!!n.loop,this._target=t,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(n,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,n.duration)),this._total+=s,this._loop=!!n.loop,this._to=uC([n.to,t,i,n.from]),this._from=uC([n.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(n){const t=n-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,l=this._to;let d;if(this._active=s!==l&&(a||t<r),!this._active)return this._target[i]=l,void this._notify(!0);t<0?this._target[i]=s:(d=t/r%2,d=a&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(s,l,d))}wait(){const n=this._promises||(this._promises=[]);return new Promise((t,r)=>{n.push({res:t,rej:r})})}_notify(n){const t=n?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class q7{constructor(n,t){this._chart=n,this._properties=new Map,this.configure(t)}configure(n){if(!hi(n))return;const t=Object.keys(no.animation),r=this._properties;Object.getOwnPropertyNames(n).forEach(i=>{const s=n[i];if(!hi(s))return;const a={};for(const l of t)a[l]=s[l];(Es(s.properties)&&s.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,a)})})}_animateOptions(n,t){const r=t.options,i=function nwe(e,n){if(!n)return;let t=e.options;if(t)return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;e.options=n}(n,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&function twe(e,n){const t=[],r=Object.keys(n);for(let i=0;i<r.length;i++){const s=e[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}(n.options.$animations,r).then(()=>{n.options=r},()=>{}),s}_createAnimations(n,t){const r=this._properties,i=[],s=n.$animations||(n.$animations={}),a=Object.keys(t),l=Date.now();let d;for(d=a.length-1;d>=0;--d){const m=a[d];if("$"===m.charAt(0))continue;if("options"===m){i.push(...this._animateOptions(n,t));continue}const y=t[m];let T=s[m];const D=r.get(m);if(T){if(D&&T.active()){T.update(D,y,l);continue}T.cancel()}D&&D.duration?(s[m]=T=new ewe(D,n,m,y),i.push(T)):n[m]=y}return i}update(n,t){if(0===this._properties.size)return void Object.assign(n,t);const r=this._createAnimations(n,t);return r.length?(sm.add(this._chart,r),!0):void 0}}function X7(e,n){const t=e&&e.options||{},r=t.reverse,i=void 0===t.min?n:0,s=void 0===t.max?n:0;return{start:r?s:i,end:r?i:s}}function Z7(e,n){const t=[],r=e._getSortedDatasetMetas(n);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function K7(e,n,t,r={}){const i=e.keys,s="single"===r.mode;let a,l,d,m;if(null!==n){for(a=0,l=i.length;a<l;++a){if(d=+i[a],d===t){if(r.all)continue;break}m=e.values[d],eo(m)&&(s||0===n||bf(n)===bf(m))&&(n+=m)}return n}}function J7(e,n){const t=e&&e.options.stacked;return t||void 0===t&&void 0!==n.stack}function lwe(e,n,t){const r=e[n]||(e[n]={});return r[t]||(r[t]={})}function Q7(e,n,t,r){for(const i of n.getMatchingVisibleMetas(r).reverse()){const s=e[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function eH(e,n){const{chart:t,_cachedMeta:r}=e,i=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:l}=r,d=s.axis,m=a.axis,y=function owe(e,n,t){return`${e.id}.${n.id}.${t.stack||t.type}`}(s,a,r),T=n.length;let D;for(let I=0;I<T;++I){const F=n[I],{[d]:L,[m]:B}=F;D=(F._stacks||(F._stacks={}))[m]=lwe(i,y,L),D[l]=B,D._top=Q7(D,a,!0,r.type),D._bottom=Q7(D,a,!1,r.type),(D._visualValues||(D._visualValues={}))[l]=B}}function AL(e,n){const t=e.scales;return Object.keys(t).filter(r=>t[r].axis===n).shift()}function hC(e,n){const t=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){n=n||e._parsed;for(const i of n){const s=i._stacks;if(!s||void 0===s[r]||void 0===s[r][t])return;delete s[r][t],void 0!==s[r]._visualValues&&void 0!==s[r]._visualValues[t]&&delete s[r]._visualValues[t]}}}const IL=e=>"reset"===e||"none"===e,tH=(e,n)=>n?e:Object.assign({},e);let t0=(()=>{class e{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=J7(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&hC(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(D,I,F,L)=>"x"===D?I:"r"===D?L:F,a=r.xAxisID=Ir(i.xAxisID,AL(t,"x")),l=r.yAxisID=Ir(i.yAxisID,AL(t,"y")),d=r.rAxisID=Ir(i.rAxisID,AL(t,"r")),m=r.indexAxis,y=r.iAxisID=s(m,a,l,d),T=r.vAxisID=s(m,l,a,d);r.xScale=this.getScaleForId(a),r.yScale=this.getScaleForId(l),r.rScale=this.getScaleForId(d),r.iScale=this.getScaleForId(y),r.vScale=this.getScaleForId(T)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&f7(this._data,this),t._stacked&&hC(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(hi(r))this._data=function swe(e){const n=Object.keys(e),t=new Array(n.length);let r,i,s;for(r=0,i=n.length;r<i;++r)s=n[r],t[r]={x:s,y:e[s]};return t}(r);else if(i!==r){if(i){f7(i,this);const s=this._cachedMeta;hC(s),s._parsed=[]}r&&Object.isExtensible(r)&&function Zxe(e,n){e._chartjs?e._chartjs.listeners.push(n):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),d7.forEach(t=>{const r="_onData"+gL(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return e._chartjs.listeners.forEach(l=>{"function"==typeof l[r]&&l[r](...s)}),a}})}))}(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=r._stacked;r._stacked=J7(r.vScale,r),r.stack!==i.stack&&(s=!0,hC(r),r.stack=i.stack),this._resyncElements(t),(s||a!==r._stacked)&&eH(this,r._parsed)}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,d=a.axis;let T,D,I,m=0===t&&r===s.length||i._sorted,y=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,I=s;else{I=Es(s[t])?this.parseArrayData(i,s,t,r):hi(s[t])?this.parseObjectData(i,s,t,r):this.parsePrimitiveData(i,s,t,r);const F=()=>null===D[d]||y&&D[d]<y[d];for(T=0;T<r;++T)i._parsed[T+t]=D=I[T],m&&(F()&&(m=!1),y=D);i._sorted=m}l&&eH(this,I)}parsePrimitiveData(t,r,i,s){const{iScale:a,vScale:l}=t,d=a.axis,m=l.axis,y=a.getLabels(),T=a===l,D=new Array(s);let I,F,L;for(I=0,F=s;I<F;++I)L=I+i,D[I]={[d]:T||a.parse(y[L],L),[m]:l.parse(r[L],L)};return D}parseArrayData(t,r,i,s){const{xScale:a,yScale:l}=t,d=new Array(s);let m,y,T,D;for(m=0,y=s;m<y;++m)T=m+i,D=r[T],d[m]={x:a.parse(D[0],T),y:l.parse(D[1],T)};return d}parseObjectData(t,r,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,y=new Array(s);let T,D,I,F;for(T=0,D=s;T<D;++T)I=T+i,F=r[I],y[T]={x:a.parse(Kg(F,d),I),y:l.parse(Kg(F,m),I)};return y}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){const a=this._cachedMeta,l=r[t.axis];return K7({keys:Z7(this.chart,!0),values:r._stacks[t.axis]._visualValues},l,a.index,{mode:i})}updateRangeFromParsed(t,r,i,s){const a=i[r.axis];let l=null===a?NaN:a;const d=s&&i._stacks[r.axis];s&&d&&(s.values=d,l=K7(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,r){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,d=this._getOtherScale(t),m=((e,n,t)=>e&&!n.hidden&&n._stacked&&{keys:Z7(this.chart,!0),values:null})(r,i),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:T,max:D}=function awe(e){const{min:n,max:t,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?n:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}(d);let I,F;function L(){F=s[I];const B=F[d.axis];return!eo(F[t.axis])||T>B||D<B}for(I=0;I<l&&(L()||(this.updateRangeFromParsed(y,t,F,m),!a));++I);if(a)for(I=l-1;I>=0;--I)if(!L()){this.updateRangeFromParsed(y,t,F,m);break}return y}getAllParsedValues(t){const r=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=r.length;s<a;++s)l=r[s][t.axis],eo(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,i=r.iScale,s=r.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=function iwe(e){let n,t,r,i;return hi(e)?(n=e.top,t=e.right,r=e.bottom,i=e.left):n=t=r=i=e,{top:n,right:t,bottom:r,left:i,disabled:!1===e}}(Ir(this.options.clip,function rwe(e,n,t){if(!1===t)return!1;const r=X7(e,t),i=X7(n,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,i=this._cachedMeta,s=i.data||[],a=this.chart.chartArea,l=[],d=this._drawStart||0,m=this._drawCount||s.length-d,y=this.options.drawActiveElementsOnTop;let T;for(i.dataset&&i.dataset.draw(t,a,d,m),T=d;T<d+m;++T){const D=s[T];D.hidden||(D.active&&y?l.push(D):D.draw(t,a))}for(T=0;T<l.length;++T)l[T].draw(t,a)}getStyle(t,r){const i=r?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=function uwe(e,n,t){return e0(e,{active:!1,dataIndex:n,parsed:void 0,raw:void 0,element:t,index:n,mode:"default",type:"data"})}(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=function cwe(e,n){return e0(e,{active:!1,dataset:void 0,datasetIndex:n,index:n,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!r,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){const s="active"===r,a=this._cachedDataOpts,l=t+"-"+r,d=a[l],m=this.enableOptionSharing&&hh(i);if(d)return tH(d,m);const y=this.chart.config,T=y.datasetElementScopeKeys(this._type,t),D=s?[`${t}Hover`,"hover",t,""]:[t,""],I=y.getOptionScopes(this.getDataset(),T),F=Object.keys(no.elements[t]),B=y.resolveNamedOptions(I,F,()=>this.getContext(i,s,r),D);return B.$shared&&(B.$shared=m,a[l]=Object.freeze(tH(B,m))),B}_resolveAnimations(t,r,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${r}`,d=a[l];if(d)return d;let m;if(!1!==s.options.animation){const T=this.chart.config,D=T.datasetAnimationScopeKeys(this._type,r),I=T.getOptionScopes(this.getDataset(),D);m=T.createResolver(I,this.getContext(t,i,r))}const y=new q7(s,m&&m.animations);return m&&m._cacheable&&(a[l]=Object.freeze(y)),y}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||IL(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(r,a)||a!==s;return this.updateSharedOptions(a,r,i),{sharedOptions:a,includeOptions:l}}updateElement(t,r,i,s){IL(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!IL(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;const a=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,i=this._cachedMeta.data;for(const[d,m,y]of this._syncList)this[d](m,y);this._syncList=[];const s=i.length,a=r.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,r,i=!0){const s=this._cachedMeta,a=s.data,l=t+r;let d;const m=y=>{for(y.length+=r,d=y.length-1;d>=l;d--)y[d]=y[d-r]};for(m(a),d=t;d<l;++d)a[d]=new this.dataElementType;this._parsing&&m(s._parsed),this.parse(t,r),i&&this.updateElements(a,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,r);i._stacked&&hC(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return Fn(e,"defaults",{}),Fn(e,"datasetElementType",null),Fn(e,"dataElementType",null),e})();function fwe(e){const n=e.iScale,t=function dwe(e,n){if(!e._cache.$bar){const t=e.getMatchingVisibleMetas(n);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(e));e._cache.$bar=p7(r.sort((i,s)=>i-s))}return e._cache.$bar}(n,e.type);let i,s,a,l,r=n._length;const d=()=>{32767===a||-32768===a||(hh(l)&&(r=Math.min(r,Math.abs(a-l)||r)),l=a)};for(i=0,s=t.length;i<s;++i)a=n.getPixelForValue(t[i]),d();for(l=void 0,i=0,s=n.ticks.length;i<s;++i)a=n.getPixelForTick(i),d();return r}function nH(e,n,t,r){return Es(e)?function gwe(e,n,t,r){const i=t.parse(e[0],r),s=t.parse(e[1],r),a=Math.min(i,s),l=Math.max(i,s);let d=a,m=l;Math.abs(a)>Math.abs(l)&&(d=l,m=a),n[t.axis]=m,n._custom={barStart:d,barEnd:m,start:i,end:s,min:a,max:l}}(e,n,t,r):n[t.axis]=t.parse(e,r),n}function rH(e,n,t,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),l=i===s,d=[];let m,y,T,D;for(m=t,y=t+r;m<y;++m)D=n[m],T={},T[i.axis]=l||i.parse(a[m],m),d.push(nH(D,T,s,m));return d}function PL(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function vwe(e,n,t,r){let i=n.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:l,reverse:d,top:m,bottom:y}=function ywe(e){let n,t,r,i,s;return e.horizontal?(n=e.base>e.x,t="left",r="right"):(n=e.base<e.y,t="bottom",r="top"),n?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:n,top:i,bottom:s}}(e);"middle"===i&&t&&(e.enableBorderRadius=!0,(t._top||0)===r?i=m:(t._bottom||0)===r?i=y:(s[iH(y,a,l,d)]=!0,i=m)),s[iH(i,a,l,d)]=!0,e.borderSkipped=s}function iH(e,n,t,r){return r?(e=function xwe(e,n,t){return e===n?t:e===t?n:e}(e,n,t),e=sH(e,t,n)):e=sH(e,n,t),e}function sH(e,n,t){return"start"===e?n:"end"===e?t:e}function bwe(e,{inflateAmount:n},t){e.inflateAmount="auto"===n?1===t?.33:0:n}let wwe=(()=>{class e extends t0{parsePrimitiveData(t,r,i,s){return rH(t,r,i,s)}parseArrayData(t,r,i,s){return rH(t,r,i,s)}parseObjectData(t,r,i,s){const{iScale:a,vScale:l}=t,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,y="x"===a.axis?d:m,T="x"===l.axis?d:m,D=[];let I,F,L,B;for(I=i,F=i+s;I<F;++I)B=r[I],L={},L[a.axis]=a.parse(Kg(B,y),I),D.push(nH(Kg(B,T),L,l,I));return D}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);const a=i._custom;a&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:i,vScale:s}=r,a=this.getParsed(t),l=a._custom,d=PL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){const a="reset"===s,{index:l,_cachedMeta:{vScale:d}}=this,m=d.getBasePixel(),y=d.isHorizontal(),T=this._getRuler(),{sharedOptions:D,includeOptions:I}=this._getSharedOptions(r,s);for(let F=r;F<r+i;F++){const L=this.getParsed(F),B=a||Mi(L[d.axis])?{base:m,head:m}:this._calculateBarValuePixels(F),G=this._calculateBarIndexPixels(F,T),Z=(L._stacks||{})[d.axis],q={horizontal:y,base:B.base,enableBorderRadius:!Z||PL(L._custom)||l===Z._top||l===Z._bottom,x:y?B.head:G.center,y:y?G.center:B.head,height:y?G.size:Math.abs(B.size),width:y?Math.abs(B.size):G.size};I&&(q.options=D||this.resolveDataElementOptions(F,t[F].active?"active":s));const oe=q.options||t[F].options;vwe(q,oe,Z,l),bwe(q,oe,T.ratio),this.updateElement(t[F],F,q,s)}}_getStacks(t,r){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),a=i.options.stacked,l=[],d=m=>{const y=m.controller.getParsed(r),T=y&&y[m.vScale.axis];if(Mi(T)||isNaN(T))return!0};for(const m of s)if((void 0===r||!d(m))&&((!1===a||-1===l.indexOf(m.stack)||void 0===a&&void 0===m.stack)&&l.push(m.stack),m.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){const s=this._getStacks(t,i),a=void 0!==r?s.indexOf(r):-1;return-1===a?s.length-1:a}_getRuler(){const t=this.options,r=this._cachedMeta,i=r.iScale,s=[];let a,l;for(a=0,l=r.data.length;a<l;++a)s.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const d=t.barThickness;return{min:d||fwe(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:d?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:a,minBarLength:l}}=this,d=a||0,m=this.getParsed(t),y=m._custom,T=PL(y);let L,B,D=m[r.axis],I=0,F=i?this.applyStack(r,m,i):D;F!==D&&(I=F-D,F=D),T&&(D=y.barStart,F=y.barEnd-y.barStart,0!==D&&bf(D)!==bf(y.barEnd)&&(I=0),I+=D);const G=Mi(a)||T?I:a;let Z=r.getPixelForValue(G);if(L=this.chart.getDataVisibility(t)?r.getPixelForValue(I+F):Z,B=L-Z,Math.abs(B)<l){B=function _we(e,n,t){return 0!==e?bf(e):(n.isHorizontal()?1:-1)*(n.min>=t?1:-1)}(B,r,d)*l,D===d&&(Z-=B/2);const q=r.getPixelForDecimal(0),oe=r.getPixelForDecimal(1),_e=Math.min(q,oe),fe=Math.max(q,oe);Z=Math.max(Math.min(Z,fe),_e),L=Z+B,i&&!T&&(m._stacks[r.axis]._visualValues[s]=r.getValueForPixel(L)-r.getValueForPixel(Z))}if(Z===r.getPixelForValue(d)){const q=bf(B)*r.getLineWidthForValue(d)/2;Z+=q,B-=q}return{size:B,base:Z,head:L,center:L+B/2}}_calculateBarIndexPixels(t,r){const i=r.scale,s=this.options,a=s.skipNull,l=Ir(s.maxBarThickness,1/0);let d,m;if(r.grouped){const y=a?this._getStackCount(t):r.stackCount,T="flex"===s.barThickness?function mwe(e,n,t,r){const i=n.pixels,s=i[e];let a=e>0?i[e-1]:null,l=e<i.length-1?i[e+1]:null;const d=t.categoryPercentage;null===a&&(a=s-(null===l?n.end-n.start:l-s)),null===l&&(l=s+s-a);const m=s-(s-Math.min(a,l))/2*d;return{chunk:Math.abs(l-a)/2*d/r,ratio:t.barPercentage,start:m}}(t,r,s,y):function pwe(e,n,t,r){const i=t.barThickness;let s,a;return Mi(i)?(s=n.min*t.categoryPercentage,a=t.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:n.pixels[e]-s/2}}(t,r,s,y),D=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);d=T.start+T.chunk*D+T.chunk/2,m=Math.min(l,T.chunk*T.ratio)}else d=i.getPixelForValue(this.getParsed(t)[i.axis],t),m=Math.min(l,r.min*r.ratio);return{base:d-m/2,head:d+m/2,center:d,size:m}}draw(){const t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length;let a=0;for(;a<s;++a)null!==this.getParsed(a)[r.axis]&&i[a].draw(this._ctx)}}return Fn(e,"id","bar"),Fn(e,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Fn(e,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),e})(),Cwe=(()=>{class e extends t0{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){const a=super.parsePrimitiveData(t,r,i,s);for(let l=0;l<a.length;l++)a[l]._custom=this.resolveDataElementOptions(l+i).radius;return a}parseArrayData(t,r,i,s){const a=super.parseArrayData(t,r,i,s);for(let l=0;l<a.length;l++)a[l]._custom=Ir(r[i+l][2],this.resolveDataElementOptions(l+i).radius);return a}parseObjectData(t,r,i,s){const a=super.parseObjectData(t,r,i,s);for(let l=0;l<a.length;l++){const d=r[i+l];a[l]._custom=Ir(d&&d.r&&+d.r,this.resolveDataElementOptions(l+i).radius)}return a}getMaxOverflow(){const t=this._cachedMeta.data;let r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=r,l=this.getParsed(t),d=s.getLabelForValue(l.x),m=a.getLabelForValue(l.y),y=l._custom;return{label:i[t]||"",value:"("+d+", "+m+(y?", "+y:"")+")"}}update(t){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){const a="reset"===s,{iScale:l,vScale:d}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(r,s),T=l.axis,D=d.axis;for(let I=r;I<r+i;I++){const F=t[I],L=!a&&this.getParsed(I),B={},G=B[T]=a?l.getPixelForDecimal(.5):l.getPixelForValue(L[T]),Z=B[D]=a?d.getBasePixel():d.getPixelForValue(L[D]);B.skip=isNaN(G)||isNaN(Z),y&&(B.options=m||this.resolveDataElementOptions(I,F.active?"active":s),a&&(B.options.radius=0)),this.updateElement(F,I,B,s)}}resolveDataElementOptions(t,r){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return"active"!==r&&(s.radius=0),s.radius+=Ir(i&&i._custom,a),s}}return Fn(e,"id","bubble"),Fn(e,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Fn(e,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),e})(),OL=(()=>{class e extends t0{constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let l,d,a=m=>+i[m];if(hi(i[t])){const{key:m="value"}=this._parsing;a=y=>+Kg(i[y],m)}for(l=t,d=t+r;l<d;++l)s._parsed[l]=a(l)}}_getRotation(){return ed(this.options.rotation-90)}_getCircumference(){return ed(this.options.circumference)}_getRotationExtents(){let t=Ss,r=-Ss;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,a=s._getRotation(),l=s._getCircumference();t=Math.min(t,a),r=Math.max(r,a+l)}return{rotation:t,circumference:r-t}}update(t){const r=this.chart,{chartArea:i}=r,s=this._cachedMeta,a=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,d=Math.max((Math.min(i.width,i.height)-l)/2,0),m=Math.min(((e,n)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/n)(this.options.cutout,d),1),y=this._getRingWeight(this.index),{circumference:T,rotation:D}=this._getRotationExtents(),{ratioX:I,ratioY:F,offsetX:L,offsetY:B}=function Twe(e,n,t){let r=1,i=1,s=0,a=0;if(n<Ss){const l=e,d=l+n,m=Math.cos(l),y=Math.sin(l),T=Math.cos(d),D=Math.sin(d),I=(q,oe,_e)=>iC(q,l,d,!0)?1:Math.max(oe,oe*t,_e,_e*t),F=(q,oe,_e)=>iC(q,l,d,!0)?-1:Math.min(oe,oe*t,_e,_e*t),L=I(0,m,T),B=I(to,y,D),G=F(Os,m,T),Z=F(Os+to,y,D);r=(L-G)/2,i=(B-Z)/2,s=-(L+G)/2,a=-(B+Z)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(D,T,m),q=Math.max(Math.min((i.width-l)/I,(i.height-l)/F)/2,0),oe=n7(this.options.radius,q),fe=(oe-Math.max(oe*m,0))/this._getVisibleDatasetWeightTotal();this.offsetX=L*oe,this.offsetY=B*oe,s.total=this.calculateTotal(),this.outerRadius=oe-fe*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-fe*y,0),this.updateElements(a,0,a.length,t)}_circumference(t,r){const i=this.options,s=this._cachedMeta,a=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*a/Ss)}updateElements(t,r,i,s){const a="reset"===s,l=this.chart,d=l.chartArea,T=(d.left+d.right)/2,D=(d.top+d.bottom)/2,I=a&&l.options.animation.animateScale,F=I?0:this.innerRadius,L=I?0:this.outerRadius,{sharedOptions:B,includeOptions:G}=this._getSharedOptions(r,s);let q,Z=this._getRotation();for(q=0;q<r;++q)Z+=this._circumference(q,a);for(q=r;q<r+i;++q){const oe=this._circumference(q,a),_e=t[q],fe={x:T+this.offsetX,y:D+this.offsetY,startAngle:Z,endAngle:Z+oe,circumference:oe,outerRadius:L,innerRadius:F};G&&(fe.options=B||this.resolveDataElementOptions(q,_e.active?"active":s)),Z+=oe,this.updateElement(_e,q,fe,s)}}calculateTotal(){const t=this._cachedMeta,r=t.data;let s,i=0;for(s=0;s<r.length;s++){const a=t._parsed[s];null!==a&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){const r=this._cachedMeta.total;return r>0&&!isNaN(t)?Ss*(Math.abs(t)/r):0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],a=oC(this._cachedMeta._parsed[t],i.options.locale);return{label:s[t]||"",value:a}}getMaxBorderWidth(t){let r=0;const i=this.chart;let s,a,l,d,m;if(!t)for(s=0,a=i.data.datasets.length;s<a;++s)if(i.isDatasetVisible(s)){l=i.getDatasetMeta(s),t=l.data,d=l.controller;break}if(!t)return 0;for(s=0,a=t.length;s<a;++s)m=d.resolveDataElementOptions(s),"inner"!==m.borderAlign&&(r=Math.max(r,m.borderWidth||0,m.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){const a=this.resolveDataElementOptions(i);r=Math.max(r,a.offset||0,a.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Ir(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return Fn(e,"id","doughnut"),Fn(e,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Fn(e,"descriptors",{_scriptable:n=>"spacing"!==n,_indexable:n=>"spacing"!==n}),Fn(e,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=n.legend.options;return t.labels.map((s,a)=>{const d=n.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}}),e})(),Ewe=(()=>{class e extends t0{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=r,l=this.chart._animationsDisabled;let{start:d,count:m}=_7(r,s,l);this._drawStart=d,this._drawCount=m,y7(r)&&(d=0,m=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const y=this.resolveDatasetElementOptions(t);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:y},t),this.updateElements(s,d,m,t)}updateElements(t,r,i,s){const a="reset"===s,{iScale:l,vScale:d,_stacked:m,_dataset:y}=this._cachedMeta,{sharedOptions:T,includeOptions:D}=this._getSharedOptions(r,s),I=l.axis,F=d.axis,{spanGaps:L,segment:B}=this.options,G=yx(L)?L:Number.POSITIVE_INFINITY,Z=this.chart._animationsDisabled||a||"none"===s,q=r+i,oe=t.length;let _e=r>0&&this.getParsed(r-1);for(let fe=0;fe<oe;++fe){const ae=t[fe],De=Z?ae:{};if(fe<r||fe>=q){De.skip=!0;continue}const Ie=this.getParsed(fe),qe=Mi(Ie[F]),Je=De[I]=l.getPixelForValue(Ie[I],fe),$e=De[F]=a||qe?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,Ie,m):Ie[F],fe);De.skip=isNaN(Je)||isNaN($e)||qe,De.stop=fe>0&&Math.abs(Ie[I]-_e[I])>G,B&&(De.parsed=Ie,De.raw=y.data[fe]),D&&(De.options=T||this.resolveDataElementOptions(fe,ae.active?"active":s)),Z||this.updateElement(ae,fe,De,s),_e=Ie}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return Fn(e,"id","line"),Fn(e,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Fn(e,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),e})(),oH=(()=>{class e extends t0{constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const i=this.chart,s=i.data.labels||[],a=oC(this._cachedMeta._parsed[t].r,i.options.locale);return{label:s[t]||"",value:a}}parseObjectData(t,r,i,s){return L7.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){const r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((i,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<r.min&&(r.min=a),a>r.max&&(r.max=a))}),r}_updateRadius(){const t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),a=Math.max(s/2,0),d=(a-Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=a-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(t,r,i,s){const a="reset"===s,l=this.chart,m=l.options.animation,y=this._cachedMeta.rScale,T=y.xCenter,D=y.yCenter,I=y.getIndexAngle(0)-.5*Os;let L,F=I;const B=360/this.countVisibleElements();for(L=0;L<r;++L)F+=this._computeAngle(L,s,B);for(L=r;L<r+i;L++){const G=t[L];let Z=F,q=F+this._computeAngle(L,s,B),oe=l.getDataVisibility(L)?y.getDistanceFromCenterForValue(this.getParsed(L).r):0;F=q,a&&(m.animateScale&&(oe=0),m.animateRotate&&(Z=q=I));const _e={x:T,y:D,innerRadius:0,outerRadius:oe,startAngle:Z,endAngle:q,options:this.resolveDataElementOptions(L,G.active?"active":s)};this.updateElement(G,L,_e,s)}}countVisibleElements(){let r=0;return this._cachedMeta.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?ed(this.resolveDataElementOptions(t,r).angle||i):0}}return Fn(e,"id","polarArea"),Fn(e,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Fn(e,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=n.legend.options;return t.labels.map((s,a)=>{const d=n.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:i,lineWidth:d.borderWidth,pointStyle:r,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),e})();var Swe=Object.freeze({__proto__:null,BarController:wwe,BubbleController:Cwe,DoughnutController:OL,LineController:Ewe,PolarAreaController:oH,PieController:(()=>{class e extends OL{}return Fn(e,"id","pie"),Fn(e,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),e})(),RadarController:(()=>{class e extends t0{getLabelAndValue(t){const r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return L7.bind(this)(t,r,i,s)}update(t){const r=this._cachedMeta,i=r.dataset,s=r.data||[],a=r.iScale.getLabels();if(i.points=s,"resize"!==t){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),this.updateElement(i,void 0,{_loop:!0,_fullLoop:a.length===s.length,options:l},t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){const a=this._cachedMeta.rScale,l="reset"===s;for(let d=r;d<r+i;d++){const m=t[d],y=this.resolveDataElementOptions(d,m.active?"active":s),T=a.getPointPositionForValue(d,this.getParsed(d).r),D=l?a.xCenter:T.x,I=l?a.yCenter:T.y,F={x:D,y:I,angle:T.angle,skip:isNaN(D)||isNaN(I),options:y};this.updateElement(m,d,F,s)}}}return Fn(e,"id","radar"),Fn(e,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Fn(e,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),e})(),ScatterController:(()=>{class e extends t0{getLabelAndValue(t){const r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:a}=r,l=this.getParsed(t),d=s.getLabelForValue(l.x),m=a.getLabelForValue(l.y);return{label:i[t]||"",value:"("+d+", "+m+")"}}update(t){const r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled;let{start:a,count:l}=_7(r,i,s);if(this._drawStart=a,this._drawCount=l,y7(r)&&(a=0,l=i.length),this.options.showLine){const{dataset:d,_dataset:m}=r;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!m._decimated,d.points=i;const y=this.resolveDatasetElementOptions(t);y.segment=this.options.segment,this.updateElement(d,void 0,{animated:!s,options:y},t)}this.updateElements(i,a,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){const a="reset"===s,{iScale:l,vScale:d,_stacked:m,_dataset:y}=this._cachedMeta,T=this.resolveDataElementOptions(r,s),D=this.getSharedOptions(T),I=this.includeOptions(s,D),F=l.axis,L=d.axis,{spanGaps:B,segment:G}=this.options,Z=yx(B)?B:Number.POSITIVE_INFINITY,q=this.chart._animationsDisabled||a||"none"===s;let oe=r>0&&this.getParsed(r-1);for(let _e=r;_e<r+i;++_e){const fe=t[_e],ae=this.getParsed(_e),De=q?fe:{},Ie=Mi(ae[L]),qe=De[F]=l.getPixelForValue(ae[F],_e),Je=De[L]=a||Ie?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,ae,m):ae[L],_e);De.skip=isNaN(qe)||isNaN(Je)||Ie,De.stop=_e>0&&Math.abs(ae[F]-oe[F])>Z,G&&(De.parsed=ae,De.raw=y.data[_e]),I&&(De.options=D||this.resolveDataElementOptions(_e,fe.active?"active":s)),q||this.updateElement(fe,_e,De,s),oe=ae}this.updateSharedOptions(D,s,T)}getMaxOverflow(){const t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let d=0;for(let m=r.length-1;m>=0;--m)d=Math.max(d,r[m].size(this.resolveDataElementOptions(m))/2);return d>0&&d}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;const a=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,a,l)/2}}return Fn(e,"id","scatter"),Fn(e,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Fn(e,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),e})()});function Py(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class LL{static override(n){Object.assign(LL.prototype,n)}constructor(n){this.options=n||{}}init(){}formats(){return Py()}parse(){return Py()}format(){return Py()}add(){return Py()}diff(){return Py()}startOf(){return Py()}endOf(){return Py()}}var Dwe__date=LL;function Mwe(e,n,t,r){const{controller:i,data:s,_sorted:a}=e,l=i._cachedMeta.iScale;if(l&&n===l.axis&&"r"!==n&&a&&s.length){const d=l._reversePixels?qxe:im;if(!r)return d(s,n,t);if(i._sharedOptions){const m=s[0],y="function"==typeof m.getRange&&m.getRange(n);if(y){const T=d(s,n,t-y),D=d(s,n,t+y);return{lo:T.lo,hi:D.hi}}}}return{lo:0,hi:s.length-1}}function dC(e,n,t,r,i){const s=e.getSortedVisibleDatasetMetas(),a=t[n];for(let l=0,d=s.length;l<d;++l){const{index:m,data:y}=s[l],{lo:T,hi:D}=Mwe(s[l],n,a,i);for(let I=T;I<=D;++I){const F=y[I];F.skip||r(F,m,I)}}}function FL(e,n,t,r,i){const s=[];return!i&&!e.isPointInArea(n)||dC(e,t,n,function(l,d,m){!i&&!lC(l,e.chartArea,0)||l.inRange(n.x,n.y,r)&&s.push({element:l,datasetIndex:d,index:m})},!0),s}function RL(e,n,t,r,i,s){return s||e.isPointInArea(n)?"r"!==t||r?function Iwe(e,n,t,r,i,s){let a=[];const l=function kwe(e){const n=-1!==e.indexOf("x"),t=-1!==e.indexOf("y");return function(r,i){const s=n?Math.abs(r.x-i.x):0,a=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}(t);let d=Number.POSITIVE_INFINITY;return dC(e,t,n,function m(y,T,D){const I=y.inRange(n.x,n.y,i);if(r&&!I)return;const F=y.getCenterPoint(i);if(!s&&!e.isPointInArea(F)&&!I)return;const B=l(n,F);B<d?(a=[{element:y,datasetIndex:T,index:D}],d=B):B===d&&a.push({element:y,datasetIndex:T,index:D})}),a}(e,n,t,r,i,s):function Awe(e,n,t,r){let i=[];return dC(e,t,n,function s(a,l,d){const{startAngle:m,endAngle:y}=a.getProps(["startAngle","endAngle"],r),{angle:T}=h7(a,{x:n.x,y:n.y});iC(T,m,y)&&i.push({element:a,datasetIndex:l,index:d})}),i}(e,n,t,i):[]}function aH(e,n,t,r,i){const s=[],a="x"===t?"inXRange":"inYRange";let l=!1;return dC(e,t,n,(d,m,y)=>{d[a](n[t],i)&&(s.push({element:d,datasetIndex:m,index:y}),l=l||d.inRange(n.x,n.y,i))}),r&&!l?[]:s}var Pwe={evaluateInteractionItems:dC,modes:{index(e,n,t,r){const i=Ay(n,e),s=t.axis||"x",a=t.includeInvisible||!1,l=t.intersect?FL(e,i,s,r,a):RL(e,i,s,!1,r,a),d=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(m=>{const y=l[0].index,T=m.data[y];T&&!T.skip&&d.push({element:T,datasetIndex:m.index,index:y})}),d):[]},dataset(e,n,t,r){const i=Ay(n,e),s=t.axis||"xy",a=t.includeInvisible||!1;let l=t.intersect?FL(e,i,s,r,a):RL(e,i,s,!1,r,a);if(l.length>0){const d=l[0].datasetIndex,m=e.getDatasetMeta(d).data;l=[];for(let y=0;y<m.length;++y)l.push({element:m[y],datasetIndex:d,index:y})}return l},point:(e,n,t,r)=>FL(e,Ay(n,e),t.axis||"xy",r,t.includeInvisible||!1),nearest:(e,n,t,r)=>RL(e,Ay(n,e),t.axis||"xy",t.intersect,r,t.includeInvisible||!1),x:(e,n,t,r)=>aH(e,Ay(n,e),"x",t.intersect,r),y:(e,n,t,r)=>aH(e,Ay(n,e),"y",t.intersect,r)}};const lH=["left","top","right","bottom"];function fC(e,n){return e.filter(t=>t.pos===n)}function cH(e,n){return e.filter(t=>-1===lH.indexOf(t.pos)&&t.box.axis===n)}function pC(e,n){return e.sort((t,r)=>{const i=n?r:t,s=n?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function uH(e,n,t,r){return Math.max(e[t],n[t])+Math.max(e[r],n[r])}function hH(e,n){e.top=Math.max(e.top,n.top),e.left=Math.max(e.left,n.left),e.bottom=Math.max(e.bottom,n.bottom),e.right=Math.max(e.right,n.right)}function Nwe(e,n,t,r){const{pos:i,box:s}=t,a=e.maxPadding;if(!hi(i)){t.size&&(e[i]-=t.size);const T=r[t.stack]||{size:0,count:1};T.size=Math.max(T.size,t.horizontal?s.height:s.width),t.size=T.size/T.count,e[i]+=t.size}s.getPadding&&hH(a,s.getPadding());const l=Math.max(0,n.outerWidth-uH(a,e,"left","right")),d=Math.max(0,n.outerHeight-uH(a,e,"top","bottom")),m=l!==e.w,y=d!==e.h;return e.w=l,e.h=d,t.horizontal?{same:m,other:y}:{same:y,other:m}}function zwe(e,n){const t=n.maxPadding;return function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(n[a],t[a])}),s}(e?["left","right"]:["top","bottom"])}function mC(e,n,t,r){const i=[];let s,a,l,d,m,y;for(s=0,a=e.length,m=0;s<a;++s){l=e[s],d=l.box,d.update(l.width||n.w,l.height||n.h,zwe(l.horizontal,n));const{same:T,other:D}=Nwe(n,t,l,r);m|=T&&i.length,y=y||D,d.fullSize||i.push(l)}return m&&mC(i,n,t,r)||y}function pM(e,n,t,r,i){e.top=t,e.left=n,e.right=n+r,e.bottom=t+i,e.width=r,e.height=i}function dH(e,n,t,r){const i=t.padding;let{x:s,y:a}=n;for(const l of e){const d=l.box,m=r[l.stack]||{count:1,placed:0,weight:1},y=l.stackWeight/m.weight||1;if(l.horizontal){const T=n.w*y,D=m.size||d.height;hh(m.start)&&(a=m.start),d.fullSize?pM(d,i.left,a,t.outerWidth-i.right-i.left,D):pM(d,n.left+m.placed,a,T,D),m.start=a,m.placed+=T,a=d.bottom}else{const T=n.h*y,D=m.size||d.width;hh(m.start)&&(s=m.start),d.fullSize?pM(d,s,i.top,D,t.outerHeight-i.bottom-i.top):pM(d,s,n.top+m.placed,D,T),m.start=s,m.placed+=T,s=d.right}}n.x=s,n.y=a}var xl={addBox(e,n){e.boxes||(e.boxes=[]),n.fullSize=n.fullSize||!1,n.position=n.position||"top",n.weight=n.weight||0,n._layers=n._layers||function(){return[{z:0,draw(t){n.draw(t)}}]},e.boxes.push(n)},removeBox(e,n){const t=e.boxes?e.boxes.indexOf(n):-1;-1!==t&&e.boxes.splice(t,1)},configure(e,n,t){n.fullSize=t.fullSize,n.position=t.position,n.weight=t.weight},update(e,n,t,r){if(!e)return;const i=vl(e.options.layout.padding),s=Math.max(n-i.width,0),a=Math.max(t-i.height,0),l=function Rwe(e){const n=function Owe(e){const n=[];let t,r,i,s,a,l;for(t=0,r=(e||[]).length;t<r;++t)i=e[t],({position:s,options:{stack:a,stackWeight:l=1}}=i),n.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:l});return n}(e),t=pC(n.filter(m=>m.box.fullSize),!0),r=pC(fC(n,"left"),!0),i=pC(fC(n,"right")),s=pC(fC(n,"top"),!0),a=pC(fC(n,"bottom")),l=cH(n,"x"),d=cH(n,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(d).concat(a).concat(l),chartArea:fC(n,"chartArea"),vertical:r.concat(i).concat(d),horizontal:s.concat(a).concat(l)}}(e.boxes),d=l.vertical,m=l.horizontal;ji(e.boxes,L=>{"function"==typeof L.beforeLayout&&L.beforeLayout()});const y=d.reduce((L,B)=>B.box.options&&!1===B.box.options.display?L:L+1,0)||1,T=Object.freeze({outerWidth:n,outerHeight:t,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/y,hBoxMaxHeight:a/2}),D=Object.assign({},i);hH(D,vl(r));const I=Object.assign({maxPadding:D,w:s,h:a,x:i.left,y:i.top},i),F=function Fwe(e,n){const t=function Lwe(e){const n={};for(const t of e){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!lH.includes(i))continue;const a=n[r]||(n[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return n}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=n;let s,a,l;for(s=0,a=e.length;s<a;++s){l=e[s];const{fullSize:d}=l.box,m=t[l.stack],y=m&&l.stackWeight/m.weight;l.horizontal?(l.width=y?y*r:d&&n.availableWidth,l.height=i):(l.width=r,l.height=y?y*i:d&&n.availableHeight)}return t}(d.concat(m),T);mC(l.fullSize,I,T,F),mC(d,I,T,F),mC(m,I,T,F)&&mC(d,I,T,F),function Bwe(e){const n=e.maxPadding;function t(r){const i=Math.max(n[r]-e[r],0);return e[r]+=i,i}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}(I),dH(l.leftAndTop,I,T,F),I.x+=I.w,I.y+=I.h,dH(l.rightAndBottom,I,T,F),e.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},ji(l.chartArea,L=>{const B=L.box;Object.assign(B,e.chartArea),B.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class fH{acquireContext(n,t){}releaseContext(n){return!1}addEventListener(n,t,r){}removeEventListener(n,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(n,t,r,i){return t=Math.max(0,t||n.width),r=r||n.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(n){return!0}updateConfig(n){}}class Vwe extends fH{acquireContext(n){return n&&n.getContext&&n.getContext("2d")||null}updateConfig(n){n.options.animation=!1}}const mM="$chartjs",Uwe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pH=e=>null===e||""===e,mH=!!Ube&&{passive:!0};function $we(e,n,t){e.canvas.removeEventListener(n,t,mH)}function gM(e,n){for(const t of e)if(t===n||t.contains(n))return!0}function Gwe(e,n,t){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||gM(l.addedNodes,r),a=a&&!gM(l.removedNodes,r);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Ywe(e,n,t){const r=e.canvas,i=new MutationObserver(s=>{let a=!1;for(const l of s)a=a||gM(l.removedNodes,r),a=a&&!gM(l.addedNodes,r);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const gC=new Map;let gH=0;function _H(){const e=window.devicePixelRatio;e!==gH&&(gH=e,gC.forEach((n,t)=>{t.currentDevicePixelRatio!==e&&n()}))}function Zwe(e,n,t){const r=e.canvas,i=r&&kL(r);if(!i)return;const s=g7((l,d)=>{const m=i.clientWidth;t(l,d),m<i.clientWidth&&t()},window),a=new ResizeObserver(l=>{const d=l[0],m=d.contentRect.width,y=d.contentRect.height;0===m&&0===y||s(m,y)});return a.observe(i),function qwe(e,n){gC.size||window.addEventListener("resize",_H),gC.set(e,n)}(e,s),a}function NL(e,n,t){t&&t.disconnect(),"resize"===n&&function Xwe(e){gC.delete(e),gC.size||window.removeEventListener("resize",_H)}(e)}function Kwe(e,n,t){const r=e.canvas,i=g7(s=>{null!==e.ctx&&t(function Wwe(e,n){const t=Uwe[e.type]||e.type,{x:r,y:i}=Ay(e,n);return{type:t,chart:n,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(s,e))},e);return function Hwe(e,n,t){e.addEventListener(n,t,mH)}(r,n,i),i}class Jwe extends fH{acquireContext(n,t){const r=n&&n.getContext&&n.getContext("2d");return r&&r.canvas===n?(function jwe(e,n){const t=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[mM]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",pH(i)){const s=B7(e,"width");void 0!==s&&(e.width=s)}if(pH(r))if(""===e.style.height)e.height=e.width/(n||2);else{const s=B7(e,"height");void 0!==s&&(e.height=s)}}(n,t),r):null}releaseContext(n){const t=n.canvas;if(!t[mM])return!1;const r=t[mM].initial;["height","width"].forEach(s=>{const a=r[s];Mi(a)?t.removeAttribute(s):t.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[mM],!0}addEventListener(n,t,r){this.removeEventListener(n,t),(n.$proxies||(n.$proxies={}))[t]=({attach:Gwe,detach:Ywe,resize:Zwe}[t]||Kwe)(n,t,r)}removeEventListener(n,t){const r=n.$proxies||(n.$proxies={}),i=r[t];i&&(({attach:NL,detach:NL,resize:NL}[t]||$we)(n,t,i),r[t]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(n,t,r,i){return function Vbe(e,n,t,r){const i=dM(e),s=ky(i,"margin"),a=hM(i.maxWidth,e,"clientWidth")||iM,l=hM(i.maxHeight,e,"clientHeight")||iM,d=function zbe(e,n,t){let r,i;if(void 0===n||void 0===t){const s=kL(e);if(s){const a=s.getBoundingClientRect(),l=dM(s),d=ky(l,"border","width"),m=ky(l,"padding");n=a.width-m.width-d.width,t=a.height-m.height-d.height,r=hM(l.maxWidth,s,"clientWidth"),i=hM(l.maxHeight,s,"clientHeight")}else n=e.clientWidth,t=e.clientHeight}return{width:n,height:t,maxWidth:r||iM,maxHeight:i||iM}}(e,n,t);let{width:m,height:y}=d;if("content-box"===i.boxSizing){const D=ky(i,"border","width"),I=ky(i,"padding");m-=I.width+D.width,y-=I.height+D.height}return m=Math.max(0,m-s.width),y=Math.max(0,r?m/r:y-s.height),m=fM(Math.min(m,a,d.maxWidth)),y=fM(Math.min(y,l,d.maxHeight)),m&&!y&&(y=fM(m/2)),(void 0!==n||void 0!==t)&&r&&d.height&&y>d.height&&(y=d.height,m=fM(Math.floor(y*r))),{width:m,height:y}}(n,t,r,i)}isAttached(n){const t=kL(n);return!(!t||!t.isConnected)}}class td{constructor(){Fn(this,"active",!1)}tooltipPosition(n){const{x:t,y:r}=this.getProps(["x","y"],n);return{x:t,y:r}}hasValue(){return yx(this.x)&&yx(this.y)}getProps(n,t){const r=this.$animations;if(!t||!r)return this;const i={};return n.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function _M(e,n,t,r,i){const s=Ir(r,0),a=Math.min(Ir(i,e.length),e.length);let d,m,y,l=0;for(t=Math.ceil(t),i&&(d=i-r,t=d/Math.floor(d/t)),y=s;y<0;)l++,y=Math.round(s+l*t);for(m=Math.max(s,0);m<a;m++)m===y&&(n.push(e[m]),l++,y=Math.round(s+l*t))}Fn(td,"defaults",{}),Fn(td,"defaultRoutes",void 0);const o2e=e=>"left"===e?"right":"right"===e?"left":e,yH=(e,n,t)=>"top"===n||"left"===n?e[n]+t:e[n]-t,vH=(e,n)=>Math.min(n||e,e);function xH(e,n){const t=[],r=e.length/n,i=e.length;let s=0;for(;s<i;s+=r)t.push(e[Math.floor(s)]);return t}function a2e(e,n,t){const r=e.ticks.length,i=Math.min(n,r-1),s=e._startPixel,a=e._endPixel,l=1e-6;let m,d=e.getPixelForTick(i);if(!(t&&(m=1===r?Math.max(d-s,a-d):0===n?(e.getPixelForTick(1)-d)/2:(d-e.getPixelForTick(i-1))/2,d+=i<n?m:-m,d<s-l||d>a+l)))return d}function _C(e){return e.drawTicks?e.tickLength:0}function bH(e,n){if(!e.display)return 0;const t=ca(e.font,n),r=vl(e.padding);return(Es(e.text)?e.text.length:1)*t.lineHeight+r.height}function h2e(e,n,t){let r=xL(e);return(t&&"right"!==n||!t&&"right"===n)&&(r=o2e(r)),r}class Oy extends td{constructor(n){super(),this.id=n.id,this.type=n.type,this.options=void 0,this.ctx=n.ctx,this.chart=n.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(n){this.options=n.setContext(this.getContext()),this.axis=n.axis,this._userMin=this.parse(n.min),this._userMax=this.parse(n.max),this._suggestedMin=this.parse(n.suggestedMin),this._suggestedMax=this.parse(n.suggestedMax)}parse(n,t){return n}getUserBounds(){let{_userMin:n,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return n=uu(n,Number.POSITIVE_INFINITY),t=uu(t,Number.NEGATIVE_INFINITY),r=uu(r,Number.POSITIVE_INFINITY),i=uu(i,Number.NEGATIVE_INFINITY),{min:uu(n,r),max:uu(t,i),minDefined:eo(n),maxDefined:eo(t)}}getMinMax(n){let a,{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:t,max:r};const l=this.getMatchingVisibleMetas();for(let d=0,m=l.length;d<m;++d)a=l[d].controller.getMinMax(this,n),i||(t=Math.min(t,a.min)),s||(r=Math.max(r,a.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:uu(t,uu(r,t)),max:uu(r,uu(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const n=this.chart.data;return this.options.labels||(this.isHorizontal()?n.xLabels:n.yLabels)||n.labels||[]}getLabelItems(n=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(n))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ss(this.options.beforeUpdate,[this])}update(n,t,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=n,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function ybe(e,n,t){const{min:r,max:i}=e,s=n7(n,(i-r)/2),a=(l,d)=>t&&0===l?0:l+d;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=l<this.ticks.length;this._convertTicksToLabels(d?xH(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=function e2e(e,n){const t=e.options.ticks,r=function t2e(e){const n=e.options.offset,t=e._tickSize();return Math.floor(Math.min(e._length/t+(n?0:1),e._maxLength/t))}(e),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?function r2e(e){const n=[];let t,r;for(t=0,r=e.length;t<r;t++)e[t].major&&n.push(t);return n}(n):[],a=s.length,l=s[0],d=s[a-1],m=[];if(a>i)return function i2e(e,n,t,r){let a,i=0,s=t[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===s&&(n.push(e[a]),i++,s=t[i*r])}(n,m,s,a/i),m;const y=function n2e(e,n,t){const r=function s2e(e){const n=e.length;let t,r;if(n<2)return!1;for(r=e[0],t=1;t<n;++t)if(e[t]-e[t-1]!==r)return!1;return r}(e),i=n.length/t;if(!r)return Math.max(i,1);const s=function $xe(e){const n=[],t=Math.sqrt(e);let r;for(r=1;r<t;r++)e%r==0&&(n.push(r),n.push(e/r));return t===(0|t)&&n.push(t),n.sort((i,s)=>i-s).pop(),n}(r);for(let a=0,l=s.length-1;a<l;a++){const d=s[a];if(d>i)return d}return Math.max(i,1)}(s,n,i);if(a>0){let T,D;const I=a>1?Math.round((d-l)/(a-1)):null;for(_M(n,m,y,Mi(I)?0:l-I,l),T=0,D=a-1;T<D;T++)_M(n,m,y,s[T],s[T+1]);return _M(n,m,y,d,Mi(I)?n.length:d+I),m}return _M(n,m,y),m}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,r,n=this.options.reverse;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,n=!n),this._startPixel=t,this._endPixel=r,this._reversePixels=n,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ss(this.options.afterUpdate,[this])}beforeSetDimensions(){ss(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ss(this.options.afterSetDimensions,[this])}_callHooks(n){this.chart.notifyPlugins(n,this.getContext()),ss(this.options[n],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ss(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(n){const t=this.options.ticks;let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r],s.label=ss(t.callback,[s.value,r,n],this)}afterTickToLabelConversion(){ss(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ss(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const n=this.options,t=n.ticks,r=vH(this.ticks.length,n.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let l,d,m,a=i;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal())return void(this.labelRotation=i);const y=this._getLabelSizes(),T=y.widest.width,D=y.highest.height,I=Ma(this.chart.width-T,0,this.maxWidth);l=n.offset?this.maxWidth/r:I/(r-1),T+6>l&&(l=I/(r-(n.offset?.5:1)),d=this.maxHeight-_C(n.grid)-t.padding-bH(n.title,this.chart.options.font),m=Math.sqrt(T*T+D*D),a=_L(Math.min(Math.asin(Ma((y.highest.height+6)/l,-1,1)),Math.asin(Ma(d/m,-1,1))-Math.asin(Ma(D/m,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){ss(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ss(this.options.beforeFit,[this])}fit(){const n={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const d=bH(i,t.options.font);if(l?(n.width=this.maxWidth,n.height=_C(s)+d):(n.height=this.maxHeight,n.width=_C(s)+d),r.display&&this.ticks.length){const{first:m,last:y,widest:T,highest:D}=this._getLabelSizes(),I=2*r.padding,F=ed(this.labelRotation),L=Math.cos(F),B=Math.sin(F);l?n.height=Math.min(this.maxHeight,n.height+(r.mirror?0:B*T.width+L*D.height)+I):n.width=Math.min(this.maxWidth,n.width+(r.mirror?0:L*T.width+B*D.height)+I),this._calculatePadding(m,y,B,L)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=n.height):(this.width=n.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(n,t,r,i){const{ticks:{align:s,padding:a},position:l}=this.options,d=0!==this.labelRotation,m="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,T=this.right-this.getPixelForTick(this.ticks.length-1);let D=0,I=0;d?m?(D=i*n.width,I=r*t.height):(D=r*n.height,I=i*t.width):"start"===s?I=t.width:"end"===s?D=n.width:"inner"!==s&&(D=n.width/2,I=t.width/2),this.paddingLeft=Math.max((D-y+a)*this.width/(this.width-y),0),this.paddingRight=Math.max((I-T+a)*this.width/(this.width-T),0)}else{let y=t.height/2,T=n.height/2;"start"===s?(y=0,T=n.height):"end"===s&&(y=t.height,T=0),this.paddingTop=y+a,this.paddingBottom=T+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ss(this.options.afterFit,[this])}isHorizontal(){const{axis:n,position:t}=this.options;return"top"===t||"bottom"===t||"x"===n}isFullSize(){return this.options.fullSize}_convertTicksToLabels(n){let t,r;for(this.beforeTickToLabelConversion(),this.generateTickLabels(n),t=0,r=n.length;t<r;t++)Mi(n[t].label)&&(n.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let n=this._labelSizes;if(!n){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=xH(r,t)),this._labelSizes=n=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return n}_computeLabelSizes(n,t,r){const{ctx:i,_longestTextCache:s}=this,a=[],l=[],d=Math.floor(t/vH(t,r));let T,D,I,F,L,B,G,Z,q,oe,_e,m=0,y=0;for(T=0;T<t;T+=d){if(F=n[T].label,L=this._resolveTickFontOptions(T),i.font=B=L.string,G=s[B]=s[B]||{data:{},gc:[]},Z=L.lineHeight,q=oe=0,Mi(F)||Es(F)){if(Es(F))for(D=0,I=F.length;D<I;++D)_e=F[D],!Mi(_e)&&!Es(_e)&&(q=aM(i,G.data,G.gc,q,_e),oe+=Z)}else q=aM(i,G.data,G.gc,q,F),oe=Z;a.push(q),l.push(oe),m=Math.max(q,m),y=Math.max(oe,y)}!function l2e(e,n){ji(e,t=>{const r=t.gc,i=r.length/2;let s;if(i>n){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}(s,t);const fe=a.indexOf(m),ae=l.indexOf(y),De=Ie=>({width:a[Ie]||0,height:l[Ie]||0});return{first:De(0),last:De(t-1),widest:De(fe),highest:De(ae),widths:a,heights:l}}getLabelForValue(n){return n}getPixelForValue(n,t){return NaN}getValueForPixel(n){}getPixelForTick(n){const t=this.ticks;return n<0||n>t.length-1?null:this.getPixelForValue(t[n].value)}getPixelForDecimal(n){this._reversePixels&&(n=1-n);const t=this._startPixel+n*this._length;return function Yxe(e){return Ma(e,-32768,32767)}(this._alignToPixels?Sy(this.chart,t,0):t)}getDecimalForPixel(n){const t=(n-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:n,max:t}=this;return n<0&&t<0?t:n>0&&t>0?n:0}getContext(n){const t=this.ticks||[];if(n>=0&&n<t.length){const r=t[n];return r.$context||(r.$context=function u2e(e,n,t){return e0(e,{tick:t,index:n,type:"tick"})}(this.getContext(),n,r))}return this.$context||(this.$context=function c2e(e,n){return e0(e,{scale:n,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const n=this.options.ticks,t=ed(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=n.autoSkipPadding||0,l=s?s.widest.width+a:0,d=s?s.highest.height+a:0;return this.isHorizontal()?d*r>l*i?l/r:d/i:d*i<l*r?d/r:l/i}_isVisible(){const n=this.options.display;return"auto"!==n?!!n:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(n){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:l}=i,d=s.offset,m=this.isHorizontal(),T=this.ticks.length+(d?1:0),D=_C(s),I=[],F=l.setContext(this.getContext()),L=F.display?F.width:0,B=L/2,G=function(yt){return Sy(r,yt,L)};let Z,q,oe,_e,fe,ae,De,Ie,qe,Je,$e,jt;if("top"===a)Z=G(this.bottom),ae=this.bottom-D,Ie=Z-B,Je=G(n.top)+B,jt=n.bottom;else if("bottom"===a)Z=G(this.top),Je=n.top,jt=G(n.bottom)-B,ae=Z+B,Ie=this.top+D;else if("left"===a)Z=G(this.right),fe=this.right-D,De=Z-B,qe=G(n.left)+B,$e=n.right;else if("right"===a)Z=G(this.left),qe=n.left,$e=G(n.right)-B,fe=Z+B,De=this.left+D;else if("x"===t){if("center"===a)Z=G((n.top+n.bottom)/2+.5);else if(hi(a)){const yt=Object.keys(a)[0];Z=G(this.chart.scales[yt].getPixelForValue(a[yt]))}Je=n.top,jt=n.bottom,ae=Z+B,Ie=ae+D}else if("y"===t){if("center"===a)Z=G((n.left+n.right)/2);else if(hi(a)){const yt=Object.keys(a)[0];Z=G(this.chart.scales[yt].getPixelForValue(a[yt]))}fe=Z-B,De=fe-D,qe=n.left,$e=n.right}const ln=Ir(i.ticks.maxTicksLimit,T),zt=Math.max(1,Math.ceil(T/ln));for(q=0;q<T;q+=zt){const yt=this.getContext(q),xt=s.setContext(yt),Zt=l.setContext(yt),Pt=xt.lineWidth,an=xt.color,St=Zt.dash||[],Pe=Zt.dashOffset,ut=xt.tickWidth,Re=xt.tickColor,je=xt.tickBorderDash||[],Dt=xt.tickBorderDashOffset;oe=a2e(this,q,d),void 0!==oe&&(_e=Sy(r,oe,Pt),m?fe=De=qe=$e=_e:ae=Ie=Je=jt=_e,I.push({tx1:fe,ty1:ae,tx2:De,ty2:Ie,x1:qe,y1:Je,x2:$e,y2:jt,width:Pt,color:an,borderDash:St,borderDashOffset:Pe,tickWidth:ut,tickColor:Re,tickBorderDash:je,tickBorderDashOffset:Dt}))}return this._ticksLength=T,this._borderValue=Z,I}_computeLabelItems(n){const t=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:m,padding:y,mirror:T}=s,D=_C(r.grid),I=D+y,F=T?-y:I,L=-ed(this.labelRotation),B=[];let G,Z,q,oe,_e,fe,ae,De,Ie,qe,Je,$e,jt="middle";if("top"===i)fe=this.bottom-F,ae=this._getXAxisLabelAlignment();else if("bottom"===i)fe=this.top+F,ae=this._getXAxisLabelAlignment();else if("left"===i){const zt=this._getYAxisLabelAlignment(D);ae=zt.textAlign,_e=zt.x}else if("right"===i){const zt=this._getYAxisLabelAlignment(D);ae=zt.textAlign,_e=zt.x}else if("x"===t){if("center"===i)fe=(n.top+n.bottom)/2+I;else if(hi(i)){const zt=Object.keys(i)[0];fe=this.chart.scales[zt].getPixelForValue(i[zt])+I}ae=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)_e=(n.left+n.right)/2-I;else if(hi(i)){const zt=Object.keys(i)[0];_e=this.chart.scales[zt].getPixelForValue(i[zt])}ae=this._getYAxisLabelAlignment(D).textAlign}"y"===t&&("start"===d?jt="top":"end"===d&&(jt="bottom"));const ln=this._getLabelSizes();for(G=0,Z=l.length;G<Z;++G){q=l[G],oe=q.label;const zt=s.setContext(this.getContext(G));De=this.getPixelForTick(G)+s.labelOffset,Ie=this._resolveTickFontOptions(G),qe=Ie.lineHeight,Je=Es(oe)?oe.length:1;const yt=Je/2,xt=zt.color,Zt=zt.textStrokeColor,Pt=zt.textStrokeWidth;let St,an=ae;if(a?(_e=De,"inner"===ae&&(an=G===Z-1?this.options.reverse?"left":"right":0===G?this.options.reverse?"right":"left":"center"),$e="top"===i?"near"===m||0!==L?-Je*qe+qe/2:"center"===m?-ln.highest.height/2-yt*qe+qe:qe/2-ln.highest.height:"near"===m||0!==L?qe/2:"center"===m?ln.highest.height/2-yt*qe:ln.highest.height-Je*qe,T&&($e*=-1),0!==L&&!zt.showLabelBackdrop&&(_e+=qe/2*Math.sin(L))):(fe=De,$e=(1-Je)*qe/2),zt.showLabelBackdrop){const Pe=vl(zt.backdropPadding),ut=ln.heights[G],Re=ln.widths[G];let je=$e-Pe.top,Dt=0-Pe.left;switch(jt){case"middle":je-=ut/2;break;case"bottom":je-=ut}switch(ae){case"center":Dt-=Re/2;break;case"right":Dt-=Re}St={left:Dt,top:je,width:Re+Pe.width,height:ut+Pe.height,color:zt.backdropColor}}B.push({label:oe,font:Ie,textOffset:$e,options:{rotation:L,color:xt,strokeColor:Zt,strokeWidth:Pt,textAlign:an,textBaseline:jt,translation:[_e,fe],backdrop:St}})}return B}_getXAxisLabelAlignment(){const{position:n,ticks:t}=this.options;if(-ed(this.labelRotation))return"top"===n?"left":"right";let i="center";return"start"===t.align?i="left":"end"===t.align?i="right":"inner"===t.align&&(i="inner"),i}_getYAxisLabelAlignment(n){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,l=n+s,d=this._getLabelSizes().widest.width;let m,y;return"left"===t?i?(y=this.right+s,"near"===r?m="left":"center"===r?(m="center",y+=d/2):(m="right",y+=d)):(y=this.right-l,"near"===r?m="right":"center"===r?(m="center",y-=d/2):(m="left",y=this.left)):"right"===t?i?(y=this.left+s,"near"===r?m="right":"center"===r?(m="center",y-=d/2):(m="left",y-=d)):(y=this.left+l,"near"===r?m="left":"center"===r?(m="center",y+=d/2):(m="right",y=this.right)):m="right",{textAlign:m,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const n=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:n.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:n.width}:void 0}drawBackground(){const{ctx:n,options:{backgroundColor:t},left:r,top:i,width:s,height:a}=this;t&&(n.save(),n.fillStyle=t,n.fillRect(r,i,s,a),n.restore())}getLineWidthForValue(n){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===n);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(n){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(n));let s,a;const l=(d,m,y)=>{!y.width||!y.color||(r.save(),r.lineWidth=y.width,r.strokeStyle=y.color,r.setLineDash(y.borderDash||[]),r.lineDashOffset=y.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(m.x,m.y),r.stroke(),r.restore())};if(t.display)for(s=0,a=i.length;s<a;++s){const d=i[s];t.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:n,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const l=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,y,T,D;this.isHorizontal()?(m=Sy(n,this.left,a)-a/2,y=Sy(n,this.right,l)+l/2,T=D=d):(T=Sy(n,this.top,a)-a/2,D=Sy(n,this.bottom,l)+l/2,m=y=d),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(m,T),t.lineTo(y,D),t.stroke(),t.restore()}drawLabels(n){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&lM(r,i);const s=this.getLabelItems(n);for(const a of s)Dy(r,a.label,0,a.textOffset,a.font,a.options);i&&cM(r)}drawTitle(){const{ctx:n,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=ca(r.font),a=vl(r.padding),l=r.align;let d=s.lineHeight/2;"bottom"===t||"center"===t||hi(t)?(d+=a.bottom,Es(r.text)&&(d+=s.lineHeight*(r.text.length-1))):d+=a.top;const{titleX:m,titleY:y,maxWidth:T,rotation:D}=function d2e(e,n,t,r){const{top:i,left:s,bottom:a,right:l,chart:d}=e,{chartArea:m,scales:y}=d;let D,I,F,T=0;const L=a-i,B=l-s;if(e.isHorizontal()){if(I=yl(r,s,l),hi(t)){const G=Object.keys(t)[0];F=y[G].getPixelForValue(t[G])+L-n}else F="center"===t?(m.bottom+m.top)/2+L-n:yH(e,t,n);D=l-s}else{if(hi(t)){const G=Object.keys(t)[0];I=y[G].getPixelForValue(t[G])-B+n}else I="center"===t?(m.left+m.right)/2-B+n:yH(e,t,n);F=yl(r,a,i),T="left"===t?-to:to}return{titleX:I,titleY:F,maxWidth:D,rotation:T}}(this,d,t,l);Dy(n,r.text,0,0,s,{color:r.color,maxWidth:T,rotation:D,textAlign:h2e(l,t,i),textBaseline:"middle",translation:[m,y]})}draw(n){this._isVisible()&&(this.drawBackground(),this.drawGrid(n),this.drawBorder(),this.drawTitle(),this.drawLabels(n))}_layers(){const n=this.options,t=n.ticks&&n.ticks.z||0,r=Ir(n.grid&&n.grid.z,-1),i=Ir(n.border&&n.border.z,0);return this._isVisible()&&this.draw===Oy.prototype.draw?[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]:[{z:t,draw:s=>{this.draw(s)}}]}getMatchingVisibleMetas(n){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=t.length;s<a;++s){const l=t[s];l[r]===this.id&&(!n||l.type===n)&&i.push(l)}return i}_resolveTickFontOptions(n){return ca(this.options.ticks.setContext(this.getContext(n)).font)}_maxDigits(){const n=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/n}}class yM{constructor(n,t,r){this.type=n,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(n){return Object.prototype.isPrototypeOf.call(this.type.prototype,n.prototype)}register(n){const t=Object.getPrototypeOf(n);let r;(function m2e(e){return"id"in e&&"defaults"in e})(t)&&(r=this.register(t));const i=this.items,s=n.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+n);return s in i||(i[s]=n,function f2e(e,n,t){const r=tC(Object.create(null),[t?no.get(t):{},no.get(n),e.defaults]);no.set(n,r),e.defaultRoutes&&function p2e(e,n){Object.keys(n).forEach(t=>{const r=t.split("."),i=r.pop(),s=[e].concat(r).join("."),a=n[t].split("."),l=a.pop(),d=a.join(".");no.route(s,i,d,l)})}(n,e.defaultRoutes),e.descriptors&&no.describe(n,e.descriptors)}(n,a,r),this.override&&no.override(n.id,n.overrides)),a}get(n){return this.items[n]}unregister(n){const t=this.items,r=n.id,i=this.scope;r in t&&delete t[r],i&&r in no[i]&&(delete no[i][r],this.override&&delete Ey[r])}}class g2e{constructor(){this.controllers=new yM(t0,"datasets",!0),this.elements=new yM(td,"elements"),this.plugins=new yM(Object,"plugins"),this.scales=new yM(Oy,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...n){this._each("register",n)}remove(...n){this._each("unregister",n)}addControllers(...n){this._each("register",n,this.controllers)}addElements(...n){this._each("register",n,this.elements)}addPlugins(...n){this._each("register",n,this.plugins)}addScales(...n){this._each("register",n,this.scales)}getController(n){return this._get(n,this.controllers,"controller")}getElement(n){return this._get(n,this.elements,"element")}getPlugin(n){return this._get(n,this.plugins,"plugin")}getScale(n){return this._get(n,this.scales,"scale")}removeControllers(...n){this._each("unregister",n,this.controllers)}removeElements(...n){this._each("unregister",n,this.elements)}removePlugins(...n){this._each("unregister",n,this.plugins)}removeScales(...n){this._each("unregister",n,this.scales)}_each(n,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(n,s,i):ji(i,a=>{const l=r||this._getRegistryForType(a);this._exec(n,l,a)})})}_exec(n,t,r){const i=gL(n);ss(r["before"+i],[],r),t[n](r),ss(r["after"+i],[],r)}_getRegistryForType(n){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(n))return r}return this.plugins}_get(n,t,r){const i=t.get(n);if(void 0===i)throw new Error('"'+n+'" is not a registered '+r+".");return i}}var wf=new g2e;class _2e{constructor(){this._init=[]}notify(n,t,r,i){"beforeInit"===t&&(this._init=this._createDescriptors(n,!0),this._notify(this._init,n,"install"));const s=i?this._descriptors(n).filter(i):this._descriptors(n),a=this._notify(s,n,t,r);return"afterDestroy"===t&&(this._notify(s,n,"stop"),this._notify(this._init,n,"uninstall")),a}_notify(n,t,r,i){i=i||{};for(const s of n){const a=s.plugin;if(!1===ss(a[r],[t,i,s.options],a)&&i.cancelable)return!1}return!0}invalidate(){Mi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(n){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(n);return this._notifyStateChanges(n),t}_createDescriptors(n,t){const r=n&&n.config,i=Ir(r.options&&r.options.plugins,{}),s=function y2e(e){const n={},t=[],r=Object.keys(wf.plugins.items);for(let s=0;s<r.length;s++)t.push(wf.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];-1===t.indexOf(a)&&(t.push(a),n[a.id]=!0)}return{plugins:t,localIds:n}}(r);return!1!==i||t?function x2e(e,{plugins:n,localIds:t},r,i){const s=[],a=e.getContext();for(const l of n){const d=l.id,m=v2e(r[d],i);null!==m&&s.push({plugin:l,options:b2e(e.config,{plugin:l,local:t[d]},m,a)})}return s}(n,s,i,t):[]}_notifyStateChanges(n){const t=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(l=>!a.some(d=>l.plugin.id===d.plugin.id));this._notify(i(t,r),n,"stop"),this._notify(i(r,t),n,"start")}}function v2e(e,n){return n||!1!==e?!0===e?{}:e:null}function b2e(e,{plugin:n,local:t},r,i){const s=e.pluginScopeKeys(n),a=e.getOptionScopes(r,s);return t&&n.defaults&&a.push(n.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function BL(e,n){return((n.datasets||{})[e]||{}).indexAxis||n.indexAxis||(no.datasets[e]||{}).indexAxis||"x"}function vM(e,n){if("x"===e||"y"===e||"r"===e||(e=n.axis||function T2e(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}(n.position)||e.length>1&&vM(e[0].toLowerCase(),n)))return e;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function wH(e){const n=e.options||(e.options={});n.plugins=Ir(n.plugins,{}),n.scales=function E2e(e,n){const t=Ey[e.type]||{scales:{}},r=n.scales||{},i=BL(e.type,n),s=Object.create(null);return Object.keys(r).forEach(a=>{const l=r[a];if(!hi(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const d=vM(a,l),m=function C2e(e,n){return e===n?"_index_":"_value_"}(d,i),y=t.scales||{};s[a]=nC(Object.create(null),[{axis:d},l,y[d],y[m]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,d=a.indexAxis||BL(l,n),y=(Ey[l]||{}).scales||{};Object.keys(y).forEach(T=>{const D=function w2e(e,n){let t=e;return"_index_"===e?t=n:"_value_"===e&&(t="x"===n?"y":"x"),t}(T,d),I=a[D+"AxisID"]||D;s[I]=s[I]||Object.create(null),nC(s[I],[{axis:D},r[I],y[T]])})}),Object.keys(s).forEach(a=>{const l=s[a];nC(l,[no.scales[l.type],no.scale])}),s}(e,n)}function CH(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const TH=new Map,EH=new Set;function xM(e,n){let t=TH.get(e);return t||(t=n(),TH.set(e,t),EH.add(t)),t}const yC=(e,n,t)=>{const r=Kg(n,t);void 0!==r&&e.add(r)};class D2e{constructor(n){this._config=function S2e(e){return(e=e||{}).data=CH(e.data),wH(e),e}(n),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(n){this._config.type=n}get data(){return this._config.data}set data(n){this._config.data=CH(n)}get options(){return this._config.options}set options(n){this._config.options=n}get plugins(){return this._config.plugins}update(){const n=this._config;this.clearCache(),wH(n)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(n){return xM(n,()=>[[`datasets.${n}`,""]])}datasetAnimationScopeKeys(n,t){return xM(`${n}.transition.${t}`,()=>[[`datasets.${n}.transitions.${t}`,`transitions.${t}`],[`datasets.${n}`,""]])}datasetElementScopeKeys(n,t){return xM(`${n}-${t}`,()=>[[`datasets.${n}.elements.${t}`,`datasets.${n}`,`elements.${t}`,""]])}pluginScopeKeys(n){const t=n.id;return xM(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...n.additionalOptionScopes||[]]])}_cachedScopes(n,t){const r=this._scopeCache;let i=r.get(n);return(!i||t)&&(i=new Map,r.set(n,i)),i}getOptionScopes(n,t,r){const{options:i,type:s}=this,a=this._cachedScopes(n,r),l=a.get(t);if(l)return l;const d=new Set;t.forEach(y=>{n&&(d.add(n),y.forEach(T=>yC(d,n,T))),y.forEach(T=>yC(d,i,T)),y.forEach(T=>yC(d,Ey[s]||{},T)),y.forEach(T=>yC(d,no,T)),y.forEach(T=>yC(d,wL,T))});const m=Array.from(d);return 0===m.length&&m.push(Object.create(null)),EH.has(t)&&a.set(t,m),m}chartOptionScopes(){const{options:n,type:t}=this;return[n,Ey[t]||{},no.datasets[t]||{},{type:t},no,wL]}resolveNamedOptions(n,t,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:l}=SH(this._resolverCache,n,i);let d=a;(function k2e(e,n){const{isScriptable:t,isIndexable:r}=M7(e);for(const i of n){const s=t(i),a=r(i),l=(a||s)&&e[i];if(s&&(Jg(l)||M2e(l))||a&&Es(l))return!0}return!1})(a,t)&&(s.$shared=!1,d=vx(a,r=Jg(r)?r():r,this.createResolver(n,r,l)));for(const m of t)s[m]=d[m];return s}createResolver(n,t,r=[""],i){const{resolver:s}=SH(this._resolverCache,n,r);return hi(t)?vx(s,t,void 0,i):s}}function SH(e,n,t){let r=e.get(n);r||(r=new Map,e.set(n,r));const i=t.join();let s=r.get(i);return s||(s={resolver:SL(n,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const M2e=e=>hi(e)&&Object.getOwnPropertyNames(e).reduce((n,t)=>n||Jg(e[t]),!1),I2e=["top","bottom","left","right","chartArea"];function DH(e,n){return"top"===e||"bottom"===e||-1===I2e.indexOf(e)&&"x"===n}function MH(e,n){return function(t,r){return t[e]===r[e]?t[n]-r[n]:t[e]-r[e]}}function kH(e){const n=e.chart,t=n.options.animation;n.notifyPlugins("afterRender"),ss(t&&t.onComplete,[e],n)}function P2e(e){const n=e.chart,t=n.options.animation;ss(t&&t.onProgress,[e],n)}function AH(e){return R7()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const bM={},IH=e=>{const n=AH(e);return Object.values(bM).filter(t=>t.canvas===n).pop()};function O2e(e,n,t){const r=Object.keys(e);for(const i of r){const s=+i;if(s>=n){const a=e[i];delete e[i],(t>0||s>n)&&(e[s+t]=a)}}}let zL=(()=>{class e{static register(...t){wf.add(...t),PH()}static unregister(...t){wf.remove(...t),PH()}constructor(t,r){const i=this.config=new D2e(r),s=AH(t),a=IH(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function Qwe(e){return!R7()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Vwe:Jwe}(s)),this.platform.updateConfig(i);const d=this.platform.acquireContext(s,l.aspectRatio),m=d&&d.canvas,y=m&&m.height,T=m&&m.width;this.id=Fxe(),this.ctx=d,this.canvas=m,this.width=T,this.height=y,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _2e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Kxe(e,n){let t;return function(...r){return n?(clearTimeout(t),t=setTimeout(e,n,r)):e.apply(this,r),n}}(D=>this.update(D),l.resizeDelay||0),this._dataChanges=[],bM[this.id]=this,d&&m?(sm.listen(this,"complete",kH),sm.listen(this,"progress",P2e),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:a}=this;return Mi(t)?r&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wf}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():N7(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return E7(this.canvas,this.ctx),this}stop(){return sm.stop(this),this}resize(t,r){sm.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const i=this.options,l=this.platform.getMaximumSize(this.canvas,t,r,i.maintainAspectRatio&&this.aspectRatio),d=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,N7(this,d,!0)&&(this.notifyPlugins("resize",{size:l}),ss(i.onResize,[this,l],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){ji(this.options.scales||{},(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((l,d)=>(l[d]=!1,l),{});let a=[];r&&(a=a.concat(Object.keys(r).map(l=>{const d=r[l],m=vM(l,d),y="r"===m,T="x"===m;return{options:d,dposition:y?"chartArea":T?"bottom":"left",dtype:y?"radialLinear":T?"category":"linear"}}))),ji(a,l=>{const d=l.options,m=d.id,y=vM(m,d),T=Ir(d.type,l.dtype);(void 0===d.position||DH(d.position,y)!==DH(l.dposition))&&(d.position=l.dposition),s[m]=!0;let D=null;m in i&&i[m].type===T?D=i[m]:(D=new(wf.getScale(T))({id:m,type:T,ctx:this.ctx,chart:this}),i[D.id]=D),D.init(d,t)}),ji(s,(l,d)=>{l||delete i[d]}),ji(i,l=>{xl.configure(this,l,l.options),xl.addBox(this,l)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(MH("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{0===r.filter(a=>a===i._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){const a=r[i];let l=this.getDatasetMeta(i);const d=a.type||this.config.type;if(l.type&&l.type!==d&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=d,l.indexAxis=a.indexAxis||BL(d,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const m=wf.getController(d),{datasetElementType:y,dataElementType:T}=no.datasets[d];Object.assign(m,{dataElementType:wf.getElement(T),datasetElementType:y&&wf.getElement(y)}),l.controller=new m(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){ji(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let y=0,T=this.data.datasets.length;y<T;y++){const{controller:D}=this.getDatasetMeta(y),I=!s&&-1===a.indexOf(D);D.buildOrUpdateElements(I),l=Math.max(+D.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||ji(a,y=>{y.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(MH("z","_idx"));const{_active:d,_lastEvent:m}=this;m?this._eventHandler(m,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){ji(this.scales,t=>{xl.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!o7(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of r)O2e(t,s,"_removeElements"===i?-a:a)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,d)=>d+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<r;a++)if(!o7(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;xl.update(this,this.width,this.height,t);const r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],ji(this.boxes,s=>{i&&"chartArea"===s.position||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Jg(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(sm.has(this)?this.attached&&!sm.running(this)&&sm.start(this):(this.draw(),kH({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,i=[];let s,a;for(s=0,a=r.length;s<a;++s){const l=r[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,i=t._clip,s=!i.disabled,a=function F2e(e){const{xScale:n,yScale:t}=e;if(n&&t)return{left:n.left,right:n.right,top:t.top,bottom:t.bottom}}(t)||this.chartArea,l={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",l)&&(s&&lM(r,{left:!1===i.left?0:a.left-i.left,right:!1===i.right?this.width:a.right+i.right,top:!1===i.top?0:a.top-i.top,bottom:!1===i.bottom?this.height:a.bottom+i.bottom}),t.controller.draw(),s&&cM(r),l.cancelable=!1,this.notifyPlugins("afterDatasetDraw",l))}isPointInArea(t){return lC(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){const a=Pwe.modes[r];return"function"==typeof a?a(this,t,i,s):[]}getDatasetMeta(t){const r=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=e0(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!r.hidden}setDatasetVisibility(t,r){this.getDatasetMeta(t).hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);hh(r)?(a.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(d=>d.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),sm.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),E7(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete bM[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,i=(a,l)=>{r.addEventListener(this,a,l),t[a]=l},s=(a,l,d)=>{a.offsetX=l,a.offsetY=d,this._eventHandler(a)};ji(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,i=(m,y)=>{r.addEventListener(this,m,y),t[m]=y},s=(m,y)=>{t[m]&&(r.removeEventListener(this,m,y),delete t[m])},a=(m,y)=>{this.canvas&&this.resize(m,y)};let l;const d=()=>{s("attach",d),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",d)},r.isAttached(this.canvas)?d():l()}unbindEvents(){ji(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ji(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){const s=i?"set":"remove";let a,l,d,m;for("dataset"===r&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),d=0,m=t.length;d<m;++d){l=t[d];const y=l&&this.getDatasetMeta(l.datasetIndex).controller;y&&y[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const d=this.getDatasetMeta(a);if(!d)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:d.data[l],index:l}});!nM(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter(r=>r.plugin.id===t).length}_updateHoverStyles(t,r,i){const s=this.options.hover,a=(m,y)=>m.filter(T=>!y.some(D=>T.datasetIndex===D.datasetIndex&&T.index===D.index)),l=a(r,t),d=i?t:a(t,r);l.length&&this.updateHoverStyle(l,s.mode,!1),d.length&&s.mode&&this.updateHoverStyle(d,s.mode,!0)}_eventHandler(t,r){const i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const a=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,r,i){const{_active:s=[],options:a}=this,d=this._getActiveElements(t,s,i,r),m=function Uxe(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(t),y=function L2e(e,n,t,r){return t&&"mouseout"!==e.type?r?n:e:null}(t,this._lastEvent,i,m);i&&(this._lastEvent=null,ss(a.onHover,[t,d,this],this),m&&ss(a.onClick,[t,d,this],this));const T=!nM(d,s);return(T||r)&&(this._active=d,this._updateHoverStyles(d,s,r)),this._lastEvent=y,T}_getActiveElements(t,r,i,s){if("mouseout"===t.type)return[];if(!i)return r;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}}return Fn(e,"defaults",no),Fn(e,"instances",bM),Fn(e,"overrides",Ey),Fn(e,"registry",wf),Fn(e,"version","4.2.1"),Fn(e,"getChart",IH),e})();function PH(){return ji(zL.instances,e=>e._plugins.invalidate())}function wx(e,n,t,r){return{x:t+e*Math.cos(n),y:r+e*Math.sin(n)}}function wM(e,n,t,r,i,s){const{x:a,y:l,startAngle:d,pixelMargin:m,innerRadius:y}=n,T=Math.max(n.outerRadius+r+t-m,0),D=y>0?y+r+t+m:0;let I=0;const F=i-d;if(r){const xt=((y>0?y-r:0)+(T>0?T-r:0))/2;I=(F-(0!==xt?F*xt/(xt+r):F))/2}const B=(F-Math.max(.001,F*T-t/Os)/T)/2,G=d+B+I,Z=i-B-I,{outerStart:q,outerEnd:oe,innerStart:_e,innerEnd:fe}=function B2e(e,n,t,r){const i=function N2e(e){return EL(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(t-n)/2,a=Math.min(s,r*n/2),l=d=>{const m=(t-Math.min(s,d))*r/2;return Ma(d,0,Math.min(s,m))};return{outerStart:l(i.outerStart),outerEnd:l(i.outerEnd),innerStart:Ma(i.innerStart,0,a),innerEnd:Ma(i.innerEnd,0,a)}}(n,D,T,Z-G),ae=T-q,De=T-oe,Ie=G+q/ae,qe=Z-oe/De,Je=D+_e,$e=D+fe,jt=G+_e/Je,ln=Z-fe/$e;if(e.beginPath(),s){const zt=(Ie+qe)/2;if(e.arc(a,l,T,Ie,zt),e.arc(a,l,T,zt,qe),oe>0){const Pt=wx(De,qe,a,l);e.arc(Pt.x,Pt.y,oe,qe,Z+to)}const yt=wx($e,Z,a,l);if(e.lineTo(yt.x,yt.y),fe>0){const Pt=wx($e,ln,a,l);e.arc(Pt.x,Pt.y,fe,Z+to,ln+Math.PI)}const xt=(Z-fe/D+(G+_e/D))/2;if(e.arc(a,l,D,Z-fe/D,xt,!0),e.arc(a,l,D,xt,G+_e/D,!0),_e>0){const Pt=wx(Je,jt,a,l);e.arc(Pt.x,Pt.y,_e,jt+Math.PI,G-to)}const Zt=wx(ae,G,a,l);if(e.lineTo(Zt.x,Zt.y),q>0){const Pt=wx(ae,Ie,a,l);e.arc(Pt.x,Pt.y,q,G-to,Ie)}}else{e.moveTo(a,l);const zt=Math.cos(Ie)*T+a,yt=Math.sin(Ie)*T+l;e.lineTo(zt,yt);const xt=Math.cos(qe)*T+a,Zt=Math.sin(qe)*T+l;e.lineTo(xt,Zt)}e.closePath()}class CM extends td{constructor(n){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,t,r){const i=this.getProps(["x","y"],r),{angle:s,distance:a}=h7(i,{x:n,y:t}),{startAngle:l,endAngle:d,innerRadius:m,outerRadius:y,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),D=this.options.spacing/2,F=Ir(T,d-l)>=Ss||iC(s,l,d),L=rm(a,m+D,y+D);return F&&L}getCenterPoint(n){const{x:t,y:r,startAngle:i,endAngle:s,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:d,spacing:m}=this.options,y=(i+s)/2,T=(a+l+m+d)/2;return{x:t+Math.cos(y)*T,y:r+Math.sin(y)*T}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=r>Ss?Math.floor(r/Ss):0,0===r||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const m=i*(1-Math.sin(Math.min(Os,r||0)));n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,function z2e(e,n,t,r,i){const{fullCircles:s,startAngle:a,circumference:l}=n;let d=n.endAngle;if(s){wM(e,n,t,r,d,i);for(let m=0;m<s;++m)e.fill();isNaN(l)||(d=a+(l%Ss||Ss))}wM(e,n,t,r,d,i),e.fill()}(n,this,m,s,a),function V2e(e,n,t,r,i){const{fullCircles:s,startAngle:a,circumference:l,options:d}=n,{borderWidth:m,borderJoinStyle:y}=d,T="inner"===d.borderAlign;if(!m)return;T?(e.lineWidth=2*m,e.lineJoin=y||"round"):(e.lineWidth=m,e.lineJoin=y||"bevel");let D=n.endAngle;if(s){wM(e,n,t,r,D,i);for(let I=0;I<s;++I)e.stroke();isNaN(l)||(D=a+(l%Ss||Ss))}T&&function R2e(e,n,t){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:l,innerRadius:d}=n;let m=i/l;e.beginPath(),e.arc(s,a,l,r-m,t+m),d>i?(m=i/d,e.arc(s,a,d,t+m,r-m,!0)):e.arc(s,a,i,t+to,r-to),e.closePath(),e.clip()}(e,n,D),s||(wM(e,n,t,r,D,i),e.stroke())}(n,this,m,s,a),n.restore()}}function OH(e,n,t=n){e.lineCap=Ir(t.borderCapStyle,n.borderCapStyle),e.setLineDash(Ir(t.borderDash,n.borderDash)),e.lineDashOffset=Ir(t.borderDashOffset,n.borderDashOffset),e.lineJoin=Ir(t.borderJoinStyle,n.borderJoinStyle),e.lineWidth=Ir(t.borderWidth,n.borderWidth),e.strokeStyle=Ir(t.borderColor,n.borderColor)}function U2e(e,n,t){e.lineTo(t.x,t.y)}function LH(e,n,t={}){const r=e.length,{start:i=0,end:s=r-1}=t,{start:a,end:l}=n,d=Math.max(i,a),m=Math.min(s,l);return{count:r,start:d,loop:n.loop,ilen:m<d&&!(i<a&&s<a||i>l&&s>l)?r+m-d:m-d}}function H2e(e,n,t,r){const{points:i,options:s}=n,{count:a,start:l,loop:d,ilen:m}=LH(i,t,r),y=function j2e(e){return e.stepped?cbe:e.tension||"monotone"===e.cubicInterpolationMode?ube:U2e}(s);let I,F,L,{move:T=!0,reverse:D}=r||{};for(I=0;I<=m;++I)F=i[(l+(D?m-I:I))%a],!F.skip&&(T?(e.moveTo(F.x,F.y),T=!1):y(e,L,F,D,s.stepped),L=F);return d&&(F=i[(l+(D?m:0))%a],y(e,L,F,D,s.stepped)),!!d}function $2e(e,n,t,r){const i=n.points,{count:s,start:a,ilen:l}=LH(i,t,r),{move:d=!0,reverse:m}=r||{};let D,I,F,L,B,G,y=0,T=0;const Z=oe=>(a+(m?l-oe:oe))%s,q=()=>{L!==B&&(e.lineTo(y,B),e.lineTo(y,L),e.lineTo(y,G))};for(d&&(I=i[Z(0)],e.moveTo(I.x,I.y)),D=0;D<=l;++D){if(I=i[Z(D)],I.skip)continue;const oe=I.x,_e=I.y,fe=0|oe;fe===F?(_e<L?L=_e:_e>B&&(B=_e),y=(T*y+oe)/++T):(q(),e.lineTo(oe,_e),F=fe,T=0,L=B=_e),G=_e}q()}function VL(e){const n=e.options;return e._decimated||e._loop||n.tension||"monotone"===n.cubicInterpolationMode||n.stepped||n.borderDash&&n.borderDash.length?H2e:$2e}Fn(CM,"id","arc"),Fn(CM,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Fn(CM,"defaultRoutes",{backgroundColor:"backgroundColor"});const q2e="function"==typeof Path2D;let TM=(()=>{class e extends td{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const i=this.options;!i.tension&&"monotone"!==i.cubicInterpolationMode||i.stepped||this._pointsUpdated||(Lbe(this._points,i,t,i.spanGaps?this._loop:this._fullLoop,r),this._pointsUpdated=!0)}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Xbe(e,n){const t=e.points,r=e.options.spanGaps,i=t.length;if(!i)return[];const s=!!e._loop,{start:a,end:l}=function Ybe(e,n,t,r){let i=0,s=n-1;if(t&&!r)for(;i<n&&!e[i].skip;)i++;for(;i<n&&e[i].skip;)i++;for(i%=n,t&&(s+=i);s>i&&e[s%n].skip;)s--;return s%=n,{start:i,end:s}}(t,i,s,r);return function W7(e,n,t,r){return r&&r.setContext&&t?function Zbe(e,n,t,r){const i=e._chart.getContext(),s=G7(e.options),{_datasetIndex:a,options:{spanGaps:l}}=e,d=t.length,m=[];let y=s,T=n[0].start,D=T;function I(F,L,B,G){const Z=l?-1:1;if(F!==L){for(F+=d;t[F%d].skip;)F-=Z;for(;t[L%d].skip;)L+=Z;F%d!=L%d&&(m.push({start:F%d,end:L%d,loop:B,style:G}),y=G,T=L%d)}}for(const F of n){T=l?T:F.start;let B,L=t[T%d];for(D=T+1;D<=F.end;D++){const G=t[D%d];B=G7(r.setContext(e0(i,{type:"segment",p0:L,p1:G,p0DataIndex:(D-1)%d,p1DataIndex:D%d,datasetIndex:a}))),Kbe(B,y)&&I(T,D-1,F.loop,y),L=G,y=B}T<D-1&&I(T,D-1,F.loop,y)}return m}(e,n,t,r):n}(e,!0===r?[{start:a,end:l,loop:s}]:function qbe(e,n,t,r){const i=e.length,s=[];let d,a=n,l=e[n];for(d=n+1;d<=t;++d){const m=e[d%i];m.skip||m.stop?l.skip||(s.push({start:n%i,end:(d-1)%i,loop:r=!1}),n=a=m.stop?d:null):(a=d,l.skip&&(n=d)),l=m}return null!==a&&s.push({start:n%i,end:a%i,loop:r}),s}(t,a,l<a?l+i:l,!!e._fullLoop&&0===a&&l===i-1),t,n)}(this,this.options.segment))}first(){const t=this.segments;return t.length&&this.points[t[0].start]}last(){const t=this.segments,i=t.length;return i&&this.points[t[i-1].end]}interpolate(t,r){const i=this.options,s=t[r],a=this.points,l=$7(this,{property:r,start:s,end:s});if(!l.length)return;const d=[],m=function W2e(e){return e.stepped?jbe:e.tension||"monotone"===e.cubicInterpolationMode?Hbe:Iy}(i);let y,T;for(y=0,T=l.length;y<T;++y){const{start:D,end:I}=l[y],F=a[D],L=a[I];if(F===L){d.push(F);continue}const G=m(F,L,Math.abs((s-F[r])/(L[r]-F[r])),i.stepped);G[r]=t[r],d.push(G)}return 1===d.length?d[0]:d}pathSegment(t,r,i){return VL(this)(t,this,r,i)}path(t,r,i){const s=this.segments,a=VL(this);let l=this._loop;r=r||0,i=i||this.points.length-r;for(const d of s)l&=a(t,this,d,{start:r,end:r+i-1});return!!l}draw(t,r,i,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(t.save(),function X2e(e,n,t,r){q2e&&!n.options.segment?function G2e(e,n,t,r){let i=n._path;i||(i=n._path=new Path2D,n.path(i,t,r)&&i.closePath()),OH(e,n.options),e.stroke(i)}(e,n,t,r):function Y2e(e,n,t,r){const{segments:i,options:s}=n,a=VL(n);for(const l of i)OH(e,s,l.style),e.beginPath(),a(e,n,l,{start:t,end:t+r-1})&&e.closePath(),e.stroke()}(e,n,t,r)}(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return Fn(e,"id","line"),Fn(e,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Fn(e,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Fn(e,"descriptors",{_scriptable:!0,_indexable:n=>"borderDash"!==n&&"fill"!==n}),e})();function FH(e,n,t,r){const i=e.options,{[t]:s}=e.getProps([t],r);return Math.abs(n-s)<i.radius+i.hitRadius}let Z2e=(()=>{class e extends td{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(r-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return FH(this,t,"x",r)}inYRange(t,r){return FH(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){let r=(t=t||this.options||{}).radius||0;return r=Math.max(r,r&&t.hoverRadius||0),2*(r+(r&&t.borderWidth||0))}draw(t,r){const i=this.options;this.skip||i.radius<.1||!lC(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,TL(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}return Fn(e,"id","point"),Fn(e,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Fn(e,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),e})();function RH(e,n){const{x:t,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],n);let l,d,m,y,T;return e.horizontal?(T=a/2,l=Math.min(t,i),d=Math.max(t,i),m=r-T,y=r+T):(T=s/2,l=t-T,d=t+T,m=Math.min(r,i),y=Math.max(r,i)),{left:l,top:m,right:d,bottom:y}}function n0(e,n,t,r){return e?0:Ma(n,t,r)}function UL(e,n,t,r){const i=null===n,s=null===t,l=e&&!(i&&s)&&RH(e,r);return l&&(i||rm(n,l.left,l.right))&&(s||rm(t,l.top,l.bottom))}function tCe(e,n){e.rect(n.x,n.y,n.w,n.h)}function jL(e,n,t={}){const r=e.x!==t.x?-n:0,i=e.y!==t.y?-n:0;return{x:e.x+r,y:e.y+i,w:e.w+((e.x+e.w!==t.x+t.w?n:0)-r),h:e.h+((e.y+e.h!==t.y+t.h?n:0)-i),radius:e.radius}}class EM extends td{constructor(n){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,n&&Object.assign(this,n)}draw(n){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=function Q2e(e){const n=RH(e),t=n.right-n.left,r=n.bottom-n.top,i=function K2e(e,n,t){const i=e.borderSkipped,s=D7(e.options.borderWidth);return{t:n0(i.top,s.top,0,t),r:n0(i.right,s.right,0,n),b:n0(i.bottom,s.bottom,0,t),l:n0(i.left,s.left,0,n)}}(e,t/2,r/2),s=function J2e(e,n,t){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=My(i),a=Math.min(n,t),l=e.borderSkipped,d=r||hi(i);return{topLeft:n0(!d||l.top||l.left,s.topLeft,0,a),topRight:n0(!d||l.top||l.right,s.topRight,0,a),bottomLeft:n0(!d||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:n0(!d||l.bottom||l.right,s.bottomRight,0,a)}}(e,t/2,r/2);return{outer:{x:n.left,y:n.top,w:t,h:r,radius:s},inner:{x:n.left+i.l,y:n.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}(this),l=function eCe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}(a.radius)?cC:tCe;n.save(),(a.w!==s.w||a.h!==s.h)&&(n.beginPath(),l(n,jL(a,t,s)),n.clip(),l(n,jL(s,-t,a)),n.fillStyle=r,n.fill("evenodd")),n.beginPath(),l(n,jL(s,t)),n.fillStyle=i,n.fill(),n.restore()}inRange(n,t,r){return UL(this,n,t,r)}inXRange(n,t){return UL(this,n,null,t)}inYRange(n,t){return UL(this,null,n,t)}getCenterPoint(n){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],n);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(n){return"x"===n?this.width/2:this.height/2}}Fn(EM,"id","bar"),Fn(EM,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Fn(EM,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var nCe=Object.freeze({__proto__:null,ArcElement:CM,LineElement:TM,PointElement:Z2e,BarElement:EM});const HL=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],NH=HL.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function BH(e){return HL[e%HL.length]}function zH(e){return NH[e%NH.length]}function VH(e){let n;for(n in e)if(e[n].borderColor||e[n].backgroundColor)return!0;return!1}var lCe={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,n,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:s}=i;if(!t.forceOverride&&(VH(r)||function aCe(e){return e&&(e.borderColor||e.backgroundColor)}(i)||s&&VH(s)))return;const a=function oCe(e){let n=0;return(t,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof OL?n=function iCe(e,n){return e.backgroundColor=e.data.map(()=>BH(n++)),n}(t,n):i instanceof oH?n=function sCe(e,n){return e.backgroundColor=e.data.map(()=>zH(n++)),n}(t,n):i&&(n=function rCe(e,n){return e.borderColor=BH(n),e.backgroundColor=zH(n),++n}(t,n))}}(e);r.forEach(a)}};function UH(e){if(e._decimated){const n=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:n})}}function jH(e){e.data.datasets.forEach(n=>{UH(n)})}var dCe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,n,t)=>{if(!t.enabled)return void jH(e);const r=e.width;e.data.datasets.forEach((i,s)=>{const{_data:a,indexAxis:l}=i,d=e.getDatasetMeta(s),m=a||i.data;if("y"===uC([l,e.options.indexAxis])||!d.controller.supportsDecimation)return;const y=e.scales[d.xAxisID];if("linear"!==y.type&&"time"!==y.type||e.options.parsing)return;let F,{start:T,count:D}=function hCe(e,n){const t=n.length;let i,r=0;const{iScale:s}=e,{min:a,max:l,minDefined:d,maxDefined:m}=s.getUserBounds();return d&&(r=Ma(im(n,s.axis,a).lo,0,t-1)),i=m?Ma(im(n,s.axis,l).hi+1,r,t)-r:t-r,{start:r,count:i}}(d,m);if(D<=(t.threshold||4*r))UH(i);else{switch(Mi(a)&&(i._data=m,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(L){this._data=L}})),t.algorithm){case"lttb":F=function cCe(e,n,t,r,i){const s=i.samples||r;if(s>=t)return e.slice(n,n+t);const a=[],l=(t-2)/(s-2);let d=0;const m=n+t-1;let T,D,I,F,L,y=n;for(a[d++]=e[y],T=0;T<s-2;T++){let Z,B=0,G=0;const q=Math.floor((T+1)*l)+1+n,oe=Math.min(Math.floor((T+2)*l)+1,t)+n,_e=oe-q;for(Z=q;Z<oe;Z++)B+=e[Z].x,G+=e[Z].y;B/=_e,G/=_e;const fe=Math.floor(T*l)+1+n,ae=Math.min(Math.floor((T+1)*l)+1,t)+n,{x:De,y:Ie}=e[y];for(I=F=-1,Z=fe;Z<ae;Z++)F=.5*Math.abs((De-B)*(e[Z].y-Ie)-(De-e[Z].x)*(G-Ie)),F>I&&(I=F,D=e[Z],L=Z);a[d++]=D,y=L}return a[d++]=e[m],a}(m,T,D,r,t);break;case"min-max":F=function uCe(e,n,t,r){let a,l,d,m,y,T,D,I,F,L,i=0,s=0;const B=[],Z=e[n].x,oe=e[n+t-1].x-Z;for(a=n;a<n+t;++a){l=e[a],d=(l.x-Z)/oe*r,m=l.y;const _e=0|d;if(_e===y)m<F?(F=m,T=a):m>L&&(L=m,D=a),i=(s*i+l.x)/++s;else{const fe=a-1;if(!Mi(T)&&!Mi(D)){const ae=Math.min(T,D),De=Math.max(T,D);ae!==I&&ae!==fe&&B.push({...e[ae],x:i}),De!==I&&De!==fe&&B.push({...e[De],x:i})}a>0&&fe!==I&&B.push(e[fe]),B.push(l),y=_e,s=0,F=L=m,T=D=I=a}}return B}(m,T,D,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=F}})},destroy(e){jH(e)}};function $L(e,n,t,r){if(r)return;let i=n[e],s=t[e];return"angle"===e&&(i=hu(i),s=hu(s)),{property:e,start:i,end:s}}function WL(e,n,t){for(;n>e;n--){const r=t[n];if(!isNaN(r.x)&&!isNaN(r.y))break}return n}function HH(e,n,t,r){return e&&n?r(e[t],n[t]):e?e[t]:n?n[t]:0}function $H(e,n){let t=[],r=!1;return Es(e)?(r=!0,t=e):t=function pCe(e,n){const{x:t=null,y:r=null}=e||{},i=n.points,s=[];return n.segments.forEach(({start:a,end:l})=>{l=WL(a,l,i);const d=i[a],m=i[l];null!==r?(s.push({x:d.x,y:r}),s.push({x:m.x,y:r})):null!==t&&(s.push({x:t,y:d.y}),s.push({x:t,y:m.y}))}),s}(e,n),t.length?new TM({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function WH(e){return e&&!1!==e.fill}function mCe(e,n,t){let i=e[n].fill;const s=[n];let a;if(!t)return i;for(;!1!==i&&-1===s.indexOf(i);){if(!eo(i))return i;if(a=e[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function gCe(e,n,t){const r=function xCe(e){const n=e.options,t=n.fill;let r=Ir(t&&t.target,t);return void 0===r&&(r=!!n.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(e);if(hi(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return eo(i)&&Math.floor(i)===i?function _Ce(e,n,t,r){return("-"===e||"+"===e)&&(t=n+t),!(t===n||t<0||t>=r)&&t}(r[0],n,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function CCe(e,n,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:a,last:l,point:d}=TCe(s,n,"x");if(!(!d||a&&l))if(a)r.unshift(d);else if(e.push(d),!l)break}e.push(...r)}function TCe(e,n,t){const r=e.interpolate(n,t);if(!r)return{};const i=r[t],s=e.segments,a=e.points;let l=!1,d=!1;for(let m=0;m<s.length;m++){const y=s[m],T=a[y.start][t],D=a[y.end][t];if(rm(i,T,D)){l=i===T,d=i===D;break}}return{first:l,last:d,point:r}}class GH{constructor(n){this.x=n.x,this.y=n.y,this.radius=n.radius}pathSegment(n,t,r){const{x:i,y:s,radius:a}=this;return n.arc(i,s,a,(t=t||{start:0,end:Ss}).end,t.start,!0),!r.bounds}interpolate(n){const{x:t,y:r,radius:i}=this,s=n.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function GL(e,n,t){const r=function ECe(e){const{chart:n,fill:t,line:r}=e;if(eo(t))return function SCe(e,n){const t=e.getDatasetMeta(n);return t&&e.isDatasetVisible(n)?t.dataset:null}(n,t);if("stack"===t)return function bCe(e){const{scale:n,index:t,line:r}=e,i=[],s=r.segments,a=r.points,l=function wCe(e,n){const t=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===n)break;s.hidden||t.unshift(s.dataset)}return t}(n,t);l.push($H({x:null,y:n.bottom},r));for(let d=0;d<s.length;d++){const m=s[d];for(let y=m.start;y<=m.end;y++)CCe(i,a[y],l)}return new TM({points:i,options:{}})}(e);if("shape"===t)return!0;const i=function DCe(e){return(e.scale||{}).getPointPositionForValue?function kCe(e){const{scale:n,fill:t}=e,r=n.options,i=n.getLabels().length,s=r.reverse?n.max:n.min,a=function vCe(e,n,t){let r;return r="start"===e?t:"end"===e?n.options.reverse?n.min:n.max:hi(e)?e.value:n.getBaseValue(),r}(t,n,s),l=[];if(r.grid.circular){const d=n.getPointPositionForValue(0,s);return new GH({x:d.x,y:d.y,radius:n.getDistanceFromCenterForValue(a)})}for(let d=0;d<i;++d)l.push(n.getPointPositionForValue(d,a));return l}(e):function MCe(e){const{scale:n={},fill:t}=e,r=function yCe(e,n){let t=null;return"start"===e?t=n.bottom:"end"===e?t=n.top:hi(e)?t=n.getPixelForValue(e.value):n.getBasePixel&&(t=n.getBasePixel()),t}(t,n);if(eo(r)){const i=n.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}(e)}(e);return i instanceof GH?i:$H(i,r)}(n),{line:i,scale:s,axis:a}=n,l=i.options,d=l.fill,m=l.backgroundColor,{above:y=m,below:T=m}=d||{};r&&i.points.length&&(lM(e,t),function ACe(e,n){const{line:t,target:r,above:i,below:s,area:a,scale:l}=n,d=t._loop?"angle":n.axis;e.save(),"x"===d&&s!==i&&(YH(e,r,a.top),qH(e,{line:t,target:r,color:i,scale:l,property:d}),e.restore(),e.save(),YH(e,r,a.bottom)),qH(e,{line:t,target:r,color:s,scale:l,property:d}),e.restore()}(e,{line:i,target:r,above:y,below:T,area:t,scale:s,axis:a}),cM(e))}function YH(e,n,t){const{segments:r,points:i}=n;let s=!0,a=!1;e.beginPath();for(const l of r){const{start:d,end:m}=l,y=i[d],T=i[WL(d,m,i)];s?(e.moveTo(y.x,y.y),s=!1):(e.lineTo(y.x,t),e.lineTo(y.x,y.y)),a=!!n.pathSegment(e,l,{move:a}),a?e.closePath():e.lineTo(T.x,t)}e.lineTo(n.first().x,t),e.closePath(),e.clip()}function qH(e,n){const{line:t,target:r,property:i,color:s,scale:a}=n,l=function fCe(e,n,t){const r=e.segments,i=e.points,s=n.points,a=[];for(const l of r){let{start:d,end:m}=l;m=WL(d,m,i);const y=$L(t,i[d],i[m],l.loop);if(!n.segments){a.push({source:l,target:y,start:i[d],end:i[m]});continue}const T=$7(n,y);for(const D of T){const I=$L(t,s[D.start],s[D.end],D.loop),F=H7(l,i,I);for(const L of F)a.push({source:L,target:D,start:{[t]:HH(y,I,"start",Math.max)},end:{[t]:HH(y,I,"end",Math.min)}})}}return a}(t,r,i);for(const{source:d,target:m,start:y,end:T}of l){const{style:{backgroundColor:D=s}={}}=d,I=!0!==r;e.save(),e.fillStyle=D,ICe(e,a,I&&$L(i,y,T)),e.beginPath();const F=!!t.pathSegment(e,d);let L;if(I){F?e.closePath():XH(e,r,T,i);const B=!!r.pathSegment(e,m,{move:F,reverse:!0});L=F&&B,L||XH(e,r,y,i)}e.closePath(),e.fill(L?"evenodd":"nonzero"),e.restore()}}function ICe(e,n,t){const{top:r,bottom:i}=n.chart.chartArea,{property:s,start:a,end:l}=t||{};"x"===s&&(e.beginPath(),e.rect(a,r,l-a,i-r),e.clip())}function XH(e,n,t,r){const i=n.interpolate(t,r);i&&e.lineTo(i.x,i.y)}var PCe={id:"filler",afterDatasetsUpdate(e,n,t){const r=(e.data.datasets||[]).length,i=[];let s,a,l,d;for(a=0;a<r;++a)s=e.getDatasetMeta(a),l=s.dataset,d=null,l&&l.options&&l instanceof TM&&(d={visible:e.isDatasetVisible(a),index:a,fill:gCe(l,a,r),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=d,i.push(d);for(a=0;a<r;++a)d=i[a],d&&!1!==d.fill&&(d.fill=mCe(i,a,t.propagate))},beforeDraw(e,n,t){const r="beforeDraw"===t.drawTime,i=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=i.length-1;a>=0;--a){const l=i[a].$filler;l&&(l.line.updateControlPoints(s,l.axis),r&&l.fill&&GL(e.ctx,l,s))}},beforeDatasetsDraw(e,n,t){if("beforeDatasetsDraw"!==t.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;WH(s)&&GL(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,n,t){const r=n.meta.$filler;!WH(r)||"beforeDatasetDraw"!==t.drawTime||GL(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ZH=(e,n)=>{let{boxHeight:t=n,boxWidth:r=n}=e;return e.usePointStyle&&(t=Math.min(t,n),r=e.pointStyleWidth||Math.min(r,n)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(n,t)}};class KH extends td{constructor(n){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t,r){this.maxWidth=n,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const n=this.options.labels||{};let t=ss(n.generateLabels,[this.chart],this)||[];n.filter&&(t=t.filter(r=>n.filter(r,this.chart.data))),n.sort&&(t=t.sort((r,i)=>n.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:n,ctx:t}=this;if(!n.display)return void(this.width=this.height=0);const r=n.labels,i=ca(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=ZH(r,s);let m,y;t.font=i.string,this.isHorizontal()?(m=this.maxWidth,y=this._fitRows(a,s,l,d)+10):(y=this.maxHeight,m=this._fitCols(a,i,l,d)+10),this.width=Math.min(m,n.maxWidth||this.maxWidth),this.height=Math.min(y,n.maxHeight||this.maxHeight)}_fitRows(n,t,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],y=i+l;let T=n;s.textAlign="left",s.textBaseline="middle";let D=-1,I=-y;return this.legendItems.forEach((F,L)=>{const B=r+t/2+s.measureText(F.text).width;(0===L||m[m.length-1]+B+2*l>a)&&(T+=y,m[m.length-(L>0?0:1)]=0,I+=y,D++),d[L]={left:0,top:I,row:D,width:B,height:i},m[m.length-1]+=B+l}),T}_fitCols(n,t,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],y=a-n;let T=l,D=0,I=0,F=0,L=0;return this.legendItems.forEach((B,G)=>{const{itemWidth:Z,itemHeight:q}=function LCe(e,n,t,r,i){const s=function FCe(e,n,t,r){let i=e.text;return i&&"string"!=typeof i&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),n+t.size/2+r.measureText(i).width}(r,e,n,t),a=function RCe(e,n,t){let r=e;return"string"!=typeof n.text&&(r=JH(n,t)),r}(i,r,n.lineHeight);return{itemWidth:s,itemHeight:a}}(r,t,s,B,i);G>0&&I+q+2*l>y&&(T+=D+l,m.push({width:D,height:I}),F+=D+l,L++,D=I=0),d[G]={left:F,top:I,col:L,width:Z,height:q},D=Math.max(D,Z),I+=q+l}),T+=D,m.push({width:D,height:I}),T}adjustHitBoxes(){if(!this.options.display)return;const n=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,a=bx(s,this.left,this.width);if(this.isHorizontal()){let l=0,d=yl(r,this.left+i,this.right-this.lineWidths[l]);for(const m of t)l!==m.row&&(l=m.row,d=yl(r,this.left+i,this.right-this.lineWidths[l])),m.top+=this.top+n+i,m.left=a.leftForLtr(a.x(d),m.width),d+=m.width+i}else{let l=0,d=yl(r,this.top+n+i,this.bottom-this.columnSizes[l].height);for(const m of t)m.col!==l&&(l=m.col,d=yl(r,this.top+n+i,this.bottom-this.columnSizes[l].height)),m.top=d,m.left+=this.left+i,m.left=a.leftForLtr(a.x(m.left),m.width),d+=m.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const n=this.ctx;lM(n,this),this._draw(),cM(n)}}_draw(){const{options:n,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:a}=n,l=no.color,d=bx(n.rtl,this.left,this.width),m=ca(a.font),{padding:y}=a,T=m.size,D=T/2;let I;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=m.string;const{boxWidth:F,boxHeight:L,itemHeight:B}=ZH(a,T),q=this.isHorizontal(),oe=this._computeTitleHeight();I=q?{x:yl(s,this.left+y,this.right-r[0]),y:this.top+y+oe,line:0}:{x:this.left+y,y:yl(s,this.top+oe+y,this.bottom-t[0].height),line:0},z7(this.ctx,n.textDirection);const _e=B+y;this.legendItems.forEach((fe,ae)=>{i.strokeStyle=fe.fontColor,i.fillStyle=fe.fontColor;const De=i.measureText(fe.text).width,Ie=d.textAlign(fe.textAlign||(fe.textAlign=a.textAlign)),qe=F+D+De;let Je=I.x,$e=I.y;d.setWidth(this.width),q?ae>0&&Je+qe+y>this.right&&($e=I.y+=_e,I.line++,Je=I.x=yl(s,this.left+y,this.right-r[I.line])):ae>0&&$e+_e>this.bottom&&(Je=I.x=Je+t[I.line].width+y,I.line++,$e=I.y=yl(s,this.top+oe+y,this.bottom-t[I.line].height)),function(fe,ae,De){if(isNaN(F)||F<=0||isNaN(L)||L<0)return;i.save();const Ie=Ir(De.lineWidth,1);if(i.fillStyle=Ir(De.fillStyle,l),i.lineCap=Ir(De.lineCap,"butt"),i.lineDashOffset=Ir(De.lineDashOffset,0),i.lineJoin=Ir(De.lineJoin,"miter"),i.lineWidth=Ie,i.strokeStyle=Ir(De.strokeStyle,l),i.setLineDash(Ir(De.lineDash,[])),a.usePointStyle){const qe={radius:L*Math.SQRT2/2,pointStyle:De.pointStyle,rotation:De.rotation,borderWidth:Ie},Je=d.xPlus(fe,F/2);S7(i,qe,Je,ae+D,a.pointStyleWidth&&F)}else{const qe=ae+Math.max((T-L)/2,0),Je=d.leftForLtr(fe,F),$e=My(De.borderRadius);i.beginPath(),Object.values($e).some(jt=>0!==jt)?cC(i,{x:Je,y:qe,w:F,h:L,radius:$e}):i.rect(Je,qe,F,L),i.fill(),0!==Ie&&i.stroke()}i.restore()}(d.x(Je),$e,fe),Je=((e,n,t,r)=>e===(r?"left":"right")?t:"center"===e?(n+t)/2:n)(Ie,Je+F+D,q?Je+qe:this.right,n.rtl),function(fe,ae,De){Dy(i,De.text,fe,ae+B/2,m,{strikethrough:De.hidden,textAlign:d.textAlign(De.textAlign)})}(d.x(Je),$e,fe),q?I.x+=qe+y:I.y+="string"!=typeof fe.text?JH(fe,m.lineHeight):_e}),V7(this.ctx,n.textDirection)}drawTitle(){const n=this.options,t=n.title,r=ca(t.font),i=vl(t.padding);if(!t.display)return;const s=bx(n.rtl,this.left,this.width),a=this.ctx,l=t.position,m=i.top+r.size/2;let y,T=this.left,D=this.width;if(this.isHorizontal())D=Math.max(...this.lineWidths),y=this.top+m,T=yl(n.align,T,this.right-D);else{const F=this.columnSizes.reduce((L,B)=>Math.max(L,B.height),0);y=m+yl(n.align,this.top,this.bottom-F-n.labels.padding-this._computeTitleHeight())}const I=yl(l,T,T+D);a.textAlign=s.textAlign(xL(l)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=r.string,Dy(a,t.text,I,y,r)}_computeTitleHeight(){const n=this.options.title,t=ca(n.font),r=vl(n.padding);return n.display?t.lineHeight+r.height:0}_getLegendItemAt(n,t){let r,i,s;if(rm(n,this.left,this.right)&&rm(t,this.top,this.bottom))for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],rm(n,i.left,i.left+i.width)&&rm(t,i.top,i.top+i.height))return this.legendItems[r];return null}handleEvent(n){const t=this.options;if(!function NCe(e,n){return!(("mousemove"!==e&&"mouseout"!==e||!n.onHover&&!n.onLeave)&&(!n.onClick||"click"!==e&&"mouseup"!==e))}(n.type,t))return;const r=this._getLegendItemAt(n.x,n.y);if("mousemove"===n.type||"mouseout"===n.type){const i=this._hoveredItem,s=((e,n)=>null!==e&&null!==n&&e.datasetIndex===n.datasetIndex&&e.index===n.index)(i,r);i&&!s&&ss(t.onLeave,[n,i,this],this),this._hoveredItem=r,r&&!s&&ss(t.onHover,[n,r,this],this)}else r&&ss(t.onClick,[n,r,this],this)}}function JH(e,n){return n*(e.text?e.text.length+.5:0)}var BCe={id:"legend",_element:KH,start(e,n,t){const r=e.legend=new KH({ctx:e.ctx,options:t,chart:e});xl.configure(e,r,t),xl.addBox(e,r)},stop(e){xl.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,n,t){const r=e.legend;xl.configure(e,r,t),r.options=t},afterUpdate(e){const n=e.legend;n.buildLabels(),n.adjustHitBoxes()},afterEvent(e,n){n.replay||e.legend.handleEvent(n.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,n,t){const r=n.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),n.hidden=!0):(i.show(r),n.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const n=e.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(t?0:void 0),y=vl(m.borderWidth);return{text:n[d.index].label,fillStyle:m.backgroundColor,fontColor:s,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:m.borderColor,pointStyle:r||m.pointStyle,rotation:m.rotation,textAlign:i||m.textAlign,borderRadius:a&&(l||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class YL extends td{constructor(n){super(),this.chart=n.chart,this.options=n.options,this.ctx=n.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(n,t){const r=this.options;if(this.left=0,this.top=0,!r.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=n,this.height=this.bottom=t;const i=Es(r.text)?r.text.length:1;this._padding=vl(r.padding);const s=i*ca(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const n=this.options.position;return"top"===n||"bottom"===n}_drawArgs(n){const{top:t,left:r,bottom:i,right:s,options:a}=this,l=a.align;let m,y,T,d=0;return this.isHorizontal()?(y=yl(l,r,s),T=t+n,m=s-r):("left"===a.position?(y=r+n,T=yl(l,i,t),d=-.5*Os):(y=s-n,T=yl(l,t,i),d=.5*Os),m=i-t),{titleX:y,titleY:T,maxWidth:m,rotation:d}}draw(){const n=this.ctx,t=this.options;if(!t.display)return;const r=ca(t.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:d,rotation:m}=this._drawArgs(s);Dy(n,t.text,0,0,r,{color:t.color,maxWidth:d,rotation:m,textAlign:xL(t.align),textBaseline:"middle",translation:[a,l]})}}var VCe={id:"title",_element:YL,start(e,n,t){!function zCe(e,n){const t=new YL({ctx:e.ctx,options:n,chart:e});xl.configure(e,t,n),xl.addBox(e,t),e.titleBlock=t}(e,t)},stop(e){xl.removeBox(e,e.titleBlock),delete e.titleBlock},beforeUpdate(e,n,t){const r=e.titleBlock;xl.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const SM=new WeakMap;var UCe={id:"subtitle",start(e,n,t){const r=new YL({ctx:e.ctx,options:t,chart:e});xl.configure(e,r,t),xl.addBox(e,r),SM.set(e,r)},stop(e){xl.removeBox(e,SM.get(e)),SM.delete(e)},beforeUpdate(e,n,t){const r=SM.get(e);xl.configure(e,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vC={average(e){if(!e.length)return!1;let n,t,r=0,i=0,s=0;for(n=0,t=e.length;n<t;++n){const a=e[n].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r+=l.x,i+=l.y,++s}}return{x:r/s,y:i/s}},nearest(e,n){if(!e.length)return!1;let s,a,l,t=n.x,r=n.y,i=Number.POSITIVE_INFINITY;for(s=0,a=e.length;s<a;++s){const d=e[s].element;if(d&&d.hasValue()){const y=yL(n,d.getCenterPoint());y<i&&(i=y,l=d)}}if(l){const d=l.tooltipPosition();t=d.x,r=d.y}return{x:t,y:r}}};function Cf(e,n){return n&&(Es(n)?Array.prototype.push.apply(e,n):e.push(n)),e}function om(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function jCe(e,n){const{element:t,datasetIndex:r,index:i}=n,s=e.getDatasetMeta(r).controller,{label:a,value:l}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function QH(e,n){const t=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:l}=n,d=ca(n.bodyFont),m=ca(n.titleFont),y=ca(n.footerFont),T=s.length,D=i.length,I=r.length,F=vl(n.padding);let L=F.height,B=0,G=r.reduce((oe,_e)=>oe+_e.before.length+_e.lines.length+_e.after.length,0);G+=e.beforeBody.length+e.afterBody.length,T&&(L+=T*m.lineHeight+(T-1)*n.titleSpacing+n.titleMarginBottom),G&&(L+=I*(n.displayColors?Math.max(l,d.lineHeight):d.lineHeight)+(G-I)*d.lineHeight+(G-1)*n.bodySpacing),D&&(L+=n.footerMarginTop+D*y.lineHeight+(D-1)*n.footerSpacing);let Z=0;const q=function(oe){B=Math.max(B,t.measureText(oe).width+Z)};return t.save(),t.font=m.string,ji(e.title,q),t.font=d.string,ji(e.beforeBody.concat(e.afterBody),q),Z=n.displayColors?a+2+n.boxPadding:0,ji(r,oe=>{ji(oe.before,q),ji(oe.lines,q),ji(oe.after,q)}),Z=0,t.font=y.string,ji(e.footer,q),t.restore(),B+=F.width,{width:B,height:L}}function WCe(e,n,t,r){const{x:i,width:s}=t,{width:a,chartArea:{left:l,right:d}}=e;let m="center";return"center"===r?m=i<=(l+d)/2?"left":"right":i<=s/2?m="left":i>=a-s/2&&(m="right"),function $Ce(e,n,t,r){const{x:i,width:s}=r,a=t.caretSize+t.caretPadding;if("left"===e&&i+s+a>n.width||"right"===e&&i-s-a<0)return!0}(m,e,n,t)&&(m="center"),m}function e$(e,n,t){const r=t.yAlign||n.yAlign||function HCe(e,n){const{y:t,height:r}=n;return t<r/2?"top":t>e.height-r/2?"bottom":"center"}(e,t);return{xAlign:t.xAlign||n.xAlign||WCe(e,n,t,r),yAlign:r}}function t$(e,n,t,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:l,yAlign:d}=t,m=i+s,{topLeft:y,topRight:T,bottomLeft:D,bottomRight:I}=My(a);let F=function GCe(e,n){let{x:t,width:r}=e;return"right"===n?t-=r:"center"===n&&(t-=r/2),t}(n,l);const L=function YCe(e,n,t){let{y:r,height:i}=e;return"top"===n?r+=t:r-="bottom"===n?i+t:i/2,r}(n,d,m);return"center"===d?"left"===l?F+=m:"right"===l&&(F-=m):"left"===l?F-=Math.max(y,D)+i:"right"===l&&(F+=Math.max(T,I)+i),{x:Ma(F,0,r.width-n.width),y:Ma(L,0,r.height-n.height)}}function DM(e,n,t){const r=vl(t.padding);return"center"===n?e.x+e.width/2:"right"===n?e.x+e.width-r.right:e.x+r.left}function n$(e){return Cf([],om(e))}function r$(e,n){const t=n&&n.dataset&&n.dataset.tooltip&&n.dataset.tooltip.callbacks;return t?e.override(t):e}const i$={beforeTitle:nm,title(e){if(e.length>0){const n=e[0],t=n.chart.data.labels,r=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return n.dataset.label||"";if(n.label)return n.label;if(r>0&&n.dataIndex<r)return t[n.dataIndex]}return""},afterTitle:nm,beforeBody:nm,beforeLabel:nm,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let n=e.dataset.label||"";n&&(n+=": ");const t=e.formattedValue;return Mi(t)||(n+=t),n},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:nm,afterBody:nm,beforeFooter:nm,footer:nm,afterFooter:nm};function Tc(e,n,t,r){const i=e[n].call(t,r);return typeof i>"u"?i$[n].call(t,r):i}let s$=(()=>{class e extends td{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,a=new q7(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=function qCe(e,n,t){return e0(e,{tooltip:n,tooltipItems:t,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:i}=r,s=Tc(i,"beforeTitle",this,t),a=Tc(i,"title",this,t),l=Tc(i,"afterTitle",this,t);let d=[];return d=Cf(d,om(s)),d=Cf(d,om(a)),d=Cf(d,om(l)),d}getBeforeBody(t,r){return n$(Tc(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:i}=r,s=[];return ji(t,a=>{const l={before:[],lines:[],after:[]},d=r$(i,a);Cf(l.before,om(Tc(d,"beforeLabel",this,a))),Cf(l.lines,Tc(d,"label",this,a)),Cf(l.after,om(Tc(d,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,r){return n$(Tc(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:i}=r,s=Tc(i,"beforeFooter",this,t),a=Tc(i,"footer",this,t),l=Tc(i,"afterFooter",this,t);let d=[];return d=Cf(d,om(s)),d=Cf(d,om(a)),d=Cf(d,om(l)),d}_createItems(t){const r=this._active,i=this.chart.data,s=[],a=[],l=[];let m,y,d=[];for(m=0,y=r.length;m<y;++m)d.push(jCe(this.chart,r[m]));return t.filter&&(d=d.filter((T,D,I)=>t.filter(T,D,I,i))),t.itemSort&&(d=d.sort((T,D)=>t.itemSort(T,D,i))),ji(d,T=>{const D=r$(t.callbacks,T);s.push(Tc(D,"labelColor",this,T)),a.push(Tc(D,"labelPointStyle",this,T)),l.push(Tc(D,"labelTextColor",this,T))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=d,d}update(t,r){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(s.length){const d=vC[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const m=this._size=QH(this,i),y=Object.assign({},d,m),T=e$(this.chart,i,y),D=t$(i,y,T,this.chart);this.xAlign=T.xAlign,this.yAlign=T.yAlign,a={opacity:1,x:D.x,y:D.y,width:m.width,height:m.height,caretX:d.x,caretY:d.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){const a=this.getCaretPosition(t,i,s);r.lineTo(a.x1,a.y1),r.lineTo(a.x2,a.y2),r.lineTo(a.x3,a.y3)}getCaretPosition(t,r,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:d}=i,{topLeft:m,topRight:y,bottomLeft:T,bottomRight:D}=My(d),{x:I,y:F}=t,{width:L,height:B}=r;let G,Z,q,oe,_e,fe;return"center"===a?(_e=F+B/2,"left"===s?(G=I,Z=G-l,oe=_e+l,fe=_e-l):(G=I+L,Z=G+l,oe=_e-l,fe=_e+l),q=G):(Z="left"===s?I+Math.max(m,T)+l:"right"===s?I+L-Math.max(y,D)-l:this.caretX,"top"===a?(oe=F,_e=oe-l,G=Z-l,q=Z+l):(oe=F+B,_e=oe+l,G=Z+l,q=Z-l),fe=oe),{x1:G,x2:Z,x3:q,y1:oe,y2:_e,y3:fe}}drawTitle(t,r,i){const s=this.title,a=s.length;let l,d,m;if(a){const y=bx(i.rtl,this.x,this.width);for(t.x=DM(this,i.titleAlign,i),r.textAlign=y.textAlign(i.titleAlign),r.textBaseline="middle",l=ca(i.titleFont),d=i.titleSpacing,r.fillStyle=i.titleColor,r.font=l.string,m=0;m<a;++m)r.fillText(s[m],y.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+d,m+1===a&&(t.y+=i.titleMarginBottom-d)}}_drawColorBox(t,r,i,s,a){const l=this.labelColors[i],d=this.labelPointStyles[i],{boxHeight:m,boxWidth:y,boxPadding:T}=a,D=ca(a.bodyFont),I=DM(this,"left",a),F=s.x(I),B=r.y+(m<D.lineHeight?(D.lineHeight-m)/2:0);if(a.usePointStyle){const G={radius:Math.min(y,m)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},Z=s.leftForLtr(F,y)+y/2,q=B+m/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,TL(t,G,Z,q),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,TL(t,G,Z,q)}else{t.lineWidth=hi(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const G=s.leftForLtr(F,y-T),Z=s.leftForLtr(s.xPlus(F,1),y-T-2),q=My(l.borderRadius);Object.values(q).some(oe=>0!==oe)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,cC(t,{x:G,y:B,w:y,h:m,radius:q}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),cC(t,{x:Z,y:B+1,w:y-2,h:m-2,radius:q}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(G,B,y,m),t.strokeRect(G,B,y,m),t.fillStyle=l.backgroundColor,t.fillRect(Z,B+1,y-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:d,boxHeight:m,boxWidth:y,boxPadding:T}=i,D=ca(i.bodyFont);let I=D.lineHeight,F=0;const L=bx(i.rtl,this.x,this.width),B=function(Ie){r.fillText(Ie,L.x(t.x+F),t.y+I/2),t.y+=I+a},G=L.textAlign(l);let Z,q,oe,_e,fe,ae,De;for(r.textAlign=l,r.textBaseline="middle",r.font=D.string,t.x=DM(this,G,i),r.fillStyle=i.bodyColor,ji(this.beforeBody,B),F=d&&"right"!==G?"center"===l?y/2+T:y+2+T:0,_e=0,ae=s.length;_e<ae;++_e){for(Z=s[_e],q=this.labelTextColors[_e],r.fillStyle=q,ji(Z.before,B),oe=Z.lines,d&&oe.length&&(this._drawColorBox(r,t,_e,L,i),I=Math.max(D.lineHeight,m)),fe=0,De=oe.length;fe<De;++fe)B(oe[fe]),I=D.lineHeight;ji(Z.after,B)}F=0,I=D.lineHeight,ji(this.afterBody,B),t.y-=a}drawFooter(t,r,i){const s=this.footer,a=s.length;let l,d;if(a){const m=bx(i.rtl,this.x,this.width);for(t.x=DM(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=m.textAlign(i.footerAlign),r.textBaseline="middle",l=ca(i.footerFont),r.fillStyle=i.footerColor,r.font=l.string,d=0;d<a;++d)r.fillText(s[d],m.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){const{xAlign:a,yAlign:l}=this,{x:d,y:m}=t,{width:y,height:T}=i,{topLeft:D,topRight:I,bottomLeft:F,bottomRight:L}=My(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(d+D,m),"top"===l&&this.drawCaret(t,r,i,s),r.lineTo(d+y-I,m),r.quadraticCurveTo(d+y,m,d+y,m+I),"center"===l&&"right"===a&&this.drawCaret(t,r,i,s),r.lineTo(d+y,m+T-L),r.quadraticCurveTo(d+y,m+T,d+y-L,m+T),"bottom"===l&&this.drawCaret(t,r,i,s),r.lineTo(d+F,m+T),r.quadraticCurveTo(d,m+T,d,m+T-F),"center"===l&&"left"===a&&this.drawCaret(t,r,i,s),r.lineTo(d,m+D),r.quadraticCurveTo(d,m,d+D,m),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=vC[t.position].call(this,this._active,this._eventPosition);if(!l)return;const d=this._size=QH(this,t),m=Object.assign({},l,this._size),y=e$(r,t,m),T=t$(t,m,y,r);(s._to!==T.x||a._to!==T.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=d.width,this.height=d.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,T))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=vl(r.padding);r.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,r),z7(t,r.textDirection),a.y+=l.top,this.drawTitle(a,t,r),this.drawBody(a,t,r),this.drawFooter(a,t,r),V7(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const i=this._active,s=t.map(({datasetIndex:d,index:m})=>{const y=this.chart.getDatasetMeta(d);if(!y)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:y.data[m],index:m}}),a=!nM(i,s),l=this._positionChanged(s,r);(a||l)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,r,i),d=this._positionChanged(l,t),m=r||!nM(l,a)||d;return m&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),m}_getActiveElements(t,r,i,s){const a=this.options;if("mouseout"===t.type)return[];if(!s)return r;const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,r){const{caretX:i,caretY:s,options:a}=this,l=vC[a.position].call(this,t,r);return!1!==l&&(i!==l.x||s!==l.y)}}return Fn(e,"positioners",vC),e})();var XCe={id:"tooltip",_element:s$,positioners:vC,afterInit(e,n,t){t&&(e.tooltip=new s$({chart:e,options:t}))},beforeUpdate(e,n,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,n,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){const n=e.tooltip;if(n&&n._willRender()){const t={tooltip:n};if(!1===e.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;n.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,n){e.tooltip&&e.tooltip.handleEvent(n.event,n.replay,n.inChartArea)&&(n.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,n)=>n.bodyFont.size,boxWidth:(e,n)=>n.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:i$},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ZCe=Object.freeze({__proto__:null,Colors:lCe,Decimation:dCe,Filler:PCe,Legend:BCe,SubTitle:UCe,Title:VCe,Tooltip:XCe});function o$(e){const n=this.getLabels();return e>=0&&e<n.length?n[e]:e}let eTe=(()=>{class e extends Oy{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const i=this.getLabels();for(const{index:s,label:a}of r)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Mi(t))return null;const i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:function JCe(e,n,t,r){const i=e.indexOf(n);return-1===i?((e,n,t,r)=>("string"==typeof n?(t=e.push(n)-1,r.unshift({index:t,label:n})):isNaN(n)&&(t=null),t))(e,n,t,r):i!==e.lastIndexOf(n)?t:i}(i,t,Ir(r,t),this._addedLabels),((e,n)=>null===e?null:Ma(Math.round(e),0,n))(r,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,r=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=0===t&&r===a.length-1?a:a.slice(t,r+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=r;l++)s.push({value:l});return s}getLabelForValue(t){return o$.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return Fn(e,"id","category"),Fn(e,"defaults",{ticks:{callback:o$}}),e})();function a$(e,n,{horizontal:t,minRotation:r}){const i=ed(r),s=(t?Math.sin(i):Math.cos(i))||.001;return Math.min(n/s,.75*n*(""+e).length)}class MM extends Oy{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(n,t){return Mi(n)||("number"==typeof n||n instanceof Number)&&!isFinite(+n)?null:+n}handleTickRangeOptions(){const{beginAtZero:n}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=d=>i=t?i:d,l=d=>s=r?s:d;if(n){const d=bf(i),m=bf(s);d<0&&m<0?l(0):d>0&&m>0&&a(0)}if(i===s){let d=0===s?1:Math.abs(.05*s);l(s+d),n||a(i-d)}this.min=i,this.max=s}getTickLimit(){const n=this.options.ticks;let i,{maxTicksLimit:t,stepSize:r}=n;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const n=this.options,t=n.ticks;let r=this.getTickLimit();r=Math.max(2,r);const a=function tTe(e,n){const t=[],{bounds:i,step:s,min:a,max:l,precision:d,count:m,maxTicks:y,maxDigits:T,includeBounds:D}=e,I=s||1,F=y-1,{min:L,max:B}=n,G=!Mi(a),Z=!Mi(l),q=!Mi(m),oe=(B-L)/(T+1);let fe,ae,De,Ie,_e=l7((B-L)/F/I)*I;if(_e<1e-14&&!G&&!Z)return[{value:L},{value:B}];Ie=Math.ceil(B/_e)-Math.floor(L/_e),Ie>F&&(_e=l7(Ie*_e/F/I)*I),Mi(d)||(fe=Math.pow(10,d),_e=Math.ceil(_e*fe)/fe),"ticks"===i?(ae=Math.floor(L/_e)*_e,De=Math.ceil(B/_e)*_e):(ae=L,De=B),G&&Z&&s&&function Wxe(e,n){const t=Math.round(e);return t-n<=e&&t+n>=e}((l-a)/s,_e/1e3)?(Ie=Math.round(Math.min((l-a)/_e,y)),_e=(l-a)/Ie,ae=a,De=l):q?(ae=G?a:ae,De=Z?l:De,Ie=m-1,_e=(De-ae)/Ie):(Ie=(De-ae)/_e,Ie=rC(Ie,Math.round(Ie),_e/1e3)?Math.round(Ie):Math.ceil(Ie));const qe=Math.max(u7(_e),u7(ae));fe=Math.pow(10,Mi(d)?qe:d),ae=Math.round(ae*fe)/fe,De=Math.round(De*fe)/fe;let Je=0;for(G&&(D&&ae!==a?(t.push({value:a}),ae<a&&Je++,rC(Math.round((ae+Je*_e)*fe)/fe,a,a$(a,oe,e))&&Je++):ae<a&&Je++);Je<Ie;++Je)t.push({value:Math.round((ae+Je*_e)*fe)/fe});return Z&&D&&De!==l?t.length&&rC(t[t.length-1].value,l,a$(l,oe,e))?t[t.length-1].value=l:t.push({value:l}):(!Z||De===l)&&t.push({value:De}),t}({maxTicks:r,bounds:n.bounds,min:n.min,max:n.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===n.bounds&&c7(a,this,"value"),n.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const n=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&n.length){const i=(r-t)/Math.max(n.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(n){return oC(n,this.chart.options.locale,this.options.ticks.format)}}class qL extends MM{determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=eo(n)?n:0,this.max=eo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const n=this.isHorizontal(),t=n?this.width:this.height,r=ed(this.options.ticks.minRotation),i=(n?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(n){return null===n?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getValueForPixel(n){return this._startValue+this.getDecimalForPixel(n)*this._valueRange}}Fn(qL,"id","linear"),Fn(qL,"defaults",{ticks:{callback:oM.formatters.numeric}});const xC=e=>Math.floor(Qg(e)),Ly=(e,n)=>Math.pow(10,xC(e)+n);function l$(e){return e/Math.pow(10,xC(e))==1}function c$(e,n,t){const r=Math.pow(10,t),i=Math.floor(e/r);return Math.ceil(n/r)-i}class XL extends Oy{constructor(n){super(n),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(n,t){const r=MM.prototype.parse.apply(this,[n,t]);if(0!==r)return eo(r)&&r>0?r:null;this._zero=!0}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!0);this.min=eo(n)?Math.max(0,n):null,this.max=eo(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!eo(this._userMin)&&(this.min=n===Ly(this.min,0)?Ly(this.min,-1):Ly(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:n,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=l=>r=n?r:l,a=l=>i=t?i:l;r===i&&(r<=0?(s(1),a(10)):(s(Ly(r,-1)),a(Ly(i,1)))),r<=0&&s(Ly(i,-1)),i<=0&&a(Ly(r,1)),this.min=r,this.max=i}buildTicks(){const n=this.options,r=function rTe(e,{min:n,max:t}){n=uu(e.min,n);const r=[],i=xC(n);let s=function nTe(e,n){let r=xC(n-e);for(;c$(e,n,r)>10;)r++;for(;c$(e,n,r)<10;)r--;return Math.min(r,xC(e))}(n,t),a=s<0?Math.pow(10,Math.abs(s)):1;const l=Math.pow(10,s),d=i>s?Math.pow(10,i):0,m=Math.round((n-d)*a)/a,y=Math.floor((n-d)/l/10)*l*10;let T=Math.floor((m-y)/Math.pow(10,s)),D=uu(e.min,Math.round((d+y+T*Math.pow(10,s))*a)/a);for(;D<t;)r.push({value:D,major:l$(D),significand:T}),T>=10?T=T<15?15:20:T++,T>=20&&(s++,T=2,a=s>=0?1:a),D=Math.round((d+y+T*Math.pow(10,s))*a)/a;const I=uu(e.max,D);return r.push({value:I,major:l$(I),significand:T}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===n.bounds&&c7(r,this,"value"),n.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(n){return void 0===n?"0":oC(n,this.chart.options.locale,this.options.ticks.format)}configure(){const n=this.min;super.configure(),this._startValue=Qg(n),this._valueRange=Qg(this.max)-Qg(n)}getPixelForValue(n){return(void 0===n||0===n)&&(n=this.min),null===n||isNaN(n)?NaN:this.getPixelForDecimal(n===this.min?0:(Qg(n)-this._startValue)/this._valueRange)}getValueForPixel(n){const t=this.getDecimalForPixel(n);return Math.pow(10,this._startValue+t*this._valueRange)}}function ZL(e){const n=e.ticks;if(n.display&&e.display){const t=vl(n.backdropPadding);return Ir(n.font&&n.font.size,no.font.size)+t.height}return 0}function iTe(e,n,t){return t=Es(t)?t:[t],{w:lbe(e,n.string,t),h:t.length*n.lineHeight}}function u$(e,n,t,r,i){return e===r||e===i?{start:n-t/2,end:n+t/2}:e<r||e>i?{start:n-t,end:n}:{start:n,end:n+t}}function oTe(e,n,t,r,i){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let l=0,d=0;r.start<n.l?(l=(n.l-r.start)/s,e.l=Math.min(e.l,n.l-l)):r.end>n.r&&(l=(r.end-n.r)/s,e.r=Math.max(e.r,n.r+l)),i.start<n.t?(d=(n.t-i.start)/a,e.t=Math.min(e.t,n.t-d)):i.end>n.b&&(d=(i.end-n.b)/a,e.b=Math.max(e.b,n.b+d))}function lTe(e){return 0===e||180===e?"center":e<180?"left":"right"}function cTe(e,n,t){return"right"===t?e-=n:"center"===t&&(e-=n/2),e}function uTe(e,n,t){return 90===t||270===t?e-=n/2:(t>270||t<90)&&(e-=n),e}function h$(e,n,t,r){const{ctx:i}=e;if(t)i.arc(e.xCenter,e.yCenter,n,0,Ss);else{let s=e.getPointPosition(0,n);i.moveTo(s.x,s.y);for(let a=1;a<r;a++)s=e.getPointPosition(a,n),i.lineTo(s.x,s.y)}}Fn(XL,"id","logarithmic"),Fn(XL,"defaults",{ticks:{callback:oM.formatters.logarithmic,major:{enabled:!0}}});class bC extends MM{constructor(n){super(n),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const n=this._padding=vl(ZL(this.options)/2),t=this.width=this.maxWidth-n.width,r=this.height=this.maxHeight-n.height;this.xCenter=Math.floor(this.left+t/2+n.left),this.yCenter=Math.floor(this.top+r/2+n.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:n,max:t}=this.getMinMax(!1);this.min=eo(n)&&!isNaN(n)?n:0,this.max=eo(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ZL(this.options))}generateTickLabels(n){MM.prototype.generateTickLabels.call(this,n),this._pointLabels=this.getLabels().map((t,r)=>{const i=ss(this.options.pointLabels.callback,[t,r],this);return i||0===i?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const n=this.options;n.display&&n.pointLabels.display?function sTe(e){const n={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},t=Object.assign({},n),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,l=a.centerPointLabels?Os/s:0;for(let d=0;d<s;d++){const m=a.setContext(e.getPointLabelContext(d));i[d]=m.padding;const y=e.getPointPosition(d,e.drawingArea+i[d],l),T=ca(m.font),D=iTe(e.ctx,T,e._pointLabels[d]);r[d]=D;const I=hu(e.getIndexAngle(d)+l),F=Math.round(_L(I));oTe(t,n,I,u$(F,y.x,D.w,0,180),u$(F,y.y,D.h,90,270))}e.setCenterPoint(n.l-t.l,t.r-n.r,n.t-t.t,t.b-n.b),e._pointLabelItems=function aTe(e,n,t){const r=[],i=e._pointLabels.length,s=e.options,a=ZL(s)/2,l=e.drawingArea,d=s.pointLabels.centerPointLabels?Os/i:0;for(let m=0;m<i;m++){const y=e.getPointPosition(m,l+a+t[m],d),T=Math.round(_L(hu(y.angle+to))),D=n[m],I=uTe(y.y,D.h,T),F=lTe(T),L=cTe(y.x,D.w,F);r.push({x:y.x,y:I,textAlign:F,left:L,top:I,right:L+D.w,bottom:I+D.h})}return r}(e,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(n,t,r,i){this.xCenter+=Math.floor((n-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(n,t,r,i))}getIndexAngle(n){return hu(n*(Ss/(this._pointLabels.length||1))+ed(this.options.startAngle||0))}getDistanceFromCenterForValue(n){if(Mi(n))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-n)*t:(n-this.min)*t}getValueForDistanceFromCenter(n){if(Mi(n))return NaN;const t=n/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(n){const t=this._pointLabels||[];if(n>=0&&n<t.length){const r=t[n];return function fTe(e,n,t){return e0(e,{label:t,index:n,type:"pointLabel"})}(this.getContext(),n,r)}}getPointPosition(n,t,r=0){const i=this.getIndexAngle(n)-to+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(n,t){return this.getPointPosition(n,this.getDistanceFromCenterForValue(t))}getBasePosition(n){return this.getPointPositionForValue(n||0,this.getBaseValue())}getPointLabelPosition(n){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[n];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:n,grid:{circular:t}}=this.options;if(n){const r=this.ctx;r.save(),r.beginPath(),h$(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=n,r.fill(),r.restore()}}drawGrid(){const n=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,a=this._pointLabels.length;let l,d,m;if(t.pointLabels.display&&function hTe(e,n){const{ctx:t,options:{pointLabels:r}}=e;for(let i=n-1;i>=0;i--){const s=r.setContext(e.getPointLabelContext(i)),a=ca(s.font),{x:l,y:d,textAlign:m,left:y,top:T,right:D,bottom:I}=e._pointLabelItems[i],{backdropColor:F}=s;if(!Mi(F)){const L=My(s.borderRadius),B=vl(s.backdropPadding);t.fillStyle=F;const G=y-B.left,Z=T-B.top,q=D-y+B.width,oe=I-T+B.height;Object.values(L).some(_e=>0!==_e)?(t.beginPath(),cC(t,{x:G,y:Z,w:q,h:oe,radius:L}),t.fill()):t.fillRect(G,Z,q,oe)}Dy(t,e._pointLabels[i],l,d+a.lineHeight/2,a,{color:s.color,textAlign:m,textBaseline:"middle"})}}(this,a),i.display&&this.ticks.forEach((y,T)=>{if(0!==T){d=this.getDistanceFromCenterForValue(y.value);const D=this.getContext(T),I=i.setContext(D),F=s.setContext(D);!function dTe(e,n,t,r,i){const s=e.ctx,a=n.circular,{color:l,lineWidth:d}=n;!a&&!r||!l||!d||t<0||(s.save(),s.strokeStyle=l,s.lineWidth=d,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),h$(e,t,a,r),s.closePath(),s.stroke(),s.restore())}(this,I,d,a,F)}}),r.display){for(n.save(),l=a-1;l>=0;l--){const y=r.setContext(this.getPointLabelContext(l)),{color:T,lineWidth:D}=y;!D||!T||(n.lineWidth=D,n.strokeStyle=T,n.setLineDash(y.borderDash),n.lineDashOffset=y.borderDashOffset,d=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),m=this.getPointPosition(l,d),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(m.x,m.y),n.stroke())}n.restore()}}drawBorder(){}drawLabels(){const n=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,a;n.save(),n.translate(this.xCenter,this.yCenter),n.rotate(i),n.textAlign="center",n.textBaseline="middle",this.ticks.forEach((l,d)=>{if(0===d&&!t.reverse)return;const m=r.setContext(this.getContext(d)),y=ca(m.font);if(s=this.getDistanceFromCenterForValue(this.ticks[d].value),m.showLabelBackdrop){n.font=y.string,a=n.measureText(l.label).width,n.fillStyle=m.backdropColor;const T=vl(m.backdropPadding);n.fillRect(-a/2-T.left,-s-y.size/2-T.top,a+T.width,y.size+T.height)}Dy(n,l.label,0,-s,y,{color:m.color})}),n.restore()}drawTitle(){}}Fn(bC,"id","radialLinear"),Fn(bC,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:oM.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Fn(bC,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Fn(bC,"descriptors",{angleLines:{_fallback:"grid"}});const kM={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ec=Object.keys(kM);function pTe(e,n){return e-n}function d$(e,n){if(Mi(n))return null;const t=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=n;return"function"==typeof r&&(a=r(a)),eo(a)||(a="string"==typeof r?t.parse(a,r):t.parse(a)),null===a?null:(i&&(a="week"!==i||!yx(s)&&!0!==s?t.startOf(a,i):t.startOf(a,"isoWeek",s)),+a)}function f$(e,n,t,r){const i=Ec.length;for(let s=Ec.indexOf(e);s<i-1;++s){const a=kM[Ec[s]];if(a.common&&Math.ceil((t-n)/((a.steps?a.steps:Number.MAX_SAFE_INTEGER)*a.size))<=r)return Ec[s]}return Ec[i-1]}function p$(e,n,t){if(t){if(t.length){const{lo:r,hi:i}=vL(t,n);e[t[r]>=n?t[r]:t[i]]=!0}}else e[n]=!0}function m$(e,n,t){const r=[],i={},s=n.length;let a,l;for(a=0;a<s;++a)l=n[a],i[l]=a,r.push({value:l,major:!1});return 0!==s&&t?function _Te(e,n,t,r){const i=e._adapter,s=+i.startOf(n[0].value,r),a=n[n.length-1].value;let l,d;for(l=s;l<=a;l=+i.add(l,1,r))d=t[l],d>=0&&(n[d].major=!0);return n}(e,r,i,t):r}let KL=(()=>{class e extends Oy{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const i=t.time||(t.time={}),s=this._adapter=new Dwe__date(t.adapters.date);s.init(r),nC(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return void 0===t?null:d$(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:d}=this.getUserBounds();function m(y){!l&&!isNaN(y.min)&&(s=Math.min(s,y.min)),!d&&!isNaN(y.max)&&(a=Math.max(a,y.max))}(!l||!d)&&(m(this._getLabelBounds()),("ticks"!==t.bounds||"labels"!==t.ticks.source)&&m(this.getMinMax(!1))),s=eo(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),a=eo(a)&&!isNaN(a)?a:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){const t=this.options,r=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,d=function Xxe(e,n,t){let r=0,i=e.length;for(;r<i&&e[r]<n;)r++;for(;i>r&&e[i-1]>t;)i--;return r>0||i<e.length?e.slice(r,i):e}(s,a,this.max);return this._unit=r.unit||(i.autoSkip?f$(r.minUnit,this.min,this.max,this._getLabelCapacity(a)):function mTe(e,n,t,r,i){for(let s=Ec.length-1;s>=Ec.indexOf(t);s--){const a=Ec[s];if(kM[a].common&&e._adapter.diff(i,r,a)>=n-1)return a}return Ec[t?Ec.indexOf(t):0]}(this,d.length,r.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function gTe(e){for(let n=Ec.indexOf(e)+1,t=Ec.length;n<t;++n)if(kM[Ec[n]].common)return Ec[n]}(this._unit):void 0,this.initOffsets(s),t.reverse&&d.reverse(),m$(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let s,a,r=0,i=0;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),r=1===t.length?1-s:(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),i=1===t.length?a:(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;r=Ma(r,0,l),i=Ma(i,0,l),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,r=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||f$(a.minUnit,r,i,this._getLabelCapacity(r)),d=Ir(s.ticks.stepSize,1),m="week"===l&&a.isoWeekday,y=yx(m)||!0===m,T={};let I,F,D=r;if(y&&(D=+t.startOf(D,"isoWeek",m)),D=+t.startOf(D,y?"day":l),t.diff(i,r,l)>1e5*d)throw new Error(r+" and "+i+" are too far apart with stepSize of "+d+" "+l);const L="data"===s.ticks.source&&this.getDataTimestamps();for(I=D,F=0;I<i;I=+t.add(I,d,l),F++)p$(T,I,L);return(I===i||"ticks"===s.bounds||1===F)&&p$(T,I,L),Object.keys(T).sort((B,G)=>B-G).map(B=>+B)}getLabelForValue(t){const i=this.options.time;return this._adapter.format(t,i.tooltipFormat?i.tooltipFormat:i.displayFormats.datetime)}format(t,r){return this._adapter.format(t,r||this.options.time.displayFormats[this._unit])}_tickFormatFunction(t,r,i,s){const a=this.options,l=a.ticks.callback;if(l)return ss(l,[t,r,i],this);const d=a.time.displayFormats,m=this._unit,y=this._majorUnit,D=y&&d[y],I=i[r];return this._adapter.format(t,s||(y&&D&&I&&I.major?D:m&&d[m]))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){const r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,i=this.ctx.measureText(t).width,s=ed(this.isHorizontal()?r.maxRotation:r.minRotation),a=Math.cos(s),l=Math.sin(s),d=this._resolveTickFontOptions(0).size;return{w:i*a+d*l,h:i*l+d*a}}_getLabelCapacity(t){const r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,a=this._tickFormatFunction(t,0,m$(this,[t],this._majorUnit),s),l=this._getLabelSize(a),d=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return d>0?d:1}getDataTimestamps(){let r,i,t=this._cache.data||[];if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,i;if(t.length)return t;const s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(d$(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return p7(t.sort(pTe))}}return Fn(e,"id","time"),Fn(e,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),e})();function AM(e,n,t){let s,a,l,d,r=0,i=e.length-1;t?(n>=e[r].pos&&n<=e[i].pos&&({lo:r,hi:i}=im(e,"pos",n)),({pos:s,time:l}=e[r]),({pos:a,time:d}=e[i])):(n>=e[r].time&&n<=e[i].time&&({lo:r,hi:i}=im(e,"time",n)),({time:s,pos:l}=e[r]),({time:a,pos:d}=e[i]));const m=a-s;return m?l+(d-l)*(n-s)/m:l}class JL extends KL{constructor(n){super(n),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const n=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(n);this._minPos=AM(t,this.min),this._tableRange=AM(t,this.max)-this._minPos,super.initOffsets(n)}buildLookupTable(n){const{min:t,max:r}=this,i=[],s=[];let a,l,d,m,y;for(a=0,l=n.length;a<l;++a)m=n[a],m>=t&&m<=r&&i.push(m);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(a=0,l=i.length;a<l;++a)y=i[a+1],d=i[a-1],m=i[a],Math.round((y+d)/2)!==m&&s.push({time:m,pos:a/(l-1)});return s}_getTimestampsForTable(){let n=this._cache.all||[];if(n.length)return n;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return n=t.length&&r.length?this.normalize(t.concat(r)):t.length?t:r,n=this._cache.all=n,n}getDecimalForValue(n){return(AM(this._table,n)-this._minPos)/this._tableRange}getValueForPixel(n){const t=this._offsets,r=this.getDecimalForPixel(n)/t.factor-t.end;return AM(this._table,r*this._tableRange+this._minPos,!0)}}Fn(JL,"id","timeseries"),Fn(JL,"defaults",KL.defaults);const vTe=[Swe,nCe,ZCe,Object.freeze({__proto__:null,CategoryScale:eTe,LinearScale:qL,LogarithmicScale:XL,RadialLinearScale:bC,TimeScale:KL,TimeSeriesScale:JL})],IM=function wTe(e,n){return e===n||e!=e&&n!=n},PM=function CTe(e,n){for(var t=e.length;t--;)if(IM(e[t][0],n))return t;return-1};var ETe=Array.prototype.splice;function Cx(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Cx.prototype.clear=function xTe(){this.__data__=[],this.size=0},Cx.prototype.delete=function STe(e){var n=this.__data__,t=PM(n,e);return!(t<0||(t==n.length-1?n.pop():ETe.call(n,t,1),--this.size,0))},Cx.prototype.get=function MTe(e){var n=this.__data__,t=PM(n,e);return t<0?void 0:n[t][1]},Cx.prototype.has=function ATe(e){return PM(this.__data__,e)>-1},Cx.prototype.set=function PTe(e,n){var t=this.__data__,r=PM(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this};const OM=Cx,g$="object"==typeof global&&global&&global.Object===Object&&global;var HTe="object"==typeof self&&self&&self.Object===Object&&self;const Tx=g$||HTe||Function("return this")();var WTe=Tx.Symbol,_$=Object.prototype,GTe=_$.hasOwnProperty,YTe=_$.toString,wC=WTe?WTe.toStringTag:void 0;var KTe=Object.prototype.toString;var y$=WTe?WTe.toStringTag:void 0;const FM=function nEe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":y$&&y$ in Object(e)?function qTe(e){var n=GTe.call(e,wC),t=e[wC];try{e[wC]=void 0;var r=!0}catch{}var i=YTe.call(e);return r&&(n?e[wC]=t:delete e[wC]),i}(e):function JTe(e){return KTe.call(e)}(e)},Fy=function rEe(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)};const QL=function lEe(e){if(!Fy(e))return!1;var n=FM(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n};var e,cEe=Tx["__core-js_shared__"],v$=(e=/[^.]+$/.exec(cEe&&cEe.keys&&cEe.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";var fEe=Function.prototype.toString;var _Ee=/^\[object .+?Constructor\]$/,wEe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const TEe=function CEe(e){return!(!Fy(e)||function uEe(e){return!!v$&&v$ in e}(e))&&(QL(e)?wEe:_Ee).test(function pEe(e){if(null!=e){try{return fEe.call(e)}catch{}try{return e+""}catch{}}return""}(e))},tF=function DEe(e,n){var t=function EEe(e,n){return e?.[n]}(e,n);return TEe(t)?t:void 0},x$=tF(Tx,"Map"),CC=tF(Object,"create");var REe=Object.prototype.hasOwnProperty;var VEe=Object.prototype.hasOwnProperty;function Ex(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Ex.prototype.clear=function AEe(){this.__data__=CC?CC(null):{},this.size=0},Ex.prototype.delete=function PEe(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Ex.prototype.get=function NEe(e){var n=this.__data__;if(CC){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return REe.call(n,e)?n[e]:void 0},Ex.prototype.has=function UEe(e){var n=this.__data__;return CC?void 0!==n[e]:VEe.call(n,e)},Ex.prototype.set=function $Ee(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=CC&&void 0===n?"__lodash_hash_undefined__":n,this};const b$=Ex,RM=function ZEe(e,n){var t=e.__data__;return function qEe(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?t["string"==typeof n?"string":"hash"]:t.map};function Sx(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}Sx.prototype.clear=function GEe(){this.size=0,this.__data__={hash:new b$,map:new(x$||OM),string:new b$}},Sx.prototype.delete=function KEe(e){var n=RM(this,e).delete(e);return this.size-=n?1:0,n},Sx.prototype.get=function QEe(e){return RM(this,e).get(e)},Sx.prototype.has=function tSe(e){return RM(this,e).has(e)},Sx.prototype.set=function rSe(e,n){var t=RM(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this};const sSe=Sx;function Dx(e){var n=this.__data__=new OM(e);this.size=n.size}Dx.prototype.clear=function LTe(){this.__data__=new OM,this.size=0},Dx.prototype.delete=function RTe(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Dx.prototype.get=function BTe(e){return this.__data__.get(e)},Dx.prototype.has=function VTe(e){return this.__data__.has(e)},Dx.prototype.set=function aSe(e,n){var t=this.__data__;if(t instanceof OM){var r=t.__data__;if(!x$||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new sSe(r)}return t.set(e,n),this.size=t.size,this};const cSe=Dx;var uSe=function(){try{var e=tF(Object,"defineProperty");return e({},"",{}),e}catch{}}();const NM=uSe,nF=function hSe(e,n,t){"__proto__"==n&&NM?NM(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},rF=function dSe(e,n,t){(void 0!==t&&!IM(e[n],t)||void 0===t&&!(n in e))&&nF(e,n,t)};var pSe=function fSe(e){return function(n,t,r){for(var i=-1,s=Object(n),a=r(n),l=a.length;l--;){var d=a[e?l:++i];if(!1===t(s[d],d,s))break}return n}}();const mSe=pSe;var w$="object"==typeof exports&&exports&&!exports.nodeType&&exports,C$=w$&&"object"==typeof module&&module&&!module.nodeType&&module,T$=C$&&C$.exports===w$?Tx.Buffer:void 0,E$=T$?T$.allocUnsafe:void 0;const S$=Tx.Uint8Array,CSe=function wSe(e,n){var t=n?function xSe(e){var n=new e.constructor(e.byteLength);return new S$(n).set(new S$(e)),n}(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)};var D$=Object.create,SSe=function(){function e(){}return function(n){if(!Fy(n))return{};if(D$)return D$(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();const DSe=SSe;var kSe=function MSe(e,n){return function(t){return e(n(t))}}(Object.getPrototypeOf,Object);const M$=kSe;var ASe=Object.prototype;const k$=function ISe(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||ASe)},TC=function LSe(e){return null!=e&&"object"==typeof e};const A$=function RSe(e){return TC(e)&&"[object Arguments]"==FM(e)};var I$=Object.prototype,NSe=I$.hasOwnProperty,BSe=I$.propertyIsEnumerable,zSe=A$(function(){return arguments}())?A$:function(e){return TC(e)&&NSe.call(e,"callee")&&!BSe.call(e,"callee")};const iF=zSe,sF=Array.isArray;const P$=function jSe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},oF=function HSe(e){return null!=e&&P$(e.length)&&!QL(e)};var O$="object"==typeof exports&&exports&&!exports.nodeType&&exports,L$=O$&&"object"==typeof module&&module&&!module.nodeType&&module,F$=L$&&L$.exports===O$?Tx.Buffer:void 0;const R$=(F$?F$.isBuffer:void 0)||function GSe(){return!1};var N$=Function.prototype.toString,eDe=Object.prototype.hasOwnProperty,tDe=N$.call(Object);var Ds={};Ds["[object Float32Array]"]=Ds["[object Float64Array]"]=Ds["[object Int8Array]"]=Ds["[object Int16Array]"]=Ds["[object Int32Array]"]=Ds["[object Uint8Array]"]=Ds["[object Uint8ClampedArray]"]=Ds["[object Uint16Array]"]=Ds["[object Uint32Array]"]=!0,Ds["[object Arguments]"]=Ds["[object Array]"]=Ds["[object ArrayBuffer]"]=Ds["[object Boolean]"]=Ds["[object DataView]"]=Ds["[object Date]"]=Ds["[object Error]"]=Ds["[object Function]"]=Ds["[object Map]"]=Ds["[object Number]"]=Ds["[object Object]"]=Ds["[object RegExp]"]=Ds["[object Set]"]=Ds["[object String]"]=Ds["[object WeakMap]"]=!1;var B$="object"==typeof exports&&exports&&!exports.nodeType&&exports,EC=B$&&"object"==typeof module&&module&&!module.nodeType&&module,aF=EC&&EC.exports===B$&&g$.process,ODe=function(){try{return EC&&EC.require&&EC.require("util").types||aF&&aF.binding&&aF.binding("util")}catch{}}(),V$=ODe&&ODe.isTypedArray;const U$=V$?function ADe(e){return function(n){return e(n)}}(V$):function MDe(e){return TC(e)&&P$(e.length)&&!!Ds[FM(e)]},lF=function FDe(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]};var NDe=Object.prototype.hasOwnProperty;const zDe=function BDe(e,n,t){var r=e[n];(!NDe.call(e,n)||!IM(r,t)||void 0===t&&!(n in e))&&nF(e,n,t)};var WDe=/^(?:0|[1-9]\d*)$/;const j$=function GDe(e,n){var t=typeof e;return!!(n=n??9007199254740991)&&("number"==t||"symbol"!=t&&WDe.test(e))&&e>-1&&e%1==0&&e<n};var qDe=Object.prototype.hasOwnProperty;const ZDe=function XDe(e,n){var t=sF(e),r=!t&&iF(e),i=!t&&!r&&R$(e),s=!t&&!r&&!i&&U$(e),a=t||r||i||s,l=a?function jDe(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}(e.length,String):[],d=l.length;for(var m in e)(n||qDe.call(e,m))&&(!a||!("length"==m||i&&("offset"==m||"parent"==m)||s&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||j$(m,d)))&&l.push(m);return l};var eMe=Object.prototype.hasOwnProperty;const nMe=function tMe(e){if(!Fy(e))return function KDe(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n}(e);var n=k$(e),t=[];for(var r in e)"constructor"==r&&(n||!eMe.call(e,r))||t.push(r);return t},H$=function rMe(e){return oF(e)?ZDe(e,!0):nMe(e)},sMe=function iMe(e){return function VDe(e,n,t,r){var i=!t;t||(t={});for(var s=-1,a=n.length;++s<a;){var l=n[s],d=r?r(t[l],e[l],l,t,e):void 0;void 0===d&&(d=e[l]),i?nF(t,l,d):zDe(t,l,d)}return t}(e,H$(e))},aMe=function oMe(e,n,t,r,i,s,a){var l=lF(e,t),d=lF(n,t),m=a.get(d);if(m)rF(e,t,m);else{var y=s?s(l,d,t+"",e,n,a):void 0,T=void 0===y;if(T){var D=sF(d),I=!D&&R$(d),F=!D&&!I&&U$(d);y=d,D||I||F?sF(l)?y=l:function $Se(e){return TC(e)&&oF(e)}(l)?y=function TSe(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n}(l):I?(T=!1,y=function _Se(e,n){if(n)return e.slice();var t=e.length,r=E$?E$(t):new e.constructor(t);return e.copy(r),r}(d,!0)):F?(T=!1,y=CSe(d,!0)):y=[]:function nDe(e){if(!TC(e)||"[object Object]"!=FM(e))return!1;var n=M$(e);if(null===n)return!0;var t=eDe.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&N$.call(t)==tDe}(d)||iF(d)?(y=l,iF(l)?y=sMe(l):(!Fy(l)||QL(l))&&(y=function PSe(e){return"function"!=typeof e.constructor||k$(e)?{}:DSe(M$(e))}(d))):T=!1}T&&(a.set(d,y),i(y,d,r,s,a),a.delete(d)),rF(e,t,y)}},lMe=function $$(e,n,t,r,i){e!==n&&mSe(n,function(s,a){if(i||(i=new cSe),Fy(s))aMe(e,n,a,t,$$,r,i);else{var l=r?r(lF(e,a),s,a+"",e,n,i):void 0;void 0===l&&(l=s),rF(e,a,l)}},H$)},W$=function cMe(e){return e},hMe=function uMe(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)};var G$=Math.max;const mMe=function pMe(e){return function(){return e}};var gMe=NM?function(e,n){return NM(e,"toString",{configurable:!0,enumerable:!1,value:mMe(n),writable:!0})}:W$,yMe=800,vMe=16,xMe=Date.now,wMe=function bMe(e){var n=0,t=0;return function(){var r=xMe(),i=vMe-(r-t);if(t=r,i>0){if(++n>=yMe)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(gMe);const CMe=wMe,EMe=function TMe(e,n){return CMe(function dMe(e,n,t){return n=G$(void 0===n?e.length-1:n,0),function(){for(var r=arguments,i=-1,s=G$(r.length-n,0),a=Array(s);++i<s;)a[i]=r[n+i];i=-1;for(var l=Array(n+1);++i<n;)l[i]=r[i];return l[n]=t(a),hMe(e,this,l)}}(e,n,W$),e+"")};var kMe=function MMe(e){return EMe(function(n,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,a&&function SMe(e,n,t){if(!Fy(t))return!1;var r=typeof n;return!!("number"==r?oF(t)&&j$(n,t.length):"string"==r&&n in t)&&IM(t[n],e)}(t[0],t[1],a)&&(s=i<3?void 0:s,i=1),n=Object(n);++r<i;){var l=t[r];l&&e(n,l,r,s)}return n})}(function(e,n,t){lMe(e,n,t)});const AMe=kMe,IMe=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],PMe={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:e=>r0(s0(e.datasetIndex),.4),borderColor:e=>r0(s0(e.datasetIndex),1),pointBackgroundColor:e=>r0(s0(e.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:e=>r0(s0(e.datasetIndex),.6),borderColor:e=>r0(s0(e.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:e=>r0(s0(e.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:e=>r0(s0(e.dataIndex),.6),borderColor:e=>r0(s0(e.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function r0(e,n){return"rgba("+e.concat(n).join(",")+")"}function cF(e,n){return Math.floor(Math.random()*(n-e+1))+e}function s0(e=0){return IMe[e]||function OMe(){return[cF(0,255),cF(0,255),cF(0,255)]}()}let Y$=(()=>{class e{constructor(){this.generateColors=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=pn({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();zL.register(...vTe);let LMe=(()=>{class e{constructor(t){t?.plugins&&zL.register(...t?.plugins);const r=AMe(t?.generateColors?PMe:{},t?.defaults||{});no.set(r)}static forRoot(t){return{ngModule:e,providers:[{provide:Y$,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(Jt(Y$,8))},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({}),e})(),FMe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({imports:[_w]}),e})();const o0=new er(ka),NMe={connector:()=>new qi};function q$(e,n=NMe){const{connector:t}=n;return yi((r,i)=>{const s=t();te(e(function RMe(e){return new er(n=>e.subscribe(n))}(s))).subscribe(i),i.add(r.subscribe(s))})}function X$(e,n){return n?t=>bw(n.pipe(Ul(1),function VMe(){return yi((e,n)=>{e.subscribe(ki(n,ka))})}()),t.pipe(X$(e))):Ct((t,r)=>te(e(t,r)).pipe(Ul(1),n5(t)))}const SC="Service workers are disabled or not supported by this browser";class BM{constructor(n){if(this.serviceWorker=n,n){const r=Xv(n,"controllerchange").pipe(jn(()=>n.controller)),s=bw($E(()=>qn(n.controller)),r);this.worker=s.pipe(Ri(y=>!!y)),this.registration=this.worker.pipe(bc(()=>n.getRegistration()));const m=Xv(n,"message").pipe(jn(y=>y.data)).pipe(Ri(y=>y&&y.type)).pipe(function zMe(e){return e?n=>q$(e)(n):n=>function BMe(e,n){const t=$r(e)?e:()=>e;return $r(n)?q$(n,{connector:t}):r=>new cI(r,t)}(new qi)(n)}());m.connect(),this.events=m}else this.worker=this.events=this.registration=function jMe(e){return $E(()=>xv(new Error(e)))}(SC)}postMessage(n,t){return this.worker.pipe(Ul(1),Ua(r=>{r.postMessage({action:n,...t})})).toPromise().then(()=>{})}postMessageWithOperation(n,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(n,t);return Promise.all([s,i]).then(([,a])=>a)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(n){let t;return t="string"==typeof n?r=>r.type===n:r=>n.includes(r.type),this.events.pipe(Ri(t))}nextEventOfType(n){return this.eventsOfType(n).pipe(Ul(1))}waitForOperationCompleted(n){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ri(t=>t.nonce===n),Ul(1),jn(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let HMe=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new qi,!t.isEnabled)return this.messages=o0,this.notificationClicks=o0,void(this.subscription=o0);this.messages=this.sw.eventsOfType("PUSH").pipe(jn(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(jn(i=>i.data)),this.pushManager=this.sw.registration.pipe(jn(i=>i.pushManager));const r=this.pushManager.pipe(bc(i=>i.getSubscription()));this.subscription=Oc(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(SC));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let a=0;a<i.length;a++)s[a]=i.charCodeAt(a);return r.applicationServerKey=s,this.pushManager.pipe(bc(a=>a.subscribe(r)),Ul(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Ul(1),bc(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(SC))}decodeBase64(t){return atob(t)}}return e.\u0275fac=function(t){return new(t||e)(Jt(BM))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})(),$Me=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=o0,this.available=o0,this.activated=o0,void(this.unrecoverable=o0);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Ri(r=>"VERSION_READY"===r.type),jn(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(SC));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(SC));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return e.\u0275fac=function(t){return new(t||e)(Jt(BM))},e.\u0275prov=pn({token:e,factory:e.\u0275fac}),e})();class uF{}const Z$=new On("NGSW_REGISTER_SCRIPT");function WMe(e,n,t,r){return()=>{if(!ZA(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let i;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)i=t.registrationStrategy();else{const[a,...l]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":i=qn(null);break;case"registerWithDelay":i=K$(+l[0]||0);break;case"registerWhenStable":i=l[0]?Oc(J$(e),K$(+l[0])):J$(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}e.get(ns).runOutsideAngular(()=>i.pipe(Ul(1)).subscribe(()=>navigator.serviceWorker.register(n,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function K$(e){return qn(null).pipe(function UMe(e,n=_U){const t=yU(e,n);return X$(()=>t)}(e))}function J$(e){return e.get(C_).isStable.pipe(Ri(t=>t))}function GMe(e,n){return new BM(ZA(n)&&!1!==e.enabled?navigator.serviceWorker:void 0)}let YMe=(()=>{class e{static register(t,r={}){return{ngModule:e,providers:[{provide:Z$,useValue:t},{provide:uF,useValue:r},{provide:BM,useFactory:GMe,deps:[uF,yv]},{provide:hw,useFactory:WMe,deps:[na,Z$,uF,yv],multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=si({providers:[HMe,$Me]}),e})(),qMe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Vr({type:e,bootstrap:[IQ]}),e.\u0275inj=si({imports:[GN,AQ,Nte,Qte,Wte,dpe,ppe,vpe,eee,E6,Jee,ite,vU.forRoot(),h1e.forRoot(),uxe,LMe,FMe,YMe.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"})]}),e})();if(yte().accessToken="pk.eyJ1IjoiZ29kd2lsbHk1MDAwIiwiYSI6ImNsZm9weGNwZTBqZWw0MHBqeDJubnlvMHoifQ.Q16Zoz1xothtWo29oKV_zw",!navigator.geolocation)throw alert('navegador no soporta geolocalizacion"'),new Error("navegador no soporta geolocalizacion");jZ().bootstrapModule(qMe).catch(e=>console.error(e))},898:function(Mx){Mx.exports=function(){"use strict";var um,Sf,$r;function c0(_,Et){if(um)if(Sf){var ql="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+um+")(sharedChunk); ("+Sf+")(sharedChunk); self.onerror = null;",Ya={};um(Ya),$r=Et(Ya),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&($r.workerUrl=window.URL.createObjectURL(new Blob([ql],{type:"text/javascript"})))}else Sf=Et;else um=Et}return c0(0,function(_){var Et=typeof self<"u"?self:{},ql="2.13.0";let Ya;const lr={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Ya){const c=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Ya=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):c}catch{Ya=c}}return Ya},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Qn={supported:!1,testSupport:function(c){!ka&&Eo&&(Df?Mf(c):Ls=c)}};let Ls,Eo,ka=!1,Df=!1;function Mf(c){const o=c.createTexture();c.bindTexture(c.TEXTURE_2D,o);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,Eo),c.isContextLost())return;Qn.supported=!0}catch{}c.deleteTexture(o),ka=!0}Et.document&&(Eo=Et.document.createElement("img"),Eo.onload=function(){Ls&&Mf(Ls),Ls=null,Df=!0},Eo.onerror=function(){ka=!0,Ls=null},Eo.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const bl="01";var pu=qa;function qa(c,o,u,f){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=u,this.p2y=f}qa.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(void 0===o&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,f=0;f<8;f++){var g=this.sampleCurveX(u)-c;if(Math.abs(g)<o)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=g/x}var w=0,E=1;for(u=c,f=0;f<20&&(g=this.sampleCurveX(u),!(Math.abs(g-c)<o));f++)c>g?w=u:E=u,u=.5*(E-w)+w;return u},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var Xt=wl;function wl(c,o){this.x=c,this.y=o}wl.prototype={clone:function(){return new wl(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,u=c.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),u=Math.sin(c),f=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=f,this},_rotateAround:function(c,o){var u=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},wl.convert=function(c){return c instanceof wl?c:Array.isArray(c)?new wl(c[0],c[1]):c};const ph=Math.PI/180,mh=180/Math.PI;function Cr(c){return c*ph}function Hs(c){return c*mh}const Dc=[[0,0],[1,0],[1,1],[0,1]];function gh(c){if(c<=0)return 0;if(c>=1)return 1;const o=c*c,u=o*c;return 4*(c<.5?u:3*(c-o)+u-.75)}function kf(c,o,u,f){const g=new pu(c,o,u,f);return function(x){return g.solve(x)}}const Af=kf(.25,.1,.25,1);function dr(c,o,u){return Math.min(u,Math.max(o,c))}function mu(c,o,u){return(u=dr((u-c)/(o-c),0,1))*u*(3-2*u)}function ha(c,o,u){const f=u-o,g=((c-o)%f+f)%f+o;return g===o?u:g}function nd(c,o,u){if(!c.length)return u(null,[]);let f=c.length;const g=new Array(c.length);let x=null;c.forEach((w,E)=>{o(w,(M,P)=>{M&&(x=M),g[E]=P,0==--f&&u(x,g)})})}function Mc(c){const o=[];for(const u in c)o.push(c[u]);return o}function er(c,...o){for(const u of o)for(const f in u)c[f]=u[f];return c}let kc=1;function rd(){return kc++}function Xl(){return function c(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,c)}()}function Zl(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function qi(c){return!!c&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(c)}function Ac(c,o){c.forEach(u=>{o[u]&&(o[u]=o[u].bind(o))})}function Cl(c,o){return-1!==c.indexOf(o,c.length-o.length)}function yi(c,o,u){const f={};for(const g in c)f[g]=o.call(u||this,c[g],g,c);return f}function ki(c,o,u){const f={};for(const g in c)o.call(u||this,c[g],g,c)&&(f[g]=c[g]);return f}function Aa(c){return Array.isArray(c)?c.map(Aa):"object"==typeof c&&c?yi(c,Aa):c}const jn={};function zi(c){jn[c]||(typeof console<"u"&&console.warn(c),jn[c]=!0)}function Kl(c,o,u){return(u.y-c.y)*(o.x-c.x)>(o.y-c.y)*(u.x-c.x)}function Fr(c){let o=0;for(let u,f,g=0,x=c.length,w=x-1;g<x;w=g++)u=c[g],f=c[w],o+=(f.x-u.x)*(u.y+f.y);return o}function Jl(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function gu(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,x)=>{const w=g||x;return o[f]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}let hm=null;function _u(c){if(null==hm){const o=c.navigator?c.navigator.userAgent:null;hm=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return hm}function dm(c){try{const o=Et[c];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function id(c,o){return[c[4*o],c[4*o+1],c[4*o+2],c[4*o+3]]}const If="mapbox-tiles";let Tl,Ql,Pf=500,_h=50;function fm(){try{return Et.caches}catch{}}function Ic(){fm()&&!Tl&&(Tl=Et.caches.open(If))}function sd(c){const o=c.indexOf("?");if(o<0)return c;const f=function(g){const x=g.indexOf("?");return x>0?g.slice(x+1).split("&"):[]}(c).filter(g=>{const x=g.split("=");return"language"===x[0]||"worldview"===x[0]});return f.length?`${c.slice(0,o)}?${f.join("&")}`:c.slice(0,o)}let Of=1/0;const Lf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Lf);class Xa extends Error{constructor(o,u,f){401===u&&ud(f)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const El=Jl()?()=>self.worker&&self.worker.referrer:()=>("blob:"===Et.location.protocol?Et.parent:Et).location.href,yu=function(c,o){if(!(/^file:/.test(u=c.url)||/^file:/.test(El())&&!/^\w+:/.test(u))){if(Et.fetch&&Et.Request&&Et.AbortController&&Et.Request.prototype.hasOwnProperty("signal"))return function(f,g){const x=new Et.AbortController,w=new Et.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:El(),signal:x.signal});let E=!1,M=!1;const P=(N=w.url).indexOf("sku=")>0&&ud(N);var N;"json"===f.type&&w.headers.set("Accept","application/json");const U=(Y,X,ee)=>{if(M)return;if(Y&&"SecurityError"!==Y.message&&zi(Y),X&&ee)return j(X);const se=Date.now();Et.fetch(w).then(xe=>{if(xe.ok){const ke=P?xe.clone():null;return j(xe,ke,se)}return g(new Xa(xe.statusText,xe.status,f.url))}).catch(xe=>{"AbortError"!==xe.name&&g(new Error(`${xe.message} ${f.url}`))})},j=(Y,X,ee)=>{("arrayBuffer"===f.type?Y.arrayBuffer():"json"===f.type?Y.json():Y.text()).then(se=>{M||(X&&ee&&function(xe,ke,pe){if(Ic(),!Tl)return;const Ee={status:ke.status,statusText:ke.statusText,headers:new Et.Headers};ke.headers.forEach((Qe,et)=>Ee.headers.set(et,Qe));const Fe=gu(ke.headers.get("Cache-Control")||"");if(Fe["no-store"])return;Fe["max-age"]&&Ee.headers.set("Expires",new Date(pe+1e3*Fe["max-age"]).toUTCString());const Oe=Ee.headers.get("Expires");Oe&&(new Date(Oe).getTime()-pe<42e4||function(Qe,et){if(void 0===Ql)try{new Response(new ReadableStream),Ql=!0}catch{Ql=!1}Ql?et(Qe.body):Qe.blob().then(et)}(ke,Qe=>{const et=new Et.Response(Qe,Ee);Ic(),Tl&&Tl.then(ht=>ht.put(sd(xe.url),et)).catch(ht=>zi(ht.message))}))}(w,X,ee),E=!0,g(null,se,Y.headers.get("Cache-Control"),Y.headers.get("Expires")))}).catch(se=>{M||g(new Error(se.message))})};return P?function(Y,X){if(Ic(),!Tl)return X(null);const ee=sd(Y.url);Tl.then(se=>{se.match(ee).then(xe=>{const ke=function(pe){if(!pe)return!1;const Ee=new Date(pe.headers.get("Expires")||0),Fe=gu(pe.headers.get("Cache-Control")||"");return Ee>Date.now()&&!Fe["no-cache"]}(xe);se.delete(ee),ke&&se.put(ee,xe.clone()),X(null,xe,ke)}).catch(X)}).catch(X)}(w,U):U(null,null),{cancel:()=>{M=!0,E||x.abort()}}}(c,o);if(Jl()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var u;return function(f,g){const x=new Et.XMLHttpRequest;x.open(f.method||"GET",f.url,!0),"arrayBuffer"===f.type&&(x.responseType="arraybuffer");for(const w in f.headers)x.setRequestHeader(w,f.headers[w]);return"json"===f.type&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials="include"===f.credentials,x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||0===x.status)&&null!==x.response){let w=x.response;if("json"===f.type)try{w=JSON.parse(x.response)}catch(E){return g(E)}g(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else g(new Xa(x.statusText,x.status,f.url))},x.send(f.body),{cancel:()=>x.abort()}}(c,o)},od=function(c,o){return yu(er(c,{type:"arrayBuffer"}),o)};function Ff(c){const o=Et.document.createElement("a");return o.href=c,o.protocol===Et.document.location.protocol&&o.host===Et.document.location.host}const Rf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ad,ld;ad=[],ld=0;const pm=function(c,o){if(Qn.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),ld>=lr.MAX_PARALLEL_IMAGE_REQUESTS){const x={requestParameters:c,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return ad.push(x),x}ld++;let u=!1;const f=()=>{if(!u)for(u=!0,ld--;ad.length&&ld<lr.MAX_PARALLEL_IMAGE_REQUESTS;){const x=ad.shift(),{requestParameters:w,callback:E,cancelled:M}=x;M||(x.cancel=pm(w,E).cancel)}},g=od(c,(x,w,E,M)=>{f(),x?o(x):w&&(Et.createImageBitmap?function(P,N){const U=new Et.Blob([new Uint8Array(P)],{type:"image/png"});Et.createImageBitmap(U).then(j=>{N(null,j)}).catch(j=>{N(new Error(`Could not load image because of ${j.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(P,N)=>o(P,N,E,M)):function(P,N){const U=new Et.Image,j=Et.URL;U.onload=()=>{N(null,U),j.revokeObjectURL(U.src),U.onload=null,Et.requestAnimationFrame(()=>{U.src=Rf})},U.onerror=()=>N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Y=new Et.Blob([new Uint8Array(P)],{type:"image/png"});U.src=P.byteLength?j.createObjectURL(Y):Rf}(w,(P,N)=>o(P,N,E,M)))});return{cancel:()=>{g.cancel(),f()}}},cd="NO_ACCESS_TOKEN";function ec(c){return 0===c.indexOf("mapbox:")}function ud(c){return lr.API_URL_REGEX.test(c)}function hd(c){return lr.API_CDN_URL_REGEX.test(c)}function Nf(c){return lr.API_STYLE_REGEX.test(c)&&!yh(c)}function yh(c){return lr.API_SPRITE_REGEX.test(c)}const vu=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function da(c){const o=c.match(vu);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function xu(c){const o=c.params.length?`?${c.params.join("&")}`:"";return`${c.protocol}://${c.authority}${c.path}${o}`}function Bf(c){if(!c)return null;const o=c.split(".");if(!o||3!==o.length)return null;try{return JSON.parse(decodeURIComponent(Et.atob(o[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class bu{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const u=Bf(lr.ACCESS_TOKEN);let f="";return f=u&&u.u?Et.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(g,x)=>String.fromCharCode(Number("0x"+x)))):lr.ACCESS_TOKEN||"",o?`mapbox.eventData.${o}:${f}`:`mapbox.eventData:${f}`}fetchEventData(){const o=dm("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{const g=Et.localStorage.getItem(u);g&&(this.eventData=JSON.parse(g));const x=Et.localStorage.getItem(f);x&&(this.anonId=x)}catch{zi("Unable to read from LocalStorage")}}saveEventData(){const o=dm("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(o)try{Et.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&Et.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{zi("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,u,f,g){if(!lr.EVENTS_URL)return;const x=da(lr.EVENTS_URL);x.params.push(`access_token=${g||lr.ACCESS_TOKEN||""}`);const w={event:this.type,created:new Date(o).toISOString()},E=u?er(w,u):w,M={url:xu(x),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};var N;this.pendingRequest=(N=P=>{this.pendingRequest=null,f(P),this.saveEventData(),this.processRequests(g)},yu(er(M,{method:"POST"}),N))}queueRequest(o,u){this.queue.push(o),this.processRequests(u)}}const ge=new class extends bu{constructor(c){super("appUserTurnstile"),this._customAccessToken=c}postTurnstileEvent(c,o){lr.EVENTS_URL&&lr.ACCESS_TOKEN&&Array.isArray(c)&&c.some(u=>ec(u)||ud(u))&&this.queueRequest(Date.now(),o)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Bf(lr.ACCESS_TOKEN),u=o?o.u:lr.ACCESS_TOKEN;let f=u!==this.eventData.tokenU;qi(this.anonId)||(this.anonId=Xl(),f=!0);const g=this.queue.shift();if(this.eventData.lastSuccess){const x=new Date(this.eventData.lastSuccess),w=new Date(g),E=(g-this.eventData.lastSuccess)/864e5;f=f||E>=1||E<-1||x.getDate()!==w.getDate()}else f=!0;f?this.postEvent(g,{sdkIdentifier:"mapbox-gl-js",sdkVersion:ql,skuId:bl,"enabled.telemetry":!1,userId:this.anonId},x=>{x||(this.eventData.lastSuccess=g,this.eventData.tokenU=u)},c):this.processRequests()}},K=ge.postTurnstileEvent.bind(ge),te=new class extends bu{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(c,o,u,f){this.skuToken=o,this.errorCb=f,lr.EVENTS_URL&&(u||lr.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},u):this.errorCb(new Error(cd)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:u}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),qi(this.anonId)||(this.anonId=Xl()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:ql,skuId:bl,skuToken:this.skuToken,userId:this.anonId},f=>{f?this.errorCb(f):o&&(this.success[o]=!0)},c))}},me=te.postMapLoadEvent.bind(te),Te=new class extends bu{constructor(){super("gljs.performance")}postPerformanceEvent(c,o){lr.EVENTS_URL&&(c||lr.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},c)}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:o,performanceData:u}=this.queue.shift(),f=function(g){const x=Et.performance.getEntriesByType("resource"),w=Et.performance.getEntriesByType("mark"),E=function(j){const Y={};if(j)for(const X in j)if("other"!==X)for(const ee of j[X]){const se=`${X}ResolveRangeMin`,xe=`${X}ResolveRangeMax`,ke=`${X}RequestCount`,pe=`${X}RequestCachedCount`;Y[se]=Math.min(Y[se]||1/0,ee.startTime),Y[xe]=Math.max(Y[xe]||-1/0,ee.responseEnd);const Ee=Fe=>{void 0===Y[Fe]&&(Y[Fe]=0),++Y[Fe]};void 0!==ee.transferSize&&0===ee.transferSize&&Ee(pe),Ee(ke)}return Y}(function(j,Y){const X={};if(j)for(const ee of j){const se=Y(ee);void 0===X[se]&&(X[se]=[]),X[se].push(ee)}return X}(x,sn)),M=Et.devicePixelRatio,P=Et.navigator.connection||Et.navigator.mozConnection||Et.navigator.webkitConnection,N={counters:[],metadata:[],attributes:[]},U=(j,Y,X)=>{null!=X&&j.push({name:Y,value:X.toString()})};for(const j in E)U(N.counters,j,E[j]);if(g.interactionRange[0]!==1/0&&g.interactionRange[1]!==-1/0&&(U(N.counters,"interactionRangeMin",g.interactionRange[0]),U(N.counters,"interactionRangeMax",g.interactionRange[1])),w)for(const j of Object.keys(nt)){const Y=nt[j],X=w.find(ee=>ee.name===Y);X&&U(N.counters,Y,X.startTime)}return U(N.counters,"visibilityHidden",g.visibilityHidden),U(N.attributes,"style",function(j){if(j)for(const Y of j){const X=Y.name.split("?")[0];if(Nf(X)){const ee=X.split("/").slice(-2);if(2===ee.length)return`mapbox://styles/${ee[0]}/${ee[1]}`}}}(x)),U(N.attributes,"terrainEnabled",g.terrainEnabled?"true":"false"),U(N.attributes,"fogEnabled",g.fogEnabled?"true":"false"),U(N.attributes,"projection",g.projection),U(N.attributes,"zoom",g.zoom),U(N.metadata,"devicePixelRatio",M),U(N.metadata,"connectionEffectiveType",P?P.effectiveType:void 0),U(N.metadata,"navigatorUserAgent",Et.navigator.userAgent),U(N.metadata,"screenWidth",Et.screen.width),U(N.metadata,"screenHeight",Et.screen.height),U(N.metadata,"windowWidth",Et.innerWidth),U(N.metadata,"windowHeight",Et.innerHeight),U(N.metadata,"mapWidth",g.width/M),U(N.metadata,"mapHeight",g.height/M),U(N.metadata,"webglRenderer",g.renderer),U(N.metadata,"webglVendor",g.vendor),U(N.metadata,"sdkVersion",ql),U(N.metadata,"sdkIdentifier","mapbox-gl-js"),N}(u);for(const g of f.metadata);for(const g of f.counters);for(const g of f.attributes);this.postEvent(o,f,()=>{},c)}},Ve=Te.postPerformanceEvent.bind(Te),Ze=new class extends bu{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(c,o,u,f){if(!lr.API_URL||!lr.SESSION_PATH)return;const g=da(lr.API_URL+lr.SESSION_PATH);g.params.push(`sku=${o||""}`),g.params.push(`access_token=${f||lr.ACCESS_TOKEN||""}`);const x={url:xu(g),headers:{"Content-Type":"text/plain"}};var E;this.pendingRequest=(E=w=>{this.pendingRequest=null,u(w),this.saveEventData(),this.processRequests(f)},yu(er(x,{method:"GET"}),E))}getSessionAPI(c,o,u,f){this.skuToken=o,this.errorCb=f,lr.SESSION_PATH&&lr.API_URL&&(u||lr.ACCESS_TOKEN?this.queueRequest({id:c,timestamp:Date.now()},u):this.errorCb(new Error(cd)))}processRequests(c){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:u}=this.queue.shift();o&&this.success[o]||this.getSession(u,this.skuToken,f=>{f?this.errorCb(f):o&&(this.success[o]=!0)},c)}},Xe=Ze.getSessionAPI.bind(Ze),He=new Set,nt={create:"create",load:"load",fullLoad:"fullLoad"},wt={mark(c){Et.performance.mark(c)},measure(c,o,u){Et.performance.measure(c,o,u)}};function sn(c){const o=c.name.split("?")[0];return hd(o)&&o.includes("mapbox-gl.js")?"javascript":hd(o)&&o.includes("mapbox-gl.css")?"css":lr.API_FONTS_REGEX.test(o)?"fontRange":yh(o)?"sprite":Nf(o)?"style":lr.API_TILEJSON_REGEX.test(o)?"tilejson":"other"}const Ct=Et.performance;function kn(c){const o=c?c.url.toString():void 0;return Ct.getEntriesByName(o)}let vn,In,zn,tr;const Pr={now:()=>void 0!==zn?zn:Et.performance.now(),setNow(c){zn=c},restoreNow(){zn=void 0},frame(c){const o=Et.requestAnimationFrame(c);return{cancel:()=>Et.cancelAnimationFrame(o)}},getImageData(c,o=0){const{width:u,height:f}=c;tr||(tr=Et.document.createElement("canvas"));const g=tr.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(u>tr.width||f>tr.height)&&(tr.width=u,tr.height=f),g.clearRect(-o,-o,u+2*o,f+2*o),g.drawImage(c,0,0,u,f),g.getImageData(-o,-o,u+2*o,f+2*o)},resolveURL:c=>(vn||(vn=Et.document.createElement("a")),vn.href=c,vn.href),get devicePixelRatio(){return Et.devicePixelRatio},get prefersReducedMotion(){return!!Et.matchMedia&&(null==In&&(In=Et.matchMedia("(prefers-reduced-motion: reduce)")),In.matches)}};function Ln(c,o,u){u[c]&&-1!==u[c].indexOf(o)||(u[c]=u[c]||[],u[c].push(o))}function Br(c,o,u){if(u&&u[c]){const f=u[c].indexOf(o);-1!==f&&u[c].splice(f,1)}}class di{constructor(o,u={}){er(this,u),this.type=o}}class tc extends di{constructor(o,u={}){super("error",er({error:o},u))}}class nc{on(o,u){return this._listeners=this._listeners||{},Ln(o,u,this._listeners),this}off(o,u){return Br(o,u,this._listeners),Br(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Ln(o,u,this._oneTimeListeners),this):new Promise(f=>this.once(o,f))}fire(o,u){"string"==typeof o&&(o=new di(o,u||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of g)E.call(this,o);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of x)Br(f,E,this._oneTimeListeners),E.call(this,o);const w=this._eventedParent;w&&(er(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof tc&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var mt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Pc(c,...o){for(const u of o)for(const f in u)c[f]=u[f];return c}function os(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function wu(c){if(Array.isArray(c))return c.map(wu);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const u in c)o[u]=wu(c[u]);return o}return os(c)}class u0 extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}var rc=u0;class dd{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(o){return new dd(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var as=dd;const Oc={kind:"null"},Kt={kind:"number"},fr={kind:"string"},Sn={kind:"boolean"},Za={kind:"color"},ii={kind:"object"},ir={kind:"value"},zf={kind:"collator"},Rr={kind:"formatted"},Vn={kind:"resolvedImage"};function ro(c,o){return{kind:"array",itemType:c,N:o}}function fi(c){if("array"===c.kind){const o=fi(c.itemType);return"number"==typeof c.N?`array<${o}, ${c.N}>`:"value"===c.itemType.kind?"array":`array<${o}>`}return c.kind}const Ax=[Oc,Kt,fr,Sn,Za,Rr,ii,ro(ir),Vn];function io(c,o){if("error"===o.kind)return null;if("array"===c.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!io(c.itemType,o.itemType))&&("number"!=typeof c.N||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if("value"===c.kind)for(const u of Ax)if(!io(u,o))return null}return`Expected ${fi(c)} but found ${fi(o)} instead.`}function Mt(c,o){return o.some(u=>u.kind===c.kind)}function ic(c,o){return o.some(u=>"null"===u?null===c:"array"===u?Array.isArray(c):"object"===u?c&&!Array.isArray(c)&&"object"==typeof c:u===typeof c)}var nr,qr={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Vf(c){return(c=Math.round(c))<0?0:c>255?255:c}function fd(c){return Vf("%"===c[c.length-1]?parseFloat(c)/100*255:parseInt(c))}function pd(c){return(o="%"===c[c.length-1]?parseFloat(c)/100:parseFloat(c))<0?0:o>1?1:o;var o}function md(c,o,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?c+(o-c)*u*6:2*u<1?o:3*u<2?c+(o-c)*(2/3-u)*6:c}try{nr={}.parseCSSColor=function(c){var o,u=c.replace(/ /g,"").toLowerCase();if(u in qr)return qr[u].slice();if("#"===u[0])return 4===u.length?(o=parseInt(u.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===u.length&&(o=parseInt(u.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var f=u.indexOf("("),g=u.indexOf(")");if(-1!==f&&g+1===u.length){var x=u.substr(0,f),w=u.substr(f+1,g-(f+1)).split(","),E=1;switch(x){case"rgba":if(4!==w.length)return null;E=pd(w.pop());case"rgb":return 3!==w.length?null:[fd(w[0]),fd(w[1]),fd(w[2]),E];case"hsla":if(4!==w.length)return null;E=pd(w.pop());case"hsl":if(3!==w.length)return null;var M=(parseFloat(w[0])%360+360)%360/360,P=pd(w[1]),N=pd(w[2]),U=N<=.5?N*(P+1):N+P-N*P,j=2*N-U;return[Vf(255*md(j,U,M+1/3)),Vf(255*md(j,U,M)),Vf(255*md(j,U,M-1/3)),E];default:return null}}return null}}catch{}class Fi{constructor(o,u,f,g=1){this.r=o,this.g=u,this.b=f,this.a=g}static parse(o){if(!o)return;if(o instanceof Fi)return o;if("string"!=typeof o)return;const u=nr(o);return u?new Fi(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[o,u,f,g]=this.toArray();return`rgba(${Math.round(o)},${Math.round(u)},${Math.round(f)},${g})`}toArray(){const{r:o,g:u,b:f,a:g}=this;return 0===g?[0,0,0,0]:[255*o/g,255*u/g,255*f/g,g]}toArray01(){const{r:o,g:u,b:f,a:g}=this;return 0===g?[0,0,0,0]:[o/g,u/g,f/g,g]}toArray01PremultipliedAlpha(){const{r:o,g:u,b:f,a:g}=this;return[o,u,f,g]}}Fi.black=new Fi(0,0,0,1),Fi.white=new Fi(1,1,1,1),Fi.transparent=new Fi(0,0,0,0),Fi.red=new Fi(1,0,0,1),Fi.blue=new Fi(0,0,1,1);var ls=Fi;class mm{constructor(o,u,f){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class gm{constructor(o,u,f,g,x){this.text=o.normalize?o.normalize():o,this.image=u,this.scale=f,this.fontStack=g,this.textColor=x}}class cs{constructor(o){this.sections=o}static fromString(o){return new cs([new gm(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof cs?o:cs.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const u of this.sections){if(u.image){o.push(["image",u.image.name]);continue}o.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toArray())),o.push(f)}return o}}class fa{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new fa({name:o,available:!1}):null}serialize(){return["image",this.name]}}function Ix(c,o,u,f){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof u&&u>=0&&u<=255?void 0===f||"number"==typeof f&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof f?[c,o,u,f]:[c,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function h0(c){if(null===c||"string"==typeof c||"boolean"==typeof c||"number"==typeof c||c instanceof ls||c instanceof mm||c instanceof cs||c instanceof fa)return!0;if(Array.isArray(c)){for(const o of c)if(!h0(o))return!1;return!0}if("object"==typeof c){for(const o in c)if(!h0(c[o]))return!1;return!0}return!1}function Fs(c){if(null===c)return Oc;if("string"==typeof c)return fr;if("boolean"==typeof c)return Sn;if("number"==typeof c)return Kt;if(c instanceof ls)return Za;if(c instanceof mm)return zf;if(c instanceof cs)return Rr;if(c instanceof fa)return Vn;if(Array.isArray(c)){const o=c.length;let u;for(const f of c){const g=Fs(f);if(u){if(u===g)continue;u=ir;break}u=g}return ro(u||ir,o)}return ii}function Uf(c){const o=typeof c;return null===c?"":"string"===o||"number"===o||"boolean"===o?String(c):c instanceof ls||c instanceof cs||c instanceof fa?c.toString():JSON.stringify(c)}class By{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(2!==o.length)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!h0(o[1]))return u.error("invalid value");const f=o[1];let g=Fs(f);const x=u.expectedType;return"array"!==g.kind||0!==g.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(g=x),new By(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ls?["rgba"].concat(this.value.toArray()):this.value instanceof cs?this.value.serialize():this.value}}var jf=By,So=class{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}};const Xo={string:fr,number:Kt,boolean:Sn,object:ii};class zr{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let f,g=1;const x=o[0];if("array"===x){let E,M;if(o.length>2){const P=o[1];if("string"!=typeof P||!(P in Xo)||"object"===P)return u.error('The item type argument of "array" must be one of string, number, boolean',1);E=Xo[P],g++}else E=ir;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);M=o[2],g++}f=ro(E,M)}else f=Xo[x];const w=[];for(;g<o.length;g++){const E=u.parse(o[g],g,ir);if(!E)return null;w.push(E)}return new zr(f,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(o);if(!io(this.type,Fs(f)))return f;if(u===this.args.length-1)throw new So(`Expected value to be of type ${fi(this.type)}, but found ${fi(Fs(f))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,u=[o.kind];if("array"===o.kind){const f=o.itemType;if("string"===f.kind||"number"===f.kind||"boolean"===f.kind){u.push(f.kind);const g=o.N;("number"==typeof g||this.args.length>1)&&u.push(g)}}return u.concat(this.args.map(f=>f.serialize()))}}var Cu=zr;class _m{constructor(o){this.type=Rr,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&"object"==typeof f)return u.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=o.length-1;++w){const E=o[w];if(x&&"object"==typeof E&&!Array.isArray(E)){x=!1;let M=null;if(E["font-scale"]&&(M=u.parse(E["font-scale"],1,Kt),!M))return null;let P=null;if(E["text-font"]&&(P=u.parse(E["text-font"],1,ro(fr)),!P))return null;let N=null;if(E["text-color"]&&(N=u.parse(E["text-color"],1,Za),!N))return null;const U=g[g.length-1];U.scale=M,U.font=P,U.textColor=N}else{const M=u.parse(o[w],1,ir);if(!M)return null;const P=M.type.kind;if("string"!==P&&"value"!==P&&"null"!==P&&"resolvedImage"!==P)return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:M,scale:null,font:null,textColor:null})}}return new _m(g)}evaluate(o){return new cs(this.sections.map(u=>{const f=u.content.evaluate(o);return Fs(f)===Vn?new gm("",f,null,null,null):new gm(Uf(f),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const u of this.sections){o.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),o.push(f)}return o}}class d0{constructor(o){this.type=Vn,this.input=o}static parse(o,u){if(2!==o.length)return u.error("Expected two arguments.");const f=u.parse(o[1],1,fr);return f?new d0(f):u.error("No image name provided.")}evaluate(o){const u=this.input.evaluate(o),f=fa.fromString(u);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(u)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const pn={"to-boolean":Sn,"to-color":Za,"to-number":Kt,"to-string":fr};class zy{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[0];if(("to-boolean"===f||"to-string"===f)&&2!==o.length)return u.error("Expected one argument.");const g=pn[f],x=[];for(let w=1;w<o.length;w++){const E=u.parse(o[w],w,ir);if(!E)return null;x.push(E)}return new zy(g,x)}evaluate(o){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(o));if("color"===this.type.kind){let u,f;for(const g of this.args){if(u=g.evaluate(o),f=null,u instanceof ls)return u;if("string"==typeof u){const x=o.parseColor(u);if(x)return x}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Ix(u[0],u[1],u[2],u[3]),!f))return new ls(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new So(f||`Could not parse color from value '${"string"==typeof u?u:String(JSON.stringify(u))}'`)}if("number"===this.type.kind){let u=null;for(const f of this.args){if(u=f.evaluate(o),null===u)return 0;const g=Number(u);if(!isNaN(g))return g}throw new So(`Could not convert ${JSON.stringify(u)} to number.`)}return"formatted"===this.type.kind?cs.fromString(Uf(this.args[0].evaluate(o))):"resolvedImage"===this.type.kind?fa.fromString(Uf(this.args[0].evaluate(o))):Uf(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if("formatted"===this.type.kind)return new _m([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new d0(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild(u=>{o.push(u.serialize())}),o}}var si=zy;const Hf=["Unknown","Point","LineString","Polygon"];var $f=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Hf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const c=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:u,y:f}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*o-c[0])+this.featureDistanceData.bearing[1]*(f*o-c[1])}return 0}parseColor(c){let o=this._parseColorCache[c];return o||(o=this._parseColorCache[c]=ls.parse(c)),o}};class vh{constructor(o,u,f,g){this.name=o,this.type=u,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,u){const f=o[0],g=vh.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,E=w.filter(([P])=>!Array.isArray(P)||P.length===o.length-1);let M=null;for(const[P,N]of E){M=new g0(u.registry,u.path,null,u.scope);const U=[];let j=!1;for(let Y=1;Y<o.length;Y++){const X=o[Y],ee=Array.isArray(P)?P[Y-1]:P.type,se=M.parse(X,1+U.length,ee);if(!se){j=!0;break}U.push(se)}if(!j)if(Array.isArray(P)&&P.length!==U.length)M.error(`Expected ${P.length} arguments, but found ${U.length} instead.`);else{for(let Y=0;Y<U.length;Y++){const X=Array.isArray(P)?P[Y]:P.type,ee=U[Y];M.concat(Y+1).checkSubtype(X,ee.type)}if(0===M.errors.length)return new vh(f,x,N,U)}}if(1===E.length)u.errors.push(...M.errors);else{const P=(E.length?E:w).map(([U])=>{return j=U,Array.isArray(j)?`(${j.map(fi).join(", ")})`:`(${fi(j.type)}...)`;var j}).join(" | "),N=[];for(let U=1;U<o.length;U++){const j=u.parse(o[U],1+N.length);if(!j)return null;N.push(fi(j.type))}u.error(`Expected arguments of type ${P}, but found (${N.join(", ")}) instead.`)}return null}static register(o,u){vh.definitions=u;for(const f in u)o[f]=vh}}var Tu=vh;class ym{constructor(o,u,f){this.type=zf,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(2!==o.length)return u.error("Expected one argument.");const f=o[1];if("object"!=typeof f||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=u.parse(void 0!==f["case-sensitive"]&&f["case-sensitive"],1,Sn);if(!g)return null;const x=u.parse(void 0!==f["diacritic-sensitive"]&&f["diacritic-sensitive"],1,Sn);if(!x)return null;let w=null;return f.locale&&(w=u.parse(f.locale,1,fr),!w)?null:new ym(g,x,w)}evaluate(o){return new mm(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Lc=8192;function Zo(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function xh(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function f0(c,o){const u=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*Lc),Math.round(f*g*Lc)]}function Vy(c,o,u){const f=c[0]-o[0],g=c[1]-o[1],x=c[0]-u[0],w=c[1]-u[1];return f*w-x*g==0&&f*x<=0&&g*w<=0}function Hn(c,o){let u=!1;for(let w=0,E=o.length;w<E;w++){const M=o[w];for(let P=0,N=M.length;P<N-1;P++){if(Vy(c,M[P],M[P+1]))return!1;(g=M[P])[1]>(f=c)[1]!=(x=M[P+1])[1]>f[1]&&f[0]<(x[0]-g[0])*(f[1]-g[1])/(x[1]-g[1])+g[0]&&(u=!u)}}var f,g,x;return u}function vm(c,o){for(let u=0;u<o.length;u++)if(Hn(c,o[u]))return!0;return!1}function p0(c,o,u,f){const g=f[0]-u[0],x=f[1]-u[1],w=(c[0]-u[0])*x-g*(c[1]-u[1]),E=(o[0]-u[0])*x-g*(o[1]-u[1]);return w>0&&E<0||w<0&&E>0}function pa(c,o,u){for(const P of u)for(let N=0;N<P.length-1;++N)if((E=[(w=P[N+1])[0]-(x=P[N])[0],w[1]-x[1]])[0]*(M=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-E[1]*M[0]!=0&&p0(f,g,x,w)&&p0(x,w,f,g))return!0;var f,g,x,w,E,M;return!1}function bh(c,o){for(let u=0;u<c.length;++u)if(!Hn(c[u],o))return!1;for(let u=0;u<c.length-1;++u)if(pa(c[u],c[u+1],o))return!1;return!0}function Px(c,o){for(let u=0;u<o.length;u++)if(bh(c,o[u]))return!0;return!1}function Ai(c,o,u){const f=[];for(let g=0;g<c.length;g++){const x=[];for(let w=0;w<c[g].length;w++){const E=f0(c[g][w],u);Zo(o,E),x.push(E)}f.push(x)}return f}function m0(c,o,u){const f=[];for(let g=0;g<c.length;g++){const x=Ai(c[g],o,u);f.push(x)}return f}function Uy(c,o,u,f){if(c[0]<u[0]||c[0]>u[2]){const g=.5*f;let x=c[0]-u[0]>g?-f:u[0]-c[0]>g?f:0;0===x&&(x=c[0]-u[2]>g?-f:u[2]-c[0]>g?f:0),c[0]+=x}Zo(o,c)}function gd(c,o,u,f){const g=Math.pow(2,f.z)*Lc,x=[f.x*Lc,f.y*Lc],w=[];if(!c)return w;for(const E of c)for(const M of E){const P=[M.x+x[0],M.y+x[1]];Uy(P,o,u,g),w.push(P)}return w}function Mr(c,o,u,f){const g=Math.pow(2,f.z)*Lc,x=[f.x*Lc,f.y*Lc],w=[];if(!c)return w;for(const M of c){const P=[];for(const N of M){const U=[N.x+x[0],N.y+x[1]];Zo(o,U),P.push(U)}w.push(P)}if(o[2]-o[0]<=g/2){(E=o)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const M of w)for(const P of M)Uy(P,o,u,g)}var E;return w}class wh{constructor(o,u){this.type=Sn,this.geojson=o,this.geometries=u}static parse(o,u){if(2!==o.length)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(h0(o[1])){const f=o[1];if("FeatureCollection"===f.type)for(let g=0;g<f.features.length;++g){const x=f.features[g].geometry.type;if("Polygon"===x||"MultiPolygon"===x)return new wh(f,f.features[g].geometry)}else if("Feature"===f.type){const g=f.geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new wh(f,f.geometry)}else if("Polygon"===f.type||"MultiPolygon"===f.type)return new wh(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if("Polygon"===f.type){const E=Ai(f.coordinates,x,w),M=gd(u.geometry(),g,x,w);if(!xh(g,x))return!1;for(const P of M)if(!Hn(P,E))return!1}if("MultiPolygon"===f.type){const E=m0(f.coordinates,x,w),M=gd(u.geometry(),g,x,w);if(!xh(g,x))return!1;for(const P of M)if(!vm(P,E))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if("Polygon"===f.type){const E=Ai(f.coordinates,x,w),M=Mr(u.geometry(),g,x,w);if(!xh(g,x))return!1;for(const P of M)if(!bh(P,E))return!1}if("MultiPolygon"===f.type){const E=m0(f.coordinates,x,w),M=Mr(u.geometry(),g,x,w);if(!xh(g,x))return!1;for(const P of M)if(!Px(P,E))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var _d=wh;function Wf(c){if(c instanceof Tu&&("get"===c.name&&1===c.args.length||"feature-state"===c.name||"has"===c.name&&1===c.args.length||"properties"===c.name||"geometry-type"===c.name||"id"===c.name||/^filter-/.test(c.name))||c instanceof _d)return!1;let o=!0;return c.eachChild(u=>{o&&!Wf(u)&&(o=!1)}),o}function Gf(c){if(c instanceof Tu&&"feature-state"===c.name)return!1;let o=!0;return c.eachChild(u=>{o&&!Gf(u)&&(o=!1)}),o}function xm(c,o){if(c instanceof Tu&&o.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(f=>{u&&!xm(f,o)&&(u=!1)}),u}class Yf{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(2!==o.length||"string"!=typeof o[1])return u.error("'var' expression requires exactly one string literal argument.");const f=o[1];return u.scope.has(f)?new Yf(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ch=Yf;class Fc{constructor(o,u=[],f,g=new as,x=[]){this.registry=o,this.path=u,this.key=u.map(w=>`[${w}]`).join(""),this.scope=g,this.errors=x,this.expectedType=f}parse(o,u,f,g,x={}){return u?this.concat(u,f,g)._parse(o,x):this._parse(o,x)}_parse(o,u){function f(g,x,w){return"assert"===w?new Cu(x,[g]):"coerce"===w?new si(x,[g]):g}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if("string"!=typeof g)return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(o,this);if(!w)return null;if(this.expectedType){const E=this.expectedType,M=w.type;if("string"!==E.kind&&"number"!==E.kind&&"boolean"!==E.kind&&"object"!==E.kind&&"array"!==E.kind||"value"!==M.kind)if("color"!==E.kind&&"formatted"!==E.kind&&"resolvedImage"!==E.kind||"value"!==M.kind&&"string"!==M.kind){if(this.checkSubtype(E,M))return null}else w=f(w,E,u.typeAnnotation||"coerce");else w=f(w,E,u.typeAnnotation||"assert")}if(!(w instanceof jf)&&"resolvedImage"!==w.type.kind&&Jt(w)){const E=new $f;try{w=new jf(w.type,w.evaluate(E))}catch(M){return this.error(M.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,f){const g="number"==typeof o?this.path.concat(o):this.path,x=f?this.scope.concat(f):this.scope;return new Fc(this.registry,g,u||null,x,this.errors)}error(o,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new rc(f,o))}checkSubtype(o,u){const f=io(o,u);return f&&this.error(f),f}}var g0=Fc;function Jt(c){if(c instanceof Ch)return Jt(c.boundExpression);if(c instanceof Tu&&"error"===c.name||c instanceof ym||c instanceof _d)return!1;const o=c instanceof si||c instanceof Cu;let u=!0;return c.eachChild(f=>{u=o?u&&Jt(f):u&&f instanceof jf}),!!u&&Wf(c)&&xm(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Eu(c,o){const u=c.length-1;let f,g,x=0,w=u,E=0;for(;x<=w;)if(E=Math.floor((x+w)/2),f=c[E],g=c[E+1],f<=o){if(E===u||o<g)return E;x=E+1}else{if(!(f>o))throw new So("Input is not a number.");w=E-1}return 0}class pr{constructor(o,u,f){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(o[1],1,Kt);if(!f)return null;const g=[];let x=null;u.expectedType&&"value"!==u.expectedType.kind&&(x=u.expectedType);for(let w=1;w<o.length;w+=2){const E=1===w?-1/0:o[w],M=o[w+1],P=w,N=w+1;if("number"!=typeof E)return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=E)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const U=u.parse(M,N,x);if(!U)return null;x=x||U.type,g.push([E,U])}return new pr(x,f,g)}evaluate(o){const u=this.labels,f=this.outputs;if(1===u.length)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;return g>=u[x-1]?f[x-1].evaluate(o):f[Eu(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o}}var yd=pr;function Er(c,o,u){return c*(1-u)+o*u}var Rc=Object.freeze({__proto__:null,number:Er,color:function(c,o,u){return new ls(Er(c.r,o.r,u),Er(c.g,o.g,u),Er(c.b,o.b,u),Er(c.a,o.a,u))},array:function(c,o,u){return c.map((f,g)=>Er(f,o[g],u))}});const jy=.95047,Hy=1.08883,_0=4/29,Sl=6/29,Ka=3*Sl*Sl,Ja=Math.PI/180,Nc=180/Math.PI;function Wr(c){return c>.008856451679035631?Math.pow(c,1/3):c/Ka+_0}function vd(c){return c>Sl?c*c*c:Ka*(c-_0)}function xd(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function bd(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function y0(c){const o=bd(c.r),u=bd(c.g),f=bd(c.b),g=Wr((.4124564*o+.3575761*u+.1804375*f)/jy),x=Wr((.2126729*o+.7151522*u+.072175*f)/1);return{l:116*x-16,a:500*(g-x),b:200*(x-Wr((.0193339*o+.119192*u+.9503041*f)/Hy)),alpha:c.a}}function sc(c){let o=(c.l+16)/116,u=isNaN(c.a)?o:o+c.a/500,f=isNaN(c.b)?o:o-c.b/200;return o=1*vd(o),u=jy*vd(u),f=Hy*vd(f),new ls(xd(3.2404542*u-1.5371385*o-.4985314*f),xd(-.969266*u+1.8760108*o+.041556*f),xd(.0556434*u-.2040259*o+1.0572252*f),c.alpha)}function qf(c,o,u){const f=o-c;return c+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Xf={forward:y0,reverse:sc,interpolate:function(c,o,u){return{l:Er(c.l,o.l,u),a:Er(c.a,o.a,u),b:Er(c.b,o.b,u),alpha:Er(c.alpha,o.alpha,u)}}},bn={forward:function(c){const{l:o,a:u,b:f}=y0(c),g=Math.atan2(f,u)*Nc;return{h:g<0?g+360:g,c:Math.sqrt(u*u+f*f),l:o,alpha:c.a}},reverse:function(c){const o=c.h*Ja,u=c.c;return sc({l:c.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:c.alpha})},interpolate:function(c,o,u){return{h:qf(c.h,o.h,u),c:Er(c.c,o.c,u),l:Er(c.l,o.l,u),alpha:Er(c.alpha,o.alpha,u)}}};var $y=Object.freeze({__proto__:null,lab:Xf,hcl:bn});class Zf{constructor(o,u,f,g,x){this.type=o,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,E]of x)this.labels.push(w),this.outputs.push(E)}static interpolationFactor(o,u,f,g){let x=0;if("exponential"===o.name)x=v0(u,o.base,f,g);else if("linear"===o.name)x=v0(u,1,f,g);else if("cubic-bezier"===o.name){const w=o.controlPoints;x=new pu(w[0],w[1],w[2],w[3]).solve(v0(u,1,f,g))}return x}static parse(o,u){let[f,g,x,...w]=o;if(!Array.isArray(g)||0===g.length)return u.error("Expected an interpolation type expression.",1);if("linear"===g[0])g={name:"linear"};else if("exponential"===g[0]){const P=g[1];if("number"!=typeof P)return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if("cubic-bezier"!==g[0])return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(4!==P.length||P.some(N=>"number"!=typeof N||N<0||N>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(x=u.parse(x,2,Kt),!x)return null;const E=[];let M=null;"interpolate-hcl"===f||"interpolate-lab"===f?M=Za:u.expectedType&&"value"!==u.expectedType.kind&&(M=u.expectedType);for(let P=0;P<w.length;P+=2){const N=w[P],U=w[P+1],j=P+3,Y=P+4;if("number"!=typeof N)return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(E.length&&E[E.length-1][0]>=N)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const X=u.parse(U,Y,M);if(!X)return null;M=M||X.type,E.push([N,X])}return"number"===M.kind||"color"===M.kind||"array"===M.kind&&"number"===M.itemType.kind&&"number"==typeof M.N?new Zf(M,f,g,x,E):u.error(`Type ${fi(M)} is not interpolatable.`)}evaluate(o){const u=this.labels,f=this.outputs;if(1===u.length)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;if(g>=u[x-1])return f[x-1].evaluate(o);const w=Eu(u,g),E=Zf.interpolationFactor(this.interpolation,g,u[w],u[w+1]),M=f[w].evaluate(o),P=f[w+1].evaluate(o);return"interpolate"===this.operator?Rc[this.type.kind.toLowerCase()](M,P,E):"interpolate-hcl"===this.operator?bn.reverse(bn.interpolate(bn.forward(M),bn.forward(P),E)):Xf.reverse(Xf.interpolate(Xf.forward(M),Xf.forward(P),E))}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,o,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function v0(c,o,u,f){const g=f-u,x=c-u;return 0===g?0:1===o?x/g:(Math.pow(o,x)-1)/(Math.pow(o,g)-1)}var Vr=Zf;class x0{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&"value"!==g.kind&&(f=g);const x=[];for(const E of o.slice(1)){const M=u.parse(E,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,x.push(M)}const w=g&&x.some(E=>io(g,E.type));return new x0(w?ir:f,x)}evaluate(o){let u,f=null,g=0;for(const x of this.args){if(g++,f=x.evaluate(o),f&&f instanceof fa&&!f.available&&(u||(u=f),f=null,g===this.args.length))return u;if(null!==f)break}return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(u=>{o.push(u.serialize())}),o}}var b0=x0;class Un{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let x=1;x<o.length-1;x+=2){const w=o[x];if("string"!=typeof w)return u.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",x);const E=u.parse(o[x+1],x+1);if(!E)return null;f.push([w,E])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,f);return g?new Un(f,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[u,f]of this.bindings)o.push(u,f.serialize());return o.push(this.result.serialize()),o}}var so=Un;class Xr{constructor(o,u,f){this.type=o,this.index=u,this.input=f}static parse(o,u){if(3!==o.length)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,Kt),g=u.parse(o[2],2,ro(u.expectedType||ir));return f&&g?new Xr(g.type.itemType,f,g):null}evaluate(o){const u=this.index.evaluate(o),f=this.input.evaluate(o);if(u<0)throw new So(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new So(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new So(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Do=Xr;class Mo{constructor(o,u){this.type=Sn,this.needle=o,this.haystack=u}static parse(o,u){if(3!==o.length)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,ir),g=u.parse(o[2],2,ir);return f&&g?Mt(f.type,[Sn,fr,Kt,Oc,ir])?new Mo(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(f.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(null==f)return!1;if(!ic(u,["boolean","string","number","null"]))throw new So(`Expected first argument to be of type boolean, string, number or null, but found ${fi(Fs(u))} instead.`);if(!ic(f,["string","array"]))throw new So(`Expected second argument to be of type array or string, but found ${fi(Fs(f))} instead.`);return f.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Th=Mo;class oo{constructor(o,u,f){this.type=Kt,this.needle=o,this.haystack=u,this.fromIndex=f}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,ir),g=u.parse(o[2],2,ir);if(!f||!g)return null;if(!Mt(f.type,[Sn,fr,Kt,Oc,ir]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(f.type)} instead`);if(4===o.length){const x=u.parse(o[3],3,Kt);return x?new oo(f,g,x):null}return new oo(f,g)}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!ic(u,["boolean","string","number","null"]))throw new So(`Expected first argument to be of type boolean, string, number or null, but found ${fi(Fs(u))} instead.`);if(!ic(f,["string","array"]))throw new So(`Expected second argument to be of type array or string, but found ${fi(Fs(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var w0=oo;class bm{constructor(o,u,f,g,x,w){this.inputType=o,this.type=u,this.input=f,this.cases=g,this.outputs=x,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&"value"!==u.expectedType.kind&&(g=u.expectedType);const x={},w=[];for(let P=2;P<o.length-1;P+=2){let N=o[P];const U=o[P+1];Array.isArray(N)||(N=[N]);const j=u.concat(P);if(0===N.length)return j.error("Expected at least one branch label.");for(const X of N){if("number"!=typeof X&&"string"!=typeof X)return j.error("Branch labels must be numbers or strings.");if("number"==typeof X&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof X&&Math.floor(X)!==X)return j.error("Numeric branch labels must be integer values.");if(f){if(j.checkSubtype(f,Fs(X)))return null}else f=Fs(X);if(void 0!==x[String(X)])return j.error("Branch labels must be unique.");x[String(X)]=w.length}const Y=u.parse(U,P,g);if(!Y)return null;g=g||Y.type,w.push(Y)}const E=u.parse(o[1],1,ir);if(!E)return null;const M=u.parse(o[o.length-1],o.length-1,g);return M?"value"!==E.type.kind&&u.concat(1).checkSubtype(f,E.type)?null:new bm(f,g,E,x,w,M):null}evaluate(o){const u=this.input.evaluate(o);return(Fs(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],g={};for(const w of u){const E=g[this.cases[w]];void 0===E?(g[this.cases[w]]=f.length,f.push([this.cases[w],[w]])):f[E][1].push(w)}const x=w=>"number"===this.inputType.kind?Number(w):w;for(const[w,E]of f)o.push(1===E.length?x(E[0]):E.map(x)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}var wm=bm;class Dl{constructor(o,u,f){this.type=o,this.branches=u,this.otherwise=f}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&"value"!==u.expectedType.kind&&(f=u.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const E=u.parse(o[w],w,Sn);if(!E)return null;const M=u.parse(o[w+1],w+1,f);if(!M)return null;g.push([E,M]),f=f||M.type}const x=u.parse(o[o.length-1],o.length-1,f);return x?new Dl(f,g,x):null}evaluate(o){for(const[u,f]of this.branches)if(u.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,f]of this.branches)o(u),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(u=>{o.push(u.serialize())}),o}}var Dn=Dl;class Kn{constructor(o,u,f,g){this.type=o,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,ir),g=u.parse(o[2],2,Kt);if(!f||!g)return null;if(!Mt(f.type,[ro(ir),fr,ir]))return u.error(`Expected first argument to be of type array or string, but found ${fi(f.type)} instead`);if(4===o.length){const x=u.parse(o[3],3,Kt);return x?new Kn(f.type,f,g,x):null}return new Kn(f.type,f,g)}evaluate(o){const u=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!ic(u,["string","array"]))throw new So(`Expected first argument to be of type array or string, but found ${fi(Fs(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return u.slice(f,g)}return u.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Xi=Kn;function Ia(c,o){return"=="===c||"!="===c?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function Su(c,o,u,f){return 0===f.compare(o,u)}function us(c,o,u){const f="=="!==c&&"!="!==c;return class rW{constructor(x,w,E){this.type=Sn,this.lhs=x,this.rhs=w,this.collator=E,this.hasUntypedArgument="value"===x.type.kind||"value"===w.type.kind}static parse(x,w){if(3!==x.length&&4!==x.length)return w.error("Expected two or three arguments.");const E=x[0];let M=w.parse(x[1],1,ir);if(!M)return null;if(!Ia(E,M.type))return w.concat(1).error(`"${E}" comparisons are not supported for type '${fi(M.type)}'.`);let P=w.parse(x[2],2,ir);if(!P)return null;if(!Ia(E,P.type))return w.concat(2).error(`"${E}" comparisons are not supported for type '${fi(P.type)}'.`);if(M.type.kind!==P.type.kind&&"value"!==M.type.kind&&"value"!==P.type.kind)return w.error(`Cannot compare types '${fi(M.type)}' and '${fi(P.type)}'.`);f&&("value"===M.type.kind&&"value"!==P.type.kind?M=new Cu(P.type,[M]):"value"!==M.type.kind&&"value"===P.type.kind&&(P=new Cu(M.type,[P])));let N=null;if(4===x.length){if("string"!==M.type.kind&&"string"!==P.type.kind&&"value"!==M.type.kind&&"value"!==P.type.kind)return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(x[3],3,zf),!N)return null}return new rW(M,P,N)}evaluate(x){const w=this.lhs.evaluate(x),E=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const M=Fs(w),P=Fs(E);if(M.kind!==P.kind||"string"!==M.kind&&"number"!==M.kind)throw new So(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${M.kind}, ${P.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=Fs(w),P=Fs(E);if("string"!==M.kind||"string"!==P.kind)return o(x,w,E)}return this.collator?u(x,w,E,this.collator.evaluate(x)):o(x,w,E)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}serialize(){const x=[c];return this.eachChild(w=>{x.push(w.serialize())}),x}}}const wd=us("==",function(c,o,u){return o===u},Su),es=us("!=",function(c,o,u){return o!==u},function(c,o,u,f){return!Su(0,o,u,f)}),Kf=us("<",function(c,o,u){return o<u},function(c,o,u,f){return f.compare(o,u)<0}),Jf=us(">",function(c,o,u){return o>u},function(c,o,u,f){return f.compare(o,u)>0}),yr=us("<=",function(c,o,u){return o<=u},function(c,o,u,f){return f.compare(o,u)<=0}),C0=us(">=",function(c,o,u){return o>=u},function(c,o,u,f){return f.compare(o,u)>=0});class Eh{constructor(o,u,f,g,x,w){this.type=fr,this.number=o,this.locale=u,this.currency=f,this.unit=g,this.minFractionDigits=x,this.maxFractionDigits=w}static parse(o,u){if(3!==o.length)return u.error("Expected two arguments.");const f=u.parse(o[1],1,Kt);if(!f)return null;const g=o[2];if("object"!=typeof g||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=u.parse(g.locale,1,fr),!x))return null;let w=null;if(g.currency&&(w=u.parse(g.currency,1,fr),!w))return null;let E=null;if(g.unit&&(E=u.parse(g.unit,1,fr),!E))return null;let M=null;if(g["min-fraction-digits"]&&(M=u.parse(g["min-fraction-digits"],1,Kt),!M))return null;let P=null;return g["max-fraction-digits"]&&(P=u.parse(g["max-fraction-digits"],1,Kt),!P)?null:new Eh(f,x,w,E,M,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Cm{constructor(o){this.type=Kt,this.input=o}static parse(o,u){if(2!==o.length)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=u.parse(o[1],1);return f?"array"!==f.type.kind&&"string"!==f.type.kind&&"value"!==f.type.kind?u.error(`Expected argument of type string or array, but found ${fi(f.type)} instead.`):new Cm(f):null}evaluate(o){const u=this.input.evaluate(o);if("string"==typeof u||Array.isArray(u))return u.length;throw new So(`Expected value to be of type string or array, but found ${fi(Fs(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(u=>{o.push(u.serialize())}),o}}const Sh={"==":wd,"!=":es,">":Jf,"<":Kf,">=":C0,"<=":yr,array:Cu,at:Do,boolean:Cu,case:Dn,coalesce:b0,collator:ym,format:_m,image:d0,in:Th,"index-of":w0,interpolate:Vr,"interpolate-hcl":Vr,"interpolate-lab":Vr,length:Cm,let:so,literal:jf,match:wm,number:Cu,"number-format":Eh,object:Cu,slice:Xi,step:yd,string:Cu,"to-boolean":si,"to-color":si,"to-number":si,"to-string":si,var:Ch,within:_d};function ao(c,[o,u,f,g]){o=o.evaluate(c),u=u.evaluate(c),f=f.evaluate(c);const x=g?g.evaluate(c):1,w=Ix(o,u,f,x);if(w)throw new So(w);return new ls(o/255*x,u/255*x,f/255*x,x)}function Cd(c,o){return c in o}function Du(c,o){const u=o[c];return void 0===u?null:u}function lo(c){return{type:c}}Tu.register(Sh,{error:[{kind:"error"},[fr],(c,[o])=>{throw new So(o.evaluate(c))}],typeof:[fr,[ir],(c,[o])=>fi(Fs(o.evaluate(c)))],"to-rgba":[ro(Kt,4),[Za],(c,[o])=>o.evaluate(c).toArray()],rgb:[Za,[Kt,Kt,Kt],ao],rgba:[Za,[Kt,Kt,Kt,Kt],ao],has:{type:Sn,overloads:[[[fr],(c,[o])=>Cd(o.evaluate(c),c.properties())],[[fr,ii],(c,[o,u])=>Cd(o.evaluate(c),u.evaluate(c))]]},get:{type:ir,overloads:[[[fr],(c,[o])=>Du(o.evaluate(c),c.properties())],[[fr,ii],(c,[o,u])=>Du(o.evaluate(c),u.evaluate(c))]]},"feature-state":[ir,[fr],(c,[o])=>Du(o.evaluate(c),c.featureState||{})],properties:[ii,[],c=>c.properties()],"geometry-type":[fr,[],c=>c.geometryType()],id:[ir,[],c=>c.id()],zoom:[Kt,[],c=>c.globals.zoom],pitch:[Kt,[],c=>c.globals.pitch||0],"distance-from-center":[Kt,[],c=>c.distanceFromCenter()],"heatmap-density":[Kt,[],c=>c.globals.heatmapDensity||0],"line-progress":[Kt,[],c=>c.globals.lineProgress||0],"sky-radial-progress":[Kt,[],c=>c.globals.skyRadialProgress||0],accumulated:[ir,[],c=>void 0===c.globals.accumulated?null:c.globals.accumulated],"+":[Kt,lo(Kt),(c,o)=>{let u=0;for(const f of o)u+=f.evaluate(c);return u}],"*":[Kt,lo(Kt),(c,o)=>{let u=1;for(const f of o)u*=f.evaluate(c);return u}],"-":{type:Kt,overloads:[[[Kt,Kt],(c,[o,u])=>o.evaluate(c)-u.evaluate(c)],[[Kt],(c,[o])=>-o.evaluate(c)]]},"/":[Kt,[Kt,Kt],(c,[o,u])=>o.evaluate(c)/u.evaluate(c)],"%":[Kt,[Kt,Kt],(c,[o,u])=>o.evaluate(c)%u.evaluate(c)],ln2:[Kt,[],()=>Math.LN2],pi:[Kt,[],()=>Math.PI],e:[Kt,[],()=>Math.E],"^":[Kt,[Kt,Kt],(c,[o,u])=>Math.pow(o.evaluate(c),u.evaluate(c))],sqrt:[Kt,[Kt],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[Kt,[Kt],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[Kt,[Kt],(c,[o])=>Math.log(o.evaluate(c))],log2:[Kt,[Kt],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[Kt,[Kt],(c,[o])=>Math.sin(o.evaluate(c))],cos:[Kt,[Kt],(c,[o])=>Math.cos(o.evaluate(c))],tan:[Kt,[Kt],(c,[o])=>Math.tan(o.evaluate(c))],asin:[Kt,[Kt],(c,[o])=>Math.asin(o.evaluate(c))],acos:[Kt,[Kt],(c,[o])=>Math.acos(o.evaluate(c))],atan:[Kt,[Kt],(c,[o])=>Math.atan(o.evaluate(c))],min:[Kt,lo(Kt),(c,o)=>Math.min(...o.map(u=>u.evaluate(c)))],max:[Kt,lo(Kt),(c,o)=>Math.max(...o.map(u=>u.evaluate(c)))],abs:[Kt,[Kt],(c,[o])=>Math.abs(o.evaluate(c))],round:[Kt,[Kt],(c,[o])=>{const u=o.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Kt,[Kt],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[Kt,[Kt],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[Sn,[fr,ir],(c,[o,u])=>c.properties()[o.value]===u.value],"filter-id-==":[Sn,[ir],(c,[o])=>c.id()===o.value],"filter-type-==":[Sn,[fr],(c,[o])=>c.geometryType()===o.value],"filter-<":[Sn,[fr,ir],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[Sn,[ir],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u<f}],"filter->":[Sn,[fr,ir],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[Sn,[ir],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u>f}],"filter-<=":[Sn,[fr,ir],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[Sn,[ir],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u<=f}],"filter->=":[Sn,[fr,ir],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[Sn,[ir],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u>=f}],"filter-has":[Sn,[ir],(c,[o])=>o.value in c.properties()],"filter-has-id":[Sn,[],c=>null!==c.id()&&void 0!==c.id()],"filter-type-in":[Sn,[ro(fr)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[Sn,[ro(ir)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[Sn,[fr,ro(ir)],(c,[o,u])=>u.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[Sn,[fr,ro(ir)],(c,[o,u])=>function(f,g,x,w){for(;x<=w;){const E=x+w>>1;if(g[E]===f)return!0;g[E]>f?w=E-1:x=E+1}return!1}(c.properties()[o.value],u.value,0,u.value.length-1)],all:{type:Sn,overloads:[[[Sn,Sn],(c,[o,u])=>o.evaluate(c)&&u.evaluate(c)],[lo(Sn),(c,o)=>{for(const u of o)if(!u.evaluate(c))return!1;return!0}]]},any:{type:Sn,overloads:[[[Sn,Sn],(c,[o,u])=>o.evaluate(c)||u.evaluate(c)],[lo(Sn),(c,o)=>{for(const u of o)if(u.evaluate(c))return!0;return!1}]]},"!":[Sn,[Sn],(c,[o])=>!o.evaluate(c)],"is-supported-script":[Sn,[fr],(c,[o])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(o.evaluate(c))}],upcase:[fr,[fr],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[fr,[fr],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[fr,lo(ir),(c,o)=>o.map(u=>Uf(u.evaluate(c))).join("")],"resolved-locale":[fr,[zf],(c,[o])=>o.evaluate(c).resolvedLocale()]});var oc=Sh;function Td(c){return{result:"success",value:c}}function vi(c){return{result:"error",value:c}}function Qf(c){return"data-driven"===c["property-type"]}function Ml(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function ep(c){return!!c.expression&&c.expression.interpolated}function vr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":null===c?"null":typeof c}function Dh(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}function Ed(c){return c}function co(c,o){const u="color"===o.type,f=c.stops&&"object"==typeof c.stops[0][0],g=f||!(f||void 0!==c.property),x=c.type||(ep(o)?"exponential":"interval");if(u&&((c=Pc({},c)).stops&&(c.stops=c.stops.map(P=>[P[0],ls.parse(P[1])])),c.default=ls.parse(c.default?c.default:o.default)),c.colorSpace&&"rgb"!==c.colorSpace&&!$y[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let w,E,M;if("exponential"===x)w=Sd;else if("interval"===x)w=Qa;else if("categorical"===x){w=Ko,E=Object.create(null);for(const P of c.stops)E[P[0]]=P[1];M=typeof c.stops[0][0]}else{if("identity"!==x)throw new Error(`Unknown function type "${x}"`);w=Dd}if(f){const P={},N=[];for(let Y=0;Y<c.stops.length;Y++){const X=c.stops[Y],ee=X[0].zoom;void 0===P[ee]&&(P[ee]={zoom:ee,type:c.type,property:c.property,default:c.default,stops:[]},N.push(ee)),P[ee].stops.push([X[0].value,X[1]])}const U=[];for(const Y of N)U.push([P[Y].zoom,co(P[Y],o)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Vr.interpolationFactor.bind(void 0,j),zoomStops:U.map(Y=>Y[0]),evaluate:({zoom:Y},X)=>Sd({stops:U,base:c.base},o,Y).evaluate(Y,X)}}if(g){const P="exponential"===x?{name:"exponential",base:void 0!==c.base?c.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:Vr.interpolationFactor.bind(void 0,P),zoomStops:c.stops.map(N=>N[0]),evaluate:({zoom:N})=>w(c,o,N,E,M)}}return{kind:"source",evaluate(P,N){const U=N&&N.properties?N.properties[c.property]:void 0;return void 0===U?Tm(c.default,o.default):w(c,o,U,E,M)}}}function Tm(c,o,u){return void 0!==c?c:void 0!==o?o:void 0!==u?u:void 0}function Ko(c,o,u,f,g){return Tm(typeof u===g?f[u]:void 0,c.default,o.default)}function Qa(c,o,u){if("number"!==vr(u))return Tm(c.default,o.default);const f=c.stops.length;if(1===f||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[f-1][0])return c.stops[f-1][1];const g=Eu(c.stops.map(x=>x[0]),u);return c.stops[g][1]}function Sd(c,o,u){const f=void 0!==c.base?c.base:1;if("number"!==vr(u))return Tm(c.default,o.default);const g=c.stops.length;if(1===g||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const x=Eu(c.stops.map(N=>N[0]),u),w=function(N,U,j,Y){const X=Y-j,ee=N-j;return 0===X?0:1===U?ee/X:(Math.pow(U,ee)-1)/(Math.pow(U,X)-1)}(u,f,c.stops[x][0],c.stops[x+1][0]),E=c.stops[x][1],M=c.stops[x+1][1];let P=Rc[o.type]||Ed;if(c.colorSpace&&"rgb"!==c.colorSpace){const N=$y[c.colorSpace];P=(U,j)=>N.reverse(N.interpolate(N.forward(U),N.forward(j),w))}return"function"==typeof E.evaluate?{evaluate(...N){const U=E.evaluate.apply(void 0,N),j=M.evaluate.apply(void 0,N);if(void 0!==U&&void 0!==j)return P(U,j,w)}}:P(E,M,w)}function Dd(c,o,u){return"color"===o.type?u=ls.parse(u):"formatted"===o.type?u=cs.fromString(u.toString()):"resolvedImage"===o.type?u=fa.fromString(u.toString()):vr(u)===o.type||"enum"===o.type&&o.values[u]||(u=void 0),Tm(u,c.default,o.default)}class Mh{constructor(o,u){var f;this.expression=o,this._warningHistory={},this._evaluator=new $f,this._defaultValue=u?"color"===(f=u).type&&(Dh(f.default)||Array.isArray(f.default))?new ls(0,0,0,0):"color"===f.type?ls.parse(f.default)||null:void 0===f.default?null:f.default:null,this._enumValues=u&&"enum"===u.type?u.values:null}evaluateWithoutErrorHandling(o,u,f,g,x,w,E,M){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(o,u,f,g,x,w,E,M){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=M||null;try{const P=this.expression.evaluate(this._evaluator);if(null==P||"number"==typeof P&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new So(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function ko(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in oc}function Md(c,o){const u=new g0(oc,[],o?function(g){const x={color:Za,string:fr,number:Kt,enum:fr,boolean:Sn,formatted:Rr,resolvedImage:Vn};return"array"===g.type?ro(x[g.value]||ir,g.length):x[g.type]}(o):void 0),f=u.parse(c,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return f?Td(new Mh(f,o)):vi(u.errors)}class T0{constructor(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent="constant"!==o&&!Gf(u.expression)}evaluateWithoutErrorHandling(o,u,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,w)}evaluate(o,u,f,g,x,w){return this._styleExpression.evaluate(o,u,f,g,x,w)}}class kh{constructor(o,u,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=u,this.isStateDependent="camera"!==o&&!Gf(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,w)}evaluate(o,u,f,g,x,w){return this._styleExpression.evaluate(o,u,f,g,x,w)}interpolationFactor(o,u,f){return this.interpolationType?Vr.interpolationFactor(this.interpolationType,o,u,f):0}}function Ah(c,o){if("error"===(c=Md(c,o)).result)return c;const u=c.value.expression,f=Wf(u);if(!f&&!Qf(o))return vi([new rc("","data expressions not supported")]);const g=xm(u,["zoom","pitch","distance-from-center"]);if(!g&&!Ml(o))return vi([new rc("","zoom expressions not supported")]);const x=Sm(u);return x||g?x instanceof rc?vi([x]):x instanceof Vr&&!ep(o)?vi([new rc("",'"interpolate" expressions cannot be used with this property')]):Td(x?new kh(f?"camera":"composite",c.value,x.labels,x instanceof Vr?x.interpolation:void 0):new T0(f?"constant":"source",c.value)):vi([new rc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Em{constructor(o,u){this._parameters=o,this._specification=u,Pc(this,co(this._parameters,this._specification))}static deserialize(o){return new Em(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Sm(c){let o=null;if(c instanceof so)o=Sm(c.result);else if(c instanceof b0){for(const u of c.args)if(o=Sm(u),o)break}else(c instanceof yd||c instanceof Vr)&&c.input instanceof Tu&&"zoom"===c.input.name&&(o=c);return o instanceof rc||c.eachChild(u=>{const f=Sm(u);f instanceof rc?o=f:!o&&f?o=new rc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new rc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}class on{constructor(o,u,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),null!=u&&u.__line__&&(this.line=u.__line__)}}function kl(c){const o=c.key,u=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},x=c.style,w=c.styleSpec;let E=[];const M=vr(u);if("object"!==M)return[new on(o,u,`object expected, ${M} found`)];for(const P in u){const N=P.split(".")[0];let j;g[N]?j=g[N]:f[N]?j=ds:g["*"]?j=g["*"]:f["*"]&&(j=ds),j?E=E.concat(j({key:(o&&`${o}.`)+P,value:u[P],valueSpec:f[N]||f["*"],style:x,styleSpec:w,object:u,objectKey:P},u)):E.push(new on(o,u[P],`unknown property "${P}"`))}for(const P in f)g[P]||f[P].required&&void 0===f[P].default&&void 0===u[P]&&E.push(new on(o,u,`missing required property "${P}"`));return E}function Ox(c){const o=c.value,u=c.valueSpec,f=c.style,g=c.styleSpec,x=c.key,w=c.arrayElementValidator||ds;if("array"!==vr(o))return[new on(x,o,`array expected, ${vr(o)} found`)];if(u.length&&o.length!==u.length)return[new on(x,o,`array length ${u.length} expected, length ${o.length} found`)];if(u["min-length"]&&o.length<u["min-length"])return[new on(x,o,`array length at least ${u["min-length"]} expected, length ${o.length} found`)];let E={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};g.$version<7&&(E.function=u.function),"object"===vr(u.value)&&(E=u.value);let M=[];for(let P=0;P<o.length;P++)M=M.concat(w({array:o,arrayIndex:P,value:o[P],valueSpec:E,style:f,styleSpec:g,key:`${x}[${P}]`}));return M}function Wy(c){const o=c.key,u=c.value,f=c.valueSpec;let g=vr(u);if("number"===g&&u!=u&&(g="NaN"),"number"!==g)return[new on(o,u,`number expected, ${g} found`)];if("minimum"in f){let x=f.minimum;if("array"===vr(f.minimum)&&(x=f.minimum[c.arrayIndex]),u<x)return[new on(o,u,`${u} is less than the minimum value ${x}`)]}if("maximum"in f){let x=f.maximum;if("array"===vr(f.maximum)&&(x=f.maximum[c.arrayIndex]),u>x)return[new on(o,u,`${u} is greater than the maximum value ${x}`)]}return[]}function Dm(c){const o=c.valueSpec,u=os(c.value.type);let f,g,x,w={};const E="categorical"!==u&&void 0===c.value.property,M=!E,P="array"===vr(c.value.stops)&&"array"===vr(c.value.stops[0])&&"object"===vr(c.value.stops[0][0]),N=kl({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Y){if("identity"===u)return[new on(Y.key,Y.value,'identity function may not have a "stops" property')];let X=[];const ee=Y.value;return X=X.concat(Ox({key:Y.key,value:ee,valueSpec:Y.valueSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:U})),"array"===vr(ee)&&0===ee.length&&X.push(new on(Y.key,ee,"array must have at least one stop")),X},default:function(Y){return ds({key:Y.key,value:Y.value,valueSpec:o,style:Y.style,styleSpec:Y.styleSpec})}}});return"identity"===u&&E&&N.push(new on(c.key,c.value,'missing required property "property"')),"identity"===u||c.value.stops||N.push(new on(c.key,c.value,'missing required property "stops"')),"exponential"===u&&c.valueSpec.expression&&!ep(c.valueSpec)&&N.push(new on(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(M&&!Qf(c.valueSpec)?N.push(new on(c.key,c.value,"property functions not supported")):E&&!Ml(c.valueSpec)&&N.push(new on(c.key,c.value,"zoom functions not supported"))),"categorical"!==u&&!P||void 0!==c.value.property||N.push(new on(c.key,c.value,'"property" property is required')),N;function U(Y){let X=[];const ee=Y.value,se=Y.key;if("array"!==vr(ee))return[new on(se,ee,`array expected, ${vr(ee)} found`)];if(2!==ee.length)return[new on(se,ee,`array length 2 expected, length ${ee.length} found`)];if(P){if("object"!==vr(ee[0]))return[new on(se,ee,`object expected, ${vr(ee[0])} found`)];if(void 0===ee[0].zoom)return[new on(se,ee,"object stop key must have zoom")];if(void 0===ee[0].value)return[new on(se,ee,"object stop key must have value")];const xe=os(ee[0].zoom);if("number"!=typeof xe)return[new on(se,ee[0].zoom,"stop zoom values must be numbers")];if(x&&x>xe)return[new on(se,ee[0].zoom,"stop zoom values must appear in ascending order")];xe!==x&&(x=xe,g=void 0,w={}),X=X.concat(kl({key:`${se}[0]`,value:ee[0],valueSpec:{zoom:{}},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Wy,value:j}}))}else X=X.concat(j({key:`${se}[0]`,value:ee[0],valueSpec:{},style:Y.style,styleSpec:Y.styleSpec},ee));return ko(wu(ee[1]))?X.concat([new on(`${se}[1]`,ee[1],"expressions are not allowed in function stops.")]):X.concat(ds({key:`${se}[1]`,value:ee[1],valueSpec:o,style:Y.style,styleSpec:Y.styleSpec}))}function j(Y,X){const ee=vr(Y.value),se=os(Y.value),xe=null!==Y.value?Y.value:X;if(f){if(ee!==f)return[new on(Y.key,xe,`${ee} stop domain type must match previous stop domain type ${f}`)]}else f=ee;if("number"!==ee&&"string"!==ee&&"boolean"!==ee&&"number"!=typeof se&&"string"!=typeof se&&"boolean"!=typeof se)return[new on(Y.key,xe,"stop domain value must be a number, string, or boolean")];if("number"!==ee&&"categorical"!==u){let ke=`number expected, ${ee} found`;return Qf(o)&&void 0===u&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new on(Y.key,xe,ke)]}return"categorical"!==u||"number"!==ee||"number"==typeof se&&isFinite(se)&&Math.floor(se)===se?"categorical"!==u&&"number"===ee&&"number"==typeof se&&"number"==typeof g&&void 0!==g&&se<g?[new on(Y.key,xe,"stop domain values must appear in ascending order")]:(g=se,"categorical"===u&&se in w?[new on(Y.key,xe,"stop domain values must be unique")]:(w[se]=!0,[])):[new on(Y.key,xe,`integer expected, found ${String(se)}`)]}}function tp(c){const o=("property"===c.expressionContext?Ah:Md)(wu(c.value),c.valueSpec);if("error"===o.result)return o.value.map(f=>new on(`${c.key}${f.key}`,c.value,f.message));const u=o.value.expression||o.value._styleExpression.expression;if("property"===c.expressionContext&&"text-font"===c.propertyKey&&!u.outputDefined())return[new on(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===c.expressionContext&&"layout"===c.propertyType&&!Gf(u))return[new on(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===c.expressionContext)return Lx(u,c);if(c.expressionContext&&0===c.expressionContext.indexOf("cluster")){if(!xm(u,["zoom","feature-state"]))return[new on(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===c.expressionContext&&!Wf(u))return[new on(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lx(c,o){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const g of o.valueSpec.expression.parameters)u.delete(g);if(0===u.size)return[];const f=[];return c instanceof Tu&&u.has(c.name)?[new on(o.key,o.value,`["${c.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(c.eachChild(g=>{f.push(...Lx(g,o))}),f)}function E0(c){const o=c.key,u=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?-1===f.values.indexOf(os(u))&&g.push(new on(o,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):-1===Object.keys(f.values).indexOf(os(u))&&g.push(new on(o,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function Gy(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Gy(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}function S0(c,o="fill"){if(null==c)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Gy(c)||(c=Mm(c));const u=c;let f=!0;try{f=function(P){if(!uo(P))return P;let N=wu(P);return Ad(N),N=kd(N),N}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(u,null,2)}\n        `)}const g=mt[`filter_${o}`],x=Md(f,g);let w=null;if("error"===x.result)throw new Error(x.value.map(P=>`${P.key}: ${P.message}`).join(", "));w=(P,N,U)=>x.value.evaluate(P,N,{},U);let E=null,M=null;if(f!==u){const P=Md(u,g);if("error"===P.result)throw new Error(P.value.map(N=>`${N.key}: ${N.message}`).join(", "));E=(N,U,j,Y,X)=>P.value.evaluate(N,U,{},j,void 0,void 0,Y,X),M=!Wf(P.value.expression)}return{filter:w,dynamicFilter:E||void 0,needGeometry:Mu(f),needFeature:!!M}}function kd(c){if(!Array.isArray(c))return c;const o=function(u){if(D0.has(u[0]))for(let f=1;f<u.length;f++)if(uo(u[f]))return!0;return u}(c);return!0===o?o:o.map(u=>kd(u))}function Ad(c){let o=!1;const u=[];if("case"===c[0]){for(let f=1;f<c.length-1;f+=2)o=o||uo(c[f]),u.push(c[f+1]);u.push(c[c.length-1])}else if("match"===c[0]){o=o||uo(c[1]);for(let f=2;f<c.length-1;f+=2)u.push(c[f+1]);u.push(c[c.length-1])}else if("step"===c[0]){o=o||uo(c[1]);for(let f=1;f<c.length-1;f+=2)u.push(c[f+1])}o&&(c.length=0,c.push("any",...u));for(let f=1;f<c.length;f++)Ad(c[f])}function uo(c){if(!Array.isArray(c))return!1;if("pitch"===(o=c[0])||"distance-from-center"===o)return!0;var o;for(let u=1;u<c.length;u++)if(uo(c[u]))return!0;return!1}const D0=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function IC(c,o){return c<o?-1:c>o?1:0}function Mu(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(let o=1;o<c.length;o++)if(Mu(c[o]))return!0;return!1}function Mm(c){if(!c)return!0;const o=c[0];return c.length<=1?"any"!==o:"=="===o?ho(c[1],c[2],"=="):"!="===o?Id(ho(c[1],c[2],"==")):"<"===o||">"===o||"<="===o||">="===o?ho(c[1],c[2],o):"any"===o?(u=c.slice(1),["any"].concat(u.map(Mm))):"all"===o?["all"].concat(c.slice(1).map(Mm)):"none"===o?["all"].concat(c.slice(1).map(Mm).map(Id)):"in"===o?np(c[1],c.slice(2)):"!in"===o?Id(np(c[1],c.slice(2))):"has"===o?Yy(c[1]):"!has"===o?Id(Yy(c[1])):"within"!==o||c;var u}function ho(c,o,u){switch(c){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,c,o]}}function np(c,o){if(0===o.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",c,["literal",o.sort(IC)]]:["filter-in-small",c,["literal",o]]}}function Yy(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Id(c){return["!",c]}function km(c){return Gy(wu(c.value))?tp(Pc({},c,{expressionContext:"filter",valueSpec:c.styleSpec[`filter_${c.layerType||"fill"}`]})):M0(c)}function M0(c){const o=c.value,u=c.key;if("array"!==vr(o))return[new on(u,o,`array expected, ${vr(o)} found`)];const f=c.styleSpec;let g,x=[];if(o.length<1)return[new on(u,o,"filter array must have at least 1 element")];switch(x=x.concat(E0({key:`${u}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),os(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===os(o[1])&&x.push(new on(u,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&x.push(new on(u,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=vr(o[1]),"string"!==g&&x.push(new on(`${u}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=vr(o[w]),"$type"===os(o[1])?x=x.concat(E0({key:`${u}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==g&&"number"!==g&&"boolean"!==g&&x.push(new on(`${u}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)x=x.concat(M0({key:`${u}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=vr(o[1]),2!==o.length?x.push(new on(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==g&&x.push(new on(`${u}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=vr(o[1]),2!==o.length?x.push(new on(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==g&&x.push(new on(`${u}[1]`,o[1],`object expected, ${g} found`))}return x}function Am(c,o){const u=c.key,f=c.style,g=c.styleSpec,x=c.value,w=c.objectKey,E=g[`${o}_${c.layerType}`];if(!E)return[];const M=w.match(/^(.*)-transition$/);if("paint"===o&&M&&E[M[1]]&&E[M[1]].transition)return ds({key:u,value:x,valueSpec:g.transition,style:f,styleSpec:g});const P=c.valueSpec||E[w];if(!P)return[new on(u,x,`unknown property "${w}"`)];let N;if("string"===vr(x)&&Qf(P)&&!P.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new on(u,x,`"${w}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const U=[];return"symbol"===c.layerType&&("text-field"===w&&f&&!f.glyphs&&U.push(new on(u,x,'use of "text-field" requires a style "glyphs" property')),"text-font"===w&&Dh(wu(x))&&"identity"===os(x.type)&&U.push(new on(u,x,'"text-font" does not support identity functions'))),U.concat(ds({key:c.key,value:x,valueSpec:P,style:f,styleSpec:g,expressionContext:"property",propertyType:o,propertyKey:w}))}function Im(c){return Am(c,"paint")}function k0(c){return Am(c,"layout")}function ma(c){let o=[];const u=c.value,f=c.key,g=c.style,x=c.styleSpec;u.type||u.ref||o.push(new on(f,u,'either "type" or "ref" is required'));let w=os(u.type);const E=os(u.ref);if(u.id){const M=os(u.id);for(let P=0;P<c.arrayIndex;P++){const N=g.layers[P];os(N.id)===M&&o.push(new on(f,u.id,`duplicate layer id "${u.id}", previously used at line ${N.id.__line__}`))}}if("ref"in u){let M;["type","source","source-layer","filter","layout"].forEach(P=>{P in u&&o.push(new on(f,u[P],`"${P}" is prohibited for ref layers`))}),g.layers.forEach(P=>{os(P.id)===E&&(M=P)}),M?M.ref?o.push(new on(f,u.ref,"ref cannot reference another ref layer")):w=os(M.type):"string"==typeof E&&o.push(new on(f,u.ref,`ref layer "${E}" not found`))}else if("background"!==w&&"sky"!==w)if(u.source){const M=g.sources&&g.sources[u.source],P=M&&os(M.type);M?"vector"===P&&"raster"===w?o.push(new on(f,u.source,`layer "${u.id}" requires a raster source`)):"raster"===P&&"raster"!==w?o.push(new on(f,u.source,`layer "${u.id}" requires a vector source`)):"vector"!==P||u["source-layer"]?"raster-dem"===P&&"hillshade"!==w?o.push(new on(f,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==w||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||"geojson"===P&&M.lineMetrics||o.push(new on(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new on(f,u,`layer "${u.id}" must specify a "source-layer"`)):o.push(new on(f,u.source,`source "${u.source}" not found`))}else o.push(new on(f,u,'missing required property "source"'));return o=o.concat(kl({key:f,value:u,valueSpec:x.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ds({key:`${f}.type`,value:u.type,valueSpec:x.layer.type,style:c.style,styleSpec:c.styleSpec,object:u,objectKey:"type"}),filter:M=>km(Pc({layerType:w},M)),layout:M=>kl({layer:u,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":P=>k0(Pc({layerType:w},P))}}),paint:M=>kl({layer:u,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":P=>Im(Pc({layerType:w},P))}})}})),o}function Ih(c){const o=c.value,u=c.key,f=vr(o);return"string"!==f?[new on(u,o,`string expected, ${f} found`)]:[]}const rp={promoteId:function({key:c,value:o}){if("string"===vr(o))return Ih({key:c,value:o});{const u=[];for(const f in o)u.push(...Ih({key:`${c}.${f}`,value:o[f]}));return u}}};function hs(c){const o=c.value,u=c.key,f=c.styleSpec,g=c.style;if(!o.type)return[new on(u,o,'"type" is required')];const x=os(o.type);let w;switch(x){case"vector":case"raster":case"raster-dem":return w=kl({key:u,value:o,valueSpec:f[`source_${x.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:rp}),w;case"geojson":if(w=kl({key:u,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,objectElementValidators:rp}),o.cluster)for(const E in o.clusterProperties){const[M,P]=o.clusterProperties[E],N="string"==typeof M?[M,["accumulated"],["get",E]]:M;w.push(...tp({key:`${u}.${E}.map`,value:P,expressionContext:"cluster-map"})),w.push(...tp({key:`${u}.${E}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return kl({key:u,value:o,valueSpec:f.source_video,style:g,styleSpec:f});case"image":return kl({key:u,value:o,valueSpec:f.source_image,style:g,styleSpec:f});case"canvas":return[new on(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return E0({key:`${u}.type`,value:o.type,valueSpec:{values:qy(f)},style:g,styleSpec:f})}}function qy(c){return c.source.reduce((o,u)=>{const f=c[u];return"enum"===f.type.type&&(o=o.concat(Object.keys(f.type.values))),o},[])}function ip(c){const o=c.value,u=c.styleSpec,f=u.light,g=c.style;let x=[];const w=vr(o);if(void 0===o)return x;if("object"!==w)return x=x.concat([new on("light",o,`object expected, ${w} found`)]),x;for(const E in o){const M=E.match(/^(.*)-transition$/);x=x.concat(M&&f[M[1]]&&f[M[1]].transition?ds({key:E,value:o[E],valueSpec:u.transition,style:g,styleSpec:u}):f[E]?ds({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:u}):[new on(E,o[E],`unknown property "${E}"`)])}return x}function Jo(c){const o=c.value,u=c.key,f=c.style,g=c.styleSpec,x=g.terrain;let w=[];const E=vr(o);if(void 0===o)return w;if("object"!==E)return w=w.concat([new on("terrain",o,`object expected, ${E} found`)]),w;for(const M in o){const P=M.match(/^(.*)-transition$/);w=w.concat(P&&x[P[1]]&&x[P[1]].transition?ds({key:M,value:o[M],valueSpec:g.transition,style:f,styleSpec:g}):x[M]?ds({key:M,value:o[M],valueSpec:x[M],style:f,styleSpec:g}):[new on(M,o[M],`unknown property "${M}"`)])}if(o.source){const M=f.sources&&f.sources[o.source],P=M&&os(M.type);M?"raster-dem"!==P&&w.push(new on(u,o.source,`terrain cannot be used with a source of type ${String(P)}, it only be used with a "raster-dem" source type`)):w.push(new on(u,o.source,`source "${o.source}" not found`))}else w.push(new on(u,o,'terrain is missing required property "source"'));return w}function Xy(c){const o=c.value,u=c.style,f=c.styleSpec,g=f.fog;let x=[];const w=vr(o);if(void 0===o)return x;if("object"!==w)return x=x.concat([new on("fog",o,`object expected, ${w} found`)]),x;for(const E in o){const M=E.match(/^(.*)-transition$/);x=x.concat(M&&g[M[1]]&&g[M[1]].transition?ds({key:E,value:o[E],valueSpec:f.transition,style:u,styleSpec:f}):g[E]?ds({key:E,value:o[E],valueSpec:g[E],style:u,styleSpec:f}):[new on(E,o[E],`unknown property "${E}"`)])}return x}const sp={"*":()=>[],array:Ox,boolean:function(c){const o=c.value,u=c.key,f=vr(o);return"boolean"!==f?[new on(u,o,`boolean expected, ${f} found`)]:[]},number:Wy,color:function(c){const o=c.key,u=c.value,f=vr(u);return"string"!==f?[new on(o,u,`color expected, ${f} found`)]:null===nr(u)?[new on(o,u,`color expected, "${u}" found`)]:[]},enum:E0,filter:km,function:Dm,layer:ma,object:kl,source:hs,light:ip,terrain:Jo,fog:Xy,string:Ih,formatted:function(c){return 0===Ih(c).length?[]:tp(c)},resolvedImage:function(c){return 0===Ih(c).length?[]:tp(c)},projection:function(c){const o=c.value,u=c.styleSpec,f=u.projection,g=c.style;let x=[];const w=vr(o);if("object"===w)for(const E in o)x=x.concat(ds({key:E,value:o[E],valueSpec:f[E],style:g,styleSpec:u}));else"string"!==w&&(x=x.concat([new on("projection",o,`object or string expected, ${w} found`)]));return x}};function ds(c){const o=c.value,u=c.valueSpec,f=c.styleSpec;return u.expression&&Dh(os(o))?Dm(c):u.expression&&ko(wu(o))?tp(c):u.type&&sp[u.type]?sp[u.type](c):kl(Pc({},c,{valueSpec:u.type?f[u.type]:u}))}function Pa(c){const o=c.value,u=c.key,f=Ih(c);return f.length||(-1===o.indexOf("{fontstack}")&&f.push(new on(u,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&f.push(new on(u,o,'"glyphs" url must include a "{range}" token'))),f}function Zy(c,o=mt){return Ao(ds({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,objectElementValidators:{glyphs:Pa,"*":()=>[]}}))}const Pm=c=>Ao(Im(c)),Ky=c=>Ao(k0(c));function Ao(c){return c.slice().sort((o,u)=>o.line&&u.line?o.line-u.line:0)}function A0(c,o){let u=!1;if(o&&o.length)for(const f of o)c.fire(new tc(new Error(f.message))),u=!0;return u}var ku=$n;function $n(c,o,u){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var g=new Int32Array(this.arrayBuffer);c=g[0],this.d=(o=g[1])+2*(u=g[2]);for(var x=0;x<this.d*this.d;x++){var w=g[3+x],E=g[3+x+1];f.push(w===E?null:g.subarray(w,E))}var M=g[3+f.length+1];this.keys=g.subarray(g[3+f.length],M),this.bboxes=g.subarray(M),this.insert=this._insertReadonly}else{this.d=o+2*u;for(var P=0;P<this.d*this.d;P++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=c,this.padding=u,this.scale=o/c,this.uid=0;var N=u/o*c;this.min=-N,this.max=c+N}$n.prototype.insert=function(c,o,u,f,g){this._forEachCell(o,u,f,g,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g)},$n.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$n.prototype._insertCell=function(c,o,u,f,g,x){this.cells[g].push(x)},$n.prototype.query=function(c,o,u,f,g){var x=this.min,w=this.max;if(c<=x&&o<=x&&w<=u&&w<=f&&!g)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(c,o,u,f,this._queryCell,E,{},g),E},$n.prototype._queryCell=function(c,o,u,f,g,x,w,E){var M=this.cells[g];if(null!==M)for(var P=this.keys,N=this.bboxes,U=0;U<M.length;U++){var j=M[U];if(void 0===w[j]){var Y=4*j;(E?E(N[Y+0],N[Y+1],N[Y+2],N[Y+3]):c<=N[Y+2]&&o<=N[Y+3]&&u>=N[Y+0]&&f>=N[Y+1])?(w[j]=!0,x.push(P[j])):w[j]=!1}}},$n.prototype._forEachCell=function(c,o,u,f,g,x,w,E){for(var M=this._convertToCellCoord(c),P=this._convertToCellCoord(o),N=this._convertToCellCoord(u),U=this._convertToCellCoord(f),j=M;j<=N;j++)for(var Y=P;Y<=U;Y++){var X=this.d*Y+j;if((!E||E(this._convertFromCellCoord(j),this._convertFromCellCoord(Y),this._convertFromCellCoord(j+1),this._convertFromCellCoord(Y+1)))&&g.call(this,c,o,u,f,X,x,w,E))return}},$n.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},$n.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},$n.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,o=3+this.cells.length+1+1,u=0,f=0;f<this.cells.length;f++)u+=this.cells[f].length;var g=new Int32Array(o+u+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;for(var x=o,w=0;w<c.length;w++){var E=c[w];g[3+w]=x,g.set(E,x),x+=E.length}return g[3+c.length]=x,g.set(this.keys,x),g[3+c.length+1]=x+=this.keys.length,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer};const op={};function _n(c,o,u={}){Object.defineProperty(c,"_classRegistryKey",{value:o,writeable:!1}),op[o]={klass:c,omit:u.omit||[]}}_n(Object,"Object"),ku.serialize=function(c,o){const u=c.toArrayBuffer();return o&&o.push(u),{buffer:u}},ku.deserialize=function(c){return new ku(c.buffer)},Object.defineProperty(ku,"name",{value:"Grid"}),_n(ku,"Grid"),_n(ls,"Color"),_n(Error,"Error"),_n(Xa,"AJAXError"),_n(fa,"ResolvedImage"),_n(Em,"StylePropertyFunction"),_n(Mh,"StyleExpression",{omit:["_evaluator"]}),_n(kh,"ZoomDependentExpression"),_n(T0,"ZoomConstantExpression"),_n(Tu,"CompoundExpression",{omit:["_evaluate"]});for(const c in oc)op[oc[c]._classRegistryKey]||_n(oc[c],`Expression${c}`);function Jy(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&"ArrayBuffer"===c.constructor.name)}function ap(c){return Et.ImageBitmap&&c instanceof Et.ImageBitmap}function lp(c,o){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp)return c;if(Jy(c)||ap(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const u=c;return o&&o.push(u.buffer),u}if(c instanceof Et.ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const f of c)u.push(lp(f,o));return u}if("object"==typeof c){const u=c.constructor,f=u._classRegistryKey;if(!f)throw new Error(`can't serialize object of unregistered class ${f}`);const g=u.serialize?u.serialize(c,o):{};if(!u.serialize){for(const x in c)c.hasOwnProperty(x)&&(op[f].omit.indexOf(x)>=0||(g[x]=lp(c[x],o)));c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==f&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function Pd(c){if(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||Jy(c)||ap(c)||ArrayBuffer.isView(c)||c instanceof Et.ImageData)return c;if(Array.isArray(c))return c.map(Pd);if("object"==typeof c){const o=c.$name||"Object",{klass:u}=op[o];if(!u)throw new Error(`can't deserialize unregistered class ${o}`);if(u.deserialize)return u.deserialize(c);const f=Object.create(u.prototype);for(const g of Object.keys(c))"$name"!==g&&(f[g]=Pd(c[g]));return f}throw new Error("can't deserialize object of type "+typeof c)}const cp=c=>c>=1536&&c<=1791,Qy=c=>c>=1872&&c<=1919,Ut=c=>c>=2208&&c<=2303,Ur=c=>c>=11904&&c<=12031,mn=c=>c>=12032&&c<=12255,gn=c=>c>=12272&&c<=12287,fs=c=>c>=12288&&c<=12351,up=c=>c>=12352&&c<=12447,ac=c=>c>=12448&&c<=12543,Oa=c=>c>=12544&&c<=12591,Om=c=>c>=12704&&c<=12735,Lm=c=>c>=12736&&c<=12783,I0=c=>c>=12784&&c<=12799,Fx=c=>c>=12800&&c<=13055,P0=c=>c>=13056&&c<=13311,Io=c=>c>=13312&&c<=19903,Al=c=>c>=19968&&c<=40959,O0=c=>c>=40960&&c<=42127,Ph=c=>c>=42128&&c<=42191,lc=c=>c>=44032&&c<=55215,e1=c=>c>=63744&&c<=64255,hp=c=>c>=64336&&c<=65023,dp=c=>c>=65040&&c<=65055,v=c=>c>=65072&&c<=65103,h=c=>c>=65104&&c<=65135,p=c=>c>=65136&&c<=65279,b=c=>c>=65280&&c<=65519;function C(c){for(const o of c)if(R(o.charCodeAt(0)))return!0;return!1}function S(c){for(const o of c)if(!O(o.charCodeAt(0)))return!1;return!0}function O(c){return!(cp(c)||Qy(c)||Ut(c)||hp(c)||p(c))}function R(c){return!(746!==c&&747!==c&&(c<4352||!(Om(c)||Oa(c)||v(c)&&!(c>=65097&&c<=65103)||e1(c)||P0(c)||Ur(c)||Lm(c)||!(!fs(c)||c>=12296&&c<=12305||c>=12308&&c<=12319||12336===c)||Io(c)||Al(c)||Fx(c)||(o=c,o>=12592&&o<=12687)||(o=>o>=43360&&o<=43391)(c)||(o=>o>=55216&&o<=55295)(c)||(o=>o>=4352&&o<=4607)(c)||lc(c)||up(c)||gn(c)||(o=>o>=12688&&o<=12703)(c)||mn(c)||I0(c)||ac(c)&&12540!==c||!(!b(c)||65288===c||65289===c||65293===c||c>=65306&&c<=65310||65339===c||65341===c||65343===c||c>=65371&&c<=65503||65507===c||c>=65512&&c<=65519)||!(!h(c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||(o=>o>=5120&&o<=5759)(c)||(o=>o>=6320&&o<=6399)(c)||dp(c)||(o=>o>=19904&&o<=19967)(c)||O0(c)||Ph(c))));var o}function z(c){return!(R(c)||(o=c,(u=o)>=128&&u<=255&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||(u=>u>=8192&&u<=8303)(o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||(u=>u>=8448&&u<=8527)(o)||(u=>u>=8528&&u<=8591)(o)||(u=>u>=8960&&u<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||(u=>u>=9216&&u<=9279)(o)&&9251!==o||(u=>u>=9280&&u<=9311)(o)||(u=>u>=9312&&u<=9471)(o)||(u=>u>=9632&&u<=9727)(o)||(u=>u>=9728&&u<=9983)(o)&&!(o>=9754&&o<=9759)||(u=>u>=11008&&u<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||fs(o)||ac(o)||(u=>u>=57344&&u<=63743)(o)||v(o)||h(o)||b(o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o,u}function H(c){return c>=1424&&c<=2303||hp(c)||p(c)}function W(c,o){return!(!o&&H(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||(u=c,u>=6016&&u<=6143));var u}function J(c){for(const o of c)if(H(o.charCodeAt(0)))return!0;return!1}const re="deferred",he="loading",ue="loaded";let le=null,de="unavailable",ne=null;const be=function(c){c&&"string"==typeof c&&c.indexOf("NetworkError")>-1&&(de="error"),le&&le(c)};function ve(){Ce.fire(new di("pluginStateChange",{pluginStatus:de,pluginURL:ne}))}const Ce=new nc,Be=function(){return de},Le=function(){if(de!==re||!ne)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");de=he,ve(),ne&&od({url:ne},c=>{c?be(c):(de=ue,ve())})},Ue={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>de===ue||null!=Ue.applyArabicShaping,isLoading:()=>de===he,setState(c){de=c.pluginStatus,ne=c.pluginURL},isParsed:()=>null!=Ue.applyArabicShaping&&null!=Ue.processBidirectionalText&&null!=Ue.processStyledBidirectionalText,getPluginURL:()=>ne};class Ge{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(o){return function(u,f){for(const g of u)if(!W(g.charCodeAt(0),f))return!1;return!0}(o,Ue.isLoaded())}}class tt{constructor(o,u){this.property=o,this.value=u,this.expression=function(f,g){if(Dh(f))return new Em(f,g);if(ko(f)){const x=Ah(f,g);if("error"===x.result)throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=f;return"string"==typeof f&&"color"===g.type&&(x=ls.parse(f)),{kind:"constant",evaluate:()=>x}}}(void 0===u?o.specification.default:u,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,u,f){return this.property.possiblyEvaluate(this,o,u,f)}}class it{constructor(o){this.property=o,this.value=new tt(o,void 0)}transitioned(o,u){return new Ke(this.property,this.value,u,er({},o.transition,this.transition),o.now)}untransitioned(){return new Ke(this.property,this.value,null,{},0)}}class Ht{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Aa(this._values[o].value.value)}setValue(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new it(this._values[o].property)),this._values[o].value=new tt(this._values[o].property,null===u?void 0:Aa(u))}getTransition(o){return Aa(this._values[o].transition)}setTransition(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new it(this._values[o].property)),this._values[o].transition=Aa(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);void 0!==f&&(o[u]=f);const g=this.getTransition(u);void 0!==g&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const f=new Tt(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,u._values[g]);return f}untransitioned(){const o=new Tt(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class Ke{constructor(o,u,f,g,x){const w=g.delay||0,E=g.duration||0;x=x||0,this.property=o,this.value=u,this.begin=x+w,this.end=this.begin+E,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,u,f){const g=o.now||0,x=this.value.possiblyEvaluate(o,u,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(o,u,f);{const E=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,f),x,gh(E))}}return x}}class Tt{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,f){const g=new st(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class at{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return Aa(this._values[o].value)}setValue(o,u){this._values[o]=new tt(this._values[o].property,null===u?void 0:Aa(u))}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);void 0!==f&&(o[u]=f)}return o}possiblyEvaluate(o,u,f){const g=new st(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}}class Ot{constructor(o,u,f){this.property=o,this.value=u,this.parameters=f}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,u,f,g){return this.property.evaluate(this.value,this.parameters,o,u,f,g)}}class st{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Ye{constructor(o){this.specification=o}possiblyEvaluate(o,u){return o.expression.evaluate(u)}interpolate(o,u,f){const g=Rc[this.specification.type];return g?g(o,u,f):o}}class ot{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,f,g){return new Ot(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(u,null,{},f,g)}:o.expression,u)}interpolate(o,u,f){if("constant"!==o.value.kind||"constant"!==u.value.kind)return o;if(void 0===o.value.value||void 0===u.value.value)return new Ot(this,{kind:"constant",value:void 0},o.parameters);const g=Rc[this.specification.type];return g?new Ot(this,{kind:"constant",value:g(o.value.value,u.value.value,f)},o.parameters):o}evaluate(o,u,f,g,x,w){return"constant"===o.kind?o.value:o.evaluate(u,f,g,x,w)}}class kt{constructor(o){this.specification=o}possiblyEvaluate(o,u,f,g){return!!o.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class Nt{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new Ge(0,{});for(const f in o){const g=o[f];g.specification.overridable&&this.overridableProperties.push(f);const x=this.defaultPropertyValues[f]=new tt(g,void 0),w=this.defaultTransitionablePropertyValues[f]=new it(g);this.defaultTransitioningPropertyValues[f]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=x.possiblyEvaluate(u)}}}function wn(c,o){return 256*(c=dr(Math.floor(c),0,255))+dr(Math.floor(o),0,255)}_n(ot,"DataDrivenProperty"),_n(Ye,"DataConstantProperty"),_n(kt,"ColorRampProperty");const sr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yn{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class rn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Cn(c,o=1){let u=0,f=0;return{members:c.map(g=>{const x=sr[g.type].BYTES_PER_ELEMENT,w=u=mr(u,Math.max(o,x)),E=g.components||1;return f=Math.max(f,x),u+=x*E,{name:g.name,type:g.type,components:E,offset:w}}),size:mr(u,Math.max(f,o)),alignment:o}}function mr(c,o){return Math.ceil(c/o)*o}class En extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=f,o}}En.prototype.bytesPerElement=4,_n(En,"StructArrayLayout2i4");class jr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=g,o}}jr.prototype.bytesPerElement=6,_n(jr,"StructArrayLayout3i6");class oi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=x,o}}oi.prototype.bytesPerElement=8,_n(oi,"StructArrayLayout4i8");class ai extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E){const M=this.length;return this.resize(M+1),this.emplace(M,o,u,f,g,x,w,E)}emplace(o,u,f,g,x,w,E,M){const P=6*o,N=12*o,U=3*o;return this.int16[P+0]=u,this.int16[P+1]=f,this.uint8[N+4]=g,this.uint8[N+5]=x,this.uint8[N+6]=w,this.uint8[N+7]=E,this.float32[U+2]=M,o}}ai.prototype.bytesPerElement=12,_n(ai,"StructArrayLayout2i4ub1f12");class xi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=x,o}}xi.prototype.bytesPerElement=16,_n(xi,"StructArrayLayout4f16");class Wi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,f,g,x)}emplace(o,u,f,g,x,w){const E=6*o,M=3*o;return this.uint16[E+0]=u,this.uint16[E+1]=f,this.uint16[E+2]=g,this.uint16[E+3]=x,this.float32[M+2]=w,o}}Wi.prototype.bytesPerElement=12,_n(Wi,"StructArrayLayout4ui1f12");class Po extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=4*o;return this.uint16[w+0]=u,this.uint16[w+1]=f,this.uint16[w+2]=g,this.uint16[w+3]=x,o}}Po.prototype.bytesPerElement=8,_n(Po,"StructArrayLayout4ui8");class ga extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,u,f,g,x,w)}emplace(o,u,f,g,x,w,E){const M=6*o;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=g,this.int16[M+3]=x,this.int16[M+4]=w,this.int16[M+5]=E,o}}ga.prototype.bytesPerElement=12,_n(ga,"StructArrayLayout6i12");class Au extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E,M,P,N,U,j){const Y=this.length;return this.resize(Y+1),this.emplace(Y,o,u,f,g,x,w,E,M,P,N,U,j)}emplace(o,u,f,g,x,w,E,M,P,N,U,j,Y){const X=12*o;return this.int16[X+0]=u,this.int16[X+1]=f,this.int16[X+2]=g,this.int16[X+3]=x,this.uint16[X+4]=w,this.uint16[X+5]=E,this.uint16[X+6]=M,this.uint16[X+7]=P,this.int16[X+8]=N,this.int16[X+9]=U,this.int16[X+10]=j,this.int16[X+11]=Y,o}}Au.prototype.bytesPerElement=24,_n(Au,"StructArrayLayout4i4ui4i24");class Ii extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w){const E=this.length;return this.resize(E+1),this.emplace(E,o,u,f,g,x,w)}emplace(o,u,f,g,x,w,E){const M=10*o,P=5*o;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=g,this.float32[P+2]=x,this.float32[P+3]=w,this.float32[P+4]=E,o}}Ii.prototype.bytesPerElement=20,_n(Ii,"StructArrayLayout3i3f20");class pi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}pi.prototype.bytesPerElement=4,_n(pi,"StructArrayLayout1ul4");class Nr extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E,M,P,N,U,j,Y){const X=this.length;return this.resize(X+1),this.emplace(X,o,u,f,g,x,w,E,M,P,N,U,j,Y)}emplace(o,u,f,g,x,w,E,M,P,N,U,j,Y,X){const ee=20*o,se=10*o;return this.int16[ee+0]=u,this.int16[ee+1]=f,this.int16[ee+2]=g,this.int16[ee+3]=x,this.int16[ee+4]=w,this.float32[se+3]=E,this.float32[se+4]=M,this.float32[se+5]=P,this.float32[se+6]=N,this.int16[ee+14]=U,this.uint32[se+8]=j,this.uint16[ee+18]=Y,this.uint16[ee+19]=X,o}}Nr.prototype.bytesPerElement=40,_n(Nr,"StructArrayLayout5i4f1i1ul2ui40");class li extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E){const M=this.length;return this.resize(M+1),this.emplace(M,o,u,f,g,x,w,E)}emplace(o,u,f,g,x,w,E,M){const P=8*o;return this.int16[P+0]=u,this.int16[P+1]=f,this.int16[P+2]=g,this.int16[P+4]=x,this.int16[P+5]=w,this.int16[P+6]=E,this.int16[P+7]=M,o}}li.prototype.bytesPerElement=16,_n(li,"StructArrayLayout3i2i2i16");class Oo extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,f,g,x)}emplace(o,u,f,g,x,w){const E=4*o,M=8*o;return this.float32[E+0]=u,this.float32[E+1]=f,this.float32[E+2]=g,this.int16[M+6]=x,this.int16[M+7]=w,o}}Oo.prototype.bytesPerElement=16,_n(Oo,"StructArrayLayout2f1f2i16");class mi extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=12*o,E=3*o;return this.uint8[w+0]=u,this.uint8[w+1]=f,this.float32[E+1]=g,this.float32[E+2]=x,o}}mi.prototype.bytesPerElement=12,_n(mi,"StructArrayLayout2ub2f12");class $s extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=g,o}}$s.prototype.bytesPerElement=12,_n($s,"StructArrayLayout3f12");class fo extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=g,o}}fo.prototype.bytesPerElement=6,_n(fo,"StructArrayLayout3ui6");class cc extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe)}emplace(o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe,Oe){const Qe=30*o,et=15*o,ht=60*o;return this.int16[Qe+0]=u,this.int16[Qe+1]=f,this.int16[Qe+2]=g,this.float32[et+2]=x,this.float32[et+3]=w,this.uint16[Qe+8]=E,this.uint16[Qe+9]=M,this.uint32[et+5]=P,this.uint32[et+6]=N,this.uint32[et+7]=U,this.uint16[Qe+16]=j,this.uint16[Qe+17]=Y,this.uint16[Qe+18]=X,this.float32[et+10]=ee,this.float32[et+11]=se,this.uint8[ht+48]=xe,this.uint8[ht+49]=ke,this.uint8[ht+50]=pe,this.uint32[et+13]=Ee,this.int16[Qe+28]=Fe,this.uint8[ht+58]=Oe,o}}cc.prototype.bytesPerElement=60,_n(cc,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Iu extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe,Oe,Qe,et,ht,Ft,lt,_t,ft,It){const Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe,Oe,Qe,et,ht,Ft,lt,_t,ft,It)}emplace(o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se,xe,ke,pe,Ee,Fe,Oe,Qe,et,ht,Ft,lt,_t,ft,It,Bt){const ct=38*o,Gt=19*o;return this.int16[ct+0]=u,this.int16[ct+1]=f,this.int16[ct+2]=g,this.float32[Gt+2]=x,this.float32[Gt+3]=w,this.int16[ct+8]=E,this.int16[ct+9]=M,this.int16[ct+10]=P,this.int16[ct+11]=N,this.int16[ct+12]=U,this.int16[ct+13]=j,this.uint16[ct+14]=Y,this.uint16[ct+15]=X,this.uint16[ct+16]=ee,this.uint16[ct+17]=se,this.uint16[ct+18]=xe,this.uint16[ct+19]=ke,this.uint16[ct+20]=pe,this.uint16[ct+21]=Ee,this.uint16[ct+22]=Fe,this.uint16[ct+23]=Oe,this.uint16[ct+24]=Qe,this.uint16[ct+25]=et,this.uint16[ct+26]=ht,this.uint16[ct+27]=Ft,this.uint16[ct+28]=lt,this.uint32[Gt+15]=_t,this.float32[Gt+16]=ft,this.float32[Gt+17]=It,this.float32[Gt+18]=Bt,o}}Iu.prototype.bytesPerElement=76,_n(Iu,"StructArrayLayout3i2f6i15ui1ul3f76");class La extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}La.prototype.bytesPerElement=4,_n(La,"StructArrayLayout1f4");class Fa extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,f,g,x)}emplace(o,u,f,g,x,w){const E=5*o;return this.float32[E+0]=u,this.float32[E+1]=f,this.float32[E+2]=g,this.float32[E+3]=x,this.float32[E+4]=w,o}}Fa.prototype.bytesPerElement=20,_n(Fa,"StructArrayLayout5f20");class uc extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=6*o;return this.uint32[3*o+0]=u,this.uint16[w+2]=f,this.uint16[w+3]=g,this.uint16[w+4]=x,o}}uc.prototype.bytesPerElement=12,_n(uc,"StructArrayLayout1ul3ui12");class Bc extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=f,o}}Bc.prototype.bytesPerElement=4,_n(Bc,"StructArrayLayout2ui4");class zc extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}zc.prototype.bytesPerElement=2,_n(zc,"StructArrayLayout1ui2");class Od extends rn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=f,o}}Od.prototype.bytesPerElement=8,_n(Od,"StructArrayLayout2f8");class L0 extends yn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}L0.prototype.size=40;class Oh extends Nr{get(o){return new L0(this,o)}}_n(Oh,"CollisionBoxArray");class PC extends yn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}PC.prototype.size=60;class Rx extends cc{get(o){return new PC(this,o)}}_n(Rx,"PlacedSymbolArray");class Nx extends yn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Nx.prototype.size=76;class fp extends Iu{get(o){return new Nx(this,o)}}_n(fp,"SymbolInstanceArray");class OC extends La{getoffsetX(o){return this.float32[1*o+0]}}_n(OC,"GlyphOffsetArray");class po extends En{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}_n(po,"SymbolLineVertexArray");class t1 extends yn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}t1.prototype.size=12;class LC extends uc{get(o){return new t1(this,o)}}_n(LC,"FeatureIndexArray");class Bx extends Bc{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}_n(Bx,"FillExtrusionCentroidArray");const n1=Cn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Fm=Cn([{name:"a_dash",components:4,type:"Uint16"}]);var hc={},Rm={get exports(){return hc},set exports(c){hc=c}},r1={};({get exports(){return r1},set exports(c){r1=c}}).exports=function(c,o){var u,f,g,x,w,E,M,P;for(f=c.length-(u=3&c.length),g=o,w=3432918353,E=461845907,P=0;P<f;)M=255&c.charCodeAt(P)|(255&c.charCodeAt(++P))<<8|(255&c.charCodeAt(++P))<<16|(255&c.charCodeAt(++P))<<24,++P,g=27492+(65535&(x=5*(65535&(g=(g^=M=(65535&(M=(M=(65535&M)*w+(((M>>>16)*w&65535)<<16)&4294967295)<<15|M>>>17))*E+(((M>>>16)*E&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(M=0,u){case 3:M^=(255&c.charCodeAt(P+2))<<16;case 2:M^=(255&c.charCodeAt(P+1))<<8;case 1:g^=M=(65535&(M=(M=(65535&(M^=255&c.charCodeAt(P)))*w+(((M>>>16)*w&65535)<<16)&4294967295)<<15|M>>>17))*E+(((M>>>16)*E&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var F0={};({get exports(){return F0},set exports(c){F0=c}}).exports=function(c,o){for(var u,f=c.length,g=o^f,x=0;f>=4;)u=1540483477*(65535&(u=255&c.charCodeAt(x)|(255&c.charCodeAt(++x))<<8|(255&c.charCodeAt(++x))<<16|(255&c.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:g^=(255&c.charCodeAt(x+2))<<16;case 2:g^=(255&c.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var pp=r1,fF=F0;Rm.exports=pp,hc.murmur3=pp,hc.murmur2=fF;class i1{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,u,f,g){this.ids.push(On(o)),this.positions.push(u,f,g)}getPositions(o){const u=On(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=u?g=w:f=w+1}const x=[];for(;this.ids[f]===u;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(o,u){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return FC(f,g,0,f.length-1),u&&u.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const u=new i1;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u}}function On(c){const o=+c;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:hc(String(c))}function FC(c,o,u,f){for(;u<f;){const g=c[u+f>>1];let x=u-1,w=f+1;for(;;){do{x++}while(c[x]<g);do{w--}while(c[w]>g);if(x>=w)break;zx(c,x,w),zx(o,3*x,3*w),zx(o,3*x+1,3*w+1),zx(o,3*x+2,3*w+2)}w-u<f-w?(FC(c,o,u,w),u=w+1):(FC(c,o,w+1,f),f=w)}}function zx(c,o,u){const f=c[o];c[o]=c[u],c[u]=f}_n(i1,"FeaturePositionMap");class Ld{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,u),this.initialized=!0),!!this.location}}class Vx extends Ld{constructor(o){super(o),this.current=0}set(o,u,f){this.fetchUniformLocation(o,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class VM extends Ld{constructor(o){super(o),this.current=[0,0,0,0]}set(o,u,f){this.fetchUniformLocation(o,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class UM extends Ld{constructor(o){super(o),this.current=ls.transparent}set(o,u,f){this.fetchUniformLocation(o,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const pF=new Float32Array(16),R0=new Float32Array(9),mF=new Float32Array(4);function RC(c){return[wn(255*c.r,255*c.g),wn(255*c.b,255*c.a)]}class ps{constructor(o,u,f){this.value=o,this.uniformNames=u.map(g=>`u_${g}`),this.type=f}setUniform(o,u,f,g,x){u.set(o,x,g.constantOr(this.value))}getBinding(o,u){return"color"===this.type?new UM(o):new Vx(o)}}class Fd{constructor(o,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,u,f,g,x){const w="u_pattern"===x||"u_dash"===x?this.pattern:"u_pixel_ratio"===x?this.pixelRatio:null;w&&u.set(o,x,w)}getBinding(o,u){return"u_pattern"===u||"u_dash"===u?new VM(o):new Vx(o)}}class Il{constructor(o,u,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===f?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,f,g,x,w){const E=this.paintVertexArray.length,M=this.expression.evaluate(new Ge(0),u,{},x,g,w);this.paintVertexArray.resize(o),this._setPaintValue(E,o,M)}updatePaintArray(o,u,f,g,x){const w=this.expression.evaluate({zoom:0},f,g,void 0,x);this._setPaintValue(o,u,w)}_setPaintValue(o,u,f){if("color"===this.type){const g=RC(f);for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=o;g<u;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Vc{constructor(o,u,f,g,x,w){this.expression=o,this.uniformNames=u.map(E=>`u_${E}_t`),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=u.map(E=>({name:`a_${E}`,type:"Float32",components:"color"===f?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,f,g,x,w){const E=this.expression.evaluate(new Ge(this.zoom),u,{},x,g,w),M=this.expression.evaluate(new Ge(this.zoom+1),u,{},x,g,w),P=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(P,o,E,M)}updatePaintArray(o,u,f,g,x){const w=this.expression.evaluate({zoom:this.zoom},f,g,void 0,x),E=this.expression.evaluate({zoom:this.zoom+1},f,g,void 0,x);this._setPaintValue(o,u,w,E)}_setPaintValue(o,u,f,g){if("color"===this.type){const x=RC(f),w=RC(g);for(let E=o;E<u;E++)this.paintVertexArray.emplace(E,x[0],x[1],w[0],w[1])}else{for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u,f,g,x){const w=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,E=dr(this.expression.interpolationFactor(w,this.zoom,this.zoom+1),0,1);u.set(o,x,E)}getBinding(o,u){return new Vx(o)}}class mo{constructor(o,u,f,g,x){this.expression=o,this.layerId=x,this.paintVertexAttributes=("array"===f?Fm:n1).members;for(let w=0;w<u.length;++w);this.paintVertexArray=new g}populatePaintArray(o,u,f){const g=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(g,o,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(o,u,f,g,x,w){this._setPaintValues(o,u,f.patterns&&f.patterns[this.layerId],w)}_setPaintValues(o,u,f,g){if(!g||!f)return;const x=g[f];if(!x)return;const{tl:w,br:E,pixelRatio:M}=x;for(let P=o;P<u;P++)this.paintVertexArray.emplace(P,w[0],w[1],E[0],E[1],M)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class el{constructor(o,u,f=(()=>!0)){this.binders={},this._buffers=[];const g=[];for(const x in o.paint._values){if(!f(x))continue;const w=o.paint.get(x);if(!(w instanceof Ot&&Qf(w.property.specification)))continue;const E=N0(x,o.type),M=w.value,P=w.property.specification.type,N=w.property.useIntegerZoom,U="line-dasharray"===x||x.endsWith("pattern"),j="line-dasharray"===x&&"constant"!==o.layout.get("line-cap").value.kind;if("constant"!==M.kind||j)if("source"===M.kind||j||U){const Y=NC(x,P,"source");this.binders[x]=U?new mo(M,E,P,Y,o.id):new Il(M,E,P,Y),g.push(`/a_${x}`)}else{const Y=NC(x,P,"composite");this.binders[x]=new Vc(M,E,P,N,u,Y),g.push(`/z_${x}`)}else this.binders[x]=U?new Fd(M.value,E):new ps(M.value,E,P),g.push(`/u_${x}`)}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof Il||u instanceof Vc?u.maxValue:0}populatePaintArrays(o,u,f,g,x,w){for(const E in this.binders){const M=this.binders[E];(M instanceof Il||M instanceof Vc||M instanceof mo)&&M.populatePaintArray(o,u,f,g,x,w)}}setConstantPatternPositions(o){for(const u in this.binders){const f=this.binders[u];f instanceof Fd&&f.setConstantPatternPositions(o)}}updatePaintArrays(o,u,f,g,x,w){let E=!1;for(const M in o){const P=u.getPositions(M);for(const N of P){const U=f.feature(N.index);for(const j in this.binders){const Y=this.binders[j];if((Y instanceof Il||Y instanceof Vc||Y instanceof mo)&&!0===Y.expression.isStateDependent){const X=g.paint.get(j);Y.expression=X.value,Y.updatePaintArray(N.start,N.end,U,o[M],x,w),E=!0}}}}return E}defines(){const o=[];for(const u in this.binders){const f=this.binders[u];(f instanceof ps||f instanceof Fd)&&o.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Il||f instanceof Vc||f instanceof mo)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof ps||f instanceof Fd||f instanceof Vc)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const u=[];for(const f in this.binders){const g=this.binders[f];if(g instanceof ps||g instanceof Fd||g instanceof Vc)for(const x of g.uniformNames)u.push({name:x,property:f,binding:g.getBinding(o,x)})}return u}setUniforms(o,u,f,g,x){for(const{name:w,property:E,binding:M}of f)this.binders[E].setUniform(o,M,x,g.get(E),w)}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const u=this.binders[o];(u instanceof Il||u instanceof Vc||u instanceof mo)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(o){for(const u in this.binders){const f=this.binders[u];(f instanceof Il||f instanceof Vc||f instanceof mo)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof Il||u instanceof Vc||u instanceof mo)&&u.destroy()}}}class Rd{constructor(o,u,f=(()=>!0)){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new el(g,u,f);this.needsUpload=!1,this._featureMap=new i1,this._bufferOffset=0}populatePaintArrays(o,u,f,g,x,w,E){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(o,u,g,x,w,E);void 0!==u.id&&this._featureMap.add(u.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,f,g,x){for(const w of f)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(o,this._featureMap,u,w,g,x)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const s1={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function N0(c,o){return s1[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}const jM={"line-pattern":{source:Wi,composite:Wi},"fill-pattern":{source:Wi,composite:Wi},"fill-extrusion-pattern":{source:Wi,composite:Wi},"line-dasharray":{source:Po,composite:Po}},gF={color:{source:Od,composite:xi},number:{source:La,composite:Od}};function NC(c,o,u){const f=jM[c];return f&&f[u]||gF[o][u]}_n(ps,"ConstantBinder"),_n(Fd,"PatternConstantBinder"),_n(Il,"SourceExpressionBinder"),_n(mo,"PatternCompositeBinder"),_n(Vc,"CompositeExpressionBinder"),_n(el,"ProgramConfiguration",{omit:["_buffers"]}),_n(Rd,"ProgramConfigurationSet");const Ux="-transition";class ms extends nc{constructor(o,u){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&"sky"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),u.layout&&(this._unevaluatedLayout=new at(u.layout)),u.paint)){this._transitionablePaint=new Ht(u.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(u.paint)}}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u,f={}){null!=u&&this._validate(Ky,`layers.${this.id}.layout.${o}`,o,u,f)||("visibility"!==o?this._unevaluatedLayout.setValue(o,u):this.visibility=u)}getPaintProperty(o){return Cl(o,Ux)?this._transitionablePaint.getTransition(o.slice(0,-Ux.length)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u,f={}){if(null!=u&&this._validate(Pm,`layers.${this.id}.paint.${o}`,o,u,f))return!1;if(Cl(o,Ux))return this._transitionablePaint.setTransition(o.slice(0,-Ux.length),u||void 0),!1;{const g=this._transitionablePaint._values[o],x=g.value.isDataDriven(),w=g.value;this._transitionablePaint.setValue(o,u),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value,M=E.isDataDriven(),P=Cl(o,"pattern")||"line-dasharray"===o;return M||x||P||this._handleOverridablePaintPropertyUpdate(o,w,E)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,u,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),ki(o,(u,f)=>!(void 0===u||"layout"===f&&!Object.keys(u).length||"paint"===f&&!Object.keys(u).length))}_validate(o,u,f,g,x={}){return(!x||!1!==x.validate)&&A0(this,o.call(Zy,{key:u,layerType:this.type,objectKey:f,value:g,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof Ot&&Qf(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=S0(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const jx=Cn([{name:"a_pos",components:2,type:"Int16"}],4),Nm=Cn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ks{constructor(o=[]){this.segments=o}prepareSegment(o,u,f,g){let x=this.segments[this.segments.length-1];return o>ks.MAX_VERTEX_ARRAY_LENGTH&&zi(`Max vertices per segment is ${ks.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!x||x.vertexLength+o>ks.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g)&&(x={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},void 0!==g&&(x.sortKey=g),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,f,g){return new ks([{vertexOffset:o,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}ks.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_n(ks,"SegmentVector");var Bn=8192;class Nd{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Tr?new Tr(o.lng,o.lat):Tr.convert(o),this}setSouthWest(o){return this._sw=o instanceof Tr?new Tr(o.lng,o.lat):Tr.convert(o),this}extend(o){const u=this._sw,f=this._ne;let g,x;if(o instanceof Tr)g=o,x=o;else{if(!(o instanceof Nd))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(Nd.convert(o)):this.extend(Tr.convert(o)):"object"==typeof o&&null!==o&&o.hasOwnProperty("lat")&&o.hasOwnProperty("lon")?this.extend(Tr.convert(o)):this;if(g=o._sw,x=o._ne,!g||!x)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new Tr(g.lng,g.lat),this._ne=new Tr(x.lng,x.lat)),this}getCenter(){return new Tr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Tr(this.getWest(),this.getNorth())}getSouthEast(){return new Tr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:f}=Tr.convert(o);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(o){return!o||o instanceof Nd?o:new Nd(o)}}var o1=1e-6,tl=typeof Float32Array<"u"?Float32Array:Array;function BC(){var c=new tl(9);return tl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function zC(c,o,u){var f=o[0],g=o[1],x=o[2],w=o[3],E=o[4],M=o[5],P=o[6],N=o[7],U=o[8],j=u[0],Y=u[1],X=u[2],ee=u[3],se=u[4],xe=u[5],ke=u[6],pe=u[7],Ee=u[8];return c[0]=j*f+Y*w+X*P,c[1]=j*g+Y*E+X*N,c[2]=j*x+Y*M+X*U,c[3]=ee*f+se*w+xe*P,c[4]=ee*g+se*E+xe*N,c[5]=ee*x+se*M+xe*U,c[6]=ke*f+pe*w+Ee*P,c[7]=ke*g+pe*E+Ee*N,c[8]=ke*x+pe*M+Ee*U,c}function Uc(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function B0(c,o){var u=o[0],f=o[1],g=o[2],x=o[3],w=o[4],E=o[5],M=o[6],P=o[7],N=o[8],U=o[9],j=o[10],Y=o[11],X=o[12],ee=o[13],se=o[14],xe=o[15],ke=u*E-f*w,pe=u*M-g*w,Ee=u*P-x*w,Fe=f*M-g*E,Oe=f*P-x*E,Qe=g*P-x*M,et=N*ee-U*X,ht=N*se-j*X,Ft=N*xe-Y*X,lt=U*se-j*ee,_t=U*xe-Y*ee,ft=j*xe-Y*se,It=ke*ft-pe*_t+Ee*lt+Fe*Ft-Oe*ht+Qe*et;return It?(c[0]=(E*ft-M*_t+P*lt)*(It=1/It),c[1]=(g*_t-f*ft-x*lt)*It,c[2]=(ee*Qe-se*Oe+xe*Fe)*It,c[3]=(j*Oe-U*Qe-Y*Fe)*It,c[4]=(M*Ft-w*ft-P*ht)*It,c[5]=(u*ft-g*Ft+x*ht)*It,c[6]=(se*Ee-X*Qe-xe*pe)*It,c[7]=(N*Qe-j*Ee+Y*pe)*It,c[8]=(w*_t-E*Ft+P*et)*It,c[9]=(f*Ft-u*_t-x*et)*It,c[10]=(X*Oe-ee*Ee+xe*ke)*It,c[11]=(U*Ee-N*Oe-Y*ke)*It,c[12]=(E*ht-w*lt-M*et)*It,c[13]=(u*lt-f*ht+g*et)*It,c[14]=(ee*pe-X*Fe-se*ke)*It,c[15]=(N*Fe-U*pe+j*ke)*It,c):null}function Pu(c,o,u){var f=o[0],g=o[1],x=o[2],w=o[3],E=o[4],M=o[5],P=o[6],N=o[7],U=o[8],j=o[9],Y=o[10],X=o[11],ee=o[12],se=o[13],xe=o[14],ke=o[15],pe=u[0],Ee=u[1],Fe=u[2],Oe=u[3];return c[0]=pe*f+Ee*E+Fe*U+Oe*ee,c[1]=pe*g+Ee*M+Fe*j+Oe*se,c[2]=pe*x+Ee*P+Fe*Y+Oe*xe,c[3]=pe*w+Ee*N+Fe*X+Oe*ke,c[4]=(pe=u[4])*f+(Ee=u[5])*E+(Fe=u[6])*U+(Oe=u[7])*ee,c[5]=pe*g+Ee*M+Fe*j+Oe*se,c[6]=pe*x+Ee*P+Fe*Y+Oe*xe,c[7]=pe*w+Ee*N+Fe*X+Oe*ke,c[8]=(pe=u[8])*f+(Ee=u[9])*E+(Fe=u[10])*U+(Oe=u[11])*ee,c[9]=pe*g+Ee*M+Fe*j+Oe*se,c[10]=pe*x+Ee*P+Fe*Y+Oe*xe,c[11]=pe*w+Ee*N+Fe*X+Oe*ke,c[12]=(pe=u[12])*f+(Ee=u[13])*E+(Fe=u[14])*U+(Oe=u[15])*ee,c[13]=pe*g+Ee*M+Fe*j+Oe*se,c[14]=pe*x+Ee*P+Fe*Y+Oe*xe,c[15]=pe*w+Ee*N+Fe*X+Oe*ke,c}function mp(c,o,u){var f,g,x,w,E,M,P,N,U,j,Y,X,ee=u[0],se=u[1],xe=u[2];return o===c?(c[12]=o[0]*ee+o[4]*se+o[8]*xe+o[12],c[13]=o[1]*ee+o[5]*se+o[9]*xe+o[13],c[14]=o[2]*ee+o[6]*se+o[10]*xe+o[14],c[15]=o[3]*ee+o[7]*se+o[11]*xe+o[15]):(g=o[1],x=o[2],w=o[3],E=o[4],M=o[5],P=o[6],N=o[7],U=o[8],j=o[9],Y=o[10],X=o[11],c[0]=f=o[0],c[1]=g,c[2]=x,c[3]=w,c[4]=E,c[5]=M,c[6]=P,c[7]=N,c[8]=U,c[9]=j,c[10]=Y,c[11]=X,c[12]=f*ee+E*se+U*xe+o[12],c[13]=g*ee+M*se+j*xe+o[13],c[14]=x*ee+P*se+Y*xe+o[14],c[15]=w*ee+N*se+X*xe+o[15]),c}function jc(c,o,u){var f=u[0],g=u[1],x=u[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*x,c[9]=o[9]*x,c[10]=o[10]*x,c[11]=o[11]*x,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}function a1(c,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[4],w=o[5],E=o[6],M=o[7],P=o[8],N=o[9],U=o[10],j=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=x*g+P*f,c[5]=w*g+N*f,c[6]=E*g+U*f,c[7]=M*g+j*f,c[8]=P*g-x*f,c[9]=N*g-w*f,c[10]=U*g-E*f,c[11]=j*g-M*f,c}function Bd(c,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[0],w=o[1],E=o[2],M=o[3],P=o[8],N=o[9],U=o[10],j=o[11];return o!==c&&(c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=x*g-P*f,c[1]=w*g-N*f,c[2]=E*g-U*f,c[3]=M*g-j*f,c[8]=x*f+P*g,c[9]=w*f+N*g,c[10]=E*f+U*g,c[11]=M*f+j*g,c}function VC(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Hx(c,o,u){var f,g,x,w=u[0],E=u[1],M=u[2],P=Math.hypot(w,E,M);return P<o1?null:(w*=P=1/P,E*=P,M*=P,f=Math.sin(o),g=Math.cos(o),c[0]=w*w*(x=1-g)+g,c[1]=E*w*x+M*f,c[2]=M*w*x-E*f,c[3]=0,c[4]=w*E*x-M*f,c[5]=E*E*x+g,c[6]=M*E*x+w*f,c[7]=0,c[8]=w*M*x+E*f,c[9]=E*M*x-w*f,c[10]=M*M*x+g,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var z0=Pu;function Bm(){var c=new tl(3);return tl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function $x(c){var o=new tl(3);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o}function V0(c){return Math.hypot(c[0],c[1],c[2])}function zm(c,o,u){var f=new tl(3);return f[0]=c,f[1]=o,f[2]=u,f}function nl(c,o,u){return c[0]=o[0]+u[0],c[1]=o[1]+u[1],c[2]=o[2]+u[2],c}function gp(c,o,u){return c[0]=o[0]-u[0],c[1]=o[1]-u[1],c[2]=o[2]-u[2],c}function UC(c,o,u){return c[0]=o[0]*u[0],c[1]=o[1]*u[1],c[2]=o[2]*u[2],c}function l1(c,o,u){return c[0]=Math.min(o[0],u[0]),c[1]=Math.min(o[1],u[1]),c[2]=Math.min(o[2],u[2]),c}function Vm(c,o,u){return c[0]=Math.max(o[0],u[0]),c[1]=Math.max(o[1],u[1]),c[2]=Math.max(o[2],u[2]),c}function Pl(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c}function c1(c,o,u,f){return c[0]=o[0]+u[0]*f,c[1]=o[1]+u[1]*f,c[2]=o[2]+u[2]*f,c}function _a(c,o){var u=o[0],f=o[1],g=o[2],x=u*u+f*f+g*g;return x>0&&(x=1/Math.sqrt(x)),c[0]=o[0]*x,c[1]=o[1]*x,c[2]=o[2]*x,c}function dc(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]}function Wx(c,o,u){var f=o[0],g=o[1],x=o[2],w=u[0],E=u[1],M=u[2];return c[0]=g*M-x*E,c[1]=x*w-f*M,c[2]=f*E-g*w,c}function Vi(c,o,u){var f=o[0],g=o[1],x=o[2],w=u[3]*f+u[7]*g+u[11]*x+u[15];return c[0]=(u[0]*f+u[4]*g+u[8]*x+u[12])/(w=w||1),c[1]=(u[1]*f+u[5]*g+u[9]*x+u[13])/w,c[2]=(u[2]*f+u[6]*g+u[10]*x+u[14])/w,c}function Gx(c,o,u){var f=u[0],g=u[1],x=u[2],w=o[0],E=o[1],M=o[2],P=g*M-x*E,N=x*w-f*M,U=f*E-g*w,j=g*U-x*N,Y=x*P-f*U,X=f*N-g*P,ee=2*u[3];return N*=ee,U*=ee,Y*=2,X*=2,c[0]=w+(P*=ee)+(j*=2),c[1]=E+N+Y,c[2]=M+U+X,c}var U0,fc=gp,_F=UC,jC=V0;function HM(c,o,u){return c[0]=o[0]*u,c[1]=o[1]*u,c[2]=o[2]*u,c[3]=o[3]*u,c}function HC(c,o){var u=o[0],f=o[1],g=o[2],x=o[3],w=u*u+f*f+g*g+x*x;return w>0&&(w=1/Math.sqrt(w)),c[0]=u*w,c[1]=f*w,c[2]=g*w,c[3]=x*w,c}function _p(c,o,u){var f=o[0],g=o[1],x=o[2],w=o[3];return c[0]=u[0]*f+u[4]*g+u[8]*x+u[12]*w,c[1]=u[1]*f+u[5]*g+u[9]*x+u[13]*w,c[2]=u[2]*f+u[6]*g+u[10]*x+u[14]*w,c[3]=u[3]*f+u[7]*g+u[11]*x+u[15]*w,c}function u1(){var c=new tl(4);return tl!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function $M(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function WM(c,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],w=o[3],E=Math.sin(u),M=Math.cos(u);return c[0]=f*M+w*E,c[1]=g*M+x*E,c[2]=x*M-g*E,c[3]=w*M-f*E,c}function h1(c,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],w=o[3],E=Math.sin(u),M=Math.cos(u);return c[0]=f*M-x*E,c[1]=g*M+w*E,c[2]=x*M+f*E,c[3]=w*M-g*E,c}Bm(),U0=new tl(4),tl!=Float32Array&&(U0[0]=0,U0[1]=0,U0[2]=0,U0[3]=0);var yF=HC;Bm(),zm(1,0,0),zm(0,1,0),u1(),u1(),BC();const vF=Cn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:GM}=vF,YM=Cn([{name:"a_pos_3",components:3,type:"Int16"}]);var d1=Cn([{name:"a_pos",type:"Int16",components:2}]);class Yx{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,f){const g=dc(u,this.dir);if(Math.abs(g)<1e-6)return!1;const x=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1]+(o[2]-this.pos[2])*u[2])/g;return f[0]=this.pos[0]+this.dir[0]*x,f[1]=this.pos[1]+this.dir[1]*x,f[2]=this.pos[2]+this.dir[2]*x,!0}closestPointOnSphere(o,u,f){if(ee=(Y=this.pos)[0],se=Y[1],xe=Y[2],ke=(X=o)[0],pe=X[1],Ee=X[2],Math.abs(ee-ke)<=o1*Math.max(1,Math.abs(ee),Math.abs(ke))&&Math.abs(se-pe)<=o1*Math.max(1,Math.abs(se),Math.abs(pe))&&Math.abs(xe-Ee)<=o1*Math.max(1,Math.abs(xe),Math.abs(Ee))||0===u)return f[0]=f[1]=f[2]=0,!1;var Y,X,ee,se,xe,ke,pe,Ee;const[g,x,w]=this.dir,E=this.pos[0]-o[0],M=this.pos[1]-o[1],P=this.pos[2]-o[2],N=g*g+x*x+w*w,U=2*(E*g+M*x+P*w),j=U*U-4*N*(E*E+M*M+P*P-u*u);if(j<0){const Y=Math.max(-U/2,0),X=E+g*Y,ee=M+x*Y,se=P+w*Y,xe=Math.hypot(X,ee,se);return f[0]=X*u/xe,f[1]=ee*u/xe,f[2]=se*u/xe,!1}{const Y=(-U-Math.sqrt(j))/(2*N);if(Y<0){const X=Math.hypot(E,M,P);return f[0]=E*u/X,f[1]=M*u/X,f[2]=P*u/X,!1}return f[0]=E+g*Y,f[1]=M+x*Y,f[2]=P+w*Y,!0}}}class f1{constructor(o,u,f,g,x){this.TL=o,this.TR=u,this.BR=f,this.BL=g,this.horizon=x}static fromInvProjectionMatrix(o,u,f){const g=[-1,1,1],x=[1,1,1],w=[1,-1,1],E=[-1,-1,1],M=Vi(g,g,o),P=Vi(x,x,o),N=Vi(w,w,o),U=Vi(E,E,o);return new f1(M,P,N,U,u/f)}}class j0{constructor(o,u){this.points=o,this.planes=u}static fromInvProjectionMatrix(o,u,f,g){const x=Math.pow(2,f),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const P=_p([],M,o),N=1/P[3]/u*x;return(U=P)[0]=(j=P)[0]*(Y=[N,N,g?1/P[3]:N,N])[0],U[1]=j[1]*Y[1],U[2]=j[2]*Y[2],U[3]=j[3]*Y[3],U;var U,j,Y}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const P=_a([],Wx([],fc([],w[M[0]],w[M[1]]),fc([],w[M[2]],w[M[1]]))),N=-dc(P,w[M[1]]);return P.concat(N)});return new j0(w,E)}}class Qo{static fromPoints(o){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const g of o)l1(u,u,g),Vm(f,f,g);return new Qo(u,f)}static applyTransform(o,u){const f=o.getCorners();for(let g=0;g<f.length;++g)Vi(f[g],f[g],u);return Qo.fromPoints(f)}constructor(o,u){this.min=o,this.max=u,this.center=Pl([],nl([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],f=$x(this.min),g=$x(this.max);for(let x=0;x<u.length;x++)f[x]=u[x]?this.min[x]:this.center[x],g[x]=u[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Qo(f,g)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,u=this.max;return[[o[0],o[1],o[2]],[u[0],o[1],o[2]],[u[0],u[1],o[2]],[o[0],u[1],o[2]],[o[0],o[1],u[2]],[u[0],o[1],u[2]],[u[0],u[1],u[2]],[o[0],u[1],u[2]]]}intersects(o){const u=this.getCorners();let f=!0;for(let g=0;g<o.planes.length;g++){const x=o.planes[g];let w=0;for(let E=0;E<u.length;E++)w+=dc(x,u[E])+x[3]>=0;if(0===w)return 0;w!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<o.points.length;E++){const M=o.points[E][g]-this.min[g];x=Math.min(x,M),w=Math.max(w,M)}if(w<0||x>this.max[g]-this.min[g])return 0}return 1}}const Hc=Bn/Math.PI/2,Lo=[64,32,16],pc=-Hc,mc=Hc,qM=[new Qo([pc,pc,pc],[mc,mc,mc]),new Qo([pc,pc,pc],[0,0,mc]),new Qo([0,pc,pc],[mc,0,mc]),new Qo([pc,0,pc],[0,mc,mc]),new Qo([0,0,pc],[mc,mc,mc])];function H0(c){return c*Hc/vp}function p1(c,o,u,f=!0){const g=Pl([],c._camera.position,c.worldSize),x=[o,u,1,1];_p(x,x,c.pixelMatrixInverse),HM(x,x,1/x[3]);const w=_a([],fc([],x,g)),E=c.globeMatrix,M=[E[12],E[13],E[14]],P=fc([],M,g),N=V0(P),U=_a([],P),j=c.worldSize/(2*Math.PI),Y=dc(U,w),X=Math.asin(j/N);if(X<Math.acos(Y)){if(!f)return null;const Ft=[],lt=[];Pl(Ft,w,N/Y),_a(lt,fc(lt,Ft,P)),_a(w,nl(w,P,Pl(w,lt,Math.tan(X)*N)))}const ee=[];new Yx(g,w).closestPointOnSphere(M,j,ee);const se=_a([],id(E,0)),xe=_a([],id(E,1)),ke=_a([],id(E,2)),pe=dc(se,ee),Ee=dc(xe,ee),Fe=dc(ke,ee),Oe=Hs(Math.asin(-Ee/j));let Qe=Hs(Math.atan2(pe,Fe));Qe=c.center.lng+function(Ft,lt){const _t=(lt-Ft+180)%360-180;return _t<-180?_t+360:_t}(c.center.lng,Qe);const et=Lu(Qe),ht=dr(gc(Oe),0,1);return new jd(et,ht)}class XM{constructor(o,u,f){this.a=fc([],o,f),this.b=fc([],u,f),this.center=f;const g=_a([],this.a),x=_a([],this.b);this.angle=Math.acos(dc(g,x))}}function qx(c,o){if(0===c.angle)return null;let u;return u=0===c.a[o]?1/c.angle*.5*Math.PI:1/c.angle*Math.atan(c.b[o]/c.a[o]/Math.sin(c.angle)-1/Math.tan(c.angle)),u<0||u>1?null:function(f,g,x,w){const E=Math.sin(x);return f*(Math.sin((1-w)*x)/E)+g*(Math.sin(w*x)/E)}(c.a[o],c.b[o],c.angle,dr(u,0,1))+c.center[o]}function Ou(c){if(c.z<=1)return qM[c.z+2*c.y+c.x];const o=m1(Um(c));return Qo.fromPoints(o)}function Vd(c,o,u){return Pl(c,c,1-u),c1(c,c,o,u)}function $C(c,o){const u=yp(o.zoom);if(0===u)return Ou(c);const f=Um(c),g=m1(f),x=Lu(f.getWest())*o.worldSize,w=Lu(f.getEast())*o.worldSize,E=gc(f.getNorth())*o.worldSize,M=gc(f.getSouth())*o.worldSize,P=[x,E,0],N=[w,E,0],U=[x,M,0],j=[w,M,0],Y=B0([],o.globeMatrix);return Vi(P,P,Y),Vi(N,N,Y),Vi(U,U,Y),Vi(j,j,Y),g[0]=Vd(g[0],U,u),g[1]=Vd(g[1],j,u),g[2]=Vd(g[2],N,u),g[3]=Vd(g[3],P,u),Qo.fromPoints(g)}function WC(c,o,u){for(const f of c)Vi(f,f,o),Pl(f,f,u)}function Um({x:c,y:o,z:u}){const f=1/(1<<u),g=new Tr(il(c*f),gs((o+1)*f)),x=new Tr(il((c+1)*f),gs(o*f));return new Nd(g,x)}function m1(c){const o=Cr(c.getNorth()),u=Cr(c.getSouth()),f=Math.cos(o),g=Math.cos(u),x=Math.sin(o),w=Math.sin(u),E=c.getWest(),M=c.getEast();return[Ud(g,w,E),Ud(g,w,M),Ud(f,x,M),Ud(f,x,E)]}function Ud(c,o,u,f=Hc){return u=Cr(u),[c*Math.sin(u)*f,-o*f,c*Math.cos(u)*f]}function Rs(c,o,u){return Ud(Math.cos(Cr(c)),Math.sin(Cr(c)),o,u)}function Lh(c,o,u,f){const g=1<<u.z,x=(c/Bn+u.x)/g;return Rs(gs((o/Bn+u.y)/g),il(x),f)}function $0({min:c,max:o}){return 16383/Math.max(o[0]-c[0],o[1]-c[1],o[2]-c[2])}const Xx=new Float64Array(16);function W0(c){const o=$0(c),u=VC(Xx,[o,o,o]);return mp(u,u,((f=[])[0]=-(g=c.min)[0],f[1]=-g[1],f[2]=-g[2],f));var f,g}function g1(c){const o=(f=c.min,(u=Xx)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=f[0],u[13]=f[1],u[14]=f[2],u[15]=1,u);var u,f;const g=1/$0(c);return jc(o,o,[g,g,g])}function GC(c,o,u,f,g){const x=function(M){const P=Bn/(2*Math.PI);return M/(2*Math.PI)/P}(u),w=[c,o,-u/(2*Math.PI)],E=Uc(new Float64Array(16));return mp(E,E,w),jc(E,E,[x,x,x]),a1(E,E,Cr(-g)),Bd(E,E,Cr(-f)),E}function yp(c){return mu(5,6,c)}function YC(c,o){const u=Rs(o.lat,o.lng);return w=(g=gp([],function(X){const ee=Rs(X._center.lat,X._center.lng);let se=Wx([],zm(0,1,0),ee);const xe=Hx([],-X.angle,ee);se=Vi(se,se,xe),Hx(xe,-X._pitch,se);const ke=_a([],ee);return Pl(ke,ke,H0(X.cameraToCenterDistance/X.pixelsPerMeter)),Vi(ke,ke,xe),nl([],ee,ke)}(c),u))[0],E=g[1],M=g[2],P=(x=u)[0],N=x[1],U=x[2],Y=(j=Math.sqrt(w*w+E*E+M*M)*Math.sqrt(P*P+N*N+U*U))&&dc(g,x)/j,Math.acos(Math.min(Math.max(Y,-1),1));var g,x,w,E,M,P,N,U,j,Y}function _1(c,o){return YC(c,o)>Math.PI/2*1.01}const qC=Cr(85),ZM=Math.cos(qC),Zx=Math.sin(qC),vp=6371008.8,XC=2*Math.PI*vp;class Tr{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tr(ha(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,f=this.lat*u,g=o.lat*u,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return vp*Math.acos(Math.min(x,1))}toBounds(o=0){const u=360*o/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new Nd(new Tr(this.lng-f,this.lat-u),new Tr(this.lng+f,this.lat+u))}toEcef(o){const u=H0(o);return Rs(this.lat,this.lng,Hc+u)}static convert(o){if(o instanceof Tr)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new Tr(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new Tr(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function Kx(c){return XC*Math.cos(c*Math.PI/180)}function Lu(c){return(180+c)/360}function gc(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Ol(c,o){return c/Kx(o)}function il(c){return 360*c-180}function gs(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function y1(c,o){return c*Kx(gs(o))}const go=85.051129;function ZC(c){return 1/Math.cos(c*Math.PI/180)}class jd{constructor(o,u,f=0){this.x=+o,this.y=+u,this.z=+f}static fromLngLat(o,u=0){const f=Tr.convert(o);return new jd(Lu(f.lng),gc(f.lat),Ol(u,f.lat))}toLngLat(){return new Tr(il(this.x),gs(this.y))}toAltitude(){return y1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/XC*ZC(gs(this.y))}}function Jx(c,o,u,f,g,x,w,E,M){const P=(o+f)/2,N=(u+g)/2,U=new Xt(P,N);E(U),function(j,Y,X,ee,se,xe){const ke=X-se,pe=ee-xe;return Math.abs((ee-Y)*ke-(X-j)*pe)/Math.hypot(ke,pe)}(U.x,U.y,x.x,x.y,w.x,w.y)>=M?(Jx(c,o,u,P,N,x,U,E,M),Jx(c,P,N,f,g,U,w,E,M)):c.push(w)}function KC(c,o,u){let f=c[0],g=f.x,x=f.y;o(f);const w=[f];for(let E=1;E<c.length;E++){const M=c[E],{x:P,y:N}=M;o(M),Jx(w,g,x,P,N,f,M,o,u),g=P,x=N,f=M}return w}function Qx(c,o,u,f){if(f(o,u)){const g=o.add(u)._mult(.5);Qx(c,o,g,f),Qx(c,g,u,f)}else c.push(u)}function KM(c,o){let u=c[0];const f=[u];for(let g=1;g<c.length;g++){const x=c[g];Qx(f,u,x,o),u=x}return f}const eb=Math.pow(2,14)-1,JC=-eb-1;function QC(c,o){const u=Math.round(c.x*o),f=Math.round(c.y*o);return c.x=dr(u,JC,eb),c.y=dr(f,JC,eb),(u<c.x||u>c.x+1||f<c.y||f>c.y+1)&&zi("Geometry exceeds allowed extent, reduce your vector tile buffer size"),c}function $c(c,o,u){const f=c.loadGeometry(),g=c.extent,x=Bn/g;if(o&&u&&u.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:E,x:M,y:P,projection:N}=u,U=j=>{const Y=il((o.x+j.x/g)/w),X=gs((o.y+j.y/g)/w),ee=N.project(Y,X);j.x=(ee.x*E-M)*g,j.y=(ee.y*E-P)*g};for(let j=0;j<f.length;j++)if(1!==c.type)f[j]=KC(f[j],U,1);else{const Y=[];for(const X of f[j])X.x<0||X.x>=g||X.y<0||X.y>=g||(U(X),Y.push(X));f[j]=Y}}for(const w of f)for(const E of w)QC(E,x);return f}function Hd(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?$c(c):[]}}function jm(c,o,u,f,g){c.emplaceBack(2*o+(f+1)/2,2*u+(g+1)/2)}function v1(c,o,u){c.emplaceBack(o.x,o.y,o.z,16384*u[0],16384*u[1],16384*u[2])}class tb{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new En,this.indexArray=new fo,this.segments=new ks,this.programConfigurations=new Rd(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f,g){const x=this.layers[0],w=[];let E=null;"circle"===x.type&&(E=x.layout.get("circle-sort-key"));for(const{feature:P,id:N,index:U,sourceLayerIndex:j}of o){const Y=this.layers[0]._featureFilter.needGeometry,X=Hd(P,Y);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),X,f))continue;const ee=E?E.evaluate(X,{},f):void 0,se={id:N,properties:P.properties,type:P.type,sourceLayerIndex:j,index:U,geometry:Y?X.geometry:$c(P,f,g),patterns:{},sortKey:ee};w.push(se)}E&&w.sort((P,N)=>P.sortKey-N.sortKey);let M=null;"globe"===g.projection.name&&(this.globeExtVertexArray=new ga,M=g.projection);for(const P of w){const{geometry:N,index:U,sourceLayerIndex:j}=P,Y=o[U].feature;this.addFeature(P,N,U,u.availableImages,f,M),u.featureIndex.insert(Y,N,U,j,this.index)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jx.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,Nm.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,u,f,g,x,w){for(const E of u)for(const M of E){const P=M.x,N=M.y;if(P<0||P>=Bn||N<0||N>=Bn)continue;if(w){const Y=w.projectTilePoint(P,N,x),X=w.upVector(x,P,N),ee=this.globeExtVertexArray;v1(ee,Y,X),v1(ee,Y,X),v1(ee,Y,X),v1(ee,Y,X)}const U=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),j=U.vertexLength;jm(this.layoutVertexArray,P,N,-1,-1),jm(this.layoutVertexArray,P,N,1,-1),jm(this.layoutVertexArray,P,N,1,1),jm(this.layoutVertexArray,P,N,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+2,j+3),U.vertexLength+=4,U.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g,x)}}function nb(c,o){for(let u=0;u<c.length;u++)if(Wd(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(Wd(c,o[u]))return!0;return!!x1(c,o)}function eT(c,o,u){return!!Wd(c,o)||!!nT(o,c,u)}function $d(c,o){if(1===c.length)return rT(o,c[0]);for(let u=0;u<o.length;u++){const f=o[u];for(let g=0;g<f.length;g++)if(Wd(c,f[g]))return!0}for(let u=0;u<c.length;u++)if(rT(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(x1(c,o[u]))return!0;return!1}function tT(c,o,u){if(c.length>1){if(x1(c,o))return!0;for(let f=0;f<o.length;f++)if(nT(o[f],c,u))return!0}for(let f=0;f<c.length;f++)if(nT(c[f],o,u))return!0;return!1}function x1(c,o){if(0===c.length||0===o.length)return!1;for(let u=0;u<c.length-1;u++){const f=c[u],g=c[u+1];for(let x=0;x<o.length-1;x++)if(JM(f,g,o[x],o[x+1]))return!0}return!1}function JM(c,o,u,f){return Kl(c,u,f)!==Kl(o,u,f)&&Kl(c,o,u)!==Kl(c,o,f)}function nT(c,o,u){const f=u*u;if(1===o.length)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(G0(c,o[g-1],o[g])<f)return!0;return!1}function G0(c,o,u){const f=o.distSqr(u);if(0===f)return c.distSqr(o);const g=((c.x-o.x)*(u.x-o.x)+(c.y-o.y)*(u.y-o.y))/f;return c.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function rT(c,o){let u,f,g,x=!1;for(let w=0;w<c.length;w++){u=c[w];for(let E=0,M=u.length-1;E<u.length;M=E++)f=u[E],g=u[M],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function Wd(c,o){let u=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const x=c[f],w=c[g];x.y>o.y!=w.y>o.y&&o.x<(w.x-x.x)*(o.y-x.y)/(w.y-x.y)+x.x&&(u=!u)}return u}function rb(c,o,u,f,g){for(const w of c)if(o<=w.x&&u<=w.y&&f>=w.x&&g>=w.y)return!0;const x=[new Xt(o,u),new Xt(o,g),new Xt(f,g),new Xt(f,u)];if(c.length>2)for(const w of x)if(Wd(c,w))return!0;for(let w=0;w<c.length-1;w++)if(iT(c[w],c[w+1],x))return!0;return!1}function iT(c,o,u){const f=u[0],g=u[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const x=Kl(c,o,u[0]);return x!==Kl(c,o,u[1])||x!==Kl(c,o,u[2])||x!==Kl(c,o,u[3])}function Gd(c,o,u){const f=o.paint.get(c).value;return"constant"===f.kind?f.value:u.programConfigurations.get(o.id).getMaxValue(c)}function Y0(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function q0(c,o,u,f,g){if(!o[0]&&!o[1])return c;const x=Xt.convert(o)._mult(g);"viewport"===u&&x._rotate(-f);const w=[];for(let E=0;E<c.length;E++)w.push(c[E].sub(x));return w}function X0(c,o,u,f){const g=Xt.convert(c)._mult(f);return"viewport"===o&&g._rotate(-u),g}_n(tb,"CircleBucket",{omit:["layers"]});const sT=new Nt({"circle-sort-key":new ot(mt.layout_circle["circle-sort-key"])});var ib={paint:new Nt({"circle-radius":new ot(mt.paint_circle["circle-radius"]),"circle-color":new ot(mt.paint_circle["circle-color"]),"circle-blur":new ot(mt.paint_circle["circle-blur"]),"circle-opacity":new ot(mt.paint_circle["circle-opacity"]),"circle-translate":new Ye(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ot(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ot(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ot(mt.paint_circle["circle-stroke-opacity"])}),layout:sT};function b1(c,o,u,f,g,x,w,E,M){if(x&&c.queryGeometry.isAboveHorizon)return!1;x&&(M*=c.pixelToTileUnitsFactor);const P=c.tileID.canonical,N=u.projection.upVectorScale(P,u.center.lat,u.worldSize).metersToTile;for(const U of o)for(const j of U){const Y=j.add(E),X=g&&u.elevation?u.elevation.exaggeration()*g.getElevationAt(Y.x,Y.y,!0):0,ee=u.projection.projectTilePoint(Y.x,Y.y,P);if(X>0){const pe=u.projection.upVector(P,Y.x,Y.y);ee.x+=pe[0]*N*X,ee.y+=pe[1]*N*X,ee.z+=pe[2]*N*X}const se=x?Y:sb(ee.x,ee.y,ee.z,f),xe=x?c.tilespaceRays.map(pe=>oT(pe,X)):c.queryGeometry.screenGeometry,ke=_p([],[ee.x,ee.y,ee.z,1],f);if(!w&&x?M*=ke[3]/u.cameraToCenterDistance:w&&!x&&(M*=u.cameraToCenterDistance/ke[3]),x){const pe=gs((j.y/Bn+P.y)/(1<<P.z));M/=u.projection.pixelsPerMeter(pe,1)/Ol(1,pe)}if(eT(xe,se,M))return!0}return!1}function sb(c,o,u,f){const g=_p([],[c,o,u,1],f);return new Xt(g[0]/g[3],g[1]/g[3])}const Hm=zm(0,0,0),QM=zm(0,0,1);function oT(c,o){const u=Bm();return Hm[2]=o,c.intersectsPlane(Hm,QM,u),new Xt(u[0],u[1])}class aT extends tb{}function lT(c,{width:o,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*f)throw new RangeError("mismatched image size")}else g=new Uint8Array(o*u*f);return c.width=o,c.height=u,c.data=g,c}function cT(c,o,u){const{width:f,height:g}=o;f===c.width&&g===c.height||(w1(c,o,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,f),height:Math.min(c.height,g)},u),c.width=f,c.height=g,c.data=o.data)}function w1(c,o,u,f,g,x){if(0===g.width||0===g.height)return o;if(g.width>c.width||g.height>c.height||u.x>c.width-g.width||u.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,E=o.data;for(let M=0;M<g.height;M++){const P=((u.y+M)*c.width+u.x)*x,N=((f.y+M)*o.width+f.x)*x;for(let U=0;U<g.width*x;U++)E[N+U]=w[P+U]}return o}_n(aT,"HeatmapBucket",{omit:["layers"]});class Fu{constructor(o,u){lT(this,o,1,u)}resize(o){cT(this,new Fu(o),1)}clone(){return new Fu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){w1(o,u,f,g,x,1)}}class ea{constructor(o,u){lT(this,o,4,u)}resize(o){cT(this,new ea(o),4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){w1(o,u,f,g,x,4)}}_n(Fu,"AlphaImage"),_n(ea,"RGBAImage");var ob={paint:new Nt({"heatmap-radius":new ot(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ot(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new kt(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(mt.paint_heatmap["heatmap-opacity"])})};function Yd(c){const o={},u=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new ea({width:u,height:f}),x=(w,E,M)=>{o[c.evaluationKey]=M;const P=c.expression.evaluate(o);g.data[w+E+0]=Math.floor(255*P.r/P.a),g.data[w+E+1]=Math.floor(255*P.g/P.a),g.data[w+E+2]=Math.floor(255*P.b/P.a),g.data[w+E+3]=Math.floor(255*P.a)};if(c.clips)for(let w=0,E=0;w<f;++w,E+=4*u)for(let M=0,P=0;M<u;M++,P+=4){const N=M/(u-1),{start:U,end:j}=c.clips[w];x(E,P,U*(1-N)+j*N)}else for(let w=0,E=0;w<u;w++,E+=4)x(0,E,w/(u-1));return g}var ek={paint:new Nt({"hillshade-illumination-direction":new Ye(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(mt.paint_hillshade["hillshade-accent-color"])})};const tk=Cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:xF}=tk;var $m={};function Wm(c,o,u){u=u||2;var f,g,x,w,E,M,P,N=o&&o.length,U=N?o[0]*u:c.length,j=uT(c,0,U,u,!0),Y=[];if(!j||j.next===j.prev)return Y;if(N&&(j=function(ee,se,xe,ke){var pe,Ee,Fe,Oe=[];for(pe=0,Ee=se.length;pe<Ee;pe++)(Fe=uT(ee,se[pe]*ke,pe<Ee-1?se[pe+1]*ke:ee.length,ke,!1))===Fe.next&&(Fe.steiner=!0),Oe.push(ik(Fe));for(Oe.sort(xp),pe=0;pe<Oe.length;pe++)xe=nk(Oe[pe],xe);return xe}(c,o,j,u)),c.length>80*u){f=x=c[0],g=w=c[1];for(var X=u;X<U;X+=u)(E=c[X])<f&&(f=E),(M=c[X+1])<g&&(g=M),E>x&&(x=E),M>w&&(w=M);P=0!==(P=Math.max(x-f,w-g))?32767/P:0}return Xd(j,Y,u,f,g,P,0),Y}function uT(c,o,u,f,g){var x,w;if(g===hb(c,o,u,f)>0)for(x=o;x<u;x+=f)w=cb(x,c[x],c[x+1],w);else for(x=u-f;x>=o;x-=f)w=cb(x,c[x],c[x+1],w);return w&&C1(w,w.next)&&(K0(w),w=w.next),w}function qd(c,o){if(!c)return c;o||(o=c);var u,f=c;do{if(u=!1,f.steiner||!C1(f,f.next)&&0!==bi(f.prev,f,f.next))f=f.next;else{if(K0(f),(f=o=f.prev)===f.next)break;u=!0}}while(u||f!==o);return o}function Xd(c,o,u,f,g,x,w){if(c){!w&&x&&function(N,U,j,Y){var X=N;do{0===X.z&&(X.z=lb(X.x,X.y,U,j,Y)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next}while(X!==N);X.prevZ.nextZ=null,X.prevZ=null,function(ee){var se,xe,ke,pe,Ee,Fe,Oe,Qe,et=1;do{for(xe=ee,ee=null,Ee=null,Fe=0;xe;){for(Fe++,ke=xe,Oe=0,se=0;se<et&&(Oe++,ke=ke.nextZ);se++);for(Qe=et;Oe>0||Qe>0&&ke;)0!==Oe&&(0===Qe||!ke||xe.z<=ke.z)?(pe=xe,xe=xe.nextZ,Oe--):(pe=ke,ke=ke.nextZ,Qe--),Ee?Ee.nextZ=pe:ee=pe,pe.prevZ=Ee,Ee=pe;xe=ke}Ee.nextZ=null,et*=2}while(Fe>1)}(X)}(c,f,g,x);for(var E,M,P=c;c.prev!==c.next;)if(E=c.prev,M=c.next,x?hT(c,f,g,x):ab(c))o.push(E.i/u|0),o.push(c.i/u|0),o.push(M.i/u|0),K0(c),c=M.next,P=M.next;else if((c=M)===P){w?1===w?Xd(c=dT(qd(c),o,u),o,u,f,g,x,2):2===w&&fT(c,o,u,f,g,x):Xd(qd(c),o,u,f,g,x,1);break}}}function ab(c){var o=c.prev,u=c,f=c.next;if(bi(o,u,f)>=0)return!1;for(var g=o.x,x=u.x,w=f.x,E=o.y,M=u.y,P=f.y,N=g<x?g<w?g:w:x<w?x:w,U=E<M?E<P?E:P:M<P?M:P,j=g>x?g>w?g:w:x>w?x:w,Y=E>M?E>P?E:P:M>P?M:P,X=f.next;X!==o;){if(X.x>=N&&X.x<=j&&X.y>=U&&X.y<=Y&&Gm(g,E,x,M,w,P,X.x,X.y)&&bi(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function hT(c,o,u,f){var g=c.prev,x=c,w=c.next;if(bi(g,x,w)>=0)return!1;for(var E=g.x,M=x.x,P=w.x,N=g.y,U=x.y,j=w.y,Y=E<M?E<P?E:P:M<P?M:P,X=N<U?N<j?N:j:U<j?U:j,ee=E>M?E>P?E:P:M>P?M:P,se=N>U?N>j?N:j:U>j?U:j,xe=lb(Y,X,o,u,f),ke=lb(ee,se,o,u,f),pe=c.prevZ,Ee=c.nextZ;pe&&pe.z>=xe&&Ee&&Ee.z<=ke;){if(pe.x>=Y&&pe.x<=ee&&pe.y>=X&&pe.y<=se&&pe!==g&&pe!==w&&Gm(E,N,M,U,P,j,pe.x,pe.y)&&bi(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,Ee.x>=Y&&Ee.x<=ee&&Ee.y>=X&&Ee.y<=se&&Ee!==g&&Ee!==w&&Gm(E,N,M,U,P,j,Ee.x,Ee.y)&&bi(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;pe&&pe.z>=xe;){if(pe.x>=Y&&pe.x<=ee&&pe.y>=X&&pe.y<=se&&pe!==g&&pe!==w&&Gm(E,N,M,U,P,j,pe.x,pe.y)&&bi(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;Ee&&Ee.z<=ke;){if(Ee.x>=Y&&Ee.x<=ee&&Ee.y>=X&&Ee.y<=se&&Ee!==g&&Ee!==w&&Gm(E,N,M,U,P,j,Ee.x,Ee.y)&&bi(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function dT(c,o,u){var f=c;do{var g=f.prev,x=f.next.next;!C1(g,x)&&pT(g,f,f.next,x)&&Z0(g,x)&&Z0(x,g)&&(o.push(g.i/u|0),o.push(f.i/u|0),o.push(x.i/u|0),K0(f),K0(f.next),f=c=x),f=f.next}while(f!==c);return qd(f)}function fT(c,o,u,f,g,x){var w=c;do{for(var E=w.next.next;E!==w.prev;){if(w.i!==E.i&&Ll(w,E)){var M=mT(w,E);return w=qd(w,w.next),M=qd(M,M.next),Xd(w,o,u,f,g,x,0),void Xd(M,o,u,f,g,x,0)}E=E.next}w=w.next}while(w!==c)}function xp(c,o){return c.x-o.x}function nk(c,o){var u=function(g,x){var w,E=x,M=g.x,P=g.y,N=-1/0;do{if(P<=E.y&&P>=E.next.y&&E.next.y!==E.y){var U=E.x+(P-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(U<=M&&U>N&&(N=U,w=E.x<E.next.x?E:E.next,U===M))return w}E=E.next}while(E!==x);if(!w)return null;var j,Y=w,X=w.x,ee=w.y,se=1/0;E=w;do{M>=E.x&&E.x>=X&&M!==E.x&&Gm(P<ee?M:N,P,X,ee,P<ee?N:M,P,E.x,E.y)&&(j=Math.abs(P-E.y)/(M-E.x),Z0(E,g)&&(j<se||j===se&&(E.x>w.x||E.x===w.x&&rk(w,E)))&&(w=E,se=j)),E=E.next}while(E!==Y);return w}(c,o);if(!u)return o;var f=mT(u,c);return qd(f,f.next),qd(u,u.next)}function rk(c,o){return bi(c.prev,c,o.prev)<0&&bi(o.next,c,c.next)<0}function lb(c,o,u,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function ik(c){var o=c,u=c;do{(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next}while(o!==c);return u}function Gm(c,o,u,f,g,x,w,E){return(g-w)*(o-E)>=(c-w)*(x-E)&&(c-w)*(f-E)>=(u-w)*(o-E)&&(u-w)*(x-E)>=(g-w)*(f-E)}function Ll(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!function(u,f){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&pT(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(c,o)&&(Z0(c,o)&&Z0(o,c)&&function(u,f){var g=u,x=!1,w=(u.x+f.x)/2,E=(u.y+f.y)/2;do{g.y>E!=g.next.y>E&&g.next.y!==g.y&&w<(g.next.x-g.x)*(E-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next}while(g!==u);return x}(c,o)&&(bi(c.prev,c,o.prev)||bi(c,o.prev,o))||C1(c,o)&&bi(c.prev,c,c.next)>0&&bi(o.prev,o,o.next)>0)}function bi(c,o,u){return(o.y-c.y)*(u.x-o.x)-(o.x-c.x)*(u.y-o.y)}function C1(c,o){return c.x===o.x&&c.y===o.y}function pT(c,o,u,f){var g=E1(bi(c,o,u)),x=E1(bi(c,o,f)),w=E1(bi(u,f,c)),E=E1(bi(u,f,o));return g!==x&&w!==E||!(0!==g||!T1(c,u,o))||!(0!==x||!T1(c,f,o))||!(0!==w||!T1(u,c,f))||!(0!==E||!T1(u,o,f))}function T1(c,o,u){return o.x<=Math.max(c.x,u.x)&&o.x>=Math.min(c.x,u.x)&&o.y<=Math.max(c.y,u.y)&&o.y>=Math.min(c.y,u.y)}function E1(c){return c>0?1:c<0?-1:0}function Z0(c,o){return bi(c.prev,c,c.next)<0?bi(c,o,c.next)>=0&&bi(c,c.prev,o)>=0:bi(c,o,c.prev)<0||bi(c,c.next,o)<0}function mT(c,o){var u=new ub(c.i,c.x,c.y),f=new ub(o.i,o.x,o.y),g=c.next,x=o.prev;return c.next=o,o.prev=c,u.next=g,g.prev=u,f.next=u,u.prev=f,x.next=f,f.prev=x,f}function cb(c,o,u,f){var g=new ub(c,o,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function K0(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function ub(c,o,u){this.i=c,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hb(c,o,u,f){for(var g=0,x=o,w=u-f;x<u;x+=f)g+=(c[w]-c[x])*(c[x+1]+c[w+1]),w=x;return g}function sk(c,o,u,f,g){J0(c,o,u||0,f||c.length-1,g||Q0)}function J0(c,o,u,f,g){for(;f>u;){if(f-u>600){var x=f-u+1,w=o-u+1,E=Math.log(x),M=.5*Math.exp(2*E/3),P=.5*Math.sqrt(E*M*(x-M)/x)*(w-x/2<0?-1:1);J0(c,o,Math.max(u,Math.floor(o-w*M/x+P)),Math.min(f,Math.floor(o+(x-w)*M/x+P)),g)}var N=c[o],U=u,j=f;for(Fl(c,u,o),g(c[f],N)>0&&Fl(c,u,f);U<j;){for(Fl(c,U,j),U++,j--;g(c[U],N)<0;)U++;for(;g(c[j],N)>0;)j--}0===g(c[u],N)?Fl(c,u,j):Fl(c,++j,f),j<=o&&(u=j+1),o<=j&&(f=j-1)}}function Fl(c,o,u){var f=c[o];c[o]=c[u],c[u]=f}function Q0(c,o){return c<o?-1:c>o?1:0}function S1(c,o){const u=c.length;if(u<=1)return[c];const f=[];let g,x;for(let w=0;w<u;w++){const E=Fr(c[w]);0!==E&&(c[w].area=Math.abs(E),void 0===x&&(x=E<0),x===E<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(sk(f[w],o,1,f[w].length-1,gT),f[w]=f[w].slice(0,o));return f}function gT(c,o){return o.area-c.area}function D1(c,o,u){const f=u.patternDependencies;let g=!1;for(const x of o){const w=x.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const E=w.constantOr(null);E&&(g=!0,f[E]=!0)}return g}function _T(c,o,u,f,g){const x=g.patternDependencies;for(const w of o){const E=w.paint.get(`${c}-pattern`).value;if("constant"!==E.kind){let M=E.evaluate({zoom:f},u,{},g.availableImages);M=M&&M.name?M.name:M,x[M]=!0,u.patterns[w.id]=M}}return u}({get exports(){return $m},set exports(c){$m=c}}).exports=Wm,$m.default=Wm,Wm.deviation=function(c,o,u,f){var g=o&&o.length,x=Math.abs(hb(c,0,g?o[0]*u:c.length,u));if(g)for(var w=0,E=o.length;w<E;w++)x-=Math.abs(hb(c,o[w]*u,w<E-1?o[w+1]*u:c.length,u));var M=0;for(w=0;w<f.length;w+=3){var P=f[w]*u,N=f[w+1]*u,U=f[w+2]*u;M+=Math.abs((c[P]-c[U])*(c[N+1]-c[P+1])-(c[P]-c[N])*(c[U+1]-c[P+1]))}return 0===x&&0===M?0:Math.abs((M-x)/x)},Wm.flatten=function(c){for(var o=c[0][0].length,u={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var x=0;x<c[g].length;x++)for(var w=0;w<o;w++)u.vertices.push(c[g][x][w]);g>0&&u.holes.push(f+=c[g-1].length)}return u};class db{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new En,this.indexArray=new fo,this.indexArray2=new Bc,this.programConfigurations=new Rd(o.layers,o.zoom),this.segments=new ks,this.segments2=new ks,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection}populate(o,u,f,g){this.hasPattern=D1("fill",this.layers,u);const x=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:E,id:M,index:P,sourceLayerIndex:N}of o){const U=this.layers[0]._featureFilter.needGeometry,j=Hd(E,U);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),j,f))continue;const Y=x?x.evaluate(j,{},f,u.availableImages):void 0,X={id:M,properties:E.properties,type:E.type,sourceLayerIndex:N,index:P,geometry:U?j.geometry:$c(E,f,g),patterns:{},sortKey:Y};w.push(X)}x&&w.sort((E,M)=>E.sortKey-M.sortKey);for(const E of w){const{geometry:M,index:P,sourceLayerIndex:N}=E;if(this.hasPattern){const U=_T("fill",this.layers,E,this.zoom,u);this.patternFeatures.push(U)}else this.addFeature(E,M,P,f,{},u.availableImages);u.featureIndex.insert(o[P].feature,M,P,N,this.index)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}addFeatures(o,u,f,g,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,u,f,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,xF),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,f,g,x,w=[]){for(const E of S1(u,500)){let M=0;for(const X of E)M+=X.length;const P=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),N=P.vertexLength,U=[],j=[];for(const X of E){if(0===X.length)continue;X!==E[0]&&j.push(U.length/2);const ee=this.segments2.prepareSegment(X.length,this.layoutVertexArray,this.indexArray2),se=ee.vertexLength;this.layoutVertexArray.emplaceBack(X[0].x,X[0].y),this.indexArray2.emplaceBack(se+X.length-1,se),U.push(X[0].x),U.push(X[0].y);for(let xe=1;xe<X.length;xe++)this.layoutVertexArray.emplaceBack(X[xe].x,X[xe].y),this.indexArray2.emplaceBack(se+xe-1,se+xe),U.push(X[xe].x),U.push(X[xe].y);ee.vertexLength+=X.length,ee.primitiveLength+=X.length}const Y=$m(U,j);for(let X=0;X<Y.length;X+=3)this.indexArray.emplaceBack(N+Y[X],N+Y[X+1],N+Y[X+2]);P.vertexLength+=M,P.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,w,g)}}_n(db,"FillBucket",{omit:["layers","patternFeatures"]});const bF=new Nt({"fill-sort-key":new ot(mt.layout_fill["fill-sort-key"])});var fb={paint:new Nt({"fill-antialias":new Ye(mt.paint_fill["fill-antialias"]),"fill-opacity":new ot(mt.paint_fill["fill-opacity"]),"fill-color":new ot(mt.paint_fill["fill-color"]),"fill-outline-color":new ot(mt.paint_fill["fill-outline-color"]),"fill-translate":new Ye(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ot(mt.paint_fill["fill-pattern"])}),layout:bF};const pb=Cn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),wF=Cn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),CF=Cn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:yT}=pb;var M1={},ok=Xt,vT=Ym;function Ym(c,o,u,f,g){this.properties={},this.extent=u,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(xT,this,o)}function xT(c,o,u){1==c?o.id=u.readVarint():2==c?function(f,g){for(var x=f.readVarint()+f.pos;f.pos<x;){var w=g._keys[f.readVarint()],E=g._values[f.readVarint()];g.properties[w]=E}}(u,o):3==c?o.type=u.readVarint():4==c&&(o._geometry=u.pos)}function k1(c){for(var o,u,f=0,g=0,x=c.length,w=x-1;g<x;w=g++)f+=((u=c[w]).x-(o=c[g]).x)*(o.y+u.y);return f}Ym.types=["Unknown","Point","LineString","Polygon"],Ym.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,u=c.readVarint()+c.pos,f=1,g=0,x=0,w=0,E=[];c.pos<u;){if(g<=0){var M=c.readVarint();f=7&M,g=M>>3}if(g--,1===f||2===f)x+=c.readSVarint(),w+=c.readSVarint(),1===f&&(o&&E.push(o),o=[]),o.push(new ok(x,w));else{if(7!==f)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&E.push(o),E},Ym.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,u=1,f=0,g=0,x=0,w=1/0,E=-1/0,M=1/0,P=-1/0;c.pos<o;){if(f<=0){var N=c.readVarint();u=7&N,f=N>>3}if(f--,1===u||2===u)(g+=c.readSVarint())<w&&(w=g),g>E&&(E=g),(x+=c.readSVarint())<M&&(M=x),x>P&&(P=x);else if(7!==u)throw new Error("unknown command "+u)}return[w,M,E,P]},Ym.prototype.toGeoJSON=function(c,o,u){var f,g,x=this.extent*Math.pow(2,u),w=this.extent*c,E=this.extent*o,M=this.loadGeometry(),P=Ym.types[this.type];function N(Y){for(var X=0;X<Y.length;X++){var ee=Y[X];Y[X]=[360*(ee.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+E)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(f=0;f<M.length;f++)U[f]=M[f][0];N(M=U);break;case 2:for(f=0;f<M.length;f++)N(M[f]);break;case 3:for(M=function(Y){var X=Y.length;if(X<=1)return[Y];for(var ee,se,xe=[],ke=0;ke<X;ke++){var pe=k1(Y[ke]);0!==pe&&(void 0===se&&(se=pe<0),se===pe<0?(ee&&xe.push(ee),ee=[Y[ke]]):ee.push(Y[ke]))}return ee&&xe.push(ee),xe}(M),f=0;f<M.length;f++)for(g=0;g<M[f].length;g++)N(M[f][g])}1===M.length?M=M[0]:P="Multi"+P;var j={type:"Feature",geometry:{type:P,coordinates:M},properties:this.properties};return"id"in this&&(j.id=this.id),j};var bT=vT,A1=wT;function wT(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(Gi,this,o),this.length=this._features.length}function Gi(c,o,u){15===c?o.version=u.readVarint():1===c?o.name=u.readString():5===c?o.extent=u.readVarint():2===c?o._features.push(u.pos):3===c?o._keys.push(u.readString()):4===c&&o._values.push(function(f){for(var g=null,x=f.readVarint()+f.pos;f.pos<x;){var w=f.readVarint()>>3;g=1===w?f.readString():2===w?f.readFloat():3===w?f.readDouble():4===w?f.readVarint64():5===w?f.readVarint():6===w?f.readSVarint():7===w?f.readBoolean():null}return g}(u))}wT.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new bT(this._pbf,o,this.extent,this._keys,this._values)};var ak=A1;function lk(c,o,u){if(3===c){var f=new ak(u,u.readVarint()+u.pos);f.length&&(o[f.name]=f)}}var Zi=M1.VectorTile=function(c,o){this.layers=c.readFields(lk,{},o)},e_=M1.VectorTileFeature=vT;function I1(c,o,u,f){const g=[],x=0===f?(w,E,M,P,N,U)=>{w.push(new Xt(U,M+(U-E)/(P-E)*(N-M)))}:(w,E,M,P,N,U)=>{w.push(new Xt(E+(U-M)/(N-M)*(P-E),U))};for(const w of c){const E=[];for(const M of w){if(M.length<=2)continue;const P=[];for(let j=0;j<M.length-1;j++){const Y=M[j].x,X=M[j].y,ee=M[j+1].x,se=M[j+1].y,xe=0===f?Y:X,ke=0===f?ee:se;xe<o?ke>o&&x(P,Y,X,ee,se,o):xe>u?ke<u&&x(P,Y,X,ee,se,u):P.push(M[j]),ke<o&&xe>=o&&x(P,Y,X,ee,se,o),ke>u&&xe<=u&&x(P,Y,X,ee,se,u)}let N=M[M.length-1];const U=0===f?N.x:N.y;U>=o&&U<=u&&P.push(N),P.length&&(N=P[P.length-1],P[0].x===N.x&&P[0].y===N.y||P.push(P[0]),E.push(P))}E.length&&g.push(E)}return g}M1.VectorTileLayer=A1;const ck=e_.types,uk=Math.pow(2,13);function t_(c,o,u,f,g,x,w,E){c.emplaceBack((o<<1)+w,(u<<1)+x,(Math.floor(f*uk)<<1)+g,Math.round(E))}function qm(c,o,u){c.emplaceBack(o.x,o.y,o.z,16384*u[0],16384*u[1],16384*u[2])}class hk{constructor(){this.acc=new Xt(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Xt(o.x,o.y),this.max=new Xt(o.x,o.y))}append(o,u){this.currentPolyCount.edges++,this.acc._add(o);const f=this.min,g=this.max;o.x<f.x?f.x=o.x:o.x>g.x&&(g.x=o.x),o.y<f.y?f.y=o.y:o.y>g.y&&(g.y=o.y),((0===o.x||o.x===Bn)&&o.x===u.x)!=((0===o.y||o.y===Bn)&&o.y===u.y)&&this.processBorderOverlap(o,u),u.x<0!=o.x<0&&this.addBorderIntersection(0,Er(u.y,o.y,(0-u.x)/(o.x-u.x))),u.x>Bn!=o.x>Bn&&this.addBorderIntersection(1,Er(u.y,o.y,(Bn-u.x)/(o.x-u.x))),u.y<0!=o.y<0&&this.addBorderIntersection(2,Er(u.x,o.x,(0-u.y)/(o.y-u.y))),u.y>Bn!=o.y>Bn&&this.addBorderIntersection(3,Er(u.x,o.x,(Bn-u.y)/(o.y-u.y)))}addBorderIntersection(o,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[o];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(o,u){if(o.x===u.x){if(o.y===u.y)return;const f=0===o.x?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,o.y)}else{const f=0===o.y?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,o.x)}}centroid(){const o=this.polyCount.reduce((u,f)=>u+f.edges,0);return 0!==o?this.acc.div(o)._round():new Xt(0,0)}span(){return new Xt(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((o,u)=>o+ +(u[0]!==Number.MAX_VALUE),0)}}class P1{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new oi,this.centroidVertexArray=new Bx,this.indexArray=new fo,this.programConfigurations=new Rd(o.layers,o.zoom),this.segments=new ks,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=o.enableTerrain}populate(o,u,f,g){this.features=[],this.hasPattern=D1("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(x){const w=Math.exp(Math.PI*(1-x.y/(1<<x.z)*2));return 80150034*w/(w*w+1)/Bn/(1<<x.z)}(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:x,id:w,index:E,sourceLayerIndex:M}of o){const P=this.layers[0]._featureFilter.needGeometry,N=Hd(x,P);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),N,f))continue;const U={id:w,sourceLayerIndex:M,index:E,geometry:P?N.geometry:$c(x,f,g),properties:x.properties,type:x.type,patterns:{}},j=this.layoutVertexArray.length;this.hasPattern?this.features.push(_T("fill-extrusion",this.layers,U,this.zoom,u)):this.addFeature(U,U.geometry,E,f,{},u.availableImages,g),u.featureIndex.insert(x,U.geometry,E,M,this.index,j)}this.sortBorders()}addFeatures(o,u,f,g,x){for(const w of this.features){const{geometry:E}=w;this.addFeature(w,E,w.index,u,f,g,x)}this.sortBorders()}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,yT),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,CF.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,wF.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,f,g,x,w,E){const M=[new Xt(0,0),new Xt(Bn,Bn)],P=E.projection,N="globe"===P.name,U=this.enableTerrain&&!N?new hk:null,j="Polygon"===ck[o.type];N&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ga);const Y=S1(u,500);for(let xe=Y.length-1;xe>=0;xe--){const ke=Y[xe];(0===ke.length||(X=ke[0]).every(pe=>pe.x<=0)||X.every(pe=>pe.x>=Bn)||X.every(pe=>pe.y<=0)||X.every(pe=>pe.y>=Bn))&&Y.splice(xe,1)}var X;let ee;if(N)ee=yb(Y,M,g);else{ee=[];for(const xe of Y)ee.push({polygon:xe,bounds:M})}const se=j?this.edgeRadius:0;for(const{polygon:xe,bounds:ke}of ee){let pe=0,Ee=0;for(const Oe of xe)j&&!Oe[0].equals(Oe[Oe.length-1])&&Oe.push(Oe[0]),Ee+=j?Oe.length-1:Oe.length;const Fe=this.segments.prepareSegment((j?5:4)*Ee,this.layoutVertexArray,this.indexArray);if(j){const Oe=[],Qe=[];pe=Fe.vertexLength;for(const ht of xe){let Ft,lt;ht.length&&ht!==xe[0]&&Qe.push(Oe.length/2),Ft=ht[1].sub(ht[0])._perp()._unit();for(let _t=1;_t<ht.length;_t++){const ft=ht[_t],It=ht[_t===ht.length-1?1:_t+1];let{x:Bt,y:ct}=ft;if(se){lt=It.sub(ft)._perp()._unit();const Gt=Ft.add(lt)._unit(),An=se*Math.min(4,1/(Ft.x*Gt.x+Ft.y*Gt.y));Bt+=An*Gt.x,ct+=An*Gt.y,Ft=lt}t_(this.layoutVertexArray,Bt,ct,0,0,1,1,0),Fe.vertexLength++,Oe.push(ft.x,ft.y),N&&qm(this.layoutVertexExtArray,P.projectTilePoint(Bt,ct,g),P.upVector(g,Bt,ct))}}const et=$m(Oe,Qe);for(let ht=0;ht<et.length;ht+=3)this.indexArray.emplaceBack(pe+et[ht],pe+et[ht+2],pe+et[ht+1]),Fe.primitiveLength++}for(const Oe of xe){U&&Oe.length&&U.startRing(Oe[0]);let Qe,et,ht,Ft=Oe.length>4&&_b(Oe[Oe.length-2],Oe[0],Oe[1]),lt=se?O1(Oe[Oe.length-2],Oe[0],Oe[1],se):0;et=Oe[1].sub(Oe[0])._perp()._unit();let _t=!0;for(let ft=1,It=0;ft<Oe.length;ft++){let Bt=Oe[ft-1],ct=Oe[ft];const Gt=Oe[ft===Oe.length-1?1:ft+1];if(U&&j&&U.currentPolyCount.top++,gb(ct,Bt,ke)){se&&(et=Gt.sub(ct)._perp()._unit(),_t=!_t);continue}U&&U.append(ct,Bt);const An=ct.sub(Bt)._perp(),Qt=An.x/(Math.abs(An.x)+Math.abs(An.y)),hn=An.y>0?1:0,Yt=Bt.dist(ct);if(It+Yt>32768&&(It=0),se){ht=Gt.sub(ct)._perp()._unit();let or=mb(Bt,ct,Gt,Xm(et,ht),se);isNaN(or)&&(or=0);const Nn=ct.sub(Bt)._unit();Bt=Bt.add(Nn.mult(lt))._round(),ct=ct.add(Nn.mult(-or))._round(),lt=or,et=ht}const Pn=Fe.vertexLength,gr=Oe.length>4&&_b(Bt,ct,Gt);let cr=CT(It,Ft,_t);if(t_(this.layoutVertexArray,Bt.x,Bt.y,Qt,hn,0,0,cr),t_(this.layoutVertexArray,Bt.x,Bt.y,Qt,hn,0,1,cr),It+=Yt,cr=CT(It,gr,!_t),Ft=gr,t_(this.layoutVertexArray,ct.x,ct.y,Qt,hn,0,0,cr),t_(this.layoutVertexArray,ct.x,ct.y,Qt,hn,0,1,cr),Fe.vertexLength+=4,this.indexArray.emplaceBack(Pn+0,Pn+1,Pn+2),this.indexArray.emplaceBack(Pn+1,Pn+3,Pn+2),Fe.primitiveLength+=2,se){const or=pe+(1===ft?Oe.length-2:ft-2),Nn=1===ft?pe:or+1;if(this.indexArray.emplaceBack(Pn+1,or,Pn+3),this.indexArray.emplaceBack(or,Nn,Pn+3),Fe.primitiveLength+=2,void 0===Qe&&(Qe=Pn),!gb(Gt,Oe[ft],ke)){const Zr=ft===Oe.length-1?Qe:Fe.vertexLength;this.indexArray.emplaceBack(Pn+2,Pn+3,Zr),this.indexArray.emplaceBack(Pn+3,Zr+1,Zr),this.indexArray.emplaceBack(Pn+3,Nn,Zr+1),Fe.primitiveLength+=3}_t=!_t}if(N){const or=this.layoutVertexExtArray,Nn=P.projectTilePoint(Bt.x,Bt.y,g),Zr=P.projectTilePoint(ct.x,ct.y,g),Wn=P.upVector(g,Bt.x,Bt.y),_r=P.upVector(g,ct.x,ct.y);qm(or,Nn,Wn),qm(or,Nn,Wn),qm(or,Zr,_r),qm(or,Zr,_r)}}j&&(pe+=Oe.length-1)}}if(U&&U.polyCount.length>0){if(U.borders){U.vertexArrayOffset=this.centroidVertexArray.length;const xe=U.borders,ke=this.featuresOnBorder.push(U)-1;for(let pe=0;pe<4;pe++)xe[pe][0]!==Number.MAX_VALUE&&this.borders[pe].push(ke)}this.encodeCentroid(U.borders?void 0:U.centroid(),U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,w,g)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort((u,f)=>this.featuresOnBorder[u].borders[o][0]-this.featuresOnBorder[f].borders[o][0])}encodeCentroid(o,u,f=!0){let g,x;if(o)if(0!==o.y){const E=u.span()._mult(this.tileToMeter);g=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(E.x/10)),x=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else g=Math.ceil(7*(o.x+450)),x=0;else g=0,x=+f;let w=f?this.centroidVertexArray.length:u.vertexArrayOffset;for(const E of u.polyCount){f&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let M=0;M<E.top;M++)this.centroidVertexArray.emplace(w++,g,x);for(let M=0;M<2*E.edges;M++)this.centroidVertexArray.emplace(w++,0,x),this.centroidVertexArray.emplace(w++,g,x)}}}function Xm(c,o){const u=c.add(o)._unit();return c.x*u.x+c.y*u.y}function O1(c,o,u,f){const g=o.sub(c)._perp()._unit(),x=u.sub(o)._perp()._unit();return mb(c,o,u,Xm(g,x),f)}function mb(c,o,u,f,g){const x=Math.sqrt(1-f*f);return Math.min(c.dist(o)/3,o.dist(u)/3,g*x/f)}function gb(c,o,u){return c.x<u[0].x&&o.x<u[0].x||c.x>u[1].x&&o.x>u[1].x||c.y<u[0].y&&o.y<u[0].y||c.y>u[1].y&&o.y>u[1].y}function _b(c,o,u){if(c.x<0||c.x>=Bn||o.x<0||o.x>=Bn||u.x<0||u.x>=Bn)return!1;const f=u.sub(o),g=f.perp(),x=c.sub(o);return(f.x*x.x+f.y*x.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(x.x*x.x+x.y*x.y))>-.866&&g.x*x.x+g.y*x.y<0}function CT(c,o,u){const f=o?2|c:-3&c;return u?1|f:-2&f}function TT(){const c=Math.PI/32,o=Math.tan(c),u=vp;return u*Math.sqrt(1+2*o*o)-u}function yb(c,o,u){const f=1<<u.z,g=il(u.x/f),x=il((u.x+1)/f),w=gs(u.y/f),E=gs((u.y+1)/f);return function(M,P,N,U,j=0,Y){const X=[];if(!M.length||!N||!U)return X;const ee=(Oe,Qe)=>{for(const et of Oe)X.push({polygon:et,bounds:Qe})},se=Math.ceil(Math.log2(N)),xe=Math.ceil(Math.log2(U)),ke=se-xe,pe=[];for(let Oe=0;Oe<Math.abs(ke);Oe++)pe.push(ke>0?0:1);for(let Oe=0;Oe<Math.min(se,xe);Oe++)pe.push(0),pe.push(1);let Ee=M;if(Ee=I1(Ee,P[0].y-j,P[1].y+j,1),Ee=I1(Ee,P[0].x-j,P[1].x+j,0),!Ee.length)return X;const Fe=[];for(pe.length?Fe.push({polygons:Ee,bounds:P,depth:0}):ee(Ee,P);Fe.length;){const Oe=Fe.pop(),Qe=Oe.depth,et=pe[Qe],ht=Oe.bounds[0],Ft=Oe.bounds[1],lt=0===et?ht.x:ht.y,_t=0===et?Ft.x:Ft.y,ft=Y?Y(et,lt,_t):.5*(lt+_t),It=I1(Oe.polygons,lt-j,ft+j,et),Bt=I1(Oe.polygons,ft-j,_t+j,et);if(It.length){const ct=[ht,new Xt(0===et?ft:Ft.x,1===et?ft:Ft.y)];pe.length>Qe+1?Fe.push({polygons:It,bounds:ct,depth:Qe+1}):ee(It,ct)}if(Bt.length){const ct=[new Xt(0===et?ft:ht.x,1===et?ft:ht.y),Ft];pe.length>Qe+1?Fe.push({polygons:Bt,bounds:ct,depth:Qe+1}):ee(Bt,ct)}}return X}(c,o,Math.ceil((x-g)/11.25),Math.ceil((w-E)/11.25),1,(M,P,N)=>{if(0===M)return.5*(P+N);{const U=gs((u.y+P/Bn)/f);return(gc(.5*(gs((u.y+N/Bn)/f)+U))*f-u.y)*Bn}})}_n(P1,"FillExtrusionBucket",{omit:["layers","features"]}),_n(hk,"PartMetadata");const ET=new Nt({"fill-extrusion-edge-radius":new Ye(mt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var vb={paint:new Nt({"fill-extrusion-opacity":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ot(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ot(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ot(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ot(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ye(mt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:ET};function dk(c,o,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class Zm{constructor(o,u,f){this.z=o,this.x=u,this.y=f,this.key=Km(0,o,o,u,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u){const f=(w=this.y,E=this.z,M=dk(256*(x=this.x),256*(w=Math.pow(2,E)-w-1),E),P=dk(256*(x+1),256*(w+1),E),M[0]+","+M[1]+","+P[0]+","+P[1]),g=function(x,w,E){let M,P="";for(let N=x;N>0;N--)M=1<<N-1,P+=(w&M?1:0)+(E&M?2:0);return P}(this.z,this.x,this.y);var x,w,E,M,P;return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===u?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ST{constructor(o,u){this.wrap=o,this.canonical=u,this.key=Km(o,u.z,u.z,u.x,u.y)}}class Fo{constructor(o,u,f,g,x){this.overscaledZ=o,this.wrap=u,this.canonical=new Zm(f,+g,+x),this.key=0===u&&o===f?this.canonical.key:Km(u,o,f,g,x)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const u=this.canonical.z-o;return o>this.canonical.z?new Fo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fo(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u=!0){if(this.overscaledZ===o&&u)return this.key;if(o>this.canonical.z)return Km(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-o;return Km(this.wrap*+u,o,o,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new Fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new Fo(u,this.wrap,u,f,g),new Fo(u,this.wrap,u,f+1,g),new Fo(u,this.wrap,u,f,g+1),new Fo(u,this.wrap,u,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Fo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ST(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Km(c,o,u,f,g){const x=1<<Math.min(u,22);let w=x*(g%x)+f%x;return c&&u<22&&(w+=x*x*((c<0?-2*c-1:2*c)%(1<<2*(22-u)))),16*(32*w+u)+(o-u)}_n(Zm,"CanonicalTileID"),_n(Fo,"OverscaledTileID",{omit:["projMatrix"]});class bp extends Xt{constructor(o,u,f){super(o,u),this.z=f}}function Wc(c,o){return c.x*o.x+c.y*o.y}function DT(c,o){if(1===c.length){let u=0;const f=o[u++];let g;for(;!g||f.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const x=o[u],w=c[0],E=g.sub(f),M=x.sub(f),P=w.sub(f),N=Wc(E,E),U=Wc(E,M),j=Wc(M,M),Y=Wc(P,E),X=Wc(P,M),ee=N*j-U*U,se=(j*Y-U*X)/ee,xe=(N*X-U*Y)/ee,ke=f.z*(1-se-xe)+g.z*se+x.z*xe;if(isFinite(ke))return ke}return 1/0}{let u=1/0;for(const f of o)u=Math.min(u,f.z);return u}}function L1(c,o,u,f,g,x,w,E){const M=w*g.getElevationAt(c,o,!0,!0),P=0!==x[0],N=P?0===x[1]?w*(x[0]/7-450):w*function(U,j,Y){const X=Math.floor(j[0]/8),ee=Math.floor(j[1]/8),se=10*(j[0]-8*X),xe=10*(j[1]-8*ee),ke=U.getElevationAt(X,ee,!0,!0),pe=U.getMeterToDEM(Y),Ee=Math.floor(.5*(se*pe-1)),Fe=Math.floor(.5*(xe*pe-1)),Oe=U.tileCoordToPixel(X,ee),Qe=2*Ee+1,et=2*Fe+1,ht=(An=Qe,Qt=et,[(Bt=U).getElevationAtPixel(ct=Oe.x-Ee,Gt=Oe.y-Fe,!0),Bt.getElevationAtPixel(ct+Qt,Gt,!0),Bt.getElevationAtPixel(ct,Gt+Qt,!0),Bt.getElevationAtPixel(ct+An,Gt+Qt,!0)]),Ft=Math.abs(ht[0]-ht[1]),lt=Math.abs(ht[2]-ht[3]),_t=Math.abs(ht[0]-ht[2])+Math.abs(ht[1]-ht[3]),ft=Math.min(.25,.5*pe*(Ft+lt)/Qe),It=Math.min(.25,.5*pe*_t/et);var Bt,ct,Gt,An,Qt;return ke+Math.max(ft*se,It*xe)}(g,x,E):M;return{base:M+(0===u)?-1:u,top:P?Math.max(N+f,M+u+2):M+f}}const F1=Cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:fk}=F1,xb=Cn([{name:"a_packed",components:4,type:"Float32"}]),{members:R1}=xb,Ru=e_.types,MT=Math.cos(Math.PI/180*37.5);class Jm{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new ai,this.layoutVertexArray2=new xi,this.indexArray=new fo,this.programConfigurations=new Rd(o.layers,o.zoom),this.segments=new ks,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f,g){this.hasPattern=D1("line",this.layers,u);const x=this.layers[0].layout.get("line-sort-key"),w=[];for(const{feature:N,id:U,index:j,sourceLayerIndex:Y}of o){const X=this.layers[0]._featureFilter.needGeometry,ee=Hd(N,X);if(!this.layers[0]._featureFilter.filter(new Ge(this.zoom),ee,f))continue;const se=x?x.evaluate(ee,{},f):void 0,xe={id:U,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:j,geometry:X?ee.geometry:$c(N,f,g),patterns:{},sortKey:se};w.push(xe)}x&&w.sort((N,U)=>N.sortKey-U.sortKey);const{lineAtlas:E,featureIndex:M}=u,P=this.addConstantDashes(E);for(const N of w){const{geometry:U,index:j,sourceLayerIndex:Y}=N;if(P&&this.addFeatureDashes(N,E),this.hasPattern){const X=_T("line",this.layers,N,this.zoom,u);this.patternFeatures.push(X)}else this.addFeature(N,U,j,f,E.positions,u.availableImages);M.insert(o[j].feature,U,j,Y,this.index)}}addConstantDashes(o){let u=!1;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if("constant"!==g.kind||"constant"!==x.kind)u=!0;else{const w=x.value,E=g.value;if(!E)continue;o.addDash(E,w)}}return u}addFeatureDashes(o,u){const f=this.zoom;for(const g of this.layers){const x=g.paint.get("line-dasharray").value,w=g.layout.get("line-cap").value;if("constant"===x.kind&&"constant"===w.kind)continue;let E,M;if("constant"===x.kind){if(E=x.value,!E)continue}else E=x.evaluate({zoom:f},o);M="constant"===w.kind?w.value:w.evaluate({zoom:f},o),u.addDash(E,M),o.patterns[g.id]=u.getKey(E,M)}}update(o,u,f,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f,g)}addFeatures(o,u,f,g,x){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,u,f,g)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,R1)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,fk),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,f,g,x,w){const E=this.layers[0].layout,M=E.get("line-join").evaluate(o,{}),P=E.get("line-cap").evaluate(o,{}),N=E.get("line-miter-limit"),U=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const j of u)this.addLine(j,o,M,P,N,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,w,g)}addLine(o,u,f,g,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<o.length-1;xe++)this.totalDistance+=o[xe].dist(o[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E="Polygon"===Ru[u.type];let M=o.length;for(;M>=2&&o[M-1].equals(o[M-2]);)M--;let P=0;for(;P<M-1&&o[P].equals(o[P+1]);)P++;if(M<(E?3:2))return;"bevel"===f&&(x=1.05);const N=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let j,Y,X,ee,se;this.e1=this.e2=-1,E&&(j=o[M-2],se=o[P].sub(j)._unit()._perp());for(let xe=P;xe<M;xe++){if(X=xe===M-1?E?o[P+1]:void 0:o[xe+1],X&&o[xe].equals(X))continue;se&&(ee=se),j&&(Y=j),j=o[xe],se=X?X.sub(j)._unit()._perp():ee,ee=ee||se;let ke=ee.add(se);0===ke.x&&0===ke.y||ke._unit();const pe=ee.x*se.x+ee.y*se.y,Ee=ke.x*se.x+ke.y*se.y,Fe=0!==Ee?1/Ee:1/0,Oe=2*Math.sqrt(2-2*Ee),Qe=Ee<MT&&Y&&X,et=ee.x*se.y-ee.y*se.x>0;if(Qe&&xe>P){const lt=j.dist(Y);if(lt>2*N){const _t=j.sub(j.sub(Y)._mult(N/lt)._round());this.updateDistance(Y,_t),this.addCurrentVertex(_t,ee,0,0,U),Y=_t}}const ht=Y&&X;let Ft=ht?f:E?"butt":g;if(ht&&"round"===Ft&&(Fe<w?Ft="miter":Fe<=2&&(Ft="fakeround")),"miter"===Ft&&Fe>x&&(Ft="bevel"),"bevel"===Ft&&(Fe>2&&(Ft="flipbevel"),Fe<x&&(Ft="miter")),Y&&this.updateDistance(Y,j),"miter"===Ft)ke._mult(Fe),this.addCurrentVertex(j,ke,0,0,U);else if("flipbevel"===Ft){if(Fe>100)ke=se.mult(-1);else{const lt=Fe*ee.add(se).mag()/ee.sub(se).mag();ke._perp()._mult(lt*(et?-1:1))}this.addCurrentVertex(j,ke,0,0,U),this.addCurrentVertex(j,ke.mult(-1),0,0,U)}else if("bevel"===Ft||"fakeround"===Ft){const lt=-Math.sqrt(Fe*Fe-1),_t=et?lt:0,ft=et?0:lt;if(Y&&this.addCurrentVertex(j,ee,_t,ft,U),"fakeround"===Ft){const It=Math.round(180*Oe/Math.PI/20);for(let Bt=1;Bt<It;Bt++){let ct=Bt/It;if(.5!==ct){const An=ct-.5;ct+=ct*An*(ct-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*An*An+(.848013+pe*(.215638*pe-1.06021)))}const Gt=se.sub(ee)._mult(ct)._add(ee)._unit()._mult(et?-1:1);this.addHalfVertex(j,Gt.x,Gt.y,!1,et,0,U)}}X&&this.addCurrentVertex(j,se,-_t,-ft,U)}else if("butt"===Ft)this.addCurrentVertex(j,ke,0,0,U);else if("square"===Ft){const lt=Y?1:-1;Y||this.addCurrentVertex(j,ke,lt,lt,U),this.addCurrentVertex(j,ke,0,0,U),Y&&this.addCurrentVertex(j,ke,lt,lt,U)}else"round"===Ft&&(Y&&(this.addCurrentVertex(j,ee,0,0,U),this.addCurrentVertex(j,ee,1,1,U,!0)),X&&(this.addCurrentVertex(j,se,-1,-1,U,!0),this.addCurrentVertex(j,se,0,0,U)));if(Qe&&xe<M-1){const lt=j.dist(X);if(lt>2*N){const _t=j.add(X.sub(j)._mult(N/lt)._round());this.updateDistance(j,_t),this.addCurrentVertex(_t,se,0,0,U),j=_t}}}}addCurrentVertex(o,u,f,g,x,w=!1){const E=u.y*g-u.x,M=-u.y-u.x*g;this.addHalfVertex(o,u.x+u.y*f,u.y-u.x*f,w,!1,f,x),this.addHalfVertex(o,E,M,w,!0,-g,x)}addHalfVertex({x:o,y:u},f,g,x,w,E,M){this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(u<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(0===E?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const P=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),M.primitiveLength++),w?this.e2=P:this.e1=P}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,u){this.distance+=o.dist(u),this.updateScaledDistance()}}_n(Jm,"LineBucket",{omit:["layers","patternFeatures"]});const pk=new Nt({"line-cap":new ot(mt.layout_line["line-cap"]),"line-join":new ot(mt.layout_line["line-join"]),"line-miter-limit":new Ye(mt.layout_line["line-miter-limit"]),"line-round-limit":new Ye(mt.layout_line["line-round-limit"]),"line-sort-key":new ot(mt.layout_line["line-sort-key"])});var kT={paint:new Nt({"line-opacity":new ot(mt.paint_line["line-opacity"]),"line-color":new ot(mt.paint_line["line-color"]),"line-translate":new Ye(mt.paint_line["line-translate"]),"line-translate-anchor":new Ye(mt.paint_line["line-translate-anchor"]),"line-width":new ot(mt.paint_line["line-width"]),"line-gap-width":new ot(mt.paint_line["line-gap-width"]),"line-offset":new ot(mt.paint_line["line-offset"]),"line-blur":new ot(mt.paint_line["line-blur"]),"line-dasharray":new ot(mt.paint_line["line-dasharray"]),"line-pattern":new ot(mt.paint_line["line-pattern"]),"line-gradient":new kt(mt.paint_line["line-gradient"]),"line-trim-offset":new Ye(mt.paint_line["line-trim-offset"])}),layout:pk};const bb=new class extends ot{possiblyEvaluate(c,o){return o=new Ge(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,transition:o.transition}),super.possiblyEvaluate(c,o)}evaluate(c,o,u,f){return o=er({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(c,o,u,f)}}(kT.paint.properties["line-width"].specification);function wp(c,o){return o>0?o+2*c:c}bb.useIntegerZoom=!0;const mk=Cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gk=Cn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),_k=Cn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wb=Cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),yk=Cn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Cn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Cb=Cn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vk=Cn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Cn([{name:"triangle",components:3,type:"Uint16"}]),Cn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Cn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Cn([{type:"Float32",name:"offsetX"}]),Cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var _o=24;const Fh=128;function Tb(c,o){const{expression:u}=o;if("constant"===u.kind)return{kind:"constant",layoutSize:u.evaluate(new Ge(c+1))};if("source"===u.kind)return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let x=0;for(;x<f.length&&f[x]<=c;)x++;x=Math.max(0,x-1);let w=x;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const E=f[x],M=f[w];return"composite"===u.kind?{kind:"composite",minZoom:E,maxZoom:M,interpolationType:g}:{kind:"camera",minZoom:E,maxZoom:M,minSize:u.evaluate(new Ge(E)),maxSize:u.evaluate(new Ge(M)),interpolationType:g}}}function Rh(c,{uSize:o,uSizeT:u},{lowerSize:f,upperSize:g}){return"source"===c.kind?f/Fh:"composite"===c.kind?Er(f/Fh,g/Fh,u):o}function Qm(c,o){let u=0,f=0;if("constant"===c.kind)f=c.layoutSize;else if("source"!==c.kind){const{interpolationType:g,minZoom:x,maxZoom:w}=c,E=g?dr(Vr.interpolationFactor(g,o,x,w),0,1):0;"camera"===c.kind?f=Er(c.minSize,c.maxSize,E):u=E}return{uSizeT:u,uSize:f}}var eg=Object.freeze({__proto__:null,getSizeData:Tb,evaluateSizeForFeature:Rh,evaluateSizeForZoom:Qm,SIZE_PACK_FACTOR:Fh});function _s(c,o,u){return c.sections.forEach(f=>{f.text=function(g,x,w){const E=x.layout.get("text-transform").evaluate(w,{});return"uppercase"===E?g=g.toLocaleUpperCase():"lowercase"===E&&(g=g.toLocaleLowerCase()),Ue.applyArabicShaping&&(g=Ue.applyArabicShaping(g)),g}(f.text,o,u)}),c}const n_={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function tg(c){return"\ufe36"===c||"\ufe48"===c||"\ufe38"===c||"\ufe44"===c||"\ufe42"===c||"\ufe3e"===c||"\ufe3c"===c||"\ufe3a"===c||"\ufe18"===c||"\ufe40"===c||"\ufe10"===c||"\ufe13"===c||"\ufe14"===c||"\uff40"===c||"\uffe3"===c||"\ufe11"===c||"\ufe12"===c}function ta(c){return"\ufe35"===c||"\ufe47"===c||"\ufe37"===c||"\ufe43"===c||"\ufe41"===c||"\ufe3d"===c||"\ufe3b"===c||"\ufe39"===c||"\ufe17"===c||"\ufe3f"===c}var r_=Ci,AT=function(c,o,u,f,g){var x,w,E=8*g-f-1,M=(1<<E)-1,P=M>>1,N=-7,U=u?g-1:0,j=u?-1:1,Y=c[o+U];for(U+=j,x=Y&(1<<-N)-1,Y>>=-N,N+=E;N>0;x=256*x+c[o+U],U+=j,N-=8);for(w=x&(1<<-N)-1,x>>=-N,N+=f;N>0;w=256*w+c[o+U],U+=j,N-=8);if(0===x)x=1-P;else{if(x===M)return w?NaN:1/0*(Y?-1:1);w+=Math.pow(2,f),x-=P}return(Y?-1:1)*w*Math.pow(2,x-f)},ng=function(c,o,u,f,g,x){var w,E,M,P=8*x-g-1,N=(1<<P)-1,U=N>>1,j=23===g?Math.pow(2,-24)-Math.pow(2,-77):0,Y=f?0:x-1,X=f?1:-1,ee=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,w=N):(w=Math.floor(Math.log(o)/Math.LN2),o*(M=Math.pow(2,-w))<1&&(w--,M*=2),(o+=w+U>=1?j/M:j*Math.pow(2,1-U))*M>=2&&(w++,M/=2),w+U>=N?(E=0,w=N):w+U>=1?(E=(o*M-1)*Math.pow(2,g),w+=U):(E=o*Math.pow(2,U-1)*Math.pow(2,g),w=0));g>=8;c[u+Y]=255&E,Y+=X,E/=256,g-=8);for(w=w<<g|E,P+=g;P>0;c[u+Y]=255&w,Y+=X,w/=256,P-=8);c[u+Y-X]|=128*ee};function Ci(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Ci.Varint=0,Ci.Fixed64=1,Ci.Bytes=2,Ci.Fixed32=5;var i_=4294967296,N1=1/i_,IT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Gc(c){return c.type===Ci.Bytes?c.readVarint()+c.pos:c.pos+1}function PT(c,o,u){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(f);for(var g=u.pos-1;g>=c;g--)u.buf[g+f]=u.buf[g]}function xk(c,o){for(var u=0;u<c.length;u++)o.writeVarint(c[u])}function bk(c,o){for(var u=0;u<c.length;u++)o.writeSVarint(c[u])}function wk(c,o){for(var u=0;u<c.length;u++)o.writeFloat(c[u])}function Ck(c,o){for(var u=0;u<c.length;u++)o.writeDouble(c[u])}function Tk(c,o){for(var u=0;u<c.length;u++)o.writeBoolean(c[u])}function Ek(c,o){for(var u=0;u<c.length;u++)o.writeFixed32(c[u])}function rg(c,o){for(var u=0;u<c.length;u++)o.writeSFixed32(c[u])}function Nh(c,o){for(var u=0;u<c.length;u++)o.writeFixed64(c[u])}function Sk(c,o){for(var u=0;u<c.length;u++)o.writeSFixed64(c[u])}function B1(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function s_(c,o,u){c[u]=o,c[u+1]=o>>>8,c[u+2]=o>>>16,c[u+3]=o>>>24}function Dk(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}function OT(c,o,u){o.glyphs=[],1===c&&u.readMessage(TF,o)}function TF(c,o,u){if(3===c){const{id:f,bitmap:g,width:x,height:w,left:E,top:M,advance:P}=u.readMessage(LT,{});o.glyphs.push({id:f,bitmap:new Fu({width:x+6,height:w+6},g),metrics:{width:x,height:w,left:E,top:M,advance:P}})}else 4===c?o.ascender=u.readSVarint():5===c&&(o.descender=u.readSVarint())}function LT(c,o,u){1===c?o.id=u.readVarint():2===c?o.bitmap=u.readBytes():3===c?o.width=u.readVarint():4===c?o.height=u.readVarint():5===c?o.left=u.readSVarint():6===c?o.top=u.readSVarint():7===c&&(o.advance=u.readVarint())}function z1(c){let o=0,u=0;for(const w of c)o+=w.w*w.h,u=Math.max(u,w.w);c.sort((w,E)=>E.h-w.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,x=0;for(const w of c)for(let E=f.length-1;E>=0;E--){const M=f[E];if(!(w.w>M.w||w.h>M.h)){if(w.x=M.x,w.y=M.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===M.w&&w.h===M.h){const P=f.pop();E<f.length&&(f[E]=P)}else w.h===M.h?(M.x+=w.w,M.w-=w.w):w.w===M.w?(M.y+=w.h,M.h-=w.h):(f.push({x:M.x+w.w,y:M.y,w:M.w-w.w,h:w.h}),M.y+=w.h,M.h-=w.h);break}}return{w:g,h:x,fill:o/(g*x)||0}}Ci.prototype={destroy:function(){this.buf=null},readFields:function(c,o,u){for(u=u||this.length;this.pos<u;){var f=this.readVarint(),g=f>>3,x=this.pos;this.type=7&f,c(g,o,this),this.pos===x&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=B1(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Dk(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=B1(this.buf,this.pos)+B1(this.buf,this.pos+4)*i_;return this.pos+=8,c},readSFixed64:function(){var c=B1(this.buf,this.pos)+Dk(this.buf,this.pos+4)*i_;return this.pos+=8,c},readFloat:function(){var c=AT(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=AT(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,u,f=this.buf;return o=127&(u=f[this.pos++]),u<128?o:(o|=(127&(u=f[this.pos++]))<<7,u<128?o:(o|=(127&(u=f[this.pos++]))<<14,u<128?o:(o|=(127&(u=f[this.pos++]))<<21,u<128?o:function(g,x,w){var E,M,P=w.buf;if(E=(112&(M=P[w.pos++]))>>4,M<128||(E|=(127&(M=P[w.pos++]))<<3,M<128)||(E|=(127&(M=P[w.pos++]))<<10,M<128)||(E|=(127&(M=P[w.pos++]))<<17,M<128)||(E|=(127&(M=P[w.pos++]))<<24,M<128)||(E|=(1&(M=P[w.pos++]))<<31,M<128))return function Yc(c,o,u){return u?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}(g,E,x);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&IT?IT.decode(this.buf.subarray(o,c)):function(u,f,g){for(var x="",w=f;w<g;){var E,M,P,N=u[w],U=null,j=N>239?4:N>223?3:N>191?2:1;if(w+j>g)break;1===j?N<128&&(U=N):2===j?128==(192&(E=u[w+1]))&&(U=(31&N)<<6|63&E)<=127&&(U=null):3===j?(M=u[w+2],128==(192&(E=u[w+1]))&&128==(192&M)&&((U=(15&N)<<12|(63&E)<<6|63&M)<=2047||U>=55296&&U<=57343)&&(U=null)):4===j&&(M=u[w+2],P=u[w+3],128==(192&(E=u[w+1]))&&128==(192&M)&&128==(192&P)&&((U=(15&N)<<18|(63&E)<<12|(63&M)<<6|63&P)<=65535||U>=1114112)&&(U=null)),null===U?(U=65533,j=1):U>65535&&(U-=65536,x+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),x+=String.fromCharCode(U),w+=j}return x}(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==Ci.Bytes)return c.push(this.readVarint(o));var u=Gc(this);for(c=c||[];this.pos<u;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==Ci.Bytes)return c.push(this.readSVarint());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Ci.Bytes)return c.push(this.readBoolean());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Ci.Bytes)return c.push(this.readFloat());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Ci.Bytes)return c.push(this.readDouble());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Ci.Bytes)return c.push(this.readFixed32());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Ci.Bytes)return c.push(this.readSFixed32());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Ci.Bytes)return c.push(this.readFixed64());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Ci.Bytes)return c.push(this.readSFixed64());var o=Gc(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===Ci.Varint)for(;this.buf[this.pos++]>127;);else if(o===Ci.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Ci.Fixed32)this.pos+=4;else{if(o!==Ci.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),s_(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),s_(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),s_(this.buf,-1&c,this.pos),s_(this.buf,Math.floor(c*N1),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),s_(this.buf,-1&c,this.pos),s_(this.buf,Math.floor(c*N1),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(o,u){var f,g,x,E;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),x=f,(E=u).buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,x>>>=7,E.buf[E.pos++]=127&x|128,E.buf[E.pos]=127&(x>>>=7),function(x,w){var E=(7&x)<<4;w.buf[w.pos++]|=E|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(g,u)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(Boolean(c))},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=function(f,g,x){for(var w,E,M=0;M<g.length;M++){if((w=g.charCodeAt(M))>55295&&w<57344){if(!E){w>56319||M+1===g.length?(f[x++]=239,f[x++]=191,f[x++]=189):E=w;continue}if(w<56320){f[x++]=239,f[x++]=191,f[x++]=189,E=w;continue}w=E-55296<<10|w-56320|65536,E=null}else E&&(f[x++]=239,f[x++]=191,f[x++]=189,E=null);w<128?f[x++]=w:(w<2048?f[x++]=w>>6|192:(w<65536?f[x++]=w>>12|224:(f[x++]=w>>18|240,f[x++]=w>>12&63|128),f[x++]=w>>6&63|128),f[x++]=63&w|128)}return x}(this.buf,c,this.pos);var u=this.pos-o;u>=128&&PT(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(c){this.realloc(4),ng(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),ng(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=c[u]},writeRawMessage:function(c,o){this.pos++;var u=this.pos;c(o,this);var f=this.pos-u;f>=128&&PT(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,u){this.writeTag(c,Ci.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,xk,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,bk,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,Tk,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,wk,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,Ck,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,Ek,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,rg,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,Nh,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,Sk,o)},writeBytesField:function(c,o){this.writeTag(c,Ci.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,Ci.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,Ci.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,Ci.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,Ci.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,Ci.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,Ci.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,Ci.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,Ci.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,Ci.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,Boolean(o))}};class Eb{constructor(o,{pixelRatio:u,version:f,stretchX:g,stretchY:x,content:w}){this.paddedRect=o,this.pixelRatio=u,this.stretchX=g,this.stretchY=x,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Sb{constructor(o,u){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(o,f,x),this.addImages(u,g,x);const{w,h:E}=z1(x),M=new ea({width:w||1,height:E||1});for(const P in o){const N=o[P],U=f[P].paddedRect;ea.copy(N.data,M,{x:0,y:0},{x:U.x+1,y:U.y+1},N.data)}for(const P in u){const N=u[P],U=g[P].paddedRect,j=U.x+1,Y=U.y+1,X=N.data.width,ee=N.data.height;ea.copy(N.data,M,{x:0,y:0},{x:j,y:Y},N.data),ea.copy(N.data,M,{x:0,y:ee-1},{x:j,y:Y-1},{width:X,height:1}),ea.copy(N.data,M,{x:0,y:0},{x:j,y:Y+ee},{width:X,height:1}),ea.copy(N.data,M,{x:X-1,y:0},{x:j-1,y:Y},{width:1,height:ee}),ea.copy(N.data,M,{x:0,y:0},{x:j+X,y:Y},{width:1,height:ee})}this.image=M,this.iconPositions=f,this.patternPositions=g}addImages(o,u,f){for(const g in o){const x=o[g],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(w),u[g]=new Eb(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(f=>o.hasImage(f)),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),u)}patchUpdatedImage(o,u,f){if(!o||!u||o.version===u.version)return;o.version=u.version;const[g,x]=o.tl;f.update(u.data,void 0,{x:g,y:x})}}_n(Eb,"ImagePosition"),_n(Sb,"ImageAtlas");const Rl={horizontal:1,vertical:2,horizontalOnly:3};class o_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,u){const f=new o_;return f.scale=o||1,f.fontStack=u,f}static forImage(o){const u=new o_;return u.imageName=o,u}}class ya{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const f=new ya;for(let g=0;g<o.sections.length;g++){const x=o.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,u)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=function(u,f){let g="";for(let x=0;x<u.length;x++){const w=u.charCodeAt(x+1)||null,E=u.charCodeAt(x-1)||null;g+=!f&&(w&&z(w)&&!n_[u[x+1]]||E&&z(E)&&!n_[u[x-1]])||!n_[u[x]]?u[x]:n_[u[x]]}return g}(this.text,o)}trim(){let o=0;for(let f=0;f<this.text.length&&a_[this.text.charCodeAt(f)];f++)o++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&a_[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const f=new ya;return f.text=this.text.substring(o,u),f.sectionIndex=this.sectionIndex.slice(o,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(o_.forText(o.scale,o.fontStack||u));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const u=o.image?o.image.name:"";if(0===u.length)return void zi("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(o_.forImage(u)),this.sectionIndex.push(this.sections.length-1)):zi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Db(c,o,u,f,g,x,w,E,M,P,N,U,j,Y,X){const ee=ya.fromFeature(c,g);U===Rl.vertical&&ee.verticalizePunctuation(j);let se=[];const xe=function(Oe,Qe,et,ht,Ft,lt){if(!Oe)return[];const _t=[],ft=function(Gt,An,Qt,hn,Yt,Pn){let gr=0;for(let cr=0;cr<Gt.length();cr++){const or=Gt.getSection(cr);gr+=FT(Gt.getCharCode(cr),or,hn,Yt,An,Pn)}return gr/Math.max(1,Math.ceil(gr/Qt))}(Oe,Qe,et,ht,Ft,lt),It=Oe.text.indexOf("\u200b")>=0;let Bt=0;for(let Gt=0;Gt<Oe.length();Gt++){const An=Oe.getSection(Gt),Qt=Oe.getCharCode(Gt);if(a_[Qt]||(Bt+=FT(Qt,An,ht,Ft,Qe,lt)),Gt<Oe.length()-1){const hn=!((ct=Qt)<11904||!(Om(ct)||Oa(ct)||v(ct)||e1(ct)||P0(ct)||Ur(ct)||Lm(ct)||fs(ct)||Io(ct)||Al(ct)||Fx(ct)||b(ct)||up(ct)||gn(ct)||mn(ct)||I0(ct)||ac(ct)||dp(ct)||Ph(ct)||O0(ct)));(Mk[Qt]||hn||An.imageName)&&_t.push(Mb(Gt+1,Bt,ft,_t,kk(Qt,Oe.getCharCode(Gt+1),hn&&It),!1))}}var ct;return NT(Mb(Oe.length(),Bt,ft,_t,0,!0))}(ee,P,x,o,f,Y),{processBidirectionalText:ke,processStyledBidirectionalText:pe}=Ue;if(ke&&1===ee.sections.length){const Oe=ke(ee.toString(),xe);for(const Qe of Oe){const et=new ya;et.text=Qe,et.sections=ee.sections;for(let ht=0;ht<Qe.length;ht++)et.sectionIndex.push(0);se.push(et)}}else if(pe){const Oe=pe(ee.text,ee.sectionIndex,xe);for(const Qe of Oe){const et=new ya;et.text=Qe[0],et.sectionIndex=Qe[1],et.sections=ee.sections,se.push(et)}}else se=function(Oe,Qe){const et=[],ht=Oe.text;let Ft=0;for(const lt of Qe)et.push(Oe.substring(Ft,lt)),Ft=lt;return Ft<ht.length&&et.push(Oe.substring(Ft,ht.length)),et}(ee,xe);const Ee=[],Fe={positionedLines:Ee,text:ee.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:U,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Oe,Qe,et,ht,Ft,lt,_t,ft,It,Bt,ct,Gt){let An=0,Qt=0,hn=0;const Yt="right"===ft?1:"left"===ft?0:.5;let Pn=!1;for(const Wn of Ft){const _r=Wn.getSections();for(const ci of _r){if(ci.imageName)continue;const Ti=Qe[ci.fontStack];if(Ti&&(Pn=void 0!==Ti.ascender&&void 0!==Ti.descender,!Pn))break}if(!Pn)break}let gr=0;for(const Wn of Ft){Wn.trim();const _r=Wn.getMaxScale(),ci=(_r-1)*_o,Ti={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[gr]=Ti;const Ei=Ti.positionedGlyphs;let Pi=0;if(!Wn.length()){Qt+=lt,++gr;continue}let Rt=0,Ki=0;for(let ze=0;ze<Wn.length();ze++){const ts=Wn.getSection(ze),ys=Wn.getSectionIndex(ze),k=Wn.getCharCode(ze);let A=ts.scale,Q=null,gi=null,Li=null,As=_o,Ws=0;const Gn=!(It===Rl.horizontal||!ct&&!R(k)||ct&&(a_[k]||(cr=k,cp(cr)||Qy(cr)||Ut(cr)||hp(cr)||p(cr))));if(ts.imageName){const Gs=ht[ts.imageName];if(!Gs)continue;Li=ts.imageName,Oe.iconsInText=Oe.iconsInText||!0,gi=Gs.paddedRect;const Ys=Gs.displaySize;A=A*_o/Gt,Q={width:Ys[0],height:Ys[1],left:1,top:-3,advance:Gn?Ys[1]:Ys[0],localGlyph:!1},Ws=Pn?-Q.height*A:_r*_o-17-Ys[1]*A,As=Q.advance;const Xc=(Gn?Ys[0]:Ys[1])*A-_o*_r;Xc>0&&Xc>Pi&&(Pi=Xc)}else{const Gs=et[ts.fontStack];if(!Gs)continue;Gs[k]&&(gi=Gs[k]);const Ys=Qe[ts.fontStack];if(!Ys)continue;const Xc=Ys.glyphs[k];if(!Xc)continue;if(Q=Xc.metrics,As=8203!==k?_o:0,Pn){const rt=void 0!==Ys.ascender?Math.abs(Ys.ascender):0,pg=void 0!==Ys.descender?Math.abs(Ys.descender):0,__=(rt+pg)*A;Rt<__&&(Rt=__,Ki=(rt-pg)/2*A),Ws=-rt*A}else Ws=(_r-A)*_o-17}Gn?(Oe.verticalizable=!0,Ei.push({glyph:k,imageName:Li,x:An,y:Qt+Ws,vertical:Gn,scale:A,localGlyph:Q.localGlyph,fontStack:ts.fontStack,sectionIndex:ys,metrics:Q,rect:gi}),An+=As*A+Bt):(Ei.push({glyph:k,imageName:Li,x:An,y:Qt+Ws,vertical:Gn,scale:A,localGlyph:Q.localGlyph,fontStack:ts.fontStack,sectionIndex:ys,metrics:Q,rect:gi}),An+=Q.advance*A+Bt)}0!==Ei.length&&(hn=Math.max(An-Bt,hn),Pn?BT(Ei,Yt,Pi,Ki,lt*_r/2):BT(Ei,Yt,Pi,0,lt/2)),An=0;const Ns=lt*_r+Pi;Ti.lineOffset=Math.max(Pi,ci),Qt+=Ns,++gr}var cr;const or=Qt,{horizontalAlign:Nn,verticalAlign:Zr}=kb(_t);(function(Wn,_r,ci,Ti,Ei,Pi){const Rt=(_r-ci)*Ei,Ki=-Pi*Ti;for(const Ns of Wn)for(const ze of Ns.positionedGlyphs)ze.x+=Rt,ze.y+=Ki})(Oe.positionedLines,Yt,Nn,Zr,hn,or),Oe.top+=-Zr*or,Oe.bottom=Oe.top+or,Oe.left+=-Nn*hn,Oe.right=Oe.left+hn,Oe.hasBaseline=Pn}(Fe,o,u,f,se,w,E,M,U,P,j,X),!function(Oe){for(const Qe of Oe)if(0!==Qe.positionedGlyphs.length)return!1;return!0}(Ee)&&Fe}const a_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Mk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function FT(c,o,u,f,g,x){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*_o/x+g:0}{const w=u[o.fontStack],E=w&&w.glyphs[c];return E?E.metrics.advance*o.scale+g:0}}function RT(c,o,u,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(u)*u}function kk(c,o,u){let f=0;return 10===c&&(f-=1e4),u&&(f+=150),40!==c&&65288!==c||(f+=50),41!==o&&65289!==o||(f+=50),f}function Mb(c,o,u,f,g,x){let w=null,E=RT(o,u,g,x);for(const M of f){const P=RT(o-M.x,u,g,x)+M.badness;P<=E&&(w=M,E=P)}return{index:c,x:o,priorBreak:w,badness:E}}function NT(c){return c?NT(c.priorBreak).concat(c.index):[]}function kb(c){let o=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function BT(c,o,u,f,g){if(!(o||u||f||g))return;const x=c.length-1,w=c[x],E=(w.x+w.metrics.advance*w.scale)*o;for(let M=0;M<=x;M++)c[M].x-=E,c[M].y+=u+f+g}function xr(c,o,u){const{horizontalAlign:f,verticalAlign:g}=kb(u),x=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:x,right:x+c.displaySize[0]}}function ce(c,o,u,f,g,x){const w=c.image;let E;if(w.content){const se=w.content,xe=w.pixelRatio||1;E=[se[0]/xe,se[1]/xe,w.displaySize[0]-se[2]/xe,w.displaySize[1]-se[3]/xe]}const M=o.left*x,P=o.right*x;let N,U,j,Y;"width"===u||"both"===u?(Y=g[0]+M-f[3],U=g[0]+P+f[1]):(Y=g[0]+(M+P-w.displaySize[0])/2,U=Y+w.displaySize[0]);const X=o.top*x,ee=o.bottom*x;return"height"===u||"both"===u?(N=g[1]+X-f[0],j=g[1]+ee+f[2]):(N=g[1]+(X+ee-w.displaySize[1])/2,j=N+w.displaySize[1]),{image:w,top:N,right:U,bottom:j,left:Y,collisionPadding:E}}class Nu extends Xt{constructor(o,u,f,g,x){super(o,u),this.angle=g,this.z=f,void 0!==x&&(this.segment=x)}clone(){return new Nu(this.x,this.y,this.z,this.angle,this.segment)}}function Ab(c,o,u,f,g){if(void 0===o.segment)return!0;let x=o,w=o.segment+1,E=0;for(;E>-u/2;){if(w--,w<0)return!1;E-=c[w].dist(x),x=c[w]}E+=c[w].dist(c[w+1]),w++;const M=[];let P=0;for(;E<u/2;){const N=c[w],U=c[w+1];if(!U)return!1;let j=c[w-1].angleTo(N)-N.angleTo(U);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:E,angleDelta:j}),P+=j;E-M[0].distance>f;)P-=M.shift().angleDelta;if(P>g)return!1;w++,E+=N.dist(U)}return!0}function zT(c){let o=0;for(let u=0;u<c.length-1;u++)o+=c[u].dist(c[u+1]);return o}function VT(c,o,u){return c?.6*o*u:0}function Ib(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function Ak(c,o,u,f,g,x){const w=VT(u,g,x),E=Ib(u,f)*x;let M=0;const P=zT(c)/2;for(let N=0;N<c.length-1;N++){const U=c[N],j=c[N+1],Y=U.dist(j);if(M+Y>P){const X=(P-M)/Y,ee=Er(U.x,j.x,X),se=Er(U.y,j.y,X),xe=new Nu(ee,se,0,j.angleTo(U),N);return!w||Ab(c,xe,E,w,o)?xe:void 0}M+=Y}}function UT(c,o,u,f,g,x,w,E,M){const P=VT(f,x,w),N=Ib(f,g),U=N*w,j=0===c[0].x||c[0].x===M||0===c[0].y||c[0].y===M;return o-U<o/4&&(o=U+o/4),jT(c,j?o/2*E%o:(N/2+2*x)*w*E%o,o,P,u,U,j,!1,M)}function jT(c,o,u,f,g,x,w,E,M){const P=x/2,N=zT(c);let U=0,j=o-u,Y=[];for(let X=0;X<c.length-1;X++){const ee=c[X],se=c[X+1],xe=ee.dist(se),ke=se.angleTo(ee);for(;j+u<U+xe;){j+=u;const pe=(j-U)/xe,Ee=Er(ee.x,se.x,pe),Fe=Er(ee.y,se.y,pe);if(Ee>=0&&Ee<M&&Fe>=0&&Fe<M&&j-P>=0&&j+P<=N){const Oe=new Nu(Ee,Fe,0,ke,X);Oe._round(),f&&!Ab(c,Oe,x,f,g)||Y.push(Oe)}}U+=xe}return E||Y.length||w||(Y=jT(c,U/2,u,f,g,x,w,!0,M)),Y}function HT(c,o,u,f,g){const x=[];for(let w=0;w<c.length;w++){const E=c[w];let M;for(let P=0;P<E.length-1;P++){let N=E[P],U=E[P+1];N.x<o&&U.x<o||(N.x<o?N=new Xt(o,N.y+(o-N.x)/(U.x-N.x)*(U.y-N.y))._round():U.x<o&&(U=new Xt(o,N.y+(o-N.x)/(U.x-N.x)*(U.y-N.y))._round()),N.y<u&&U.y<u||(N.y<u?N=new Xt(N.x+(u-N.y)/(U.y-N.y)*(U.x-N.x),u)._round():U.y<u&&(U=new Xt(N.x+(u-N.y)/(U.y-N.y)*(U.x-N.x),u)._round()),N.x>=f&&U.x>=f||(N.x>=f?N=new Xt(f,N.y+(f-N.x)/(U.x-N.x)*(U.y-N.y))._round():U.x>=f&&(U=new Xt(f,N.y+(f-N.x)/(U.x-N.x)*(U.y-N.y))._round()),N.y>=g&&U.y>=g||(N.y>=g?N=new Xt(N.x+(g-N.y)/(U.y-N.y)*(U.x-N.x),g)._round():U.y>=g&&(U=new Xt(N.x+(g-N.y)/(U.y-N.y)*(U.x-N.x),g)._round()),M&&N.equals(M[M.length-1])||(M=[N],x.push(M)),M.push(U)))))}}return x}_n(Nu,"Anchor");const V1=1e20;function Pb(c,o,u,f,g,x,w,E,M){for(let P=o;P<o+f;P++)Ob(c,u*x+P,x,g,w,E,M);for(let P=u;P<u+g;P++)Ob(c,P*x+o,1,f,w,E,M)}function Ob(c,o,u,f,g,x,w){x[0]=0,w[0]=-V1,w[1]=V1,g[0]=c[o];for(let E=1,M=0,P=0;E<f;E++){g[E]=c[o+E*u];const N=E*E;do{const U=x[M];P=(g[E]-g[U]+N-U*U)/(E-U)/2}while(P<=w[M]&&--M>-1);M++,x[M]=E,w[M]=P,w[M+1]=V1}for(let E=0,M=0;E<f;E++){for(;w[M+1]<E;)M++;const P=x[M],N=E-P;c[o+E*u]=g[P]+N*N}}const na={none:0,ideographs:1,all:2};class ig{constructor(o,u,f){this.requestManager=o,this.localGlyphMode=u,this.localFontFamily=f,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,u){const f=[];for(const g in o)for(const x of o[g])f.push({stack:g,id:x});nd(f,({stack:g,id:x},w)=>{let E=this.entries[g];E||(E=this.entries[g]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let M=E.glyphs[x];if(void 0!==M)return void w(null,{stack:g,id:x,glyph:M});if(M=this._tinySDF(E,g,x),M)return E.glyphs[x]=M,void w(null,{stack:g,id:x,glyph:M});const P=Math.floor(x/256);if(256*P>65535)return void w(new Error("glyphs > 65535 not supported"));if(E.ranges[P])return void w(null,{stack:g,id:x,glyph:M});let N=E.requests[P];N||(N=E.requests[P]=[],ig.loadGlyphRange(g,P,this.url,this.requestManager,(U,j)=>{if(j){E.ascender=j.ascender,E.descender=j.descender;for(const Y in j.glyphs)this._doesCharSupportLocalGlyph(+Y)||(E.glyphs[+Y]=j.glyphs[+Y]);E.ranges[P]=!0}for(const Y of N)Y(U,j);delete E.requests[P]})),N.push((U,j)=>{U?w(U):j&&w(null,{stack:g,id:x,glyph:j.glyphs[x]||null})})},(g,x)=>{if(g)u(g);else if(x){const w={};for(const{stack:E,id:M,glyph:P}of x)void 0===w[E]&&(w[E]={}),void 0===w[E].glyphs&&(w[E].glyphs={}),w[E].glyphs[M]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics},w[E].ascender=this.entries[E].ascender,w[E].descender=this.entries[E].descender;u(null,w)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==na.none&&(this.localGlyphMode===na.all?!!this.localFontFamily:!!this.localFontFamily&&(Al(o)||lc(o)||up(o)||ac(o)||fs(o)))}_tinySDF(o,u,f){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=o.tinySDF;if(!x){let ee="400";/bold/i.test(u)?ee="900":/medium/i.test(u)?ee="500":/light/i.test(u)&&(ee="200"),x=o.tinySDF=new ig.TinySDF({fontFamily:g,fontWeight:ee,fontSize:48,buffer:6,radius:16}),x.fontWeight=ee}if(this.localGlyphs[x.fontWeight][f])return this.localGlyphs[x.fontWeight][f];const w=String.fromCharCode(f),{data:E,width:M,height:P,glyphWidth:N,glyphHeight:U,glyphLeft:j,glyphTop:Y,glyphAdvance:X}=x.draw(w);return this.localGlyphs[x.fontWeight][f]={id:f,bitmap:new Fu({width:M,height:P},E),metrics:{width:N/2,height:U/2,left:j/2,top:Y/2-27,advance:X/2,localGlyph:!0}}}}function U1(c,o,u,f){const g=[],x=c.image,w=x.pixelRatio,E=x.paddedRect.w-2,M=x.paddedRect.h-2,P=c.right-c.left,N=c.bottom-c.top,U=x.stretchX||[[0,E]],j=x.stretchY||[[0,M]],Y=(lt,_t)=>lt+_t[1]-_t[0],X=U.reduce(Y,0),ee=j.reduce(Y,0),se=E-X,xe=M-ee;let ke=0,pe=X,Ee=0,Fe=ee,Oe=0,Qe=se,et=0,ht=xe;if(x.content&&f){const lt=x.content;ke=sg(U,0,lt[0]),Ee=sg(j,0,lt[1]),pe=sg(U,lt[0],lt[2]),Fe=sg(j,lt[1],lt[3]),Oe=lt[0]-ke,et=lt[1]-Ee,Qe=lt[2]-lt[0]-pe,ht=lt[3]-lt[1]-Fe}const Ft=(lt,_t,ft,It)=>{const Bt=Lb(lt.stretch-ke,pe,P,c.left),ct=Fb(lt.fixed-Oe,Qe,lt.stretch,X),Gt=Lb(_t.stretch-Ee,Fe,N,c.top),An=Fb(_t.fixed-et,ht,_t.stretch,ee),Qt=Lb(ft.stretch-ke,pe,P,c.left),hn=Fb(ft.fixed-Oe,Qe,ft.stretch,X),Yt=Lb(It.stretch-Ee,Fe,N,c.top),Pn=Fb(It.fixed-et,ht,It.stretch,ee),gr=new Xt(Bt,Gt),cr=new Xt(Qt,Gt),or=new Xt(Qt,Yt),Nn=new Xt(Bt,Yt),Zr=new Xt(ct/w,An/w),Wn=new Xt(hn/w,Pn/w),_r=o*Math.PI/180;if(_r){const Ei=Math.sin(_r),Pi=Math.cos(_r),Rt=[Pi,-Ei,Ei,Pi];gr._matMult(Rt),cr._matMult(Rt),Nn._matMult(Rt),or._matMult(Rt)}const ci=lt.stretch+lt.fixed,Ti=_t.stretch+_t.fixed;return{tl:gr,tr:cr,bl:Nn,br:or,tex:{x:x.paddedRect.x+1+ci,y:x.paddedRect.y+1+Ti,w:ft.stretch+ft.fixed-ci,h:It.stretch+It.fixed-Ti},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:Wn,minFontScaleX:Qe/w/P,minFontScaleY:ht/w/N,isSDF:u}};if(f&&(x.stretchX||x.stretchY)){const lt=$T(U,se,X),_t=$T(j,xe,ee);for(let ft=0;ft<lt.length-1;ft++){const It=lt[ft],Bt=lt[ft+1];for(let ct=0;ct<_t.length-1;ct++)g.push(Ft(It,_t[ct],Bt,_t[ct+1]))}}else g.push(Ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:M+1}));return g}function sg(c,o,u){let f=0;for(const g of c)f+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return f}function $T(c,o,u){const f=[{fixed:-1,stretch:0}];for(const[g,x]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return f.push({fixed:o+1,stretch:u}),f}function Lb(c,o,u,f){return c/o*u+f}function Fb(c,o,u,f){return c-o*u/f}function EF(c,o,u,f){const g=o+c.positionedLines[f].lineOffset;return 0===f?u+g/2:u+(g+(o+c.positionedLines[f-1].lineOffset))/2}ig.loadGlyphRange=function(c,o,u,f,g){const x=256*o,w=x+255,E=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",c).replace("{range}",`${x}-${w}`),Lf.Glyphs);od(E,(M,P)=>{if(M)g(M);else if(P){const N={},U=new r_(P).readFields(OT,{});for(const j of U.glyphs)N[j.id]=j;g(null,{glyphs:N,ascender:U.ascender,descender:U.descender})}})},ig.TinySDF=class{constructor({fontSize:c=24,buffer:o=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=f,this.radius=u;const E=this.size=c+4*o,M=this._createCanvas(E),P=this.ctx=M.getContext("2d",{willReadFrequently:!0});P.font=`${w} ${x} ${c}px ${g}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(c){const o=document.createElement("canvas");return o.width=o.height=c,o}draw(c){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(c),w=Math.ceil(u),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,w+Math.ceil(f)),P=E+2*this.buffer,N=M+2*this.buffer,U=Math.max(P*N,0),j=new Uint8ClampedArray(U),Y={data:j,width:P,height:N,glyphWidth:E,glyphHeight:M,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(0===E||0===M)return Y;const{ctx:X,buffer:ee,gridInner:se,gridOuter:xe}=this;X.clearRect(ee,ee,E,M),X.fillText(c,ee,ee+w);const ke=X.getImageData(ee,ee,E,M);xe.fill(V1,0,U),se.fill(0,0,U);for(let pe=0;pe<M;pe++)for(let Ee=0;Ee<E;Ee++){const Fe=ke.data[4*(pe*E+Ee)+3]/255;if(0===Fe)continue;const Oe=(pe+ee)*P+Ee+ee;if(1===Fe)xe[Oe]=0,se[Oe]=V1;else{const Qe=.5-Fe;xe[Oe]=Qe>0?Qe*Qe:0,se[Oe]=Qe<0?Qe*Qe:0}}Pb(xe,0,0,P,N,P,this.f,this.v,this.z),Pb(se,ee,ee,E,M,P,this.f,this.v,this.z);for(let pe=0;pe<U;pe++){const Ee=Math.sqrt(xe[pe])-Math.sqrt(se[pe]);j[pe]=Math.round(255-255*(Ee/this.radius+this.cutoff))}return Y}};class Ik{constructor(o=[],u=WT){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:f}=this,g=u[o];for(;o>0;){const x=o-1>>1,w=u[x];if(f(g,w)>=0)break;u[o]=w,o=x}u[o]=g}_down(o){const{data:u,compare:f}=this,g=this.length>>1,x=u[o];for(;o<g;){let w=1+(o<<1),E=u[w];const M=w+1;if(M<this.length&&f(u[M],E)<0&&(w=M,E=u[M]),f(E,x)>=0)break;u[o]=E,o=w}u[o]=x}}function WT(c,o){return c<o?-1:c>o?1:0}function SF(c,o=1,u=!1){let f=1/0,g=1/0,x=-1/0,w=-1/0;const E=c[0];for(let Y=0;Y<E.length;Y++){const X=E[Y];(!Y||X.x<f)&&(f=X.x),(!Y||X.y<g)&&(g=X.y),(!Y||X.x>x)&&(x=X.x),(!Y||X.y>w)&&(w=X.y)}const M=Math.min(x-f,w-g);let P=M/2;const N=new Ik([],Pk);if(0===M)return new Xt(f,g);for(let Y=f;Y<x;Y+=M)for(let X=g;X<w;X+=M)N.push(new qc(Y+P,X+P,P,c));let U=function(Y){let X=0,ee=0,se=0;const xe=Y[0];for(let ke=0,pe=xe.length,Ee=pe-1;ke<pe;Ee=ke++){const Fe=xe[ke],Oe=xe[Ee],Qe=Fe.x*Oe.y-Oe.x*Fe.y;ee+=(Fe.x+Oe.x)*Qe,se+=(Fe.y+Oe.y)*Qe,X+=3*Qe}return new qc(ee/X,se/X,0,Y)}(c),j=N.length;for(;N.length;){const Y=N.pop();(Y.d>U.d||!U.d)&&(U=Y,u&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,j)),Y.max-U.d<=o||(P=Y.h/2,N.push(new qc(Y.p.x-P,Y.p.y-P,P,c)),N.push(new qc(Y.p.x+P,Y.p.y-P,P,c)),N.push(new qc(Y.p.x-P,Y.p.y+P,P,c)),N.push(new qc(Y.p.x+P,Y.p.y+P,P,c)),j+=4)}return u&&(console.log(`num probes: ${j}`),console.log(`best distance: ${U.d}`)),U.p}function Pk(c,o){return o.max-c.max}function qc(c,o,u,f){this.p=new Xt(c,o),this.h=u,this.d=function(g,x){let w=!1,E=1/0;for(let M=0;M<x.length;M++){const P=x[M];for(let N=0,U=P.length,j=U-1;N<U;j=N++){const Y=P[N],X=P[j];Y.y>g.y!=X.y>g.y&&g.x<(X.x-Y.x)*(g.y-Y.y)/(X.y-Y.y)+Y.x&&(w=!w),E=Math.min(E,G0(g,Y,X))}}return(w?1:-1)*Math.sqrt(E)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Rb=Number.POSITIVE_INFINITY,GT=Math.sqrt(2);function l_(c,[o,u]){let f=0,g=0;if(u===Rb){o<0&&(o=0);const x=o/GT;switch(c){case"top-right":case"top-left":g=x-7;break;case"bottom-right":case"bottom-left":g=7-x;break;case"bottom":g=7-o;break;case"top":g=o-7}switch(c){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=o;break;case"right":f=-o}}else{switch(o=Math.abs(o),u=Math.abs(u),c){case"top-right":case"top-left":case"top":g=u-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-u}switch(c){case"top-right":case"bottom-right":case"right":f=-o;break;case"top-left":case"bottom-left":case"left":f=o}}return[f,g]}function Ok(c,o,u,f,g,x,w,E,M,P){c.createArrays(),c.tilePixelRatio=Bn/(512*c.overscaling),c.compareText={},c.iconsNeedLinear=!1;const N=c.layers[0].layout,U=c.layers[0]._unevaluatedLayout._values,j={};if("composite"===c.textSizeData.kind){const{minZoom:ee,maxZoom:se}=c.textSizeData;j.compositeTextSizes=[U["text-size"].possiblyEvaluate(new Ge(ee),E),U["text-size"].possiblyEvaluate(new Ge(se),E)]}if("composite"===c.iconSizeData.kind){const{minZoom:ee,maxZoom:se}=c.iconSizeData;j.compositeIconSizes=[U["icon-size"].possiblyEvaluate(new Ge(ee),E),U["icon-size"].possiblyEvaluate(new Ge(se),E)]}j.layoutTextSize=U["text-size"].possiblyEvaluate(new Ge(M+1),E),j.layoutIconSize=U["icon-size"].possiblyEvaluate(new Ge(M+1),E),j.textMaxSize=U["text-size"].possiblyEvaluate(new Ge(18),E);const Y="map"===N.get("text-rotation-alignment")&&"point"!==N.get("symbol-placement"),X=N.get("text-size");for(const ee of c.features){const se=N.get("text-font").evaluate(ee,{},E).join(","),xe=X.evaluate(ee,{},E),ke=j.layoutTextSize.evaluate(ee,{},E),pe=(j.layoutIconSize.evaluate(ee,{},E),{horizontal:{},vertical:void 0}),Ee=ee.text;let Fe,Oe=[0,0];if(Ee){const ht=Ee.toString(),Ft=N.get("text-letter-spacing").evaluate(ee,{},E)*_o,lt=N.get("text-line-height").evaluate(ee,{},E)*_o,_t=S(ht)?Ft:0,ft=N.get("text-anchor").evaluate(ee,{},E),It=N.get("text-variable-anchor");if(!It){const Qt=N.get("text-radial-offset").evaluate(ee,{},E);Oe=Qt?l_(ft,[Qt*_o,Rb]):N.get("text-offset").evaluate(ee,{},E).map(hn=>hn*_o)}let Bt=Y?"center":N.get("text-justify").evaluate(ee,{},E);const ct="point"===N.get("symbol-placement"),Gt=ct?N.get("text-max-width").evaluate(ee,{},E)*_o:1/0,An=Qt=>{c.allowVerticalPlacement&&C(ht)&&(pe.vertical=Db(Ee,o,u,g,se,Gt,lt,ft,Qt,_t,Oe,Rl.vertical,!0,ke,xe))};if(!Y&&It){const Qt="auto"===Bt?It.map(Yt=>j1(Yt)):[Bt];let hn=!1;for(let Yt=0;Yt<Qt.length;Yt++){const Pn=Qt[Yt];if(!pe.horizontal[Pn])if(hn)pe.horizontal[Pn]=pe.horizontal[0];else{const gr=Db(Ee,o,u,g,se,Gt,lt,"center",Pn,_t,Oe,Rl.horizontal,!1,ke,xe);gr&&(pe.horizontal[Pn]=gr,hn=1===gr.positionedLines.length)}}An("left")}else{if("auto"===Bt&&(Bt=j1(ft)),ct||N.get("text-writing-mode").indexOf("horizontal")>=0||!C(ht)){const Qt=Db(Ee,o,u,g,se,Gt,lt,ft,Bt,_t,Oe,Rl.horizontal,!1,ke,xe);Qt&&(pe.horizontal[Bt]=Qt)}An(ct?"left":Bt)}}let Qe=!1;if(ee.icon&&ee.icon.name){const ht=f[ee.icon.name];ht&&(Fe=xr(g[ee.icon.name],N.get("icon-offset").evaluate(ee,{},E),N.get("icon-anchor").evaluate(ee,{},E)),Qe=ht.sdf,void 0===c.sdfIcons?c.sdfIcons=ht.sdf:c.sdfIcons!==ht.sdf&&zi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ht.pixelRatio!==c.pixelRatio||0!==N.get("icon-rotate").constantOr(1))&&(c.iconsNeedLinear=!0))}const et=qT(pe.horizontal)||pe.vertical;c.iconsInText||(c.iconsInText=!!et&&et.iconsInText),(et||Fe)&&Lk(c,ee,pe,Fe,f,j,ke,0,Oe,Qe,w,E,P)}x&&c.generateCollisionDebugBuffers(M,c.collisionBoxArray)}function j1(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lk(c,o,u,f,g,x,w,E,M,P,N,U,j){let Y=x.textMaxSize.evaluate(o,{},U);void 0===Y&&(Y=w);const X=c.layers[0].layout,ee=X.get("icon-offset").evaluate(o,{},U),se=qT(u.horizontal)||u.vertical,xe="globe"===j.name,ke=w/24,pe=c.tilePixelRatio*Y/24,Ee=(_t=c.overscaling,c.zoom>18&&_t>2&&(_t>>=1),Math.max(Bn/(512*_t),1)*X.get("symbol-spacing")),Fe=X.get("text-padding")*c.tilePixelRatio,Oe=X.get("icon-padding")*c.tilePixelRatio,Qe=Cr(X.get("text-max-angle")),et="map"===X.get("text-rotation-alignment")&&"point"!==X.get("symbol-placement"),ht="map"===X.get("icon-rotation-alignment")&&"point"!==X.get("symbol-placement"),Ft=X.get("symbol-placement"),lt=Ee/2;var _t;const ft=X.get("icon-text-fit");let It;f&&"none"!==ft&&(c.allowVerticalPlacement&&u.vertical&&(It=ce(f,u.vertical,ft,X.get("icon-text-fit-padding"),ee,ke)),se&&(f=ce(f,se,ft,X.get("icon-text-fit-padding"),ee,ke)));const Bt=(ct,Gt,An)=>{if(Gt.x<0||Gt.x>=Bn||Gt.y<0||Gt.y>=Bn)return;let Qt=null;if(xe){const{x:hn,y:Yt,z:Pn}=j.projectTilePoint(Gt.x,Gt.y,An);Qt={anchor:new Nu(hn,Yt,Pn,0,void 0),up:j.upVector(An,Gt.x,Gt.y)}}!function(hn,Yt,Pn,gr,cr,or,Nn,Zr,Wn,_r,ci,Ti,Ei,Pi,Rt,Ki,Ns,ze,ts,ys,k,A,Q,gi,Li){const As=hn.addToLineVertexArray(Yt,gr);let Ws,Gn,Gs,Ys,Xc,rt,pg,__=0,Kb=0,Jb=0,Qb=0,bt=-1,ew=-1;const yc={};let y_=hc("");const Kr=Pn?Pn.anchor:Yt;let v_=0,av=0;if(void 0===Wn._unevaluatedLayout.getValue("text-radial-offset")?[v_,av]=Wn.layout.get("text-offset").evaluate(k,{},Li).map(Ba=>Ba*_o):(v_=Wn.layout.get("text-radial-offset").evaluate(k,{},Li)*_o,av=Rb),hn.allowVerticalPlacement&&cr.vertical){const Ba=cr.vertical;if(Rt)rt=$1(Ba),Zr&&(pg=$1(Zr));else{const za=Wn.layout.get("text-rotate").evaluate(k,{},Li)+90;Gs=H1(_r,Kr,Yt,ci,Ti,Ei,Ba,Pi,za,Ki),Zr&&(Ys=H1(_r,Kr,Yt,ci,Ti,Ei,Zr,ze,za))}}if(or){const Ba=Wn.layout.get("icon-rotate").evaluate(k,{},Li),za="none"!==Wn.layout.get("icon-text-fit"),mg=U1(or,Ba,Q,za),cv=Zr?U1(Zr,Ba,Q,za):void 0;Gn=H1(_r,Kr,Yt,ci,Ti,Ei,or,ze,Ba),__=4*mg.length;const x_=hn.iconSizeData;let sl=null;"source"===x_.kind?(sl=[Fh*Wn.layout.get("icon-size").evaluate(k,{},Li)],sl[0]>Zd&&zi(`${hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===x_.kind&&(sl=[Fh*A.compositeIconSizes[0].evaluate(k,{},Li),Fh*A.compositeIconSizes[1].evaluate(k,{},Li)],(sl[0]>Zd||sl[1]>Zd)&&zi(`${hn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),hn.addSymbols(hn.icon,mg,sl,ys,ts,k,!1,Pn,Yt,As.lineStartIndex,As.lineLength,-1,gi,Li),bt=hn.icon.placedSymbolArray.length-1,cv&&(Kb=4*cv.length,hn.addSymbols(hn.icon,cv,sl,ys,ts,k,Rl.vertical,Pn,Yt,As.lineStartIndex,As.lineLength,-1,gi,Li),ew=hn.icon.placedSymbolArray.length-1)}for(const Ba in cr.horizontal){const za=cr.horizontal[Ba];Ws||(y_=hc(za.text),Rt?Xc=$1(za):Ws=H1(_r,Kr,Yt,ci,Ti,Ei,za,Pi,Wn.layout.get("text-rotate").evaluate(k,{},Li),Ki));const mg=1===za.positionedLines.length;if(Jb+=YT(hn,Pn,Yt,za,Nn,Wn,Rt,k,Ki,As,cr.vertical?Rl.horizontal:Rl.horizontalOnly,mg?Object.keys(cr.horizontal):[Ba],yc,bt,A,gi,Li),mg)break}cr.vertical&&(Qb+=YT(hn,Pn,Yt,cr.vertical,Nn,Wn,Rt,k,Ki,As,Rl.vertical,["vertical"],yc,ew,A,gi,Li));let Bh=-1;const lv=(Ba,za)=>Ba?Math.max(Ba,za):za;Bh=lv(Xc,Bh),Bh=lv(rt,Bh),Bh=lv(pg,Bh);const uE=Bh>-1?1:0;hn.glyphOffsetArray.length>=Jd.MAX_GLYPHS&&zi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==k.sortKey&&hn.addToSortKeyRanges(hn.symbolInstances.length,k.sortKey),hn.symbolInstances.emplaceBack(Kr.x,Kr.y,Kr.z,Yt.x,Yt.y,yc.right>=0?yc.right:-1,yc.center>=0?yc.center:-1,yc.left>=0?yc.left:-1,yc.vertical>=0?yc.vertical:-1,bt,ew,y_,void 0!==Ws?Ws:hn.collisionBoxArray.length,void 0!==Ws?Ws+1:hn.collisionBoxArray.length,void 0!==Gs?Gs:hn.collisionBoxArray.length,void 0!==Gs?Gs+1:hn.collisionBoxArray.length,void 0!==Gn?Gn:hn.collisionBoxArray.length,void 0!==Gn?Gn+1:hn.collisionBoxArray.length,Ys||hn.collisionBoxArray.length,Ys?Ys+1:hn.collisionBoxArray.length,ci,Jb,Qb,__,Kb,uE,0,v_,av,Bh)}(c,Gt,Qt,ct,u,f,g,It,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,Fe,et,M,0,Oe,ht,ee,o,x,P,N,U)};if("line"===Ft)for(const ct of HT(o.geometry,0,0,Bn,Bn)){const Gt=UT(ct,Ee,Qe,u.vertical||se,f,24,pe,c.overscaling,Bn);for(const An of Gt)se&&Fk(c,se.text,lt,An)||Bt(ct,An,U)}else if("line-center"===Ft){for(const ct of o.geometry)if(ct.length>1){const Gt=Ak(ct,Qe,u.vertical||se,f,24,pe);Gt&&Bt(ct,Gt,U)}}else if("Polygon"===o.type)for(const ct of S1(o.geometry,0)){const Gt=SF(ct,16);Bt(ct[0],new Nu(Gt.x,Gt.y,0,0,void 0),U)}else if("LineString"===o.type)for(const ct of o.geometry)Bt(ct,new Nu(ct[0].x,ct[0].y,0,0,void 0),U);else if("Point"===o.type)for(const ct of o.geometry)for(const Gt of ct)Bt([Gt],new Nu(Gt.x,Gt.y,0,0,void 0),U)}const Zd=32640;function YT(c,o,u,f,g,x,w,E,M,P,N,U,j,Y,X,ee,se){const xe=function(Ee,Fe,Oe,Qe,et,ht,Ft,lt){const _t=[];if(0===Fe.positionedLines.length)return _t;const ft=Qe.layout.get("text-rotate").evaluate(ht,{})*Math.PI/180,It=function(Qt){const hn=Qt[0],Yt=Qt[1],Pn=hn*Yt;return Pn>0?[hn,-Yt]:Pn<0?[-hn,Yt]:0===hn?[Yt,hn]:[Yt,-hn]}(Oe);let Bt=Math.abs(Fe.top-Fe.bottom);for(const Qt of Fe.positionedLines)Bt-=Qt.lineOffset;const ct=Fe.positionedLines.length,Gt=Bt/ct;let An=Fe.top-Oe[1];for(let Qt=0;Qt<ct;++Qt){const hn=Fe.positionedLines[Qt];An=EF(Fe,Gt,An,Qt);for(const Yt of hn.positionedGlyphs){if(!Yt.rect)continue;const Pn=Yt.rect||{};let gr=4,cr=!0,or=1,Nn=0;if(Yt.imageName){const gi=Ft[Yt.imageName];if(!gi)continue;if(gi.sdf){zi("SDF images are not supported in formatted text and will be ignored.");continue}cr=!1,or=gi.pixelRatio,gr=1/or}const Zr=(et||lt)&&Yt.vertical,Wn=Yt.metrics.advance*Yt.scale/2,_r=Yt.metrics,ci=Yt.rect;if(null===ci)continue;lt&&Fe.verticalizable&&(Nn=Yt.imageName?Wn-Yt.metrics.width*Yt.scale/2:0);const Ti=et?[Yt.x+Wn,Yt.y]:[0,0];let Ei=[0,0],Pi=[0,0],Rt=!1;et||(Zr?(Pi=[Yt.x+Wn+It[0],Yt.y+It[1]-Nn],Rt=!0):Ei=[Yt.x+Wn+Oe[0],Yt.y+Oe[1]-Nn]);const Ki=ci.w*Yt.scale/(or*(Yt.localGlyph?2:1)),Ns=ci.h*Yt.scale/(or*(Yt.localGlyph?2:1));let ze,ts,ys,k;if(Zr){const gi=Yt.y-An,Li=new Xt(-Wn,Wn-gi),As=-Math.PI/2,Ws=new Xt(...Pi);ze=new Xt(-Wn+Ei[0],Ei[1]),ze._rotateAround(As,Li)._add(Ws),ze.x+=-gi+Wn,ze.y-=(_r.left-gr)*Yt.scale;const Gn=Yt.imageName?_r.advance*Yt.scale:_o*Yt.scale,Gs=String.fromCharCode(Yt.glyph);tg(Gs)?ze.x+=(1-gr)*Yt.scale:ta(Gs)?ze.x+=Gn-_r.height*Yt.scale+(-gr-1)*Yt.scale:ze.x+=Yt.imageName||_r.width+2*gr===ci.w&&_r.height+2*gr===ci.h?(Gn-Ns)/2:(Gn-(_r.height+2*gr)*Yt.scale)/2,ts=new Xt(ze.x,ze.y-Ki),ys=new Xt(ze.x+Ns,ze.y),k=new Xt(ze.x+Ns,ze.y-Ki)}else{const gi=(_r.left-gr)*Yt.scale-Wn+Ei[0],Li=(-_r.top-gr)*Yt.scale+Ei[1],As=gi+Ki,Ws=Li+Ns;ze=new Xt(gi,Li),ts=new Xt(As,Li),ys=new Xt(gi,Ws),k=new Xt(As,Ws)}if(ft){let gi;gi=et?new Xt(0,0):Rt?new Xt(It[0],It[1]):new Xt(Oe[0],Oe[1]),ze._rotateAround(ft,gi),ts._rotateAround(ft,gi),ys._rotateAround(ft,gi),k._rotateAround(ft,gi)}const A=new Xt(0,0),Q=new Xt(0,0);_t.push({tl:ze,tr:ts,bl:ys,br:k,tex:Pn,writingMode:Fe.writingMode,glyphOffset:Ti,sectionIndex:Yt.sectionIndex,isSDF:cr,pixelOffsetTL:A,pixelOffsetBR:Q,minFontScaleX:0,minFontScaleY:0})}}return _t}(0,f,M,x,w,E,g,c.allowVerticalPlacement),ke=c.textSizeData;let pe=null;"source"===ke.kind?(pe=[Fh*x.layout.get("text-size").evaluate(E,{},se)],pe[0]>Zd&&zi(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===ke.kind&&(pe=[Fh*X.compositeTextSizes[0].evaluate(E,{},se),Fh*X.compositeTextSizes[1].evaluate(E,{},se)],(pe[0]>Zd||pe[1]>Zd)&&zi(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,xe,pe,M,w,E,N,o,u,P.lineStartIndex,P.lineLength,Y,ee,se);for(const Ee of U)j[Ee]=c.text.placedSymbolArray.length-1;return 4*xe.length}function qT(c){for(const o in c)return c[o];return null}function H1(c,o,u,f,g,x,w,E,M,P){let N=w.top,U=w.bottom,j=w.left,Y=w.right;const X=w.collisionPadding;if(X&&(j-=X[0],N-=X[1],Y+=X[2],U+=X[3]),M){const ee=new Xt(j,N),se=new Xt(Y,N),xe=new Xt(j,U),ke=new Xt(Y,U),pe=Cr(M);let Ee=new Xt(0,0);P&&(Ee=new Xt(P[0],P[1])),ee._rotateAround(pe,Ee),se._rotateAround(pe,Ee),xe._rotateAround(pe,Ee),ke._rotateAround(pe,Ee),j=Math.min(ee.x,se.x,xe.x,ke.x),Y=Math.max(ee.x,se.x,xe.x,ke.x),N=Math.min(ee.y,se.y,xe.y,ke.y),U=Math.max(ee.y,se.y,xe.y,ke.y)}return c.emplaceBack(o.x,o.y,o.z,u.x,u.y,j,N,Y,U,E,f,g,x),c.length-1}function $1(c){c.collisionPadding&&(c.top-=c.collisionPadding[1],c.bottom+=c.collisionPadding[3]);const o=c.bottom-c.top;return o>0?Math.max(10,o):null}function Fk(c,o,u,f){const g=c.compareText;if(o in g){const x=g[o];for(let w=x.length-1;w>=0;w--)if(f.dist(x[w])<u)return!0}else g[o]=[];return g[o].push(f),!1}function Nb(c,o){const u=c.fovAboveCenter,f=c.elevation?c.elevation.getMinElevationBelowMSL()*o:0,g=(c._camera.position[2]*c.worldSize-f)/Math.cos(c._pitch),x=Math.sin(u)*g/Math.sin(Math.max(Math.PI/2-c._pitch-u,.01)),w=Math.sin(c._pitch)*x+g;return Math.min(1.01*w,g*(1/c._horizonShift))}function Kd(c,o){if(!o.isReprojectedInTileSpace)return{scale:1<<c.z,x:c.x,y:c.y,x2:c.x+1,y2:c.y+1,projection:o};const u=Math.pow(2,-c.z),f=c.x*u,g=(c.x+1)*u,x=c.y*u,w=(c.y+1)*u,E=il(f),M=il(g),P=gs(x),N=gs(w),U=o.project(E,P),j=o.project(M,P),Y=o.project(M,N),X=o.project(E,N);let ee=Math.min(U.x,j.x,Y.x,X.x),se=Math.min(U.y,j.y,Y.y,X.y),xe=Math.max(U.x,j.x,Y.x,X.x),ke=Math.max(U.y,j.y,Y.y,X.y);const pe=u/16;function Ee(Oe,Qe,et,ht,Ft,lt){const _t=(et+Ft)/2,ft=(ht+lt)/2,It=o.project(il(_t),gs(ft)),Bt=Math.max(0,ee-It.x,se-It.y,It.x-xe,It.y-ke);ee=Math.min(ee,It.x),xe=Math.max(xe,It.x),se=Math.min(se,It.y),ke=Math.max(ke,It.y),Bt>pe&&(Ee(Oe,It,et,ht,_t,ft),Ee(It,Qe,_t,ft,Ft,lt))}Ee(U,j,f,x,g,x),Ee(j,Y,g,x,g,w),Ee(Y,X,g,w,f,w),Ee(X,U,f,w,f,x),ee-=pe,se-=pe,xe+=pe,ke+=pe;const Fe=1/Math.max(xe-ee,ke-se);return{scale:Fe,x:ee*Fe,y:se*Fe,x2:xe*Fe,y2:ke*Fe,projection:o}}const Bb=Uc(new Float32Array(16));class Cp{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,u){return{x:0,y:0,z:0}}unproject(o,u){return new Tr(0,0)}projectTilePoint(o,u,f){return{x:o,y:u,z:0}}locationPoint(o,u,f=!0){return o._coordinatePoint(o.locationCoordinate(u),f)}pixelsPerMeter(o,u){return Ol(1,o)*u}pixelSpaceConversion(o,u,f){return 1}farthestPixelDistance(o){return Nb(o,o.pixelsPerMeter)}pointCoordinate(o,u,f,g){const x=o.horizonLineFromTop(!1),w=new Xt(u,Math.max(x,f));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,g))}pointCoordinate3D(o,u,f){const g=new Xt(u,f);if(o.elevation)return o.elevation.pointCoordinate(g);{const x=this.pointCoordinate(o,g.x,g.y,0);return[x.x,x.y,x.z]}}isPointAboveHorizon(o,u){if(o.elevation)return!this.pointCoordinate3D(o,u.x,u.y);const f=o.horizonLineFromTop();return u.y<f}createInversionMatrix(o,u){return Bb}createTileMatrix(o,u,f){let g,x,w;const E=f.canonical,M=Uc(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=Kd(E,this);g=1,x=P.x+f.wrap*P.scale,w=P.y,jc(M,M,[g/P.scale,g/P.scale,o.pixelsPerMeter/u])}else g=u/o.zoomScale(E.z),x=(E.x+Math.pow(2,E.z)*f.wrap)*g,w=E.y*g;return mp(M,M,[x,w,0]),jc(M,M,[g/Bn,g/Bn,1]),M}upVector(o,u,f){return[0,0,1]}upVectorScale(o,u,f){return{metersToTile:1}}}class zb extends Cp{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[u,f]=this.parallels=o.parallels||[29.5,45.5],g=Math.sin(Cr(u));this.n=(g+Math.sin(Cr(f)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(o,u){const{n:f,c:g,r0:x}=this,w=Cr(o-this.center[0]),E=Cr(u),M=Math.sqrt(g-2*f*Math.sin(E))/f;return{x:M*Math.sin(w*f),y:M*Math.cos(w*f)-x,z:0}}unproject(o,u){const{n:f,c:g,r0:x}=this,w=x+u;let E=Math.atan2(o,Math.abs(w))*Math.sign(w);w*f<0&&(E-=Math.PI*Math.sign(o)*Math.sign(w));const M=Cr(this.center[0])*f;E=ha(E,-Math.PI-M,Math.PI-M);const P=dr(Hs(E/f)+this.center[0],-180,180),N=Math.asin(dr((g-(o*o+w*w)*f*f)/(2*f),-1,1)),U=dr(Hs(N),-go,go);return new Tr(P,U)}}const c_=1.340264,W1=-.081106,We=893e-6,og=.003796,G1=Math.sqrt(3)/2;class XT extends Cp{project(o,u){u=u/180*Math.PI,o=o/180*Math.PI;const f=Math.asin(G1*Math.sin(u)),g=f*f,x=g*g*g;return{x:.5*(o*Math.cos(f)/(G1*(c_+3*W1*g+x*(7*We+9*og*g)))/Math.PI+.5),y:1-.5*(f*(c_+W1*g+x*(We+og*g))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=f*f,x=g*g*g;for(let N,U,j,Y=0;Y<12&&(U=f*(c_+W1*g+x*(We+og*g))-u,j=c_+3*W1*g+x*(7*We+9*og*g),N=U/j,f=dr(f-N,-Math.PI/3,Math.PI/3),g=f*f,x=g*g*g,!(Math.abs(N)<1e-12));++Y);const w=G1*o*(c_+3*W1*g+x*(7*We+9*og*g))/Math.cos(f),E=Math.asin(Math.sin(f)/G1),M=dr(180*w/Math.PI,-180,180),P=dr(180*E/Math.PI,-go,go);return new Tr(M,P)}}class Rk extends Cp{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){return{x:.5+o/360,y:.5-u/360,z:0}}unproject(o,u){const f=360*(o-.5),g=dr(360*(.5-u),-go,go);return new Tr(f,g)}}const ag=Math.PI/2;function Tp(c){return Math.tan((ag+c)/2)}class lg extends Cp{constructor(o){super(o),this.center=o.center||[0,30];const[u,f]=this.parallels=o.parallels||[30,30];let g=Cr(u),x=Cr(f);this.southernCenter=g+x<0,this.southernCenter&&(g=-g,x=-x);const w=Math.cos(g),E=Tp(g);this.n=g===x?Math.sin(g):Math.log(w/Math.cos(x))/Math.log(Tp(x)/E),this.f=w*Math.pow(Tp(g),this.n)/this.n}project(o,u){u=Cr(u),this.southernCenter&&(u=-u),o=Cr(o-this.center[0]);const f=1e-6,{n:g,f:x}=this;x>0?u<-ag+f&&(u=-ag+f):u>ag-f&&(u=ag-f);const w=x/Math.pow(Tp(u),g);let E=w*Math.sin(g*o),M=x-w*Math.cos(g*o);return E=.5*(E/Math.PI+.5),M=.5*(M/Math.PI+.5),{x:E,y:this.southernCenter?M:1-M,z:0}}unproject(o,u){o=(2*o-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:g}=this,x=g-u,w=Math.sign(x),E=Math.sign(f)*Math.sqrt(o*o+x*x);let M=Math.atan2(o,Math.abs(x))*w;x*f<0&&(M-=Math.PI*Math.sign(o)*w);const P=dr(Hs(M/f)+this.center[0],-180,180),N=dr(Hs(2*Math.atan(Math.pow(g/E,1/f))-ag),-go,go);return new Tr(P,this.southernCenter?-N:N)}}class Y1 extends Cp{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,u){return{x:Lu(o),y:gc(u),z:0}}unproject(o,u){const f=il(o),g=gs(u);return new Tr(f,g)}}const cg=Cr(go);class Vb extends Cp{project(o,u){const f=(u=Cr(u))*u,g=f*f;return{x:.5*((o=Cr(o))*(.8707-.131979*f+g*(g*(.003971*f-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+g*(.028874*f-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,g=25,x=0,w=f*f;do{w=f*f;const P=w*w;x=(f*(1.007226+w*(.015085+P*(.028874*w-.044475-.005916*P)))-u)/(1.007226+w*(.045255+P*(.259866*w-.311325-.005916*11*P))),f=dr(f-x,-cg,cg)}while(Math.abs(x)>1e-6&&--g>0);w=f*f;const E=dr(Hs(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),M=Hs(f);return new Tr(E,M)}}const u_=Cr(go);class ZT extends Cp{project(o,u){u=Cr(u),o=Cr(o);const f=Math.cos(u),g=2/Math.PI,x=Math.acos(f*Math.cos(o/2)),w=Math.sin(x)/x,E=.5*(o*g+2*f*Math.sin(o/2)/w)||0,M=.5*(u+Math.sin(u)/w)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(o,u){let f=o=(2*o-.5)*Math.PI,g=u=(2*(1-u)-1)*Math.PI,x=25;const w=1e-6;let E=0,M=0;do{const P=Math.cos(g),N=Math.sin(g),U=2*N*P,j=N*N,Y=P*P,X=Math.cos(f/2),ee=Math.sin(f/2),se=2*X*ee,xe=ee*ee,ke=1-Y*X*X,pe=ke?1/ke:0,Ee=ke?Math.acos(P*X)*Math.sqrt(1/ke):0,Fe=.5*(2*Ee*P*ee+2*f/Math.PI)-o,Oe=.5*(Ee*N+g)-u,Qe=.5*pe*(Y*xe+Ee*P*X*j)+1/Math.PI,et=pe*(se*U/4-Ee*N*ee),ht=.125*pe*(U*ee-Ee*N*Y*se),Ft=.5*pe*(j*X+Ee*xe*P)+.5,lt=et*ht-Ft*Qe;E=(Oe*et-Fe*Ft)/lt,M=(Fe*ht-Oe*Qe)/lt,f=dr(f-E,-Math.PI,Math.PI),g=dr(g-M,-u_,u_)}while((Math.abs(E)>w||Math.abs(M)>w)&&--x>0);return new Tr(Hs(f),Hs(g))}}class q1 extends Cp{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Cr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){const{scale:f,cosPhi:g}=this;return{x:Cr(o)*g*f+.5,y:-Math.sin(Cr(u))/g*f+.5,z:0}}unproject(o,u){const{scale:f,cosPhi:g}=this,x=-(u-.5)/f,w=dr(Hs((o-.5)/f)/g,-180,180),E=Math.asin(dr(x*g,-1,1)),M=dr(Hs(E),-go,go);return new Tr(w,M)}}class Ub extends Y1{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,u,f){const g=Lh(o,u,f);return Vi(g,g,W0(Ou(f))),{x:g[0],y:g[1],z:g[2]}}locationPoint(o,u){const f=Rs(u.lat,u.lng),g=_a([],f),x=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(u),o._centerAltitude):o._centerAltitude;c1(f,f,g,Ol(1,0)*Bn*x);const w=Uc(new Float64Array(16));return Pu(w,o.pixelMatrix,o.globeMatrix),Vi(f,f,w),new Xt(f[0],f[1])}pixelsPerMeter(o,u){return Ol(1,0)*u}pixelSpaceConversion(o,u,f){const g=Ol(1,o)*u,x=Er(Ol(1,45)*u,g,f);return this.pixelsPerMeter(o,u)/x}createTileMatrix(o,u,f){const g=g1(Ou(f.canonical));return Pu(new Float64Array(16),o.globeMatrix,g)}createInversionMatrix(o,u){const{center:f}=o,g=W0(Ou(u));return Bd(g,g,Cr(f.lng)),a1(g,g,Cr(f.lat)),jc(g,g,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(o,u,f,g){return p1(o,u,f,!0)||new jd(0,0)}pointCoordinate3D(o,u,f){const g=this.pointCoordinate(o,u,f,0);return[g.x,g.y,g.z]}isPointAboveHorizon(o,u){return!p1(o,u.x,u.y,!1)}farthestPixelDistance(o){const u=function(g,x){const w=g.cameraToCenterDistance,E=g._centerAltitude*x,M=g._camera,P=g._camera.forward(),N=nl([],Pl([],P,-w),[0,0,E]),U=g.worldSize/(2*Math.PI),j=[0,0,-U],Y=g.width/g.height,X=Math.tan(g.fovAboveCenter),ee=Pl([],M.up(),X),se=Pl([],M.right(),X*Y),xe=_a([],nl([],nl([],P,ee),se)),ke=[];let pe;if(new Yx(N,xe).closestPointOnSphere(j,U,ke)){const Ee=nl([],ke,j),Fe=fc([],Ee,N);pe=Math.cos(g.fovAboveCenter)*V0(Fe)}else{const Ee=fc([],N,j),Fe=fc([],j,N);_a(Fe,Fe);const Oe=V0(Ee)-U;pe=Math.sqrt(Oe*(Oe+2*U));const Qe=Math.acos(pe/(U+Oe))-Math.acos(dc(P,Fe));pe*=Math.cos(Qe)}return 1.01*pe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),f=yp(o.zoom);if(f>0){const g=Nb(o,Ol(1,o.center.lat)*o.worldSize),x=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Er(u,g+x*(1-Math.cos(w)),Math.pow(f,10))}return u}upVector(o,u,f){return Lh(u,f,o,1)}upVectorScale(o){return{metersToTile:H0($0(Ou(o)))}}}function X1(c){const o=c.parallels,u=!!o&&Math.abs(o[0]+o[1])<.01;switch(c.name){case"mercator":return new Y1(c);case"equirectangular":return new Rk(c);case"naturalEarth":return new Vb(c);case"equalEarth":return new XT(c);case"winkelTripel":return new ZT(c);case"albers":return u?new q1(c):new zb(c);case"lambertConformalConic":return u?new q1(c):new lg(c);case"globe":return new Ub(c)}throw new Error(`Invalid projection name: ${c.name}`)}const KT=e_.types,jb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Z1(c,o,u,f,g,x,w,E,M,P,N,U,j){const Y=E?Math.min(Zd,Math.round(E[0])):0,X=E?Math.min(Zd,Math.round(E[1])):0;c.emplaceBack(o,u,Math.round(32*f),Math.round(32*g),x,w,(Y<<1)+(M?1:0),X,16*P,16*N,256*U,256*j)}function K1(c,o,u,f,g,x,w){c.emplaceBack(o,u,f,g,x,w)}function h_(c,o,u,f,g){c.emplaceBack(o,u,f,g),c.emplaceBack(o,u,f,g),c.emplaceBack(o,u,f,g),c.emplaceBack(o,u,f,g)}function Nk(c){for(const o of c.sections)if(J(o.text))return!0;return!1}class J1{constructor(o){this.layoutVertexArray=new Au,this.indexArray=new fo,this.programConfigurations=o,this.segments=new ks,this.dynamicLayoutVertexArray=new xi,this.opacityVertexArray=new pi,this.placedSymbolArray=new Rx,this.globeExtVertexArray=new Ii}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,u,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,mk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,_k.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,jb,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,gk.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}_n(J1,"SymbolBuffers");class Q1{constructor(o,u,f){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new f,this.segments=new ks,this.collisionVertexArray=new mi,this.collisionVertexArrayExt=new $s}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,wb.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,yk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}_n(Q1,"CollisionBuffers");class Jd{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Uc([]),this.placementViewportMatrix=Uc([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Tb(this.zoom,u["text-size"]),this.iconSizeData=Tb(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&void 0!==g.constantOr(1),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(w=>Rl[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new J1(new Rd(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new J1(new Rd(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new OC,this.lineVertexArray=new po,this.symbolInstances=new fp}calculateGlyphDependencies(o,u,f,g,x){for(let w=0;w<o.length;w++)if(u[o.charCodeAt(w)]=!0,g&&x){const E=n_[o.charAt(w)];E&&(u[E.charCodeAt(0)]=!0)}}populate(o,u,f,g){const x=this.layers[0],w=x.layout,E="globe"===this.projection.name,M=w.get("text-font"),P=w.get("text-field"),N=w.get("icon-image"),U=("constant"!==P.value.kind||P.value.value instanceof cs&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),j="constant"!==N.value.kind||!!N.value.value||Object.keys(N.parameters).length>0,Y=w.get("symbol-sort-key");if(this.features=[],!U&&!j)return;const X=u.iconDependencies,ee=u.glyphDependencies,se=u.availableImages,xe=new Ge(this.zoom);for(const{feature:ke,id:pe,index:Ee,sourceLayerIndex:Fe}of o){const Oe=x._featureFilter.needGeometry,Qe=Hd(ke,Oe);if(!x._featureFilter.filter(xe,Qe,f))continue;if(Oe||(Qe.geometry=$c(ke,f,g)),E&&1!==ke.type&&f.z<=5){const lt=Qe.geometry,_t=.98078528056,ft=(It,Bt)=>dc(Lh(It.x,It.y,f,1),Lh(Bt.x,Bt.y,f,1))<_t;for(let It=0;It<lt.length;It++)lt[It]=KM(lt[It],ft)}let et,ht;if(U){const lt=x.getValueAndResolveTokens("text-field",Qe,f,se),_t=cs.factory(lt);Nk(_t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Be()||this.hasRTLText&&Ue.isParsed())&&(et=_s(_t,x,Qe))}if(j){const lt=x.getValueAndResolveTokens("icon-image",Qe,f,se);ht=lt instanceof fa?lt:fa.fromString(lt)}if(!et&&!ht)continue;const Ft=this.sortFeaturesByKey?Y.evaluate(Qe,{},f):void 0;if(this.features.push({id:pe,text:et,icon:ht,index:Ee,sourceLayerIndex:Fe,geometry:Qe.geometry,properties:ke.properties,type:KT[ke.type],sortKey:Ft}),ht&&(X[ht.name]=!0),et){const lt=M.evaluate(Qe,{},f).join(","),_t="map"===w.get("text-rotation-alignment")&&"point"!==w.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Rl.vertical)>=0;for(const ft of et.sections)if(ft.image)X[ft.image.name]=!0;else{const It=C(et.toString()),Bt=ft.fontStack||lt,ct=ee[Bt]=ee[Bt]||{};this.calculateGlyphDependencies(ft.text,ct,_t,this.allowVerticalPlacement,It)}}}"line"===w.get("symbol-placement")&&(this.features=function(ke){const pe={},Ee={},Fe=[];let Oe=0;function Qe(lt){Fe.push(ke[lt]),Oe++}function et(lt,_t,ft){const It=Ee[lt];return delete Ee[lt],Ee[_t]=It,Fe[It].geometry[0].pop(),Fe[It].geometry[0]=Fe[It].geometry[0].concat(ft[0]),It}function ht(lt,_t,ft){const It=pe[_t];return delete pe[_t],pe[lt]=It,Fe[It].geometry[0].shift(),Fe[It].geometry[0]=ft[0].concat(Fe[It].geometry[0]),It}function Ft(lt,_t,ft){const It=ft?_t[0][_t[0].length-1]:_t[0][0];return`${lt}:${It.x}:${It.y}`}for(let lt=0;lt<ke.length;lt++){const _t=ke[lt],ft=_t.geometry,It=_t.text?_t.text.toString():null;if(!It){Qe(lt);continue}const Bt=Ft(It,ft),ct=Ft(It,ft,!0);if(Bt in Ee&&ct in pe&&Ee[Bt]!==pe[ct]){const Gt=ht(Bt,ct,ft),An=et(Bt,ct,Fe[Gt].geometry);delete pe[Bt],delete Ee[ct],Ee[Ft(It,Fe[An].geometry,!0)]=An,Fe[Gt].geometry=null}else Bt in Ee?et(Bt,ct,ft):ct in pe?ht(Bt,ct,ft):(Qe(lt),pe[Bt]=Oe-1,Ee[ct]=Oe-1)}return Fe.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ke,pe)=>ke.sortKey-pe.sortKey)}update(o,u,f,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,f,g),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,f,g))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=X1(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const f=this.lineVertexArray.length;if(void 0!==o.segment)for(const{x:g,y:x}of u)this.lineVertexArray.emplaceBack(g,x);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,u,f,g,x,w,E,M,P,N,U,j,Y,X){const ee=o.indexArray,se=o.layoutVertexArray,xe=o.globeExtVertexArray,ke=o.segments.prepareSegment(4*u.length,se,ee,this.canOverlap?w.sortKey:void 0),pe=this.glyphOffsetArray.length,Ee=ke.vertexLength,Fe=this.allowVerticalPlacement&&E===Rl.vertical?Math.PI/2:0,Oe=w.text&&w.text.sections;for(let et=0;et<u.length;et++){const{tl:ht,tr:Ft,bl:lt,br:_t,tex:ft,pixelOffsetTL:It,pixelOffsetBR:Bt,minFontScaleX:ct,minFontScaleY:Gt,glyphOffset:An,isSDF:Qt,sectionIndex:hn}=u[et],Yt=ke.vertexLength,Pn=An[1];if(Z1(se,P.x,P.y,ht.x,Pn+ht.y,ft.x,ft.y,f,Qt,It.x,It.y,ct,Gt),Z1(se,P.x,P.y,Ft.x,Pn+Ft.y,ft.x+ft.w,ft.y,f,Qt,Bt.x,It.y,ct,Gt),Z1(se,P.x,P.y,lt.x,Pn+lt.y,ft.x,ft.y+ft.h,f,Qt,It.x,Bt.y,ct,Gt),Z1(se,P.x,P.y,_t.x,Pn+_t.y,ft.x+ft.w,ft.y+ft.h,f,Qt,Bt.x,Bt.y,ct,Gt),M){const{x:gr,y:cr,z:or}=M.anchor,[Nn,Zr,Wn]=M.up;K1(xe,gr,cr,or,Nn,Zr,Wn),K1(xe,gr,cr,or,Nn,Zr,Wn),K1(xe,gr,cr,or,Nn,Zr,Wn),K1(xe,gr,cr,or,Nn,Zr,Wn),h_(o.dynamicLayoutVertexArray,gr,cr,or,Fe)}else h_(o.dynamicLayoutVertexArray,P.x,P.y,P.z,Fe);ee.emplaceBack(Yt,Yt+1,Yt+2),ee.emplaceBack(Yt+1,Yt+2,Yt+3),ke.vertexLength+=4,ke.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(An[0]),et!==u.length-1&&hn===u[et+1].sectionIndex||o.programConfigurations.populatePaintArrays(se.length,w,w.index,{},Y,X,Oe&&Oe[hn])}const Qe=M?M.anchor:P;o.placedSymbolArray.emplaceBack(Qe.x,Qe.y,Qe.z,P.x,P.y,pe,this.glyphOffsetArray.length-pe,Ee,N,U,P.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],E,0,!1,0,j,0)}_commitLayoutVertex(o,u,f,g,x,w,E){o.emplaceBack(u,f,g,x,w,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(o,u,f,g,x,w,E){const M=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),P=M.vertexLength,N=E.tileAnchorX,U=E.tileAnchorY;for(let Y=0;Y<4;Y++)f.collisionVertexArray.emplaceBack(0,0,0,0);f.collisionVertexArrayExt.emplaceBack(u,-o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(u,o.padding,-o.padding),f.collisionVertexArrayExt.emplaceBack(u,o.padding,o.padding),f.collisionVertexArrayExt.emplaceBack(u,-o.padding,o.padding),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,N,U,new Xt(o.x1,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,N,U,new Xt(o.x2,o.y1)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,N,U,new Xt(o.x2,o.y2)),this._commitLayoutVertex(f.layoutVertexArray,g,x,w,N,U,new Xt(o.x1,o.y2)),M.vertexLength+=4;const j=f.indexArray;j.emplaceBack(P,P+1),j.emplaceBack(P+1,P+2),j.emplaceBack(P+2,P+3),j.emplaceBack(P+3,P),M.primitiveLength+=4}_addTextDebugCollisionBoxes(o,u,f,g,x,w){for(let E=g;E<x;E++){const M=f.get(E),P=this.getSymbolInstanceTextSize(o,w,u,E);this._addCollisionDebugVertices(M,P,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,u,f,g,x,w){for(let E=g;E<x;E++){const M=f.get(E),P=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._addCollisionDebugVertices(M,P,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Q1(li,Cb.members,Bc),this.iconCollisionBox=new Q1(li,Cb.members,Bc);const f=Qm(this.iconSizeData,o),g=Qm(this.textSizeData,o);for(let x=0;x<this.symbolInstances.length;x++){const w=this.symbolInstances.get(x);this._addTextDebugCollisionBoxes(g,o,u,w.textBoxStartIndex,w.textBoxEndIndex,w),this._addTextDebugCollisionBoxes(g,o,u,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,u,w.iconBoxStartIndex,w.iconBoxEndIndex,w),this._addIconDebugCollisionBoxes(f,o,u,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w)}}getSymbolInstanceTextSize(o,u,f,g){const x=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:g),w=Rh(this.textSizeData,o,x)/_o;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,u,f){const g=this.icon.placedSymbolArray.get(f),x=Rh(this.iconSizeData,o,g);return this.tilePixelRatio*x}_commitDebugCollisionVertexUpdate(o,u,f){o.emplaceBack(u,-f,-f),o.emplaceBack(u,f,-f),o.emplaceBack(u,f,f),o.emplaceBack(u,-f,f)}_updateTextDebugCollisionBoxes(o,u,f,g,x,w){for(let E=g;E<x;E++){const M=f.get(E),P=this.getSymbolInstanceTextSize(o,w,u,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,M.padding)}}_updateIconDebugCollisionBoxes(o,u,f,g,x,w){for(let E=g;E<x;E++){const M=f.get(E),P=this.getSymbolInstanceIconSize(o,u,w);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,M.padding)}}updateCollisionDebugBuffers(o,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const f=Qm(this.iconSizeData,o),g=Qm(this.textSizeData,o);for(let x=0;x<this.symbolInstances.length;x++){const w=this.symbolInstances.get(x);this._updateTextDebugCollisionBoxes(g,o,u,w.textBoxStartIndex,w.textBoxEndIndex,w),this._updateTextDebugCollisionBoxes(g,o,u,w.verticalTextBoxStartIndex,w.verticalTextBoxEndIndex,w),this._updateIconDebugCollisionBoxes(f,o,u,w.iconBoxStartIndex,w.iconBoxEndIndex,w.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(f,o,u,w.verticalIconBoxStartIndex,w.verticalIconBoxEndIndex,w.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,u,f,g,x,w,E,M,P){const N={};if(u<f){const{x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee,featureIndex:Fe}=o.get(u);N.textBox={x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee},N.textFeatureIndex=Fe}if(g<x){const{x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee,featureIndex:Fe}=o.get(g);N.verticalTextBox={x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee},N.verticalTextFeatureIndex=Fe}if(w<E){const{x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee,featureIndex:Fe}=o.get(w);N.iconBox={x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee},N.iconFeatureIndex=Fe}if(M<P){const{x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee,featureIndex:Fe}=o.get(M);N.verticalIconBox={x1:U,y1:j,x2:Y,y2:X,padding:ee,projectedAnchorX:se,projectedAnchorY:xe,projectedAnchorZ:ke,tileAnchorX:pe,tileAnchorY:Ee},N.verticalIconFeatureIndex=Fe}return N}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,u){const f=o.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const u=Math.sin(o),f=Math.cos(o),g=[],x=[],w=[];for(let E=0;E<this.symbolInstances.length;++E){w.push(E);const M=this.symbolInstances.get(E);g.push(0|Math.round(u*M.tileAnchorX+f*M.tileAnchorY)),x.push(M.featureIndex)}return w.sort((E,M)=>g[E]-g[M]||x[M]-x[E]),w}addToSortKeyRanges(o,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:x,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:P}=f;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),x>=0&&x!==g&&this.addIndicesForPlacedSymbol(this.text,x),w>=0&&w!==x&&w!==g&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}_n(Jd,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Jd.MAX_GLYPHS=65535,Jd.addDynamicAttributes=h_;const Bk=new Nt({"symbol-placement":new Ye(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ot(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ot(mt.layout_symbol["icon-size"]),"icon-text-fit":new Ye(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ot(mt.layout_symbol["icon-image"]),"icon-rotate":new ot(mt.layout_symbol["icon-rotate"]),"icon-padding":new Ye(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new ot(mt.layout_symbol["icon-offset"]),"icon-anchor":new ot(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(mt.layout_symbol["text-rotation-alignment"]),"text-field":new ot(mt.layout_symbol["text-field"]),"text-font":new ot(mt.layout_symbol["text-font"]),"text-size":new ot(mt.layout_symbol["text-size"]),"text-max-width":new ot(mt.layout_symbol["text-max-width"]),"text-line-height":new ot(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new ot(mt.layout_symbol["text-letter-spacing"]),"text-justify":new ot(mt.layout_symbol["text-justify"]),"text-radial-offset":new ot(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(mt.layout_symbol["text-variable-anchor"]),"text-anchor":new ot(mt.layout_symbol["text-anchor"]),"text-max-angle":new Ye(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(mt.layout_symbol["text-writing-mode"]),"text-rotate":new ot(mt.layout_symbol["text-rotate"]),"text-padding":new Ye(mt.layout_symbol["text-padding"]),"text-keep-upright":new Ye(mt.layout_symbol["text-keep-upright"]),"text-transform":new ot(mt.layout_symbol["text-transform"]),"text-offset":new ot(mt.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(mt.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(mt.layout_symbol["text-optional"])});var Ra={paint:new Nt({"icon-opacity":new ot(mt.paint_symbol["icon-opacity"]),"icon-color":new ot(mt.paint_symbol["icon-color"]),"icon-halo-color":new ot(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ot(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ot(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ot(mt.paint_symbol["text-opacity"]),"text-color":new ot(mt.paint_symbol["text-color"],{runtimeType:Za,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new ot(mt.paint_symbol["text-halo-color"]),"text-halo-width":new ot(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new ot(mt.paint_symbol["text-halo-blur"]),"text-translate":new Ye(mt.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(mt.paint_symbol["text-translate-anchor"])}),layout:Bk};class Hb{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Oc,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_n(Hb,"FormatSectionOverride",{omit:["defaultValue"]});class ev extends ms{constructor(o){super(o,Ra)}recalculate(o,u){super.recalculate(o,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,u,f,g){const x=this.layout.get(o).evaluate(u,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||ko(w.value)||!x?x:(E=u.properties,x.replace(/{([^{}]+)}/g,(P,N)=>N in E?String(E[N]):""));var E}createBucket(o){return new Jd(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of Ra.paint.overridableProperties){if(!ev.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),f=new Hb(u),g=new Mh(f,u.property.specification);let x=null;x="constant"===u.value.kind||"source"===u.value.kind?new T0("source",g):new kh("composite",g,u.value.zoomStops,u.value._interpolationType),this.paint._values[o]=new Ot(u.property,x,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&ev.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const f=o.get("text-field"),g=Ra.paint.properties[u];let x=!1;const w=E=>{for(const M of E)if(g.overrides&&g.overrides.hasOverride(M))return void(x=!0)};if("constant"===f.value.kind&&f.value.value instanceof cs)w(f.value.value.sections);else if("source"===f.value.kind){const E=P=>{x||(P instanceof jf&&Fs(P.value)===Rr?w(P.value.sections):P instanceof _m?w(P.sections):P.eachChild(E))},M=f.value;M._styleExpression&&E(M._styleExpression.expression)}return x}getProgramConfiguration(o){return new el(this,o)}}var DF={paint:new Nt({"background-color":new Ye(mt.paint_background["background-color"]),"background-pattern":new Ye(mt.paint_background["background-pattern"]),"background-opacity":new Ye(mt.paint_background["background-opacity"])})},$b={paint:new Nt({"raster-opacity":new Ye(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(mt.paint_raster["raster-saturation"]),"raster-contrast":new Ye(mt.paint_raster["raster-contrast"]),"raster-resampling":new Ye(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(mt.paint_raster["raster-fade-duration"])})};class JT extends ms{constructor(o){super(o,{}),this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var zk={paint:new Nt({"sky-type":new Ye(mt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ye(mt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ye(mt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ye(mt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ye(mt.paint_sky["sky-gradient-radius"]),"sky-gradient":new kt(mt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ye(mt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ye(mt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ye(mt.paint_sky["sky-opacity"])})};function Wb(c,o,u){const f=[0,0,1],g=$M([]);return h1(g,g,u?-Cr(c)+Math.PI:Cr(c)),WM(g,g,-Cr(o)),Gx(f,f,g),_a(f,f)}const Vk={circle:class extends ms{constructor(c){super(c,ib)}createBucket(c){return new tb(c)}queryRadius(c){const o=c;return Gd("circle-radius",this,o)+Gd("circle-stroke-width",this,o)+Y0(this.paint.get("circle-translate"))}queryIntersectsFeature(c,o,u,f,g,x,w,E){const M=X0(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,c.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u);return b1(c,f,x,w,E,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),M,P)}getProgramIds(){return["circle"]}getProgramConfiguration(c){return new el(this,c)}},heatmap:class extends ms{createBucket(c){return new aT(c)}constructor(c){super(c,ob),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"heatmap-color"===c&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Yd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(c){return Gd("heatmap-radius",this,c)}queryIntersectsFeature(c,o,u,f,g,x,w,E){const M=this.paint.get("heatmap-radius").evaluate(o,u);return b1(c,f,x,w,E,!0,!0,new Xt(0,0),M)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(c){return new el(this,c)}},hillshade:class extends ms{constructor(c){super(c,ek)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ms{constructor(c){super(c,fb)}getProgramIds(){const c=this.paint.get("fill-pattern"),o=c&&c.constantOr(1),u=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(c){return new el(this,c)}recalculate(c,o){super.recalculate(c,o);const u=this.paint._values["fill-outline-color"];"constant"===u.value.kind&&void 0===u.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new db(c)}queryRadius(){return Y0(this.paint.get("fill-translate"))}queryIntersectsFeature(c,o,u,f,g,x){return!c.queryGeometry.isAboveHorizon&&$d(q0(c.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,c.pixelToTileUnitsFactor),f)}isTileClipped(){return!0}},"fill-extrusion":class extends ms{constructor(c){super(c,vb)}createBucket(c){return new P1(c)}queryRadius(){return Y0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(c){return new el(this,c)}queryIntersectsFeature(c,o,u,f,g,x,w,E,M){const P=X0(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,c.pixelToTileUnitsFactor),N=this.paint.get("fill-extrusion-height").evaluate(o,u),U=this.paint.get("fill-extrusion-base").evaluate(o,u),j=[0,0],Y=E&&x.elevation,X=x.elevation?x.elevation.exaggeration():1,ee=c.tile.getBucket(this);if(Y&&ee instanceof P1){const Ee=ee.centroidVertexArray,Fe=M+1;Fe<Ee.length&&(j[0]=Ee.geta_centroid_pos0(Fe),j[1]=Ee.geta_centroid_pos1(Fe))}if(0===j[0]&&1===j[1])return!1;"globe"===x.projection.name&&(f=yb([f],[new Xt(0,0),new Xt(Bn,Bn)],c.tileID.canonical).map(Ee=>Ee.polygon).flat());const se=Y?E:null,[xe,ke]=(Fe=f,Oe=U,Qe=N,et=P,ht=w,Ft=se,lt=j,_t=X,ft=x.center.lat,"globe"===(Ee=x).projection.name?function(Bt,ct,Gt,An,Qt,hn,Yt,Pn,gr,cr,or){const Nn=[],Zr=[],Wn=Bt.projection.upVectorScale(or,Bt.center.lat,Bt.worldSize).metersToTile,_r=[0,0,0,1],ci=[0,0,0,1],Ti=(Pi,Rt,Ki,Ns)=>{Pi[0]=Rt,Pi[1]=Ki,Pi[2]=Ns,Pi[3]=1},Ei=TT();Gt>0&&(Gt+=Ei),An+=Ei;for(const Pi of ct){const Rt=[],Ki=[];for(const Ns of Pi){const ze=Ns.x+Qt.x,ts=Ns.y+Qt.y,ys=Bt.projection.projectTilePoint(ze,ts,or),k=Bt.projection.upVector(or,Ns.x,Ns.y);let A=Gt,Q=An;if(Yt){const gi=L1(ze,ts,Gt,An,Yt,Pn,gr,cr);A+=gi.base,Q+=gi.top}0!==Gt?Ti(_r,ys.x+k[0]*Wn*A,ys.y+k[1]*Wn*A,ys.z+k[2]*Wn*A):Ti(_r,ys.x,ys.y,ys.z),Ti(ci,ys.x+k[0]*Wn*Q,ys.y+k[1]*Wn*Q,ys.z+k[2]*Wn*Q),Vi(_r,_r,hn),Vi(ci,ci,hn),Rt.push(new bp(_r[0],_r[1],_r[2])),Ki.push(new bp(ci[0],ci[1],ci[2]))}Nn.push(Rt),Zr.push(Ki)}return[Nn,Zr]}(Ee,Fe,Oe,Qe,et,ht,Ft,lt,_t,ft,c.tileID.canonical):Ft?function(Bt,ct,Gt,An,Qt,hn,Yt,Pn,gr){const cr=[],or=[],Nn=[0,0,0,1];for(const Zr of Bt){const Wn=[],_r=[];for(const ci of Zr){const Ti=ci.x+An.x,Ei=ci.y+An.y,Pi=L1(Ti,Ei,ct,Gt,hn,Yt,Pn,gr);Nn[0]=Ti,Nn[1]=Ei,Nn[2]=Pi.base,Nn[3]=1,_p(Nn,Nn,Qt),Nn[3]=Math.max(Nn[3],1e-5);const Rt=new bp(Nn[0]/Nn[3],Nn[1]/Nn[3],Nn[2]/Nn[3]);Nn[0]=Ti,Nn[1]=Ei,Nn[2]=Pi.top,Nn[3]=1,_p(Nn,Nn,Qt),Nn[3]=Math.max(Nn[3],1e-5);const Ki=new bp(Nn[0]/Nn[3],Nn[1]/Nn[3],Nn[2]/Nn[3]);Wn.push(Rt),_r.push(Ki)}cr.push(Wn),or.push(_r)}return[cr,or]}(Fe,Oe,Qe,et,ht,Ft,lt,_t,ft):function(Bt,ct,Gt,An,Qt){const hn=[],Yt=[],Pn=Qt[8]*ct,gr=Qt[9]*ct,cr=Qt[10]*ct,or=Qt[11]*ct,Nn=Qt[8]*Gt,Zr=Qt[9]*Gt,Wn=Qt[10]*Gt,_r=Qt[11]*Gt;for(const ci of Bt){const Ti=[],Ei=[];for(const Pi of ci){const Rt=Pi.x+An.x,Ki=Pi.y+An.y,Ns=Qt[0]*Rt+Qt[4]*Ki+Qt[12],ze=Qt[1]*Rt+Qt[5]*Ki+Qt[13],ts=Qt[2]*Rt+Qt[6]*Ki+Qt[14],ys=Qt[3]*Rt+Qt[7]*Ki+Qt[15],k=Ns+Pn,A=ze+gr,Q=ts+cr,gi=Math.max(ys+or,1e-5),Li=Ns+Nn,As=ze+Zr,Ws=ts+Wn,Gn=Math.max(ys+_r,1e-5);Ti.push(new bp(k/gi,A/gi,Q/gi)),Ei.push(new bp(Li/Gn,As/Gn,Ws/Gn))}hn.push(Ti),Yt.push(Ei)}return[hn,Yt]}(Fe,Oe,Qe,et,ht)),pe=c.queryGeometry;var Ee,Fe,Oe,Qe,et,ht,Ft,lt,_t,ft;return function(Ee,Fe,Oe){let Qe=1/0;$d(Oe,Fe)&&(Qe=DT(Oe,Fe[0]));for(let et=0;et<Fe.length;et++){const ht=Fe[et],Ft=Ee[et];for(let lt=0;lt<ht.length-1;lt++){const _t=ht[lt],ft=[_t,ht[lt+1],Ft[lt+1],Ft[lt],_t];nb(Oe,ft)&&(Qe=Math.min(Qe,DT(Oe,ft)))}}return Qe!==1/0&&Qe}(xe,ke,pe.isPointQuery()?pe.screenBounds:pe.screenGeometry)}},line:class extends ms{constructor(c){super(c,kT),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){if("line-gradient"===c){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof yd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(c,o){super.recalculate(c,o),this.paint._values["line-floorwidth"]=bb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new Jm(c)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(c){return new el(this,c)}queryRadius(c){const o=c,u=wp(Gd("line-width",this,o),Gd("line-gap-width",this,o)),f=Gd("line-offset",this,o);return u/2+Math.abs(f)+Y0(this.paint.get("line-translate"))}queryIntersectsFeature(c,o,u,f,g,x){if(c.queryGeometry.isAboveHorizon)return!1;const w=q0(c.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,c.pixelToTileUnitsFactor),E=c.pixelToTileUnitsFactor/2*wp(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),M=this.paint.get("line-offset").evaluate(o,u);return M&&(f=function(P,N){const U=[],j=new Xt(0,0);for(let Y=0;Y<P.length;Y++){const X=P[Y],ee=[];for(let se=0;se<X.length;se++){const ke=X[se],pe=X[se+1],Ee=0===se?j:ke.sub(X[se-1])._unit()._perp(),Fe=se===X.length-1?j:pe.sub(ke)._unit()._perp(),Oe=Ee._add(Fe)._unit();Oe._mult(1/(Oe.x*Fe.x+Oe.y*Fe.y)),ee.push(Oe._mult(N)._add(ke))}U.push(ee)}return U}(f,M*c.pixelToTileUnitsFactor)),function(P,N,U){for(let j=0;j<N.length;j++){const Y=N[j];if(P.length>=3)for(let X=0;X<Y.length;X++)if(Wd(P,Y[X]))return!0;if(tT(P,Y,U))return!0}return!1}(w,f,E)}isTileClipped(){return!0}},symbol:ev,background:class extends ms{constructor(c){super(c,DF)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ms{constructor(c){super(c,$b)}getProgramIds(){return["raster"]}},sky:class extends ms{constructor(c){super(c,zk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){"sky-gradient"===c?this._updateColorRamp():"sky-atmosphere-sun"!==c&&"sky-atmosphere-halo-color"!==c&&"sky-atmosphere-color"!==c&&"sky-atmosphere-sun-intensity"!==c||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Yd({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(c){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=c.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(c,o){if("atmosphere"===this.paint.get("sky-type")){const f=this.paint.get("sky-atmosphere-sun"),g=!f,x=c.style.light,w=x.properties.get("position");return g&&"viewport"===x.properties.get("anchor")&&zi("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?Wb(w.azimuthal,90-w.polar,o):Wb(f[0],90-f[1],o)}const u=this.paint.get("sky-gradient-center");return Wb(u[0],90-u[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(c){this._skyboxInvalidated=!1,this._lightPosition=c.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const c=this.paint.get("sky-type");return"atmosphere"===c?["skyboxCapture","skybox"]:"gradient"===c?["skyboxGradient"]:null}}};class ug{constructor(o,u,f,g){this.context=o,this.format=f,this.texture=o.gl.createTexture(),this.update(u,g)}update(o,u,f){const{width:g,height:x}=o,{context:w}=this,{gl:E}=w,{HTMLImageElement:M,HTMLCanvasElement:P,HTMLVideoElement:N,ImageData:U,ImageBitmap:j}=Et;if(E.bindTexture(E.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||!1!==u.premultiply)),f||this.size&&this.size[0]===g&&this.size[1]===x){const{x:Y,y:X}=f||{x:0,y:0};o instanceof M||o instanceof P||o instanceof N||o instanceof U||j&&o instanceof j?E.texSubImage2D(E.TEXTURE_2D,0,Y,X,E.RGBA,E.UNSIGNED_BYTE,o):E.texSubImage2D(E.TEXTURE_2D,0,Y,X,g,x,E.RGBA,E.UNSIGNED_BYTE,o.data)}else this.size=[g,x],o instanceof M||o instanceof P||o instanceof N||o instanceof U||j&&o instanceof j?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,o):E.texImage2D(E.TEXTURE_2D,0,this.format,g,x,0,this.format,E.UNSIGNED_BYTE,o.data);this.useMipmap=Boolean(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(o,u){const{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),o!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,o),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,this.useMipmap?o===g.NEAREST?g.NEAREST_MIPMAP_NEAREST:g.LINEAR_MIPMAP_NEAREST:o),this.filter=o),u!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class Uk{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class jk{constructor(){this.tasks={},this.taskQueue=[],Ac(["process"],this),this.invoker=new Uk(this.process),this.nextId=0}add(o,u){const f=this.nextId++,g=function({type:x,isSymbolTile:w,zoom:E}){return E=E||0,"message"===x?0:"maybePrepare"!==x||w?"parseTile"!==x||w?"parseTile"===x&&w?300-E:"maybePrepare"===x&&w?400-E:500:200-E:100-E}(u);if(0===g){Jl();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[f]={fn:o,metadata:u,priority:g,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){Jl();try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const o=this.pick();if(null===o)return;const u=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let o=null,u=1/0;for(let g=0;g<this.taskQueue.length;g++){const x=this.tasks[this.taskQueue[g]];x.priority<u&&(u=x.priority,o=g)}if(null===o)return null;const f=this.taskQueue[o];return this.taskQueue.splice(o,1),f}remove(){this.invoker.remove()}}class tv{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const f=o[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const Hk=["tile","layer","source","sourceLayer","state"];class QT{constructor(o,u,f,g,x){this.type="Feature",this._vectorTileFeature=o,this._z=u,this._x=f,this._y=g,this.properties=o.properties,this.id=x}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(o.id=this.id);for(const u of Hk)void 0!==this[u]&&(o[u]=this[u]);return o}}const _c=32,Bu=33,Qd=new Uint16Array(8184);for(let c=0;c<2046;c++){let o=c+2,u=0,f=0,g=0,x=0,w=0,E=0;for(1&o?g=x=w=_c:u=f=E=_c;(o>>=1)>1;){const P=u+g>>1,N=f+x>>1;1&o?(g=u,x=f,u=w,f=E):(u=g,f=x,g=w,x=E),w=P,E=N}const M=4*c;Qd[M+0]=u,Qd[M+1]=f,Qd[M+2]=g,Qd[M+3]=x}const yo=new Uint16Array(2178),zu=new Uint8Array(1089),nv=new Uint16Array(1089);function eE(c){return 0===c?-.03125:32===c?.03125:0}var Gb=Cn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const tE={type:2,extent:Bn,loadGeometry:()=>[[new Xt(0,0),new Xt(8193,0),new Xt(8193,8193),new Xt(0,8193),new Xt(0,0)]]};class Yb{constructor(o,u,f,g,x){this.tileID=o,this.uid=rd(),this.uses=0,this.tileSize=u,this.tileZoom=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=x,this.expiredRequestCount=0,this.state="loading",g&&g.transform&&(this.projection=g.transform.projection)}registerFadeDuration(o){const u=o+this.timeAdded;u<Pr.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Kd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,u,f){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(g,x){const w={};if(!x)return w;for(const E of g){const M=E.layerIds.map(P=>x.getLayer(P)).filter(Boolean);if(0!==M.length){E.layers=M,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(P=>M.filter(N=>N.id===P)[0]));for(const P of M)w[P.id]=E}}return w}(o.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof Jd){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof Jd&&x.hasRTLText){this.hasRTLText=!0,Ue.isLoading()||Ue.isLoaded()||"deferred"!==Be()||Le();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(x))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new Oh}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(o)}const u=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ug(o,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ug(o,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ug(o,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,u,f,g,x,w,E,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:g,pixelPosMatrix:E,transform:w,params:x,tileTransform:this.tileTransform},o,u,f):{}}querySourceFeatures(o,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),x=u?u.sourceLayer:"",w=g._geojsonTileLayer||g[x];if(!w)return;const E=S0(u&&u.filter),{z:M,x:P,y:N}=this.tileID.canonical,U={z:M,x:P,y:N};for(let j=0;j<w.length;j++){const Y=w.feature(j);if(E.needGeometry){const se=Hd(Y,!0);if(!E.filter(new Ge(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!E.filter(new Ge(this.tileID.overscaledZ),Y))continue;const X=f.getId(Y,x),ee=new QT(Y,M,P,N,X);ee.tile=U,o.push(ee)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const u=this.expirationTime;if(o.cacheControl){const f=gu(o.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const x=this.expirationTime-u;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(o,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(o).length||!u)return;const f=this.latestFeatureIndex.loadVTLayers(),g=u.style.listImages();for(const x in this.buckets){if(!u.style.hasLayer(x))continue;const w=this.buckets[x],E=w.layers[0].sourceLayer||"_geojsonTileLayer",M=f[E],P=o[E];if(!M||!P||0===Object.keys(P).length)continue;if(w.update(P,M,g,this.imageAtlas&&this.imageAtlas.patternPositions||{}),w instanceof Jm||w instanceof db){const U=u.style._getSourceCache(w.layers[0].source);u._terrain&&u._terrain.enabled&&U&&w.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(U.id,this.tileID)}const N=u&&u.style&&u.style.getLayer(x);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(w)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Pr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Pr.now()+o}setTexture(o,u){const f=u.context,g=f.gl;this.texture=this.texture||u.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new ug(f,o,g.RGBA,{useMipmap:!0}),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE),f.extTextureFilterAnisotropic&&g.texParameterf(g.TEXTURE_2D,f.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f.extTextureFilterAnisotropicMax))}setDependencies(o,u){const f={};for(const g of u)f[g]=!0;this.dependencies[o]=f}hasDependency(o,u){for(const f of o){const g=this.dependencies[f];if(g)for(const x of u)if(g[x])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,u){if(!u||"mercator"===u.name||this._tileDebugBuffer)return;const f=$c(tE,this.tileID.canonical,this.tileTransform)[0],g=new En,x=new zc;for(let w=0;w<f.length;w++){const{x:E,y:M}=f[w];g.emplaceBack(E,M),x.emplaceBack(w)}x.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(x),this._tileDebugBuffer=o.createVertexBuffer(g,d1.members),this._tileDebugSegments=ks.simpleSegment(0,0,g.length,x.length)}_makeTileBoundsBuffers(o,u){if(this._tileBoundsBuffer||!u||"mercator"===u.name)return;const f=$c(tE,this.tileID.canonical,this.tileTransform)[0];let g,x;if(this.isRaster){const w=function(E,M){const P=Kd(E,M),N=Math.pow(2,E.z);for(let se=0;se<Bu;se++)for(let xe=0;xe<Bu;xe++){const ke=il((E.x+(xe+eE(xe))/_c)/N),pe=gs((E.y+(se+eE(se))/_c)/N),Ee=M.project(ke,pe),Fe=se*Bu+xe;yo[2*Fe+0]=Math.round((Ee.x*P.scale-P.x)*Bn),yo[2*Fe+1]=Math.round((Ee.y*P.scale-P.y)*Bn)}zu.fill(0),nv.fill(0);for(let se=2045;se>=0;se--){const xe=4*se,ke=Qd[xe+0],pe=Qd[xe+1],Ee=Qd[xe+2],Fe=Qd[xe+3],Oe=ke+Ee>>1,Qe=pe+Fe>>1,et=Oe+Qe-pe,ht=Qe+ke-Oe,Ft=pe*Bu+ke,lt=Fe*Bu+Ee,_t=Qe*Bu+Oe,ft=Math.hypot((yo[2*Ft+0]+yo[2*lt+0])/2-yo[2*_t+0],(yo[2*Ft+1]+yo[2*lt+1])/2-yo[2*_t+1])>=16;zu[_t]=zu[_t]||(ft?1:0),se<1022&&(zu[_t]=zu[_t]||zu[(pe+ht>>1)*Bu+(ke+et>>1)]||zu[(Fe+ht>>1)*Bu+(Ee+et>>1)])}const U=new oi,j=new fo;let Y=0;function X(se,xe){const ke=xe*Bu+se;return 0===nv[ke]&&(U.emplaceBack(yo[2*ke+0],yo[2*ke+1],se*Bn/_c,xe*Bn/_c),nv[ke]=++Y),nv[ke]-1}function ee(se,xe,ke,pe,Ee,Fe){const Oe=se+ke>>1,Qe=xe+pe>>1;if(Math.abs(se-Ee)+Math.abs(xe-Fe)>1&&zu[Qe*Bu+Oe])ee(Ee,Fe,se,xe,Oe,Qe),ee(ke,pe,Ee,Fe,Oe,Qe);else{const et=X(se,xe),ht=X(ke,pe),Ft=X(Ee,Fe);j.emplaceBack(et,ht,Ft)}}return ee(0,0,_c,_c,_c,0),ee(_c,_c,0,0,0,_c),{vertices:U,indices:j}}(this.tileID.canonical,u);g=w.vertices,x=w.indices}else{g=new oi,x=new fo;for(const{x:E,y:M}of f)g.emplaceBack(E,M,0,0);const w=$m(g.int16,void 0,4);for(let E=0;E<w.length;E+=3)x.emplaceBack(w[E],w[E+1],w[E+2])}this._tileBoundsBuffer=o.createVertexBuffer(g,Gb.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(x),this._tileBoundsSegments=ks.simpleSegment(0,0,g.length,x.length)}_makeGlobeTileDebugBuffers(o,u){const f=u.projection;if(!f||"globe"!==f.name||u.freezeTileCoverage)return;const g=this.tileID.canonical,x=W0($C(g,u)),w=yp(u.zoom);let E;w>0&&(E=B0(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,g,u,x,E,w),this._makeGlobeTileDebugTextBuffer(o,g,u,x,E,w)}_globePoint(o,u,f,g,x,w,E){let M=Lh(o,u,f);if(w){const P=1<<f.z,N=Lu(g.center.lng),U=gc(g.center.lat),j=(f.x+.5)/P-N;let Y=0;j>.5?Y=-1:j<-.5&&(Y=1);let X=(o/Bn+f.x)/P+Y,ee=(u/Bn+f.y)/P;X=(X-N)*g._pixelsPerMercatorPixel+N,ee=(ee-U)*g._pixelsPerMercatorPixel+U;const se=[X*g.worldSize,ee*g.worldSize,0];Vi(se,se,w),M=Vd(M,se,E)}return Vi(M,M,x)}_makeGlobeTileDebugBorderBuffer(o,u,f,g,x,w){const E=new En,M=new zc,P=new jr,N=(j,Y,X,ee,se)=>{const xe=(X-j)/(se-1),ke=(ee-Y)/(se-1),pe=E.length;for(let Ee=0;Ee<se;Ee++){const Fe=j+Ee*xe,Oe=Y+Ee*ke;E.emplaceBack(Fe,Oe);const Qe=this._globePoint(Fe,Oe,u,f,g,x,w);P.emplaceBack(Qe[0],Qe[1],Qe[2]),M.emplaceBack(pe+Ee)}},U=Bn;N(0,0,U,0,16),N(U,0,U,U,16),N(U,U,0,U,16),N(0,U,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(M),this._tileDebugBuffer=o.createVertexBuffer(E,d1.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(P,YM.members),this._tileDebugSegments=ks.simpleSegment(0,0,E.length,M.length)}_makeGlobeTileDebugTextBuffer(o,u,f,g,x,w){const E=new En,M=new fo,P=new jr,N=25;M.reserve(32),E.reserve(N),P.reserve(N);const U=(j,Y)=>N*j+Y;for(let j=0;j<N;j++){const Y=2048*j;for(let X=0;X<N;X++){const ee=2048*X;E.emplaceBack(ee,Y);const se=this._globePoint(ee,Y,u,f,g,x,w);P.emplaceBack(se[0],se[1],se[2])}}for(let j=0;j<4;j++)for(let Y=0;Y<4;Y++){const X=U(j,Y),ee=U(j,Y+1),se=U(j+1,Y),xe=U(j+1,Y+1);M.emplaceBack(X,ee,se),M.emplaceBack(se,ee,xe)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(M),this._tileDebugTextBuffer=o.createVertexBuffer(E,d1.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(P,YM.members),this._tileDebugTextSegments=ks.simpleSegment(0,0,N,32)}}class $k{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,u,f){const g=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][g]=this.stateChanges[o][g]||{},er(this.stateChanges[o][g],f),null===this.deletedStates[o]){this.deletedStates[o]={};for(const x in this.state[o])x!==g&&(this.deletedStates[o][x]=null)}else if(this.deletedStates[o]&&null===this.deletedStates[o][g]){this.deletedStates[o][g]={};for(const x in this.state[o][g])f[x]||(this.deletedStates[o][g][x]=null)}else for(const x in f)this.deletedStates[o]&&this.deletedStates[o][g]&&null===this.deletedStates[o][g][x]&&delete this.deletedStates[o][g][x]}removeFeatureState(o,u,f){if(null===this.deletedStates[o])return;const g=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},f&&void 0!==u)null!==this.deletedStates[o][g]&&(this.deletedStates[o][g]=this.deletedStates[o][g]||{},this.deletedStates[o][g][f]=null);else if(void 0!==u)if(this.stateChanges[o]&&this.stateChanges[o][g])for(f in this.deletedStates[o][g]={},this.stateChanges[o][g])this.deletedStates[o][g][f]=null;else this.deletedStates[o][g]=null;else this.deletedStates[o]=null}getState(o,u){const f=String(u),g=er({},(this.state[o]||{})[f],(this.stateChanges[o]||{})[f]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){const x=this.deletedStates[o][u];if(null===x)return{};for(const w in x)delete g[w]}return g}initializeTileState(o,u){o.setFeatureState(this.state,u)}coalesceChanges(o,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const w in this.stateChanges[g])this.state[g][w]||(this.state[g][w]={}),er(this.state[g][w],this.stateChanges[g][w]),x[w]=this.state[g][w];f[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(null===this.deletedStates[g])for(const w in this.state[g])x[w]={},this.state[g][w]={};else for(const w in this.deletedStates[g]){if(null===this.deletedStates[g][w])this.state[g][w]={};else if(this.state[g][w])for(const E of Object.keys(this.deletedStates[g][w]))delete this.state[g][w][E];x[w]=this.state[g][w]}f[g]=f[g]||{},er(f[g],x)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(f).length)for(const g in o)o[g].setFeatureState(f,u)}}class rv{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,u){const f=this.toIdx(o,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(o,u){return this.leaves[this.toIdx(o,u)]}toIdx(o,u){return u*this.size+o}}function nE(c,o,u,f){let g=0,x=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(f[w])<1e-15){if(u[w]<c[w]||u[w]>o[w])return null}else{const E=1/f[w];let M=(c[w]-u[w])*E,P=(o[w]-u[w])*E;if(M>P){const N=M;M=P,P=N}if(M>g&&(g=M),P<x&&(x=P),g>x)return null}return g}function rE(c,o,u,f,g,x,w,E,M,P,N){const U=f-c,j=g-o,Y=x-u,X=w-c,ee=E-o,se=M-u,xe=N[1]*se-N[2]*ee,ke=N[2]*X-N[0]*se,pe=N[0]*ee-N[1]*X,Ee=U*xe+j*ke+Y*pe;if(Math.abs(Ee)<1e-15)return null;const Fe=1/Ee,Oe=P[0]-c,Qe=P[1]-o,et=P[2]-u,ht=(Oe*xe+Qe*ke+et*pe)*Fe;if(ht<0||ht>1)return null;const Ft=Qe*Y-et*j,lt=et*U-Oe*Y,_t=Oe*j-Qe*U,ft=(N[0]*Ft+N[1]*lt+N[2]*_t)*Fe;return ft<0||ht+ft>1?null:(X*Ft+ee*lt+se*_t)*Fe}function d_(c,o,u){return(c-o)/(u-o)}function iv(c,o,u,f,g,x,w,E,M){const P=1<<u,N=x-f,U=w-g,j=(c+1)/P*N+f,Y=(o+0)/P*U+g,X=(o+1)/P*U+g;E[0]=(c+0)/P*N+f,E[1]=Y,M[0]=j,M[1]=X}class f_{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(x){const w=Math.ceil(Math.log2(x.dim/8)),E=[];let M=Math.ceil(Math.pow(2,w));const P=1/M,N=(Y,X,ee,se,xe)=>{const ke=se?1:0,pe=(Y+1)*ee-ke,Ee=X*ee,Fe=(X+1)*ee-ke;xe[0]=Y*ee,xe[1]=Ee,xe[2]=pe,xe[3]=Fe};let U=new rv(M);const j=[];for(let Y=0;Y<M*M;Y++){N(Y%M,Math.floor(Y/M),P,!1,j);const X=Vu(j[0],j[1],x),ee=Vu(j[2],j[1],x),se=Vu(j[2],j[3],x),xe=Vu(j[0],j[3],x);U.minimums.push(Math.min(X,ee,se,xe)),U.maximums.push(Math.max(X,ee,se,xe)),U.leaves.push(1)}for(E.push(U),M/=2;M>=1;M/=2){const Y=E[E.length-1];U=new rv(M);for(let X=0;X<M*M;X++){N(X%M,Math.floor(X/M),2,!0,j);const ee=Y.getElevation(j[0],j[1]),se=Y.getElevation(j[2],j[1]),xe=Y.getElevation(j[2],j[3]),ke=Y.getElevation(j[0],j[3]),pe=Y.isLeaf(j[0],j[1]),Ee=Y.isLeaf(j[2],j[1]),Fe=Y.isLeaf(j[2],j[3]),Oe=Y.isLeaf(j[0],j[3]),Qe=Math.min(ee.min,se.min,xe.min,ke.min),et=Math.max(ee.max,se.max,xe.max,ke.max),ht=pe&&Ee&&Fe&&Oe;U.maximums.push(et),U.minimums.push(Qe),U.leaves.push(et-Qe<=5&&ht?1:0)}E.push(U)}return E}(this.dem),f=u.length-1,g=u[f];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(o,u,f,g,x,w,E=1){return nE([o,u,-100],[f,g,this.maximums[0]*E],x,w)}raycast(o,u,f,g,x,w,E=1){if(!this.nodeCount)return null;const M=this.raycastRoot(o,u,f,g,x,w,E);if(null==M)return null;const P=[],N=[],U=[],j=[],Y=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;Y.length>0;){const{idx:X,t:ee,nodex:se,nodey:xe,depth:ke}=Y.pop();if(this.leaves[X]){iv(se,xe,ke,o,u,f,g,U,j);const Ee=1<<ke,Fe=(se+0)/Ee,Oe=(se+1)/Ee,Qe=(xe+0)/Ee,et=(xe+1)/Ee,ht=Vu(Fe,Qe,this.dem)*E,Ft=Vu(Oe,Qe,this.dem)*E,lt=Vu(Oe,et,this.dem)*E,_t=Vu(Fe,et,this.dem)*E,ft=rE(U[0],U[1],ht,j[0],U[1],Ft,j[0],j[1],lt,x,w),It=rE(j[0],j[1],lt,U[0],j[1],_t,U[0],U[1],ht,x,w),Bt=Math.min(null!==ft?ft:Number.MAX_VALUE,null!==It?It:Number.MAX_VALUE);if(Bt!==Number.MAX_VALUE)return Bt;{const ct=c1([],x,w,ee);if(Wk(ht,Ft,_t,lt,d_(ct[0],U[0],j[0]),d_(ct[1],U[1],j[1]))>=ct[2])return ee}continue}let pe=0;for(let Ee=0;Ee<this._siblingOffset.length;Ee++){iv((se<<1)+this._siblingOffset[Ee][0],(xe<<1)+this._siblingOffset[Ee][1],ke+1,o,u,f,g,U,j),U[2]=-100,j[2]=this.maximums[this.childOffsets[X]+Ee]*E;const Fe=nE(U,j,x,w);if(null!=Fe){const Oe=Fe;P[Ee]=Oe;let Qe=!1;for(let et=0;et<pe&&!Qe;et++)Oe>=P[N[et]]&&(N.splice(et,0,Ee),Qe=!0);Qe||(N[pe]=Ee),pe++}}for(let Ee=0;Ee<pe;Ee++){const Fe=N[Ee];Y.push({idx:this.childOffsets[X]+Fe,t:P[Fe],nodex:(se<<1)+this._siblingOffset[Fe][0],nodey:(xe<<1)+this._siblingOffset[Fe][1],depth:ke+1})}}return null}_addNode(o,u,f){return this.minimums.push(o),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(o,u,f,g,x){if(1===o[g].isLeaf(u,f))return;this.childOffsets[x]||(this.childOffsets[x]=this.nodeCount);const w=g-1,E=o[w];let M=0,P=0;for(let N=0;N<this._siblingOffset.length;N++){const U=2*u+this._siblingOffset[N][0],j=2*f+this._siblingOffset[N][1],Y=E.getElevation(U,j),X=E.isLeaf(U,j),ee=this._addNode(Y.min,Y.max,X);X&&(M|=1<<N),P||(P=ee)}for(let N=0;N<this._siblingOffset.length;N++)M&1<<N||this._construct(o,2*u+this._siblingOffset[N][0],2*f+this._siblingOffset[N][1],w,P+N)}}function Wk(c,o,u,f,g,x){return Er(Er(c,u,x),Er(o,f,x),g)}function Vu(c,o,u){const f=u.dim,g=dr(c*f-.5,0,f-1),x=dr(o*f-.5,0,f-1),w=Math.floor(g),E=Math.floor(x),M=Math.min(w+1,f-1),P=Math.min(E+1,f-1);return Wk(u.get(w,E),u.get(M,E),u.get(w,P),u.get(M,P),g-w,x-E)}const Gk={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class p_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,u,f,g=!1,x=!1){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&"mapbox"!==f&&"terrarium"!==f)return zi(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const w=this.dim=u.height-2,E=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=f||"mapbox",this.borderReady=g,!g){for(let M=0;M<w;M++)E[this._idx(-1,M)]=E[this._idx(0,M)],E[this._idx(w,M)]=E[this._idx(w-1,M)],E[this._idx(M,-1)]=E[this._idx(M,0)],E[this._idx(M,w)]=E[this._idx(M,w-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(w,-1)]=E[this._idx(w-1,0)],E[this._idx(-1,w)]=E[this._idx(0,w-1)],E[this._idx(w,w)]=E[this._idx(w-1,w-1)],x&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new f_(this)}get(o,u,f=!1){f&&(o=dr(o,-1,this.dim),u=dr(u,-1,this.dim));const g=4*this._idx(o,u);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[g],this.pixels[g+1],this.pixels[g+2])}static getUnpackVector(o){return Gk[o]}get unpackVector(){return Gk[this.encoding]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}_unpackMapbox(o,u,f){return(256*o*256+256*u+f)/10-1e4}_unpackTerrarium(o,u,f){return 256*o+u+f/256-32768}static pack(o,u){const f=[0,0,0,0],g=p_.getUnpackVector(u);let x=Math.floor((o+g[3])/g[2]);return f[2]=x%256,x=Math.floor(x/256),f[1]=x%256,x=Math.floor(x/256),f[0]=x,f}getPixels(){return new ea({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,u,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,x=u*this.dim+this.dim,w=f*this.dim,E=f*this.dim+this.dim;switch(u){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:w=E-1;break;case 1:E=w+1}const M=-u*this.dim,P=-f*this.dim;for(let N=w;N<E;N++)for(let U=g;U<x;U++){const j=4*this._idx(U,N),Y=4*this._idx(U+M,N+P);this.pixels[j+0]=o.pixels[Y+0],this.pixels[j+1]=o.pixels[Y+1],this.pixels[j+2]=o.pixels[Y+2],this.pixels[j+3]=o.pixels[Y+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}_n(p_,"DEMData"),_n(f_,"DemMinMaxQuadTree",{omit:["dem"]});class iE{constructor(o,u){this.max=o,this.onRemove=u,this.reset()}reset(){for(const o in this.data)for(const u of this.data[o])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(o,u,f){const g=o.wrapped().key;void 0===this.data[g]&&(this.data[g]=[]);const x={value:u,timeout:void 0};if(void 0!==f&&(x.timeout=setTimeout(()=>{this.remove(o,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const u=this.data[o].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),u.value}getByKey(o){const u=this.data[o];return u?u[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,u){if(!this.has(o))return this;const f=o.wrapped().key,g=void 0===u?0:this.data[f].indexOf(u),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),0===this.data[f].length&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(o){const u=[];for(const f in this.data)for(const g of this.data[f])o(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class Ep{constructor(o,u,f){this.func=o,this.mask=u,this.range=f}}Ep.ReadOnly=!1,Ep.ReadWrite=!0,Ep.disabled=new Ep(519,Ep.ReadOnly,[0,1]);class m_{constructor(o,u,f,g,x,w){this.test=o,this.ref=u,this.mask=f,this.fail=g,this.depthFail=x,this.pass=w}}m_.disabled=new m_({func:519,mask:0},0,0,7680,7680,7680);class Ro{constructor(o,u,f){this.blendFunction=o,this.blendColor=u,this.mask=f}}Ro.Replace=[1,0],Ro.disabled=new Ro(Ro.Replace,ls.transparent,[!1,!1,!1,!1]),Ro.unblended=new Ro(Ro.Replace,ls.transparent,[!0,!0,!0,!0]),Ro.alphaBlended=new Ro([1,771],ls.transparent,[!0,!0,!0,!0]);class Na{constructor(o,u,f){this.enable=o,this.mode=u,this.frontFace=f}}Na.disabled=new Na(!1,1029,2305),Na.backCCW=new Na(!0,1029,2305),Na.backCW=new Na(!0,1029,2304),Na.frontCW=new Na(!0,1028,2304),Na.frontCCW=new Na(!0,1028,2305);class Sp extends nc{constructor(o,u,f){super(),this.id=o,this._onlySymbols=f,u.on("data",g=>{"source"===g.dataType&&"metadata"===g.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===g.dataType&&"content"===g.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new iE(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new $k,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(o){this.map=o,this._minTileCacheSize=void 0===this._minTileCacheSize&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const u=this._tiles[o];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,u){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,u)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(o),f.prepare(this.map.style.imageManager)}}getIds(){return Mc(this._tiles).map(o=>o.tileID).sort(qb).map(o=>o.key)}getRenderableIds(o){const u=[];for(const f in this._tiles)this._isIdRenderable(+f,o)&&u.push(this._tiles[f]);return o?u.sort((f,g)=>{const x=f.tileID,w=g.tileID,E=new Xt(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new Xt(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-w.overscaledZ||M.y-E.y||M.x-E.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(qb).map(f=>f.key)}hasRenderableParent(o){const u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)"errored"!==this._tiles[o].state&&this._reloadTile(+o,"reloading")}}_reloadTile(o,u){const f=this._tiles[o];f&&("loading"!==f.state&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,o,u)))}_tileLoaded(o,u,f,g){if(g)if(o.state="errored",404!==g.status)this._source.fire(new tc(g,{tile:o}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const x=this.map.painter.terrain;this.update(this.transform,x.getScaledDemTileSize(),!0),x.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=Pr.now(),"expired"===f&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),"raster-dem"===this._source.type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new di("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const x=u[g];if(o.neighboringTiles&&o.neighboringTiles[x]){const w=this.getTileByID(x);f(o,w),f(w,o)}}function f(g,x){if(!g.dem||g.dem.borderReady)return;g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0;let w=x.tileID.canonical.x-g.tileID.canonical.x;const E=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),P=x.tileID.key;0===w&&0===E||Math.abs(E)>1||(Math.abs(w)>1&&(1===Math.abs(w+M)?w+=M:1===Math.abs(w-M)&&(w-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,w,E),g.neighboringTiles&&g.neighboringTiles[P]&&(g.neighboringTiles[P].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,u,f,g){for(const x in this._tiles){let w=this._tiles[x];if(g[x]||!w.hasData()||w.tileID.overscaledZ<=u||w.tileID.overscaledZ>f)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>u+1;){const P=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[P.key],w&&w.hasData()&&(E=P)}let M=E;for(;M.overscaledZ>u;)if(M=M.scaledTo(M.overscaledZ-1),o[M.key]){g[E.key]=E;break}}}findLoadedParent(o,u){if(o.key in this._loadedParentTiles){const f=this._loadedParentTiles[o.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=o.overscaledZ-1;f>=u;f--){const g=o.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(o){const u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,u){u=u||this._source.tileSize;const f=Math.ceil(o.width/u)+1,g=Math.ceil(o.height/u)+1,x=Math.floor(f*g*5),w="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,x):x,E="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(o){const u=Math.round((o-(void 0===this._prevLng?o:this._prevLng))/360);if(this._prevLng=o,u){const f={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+u),f[x.tileID.key]=x}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(+g,this._tiles[g])}}update(o,u,f){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!f)return;let g;this.updateCacheSize(o,u),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(E=>new Fo(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y)):(g=o.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!f,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(g=g.filter(E=>this._source.hasTile(E)))):g=[];const x=this._updateRetainedTiles(g);if(Xb(this._source.type)&&0!==g.length){const E={},M={},P=Object.keys(x);for(const U of P){const j=x[U],Y=this._tiles[U];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=Pr.now())continue;const X=this.findLoadedParent(j,Math.max(j.overscaledZ-Sp.maxOverzooming,this._source.minzoom));X&&(this._addTile(X.tileID),E[X.tileID.key]=X.tileID),M[U]=j}const N=g[g.length-1].overscaledZ;for(const U in this._tiles){const j=this._tiles[U];if(x[U]||!j.hasData())continue;let Y=j.tileID;for(;Y.overscaledZ>N;){Y=Y.scaledTo(Y.overscaledZ-1);const X=this._tiles[Y.key];if(X&&X.hasData()&&M[Y.key]){x[U]=j.tileID;break}}}for(const U in E)x[U]||(this._coveredTiles[U]=!0,x[U]=E[U])}for(const E in x)this._tiles[E].clearFadeHold();const w=function(E,M){const P=[];for(const N in E)N in M||P.push(N);return P}(this._tiles,x);for(const E of w){const M=this._tiles[E];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const u={};if(0===o.length)return u;const f={},g=o.reduce((P,N)=>Math.min(P,N.overscaledZ),1/0),x=o[0].overscaledZ,w=Math.max(x-Sp.maxOverzooming,this._source.minzoom),E=Math.max(x+Sp.maxUnderzooming,this._source.minzoom),M={};for(const P of o){const N=this._addTile(P);u[P.key]=P,N.hasData()||g<this._source.maxzoom&&(M[P.key]=P)}this._retainLoadedChildren(M,g,E,u);for(const P of o){let N=this._tiles[P.key];if(N.hasData())continue;if(P.canonical.z>=this._source.maxzoom){const j=P.children(this._source.maxzoom)[0],Y=this.getTile(j);if(Y&&Y.hasData()){u[j.key]=j;continue}}else{const j=P.children(this._source.maxzoom);if(u[j[0].key]&&u[j[1].key]&&u[j[2].key]&&u[j[3].key])continue}let U=N.wasRequested();for(let j=P.overscaledZ-1;j>=w;--j){const Y=P.scaledTo(j);if(f[Y.key]||(f[Y.key]=!0,N=this.getTile(Y),!N&&U&&(N=this._addTile(Y)),N&&(u[Y.key]=Y,U=N.wasRequested(),N.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const u=[];let f,g=this._tiles[o].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(const x of u)this._loadedParentTiles[x]=f}}_addTile(o){let u=this._tiles[o.key];if(u)return u;u=this._cache.getAndRemove(o),u&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));const f=Boolean(u);if(!f){const g=this.map?this.map.painter:null;u=new Yb(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,g,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,o.key,u.state))}return u?(u.uses++,this._tiles[o.key]=u,f||this._source.fire(new di("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(o,u){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const f=u.getExpiryTimeout();f&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},f))}_removeTile(o){const u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,u,f){const g=[],x=this.transform;if(!x)return g;const w="globe"===x.projection.name,E=Lu(x.center.lng);for(const M in this._tiles){const P=this._tiles[M];if(f&&P.clearQueryDebugViz(),P.holdingForFade())continue;let N;if(w){const U=P.tileID.canonical;if(0===U.z){const j=[Math.abs(dr(E,...g_(U,-1))-E),Math.abs(dr(E,...g_(U,1))-E)];N=[0,2*j.indexOf(Math.min(...j))-1]}else{const j=[Math.abs(dr(E,...g_(U,-1))-E),Math.abs(dr(E,...g_(U,0))-E),Math.abs(dr(E,...g_(U,1))-E)];N=[j.indexOf(Math.min(...j))-1]}}else N=[0];for(const U of N){const j=o.containsTile(P,x,u,U);j&&g.push(j)}}return g}getVisibleCoordinates(o){const u=this.getRenderableIds(o).map(f=>this._tiles[f].tileID);for(const f of u)f.projMatrix=this.transform.calculateProjMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Xb(this._source.type))for(const o in this._tiles){const u=this._tiles[o];if(void 0!==u.fadeEndTime&&u.fadeEndTime>=Pr.now())return!0}return!1}setFeatureState(o,u,f){this._state.updateState(o=o||"_geojsonTileLayer",u,f)}removeFeatureState(o,u,f){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,f)}getFeatureState(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)}setDependencies(o,u,f){const g=this._tiles[o];g&&g.setDependencies(u,f)}reloadTilesForDependencies(o,u){for(const f in this._tiles)this._tiles[f].hasDependency(o,u)&&this._reloadTile(+f,"reloading");this._cache.filter(f=>!f.hasDependency(o,u))}_preloadTiles(o,u){const f=new Map,g=Array.isArray(o)?o:[o],x=this.map.painter.terrain,w=this.usedForTerrain&&x?x.getScaledDemTileSize():this._source.tileSize;for(const E of g){const M=E.coveringTiles({tileSize:w,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const P of M)f.set(P.key,P);this.usedForTerrain&&E.updateElevation(!1)}nd(Array.from(f.values()),(E,M)=>{const P=new Yb(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(P,N=>{"raster-dem"===this._source.type&&P.dem&&this._backfillDEM(P),M(N,P)})},u)}}function qb(c,o){const u=Math.abs(2*c.wrap)-+(c.wrap<0),f=Math.abs(2*o.wrap)-+(o.wrap<0);return c.overscaledZ-o.overscaledZ||f-u||o.canonical.y-c.canonical.y||o.canonical.x-c.canonical.x}function Xb(c){return"raster"===c||"image"===c||"video"===c||"custom"===c}function g_(c,o){const u=1<<c.z;return[c.x/u+o,(c.x+1)/u+o]}Sp.maxOverzooming=10,Sp.maxUnderzooming=3;class ov{constructor(o,u,f){this._demTile=o,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(o,u,f){const g=f||o.findDEMTileFor(u);if(!g||!g.dem)return;const x=g.dem,w=g.tileID,E=1<<u.canonical.z-w.canonical.z;return new ov(g,g.tileSize/Bn/E,[(u.canonical.x/E-w.canonical.x)*x.dim,(u.canonical.y/E-w.canonical.y)*x.dim])}tileCoordToPixel(o,u){const f=u*this._scale+this._offset[1],g=Math.floor(o*this._scale+this._offset[0]),x=Math.floor(f);return new Xt(g,x)}getElevationAt(o,u,f,g){const x=o*this._scale+this._offset[0],w=u*this._scale+this._offset[1],E=Math.floor(x),M=Math.floor(w),P=this._dem;return g=!!g,f?Er(Er(P.get(E,M,g),P.get(E,M+1,g),w-M),Er(P.get(E+1,M,g),P.get(E+1,M+1,g),w-M),x-E):P.get(E,M,g)}getElevationAtPixel(o,u,f){return this._dem.get(o,u,!!f)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Ol(1,o)*this._dem.stride}}class fg{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ku(Bn,16,0),this.featureIndexArray=new LC,this.promoteId=u}insert(o,u,f,g,x,w=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x,w);const M=this.grid;for(let P=0;P<u.length;P++){const N=u[P],U=[1/0,1/0,-1/0,-1/0];for(let j=0;j<N.length;j++){const Y=N[j];U[0]=Math.min(U[0],Y.x),U[1]=Math.min(U[1],Y.y),U[2]=Math.max(U[2],Y.x),U[3]=Math.max(U[3],Y.y)}U[0]<Bn&&U[1]<Bn&&U[2]>=0&&U[3]>=0&&M.insert(E,U[0],U[1],U[2],U[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Zi(new r_(this.rawTileData)).layers,this.sourceLayerCoder=new tv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,u,f,g){this.loadVTLayers();const x=o.params||{},w=S0(x.filter),E=o.tileResult,M=o.transform,P=E.bufferedTilespaceBounds,N=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(X,ee,se,xe)=>rb(E.bufferedTilespaceGeometry,X,ee,se,xe));N.sort(MF);let U=null;M.elevation&&N.length>0&&(U=ov.create(M.elevation,this.tileID));const j={};let Y;for(let X=0;X<N.length;X++){const ee=N[X];if(ee===Y)continue;Y=ee;const se=this.featureIndexArray.get(ee);let xe=null;this.loadMatchingFeature(j,se,w,x.layers,x.availableImages,u,f,g,(ke,pe,Ee,Fe=0)=>(xe||(xe=$c(ke,this.tileID.canonical,o.tileTransform)),pe.queryIntersectsFeature(E,ke,Ee,xe,this.z,o.transform,o.pixelPosMatrix,U,Fe)))}return j}loadMatchingFeature(o,u,f,g,x,w,E,M,P){const{featureIndex:N,bucketIndex:U,sourceLayerIndex:j,layoutVertexArrayOffset:Y}=u,X=this.bucketLayerIDs[U];if(g&&!function(ke,pe){for(let Ee=0;Ee<ke.length;Ee++)if(pe.indexOf(ke[Ee])>=0)return!0;return!1}(g,X))return;const ee=this.sourceLayerCoder.decode(j),se=this.vtLayers[ee].feature(N);if(f.needGeometry){const ke=Hd(se,!0);if(!f.filter(new Ge(this.tileID.overscaledZ),ke,this.tileID.canonical))return}else if(!f.filter(new Ge(this.tileID.overscaledZ),se))return;const xe=this.getId(se,ee);for(let ke=0;ke<X.length;ke++){const pe=X[ke];if(g&&g.indexOf(pe)<0)continue;const Ee=w[pe];if(!Ee)continue;let Fe={};void 0!==xe&&M&&(Fe=M.getState(Ee.sourceLayer||"_geojsonTileLayer",xe));const Oe=er({},E[pe]);Oe.paint=sE(Oe.paint,Ee.paint,se,Fe,x),Oe.layout=sE(Oe.layout,Ee.layout,se,Fe,x);const Qe=!P||P(se,Ee,Fe,Y);if(!Qe)continue;const et=new QT(se,this.z,this.x,this.y,xe);et.layer=Oe;let ht=o[pe];void 0===ht&&(ht=o[pe]=[]),ht.push({featureIndex:N,feature:et,intersectionZ:Qe})}}lookupSymbolFeatures(o,u,f,g,x,w,E,M){const P={};this.loadVTLayers();const N=S0(x);for(const U of o)this.loadMatchingFeature(P,{bucketIndex:f,sourceLayerIndex:g,featureIndex:U,layoutVertexArrayOffset:0},N,w,E,M,u);return P}loadFeature(o){const{featureIndex:u,sourceLayerIndex:f}=o;this.loadVTLayers();const g=this.sourceLayerCoder.decode(f),x=this.vtFeatures[g];if(x[u])return x[u];const w=this.vtLayers[g].feature(u);return x[u]=w,w}hasLayer(o){for(const u of this.bucketLayerIDs)for(const f of u)if(o===f)return!0;return!1}getId(o,u){let f=o.id;if(this.promoteId){const g="string"==typeof this.promoteId?this.promoteId:this.promoteId[u];null!=g&&(f=o.properties[g]),"boolean"==typeof f&&(f=Number(f))}return f}}function sE(c,o,u,f,g){return yi(c,(x,w)=>{const E=o instanceof st?o.get(w):null;return E&&E.evaluate?E.evaluate(u,f,g):E})}function MF(c,o){return o-c}_n(fg,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class oE{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.image=new Fu({width:o,height:u}),this.positions={},this.uploaded=!1}getDash(o,u){const f=this.getKey(o,u);return this.positions[f]}trim(){const o=this.width,u=this.height=Zl(this.nextRow);this.image.resize({width:o,height:u})}getKey(o,u){return o.join(",")+u}getDashRanges(o,u,f){const g=[];let x=o.length%2==1?-o[o.length-1]*f:0,w=o[0]*f,E=!0;g.push({left:x,right:w,isDash:E,zeroLength:0===o[0]});let M=o[0];for(let P=1;P<o.length;P++){E=!E;const N=o[P];x=M*f,M+=N,w=M*f,g.push({left:x,right:w,isDash:E,zeroLength:0===N})}return g}addRoundDash(o,u,f){const g=u/2;for(let x=-f;x<=f;x++){const w=this.width*(this.nextRow+f+x);let E=0,M=o[E];for(let P=0;P<this.width;P++){P/M.right>1&&(M=o[++E]);const N=Math.abs(P-M.left),U=Math.abs(P-M.right),j=Math.min(N,U);let Y;const X=x/f*(g+1);if(M.isDash){const ee=g-Math.abs(X);Y=Math.sqrt(j*j+ee*ee)}else Y=g-Math.sqrt(j*j+X*X);this.image.data[w+P]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(o,u){for(let M=o.length-1;M>=0;--M){const P=o[M],N=o[M+1];P.zeroLength?o.splice(M,1):N&&N.isDash===P.isDash&&(N.left=P.left,o.splice(M,1))}const f=o[0],g=o[o.length-1];f.isDash===g.isDash&&(f.left=g.left-this.width,g.right=f.right+this.width);const x=this.width*this.nextRow;let w=0,E=o[w];for(let M=0;M<this.width;M++){M/E.right>1&&(E=o[++w]);const P=Math.abs(M-E.left),N=Math.abs(M-E.right),U=Math.min(P,N);this.image.data[x+M]=Math.max(0,Math.min(255,(E.isDash?U:-U)+u+128))}}addDash(o,u){const f=this.getKey(o,u);if(this.positions[f])return this.positions[f];const g="round"===u,x=g?7:0,w=2*x+1;if(this.nextRow+w>this.height)return zi("LineAtlas out of space"),null;0===o.length&&o.push(1);let E=0;for(let N=0;N<o.length;N++)o[N]<0&&(zi("Negative value is found in line dasharray, replacing values with 0"),o[N]=0),E+=o[N];if(0!==E){const N=this.width/E,U=this.getDashRanges(o,this.width,N);g?this.addRoundDash(U,N,x):this.addRegularDash(U,"square"===u?.5*N:0)}const M=this.nextRow+x;this.nextRow+=w;const P={tl:[M,x],br:[E,0]};return this.positions[f]=P,P}}_n(oE,"LineAtlas");class aE{constructor(o){const u={},f=[];for(const E in o){const M=o[E],P=u[E]={};for(const N in M.glyphs){const U=M.glyphs[+N];if(!U||0===U.bitmap.width||0===U.bitmap.height)continue;const j=U.metrics.localGlyph?2:1,Y={x:0,y:0,w:U.bitmap.width+2*j,h:U.bitmap.height+2*j};f.push(Y),P[N]=Y}}const{w:g,h:x}=z1(f),w=new Fu({width:g||1,height:x||1});for(const E in o){const M=o[E];for(const P in M.glyphs){const N=M.glyphs[+P];if(!N||0===N.bitmap.width||0===N.bitmap.height)continue;const U=u[E][P],j=N.metrics.localGlyph?2:1;Fu.copy(N.bitmap,w,{x:0,y:0},{x:U.x+j,y:U.y+j},N.bitmap)}}this.image=w,this.positions=u}}_n(aE,"GlyphAtlas");class Yk{constructor(o){this.tileID=new Fo(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Kd(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,u,f,g,x){this.status="parsing",this.data=o,this.collisionBoxArray=new Oh;const w=new tv(Object.keys(o.layers).sort()),E=new fg(this.tileID,this.promoteId);E.bucketLayerIDs=[];const M={},P=new oE(256,256),N={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:P,availableImages:f},U=u.familiesBySource[this.source];for(const Fe in U){const Oe=o.layers[Fe];if(!Oe)continue;let Qe=!1,et=!1;for(const lt of U[Fe])"symbol"===lt[0].type?Qe=!0:et=!0;if(!0===this.isSymbolTile&&!Qe||!1===this.isSymbolTile&&!et)continue;1===Oe.version&&zi(`Vector tile source "${this.source}" layer "${Fe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ht=w.encode(Fe),Ft=[];for(let lt=0;lt<Oe.length;lt++){const _t=Oe.feature(lt),ft=E.getId(_t,Fe);Ft.push({feature:_t,id:ft,index:lt,sourceLayerIndex:ht})}for(const lt of U[Fe]){const _t=lt[0];void 0!==this.isSymbolTile&&"symbol"===_t.type!==this.isSymbolTile||_t.minzoom&&this.zoom<Math.floor(_t.minzoom)||_t.maxzoom&&this.zoom>=_t.maxzoom||"none"!==_t.visibility&&(Zb(lt,this.zoom,f),(M[_t.id]=_t.createBucket({index:E.bucketLayerIDs.length,layers:lt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ht,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:f})).populate(Ft,N,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(lt.map(ft=>ft.id)))}}let j,Y,X,ee;P.trim();const se={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},xe=yi(N.glyphDependencies,Fe=>Object.keys(Fe).map(Number));Object.keys(xe).length?g.send("getGlyphs",{uid:this.uid,stacks:xe},(Fe,Oe)=>{j||(j=Fe,Y=Oe,Ee.call(this))},void 0,!1,se):Y={};const ke=Object.keys(N.iconDependencies);ke.length?g.send("getImages",{icons:ke,source:this.source,tileID:this.tileID,type:"icons"},(Fe,Oe)=>{j||(j=Fe,X=Oe,Ee.call(this))},void 0,!1,se):X={};const pe=Object.keys(N.patternDependencies);function Ee(){if(j)return x(j);if(Y&&X&&ee){const Fe=new aE(Y),Oe=new Sb(X,ee);for(const Qe in M){const et=M[Qe];et instanceof Jd?(Zb(et.layers,this.zoom,f),Ok(et,Y,Fe.positions,X,Oe.iconPositions,this.showCollisionBoxes,f,this.tileID.canonical,this.tileZoom,this.projection)):et.hasPattern&&(et instanceof Jm||et instanceof db||et instanceof P1)&&(Zb(et.layers,this.zoom,f),et.addFeatures(N,this.tileID.canonical,Oe.patternPositions,f,this.tileTransform))}this.status="done",x(null,{buckets:Mc(M).filter(Qe=>!Qe.isEmpty()),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Fe.image,lineAtlas:P,imageAtlas:Oe,glyphMap:this.returnDependencies?Y:null,iconMap:this.returnDependencies?X:null,glyphPositions:this.returnDependencies?Fe.positions:null})}}pe.length?g.send("getImages",{icons:pe,source:this.source,tileID:this.tileID,type:"patterns"},(Fe,Oe)=>{j||(j=Fe,ee=Oe,Ee.call(this))},void 0,!1,se):ee={},Ee.call(this)}}function Zb(c,o,u){const f=new Ge(o);for(const g of c)g.recalculate(f,u)}class lE{constructor(o){this.entries={},this.scheduler=o}request(o,u,f,g){const x=this.entries[o]=this.entries[o]||{callbacks:[]};if(x.result){const[w,E]=x.result;return this.scheduler?this.scheduler.add(()=>{g(w,E)},u):g(w,E),()=>{}}return x.callbacks.push(g),x.cancel||(x.cancel=f((w,E)=>{x.result=[w,E];for(const M of x.callbacks)this.scheduler?this.scheduler.add(()=>{M(w,E)},u):M(w,E);setTimeout(()=>delete this.entries[o],3e3)})),()=>{x.result||(x.callbacks=x.callbacks.filter(w=>w!==g),x.callbacks.length||(x.cancel(),delete this.entries[o]))}}}function cE(c,o,u){const f=JSON.stringify(c.request);return c.data&&(this.deduped.entries[f]={result:[null,c.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom},g=>{const x=od(c.request,(w,E,M,P)=>{w?g(w):E&&g(null,{vectorTile:u?void 0:new Zi(new r_(E)),rawData:E,cacheControl:M,expires:P})});return()=>{x.cancel(),g()}},o)}_.ARRAY_TYPE=tl,_.AUTH_ERR_MSG=cd,_.Aabb=Qo,_.Actor=class{constructor(c,o,u){this.target=c,this.parent=o,this.mapId=u,this.callbacks={},this.cancelCallbacks={},Ac(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Jl()?c:Et,this.scheduler=new jk}send(c,o,u,f,g=!1,x){const w=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=x,this.callbacks[w]=u);const E=_u(this.globalScope)?void 0:[];return this.target.postMessage({id:w,type:c,hasCallback:!!u,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:lp(o,E)},E),{cancel:()=>{u&&delete this.callbacks[w],this.target.postMessage({id:w,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(c){const o=c.data,u=o.id;if(u&&(!o.targetMapId||this.mapId===o.targetMapId))if("<cancel>"===o.type){const f=this.cancelCallbacks[u];delete this.cancelCallbacks[u],f&&f.cancel()}else if(o.mustQueue||Jl()){const f=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,o),f&&f.metadata||{type:"message"})}else this.processTask(u,o)}processTask(c,o){if("<response>"===o.type){const u=this.callbacks[c];delete this.callbacks[c],u&&(o.error?u(Pd(o.error)):u(null,Pd(o.data)))}else{const u=_u(this.globalScope)?void 0:[],f=o.hasCallback?(x,w)=>{delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:x?lp(x):null,data:lp(w,u)},u)}:x=>{},g=Pd(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,g,f);else if(this.parent.getWorkerSource){const x=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,x[0],g.source)[x[1]](g,f)}else f(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},_.CanonicalTileID=Zm,_.Color=ls,_.ColorMode=Ro,_.CullFaceMode=Na,_.DEMData=p_,_.DataConstantProperty=Ye,_.DedupedRequest=lE,_.DepthMode=Ep,_.EXTENT=Bn,_.Elevation=class{isDataAvailableAtPoint(c){const o=this._source();if(this.isUsingMockSource()||!o||c.y<0||c.y>1)return!1;const u=o.getSource().maxzoom,f=1<<u,g=Math.floor(c.x),x=Math.floor((c.x-g)*f),w=Math.floor(c.y*f),E=this.findDEMTileFor(new Fo(u,g,u,x,w));return!(!E||!E.dem)}getAtPointOrZero(c,o=0){return this.getAtPoint(c,o)||0}getAtPoint(c,o,u=!0){if(this.isUsingMockSource())return null;null==o&&(o=null);const f=this._source();if(!f||c.y<0||c.y>1)return o;const g=f.getSource().maxzoom,x=1<<g,w=Math.floor(c.x),E=c.x-w,M=new Fo(g,w,g,Math.floor(E*x),Math.floor(c.y*x)),P=this.findDEMTileFor(M);if(!P||!P.dem)return o;const N=P.dem,U=1<<P.tileID.canonical.z,j=(E*U-P.tileID.canonical.x)*N.dim,Y=(c.y*U-P.tileID.canonical.y)*N.dim,X=Math.floor(j),ee=Math.floor(Y);return(u?this.exaggeration():1)*Er(Er(N.get(X,ee),N.get(X,ee+1),Y-ee),Er(N.get(X+1,ee),N.get(X+1,ee+1),Y-ee),j-X)}getAtTileOffset(c,o,u){const f=1<<c.canonical.z;return this.getAtPointOrZero(new jd(c.wrap+(c.canonical.x+o/Bn)/f,(c.canonical.y+u/Bn)/f))}getAtTileOffsetFunc(c,o,u,f){return g=>{const x=this.getAtTileOffset(c,g.x,g.y),w=f.upVector(c.canonical,g.x,g.y);return Pl(w,w,x*f.upVectorScale(c.canonical,o,u).metersToTile),w}}getForTilePoints(c,o,u,f){if(this.isUsingMockSource())return!1;const g=ov.create(this,c,f);return!!g&&(o.forEach(x=>{x[2]=this.exaggeration()*g.getElevationAt(x[0],x[1],u)}),!0)}getMinMaxForTile(c){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(c);if(!o||!o.dem)return null;const u=o.dem.tree,f=o.tileID,g=1<<c.canonical.z-f.canonical.z;let x=c.canonical.x/g-f.canonical.x,w=c.canonical.y/g-f.canonical.y,E=0;for(let M=0;M<c.canonical.z-f.canonical.z&&!u.leaves[E];M++){x*=2,w*=2;const P=2*Math.floor(w)+Math.floor(x);E=u.childOffsets[E]+P,x%=1,w%=1}return{min:this.exaggeration()*u.minimums[E],max:this.exaggeration()*u.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(c,o,u){throw new Error("Pure virtual method called.")}pointCoordinate(c){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(c){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},_.ErrorEvent=tc,_.EvaluationParameters=Ge,_.Event=di,_.Evented=nc,_.FillExtrusionBucket=P1,_.Frustum=j0,_.FrustumCorners=f1,_.GLOBE_RADIUS=Hc,_.GLOBE_SCALE_MATCH_LATITUDE=45,_.GLOBE_ZOOM_THRESHOLD_MAX=6,_.GLOBE_ZOOM_THRESHOLD_MIN=5,_.GlobeSharedBuffers=class{constructor(c){this._createGrid(c),this._createPoles(c)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const c of this._poleSegments)c.destroy();for(const c of this._gridSegments)c.withSkirts.destroy(),c.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const c of this._wireframeSegments)c.destroy()}}_fillGridMeshWithLods(c,o){const u=new En,f=new fo,g=[],x=c+1+2,w=o[0]+1,E=o[0]+1+(1+o.length),M=(P,N,U)=>{let j=P===x-1?P-2:0===P?P:P-1;return j+=U?24575:0,[j,N]};for(let P=0;P<x;++P)u.emplaceBack(...M(P,0,!0));for(let P=0;P<w;++P)for(let N=0;N<x;++N)u.emplaceBack(...M(N,P,(0===N||N===x-1)&&!0));for(let P=0;P<o.length;++P){const N=o[P];for(let U=0;U<x;++U)u.emplaceBack(...M(U,N,!0))}for(let P=0;P<o.length;++P){const N=f.length,U=o[P]+1+2,j=new fo;for(let ee=0;ee<U-1;ee++){const se=ee===U-2,xe=se?x*(E-o.length+P-ee):x;for(let ke=0;ke<x-1;ke++){const pe=ee*x+ke;0===ee||se||0===ke||ke===x-2?(j.emplaceBack(pe+1,pe,pe+xe),j.emplaceBack(pe+xe,pe+xe+1,pe+1)):(f.emplaceBack(pe+1,pe,pe+xe),f.emplaceBack(pe+xe,pe+xe+1,pe+1))}}const Y=ks.simpleSegment(0,N,u.length,f.length-N);for(let ee=0;ee<j.uint16.length;ee+=3)f.emplaceBack(j.uint16[ee],j.uint16[ee+1],j.uint16[ee+2]);const X=ks.simpleSegment(0,N,u.length,f.length-N);g.push({withoutSkirts:Y,withSkirts:X})}return{vertices:u,indices:f,segments:g}}_createGrid(c){const o=this._fillGridMeshWithLods(64,Lo);this._gridSegments=o.segments,this._gridBuffer=c.createVertexBuffer(o.vertices,d1.members),this._gridIndexBuffer=c.createIndexBuffer(o.indices,!0)}_createPoles(c){const o=new fo;for(let g=0;g<=64;g++)o.emplaceBack(0,g+1,g+2);this._poleIndexBuffer=c.createIndexBuffer(o,!0);const u=new Fa,f=new Fa;this._poleSegments=[];for(let g=0,x=0;g<5;g++){const w=360/(1<<g);u.emplaceBack(0,-Hc,0,.5,0),f.emplaceBack(0,-Hc,0,.5,1);for(let E=0;E<=64;E++){const M=E/64,P=Er(0,w,M),[N,U,j]=Ud(ZM,Zx,P,Hc);u.emplaceBack(N,U,j,M,0),f.emplaceBack(N,U,j,M,1)}this._poleSegments.push(ks.simpleSegment(x,0,66,64)),x+=66}this._poleNorthVertexBuffer=c.createVertexBuffer(u,GM,!1),this._poleSouthVertexBuffer=c.createVertexBuffer(f,GM,!1)}getGridBuffers(c,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[c].withSkirts:this._gridSegments[c].withoutSkirts]}getPoleBuffers(c){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[c]]}getWirefameBuffers(c,o){if(!this._wireframeSegments){const u=new Bc,f=64,g=f+1+2,x=1;this._wireframeSegments=[];for(let w=0,E=0;w<Lo.length;w++){const M=Lo[w];for(let N=x;N<M+x;N++)for(let U=x;U<f+x;U++){const j=N*g+U;u.emplaceBack(j,j+1),u.emplaceBack(j,j+g),u.emplaceBack(j,j+g+1)}const P=M*f*3;this._wireframeSegments.push(ks.simpleSegment(0,E,(M+1)*g,P)),E+=P}this._wireframeIndexBuffer=c.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},_.GlyphManager=ig,_.ImagePosition=Eb,_.LivePerformanceUtils=wt,_.LngLat=Tr,_.LngLatBounds=Nd,_.LocalGlyphMode=na,_.MAX_MERCATOR_LATITUDE=go,_.MercatorCoordinate=jd,_.ONE_EM=_o,_.OverscaledTileID=Fo,_.PerformanceMarkers=nt,_.Properties=Nt,_.RGBAImage=ea,_.Ray=Yx,_.RequestManager=class{constructor(c,o,u){this._transformRequestFn=c,this._customAccessToken=o,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const c=function(){let o="";for(let u=0;u<10;u++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",bl,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=c.token,this._skuTokenExpiresAt=c.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(c,o){return this._transformRequestFn&&this._transformRequestFn(c,o)||{url:c}}normalizeStyleURL(c,o){if(!ec(c))return c;const u=da(c);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||o)}normalizeGlyphsURL(c,o){if(!ec(c))return c;const u=da(c);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||o)}normalizeSourceURL(c,o,u,f){if(!ec(c))return c;const g=da(c);return g.path=`/v4/${g.authority}.json`,g.params.push("secure"),u&&g.params.push(`language=${u}`),f&&g.params.push(`worldview=${f}`),this._makeAPIURL(g,this._customAccessToken||o)}normalizeSpriteURL(c,o,u,f){const g=da(c);return ec(c)?(g.path=`/styles/v1${g.path}/sprite${o}${u}`,this._makeAPIURL(g,this._customAccessToken||f)):(g.path+=`${o}${u}`,xu(g))}normalizeTileURL(c,o,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),c&&!ec(c))return c;const f=da(c);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||u&&"raster"!==f.authority&&512===u?"@2x":""}${Qn.supported?".webp":"$1"}`),"raster"===f.authority?f.path=`/${lr.RASTER_URL_PREFIX}${f.path}`:(f.path=f.path.replace(/^.+\/v4\//,"/"),f.path=`/${lr.TILE_URL_VERSION}${f.path}`);const g=this._customAccessToken||function(x){for(const w of x){const E=w.match(/^access_token=(.*)$/);if(E)return E[1]}return null}(f.params)||lr.ACCESS_TOKEN;return lr.REQUIRE_ACCESS_TOKEN&&g&&this._skuToken&&f.params.push(`sku=${this._skuToken}`),this._makeAPIURL(f,g)}canonicalizeTileURL(c,o){const u=da(c);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return c;let f="mapbox://";u.path.match(/^\/raster\/v1\//)?f+=`raster/${u.path.replace(`/${lr.RASTER_URL_PREFIX}/`,"")}`:f+=`tiles/${u.path.replace(`/${lr.TILE_URL_VERSION}/`,"")}`;let g=u.params;return o&&(g=g.filter(x=>!x.match(/^access_token=/))),g.length&&(f+=`?${g.join("&")}`),f}canonicalizeTileset(c,o){const u=!!o&&ec(o),f=[];for(const g of c.tiles||[])ud(g)?f.push(this.canonicalizeTileURL(g,u)):f.push(g);return f}_makeAPIURL(c,o){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",f=da(lr.API_URL);if(c.protocol=f.protocol,c.authority=f.authority,"http"===c.protocol){const g=c.params.indexOf("secure");g>=0&&c.params.splice(g,1)}if("/"!==f.path&&(c.path=`${f.path}${c.path}`),!lr.REQUIRE_ACCESS_TOKEN)return xu(c);if(o=o||lr.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if("s"===o[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return c.params=c.params.filter(g=>-1===g.indexOf("access_token")),c.params.push(`access_token=${o||""}`),xu(c)}},_.ResourceType=Lf,_.SegmentVector=ks,_.SourceCache=Sp,_.StencilMode=m_,_.StructArrayLayout1ui2=zc,_.StructArrayLayout2f1f2i16=Oo,_.StructArrayLayout2i4=En,_.StructArrayLayout2ui4=Bc,_.StructArrayLayout3f12=$s,_.StructArrayLayout3ui6=fo,_.StructArrayLayout4i8=oi,_.StructArrayLayout5f20=Fa,_.Texture=ug,_.Tile=Yb,_.Transitionable=Ht,_.Uniform1f=Vx,_.Uniform1i=class extends Ld{constructor(c){super(c),this.current=0}set(c,o,u){this.fetchUniformLocation(c,o)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},_.Uniform2f=class extends Ld{constructor(c){super(c),this.current=[0,0]}set(c,o,u){this.fetchUniformLocation(c,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},_.Uniform3f=class extends Ld{constructor(c){super(c),this.current=[0,0,0]}set(c,o,u){this.fetchUniformLocation(c,o)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},_.Uniform4f=VM,_.UniformColor=UM,_.UniformMatrix2f=class extends Ld{constructor(c){super(c),this.current=mF}set(c,o,u){if(this.fetchUniformLocation(c,o))for(let f=0;f<4;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}},_.UniformMatrix3f=class extends Ld{constructor(c){super(c),this.current=R0}set(c,o,u){if(this.fetchUniformLocation(c,o))for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}},_.UniformMatrix4f=class extends Ld{constructor(c){super(c),this.current=pF}set(c,o,u){if(this.fetchUniformLocation(c,o)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let f=1;f<16;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},_.UnwrappedTileID=ST,_.ValidationError=on,_.VectorTileFeature=e_,_.VectorTileWorkerSource=class extends nc{constructor(c,o,u,f,g){super(),this.actor=c,this.layerIndex=o,this.availableImages=u,this.loadVectorData=g||cE,this.loading={},this.loaded={},this.deduped=new lE(c.scheduler),this.isSpriteLoaded=f,this.scheduler=c.scheduler}loadTile(c,o){const u=c.uid,f=c&&c.request,g=f&&f.collectResourceTiming,x=this.loading[u]=new Yk(c);x.abort=this.loadVectorData(c,(w,E)=>{const M=!this.loading[u];if(delete this.loading[u],M||w||!E)return x.status="done",M||(this.loaded[u]=x),o(w);const P=E.rawData,N={};E.expires&&(N.expires=E.expires),E.cacheControl&&(N.cacheControl=E.cacheControl),x.vectorTile=E.vectorTile||new Zi(new r_(P));const U=()=>{x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,(j,Y)=>{if(j||!Y)return o(j);const X={};if(g){const ee=kn(f);ee.length>0&&(X.resourceTiming=JSON.parse(JSON.stringify(ee)))}o(null,er({rawTileData:P.slice(0)},Y,N,X))})};this.isSpriteLoaded?U():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(U,{type:"parseTile",isSymbolTile:c.isSymbolTile,zoom:c.tileZoom}):U()}),this.loaded=this.loaded||{},this.loaded[u]=x})}reloadTile(c,o){const u=this.loaded,f=c.uid,g=this;if(u&&u[f]){const x=u[f];x.showCollisionBoxes=c.showCollisionBoxes,x.enableTerrain=!!c.enableTerrain,x.projection=c.projection,x.tileTransform=Kd(c.tileID.canonical,c.projection);const w=(E,M)=>{const P=x.reloadCallback;P&&(delete x.reloadCallback,x.parse(x.vectorTile,g.layerIndex,this.availableImages,g.actor,P)),o(E,M)};"parsing"===x.status?x.reloadCallback=w:"done"===x.status&&(x.vectorTile?x.parse(x.vectorTile,this.layerIndex,this.availableImages,this.actor,w):w())}}abortTile(c,o){const u=c.uid,f=this.loading[u];f&&(f.abort&&f.abort(),delete this.loading[u]),o()}removeTile(c,o){const u=this.loaded,f=c.uid;u&&u[f]&&delete u[f],o()}},_.WritingMode=Rl,_.ZoomDependentExpression=kh,_.add=nl,_.addDynamicAttributes=h_,_.adjoint=function(c,o){var u=o[0],f=o[1],g=o[2],x=o[3],w=o[4],E=o[5],M=o[6],P=o[7],N=o[8];return c[0]=w*N-E*P,c[1]=g*P-f*N,c[2]=f*E-g*w,c[3]=E*M-x*N,c[4]=u*N-g*M,c[5]=g*x-u*E,c[6]=x*P-w*M,c[7]=f*M-u*P,c[8]=u*w-f*x,c},_.asyncAll=nd,_.bezier=kf,_.bindAll=Ac,_.boundsAttributes=Gb,_.bufferConvexPolygon=function(c,o){const u=[];for(let f=0;f<c.length;f++){const g=ha(f-1,-1,c.length-1),x=ha(f+1,-1,c.length-1),w=c[f],E=c[x],M=c[g].sub(w).unit(),P=E.sub(w).unit(),N=P.angleWithSep(M.x,M.y),U=M.add(P).unit().mult(-1*o/Math.sin(N/2));u.push(w.add(U))}return u},_.cacheEntryPossiblyAdded=function(c){Of++,Of>_h&&(c.getActor().send("enforceCacheSizeLimit",Pf),Of=0)},_.calculateGlobeLabelMatrix=function(c,o){const{x:u,y:f}=c.point,g=GC(u,f,c.worldSize/c._pixelsPerMercatorPixel,0,0);return Pu(g,g,g1(Ou(o)))},_.calculateGlobeMatrix=function(c){const{x:o,y:u}=c.point,{lng:f,lat:g}=c._center;return GC(o,u,c.worldSize,f,g)},_.calculateGlobeMercatorMatrix=function(c){const o=c.pixelsPerMeter,u=o/Ol(1,c.center.lat),f=Uc(new Float64Array(16));return mp(f,f,[c.point.x,c.point.y,0]),jc(f,f,[u,u,o]),Float32Array.from(f)},_.circumferenceAtLatitude=Kx,_.clamp=dr,_.clearTileCache=function(c){if(!fm())return;const o=Et.caches.delete(If);c&&o.catch(c).then(()=>c())},_.clipLine=HT,_.clone=function(c){var o=new tl(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},_.clone$1=Aa,_.collisionCircleLayout=vk,_.config=lr,_.conjugate=function(c,o){return c[0]=-o[0],c[1]=-o[1],c[2]=-o[2],c[3]=o[3],c},_.create=function(){var c=new tl(16);return tl!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},_.create$1=BC,_.createExpression=Md,_.createLayout=Cn,_.createStyleLayer=function(c){return"custom"===c.type?new JT(c):new Vk[c.type](c)},_.cross=Wx,_.degToRad=Cr,_.distance=function(c,o){return Math.hypot(o[0]-c[0],o[1]-c[1],o[2]-c[2])},_.div=function(c,o,u){return c[0]=o[0]/u[0],c[1]=o[1]/u[1],c[2]=o[2]/u[2],c},_.dot=dc,_.earthRadius=vp,_.ease=Af,_.easeCubicInOut=gh,_.ecefToLatLng=function([c,o,u]){const f=Math.hypot(c,o,u),g=Math.atan2(c,u),x=.5*Math.PI-Math.acos(-o/f);return new Tr(Hs(g),Hs(x))},_.emitValidationErrors=A0,_.endsWith=Cl,_.enforceCacheSizeLimit=function(c){Ic(),Tl&&Tl.then(o=>{o.keys().then(u=>{for(let f=0;f<u.length-c;f++)o.delete(u[f])})})},_.evaluateSizeForFeature=Rh,_.evaluateSizeForZoom=Qm,_.evaluateVariableOffset=l_,_.evented=Ce,_.exactEquals=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]},_.exactEquals$1=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]},_.exported=Pr,_.exported$1=Qn,_.extend=er,_.extend$1=Pc,_.fillExtrusionHeightLift=TT,_.filterObject=ki,_.fromMat4=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[4],c[4]=o[5],c[5]=o[6],c[6]=o[8],c[7]=o[9],c[8]=o[10],c},_.fromQuat=function(c,o){var u=o[0],f=o[1],g=o[2],x=o[3],w=u+u,E=f+f,M=g+g,P=u*w,N=f*w,U=f*E,j=g*w,Y=g*E,X=g*M,ee=x*w,se=x*E,xe=x*M;return c[0]=1-U-X,c[1]=N+xe,c[2]=j-se,c[3]=0,c[4]=N-xe,c[5]=1-P-X,c[6]=Y+ee,c[7]=0,c[8]=j+se,c[9]=Y-ee,c[10]=1-P-U,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},_.fromRotation=function(c,o){var u=Math.sin(o),f=Math.cos(o);return c[0]=f,c[1]=u,c[2]=0,c[3]=-u,c[4]=f,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},_.fromScaling=VC,_.furthestTileCorner=function(c){const o=Math.round((c+45+360)%360/90)%4;return Dc[o]},_.getAABBPointSquareDist=function(c,o,u){let f=0;for(let g=0;g<2;++g){const x=u?u[g]:0;c[g]>x&&(f+=(c[g]-x)*(c[g]-x)),o[g]<x&&(f+=(x-o[g])*(x-o[g]))}return f},_.getAnchorAlignment=kb,_.getAnchorJustification=j1,_.getBounds=function(c){let o=1/0,u=1/0,f=-1/0,g=-1/0;for(const x of c)o=Math.min(o,x.x),u=Math.min(u,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return{min:new Xt(o,u),max:new Xt(f,g)}},_.getColumn=id,_.getGridMatrix=function(c,o,u,f){const g=o.getNorth(),x=o.getSouth(),w=o.getWest(),E=o.getEast(),M=1<<c.z,P=E-w,N=g-x,U=P/64,j=-N/Lo[u],Y=[0,U,0,j,0,0,g,w,0];if(c.z>0){const X=180/f;zC(Y,Y,[X/P+1,0,0,0,X/N+1,0,-.5*X/U,.5*X/j,1])}return Y[2]=M,Y[5]=c.x,Y[8]=c.y,Y},_.getImage=pm,_.getJSON=function(c,o){return yu(er(c,{type:"json"}),o)},_.getLatitudinalLod=function(c){const o=go-5;c=dr(c,-o,o)/o*90;const u=Math.pow(Math.abs(Math.sin(Cr(c))),3);return Math.round(u*(Lo.length-1))},_.getMapSessionAPI=Xe,_.getPerformanceMeasurement=kn,_.getProjection=X1,_.getRTLTextPluginStatus=Be,_.getReferrer=El,_.getTilePoint=function(c,{x:o,y:u},f=0){return new Xt(((o-f)*c.scale-c.x)*Bn,(u*c.scale-c.y)*Bn)},_.getTileVec3=function(c,o,u=0){return zm(((o.x-u)*c.scale-c.x)*Bn,(o.y*c.scale-c.y)*Bn,y1(o.z,o.y))},_.getVideo=function(c,o){const u=Et.document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let f=0;f<c.length;f++){const g=Et.document.createElement("source");Ff(c[f])||(u.crossOrigin="Anonymous"),g.src=c[f],u.appendChild(g)}return{cancel:()=>{}}},_.globeCenterToScreenPoint=function(c){const o=[0,0,0],u=Uc(new Float64Array(16));return Pu(u,c.pixelMatrix,c.globeMatrix),Vi(o,o,u),new Xt(o[0],o[1])},_.globeDenormalizeECEF=g1,_.globeECEFOrigin=function(c,o){const u=[0,0,0];return Vi(u,u,W0(Ou(o.canonical))),Vi(u,u,c),u},_.globeMetersToEcef=H0,_.globeNormalizeECEF=W0,_.globePixelsToTileUnits=function(c,o){return Bn/(512*Math.pow(2,c))*$0(Ou(o))},_.globePoleMatrixForTile=function(c,o,u){const f=Uc(new Float64Array(16)),g=(o/(1<<c)-.5)*Math.PI*2;return Bd(f,u.globeMatrix,g),Float32Array.from(f)},_.globeTileBounds=Ou,_.globeTiltAtLngLat=YC,_.globeToMercatorTransition=yp,_.globeUseCustomAntiAliasing=function(c,o,u){const f=yp(u.zoom),g=c.style.map._antialias,x=!!o.extStandardDerivatives,w=o.extStandardDerivativesForceOff||c.terrain&&c.terrain.exaggeration()>0;return 0===f&&!g&&!w&&x},_.identity=Uc,_.identity$1=$M,_.invert=B0,_.isFullscreen=function(){return!!Et.document.fullscreenElement||!!Et.document.webkitFullscreenElement},_.isLngLatBehindGlobe=_1,_.isMapAuthenticated=function(c){return He.has(c)},_.isMapboxURL=ec,_.isSafariWithAntialiasingBug=function(c){const o=c.navigator?c.navigator.userAgent:null;return!!_u(c)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},_.latFromMercatorY=gs,_.latLngToECEF=Rs,_.len=jC,_.length=V0,_.length$1=function(c){return Math.hypot(c[0],c[1],c[2],c[3])},_.lngFromMercatorX=il,_.loadVectorTile=cE,_.makeRequest=yu,_.mapValue=function(c,o,u,f,g){return dr((c-o)/(u-o)*(g-f)+f,f,g)},_.mercatorScale=ZC,_.mercatorXfromLng=Lu,_.mercatorYfromLat=gc,_.mercatorZfromAltitude=Ol,_.mul=z0,_.mul$1=_F,_.multiply=Pu,_.multiply$1=zC,_.multiply$2=UC,_.nextPowerOfTwo=Zl,_.normalize=_a,_.normalize$1=yF,_.normalize$2=HC,_.number=Er,_.ortho=function(c,o,u,f,g,x,w){var E=1/(o-u),M=1/(f-g),P=1/(x-w);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*M,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*P,c[11]=0,c[12]=(o+u)*E,c[13]=(g+f)*M,c[14]=(w+x)*P,c[15]=1,c},_.pbf=r_,_.perspective=function(c,o,u,f,g){var x,w=1/Math.tan(o/2);return c[0]=w/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,null!=g&&g!==1/0?(c[10]=(g+f)*(x=1/(f-g)),c[14]=2*g*f*x):(c[10]=-1,c[14]=-2*f),c},_.pick=function(c,o){const u={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(u[g]=c[g])}return u},_.plugin=Ue,_.pointGeometry=Xt,_.polesInViewport=function(c){const o=Uc(new Float64Array(16));Pu(o,c.pixelMatrix,c.globeMatrix);const u=[0,pc,0],f=[0,mc,0];return Vi(u,u,o),Vi(f,f,o),[u[0]>0&&u[0]<=c.width&&u[1]>0&&u[1]<=c.height&&!_1(c,new Tr(c.center.lat,90)),f[0]>0&&f[0]<=c.width&&f[1]>0&&f[1]<=c.height&&!_1(c,new Tr(c.center.lat,-90))]},_.polygonContainsPoint=Wd,_.polygonIntersectsBox=rb,_.polygonIntersectsPolygon=nb,_.polygonizeBounds=function(c,o,u=0,f=!0){const g=new Xt(u,u),x=c.sub(g),w=o.add(g),E=[x,new Xt(w.x,x.y),w,new Xt(x.x,w.y)];return f&&E.push(x.clone()),E},_.posAttributes=d1,_.postMapLoadEvent=me,_.postPerformanceEvent=Ve,_.postTurnstileEvent=K,_.potpack=z1,_.prevPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))},_.radToDeg=Hs,_.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],_.registerForPluginStateChange=function(c){return c({pluginStatus:de,pluginURL:ne}),Ce.on("pluginStateChange",c),c},_.removeAuthState=function(c){He.delete(c)},_.renderColorRamp=Yd,_.resample=KC,_.rotateX=a1,_.rotateX$1=WM,_.rotateY=Bd,_.rotateY$1=h1,_.rotateZ=function(c,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[0],w=o[1],E=o[2],M=o[3],P=o[4],N=o[5],U=o[6],j=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=x*g+P*f,c[1]=w*g+N*f,c[2]=E*g+U*f,c[3]=M*g+j*f,c[4]=P*g-x*f,c[5]=N*g-w*f,c[6]=U*g-E*f,c[7]=j*g-M*f,c},_.rotateZ$1=function(c,o,u){u*=.5;var f=o[0],g=o[1],x=o[2],w=o[3],E=Math.sin(u),M=Math.cos(u);return c[0]=f*M+g*E,c[1]=g*M-f*E,c[2]=x*M+w*E,c[3]=w*M-x*E,c},_.scale=jc,_.scale$1=HM,_.scale$2=Pl,_.scaleAndAdd=c1,_.set=function(c,o,u,f){return c[0]=o,c[1]=u,c[2]=f,c},_.setCacheLimits=function(c,o){Pf=c,_h=o},_.setColumn=function(c,o,u){c[4*o+0]=u[0],c[4*o+1]=u[1],c[4*o+2]=u[2],c[4*o+3]=u[3]},_.setRTLTextPlugin=function(c,o,u=!1){if(de===re||de===he||de===ue)throw new Error("setRTLTextPlugin cannot be called multiple times.");ne=Pr.resolveURL(c),de=re,le=o,ve(),u||Le()},_.smoothstep=mu,_.spec=mt,_.squaredLength=function(c){var o=c[0],u=c[1],f=c[2];return o*o+u*u+f*f},_.storeAuthState=function(c,o){o?He.add(c):He.delete(c)},_.sub=fc,_.subtract=gp,_.symbolSize=eg,_.tileAABB=function(c,o,u,f,g,x,w,E,M){if("globe"===M.name)return function rl(c,o,u){const f=o/c.worldSize,g=c.globeMatrix;if(u.z<=1){const et=Ou(u).getCorners();return WC(et,g,f),Qo.fromPoints(et)}const x=Um(u),w=m1(x);WC(w,g,f);const E=Number.MAX_VALUE,M=[-E,-E,-E],P=[E,E,E];if(x.contains(c.center)){for(const Ft of w)l1(P,P,Ft),Vm(M,M,Ft);M[2]=0;const et=c.point,ht=[et.x*f,et.y*f,0];return l1(P,P,ht),Vm(M,M,ht),new Qo(P,M)}const N=[g[12]*f,g[13]*f,g[14]*f],U=x.getCenter(),j=dr(c.center.lat,-go,go),Y=dr(U.lat,-go,go),X=Lu(c.center.lng),ee=gc(j);let se=X-Lu(U.lng);const xe=ee-gc(Y);se>.5?se-=1:se<-.5&&(se+=1);let ke=0;Math.abs(se)>Math.abs(xe)?ke=se>=0?1:3:(ke=xe>=0?0:2,c1(N,N,[g[4]*f,g[5]*f,g[6]*f],-Math.sin(Cr(xe>=0?x.getSouth():x.getNorth()))*Hc));const pe=w[ke],Ee=w[(ke+1)%4],Fe=new XM(pe,Ee,N),Oe=[qx(Fe,0)||pe[0],qx(Fe,1)||pe[1],qx(Fe,2)||pe[2]],Qe=yp(c.zoom);if(Qe>0){const et=function({x:Ft,y:lt,z:_t},ft,It,Bt,ct){const Gt=1/(1<<_t);let An=Ft*Gt,Qt=An+Gt,hn=lt*Gt,Yt=hn+Gt,Pn=0;const gr=(An+Qt)/2-Bt;return gr>.5?Pn=-1:gr<-.5&&(Pn=1),An=((An+Pn)*ft-(Bt*=ft))*It+Bt,Qt=((Qt+Pn)*ft-Bt)*It+Bt,hn=(hn*ft-(ct*=ft))*It+ct,Yt=(Yt*ft-ct)*It+ct,[[An,Yt,0],[Qt,Yt,0],[Qt,hn,0],[An,hn,0]]}(u,o,c._pixelsPerMercatorPixel,X,ee);for(let Ft=0;Ft<w.length;Ft++)Vd(w[Ft],et[Ft],Qe);const ht=nl([],et[ke],et[(ke+1)%4]);Pl(ht,ht,.5),Vd(Oe,ht,Qe)}for(const et of w)l1(P,P,et),Vm(M,M,et);return P[2]=Math.min(pe[2],Ee[2]),l1(P,P,Oe),Vm(M,M,Oe),new Qo(P,M)}(c,o,new Zm(u,f,g));const P=Kd({z:u,x:f,y:g},M);return new Qo([(x+P.x/P.scale)*o,o*(P.y/P.scale),w],[(x+P.x2/P.scale)*o,o*(P.y2/P.scale),E])},_.tileCornersToBounds=Um,_.tileTransform=Kd,_.transformMat3=function(c,o,u){var f=o[0],g=o[1],x=o[2];return c[0]=f*u[0]+g*u[3]+x*u[6],c[1]=f*u[1]+g*u[4]+x*u[7],c[2]=f*u[2]+g*u[5]+x*u[8],c},_.transformMat4=Vi,_.transformMat4$1=_p,_.transformQuat=Gx,_.transitionTileAABBinECEF=$C,_.translate=mp,_.transpose=function(c,o){if(c===o){var u=o[1],f=o[2],g=o[5];c[1]=o[3],c[2]=o[6],c[3]=u,c[5]=o[7],c[6]=f,c[7]=g}else c[0]=o[0],c[1]=o[3],c[2]=o[6],c[3]=o[1],c[4]=o[4],c[5]=o[7],c[6]=o[2],c[7]=o[5],c[8]=o[8];return c},_.triggerPluginCompletionEvent=be,_.uniqueId=rd,_.updateGlobeVertexNormal=function(c,o,u,f,g){const x=5*o+2;c.float32[x+0]=u,c.float32[x+1]=f,c.float32[x+2]=g},_.validateCustomStyleLayer=function(c){const o=[],u=c.id;return void 0===u&&o.push({message:`layers.${u}: missing required property "id"`}),void 0===c.render&&o.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&"2d"!==c.renderingMode&&"3d"!==c.renderingMode&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},_.validateFilter=c=>Ao(km(c)),_.validateFog=c=>Ao(Xy(c)),_.validateLayer=c=>Ao(ma(c)),_.validateLight=c=>Ao(ip(c)),_.validateSource=c=>Ao(hs(c)),_.validateStyle=Zy,_.validateTerrain=c=>Ao(Jo(c)),_.values=Mc,_.vectorTile=M1,_.version=ql,_.warnOnce=zi,_.window=Et,_.wrap=ha}),c0(0,function(_){function Et(ge){if("number"==typeof ge||"boolean"==typeof ge||"string"==typeof ge||null==ge)return JSON.stringify(ge);if(Array.isArray(ge)){let te="[";for(const me of ge)te+=`${Et(me)},`;return`${te}]`}let K="{";for(const te of Object.keys(ge).sort())K+=`${te}:${Et(ge[te])},`;return`${K}}`}function ql(ge){let K="";for(const te of _.refProperties)K+=`/${Et(ge[te])}`;return K}class Ya{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,te){for(const Te of K)this._layerConfigs[Te.id]=Te,(this._layers[Te.id]=_.createStyleLayer(Te)).compileFilter(),this.keyCache[Te.id]&&delete this.keyCache[Te.id];for(const Te of te)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const me=function(Te,Ve){const Ze={};for(let He=0;He<Te.length;He++){const nt=Ve&&Ve[Te[He].id]||ql(Te[He]);Ve&&(Ve[Te[He].id]=nt);let wt=Ze[nt];wt||(wt=Ze[nt]=[]),wt.push(Te[He])}const Xe=[];for(const He in Ze)Xe.push(Ze[He]);return Xe}(_.values(this._layerConfigs),this.keyCache);for(const Te of me){const Ve=Te.map(sn=>this._layers[sn.id]),Ze=Ve[0];if("none"===Ze.visibility)continue;const Xe=Ze.source||"";let He=this.familiesBySource[Xe];He||(He=this.familiesBySource[Xe]={});const nt=Ze.sourceLayer||"_geojsonTileLayer";let wt=He[nt];wt||(wt=He[nt]=[]),wt.push(Ve)}}}class lr{loadTile(K,te){const{uid:me,encoding:Te,rawImageData:Ve,padding:Ze,buildQuadTree:Xe}=K,He=_.window.ImageBitmap&&Ve instanceof _.window.ImageBitmap?this.getImageData(Ve,Ze):Ve;te(null,new _.DEMData(me,He,Te,Ze<1,Xe))}getImageData(K,te){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(K.width,K.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=K.width,this.offscreenCanvas.height=K.height,this.offscreenCanvasContext.drawImage(K,0,0,K.width,K.height);const me=this.offscreenCanvasContext.getImageData(-te,-te,K.width+2*te,K.height+2*te);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),me}}var Qn=function ge(K,te){var me,Te=K&&K.type;if("FeatureCollection"===Te)for(me=0;me<K.features.length;me++)ge(K.features[me],te);else if("GeometryCollection"===Te)for(me=0;me<K.geometries.length;me++)ge(K.geometries[me],te);else if("Feature"===Te)ge(K.geometry,te);else if("Polygon"===Te)Ls(K.coordinates,te);else if("MultiPolygon"===Te)for(me=0;me<K.coordinates.length;me++)Ls(K.coordinates[me],te);return K};function Ls(ge,K){if(0!==ge.length){Eo(ge[0],K);for(var te=1;te<ge.length;te++)Eo(ge[te],!K)}}function Eo(ge,K){for(var te=0,me=0,Te=0,Ve=ge.length,Ze=Ve-1;Te<Ve;Ze=Te++){var Xe=(ge[Te][0]-ge[Ze][0])*(ge[Ze][1]+ge[Te][1]),He=te+Xe;me+=Math.abs(te)>=Math.abs(Xe)?te-He+Xe:Xe-He+te,te=He}te+me>=0!=!!K&&ge.reverse()}const ka=_.VectorTileFeature.prototype.toGeoJSON;class Df{constructor(K){this._feature=K,this.extent=_.EXTENT,this.type=K.type,this.properties=K.tags,"id"in K&&!isNaN(K.id)&&(this.id=parseInt(K.id,10))}loadGeometry(){if(1===this._feature.type){const K=[];for(const te of this._feature.geometry)K.push([new _.pointGeometry(te[0],te[1])]);return K}{const K=[];for(const te of this._feature.geometry){const me=[];for(const Te of te)me.push(new _.pointGeometry(Te[0],Te[1]));K.push(me)}return K}}toGeoJSON(K,te,me){return ka.call(this,K,te,me)}}class Mf{constructor(K){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.EXTENT,this.length=K.length,this._features=K}feature(K){return new Df(this._features[K])}}var bl={},pu={get exports(){return bl},set exports(ge){bl=ge}},qa=_.pointGeometry,Xt=_.vectorTile.VectorTileFeature,wl=ph;function ph(ge,K){this.options=K||{},this.features=ge,this.length=ge.length}function mh(ge,K){this.id="number"==typeof ge.id?ge.id:void 0,this.type=ge.type,this.rawGeometry=1===ge.type?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=K||4096}ph.prototype.feature=function(ge){return new mh(this.features[ge],this.options.extent)},mh.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var K=0;K<ge.length;K++){for(var te=ge[K],me=[],Te=0;Te<te.length;Te++)me.push(new qa(te[Te][0],te[Te][1]));this.geometry.push(me)}return this.geometry},mh.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,K=1/0,te=-1/0,me=1/0,Te=-1/0,Ve=0;Ve<ge.length;Ve++)for(var Ze=ge[Ve],Xe=0;Xe<Ze.length;Xe++){var He=Ze[Xe];K=Math.min(K,He.x),te=Math.max(te,He.x),me=Math.min(me,He.y),Te=Math.max(Te,He.y)}return[K,me,te,Te]},mh.prototype.toGeoJSON=Xt.prototype.toGeoJSON;var Cr=_.pbf,Hs=wl;function Dc(ge){var K=new Cr;return function(te,me){for(var Te in te.layers)me.writeMessage(3,gh,te.layers[Te])}(ge,K),K.finish()}function gh(ge,K){var te;K.writeVarintField(15,ge.version||1),K.writeStringField(1,ge.name||""),K.writeVarintField(5,ge.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<ge.length;te++)me.feature=ge.feature(te),K.writeMessage(2,kf,me);var Te=me.keys;for(te=0;te<Te.length;te++)K.writeStringField(3,Te[te]);var Ve=me.values;for(te=0;te<Ve.length;te++)K.writeMessage(4,nd,Ve[te])}function kf(ge,K){var te=ge.feature;void 0!==te.id&&K.writeVarintField(1,te.id),K.writeMessage(2,Af,ge),K.writeVarintField(3,te.type),K.writeMessage(4,ha,te)}function Af(ge,K){var te=ge.feature,me=ge.keys,Te=ge.values,Ve=ge.keycache,Ze=ge.valuecache;for(var Xe in te.properties){var He=te.properties[Xe],nt=Ve[Xe];if(null!==He){void 0===nt&&(me.push(Xe),Ve[Xe]=nt=me.length-1),K.writeVarint(nt);var wt=typeof He;"string"!==wt&&"boolean"!==wt&&"number"!==wt&&(He=JSON.stringify(He));var sn=wt+":"+He,Ct=Ze[sn];void 0===Ct&&(Te.push(He),Ze[sn]=Ct=Te.length-1),K.writeVarint(Ct)}}}function dr(ge,K){return(K<<3)+(7&ge)}function mu(ge){return ge<<1^ge>>31}function ha(ge,K){for(var te=ge.loadGeometry(),me=ge.type,Te=0,Ve=0,Ze=te.length,Xe=0;Xe<Ze;Xe++){var He=te[Xe],nt=1;1===me&&(nt=He.length),K.writeVarint(dr(1,nt));for(var wt=3===me?He.length-1:He.length,sn=0;sn<wt;sn++){1===sn&&1!==me&&K.writeVarint(dr(2,wt-1));var Ct=He[sn].x-Te,kn=He[sn].y-Ve;K.writeVarint(mu(Ct)),K.writeVarint(mu(kn)),Te+=Ct,Ve+=kn}3===me&&K.writeVarint(dr(7,1))}}function nd(ge,K){var te=typeof ge;"string"===te?K.writeStringField(1,ge):"boolean"===te?K.writeBooleanField(7,ge):"number"===te&&(ge%1!=0?K.writeDoubleField(3,ge):ge<0?K.writeSVarintField(6,ge):K.writeVarintField(5,ge))}function Mc(ge,K,te,me,Te,Ve){if(Te-me<=te)return;const Ze=me+Te>>1;er(ge,K,Ze,me,Te,Ve%2),Mc(ge,K,te,me,Ze-1,Ve+1),Mc(ge,K,te,Ze+1,Te,Ve+1)}function er(ge,K,te,me,Te,Ve){for(;Te>me;){if(Te-me>600){const nt=Te-me+1,wt=te-me+1,sn=Math.log(nt),Ct=.5*Math.exp(2*sn/3),kn=.5*Math.sqrt(sn*Ct*(nt-Ct)/nt)*(wt-nt/2<0?-1:1);er(ge,K,te,Math.max(me,Math.floor(te-wt*Ct/nt+kn)),Math.min(Te,Math.floor(te+(nt-wt)*Ct/nt+kn)),Ve)}const Ze=K[2*te+Ve];let Xe=me,He=Te;for(kc(ge,K,me,te),K[2*Te+Ve]>Ze&&kc(ge,K,me,Te);Xe<He;){for(kc(ge,K,Xe,He),Xe++,He--;K[2*Xe+Ve]<Ze;)Xe++;for(;K[2*He+Ve]>Ze;)He--}K[2*me+Ve]===Ze?kc(ge,K,me,He):(He++,kc(ge,K,He,Te)),He<=te&&(me=He+1),te<=He&&(Te=He-1)}}function kc(ge,K,te,me){rd(ge,te,me),rd(K,2*te,2*me),rd(K,2*te+1,2*me+1)}function rd(ge,K,te){const me=ge[K];ge[K]=ge[te],ge[te]=me}function Xl(ge,K,te,me){const Te=ge-te,Ve=K-me;return Te*Te+Ve*Ve}pu.exports=Dc,bl.fromVectorTileJs=Dc,bl.fromGeojsonVt=function(ge,K){K=K||{};var te={};for(var me in ge)te[me]=new Hs(ge[me].features,K),te[me].name=me,te[me].version=K.version,te[me].extent=K.extent;return Dc({layers:te})},bl.GeoJSONWrapper=Hs;const Zl=ge=>ge[0],qi=ge=>ge[1];class Ac{constructor(K,te=Zl,me=qi,Te=64,Ve=Float64Array){this.nodeSize=Te,this.points=K;const Ze=K.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new Ze(K.length),He=this.coords=new Ve(2*K.length);for(let nt=0;nt<K.length;nt++)Xe[nt]=nt,He[2*nt]=te(K[nt]),He[2*nt+1]=me(K[nt]);Mc(Xe,He,Te,0,Xe.length-1,0)}range(K,te,me,Te){return function(Ve,Ze,Xe,He,nt,wt,sn){const Ct=[0,Ve.length-1,0],kn=[];let vn,In;for(;Ct.length;){const zn=Ct.pop(),tr=Ct.pop(),Pr=Ct.pop();if(tr-Pr<=sn){for(let di=Pr;di<=tr;di++)vn=Ze[2*di],In=Ze[2*di+1],vn>=Xe&&vn<=nt&&In>=He&&In<=wt&&kn.push(Ve[di]);continue}const Ln=Math.floor((Pr+tr)/2);vn=Ze[2*Ln],In=Ze[2*Ln+1],vn>=Xe&&vn<=nt&&In>=He&&In<=wt&&kn.push(Ve[Ln]);const Br=(zn+1)%2;(0===zn?Xe<=vn:He<=In)&&(Ct.push(Pr),Ct.push(Ln-1),Ct.push(Br)),(0===zn?nt>=vn:wt>=In)&&(Ct.push(Ln+1),Ct.push(tr),Ct.push(Br))}return kn}(this.ids,this.coords,K,te,me,Te,this.nodeSize)}within(K,te,me){return function(Te,Ve,Ze,Xe,He,nt){const wt=[0,Te.length-1,0],sn=[],Ct=He*He;for(;wt.length;){const kn=wt.pop(),vn=wt.pop(),In=wt.pop();if(vn-In<=nt){for(let Br=In;Br<=vn;Br++)Xl(Ve[2*Br],Ve[2*Br+1],Ze,Xe)<=Ct&&sn.push(Te[Br]);continue}const zn=Math.floor((In+vn)/2),tr=Ve[2*zn],Pr=Ve[2*zn+1];Xl(tr,Pr,Ze,Xe)<=Ct&&sn.push(Te[zn]);const Ln=(kn+1)%2;(0===kn?Ze-He<=tr:Xe-He<=Pr)&&(wt.push(In),wt.push(zn-1),wt.push(Ln)),(0===kn?Ze+He>=tr:Xe+He>=Pr)&&(wt.push(zn+1),wt.push(vn),wt.push(Ln))}return sn}(this.ids,this.coords,K,te,me,this.nodeSize)}}const Cl={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ge=>ge},yi=Math.fround||(ki=new Float32Array(1),ge=>(ki[0]=+ge,ki[0]));var ki;class Aa{constructor(K){this.options=_u(Object.create(Cl),K),this.trees=new Array(this.options.maxZoom+1)}load(K){const{log:te,minZoom:me,maxZoom:Te,nodeSize:Ve}=this.options;te&&console.time("total time");const Ze=`prepare ${K.length} points`;te&&console.time(Ze),this.points=K;let Xe=[];for(let He=0;He<K.length;He++)K[He].geometry&&Xe.push(zi(K[He],He));this.trees[Te+1]=new Ac(Xe,dm,id,Ve,Float32Array),te&&console.timeEnd(Ze);for(let He=Te;He>=me;He--){const nt=+Date.now();Xe=this._cluster(Xe,He),this.trees[He]=new Ac(Xe,dm,id,Ve,Float32Array),te&&console.log("z%d: %d clusters in %dms",He,Xe.length,+Date.now()-nt)}return te&&console.timeEnd("total time"),this}getClusters(K,te){let me=((K[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,K[1]));let Ve=180===K[2]?180:((K[2]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)me=-180,Ve=180;else if(me>Ve){const wt=this.getClusters([me,Te,180,Ze],te),sn=this.getClusters([-180,Te,Ve,Ze],te);return wt.concat(sn)}const Xe=this.trees[this._limitZoom(te)],He=Xe.range(Jl(me),gu(Ze),Jl(Ve),gu(Te)),nt=[];for(const wt of He){const sn=Xe.points[wt];nt.push(sn.numPoints?Kl(sn):this.points[sn.index])}return nt}getChildren(K){const te=this._getOriginId(K),me=this._getOriginZoom(K),Te="No cluster with the specified id.",Ve=this.trees[me];if(!Ve)throw new Error(Te);const Ze=Ve.points[te];if(!Ze)throw new Error(Te);const Xe=this.options.radius/(this.options.extent*Math.pow(2,me-1)),He=Ve.within(Ze.x,Ze.y,Xe),nt=[];for(const wt of He){const sn=Ve.points[wt];sn.parentId===K&&nt.push(sn.numPoints?Kl(sn):this.points[sn.index])}if(0===nt.length)throw new Error(Te);return nt}getLeaves(K,te,me){const Te=[];return this._appendLeaves(Te,K,te=te||10,me=me||0,0),Te}getTile(K,te,me){const Te=this.trees[this._limitZoom(K)],Ve=Math.pow(2,K),{extent:Ze,radius:Xe}=this.options,He=Xe/Ze,nt=(me-He)/Ve,wt=(me+1+He)/Ve,sn={features:[]};return this._addTileFeatures(Te.range((te-He)/Ve,nt,(te+1+He)/Ve,wt),Te.points,te,me,Ve,sn),0===te&&this._addTileFeatures(Te.range(1-He/Ve,nt,1,wt),Te.points,Ve,me,Ve,sn),te===Ve-1&&this._addTileFeatures(Te.range(0,nt,He/Ve,wt),Te.points,-1,me,Ve,sn),sn.features.length?sn:null}getClusterExpansionZoom(K){let te=this._getOriginZoom(K)-1;for(;te<=this.options.maxZoom;){const me=this.getChildren(K);if(te++,1!==me.length)break;K=me[0].properties.cluster_id}return te}_appendLeaves(K,te,me,Te,Ve){const Ze=this.getChildren(te);for(const Xe of Ze){const He=Xe.properties;if(He&&He.cluster?Ve+He.point_count<=Te?Ve+=He.point_count:Ve=this._appendLeaves(K,He.cluster_id,me,Te,Ve):Ve<Te?Ve++:K.push(Xe),K.length===me)break}return Ve}_addTileFeatures(K,te,me,Te,Ve,Ze){for(const Xe of K){const He=te[Xe],nt=He.numPoints;let wt,sn,Ct;if(nt)wt=Fr(He),sn=He.x,Ct=He.y;else{const In=this.points[He.index];wt=In.properties,sn=Jl(In.geometry.coordinates[0]),Ct=gu(In.geometry.coordinates[1])}const kn={type:1,geometry:[[Math.round(this.options.extent*(sn*Ve-me)),Math.round(this.options.extent*(Ct*Ve-Te))]],tags:wt};let vn;nt?vn=He.id:this.options.generateId?vn=He.index:this.points[He.index].id&&(vn=this.points[He.index].id),void 0!==vn&&(kn.id=vn),Ze.features.push(kn)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,te){const me=[],{radius:Te,extent:Ve,reduce:Ze,minPoints:Xe}=this.options,He=Te/(Ve*Math.pow(2,te));for(let nt=0;nt<K.length;nt++){const wt=K[nt];if(wt.zoom<=te)continue;wt.zoom=te;const sn=this.trees[te+1],Ct=sn.within(wt.x,wt.y,He),kn=wt.numPoints||1;let vn=kn;for(const In of Ct){const zn=sn.points[In];zn.zoom>te&&(vn+=zn.numPoints||1)}if(vn>kn&&vn>=Xe){let In=wt.x*kn,zn=wt.y*kn,tr=Ze&&kn>1?this._map(wt,!0):null;const Pr=(nt<<5)+(te+1)+this.points.length;for(const Ln of Ct){const Br=sn.points[Ln];if(Br.zoom<=te)continue;Br.zoom=te;const di=Br.numPoints||1;In+=Br.x*di,zn+=Br.y*di,Br.parentId=Pr,Ze&&(tr||(tr=this._map(wt,!0)),Ze(tr,this._map(Br)))}wt.parentId=Pr,me.push(jn(In/vn,zn/vn,Pr,vn,tr))}else if(me.push(wt),vn>1)for(const In of Ct){const zn=sn.points[In];zn.zoom<=te||(zn.zoom=te,me.push(zn))}}return me}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,te){if(K.numPoints)return te?_u({},K.properties):K.properties;const me=this.points[K.index].properties,Te=this.options.map(me);return te&&Te===me?_u({},Te):Te}}function jn(ge,K,te,me,Te){return{x:yi(ge),y:yi(K),zoom:1/0,id:te,parentId:-1,numPoints:me,properties:Te}}function zi(ge,K){const[te,me]=ge.geometry.coordinates;return{x:yi(Jl(te)),y:yi(gu(me)),zoom:1/0,index:K,parentId:-1}}function Kl(ge){return{type:"Feature",id:ge.id,properties:Fr(ge),geometry:{type:"Point",coordinates:[(K=ge.x,360*(K-.5)),hm(ge.y)]}};var K}function Fr(ge){const K=ge.numPoints,te=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K;return _u(_u({},ge.properties),{cluster:!0,cluster_id:ge.id,point_count:K,point_count_abbreviated:te})}function Jl(ge){return ge/360+.5}function gu(ge){const K=Math.sin(ge*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function hm(ge){const K=(180-360*ge)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function _u(ge,K){for(const te in K)ge[te]=K[te];return ge}function dm(ge){return ge.x}function id(ge){return ge.y}function If(ge,K,te,me){for(var Te,Ve=me,Ze=te-K>>1,Xe=te-K,He=ge[K],nt=ge[K+1],wt=ge[te],sn=ge[te+1],Ct=K+3;Ct<te;Ct+=3){var kn=Tl(ge[Ct],ge[Ct+1],He,nt,wt,sn);if(kn>Ve)Te=Ct,Ve=kn;else if(kn===Ve){var vn=Math.abs(Ct-Ze);vn<Xe&&(Te=Ct,Xe=vn)}}Ve>me&&(Te-K>3&&If(ge,K,Te,me),ge[Te+2]=Ve,te-Te>3&&If(ge,Te,te,me))}function Tl(ge,K,te,me,Te,Ve){var Ze=Te-te,Xe=Ve-me;if(0!==Ze||0!==Xe){var He=((ge-te)*Ze+(K-me)*Xe)/(Ze*Ze+Xe*Xe);He>1?(te=Te,me=Ve):He>0&&(te+=Ze*He,me+=Xe*He)}return(Ze=ge-te)*Ze+(Xe=K-me)*Xe}function Ql(ge,K,te,me){var Te={id:void 0===ge?null:ge,type:K,geometry:te,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var Ze=Ve.geometry,Xe=Ve.type;if("Point"===Xe||"MultiPoint"===Xe||"LineString"===Xe)Pf(Ve,Ze);else if("Polygon"===Xe||"MultiLineString"===Xe)for(var He=0;He<Ze.length;He++)Pf(Ve,Ze[He]);else if("MultiPolygon"===Xe)for(He=0;He<Ze.length;He++)for(var nt=0;nt<Ze[He].length;nt++)Pf(Ve,Ze[He][nt])}(Te),Te}function Pf(ge,K){for(var te=0;te<K.length;te+=3)ge.minX=Math.min(ge.minX,K[te]),ge.minY=Math.min(ge.minY,K[te+1]),ge.maxX=Math.max(ge.maxX,K[te]),ge.maxY=Math.max(ge.maxY,K[te+1])}function _h(ge,K,te,me){if(K.geometry){var Te=K.geometry.coordinates,Ve=K.geometry.type,Ze=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2),Xe=[],He=K.id;if(te.promoteId?He=K.properties[te.promoteId]:te.generateId&&(He=me||0),"Point"===Ve)fm(Te,Xe);else if("MultiPoint"===Ve)for(var nt=0;nt<Te.length;nt++)fm(Te[nt],Xe);else if("LineString"===Ve)Ic(Te,Xe,Ze,!1);else if("MultiLineString"===Ve){if(te.lineMetrics){for(nt=0;nt<Te.length;nt++)Ic(Te[nt],Xe=[],Ze,!1),ge.push(Ql(He,"LineString",Xe,K.properties));return}sd(Te,Xe,Ze,!1)}else if("Polygon"===Ve)sd(Te,Xe,Ze,!0);else{if("MultiPolygon"!==Ve){if("GeometryCollection"===Ve){for(nt=0;nt<K.geometry.geometries.length;nt++)_h(ge,{id:He,geometry:K.geometry.geometries[nt],properties:K.properties},te,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(nt=0;nt<Te.length;nt++){var wt=[];sd(Te[nt],wt,Ze,!0),Xe.push(wt)}}ge.push(Ql(He,Ve,Xe,K.properties))}}function fm(ge,K){K.push(Of(ge[0])),K.push(Lf(ge[1])),K.push(0)}function Ic(ge,K,te,me){for(var Te,Ve,Ze=0,Xe=0;Xe<ge.length;Xe++){var He=Of(ge[Xe][0]),nt=Lf(ge[Xe][1]);K.push(He),K.push(nt),K.push(0),Xe>0&&(Ze+=me?(Te*nt-He*Ve)/2:Math.sqrt(Math.pow(He-Te,2)+Math.pow(nt-Ve,2))),Te=He,Ve=nt}var wt=K.length-3;K[2]=1,If(K,0,wt,te),K[wt+2]=1,K.size=Math.abs(Ze),K.start=0,K.end=K.size}function sd(ge,K,te,me){for(var Te=0;Te<ge.length;Te++){var Ve=[];Ic(ge[Te],Ve,te,me),K.push(Ve)}}function Of(ge){return ge/360+.5}function Lf(ge){var K=Math.sin(ge*Math.PI/180),te=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return te<0?0:te>1?1:te}function Xa(ge,K,te,me,Te,Ve,Ze,Xe){if(me/=K,Ve>=(te/=K)&&Ze<me)return ge;if(Ze<te||Ve>=me)return null;for(var He=[],nt=0;nt<ge.length;nt++){var wt=ge[nt],sn=wt.geometry,Ct=wt.type,kn=0===Te?wt.minX:wt.minY,vn=0===Te?wt.maxX:wt.maxY;if(kn>=te&&vn<me)He.push(wt);else if(!(vn<te||kn>=me)){var In=[];if("Point"===Ct||"MultiPoint"===Ct)El(sn,In,te,me,Te);else if("LineString"===Ct)yu(sn,In,te,me,Te,!1,Xe.lineMetrics);else if("MultiLineString"===Ct)Ff(sn,In,te,me,Te,!1);else if("Polygon"===Ct)Ff(sn,In,te,me,Te,!0);else if("MultiPolygon"===Ct)for(var zn=0;zn<sn.length;zn++){var tr=[];Ff(sn[zn],tr,te,me,Te,!0),tr.length&&In.push(tr)}if(In.length){if(Xe.lineMetrics&&"LineString"===Ct){for(zn=0;zn<In.length;zn++)He.push(Ql(wt.id,Ct,In[zn],wt.tags));continue}"LineString"!==Ct&&"MultiLineString"!==Ct||(1===In.length?(Ct="LineString",In=In[0]):Ct="MultiLineString"),"Point"!==Ct&&"MultiPoint"!==Ct||(Ct=3===In.length?"Point":"MultiPoint"),He.push(Ql(wt.id,Ct,In,wt.tags))}}}return He.length?He:null}function El(ge,K,te,me,Te){for(var Ve=0;Ve<ge.length;Ve+=3){var Ze=ge[Ve+Te];Ze>=te&&Ze<=me&&(K.push(ge[Ve]),K.push(ge[Ve+1]),K.push(ge[Ve+2]))}}function yu(ge,K,te,me,Te,Ve,Ze){for(var Xe,He,nt=od(ge),wt=0===Te?ad:ld,sn=ge.start,Ct=0;Ct<ge.length-3;Ct+=3){var kn=ge[Ct],vn=ge[Ct+1],In=ge[Ct+2],zn=ge[Ct+3],tr=ge[Ct+4],Pr=0===Te?kn:vn,Ln=0===Te?zn:tr,Br=!1;Ze&&(Xe=Math.sqrt(Math.pow(kn-zn,2)+Math.pow(vn-tr,2))),Pr<te?Ln>te&&(He=wt(nt,kn,vn,zn,tr,te),Ze&&(nt.start=sn+Xe*He)):Pr>me?Ln<me&&(He=wt(nt,kn,vn,zn,tr,me),Ze&&(nt.start=sn+Xe*He)):Rf(nt,kn,vn,In),Ln<te&&Pr>=te&&(He=wt(nt,kn,vn,zn,tr,te),Br=!0),Ln>me&&Pr<=me&&(He=wt(nt,kn,vn,zn,tr,me),Br=!0),!Ve&&Br&&(Ze&&(nt.end=sn+Xe*He),K.push(nt),nt=od(ge)),Ze&&(sn+=Xe)}var di=ge.length-3;kn=ge[di],vn=ge[di+1],In=ge[di+2],(Pr=0===Te?kn:vn)>=te&&Pr<=me&&Rf(nt,kn,vn,In),di=nt.length-3,Ve&&di>=3&&(nt[di]!==nt[0]||nt[di+1]!==nt[1])&&Rf(nt,nt[0],nt[1],nt[2]),nt.length&&K.push(nt)}function od(ge){var K=[];return K.size=ge.size,K.start=ge.start,K.end=ge.end,K}function Ff(ge,K,te,me,Te,Ve){for(var Ze=0;Ze<ge.length;Ze++)yu(ge[Ze],K,te,me,Te,Ve,!1)}function Rf(ge,K,te,me){ge.push(K),ge.push(te),ge.push(me)}function ad(ge,K,te,me,Te,Ve){var Ze=(Ve-K)/(me-K);return ge.push(Ve),ge.push(te+(Te-te)*Ze),ge.push(1),Ze}function ld(ge,K,te,me,Te,Ve){var Ze=(Ve-te)/(Te-te);return ge.push(K+(me-K)*Ze),ge.push(Ve),ge.push(1),Ze}function pm(ge,K){for(var te=[],me=0;me<ge.length;me++){var Te,Ve=ge[me],Ze=Ve.type;if("Point"===Ze||"MultiPoint"===Ze||"LineString"===Ze)Te=cd(Ve.geometry,K);else if("MultiLineString"===Ze||"Polygon"===Ze){Te=[];for(var Xe=0;Xe<Ve.geometry.length;Xe++)Te.push(cd(Ve.geometry[Xe],K))}else if("MultiPolygon"===Ze)for(Te=[],Xe=0;Xe<Ve.geometry.length;Xe++){for(var He=[],nt=0;nt<Ve.geometry[Xe].length;nt++)He.push(cd(Ve.geometry[Xe][nt],K));Te.push(He)}te.push(Ql(Ve.id,Ze,Te,Ve.tags))}return te}function cd(ge,K){var te=[];te.size=ge.size,void 0!==ge.start&&(te.start=ge.start,te.end=ge.end);for(var me=0;me<ge.length;me+=3)te.push(ge[me]+K,ge[me+1],ge[me+2]);return te}function ec(ge,K){if(ge.transformed)return ge;var te,me,Te,Ve=1<<ge.z,Ze=ge.x,Xe=ge.y;for(te=0;te<ge.features.length;te++){var He=ge.features[te],nt=He.geometry,wt=He.type;if(He.geometry=[],1===wt)for(me=0;me<nt.length;me+=2)He.geometry.push(ud(nt[me],nt[me+1],K,Ve,Ze,Xe));else for(me=0;me<nt.length;me++){var sn=[];for(Te=0;Te<nt[me].length;Te+=2)sn.push(ud(nt[me][Te],nt[me][Te+1],K,Ve,Ze,Xe));He.geometry.push(sn)}}return ge.transformed=!0,ge}function ud(ge,K,te,me,Te,Ve){return[Math.round(te*(ge*me-Te)),Math.round(te*(K*me-Ve))]}function hd(ge,K,te,me,Te){for(var Ve=K===Te.maxZoom?0:Te.tolerance/((1<<K)*Te.extent),Ze={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:te,y:me,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<ge.length;Xe++){Ze.numFeatures++,Nf(Ze,ge[Xe],Ve,Te);var He=ge[Xe].minX,nt=ge[Xe].minY,wt=ge[Xe].maxX,sn=ge[Xe].maxY;He<Ze.minX&&(Ze.minX=He),nt<Ze.minY&&(Ze.minY=nt),wt>Ze.maxX&&(Ze.maxX=wt),sn>Ze.maxY&&(Ze.maxY=sn)}return Ze}function Nf(ge,K,te,me){var Te=K.geometry,Ve=K.type,Ze=[];if("Point"===Ve||"MultiPoint"===Ve)for(var Xe=0;Xe<Te.length;Xe+=3)Ze.push(Te[Xe]),Ze.push(Te[Xe+1]),ge.numPoints++,ge.numSimplified++;else if("LineString"===Ve)yh(Ze,Te,ge,te,!1,!1);else if("MultiLineString"===Ve||"Polygon"===Ve)for(Xe=0;Xe<Te.length;Xe++)yh(Ze,Te[Xe],ge,te,"Polygon"===Ve,0===Xe);else if("MultiPolygon"===Ve)for(var He=0;He<Te.length;He++){var nt=Te[He];for(Xe=0;Xe<nt.length;Xe++)yh(Ze,nt[Xe],ge,te,!0,0===Xe)}if(Ze.length){var wt=K.tags||null;if("LineString"===Ve&&me.lineMetrics){for(var sn in wt={},K.tags)wt[sn]=K.tags[sn];wt.mapbox_clip_start=Te.start/Te.size,wt.mapbox_clip_end=Te.end/Te.size}var Ct={geometry:Ze,type:"Polygon"===Ve||"MultiPolygon"===Ve?3:"LineString"===Ve||"MultiLineString"===Ve?2:1,tags:wt};null!==K.id&&(Ct.id=K.id),ge.features.push(Ct)}}function yh(ge,K,te,me,Te,Ve){var Ze=me*me;if(me>0&&K.size<(Te?Ze:me))te.numPoints+=K.length/3;else{for(var Xe=[],He=0;He<K.length;He+=3)(0===me||K[He+2]>Ze)&&(te.numSimplified++,Xe.push(K[He]),Xe.push(K[He+1])),te.numPoints++;Te&&function(nt,wt){for(var sn=0,Ct=0,kn=nt.length,vn=kn-2;Ct<kn;vn=Ct,Ct+=2)sn+=(nt[Ct]-nt[vn])*(nt[Ct+1]+nt[vn+1]);if(sn>0===wt)for(Ct=0,kn=nt.length;Ct<kn/2;Ct+=2){var In=nt[Ct],zn=nt[Ct+1];nt[Ct]=nt[kn-2-Ct],nt[Ct+1]=nt[kn-1-Ct],nt[kn-2-Ct]=In,nt[kn-1-Ct]=zn}}(Xe,Ve),ge.push(Xe)}}function vu(ge,K){var te=(K=this.options=function(Te,Ve){for(var Ze in Ve)Te[Ze]=Ve[Ze];return Te}(Object.create(this.options),K)).debug;if(te&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te,Ve,Ze,Xe,He,nt,me=function(Te,Ve){var Ze=[];if("FeatureCollection"===Te.type)for(var Xe=0;Xe<Te.features.length;Xe++)_h(Ze,Te.features[Xe],Ve,Xe);else _h(Ze,"Feature"===Te.type?Te:{geometry:Te},Ve);return Ze}(ge,K);this.tiles={},this.tileCoords=[],te&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Xe=Te=me,He=Xa(Te,1,-1-(Ze=(Ve=K).buffer/Ve.extent),Ze,0,-1,2,Ve),nt=Xa(Te,1,1-Ze,2+Ze,0,-1,2,Ve),(He||nt)&&(Xe=Xa(Te,1,-Ze,1+Ze,0,-1,2,Ve)||[],He&&(Xe=pm(He,1).concat(Xe)),nt&&(Xe=Xe.concat(pm(nt,-1)))),(me=Xe).length&&this.splitTile(me,0,0,0),te&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function da(ge,K,te){return 32*((1<<ge)*te+K)+ge}function xu(ge,K){const te=ge.tileID.canonical;if(!this._geoJSONIndex)return K(null,null);const me=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!me)return K(null,null);const Te=new Mf(me.features);let Ve=bl(Te);0===Ve.byteOffset&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),K(null,{vectorTile:Te,rawData:Ve.buffer})}vu.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vu.prototype.splitTile=function(ge,K,te,me,Te,Ve,Ze){for(var Xe=[ge,K,te,me],He=this.options,nt=He.debug;Xe.length;){me=Xe.pop(),te=Xe.pop(),K=Xe.pop(),ge=Xe.pop();var wt=1<<K,sn=da(K,te,me),Ct=this.tiles[sn];if(!Ct&&(nt>1&&console.time("creation"),Ct=this.tiles[sn]=hd(ge,K,te,me,He),this.tileCoords.push({z:K,x:te,y:me}),nt)){nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,te,me,Ct.numFeatures,Ct.numPoints,Ct.numSimplified),console.timeEnd("creation"));var kn="z"+K;this.stats[kn]=(this.stats[kn]||0)+1,this.total++}if(Ct.source=ge,Te){if(K===He.maxZoom||K===Te)continue;var vn=1<<Te-K;if(te!==Math.floor(Ve/vn)||me!==Math.floor(Ze/vn))continue}else if(K===He.indexMaxZoom||Ct.numPoints<=He.indexMaxPoints)continue;if(Ct.source=null,0!==ge.length){nt>1&&console.time("clipping");var In,zn,tr,Pr,Ln,Br,di=.5*He.buffer/He.extent,tc=.5-di,nc=.5+di,mt=1+di;In=zn=tr=Pr=null,Ln=Xa(ge,wt,te-di,te+nc,0,Ct.minX,Ct.maxX,He),Br=Xa(ge,wt,te+tc,te+mt,0,Ct.minX,Ct.maxX,He),ge=null,Ln&&(In=Xa(Ln,wt,me-di,me+nc,1,Ct.minY,Ct.maxY,He),zn=Xa(Ln,wt,me+tc,me+mt,1,Ct.minY,Ct.maxY,He),Ln=null),Br&&(tr=Xa(Br,wt,me-di,me+nc,1,Ct.minY,Ct.maxY,He),Pr=Xa(Br,wt,me+tc,me+mt,1,Ct.minY,Ct.maxY,He),Br=null),nt>1&&console.timeEnd("clipping"),Xe.push(In||[],K+1,2*te,2*me),Xe.push(zn||[],K+1,2*te,2*me+1),Xe.push(tr||[],K+1,2*te+1,2*me),Xe.push(Pr||[],K+1,2*te+1,2*me+1)}}},vu.prototype.getTile=function(ge,K,te){var me=this.options,Te=me.extent,Ve=me.debug;if(ge<0||ge>24)return null;var Ze=1<<ge,Xe=da(ge,K=(K%Ze+Ze)%Ze,te);if(this.tiles[Xe])return ec(this.tiles[Xe],Te);Ve>1&&console.log("drilling down to z%d-%d-%d",ge,K,te);for(var He,nt=ge,wt=K,sn=te;!He&&nt>0;)nt--,wt=Math.floor(wt/2),sn=Math.floor(sn/2),He=this.tiles[da(nt,wt,sn)];return He&&He.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",nt,wt,sn),Ve>1&&console.time("drilling down"),this.splitTile(He.source,nt,wt,sn,ge,K,te),Ve>1&&console.timeEnd("drilling down"),this.tiles[Xe]?ec(this.tiles[Xe],Te):null):null};class Bf extends _.VectorTileWorkerSource{constructor(K,te,me,Te,Ve){super(K,te,me,Te,xu),Ve&&(this.loadGeoJSON=Ve)}loadData(K,te){const me=K&&K.request,Te=me&&me.collectResourceTiming;this.loadGeoJSON(K,(Ve,Ze)=>{if(Ve||!Ze)return te(Ve);if("object"!=typeof Ze)return te(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{Qn(Ze,!0);try{if(K.filter){const He=_.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===He.result)throw new Error(He.value.map(wt=>`${wt.key}: ${wt.message}`).join(", "));Ze={type:"FeatureCollection",features:Ze.features.filter(wt=>He.value.evaluate({zoom:0},wt))}}this._geoJSONIndex=K.cluster?new Aa(function({superclusterOptions:He,clusterProperties:nt}){if(!nt||!He)return He;const wt={},sn={},Ct={accumulated:null,zoom:0},kn={properties:null},vn=Object.keys(nt);for(const In of vn){const[zn,tr]=nt[In],Pr=_.createExpression(tr),Ln=_.createExpression("string"==typeof zn?[zn,["accumulated"],["get",In]]:zn);wt[In]=Pr.value,sn[In]=Ln.value}return He.map=In=>{kn.properties=In;const zn={};for(const tr of vn)zn[tr]=wt[tr].evaluate(Ct,kn);return zn},He.reduce=(In,zn)=>{kn.properties=zn;for(const tr of vn)Ct.accumulated=In[tr],In[tr]=sn[tr].evaluate(Ct,kn)},He}(K)).load(Ze.features):new vu(He=Ze,K.geojsonVtOptions)}catch(He){return te(He)}this.loaded={};const Xe={};if(Te){const He=_.getPerformanceMeasurement(me);He&&(Xe.resourceTiming={},Xe.resourceTiming[K.source]=JSON.parse(JSON.stringify(He)))}te(null,Xe)}var He})}reloadTile(K,te){const me=this.loaded;return me&&me[K.uid]?super.reloadTile(K,te):this.loadTile(K,te)}loadGeoJSON(K,te){if(K.request)_.getJSON(K.request,te);else{if("string"!=typeof K.data)return te(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));try{return te(null,JSON.parse(K.data))}catch{return te(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(K,te){try{te(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(me){te(me)}}getClusterChildren(K,te){try{te(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(me){te(me)}}getClusterLeaves(K,te){try{te(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(me){te(me)}}}class bu{constructor(K){this.self=K,this.actor=new _.Actor(K,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=_.getProjection({name:"mercator"}),this.workerSourceTypes={vector:_.VectorTileWorkerSource,geojson:Bf},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(te,me)=>{if(this.workerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.workerSourceTypes[te]=me},this.self.registerRTLTextPlugin=te=>{if(_.plugin.isParsed())throw new Error("RTL text plugin already registered.");_.plugin.applyArabicShaping=te.applyArabicShaping,_.plugin.processBidirectionalText=te.processBidirectionalText,_.plugin.processStyledBidirectionalText=te.processStyledBidirectionalText}}clearCaches(K,te,me){delete this.layerIndexes[K],delete this.availableImages[K],delete this.workerSources[K],delete this.demWorkerSources[K],me()}checkIfReady(K,te,me){me()}setReferrer(K,te){this.referrer=te}spriteLoaded(K,te){this.isSpriteLoaded[K]=te;for(const me in this.workerSources[K]){const Te=this.workerSources[K][me];for(const Ve in Te)Te[Ve]instanceof _.VectorTileWorkerSource&&(Te[Ve].isSpriteLoaded=te,Te[Ve].fire(new _.Event("isSpriteLoaded")))}}setImages(K,te,me){this.availableImages[K]=te;for(const Te in this.workerSources[K]){const Ve=this.workerSources[K][Te];for(const Ze in Ve)Ve[Ze].availableImages=te}me()}enableTerrain(K,te,me){this.terrain=te,me()}setProjection(K,te){this.projections[K]=_.getProjection(te)}setLayers(K,te,me){this.getLayerIndex(K).replace(te),me()}updateLayers(K,te,me){this.getLayerIndex(K).update(te.layers,te.removedIds),me()}loadTile(K,te,me){const Te=this.enableTerrain?_.extend({enableTerrain:this.terrain},te):te;Te.projection=this.projections[K]||this.defaultProjection,this.getWorkerSource(K,te.type,te.source).loadTile(Te,me)}loadDEMTile(K,te,me){const Te=this.enableTerrain?_.extend({buildQuadTree:this.terrain},te):te;this.getDEMWorkerSource(K,te.source).loadTile(Te,me)}reloadTile(K,te,me){const Te=this.enableTerrain?_.extend({enableTerrain:this.terrain},te):te;Te.projection=this.projections[K]||this.defaultProjection,this.getWorkerSource(K,te.type,te.source).reloadTile(Te,me)}abortTile(K,te,me){this.getWorkerSource(K,te.type,te.source).abortTile(te,me)}removeTile(K,te,me){this.getWorkerSource(K,te.type,te.source).removeTile(te,me)}removeSource(K,te,me){if(!this.workerSources[K]||!this.workerSources[K][te.type]||!this.workerSources[K][te.type][te.source])return;const Te=this.workerSources[K][te.type][te.source];delete this.workerSources[K][te.type][te.source],void 0!==Te.removeSource?Te.removeSource(te,me):me()}loadWorkerSource(K,te,me){try{this.self.importScripts(te.url),me()}catch(Te){me(Te.toString())}}syncRTLPluginState(K,te,me){try{_.plugin.setState(te);const Te=_.plugin.getPluginURL();if(_.plugin.isLoaded()&&!_.plugin.isParsed()&&null!=Te){this.self.importScripts(Te);const Ve=_.plugin.isParsed();me(Ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Te}`),Ve)}}catch(Te){me(Te.toString())}}getAvailableImages(K){let te=this.availableImages[K];return te||(te=[]),te}getLayerIndex(K){let te=this.layerIndexes[K];return te||(te=this.layerIndexes[K]=new Ya),te}getWorkerSource(K,te,me){return this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][te]||(this.workerSources[K][te]={}),this.workerSources[K][te][me]||(this.workerSources[K][te][me]=new this.workerSourceTypes[te]({send:(Ve,Ze,Xe,He,nt,wt)=>{this.actor.send(Ve,Ze,Xe,K,nt,wt)},scheduler:this.actor.scheduler},this.getLayerIndex(K),this.getAvailableImages(K),this.isSpriteLoaded[K])),this.workerSources[K][te][me]}getDEMWorkerSource(K,te){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][te]||(this.demWorkerSources[K][te]=new lr),this.demWorkerSources[K][te]}enforceCacheSizeLimit(K,te){_.enforceCacheSizeLimit(te)}getWorkerPerformanceMetrics(K,te,me){me(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new bu(self)),bu}),c0(0,function(_){function Et(v,h){if(Array.isArray(v)){if(!Array.isArray(h)||v.length!==h.length)return!1;for(let p=0;p<v.length;p++)if(!Et(v[p],h[p]))return!1;return!0}if("object"==typeof v&&null!==v&&null!==h){if("object"!=typeof h||Object.keys(v).length!==Object.keys(h).length)return!1;for(const p in v)if(!Et(v[p],h[p]))return!1;return!0}return v===h}var ql=Ya;function Ya(v){return h=v,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var b,C,S=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(S);try{C=new Worker(O),b=!0}catch{b=!1}return C&&C.terminate(),URL.revokeObjectURL(O),b}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var b=document.createElement("canvas");b.width=b.height=1;var C=b.getContext("2d");if(!C)return!1;var S=C.getImageData(0,0,1,1);return S&&S.width===b.width}()||(void 0===lr[p=h&&h.failIfMajorPerformanceCaveat]&&(lr[p]=function(b){var C,O,R,z,S=(O=b,R=document.createElement("canvas"),(z=Object.create(Ya.webGLContextAttributes)).failIfMajorPerformanceCaveat=O,R.getContext("webgl",z)||R.getContext("experimental-webgl",z));if(!S)return!1;try{C=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!C||S.isContextLost())&&(S.shaderSource(C,"void main() {}"),S.compileShader(C),!0===S.getShaderParameter(C,S.COMPILE_STATUS))}(p)),!lr[p]||document.documentMode));var h,p}var lr={};function Qn(v,h,p){const b=_.window.document.createElement(v);return void 0!==h&&(b.className=h),p&&p.appendChild(b),b}function Ls(v,h,p){const b=_.window.document.createElementNS("http://www.w3.org/2000/svg",v);for(const C of Object.keys(h))b.setAttributeNS(null,C,h[C]);return p&&p.appendChild(b),b}Ya.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Eo=_.window.document&&_.window.document.documentElement.style,ka=Eo&&void 0!==Eo.userSelect?"userSelect":"WebkitUserSelect";let Df;function Mf(){Eo&&ka&&(Df=Eo[ka],Eo[ka]="none")}function bl(){Eo&&ka&&(Eo[ka]=Df)}function pu(v){v.preventDefault(),v.stopPropagation(),_.window.removeEventListener("click",pu,!0)}function qa(){_.window.addEventListener("click",pu,!0),_.window.setTimeout(()=>{_.window.removeEventListener("click",pu,!0)},0)}function Xt(v,h){const p=v.getBoundingClientRect();return mh(v,p,h)}function wl(v,h){const p=v.getBoundingClientRect(),b=[];for(let C=0;C<h.length;C++)b.push(mh(v,p,h[C]));return b}function ph(v){return void 0!==_.window.InstallTrigger&&2===v.button&&v.ctrlKey&&_.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function mh(v,h,p){const b=v.offsetWidth===h.width?1:v.offsetWidth/h.width;return new _.pointGeometry((p.clientX-h.left)*b,(p.clientY-h.top)*b)}function Cr(v,h){var p=h[0],b=h[1],C=h[2],S=h[3],O=p*S-C*b;return O?(v[0]=S*(O=1/O),v[1]=-b*O,v[2]=-C*O,v[3]=p*O,v):null}function Hs(v){const{userImage:h}=v;return!!(h&&h.render&&h.render())&&(v.data.replace(new Uint8Array(h.data.buffer)),!0)}class Dc extends _.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new _.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(h){if(this.loaded!==h&&(this.loaded=h,h)){for(const{ids:p,callback:b}of this.requestors)this._notify(p,b);this.requestors=[]}}hasImage(h){return!!this.getImage(h)}getImage(h){return this.images[h]}addImage(h,p){this._validate(h,p)&&(this.images[h]=p)}_validate(h,p){let b=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new _.ErrorEvent(new Error(`Image "${h}" has invalid "stretchX" value`))),b=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new _.ErrorEvent(new Error(`Image "${h}" has invalid "stretchY" value`))),b=!1),this._validateContent(p.content,p)||(this.fire(new _.ErrorEvent(new Error(`Image "${h}" has invalid "content" value`))),b=!1),b}_validateStretch(h,p){if(!h)return!0;let b=0;for(const C of h){if(C[0]<b||C[1]<C[0]||p<C[1])return!1;b=C[1]}return!0}_validateContent(h,p){return!(h&&(4!==h.length||h[0]<0||p.data.width<h[0]||h[1]<0||p.data.height<h[1]||h[2]<0||p.data.width<h[2]||h[3]<0||p.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))}updateImage(h,p){p.version=this.images[h].version+1,this.images[h]=p,this.updatedImages[h]=!0}removeImage(h){const p=this.images[h];delete this.images[h],delete this.patterns[h],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(h,p){let b=!0;if(!this.isLoaded())for(const C of h)this.images[C]||(b=!1);this.isLoaded()||b?this._notify(h,p):this.requestors.push({ids:h,callback:p})}_notify(h,p){const b={};for(const C of h){this.images[C]||this.fire(new _.Event("styleimagemissing",{id:C}));const S=this.images[C];S?b[C]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:_.warnOnce(`Image "${C}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,b)}getPixelSize(){const{width:h,height:p}=this.atlasImage;return{width:h,height:p}}getPattern(h){const p=this.patterns[h],b=this.getImage(h);if(!b)return null;if(p&&p.position.version===b.version)return p.position;if(p)p.position.version=b.version;else{const C={w:b.data.width+2,h:b.data.height+2,x:0,y:0},S=new _.ImagePosition(C,b);this.patterns[h]={bin:C,position:S}}return this._updatePatternAtlas(),this.patterns[h].position}bind(h){const p=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new _.Texture(h,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const h=[];for(const S in this.patterns)h.push(this.patterns[S].bin);const{w:p,h:b}=_.potpack(h),C=this.atlasImage;C.resize({width:p||1,height:b||1});for(const S in this.patterns){const{bin:O}=this.patterns[S],R=O.x+1,z=O.y+1,H=this.images[S].data,W=H.width,J=H.height;_.RGBAImage.copy(H,C,{x:0,y:0},{x:R,y:z},{width:W,height:J}),_.RGBAImage.copy(H,C,{x:0,y:J-1},{x:R,y:z-1},{width:W,height:1}),_.RGBAImage.copy(H,C,{x:0,y:0},{x:R,y:z+J},{width:W,height:1}),_.RGBAImage.copy(H,C,{x:W-1,y:0},{x:R-1,y:z},{width:1,height:J}),_.RGBAImage.copy(H,C,{x:0,y:0},{x:R+W,y:z},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(h){for(const p of h){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const b=this.images[p];Hs(b)&&this.updateImage(p,b)}}}const gh=new _.Properties({anchor:new _.DataConstantProperty(_.spec.light.anchor),position:new class{constructor(){this.specification=_.spec.light.position}possiblyEvaluate(v,h){return function([p,b,C]){const S=_.degToRad(b+90),O=_.degToRad(C);return{x:p*Math.cos(S)*Math.sin(O),y:p*Math.sin(S)*Math.sin(O),z:p*Math.cos(O),azimuthal:b,polar:C}}(v.expression.evaluate(h))}interpolate(v,h,p){return{x:_.number(v.x,h.x,p),y:_.number(v.y,h.y,p),z:_.number(v.z,h.z,p),azimuthal:_.number(v.azimuthal,h.azimuthal,p),polar:_.number(v.polar,h.polar,p)}}},color:new _.DataConstantProperty(_.spec.light.color),intensity:new _.DataConstantProperty(_.spec.light.intensity)}),kf="-transition";class Af extends _.Evented{constructor(h){super(),this._transitionable=new _.Transitionable(gh),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(h,p={}){if(!this._validate(_.validateLight,h,p))for(const b in h){const C=h[b];_.endsWith(b,kf)?this._transitionable.setTransition(b.slice(0,-kf.length),C):this._transitionable.setValue(b,C)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,p,b){return(!b||!1!==b.validate)&&_.emitValidationErrors(this,h.call(_.validateStyle,_.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:_.spec})))}}const dr=new _.Properties({source:new _.DataConstantProperty(_.spec.terrain.source),exaggeration:new _.DataConstantProperty(_.spec.terrain.exaggeration)}),mu="-transition";class ha extends _.Evented{constructor(h,p){super(),this._transitionable=new _.Transitionable(dr),this.set(h),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=p}get(){return this._transitionable.serialize()}set(h){for(const p in h){const b=h[p];_.endsWith(p,mu)?this._transitionable.setTransition(p.slice(0,-mu.length),b):this._transitionable.setValue(p,b)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}}function nd(v,h,p,b){const C=_.smoothstep(45,65,p),[S,O]=Mc(v,b),R=_.length(h);let z=1-Math.min(1,Math.exp((R-S)/(O-S)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*C*v.alpha}function Mc(v,h){const p=.5/Math.tan(.5*h);return[v.range[0]+p,v.range[1]+p]}const er=new _.Properties({range:new _.DataConstantProperty(_.spec.fog.range),color:new _.DataConstantProperty(_.spec.fog.color),"high-color":new _.DataConstantProperty(_.spec.fog["high-color"]),"space-color":new _.DataConstantProperty(_.spec.fog["space-color"]),"horizon-blend":new _.DataConstantProperty(_.spec.fog["horizon-blend"]),"star-intensity":new _.DataConstantProperty(_.spec.fog["star-intensity"])}),kc="-transition";class rd extends _.Evented{constructor(h,p){super(),this._transitionable=new _.Transitionable(er),this.set(h),this._transitioning=this._transitionable.untransitioned(),this._transform=p}get state(){const h=this._transform,p="globe"===h.projection.name,b=_.globeToMercatorTransition(h.zoom),C=this.properties.get("range"),S=[.5,3];return{range:p?[_.number(S[0],C[0],b),_.number(S[1],C[1],b)]:C,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(h,p={}){if(!this._validate(_.validateFog,h,p)){for(const b of Object.keys(_.spec.fog))h&&void 0===h[b]&&(h[b]=_.spec.fog[b].default);for(const b in h){const C=h[b];_.endsWith(b,kc)?this._transitionable.setTransition(b.slice(0,-kc.length),C):this._transitionable.setValue(b,C)}}}getOpacity(h){if(!this._transform.projection.supportsFog)return 0;const p=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:_.smoothstep(45,65,h))*p.a}getOpacityAtLatLng(h,p){return this._transform.projection.supportsFog?function(b,C,S){const O=_.MercatorCoordinate.fromLngLat(C),R=S.elevation?S.elevation.getAtPointOrZero(O):0,z=[O.x,O.y,R];return _.transformMat4(z,z,S.mercatorFogMatrix),nd(b,z,S.pitch,S._fov)}(this.state,h,p):0}getFovAdjustedRange(h){return this._transform.projection.supportsFog?Mc(this.state,h):[0,1]}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,p,b){return(!b||!1!==b.validate)&&_.emitValidationErrors(this,h.call(_.validateStyle,_.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:_.spec})))}}class Xl{constructor(h,p){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=_.uniqueId();const b=this.workerPool.acquire(this.id);for(let C=0;C<b.length;C++){const S=new Xl.Actor(b[C],p,this.id);S.name=`Worker ${C}`,this.actors.push(S)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(h,p,b){_.asyncAll(this.actors,(C,S)=>{C.send(h,p,S)},b=b||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(h=>{h.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Zl(v,h,p){return h*(_.EXTENT/(v.tileSize*Math.pow(2,p-v.tileID.overscaledZ)))}Xl.Actor=_.Actor;class qi{constructor(h,p,b,C){this.screenBounds=h,this.cameraPoint=p,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=b,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,C)}static createFromScreenPoints(h,p){let b,C;if(h instanceof _.pointGeometry||"number"==typeof h[0]){const S=_.pointGeometry.convert(h);b=[S],C=p.isPointAboveHorizon(S)}else{const S=_.pointGeometry.convert(h[0]),O=_.pointGeometry.convert(h[1]);b=[S,O],C=_.polygonizeBounds(S,O).every(R=>p.isPointAboveHorizon(R))}return new qi(b,p.getCameraPoint(),C,p)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(h){return _.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],h)}bufferedCameraGeometry(h){const p=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new _.pointGeometry(1,1)):this.screenBounds[1],C=_.polygonizeBounds(p,b,0,!1);return this.cameraPoint.y>b.y&&(this.cameraPoint.x>p.x&&this.cameraPoint.x<b.x?C.splice(3,0,this.cameraPoint):this.cameraPoint.x>=b.x?C[2]=this.cameraPoint:this.cameraPoint.x<=p.x&&(C[3]=this.cameraPoint)),_.bufferConvexPolygon(C,h)}bufferedCameraGeometryGlobe(h){const p=this.screenBounds[0],b=1===this.screenBounds.length?this.screenBounds[0].add(new _.pointGeometry(1,1)):this.screenBounds[1],C=_.polygonizeBounds(p,b,h),S=this.cameraPoint.clone();switch(3*((S.y>p.y)+(S.y>b.y))+((S.x>p.x)+(S.x>b.x))){case 0:C[0]=S,C[4]=S.clone();break;case 1:C.splice(1,0,S);break;case 2:C[1]=S;break;case 3:C.splice(4,0,S);break;case 5:C.splice(2,0,S);break;case 6:C[3]=S;break;case 7:C.splice(3,0,S);break;case 8:C[2]=S}return C}containsTile(h,p,b,C=0){const S=h.queryPadding/p._pixelsPerMercatorPixel+1,O=b?this._bufferedCameraMercator(S,p):this._bufferedScreenMercator(S,p);let R=h.tileID.wrap+(O.unwrapped?C:0);const z=O.polygon.map(de=>_.getTilePoint(h.tileTransform,de,R));if(!_.polygonIntersectsBox(z,0,0,_.EXTENT,_.EXTENT))return;R=h.tileID.wrap+(this.screenGeometryMercator.unwrapped?C:0);const H=this.screenGeometryMercator.polygon.map(de=>_.getTileVec3(h.tileTransform,de,R)),W=H.map(de=>new _.pointGeometry(de[0],de[1])),J=p.getFreeCameraOptions().position||new _.MercatorCoordinate(0,0,0),re=_.getTileVec3(h.tileTransform,J,R),he=H.map(de=>{const ne=_.sub(de,de,re);return _.normalize(ne,ne),new _.Ray(re,ne)}),ue=Zl(h,1,p.zoom)*p._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:he,bufferedTilespaceGeometry:z,bufferedTilespaceBounds:(le=_.getBounds(z),le.min.x=_.clamp(le.min.x,0,_.EXTENT),le.min.y=_.clamp(le.min.y,0,_.EXTENT),le.max.x=_.clamp(le.max.x,0,_.EXTENT),le.max.y=_.clamp(le.max.y,0,_.EXTENT),le),tile:h,tileID:h.tileID,pixelToTileUnitsFactor:ue};var le}_bufferedScreenMercator(h,p){const b=yi(h);if(this._screenRaycastCache[b])return this._screenRaycastCache[b];{let C;return C="globe"===p.projection.name?this._projectAndResample(this.bufferedScreenGeometry(h),p):{polygon:this.bufferedScreenGeometry(h).map(S=>p.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[b]=C,C}}_bufferedCameraMercator(h,p){const b=yi(h);if(this._cameraRaycastCache[b])return this._cameraRaycastCache[b];{let C;return C="globe"===p.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(h),p):{polygon:this.bufferedCameraGeometry(h).map(S=>p.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[b]=C,C}}_projectAndResample(h,p){const b=function(S,O){const R=_.multiply([],O.pixelMatrix,O.globeMatrix),z=[0,-_.GLOBE_RADIUS,0,1],H=[0,_.GLOBE_RADIUS,0,1],W=[0,0,0,1];_.transformMat4$1(z,z,R),_.transformMat4$1(H,H,R),_.transformMat4$1(W,W,R);const J=new _.pointGeometry(z[0]/z[3],z[1]/z[3]),re=new _.pointGeometry(H[0]/H[3],H[1]/H[3]),he=_.polygonContainsPoint(S,J)&&z[3]<W[3],ue=_.polygonContainsPoint(S,re)&&H[3]<W[3];if(!he&&!ue)return null;const le=function(Ue,Ge,tt){for(let it=1;it<Ue.length;it++){const Ht=Cl(Ge.pointCoordinate3D(Ue[it-1]).x),Ke=Cl(Ge.pointCoordinate3D(Ue[it]).x);if(tt<0){if(Ht<Ke)return{idx:it,t:-Ht/(Ke-1-Ht)}}else if(Ke<Ht)return{idx:it,t:(1-Ht)/(Ke+1-Ht)}}return null}(S,O,he?-1:1);if(!le)return null;const{idx:de,t:ne}=le;let be=de>1?Ac(S.slice(0,de),O):[],ve=de<S.length?Ac(S.slice(de),O):[];be=be.map(Ue=>new _.pointGeometry(Cl(Ue.x),Ue.y)),ve=ve.map(Ue=>new _.pointGeometry(Cl(Ue.x),Ue.y));const Ce=[...be];0===Ce.length&&Ce.push(ve[ve.length-1]);const Be=_.number(Ce[Ce.length-1].y,(0===ve.length?be[0]:ve[0]).y,ne);let Le;return Le=he?[new _.pointGeometry(0,Be),new _.pointGeometry(0,0),new _.pointGeometry(1,0),new _.pointGeometry(1,Be)]:[new _.pointGeometry(1,Be),new _.pointGeometry(1,1),new _.pointGeometry(0,1),new _.pointGeometry(0,Be)],Ce.push(...Le),0===ve.length?Ce.push(be[0]):Ce.push(...ve),{polygon:Ce.map(Ue=>new _.MercatorCoordinate(Ue.x,Ue.y)),unwrapped:!1}}(h,p);if(b)return b;const C=function(S,O){let R=!1,z=-1/0,H=0;for(let J=0;J<S.length-1;J++)S[J].x>z&&(z=S[J].x,H=J);for(let J=0;J<S.length-1;J++){const re=(H+J)%(S.length-1),he=S[re],ue=S[re+1];Math.abs(he.x-ue.x)>.5&&(he.x<ue.x?(he.x+=1,0===re&&(S[S.length-1].x+=1)):(ue.x+=1,re+1===S.length-1&&(S[0].x+=1)),R=!0)}const W=_.mercatorXfromLng(O.center.lng);return R&&W<Math.abs(W-1)&&S.forEach(J=>{J.x-=1}),{polygon:S,unwrapped:R}}(Ac(h,p).map(S=>new _.pointGeometry(Cl(S.x),S.y)),p);return{polygon:C.polygon.map(S=>new _.MercatorCoordinate(S.x,S.y)),unwrapped:C.unwrapped}}}function Ac(v,h){return _.resample(v,p=>{const b=h.pointCoordinate3D(p);p.x=b.x,p.y=b.y},1/256)}function Cl(v){return v<0?1+v%1:v%1}function yi(v){return 100*v|0}function ki(v,h,p,b,C){const S=function(O,R){if(O)return C(O);if(R){v.url&&R.tiles&&v.tiles&&delete v.tiles;const z=_.pick(_.extend(R,v),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);R.vector_layers&&(z.vectorLayers=R.vector_layers,z.vectorLayerIds=z.vectorLayers.map(H=>H.id)),z.tiles=h.canonicalizeTileset(z,v.url),C(null,z)}};return v.url?_.getJSON(h.transformRequest(h.normalizeSourceURL(v.url,null,p,b),_.ResourceType.Source),S):_.exported.frame(()=>S(null,v))}class Aa{constructor(h,p,b){this.bounds=_.LngLatBounds.convert(this.validateBounds(h)),this.minzoom=p||0,this.maxzoom=b||24}validateBounds(h){return Array.isArray(h)&&4===h.length?[Math.max(-180,h[0]),Math.max(-90,h[1]),Math.min(180,h[2]),Math.min(90,h[3])]:[-180,-90,180,90]}contains(h){const p=Math.pow(2,h.z),b=Math.floor(_.mercatorXfromLng(this.bounds.getWest())*p),C=Math.floor(_.mercatorYfromLat(this.bounds.getNorth())*p),S=Math.ceil(_.mercatorXfromLng(this.bounds.getEast())*p),O=Math.ceil(_.mercatorYfromLat(this.bounds.getSouth())*p);return h.x>=b&&h.x<S&&h.y>=C&&h.y<O}}class jn{constructor(h,p,b){this.context=h;const C=h.gl;this.buffer=C.createBuffer(),this.dynamicDraw=Boolean(b),this.context.unbindVAO(),h.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(h){const p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,h.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const zi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kl{constructor(h,p,b,C){this.length=p.length,this.attributes=b,this.itemSize=p.bytesPerElement,this.dynamicDraw=C,this.context=h;const S=h.gl;this.buffer=S.createBuffer(),h.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(h){const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,h.arrayBuffer)}enableAttributes(h,p){for(let b=0;b<this.attributes.length;b++){const C=p.attributes[this.attributes[b].name];void 0!==C&&h.enableVertexAttribArray(C)}}setVertexAttribPointers(h,p,b){for(let C=0;C<this.attributes.length;C++){const S=this.attributes[C],O=p.attributes[S.name];void 0!==O&&h.vertexAttribPointer(O,S.components,h[zi[S.type]],!1,this.itemSize,S.offset+this.itemSize*(b||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fr{constructor(h){this.gl=h.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(h){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jl extends Fr{getDefault(){return _.Color.transparent}set(h){const p=this.current;(h.r!==p.r||h.g!==p.g||h.b!==p.b||h.a!==p.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class gu extends Fr{getDefault(){return 1}set(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)}}class hm extends Fr{getDefault(){return 0}set(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)}}class _u extends Fr{getDefault(){return[!0,!0,!0,!0]}set(h){const p=this.current;(h[0]!==p[0]||h[1]!==p[1]||h[2]!==p[2]||h[3]!==p[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class dm extends Fr{getDefault(){return!0}set(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)}}class id extends Fr{getDefault(){return 255}set(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)}}class If extends Fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(h){const p=this.current;(h.func!==p.func||h.ref!==p.ref||h.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)}}class Tl extends Fr{getDefault(){const h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]}set(h){const p=this.current;(h[0]!==p[0]||h[1]!==p[1]||h[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)}}class Ql extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;h?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=h,this.dirty=!1}}class Pf extends Fr{getDefault(){return[0,1]}set(h){const p=this.current;(h[0]!==p[0]||h[1]!==p[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)}}class _h extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;h?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=h,this.dirty=!1}}class fm extends Fr{getDefault(){return this.gl.LESS}set(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)}}class Ic extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;h?p.enable(p.BLEND):p.disable(p.BLEND),this.current=h,this.dirty=!1}}class sd extends Fr{getDefault(){const h=this.gl;return[h.ONE,h.ZERO]}set(h){const p=this.current;(h[0]!==p[0]||h[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)}}class Of extends Fr{getDefault(){return _.Color.transparent}set(h){const p=this.current;(h.r!==p.r||h.g!==p.g||h.b!==p.b||h.a!==p.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class Lf extends Fr{getDefault(){return this.gl.FUNC_ADD}set(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)}}class Xa extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;h?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=h,this.dirty=!1}}class El extends Fr{getDefault(){return this.gl.BACK}set(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)}}class yu extends Fr{getDefault(){return this.gl.CCW}set(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)}}class od extends Fr{getDefault(){return null}set(h){(h!==this.current||this.dirty)&&(this.gl.useProgram(h),this.current=h,this.dirty=!1)}}class Ff extends Fr{getDefault(){return this.gl.TEXTURE0}set(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)}}class Rf extends Fr{getDefault(){const h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]}set(h){const p=this.current;(h[0]!==p[0]||h[1]!==p[1]||h[2]!==p[2]||h[3]!==p[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class ad extends Fr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,h),this.current=h,this.dirty=!1}}class ld extends Fr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class pm extends Fr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,h),this.current=h,this.dirty=!1}}class cd extends Fr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class ec extends Fr{getDefault(){return null}set(h){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class ud extends Fr{constructor(h){super(h),this.vao=h.extVertexArrayObject}getDefault(){return null}set(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)}}class hd extends Fr{getDefault(){return 4}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}}class Nf extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}}class yh extends Fr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}}class vu extends Fr{constructor(h,p){super(h),this.context=h,this.parent=p}getDefault(){return null}}class da extends vu{setDirty(){this.dirty=!0}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}}class xu extends vu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,this.attachment(),p.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class Bf extends xu{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class bu{constructor(h,p,b,C){this.context=h,this.width=p,this.height=b;const S=this.framebuffer=h.gl.createFramebuffer();this.colorAttachment=new da(h,S),C&&(this.depthAttachment=new xu(h,S))}destroy(){const h=this.context.gl,p=this.colorAttachment.get();if(p&&h.deleteTexture(p),this.depthAttachment){const b=this.depthAttachment.get();b&&h.deleteRenderbuffer(b)}h.deleteFramebuffer(this.framebuffer)}}class ge{constructor(h,p=!1){if(this.gl=h,this.isWebGL2=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),p){const b=h;this.extVertexArrayObject={createVertexArrayOES:b.createVertexArray.bind(h),deleteVertexArrayOES:b.deleteVertexArray.bind(h),bindVertexArrayOES:b.bindVertexArray.bind(h)}}this.clearColor=new Jl(this),this.clearDepth=new gu(this),this.clearStencil=new hm(this),this.colorMask=new _u(this),this.depthMask=new dm(this),this.stencilMask=new id(this),this.stencilFunc=new If(this),this.stencilOp=new Tl(this),this.stencilTest=new Ql(this),this.depthRange=new Pf(this),this.depthTest=new _h(this),this.depthFunc=new fm(this),this.blend=new Ic(this),this.blendFunc=new sd(this),this.blendColor=new Of(this),this.blendEquation=new Lf(this),this.cullFace=new Xa(this),this.cullFaceSide=new El(this),this.frontFace=new yu(this),this.program=new od(this),this.activeTexture=new Ff(this),this.viewport=new Rf(this),this.bindFramebuffer=new ad(this),this.bindRenderbuffer=new ld(this),this.bindTexture=new pm(this),this.bindVertexBuffer=new cd(this),this.bindElementBuffer=new ec(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ud(this),this.pixelStoreUnpack=new hd(this),this.pixelStoreUnpackPremultiplyAlpha=new Nf(this),this.pixelStoreUnpackFlipY=new yh(this),this.extTextureFilterAnisotropic=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=h.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=h.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=h.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=h.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),p||(this.extTextureHalfFloat=h.getExtension("OES_texture_half_float")),(p||this.extTextureHalfFloat&&h.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=h.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=p||h.getExtension("OES_standard_derivatives"),this.extTimerQuery=h.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=h.getParameter(h.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(h,p){return new jn(this,h,p)}createVertexBuffer(h,p,b){return new Kl(this,h,p,b)}createRenderbuffer(h,p,b){const C=this.gl,S=C.createRenderbuffer();return this.bindRenderbuffer.set(S),C.renderbufferStorage(C.RENDERBUFFER,h,p,b),this.bindRenderbuffer.set(null),S}createFramebuffer(h,p,b){return new bu(this,h,p,b)}clear({color:h,depth:p,stencil:b}){const C=this.gl;let S=0;h&&(S|=C.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),void 0!==p&&(S|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),void 0!==b&&(S|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),C.clear(S)}setCullFace(h){!1===h.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(h.mode),this.frontFace.set(h.frontFace))}setDepthMode(h){h.func!==this.gl.ALWAYS||h.mask?(this.depthTest.set(!0),this.depthFunc.set(h.func),this.depthMask.set(h.mask),this.depthRange.set(h.range)):this.depthTest.set(!1)}setStencilMode(h){h.test.func!==this.gl.ALWAYS||h.mask?(this.stencilTest.set(!0),this.stencilMask.set(h.mask),this.stencilOp.set([h.fail,h.depthFail,h.pass]),this.stencilFunc.set({func:h.test.func,ref:h.ref,mask:h.test.mask})):this.stencilTest.set(!1)}setColorMode(h){Et(h.blendFunction,_.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(h.blendFunction),this.blendColor.set(h.blendColor)),this.colorMask.set(h.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class K extends _.Evented{constructor(h,p,b,C){if(super(),this.id=h,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,_.extend(this,_.pick(p,["url","scheme","tileSize","promoteId"])),this._options=_.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C),this._tileWorkers={},this._deduped=new _.DedupedRequest}load(h){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"}));const p=Array.isArray(this.map._language)?this.map._language.join():this.map._language,b=this.map._worldview;this._tileJSONRequest=ki(this._options,this.map._requestManager,p,b,(C,S)=>{this._tileJSONRequest=null,this._loaded=!0,C?(p&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${p}`),b&&2!==b.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${b}`),this.fire(new _.ErrorEvent(C))):S&&(_.extend(this,S),S.bounds&&(this.tileBounds=new Aa(S.bounds,this.minzoom,this.maxzoom)),_.postTurnstileEvent(S.tiles,this.map._requestManager._customAccessToken),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(C)})}loaded(){return this._loaded}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return _.extend({},this._options)}loadTile(h,p){const b=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),C={request:this.map._requestManager.transformRequest(b,_.ResourceType.Tile),data:void 0,uid:h.uid,tileID:h.tileID,tileZoom:h.tileZoom,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:_.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:h.isSymbolTile};if(C.request.collectResourceTiming=this._collectResourceTiming,h.actor&&"expired"!==h.state)"loading"===h.state?h.reloadCallback=p:h.request=h.actor.send("reloadTile",C,S.bind(this));else if(h.actor=this._tileWorkers[b]=this._tileWorkers[b]||this.dispatcher.getActor(),this.dispatcher.ready)h.request=h.actor.send("loadTile",C,S.bind(this),void 0,!0);else{const O=_.loadVectorTile.call({deduped:this._deduped},C,(R,z)=>{R||!z?S.call(this,R):(C.data={cacheControl:z.cacheControl,expires:z.expires,rawData:z.rawData.slice(0)},h.actor&&h.actor.send("loadTile",C,S.bind(this),void 0,!0))},!0);h.request={cancel:O}}function S(O,R){return delete h.request,h.aborted?p(null):O&&404!==O.status?p(O):(R&&R.resourceTiming&&(h.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&h.setExpiryData(R),h.loadVectorData(R,this.map.painter),_.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}}abortTile(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id})}unloadTile(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class te extends _.Evented{constructor(h,p,b,C){super(),this.id=h,this.dispatcher=b,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=_.extend({type:"raster"},p),_.extend(this,_.pick(p,["url","scheme","tileSize"]))}load(h){this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ki(this._options,this.map._requestManager,null,null,(p,b)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new _.ErrorEvent(p)):b&&(_.extend(this,b),b.bounds&&(this.tileBounds=new Aa(b.bounds,this.minzoom,this.maxzoom)),_.postTurnstileEvent(b.tiles),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(p)})}loaded(){return this._loaded}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return _.extend({},this._options)}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}loadTile(h,p){const b=_.exported.devicePixelRatio>=2,C=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),b,this.tileSize);h.request=_.getImage(this.map._requestManager.transformRequest(C,_.ResourceType.Tile),(S,O,R,z)=>(delete h.request,h.aborted?(h.state="unloaded",p(null)):S?(h.state="errored",p(S)):O?(this.map._refreshExpiredTiles&&h.setExpiryData({cacheControl:R,expires:z}),h.setTexture(O,this.map.painter),h.state="loaded",_.cacheEntryPossiblyAdded(this.dispatcher),void p(null)):p(null)))}static loadTileData(h,p,b){h.setTexture(p,b)}static unloadTileData(h,p){h.texture&&p.saveTileTexture(h.texture)}abortTile(h,p){h.request&&(h.request.cancel(),delete h.request),p()}unloadTile(h,p){h.texture&&this.map.painter.saveTileTexture(h.texture),p()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let me;function Te(v,h,p,b,C,S,O,R){const z=[v,p,C,h,b,S,1,1,1],H=[O,R,1],W=_.adjoint([],z),[J,re,he]=_.transformMat3(H,H,_.transpose(W,W));return _.multiply$1(z,[J,0,0,0,re,0,0,0,he],z)}class Ve extends _.Evented{constructor(h,p,b,C){super(),this.id=h,this.dispatcher=b,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(C),this.options=p,this._dirty=!1}load(h,p){this._loaded=p||!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=_.getImage(this.map._requestManager.transformRequest(this.url,_.ResourceType.Image),(b,C)=>{if(this._imageRequest=null,this._loaded=!0,b)this.fire(new _.ErrorEvent(b));else if(C){const{HTMLImageElement:S}=_.window;this.image=C instanceof S?_.exported.getImageData(C):C,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,h&&(this.coordinates=h),this._finishLoading()}})}loaded(){return this._loaded}updateImage(h){return this.image&&h.url?(this._imageRequest&&h.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=h.url,this.load(h.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(h){this.map=h,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(h){this.coordinates=h,this._boundsArray=void 0;const p=h.map(_.MercatorCoordinate.fromLngLat);return this.tileID=function(b){let C=1/0,S=1/0,O=-1/0,R=-1/0;for(const J of b)C=Math.min(C,J.x),S=Math.min(S,J.y),O=Math.max(O,J.x),R=Math.max(R,J.y);const z=Math.max(O-C,R-S),H=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),W=Math.pow(2,H);return new _.CanonicalTileID(H,Math.floor((C+O)/2*W),Math.floor((S+R)/2*W))}(p),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(h){for(const z in this.tiles){const H=this.tiles[z];"loaded"!==H.state&&(H.state="loaded",H.texture=this.texture)}if(this._boundsArray)return;const p=_.tileTransform(this.tileID,this.map.transform.projection),[b,C,S,O]=this.coordinates.map(z=>{const H=p.projection.project(z[0],z[1]);return _.getTilePoint(p,H)._round()});this.perspectiveTransform=function(z,H,W,J,re,he,ue,le,de,ne){const be=Te(0,0,z,0,0,H,z,H),ve=Te(W,J,re,he,ue,le,de,ne);return _.multiply$1(ve,_.adjoint(be,be),ve),[ve[6]/ve[8]*z/_.EXTENT,ve[7]/ve[8]*H/_.EXTENT]}(this.width,this.height,b.x,b.y,C.x,C.y,O.x,O.y,S.x,S.y);const R=this._boundsArray=new _.StructArrayLayout4i8;R.emplaceBack(b.x,b.y,0,0),R.emplaceBack(C.x,C.y,_.EXTENT,0),R.emplaceBack(O.x,O.y,0,_.EXTENT),R.emplaceBack(S.x,S.y,_.EXTENT,_.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=h.createVertexBuffer(R,_.boundsAttributes.members),this.boundsSegments=_.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const h=this.map.painter.context,p=h.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new _.Texture(h,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(h)}loadTile(h,p){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},p(null)):(h.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ze={vector:K,raster:te,"raster-dem":class extends te{constructor(v,h,p,b){super(v,h,p,b),this.type="raster-dem",this.maxzoom=22,this._options=_.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}loadTile(v,h){const p=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function b(C,S){C&&(v.state="errored",h(C)),S&&(v.dem=S,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",h(null))}v.request=_.getImage(this.map._requestManager.transformRequest(p,_.ResourceType.Tile),function(C,S,O,R){if(delete v.request,v.aborted)v.state="unloaded",h(null);else if(C)v.state="errored",h(C);else if(S){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:O,expires:R});const z=_.window.ImageBitmap&&S instanceof _.window.ImageBitmap&&(null==me&&(me=_.window.OffscreenCanvas&&new _.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof _.window.createImageBitmap),me),H=1-(S.width-_.prevPowerOfTwo(S.width))/2;H<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const W=z?S:_.exported.getImageData(S,H),J={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:W,encoding:this.encoding,padding:H};v.actor&&"expired"!==v.state||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",J,b.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(v){const h=v.canonical,p=Math.pow(2,h.z),b=(h.x-1+p)%p,C=0===h.x?v.wrap-1:v.wrap,S=(h.x+1+p)%p,O=h.x+1===p?v.wrap+1:v.wrap,R={};return R[new _.OverscaledTileID(v.overscaledZ,C,h.z,b,h.y).key]={backfilled:!1},R[new _.OverscaledTileID(v.overscaledZ,O,h.z,S,h.y).key]={backfilled:!1},h.y>0&&(R[new _.OverscaledTileID(v.overscaledZ,C,h.z,b,h.y-1).key]={backfilled:!1},R[new _.OverscaledTileID(v.overscaledZ,v.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},R[new _.OverscaledTileID(v.overscaledZ,O,h.z,S,h.y-1).key]={backfilled:!1}),h.y+1<p&&(R[new _.OverscaledTileID(v.overscaledZ,C,h.z,b,h.y+1).key]={backfilled:!1},R[new _.OverscaledTileID(v.overscaledZ,v.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},R[new _.OverscaledTileID(v.overscaledZ,O,h.z,S,h.y+1).key]={backfilled:!1}),R}unloadTile(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded"}},geojson:class extends _.Evented{constructor(v,h,p,b){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(b),this._data=h.data,this._options=_.extend({},h),this._collectResourceTiming=h.collectResourceTiming,void 0!==h.maxzoom&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const C=_.EXTENT/this.tileSize;this.workerOptions=_.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(void 0!==h.buffer?h.buffer:128)*C,tolerance:(void 0!==h.tolerance?h.tolerance:.375)*C,extent:_.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:void 0!==h.clusterMaxZoom?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:_.EXTENT,radius:(void 0!==h.clusterRadius?h.clusterRadius:50)*C,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}getClusterExpansionZoom(v,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},h),this}getClusterChildren(v,h){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},h),this}getClusterLeaves(v,h,p,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:h,offset:p},b),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new _.Event("dataloading",{dataType:"source"})),this._loaded=!1;const v=_.extend({},this.workerOptions),h=this._data;"string"==typeof h?(v.request=this.map._requestManager.transformRequest(_.exported.resolveURL(h),_.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(h),this._pendingLoad=this.actor.send(`${this.type}.loadData`,v,(p,b)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new _.ErrorEvent(p));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&b&&b.resourceTiming&&b.resourceTiming[this.id]&&(C.resourceTiming=b.resourceTiming[this.id]),this.fire(new _.Event("data",C)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,h){const p=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(p,{type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:_.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(b,C)=>(delete v.request,v.unloadVectorData(),v.aborted?h(null):b?h(b):(v.loadVectorData(C,this.map.painter,"reloadTile"===p),h(null))),void 0,"loadTile"===p)}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return _.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ve{constructor(v,h,p,b){super(v,h,p,b),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const h of v.urls)this.urls.push(this.map._requestManager.transformRequest(h,_.ResourceType.Source).url);_.getVideo(this.urls,(h,p)=>{this._loaded=!0,h?this.fire(new _.ErrorEvent(h)):p&&(this.video=p,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const h=this.video.seekable;v<h.start(0)||v>h.end(0)?this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const v=this.map.painter.context,h=v.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new _.Texture(v,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ve,canvas:class extends Ve{constructor(v,h,p,b){super(v,h,p,b),h.coordinates?Array.isArray(h.coordinates)&&4===h.coordinates.length&&!h.coordinates.some(C=>!Array.isArray(C)||2!==C.length||C.some(S=>"number"!=typeof S))||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${v}`,null,'missing required property "coordinates"'))),h.animate&&"boolean"!=typeof h.animate&&this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),h.canvas?"string"==typeof h.canvas||h.canvas instanceof _.window.HTMLCanvasElement||this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new _.ErrorEvent(new _.ValidationError(`sources.${v}`,null,'missing required property "canvas"'))),this.options=h,this.animate=void 0===h.animate||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof _.window.HTMLCanvasElement?this.options.canvas:_.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new _.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const h=this.map.painter.context;this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new _.Texture(h,this.canvas,h.gl.RGBA,{premultiply:!0}),this._prepareData(h)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends _.Evented{constructor(v,h,p,b){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=p,this._implementation=h,this.setEventedParent(b),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new _.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new _.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Aa(this._implementation.bounds,this.minzoom,this.maxzoom)),h.update=this._update.bind(this),h.clearTiles=this._clearTiles.bind(this),h.coveringTiles=this._coveringTiles.bind(this),_.extend(this,_.pick(h,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return _.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new _.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this._map=v,this._loaded=!1,this.fire(new _.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:h,y:p,z:b}=v.canonical;return this._implementation.hasTile({x:h,y:p,z:b})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,h){const{x:p,y:b,z:C}=v.tileID.canonical,S=new _.window.AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:p,y:b,z:C},{signal:S.signal})).then(function(O){return delete v.request,v.aborted?(v.state="unloaded",h(null)):void 0===O?(v.state="errored",h(null)):null===O?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",h(null)):(R=O)instanceof _.window.ImageData||R instanceof _.window.HTMLCanvasElement||R instanceof _.window.ImageBitmap||R instanceof _.window.HTMLImageElement?(this.loadTileData(v,O),v.state="loaded",void h(null)):(v.state="errored",h(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)));var R}.bind(this)).catch(O=>{20!==O.code&&(v.state="errored",h(O))}),v.request.cancel=()=>S.abort()}loadTileData(v,h){te.loadTileData(v,h,this._map.painter)}unloadTileData(v){te.unloadTileData(v,this._map.painter)}unloadTile(v,h){if(this.unloadTileData(v),this._implementation.unloadTile){const{x:p,y:b,z:C}=v.tileID.canonical;this._implementation.unloadTile({x:p,y:b,z:C})}h()}abortTile(v,h){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),h()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new _.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Xe=function(v,h,p,b){const C=new Ze[h.type](v,h,p,b);if(C.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${C.id}`);return _.bindAll(["load","abort","unload","serialize","prepare"],C),C};function He(v,h){const p=_.identity([]);return _.scale(p,p,[.5*v.width,.5*-v.height,1]),_.translate(p,p,[1,-1,0]),_.multiply(p,p,v.calculateProjMatrix(h.toUnwrapped())),Float32Array.from(p)}function nt(v,h,p,b,C,S,O,R=!1){const z=v.tilesIn(b,O,R);z.sort(sn);const H=[];for(const J of z)H.push({wrappedTileID:J.tile.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(h,p,v._state,J,C,S,He(v.transform,J.tile.tileID),R)});const W=function(J){const re={},he={};for(const ue of J){const le=ue.queryResults,de=ue.wrappedTileID,ne=he[de]=he[de]||{};for(const be in le){const ve=le[be],Ce=ne[be]=ne[be]||{},Be=re[be]=re[be]||[];for(const Le of ve)Ce[Le.featureIndex]||(Ce[Le.featureIndex]=!0,Be.push(Le))}}return re}(H);for(const J in W)W[J].forEach(re=>{const he=re.feature,ue=he.layer;ue&&"background"!==ue.type&&"sky"!==ue.type&&(he.source=ue.source,ue["source-layer"]&&(he.sourceLayer=ue["source-layer"]),he.state=void 0!==he.id?v.getFeatureState(ue["source-layer"],he.id):{})});return W}function wt(v,h){const p=v.getRenderableIds().map(S=>v.getTileByID(S)),b=[],C={};for(let S=0;S<p.length;S++){const O=p[S],R=O.tileID.canonical.key;C[R]||(C[R]=!0,O.querySourceFeatures(b,h))}return b}function sn(v,h){const p=v.tileID,b=h.tileID;return p.overscaledZ-b.overscaledZ||p.canonical.y-b.canonical.y||p.wrap-b.wrap||p.canonical.x-b.canonical.x}function Ct(){return null!=dp.workerClass?new dp.workerClass:new _.window.Worker(dp.workerUrl)}const kn="mapboxgl_preloaded_worker_pool";class vn{constructor(){this.active={}}acquire(h){if(!this.workers)for(this.workers=[];this.workers.length<vn.workerCount;)this.workers.push(new Ct);return this.active[h]=!0,this.workers.slice()}release(h){delete this.active[h],0===this.numActive()&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kn]}numActive(){return Object.keys(this.active).length}}let In;function zn(){return In||(In=new vn),In}function tr(v,h){const p={};for(const b in v)"ref"!==b&&(p[b]=v[b]);return _.refProperties.forEach(b=>{b in h&&(p[b]=h[b])}),p}function Pr(v){v=v.slice();const h=Object.create(null);for(let p=0;p<v.length;p++)h[v[p].id]=v[p];for(let p=0;p<v.length;p++)"ref"in v[p]&&(v[p]=tr(v[p],h[v[p].ref]));return v}vn.workerCount=2;const Ln={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Br(v,h,p){p.push({command:Ln.addSource,args:[v,h[v]]})}function di(v,h,p){h.push({command:Ln.removeSource,args:[v]}),p[v]=!0}function tc(v,h,p,b){di(v,p,b),Br(v,h,p)}function nc(v,h,p){let b;for(b in v[p])if(v[p].hasOwnProperty(b)&&"data"!==b&&!Et(v[p][b],h[p][b]))return!1;for(b in h[p])if(h[p].hasOwnProperty(b)&&"data"!==b&&!Et(v[p][b],h[p][b]))return!1;return!0}function mt(v,h,p,b,C,S){let O;for(O in h=h||{},v=v||{})v.hasOwnProperty(O)&&(Et(v[O],h[O])||p.push({command:S,args:[b,O,h[O],C]}));for(O in h)h.hasOwnProperty(O)&&!v.hasOwnProperty(O)&&(Et(v[O],h[O])||p.push({command:S,args:[b,O,h[O],C]}))}function Pc(v){return v.id}function os(v,h){return v[h.id]=h,v}class wu{constructor(h,p){this.reset(h,p)}reset(h,p){this.points=h||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(h){if(1===this.points.length)return this.points[0];h=_.clamp(h,0,1);let p=1,b=this._distances[p];const C=h*this.paddedLength+this.padding;for(;b<C&&p<this._distances.length;)b=this._distances[++p];const S=p-1,O=this._distances[S],R=b-O,z=R>0?(C-O)/R:0;return this.points[S].mult(1-z).add(this.points[p].mult(z))}}class u0{constructor(h,p,b){const C=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(h/b),this.yCellCount=Math.ceil(p/b);for(let O=0;O<this.xCellCount*this.yCellCount;O++)C.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=h,this.height=p,this.xScale=this.xCellCount/h,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(h,p,b,C,S){this._forEachCell(p,b,C,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(h),this.bboxes.push(p),this.bboxes.push(b),this.bboxes.push(C),this.bboxes.push(S)}insertCircle(h,p,b,C){this._forEachCell(p-C,b-C,p+C,b+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(h),this.circles.push(p),this.circles.push(b),this.circles.push(C)}_insertBoxCell(h,p,b,C,S,O){this.boxCells[S].push(O)}_insertCircleCell(h,p,b,C,S,O){this.circleCells[S].push(O)}_query(h,p,b,C,S,O){if(b<0||h>this.width||C<0||p>this.height)return!S&&[];const R=[];if(h<=0&&p<=0&&this.width<=b&&this.height<=C){if(S)return!0;for(let z=0;z<this.boxKeys.length;z++)R.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const H=this.circles[3*z],W=this.circles[3*z+1],J=this.circles[3*z+2];R.push({key:this.circleKeys[z],x1:H-J,y1:W-J,x2:H+J,y2:W+J})}return O?R.filter(O):R}return this._forEachCell(h,p,b,C,this._queryCell,R,{hitTest:S,seenUids:{box:{},circle:{}}},O),S?R.length>0:R}_queryCircle(h,p,b,C,S){const O=h-b,R=h+b,z=p-b,H=p+b;if(R<0||O>this.width||H<0||z>this.height)return!C&&[];const W=[];return this._forEachCell(O,z,R,H,this._queryCellCircle,W,{hitTest:C,circle:{x:h,y:p,radius:b},seenUids:{box:{},circle:{}}},S),C?W.length>0:W}query(h,p,b,C,S){return this._query(h,p,b,C,!1,S)}hitTest(h,p,b,C,S){return this._query(h,p,b,C,!0,S)}hitTestCircle(h,p,b,C){return this._queryCircle(h,p,b,!0,C)}_queryCell(h,p,b,C,S,O,R,z){const H=R.seenUids,W=this.boxCells[S];if(null!==W){const re=this.bboxes;for(const he of W)if(!H.box[he]){H.box[he]=!0;const ue=4*he;if(h<=re[ue+2]&&p<=re[ue+3]&&b>=re[ue+0]&&C>=re[ue+1]&&(!z||z(this.boxKeys[he]))){if(R.hitTest)return O.push(!0),!0;O.push({key:this.boxKeys[he],x1:re[ue],y1:re[ue+1],x2:re[ue+2],y2:re[ue+3]})}}}const J=this.circleCells[S];if(null!==J){const re=this.circles;for(const he of J)if(!H.circle[he]){H.circle[he]=!0;const ue=3*he;if(this._circleAndRectCollide(re[ue],re[ue+1],re[ue+2],h,p,b,C)&&(!z||z(this.circleKeys[he]))){if(R.hitTest)return O.push(!0),!0;{const le=re[ue],de=re[ue+1],ne=re[ue+2];O.push({key:this.circleKeys[he],x1:le-ne,y1:de-ne,x2:le+ne,y2:de+ne})}}}}}_queryCellCircle(h,p,b,C,S,O,R,z){const H=R.circle,W=R.seenUids,J=this.boxCells[S];if(null!==J){const he=this.bboxes;for(const ue of J)if(!W.box[ue]){W.box[ue]=!0;const le=4*ue;if(this._circleAndRectCollide(H.x,H.y,H.radius,he[le+0],he[le+1],he[le+2],he[le+3])&&(!z||z(this.boxKeys[ue])))return O.push(!0),!0}}const re=this.circleCells[S];if(null!==re){const he=this.circles;for(const ue of re)if(!W.circle[ue]){W.circle[ue]=!0;const le=3*ue;if(this._circlesCollide(he[le],he[le+1],he[le+2],H.x,H.y,H.radius)&&(!z||z(this.circleKeys[ue])))return O.push(!0),!0}}}_forEachCell(h,p,b,C,S,O,R,z){const H=this._convertToXCellCoord(h),W=this._convertToYCellCoord(p),J=this._convertToXCellCoord(b),re=this._convertToYCellCoord(C);for(let he=H;he<=J;he++)for(let ue=W;ue<=re;ue++)if(S.call(this,h,p,b,C,this.xCellCount*ue+he,O,R,z))return}_convertToXCellCoord(h){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(h*this.xScale)))}_convertToYCellCoord(h){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(h*this.yScale)))}_circlesCollide(h,p,b,C,S,O){const R=C-h,z=S-p,H=b+O;return H*H>R*R+z*z}_circleAndRectCollide(h,p,b,C,S,O,R){const z=(O-C)/2,H=Math.abs(h-(C+z));if(H>z+b)return!1;const W=(R-S)/2,J=Math.abs(p-(S+W));if(J>W+b)return!1;if(H<=z||J<=W)return!0;const re=H-z,he=J-W;return re*re+he*he<=b*b}}const rc=Math.tan(85*Math.PI/180);function dd(v,h,p,b,C,S,O){const R=_.create();if(p)if("globe"===S.name){const z=_.calculateGlobeLabelMatrix(C,h);_.multiply(R,R,z)}else{const z=Cr([],O);R[0]=z[0],R[1]=z[1],R[4]=z[2],R[5]=z[3],b||_.rotateZ(R,R,C.angle)}else _.multiply(R,C.labelPlaneMatrix,v);return R}function as(v,h,p,b,C,S,O){const R=dd(v,h,p,b,C,S,O);return"globe"===S.name&&p||(R[2]=R[6]=R[10]=R[14]=0),R}function Oc(v,h,p,b,C,S,O){if(p){if("globe"===S.name){const R=dd(v,h,p,b,C,S,O);return _.invert(R,R),_.multiply(R,v,R),R}{const R=_.clone(v),z=_.identity([]);return z[0]=O[0],z[1]=O[1],z[4]=O[2],z[5]=O[3],_.multiply(R,R,z),b||_.rotateZ(R,R,-C.angle),R}}return C.glCoordMatrix}function Kt(v,h,p,b){const C=[v,h,p,1];p?_.transformMat4$1(C,C,b):Ax(C,C,b);const S=C[3];return C[0]/=S,C[1]/=S,C[2]/=S,C}function fr(v,h){return Math.min(.5+v/h*.5,1.5)}function Sn(v,h){const p=v[0]/v[3],b=v[1]/v[3];return p>=-h[0]&&p<=h[0]&&b>=-h[1]&&b<=h[1]}function Za(v,h,p,b,C,S,O,R,z,H){const W=p.transform,J=b?v.textSizeData:v.iconSizeData,re=_.evaluateSizeForZoom(J,p.transform.zoom),he="globe"===W.projection.name,ue=[256/p.width*2+1,256/p.height*2+1],le=b?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;le.clear();let de=null;he&&(de=b?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const ne=v.lineVertexArray,be=b?v.text.placedSymbolArray:v.icon.placedSymbolArray,ve=p.transform.width/p.transform.height;let Ce,Be=!1;for(let Le=0;Le<be.length;Le++){const Ue=be.get(Le),{numGlyphs:Ge,writingMode:tt}=Ue;if(tt!==_.WritingMode.vertical||Be||Ce===_.WritingMode.horizontal||(Be=!0),Ce=tt,(Ue.hidden||tt===_.WritingMode.vertical)&&!Be){fi(Ge,le);continue}Be=!1;const it=new _.pointGeometry(Ue.tileAnchorX,Ue.tileAnchorY);let{x:Ht,y:Ke,z:Tt}=W.projection.projectTilePoint(it.x,it.y,H.canonical);if(z){const[sr,yn,rn]=z(it);Ht+=sr,Ke+=yn,Tt+=rn}const at=[Ht,Ke,Tt,1];if(_.transformMat4$1(at,at,h),!Sn(at,ue)){fi(Ge,le);continue}const Ot=fr(p.transform.cameraToCenterDistance,at[3]),st=_.evaluateSizeForFeature(J,re,Ue),Ye=O?st/Ot:st*Ot,ot=Kt(Ht,Ke,Tt,C);if(ot[3]<=0){fi(Ge,le);continue}let kt={};const Nt=O?null:z,wn=zf(Ue,Ye,!1,R,h,C,S,v.glyphOffsetArray,ne,le,de,ot,it,kt,ve,Nt,W.projection,H,O);Be=wn.useVertical,Nt&&wn.needsFlipping&&(kt={}),(wn.notEnoughRoom||Be||wn.needsFlipping&&zf(Ue,Ye,!0,R,h,C,S,v.glyphOffsetArray,ne,le,de,ot,it,kt,ve,Nt,W.projection,H,O).notEnoughRoom)&&fi(Ge,le)}b?(v.text.dynamicLayoutVertexBuffer.updateData(le),de&&v.text.globeExtVertexBuffer.updateData(de)):(v.icon.dynamicLayoutVertexBuffer.updateData(le),de&&v.icon.globeExtVertexBuffer.updateData(de))}function ii(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le){const{lineStartIndex:de,glyphStartIndex:ne,segment:be}=R,ve=ne+R.numGlyphs,Ce=de+R.lineLength,Be=h.getoffsetX(ne),Le=h.getoffsetX(ve-1),Ue=ro(v*Be,p,b,C,S,O,be,de,Ce,z,H,W,J,re,!0,he,ue,le);if(!Ue)return null;const Ge=ro(v*Le,p,b,C,S,O,be,de,Ce,z,H,W,J,re,!0,he,ue,le);return Ge?{first:Ue,last:Ge}:null}function ir(v,h,p,b){return v===_.WritingMode.horizontal&&Math.abs(b)>Math.abs(p)?{useVertical:!0}:v===_.WritingMode.vertical?b>0?{needsFlipping:!0}:null:0!==h&&(0===(C=p)||Math.abs(b/C)>rc)?1===h?{needsFlipping:!0}:null:p<0?{needsFlipping:!0}:null;var C}function zf(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le,de,ne,be){const ve=h/24,Ce=v.lineOffsetX*ve,Be=v.lineOffsetY*ve,{lineStartIndex:Le,glyphStartIndex:Ue,numGlyphs:Ge,segment:tt,writingMode:it,flipState:Ht}=v,Ke=Le+v.lineLength,Tt=at=>{if(W){const[ot,kt,Nt]=at.up,wn=H.length;_.updateGlobeVertexNormal(W,wn+0,ot,kt,Nt),_.updateGlobeVertexNormal(W,wn+1,ot,kt,Nt),_.updateGlobeVertexNormal(W,wn+2,ot,kt,Nt),_.updateGlobeVertexNormal(W,wn+3,ot,kt,Nt)}const[Ot,st,Ye]=at.point;_.addDynamicAttributes(H,Ot,st,Ye,at.angle)};if(Ge>1){const at=ii(ve,R,Ce,Be,p,J,re,v,z,S,he,le,!1,de,ne,be);if(!at)return{notEnoughRoom:!0};if(b&&!p){let[Ot,st,Ye]=at.first.point,[ot,kt,Nt]=at.last.point;[Ot,st]=Kt(Ot,st,Ye,O),[ot,kt]=Kt(ot,kt,Nt,O);const wn=ir(it,Ht,(ot-Ot)*ue,kt-st);if(v.flipState=wn&&wn.needsFlipping?1:2,wn)return wn}Tt(at.first);for(let Ot=Ue+1;Ot<Ue+Ge-1;Ot++){const st=ro(ve*R.getoffsetX(Ot),Ce,Be,p,J,re,tt,Le,Ke,z,S,he,le,!1,!1,de,ne,be);if(!st)return H.length-=4*(Ot-Ue),{notEnoughRoom:!0};Tt(st)}Tt(at.last)}else{if(b&&!p){const Ot=Kt(re.x,re.y,0,C),st=Le+tt+1,Ye=new _.pointGeometry(z.getx(st),z.gety(st)),ot=Kt(Ye.x,Ye.y,0,C),kt=ot[3]>0?ot:Vn(re,Ye,Ot,1,C,void 0,de,ne.canonical),Nt=ir(it,Ht,(kt[0]-Ot[0])*ue,kt[1]-Ot[1]);if(v.flipState=Nt&&Nt.needsFlipping?1:2,Nt)return Nt}const at=ro(ve*R.getoffsetX(Ue),Ce,Be,p,J,re,tt,Le,Ke,z,S,he,le,!1,!1,de,ne,be);if(!at)return{notEnoughRoom:!0};Tt(at)}return{}}function Rr(v,h,p,b,C){const{x:S,y:O,z:R}=b.projectTilePoint(v.x,v.y,h);if(!C)return Kt(S,O,R,p);const[z,H,W]=C(v);return Kt(S+z,O+H,R+W,p)}function Vn(v,h,p,b,C,S,O,R){const z=Rr(v.sub(h)._unit()._add(v),R,C,O,S);return _.sub(z,p,z),_.normalize(z,z),_.scaleAndAdd(z,p,z,b)}function ro(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le,de,ne){const be=b?v-h:v+h;let ve=be>0?1:-1,Ce=0;b&&(ve*=-1,Ce=Math.PI),ve<0&&(Ce+=Math.PI);let Be=R+O+(ve>0?0:1)|0,Le=C,Ue=C,Ge=0,tt=0;const it=Math.abs(be),Ht=[],Ke=[];let Tt=S,at=Tt;const Ot=()=>Vn(at,Tt,Ue,it-Ge+1,W,re,le,de.canonical);for(;Ge+tt<=it;){if(Be+=ve,Be<R||Be>=z)return null;if(Ue=Le,at=Tt,Ht.push(Ue),he&&Ke.push(at),Tt=new _.pointGeometry(H.getx(Be),H.gety(Be)),Le=J[Be],!Le){const rn=Rr(Tt,de.canonical,W,le,re);Le=rn[3]>0?J[Be]=rn:Ot()}Ge+=tt,tt=_.distance(Ue,Le)}ue&&re&&(J[Be]&&(Le=Ot(),tt=_.distance(Ue,Le)),J[Be]=Le);const st=(it-Ge)/tt,Ye=Tt.sub(at)._mult(st)._add(at),ot=_.sub([],Le,Ue),kt=_.scaleAndAdd([],Ue,ot,st);let Nt=[0,0,1],wn=ot[0],sr=ot[1];if(ne&&(Nt=le.upVector(de.canonical,Ye.x,Ye.y),0!==Nt[0]||0!==Nt[1]||1!==Nt[2])){const rn=[Nt[2],0,-Nt[0]],Cn=_.cross([],Nt,rn);_.normalize(rn,rn),_.normalize(Cn,Cn),wn=_.dot(ot,rn),sr=_.dot(ot,Cn)}if(p){const rn=_.cross([],Nt,ot);_.normalize(rn,rn),_.scaleAndAdd(kt,kt,rn,p*ve)}const yn=Ce+Math.atan2(sr,wn);return Ht.push(kt),he&&Ke.push(Ye),{point:kt,angle:yn,path:Ht,tilePath:Ke,up:Nt}}function fi(v,h){const p=h.length,b=p+4*v;h.resize(b),h.float32.fill(-1/0,4*p,4*b)}function Ax(v,h,p){const b=h[0],C=h[1];return v[0]=p[0]*b+p[4]*C+p[12],v[1]=p[1]*b+p[5]*C+p[13],v[3]=p[3]*b+p[7]*C+p[15],v}const io=100;class Mt{constructor(h,p,b=new u0(h.width+200,h.height+200,25),C=new u0(h.width+200,h.height+200,25)){this.transform=h,this.grid=b,this.ignoredGrid=C,this.pitchfactor=Math.cos(h._pitch)*h.cameraToCenterDistance,this.screenRightBoundary=h.width+io,this.screenBottomBoundary=h.height+io,this.gridRightBoundary=h.width+200,this.gridBottomBoundary=h.height+200,this.fogState=p}placeCollisionBox(h,p,b,C,S,O,R,z){let H=b.projectedAnchorX,W=b.projectedAnchorY,J=b.projectedAnchorZ;const re=b.elevation,he=b.tileID,ue=h.getProjection();if(re&&he){const[Le,Ue,Ge]=ue.upVector(he.canonical,b.tileAnchorX,b.tileAnchorY),tt=ue.upVectorScale(he.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;H+=Le*re*tt,W+=Ue*re*tt,J+=Ge*re*tt}const le=this.projectAndGetPerspectiveRatio(R,H,W,J,b.tileID,"globe"===ue.name||!!re||this.transform.pitch>0,ue),de=O*le.perspectiveRatio,ne=(b.x1*p+C.x-b.padding)*de+le.point.x,be=(b.y1*p+C.y-b.padding)*de+le.point.y,ve=(b.x2*p+C.x+b.padding)*de+le.point.x,Ce=(b.y2*p+C.y+b.padding)*de+le.point.y,Be=le.perspectiveRatio<=.55||le.occluded;return!this.isInsideGrid(ne,be,ve,Ce)||!S&&this.grid.hitTest(ne,be,ve,Ce,z)||Be?{box:[],offscreen:!1,occluded:le.occluded}:{box:[ne,be,ve,Ce],offscreen:this.isOffscreen(ne,be,ve,Ce),occluded:!1}}placeCollisionCircles(h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le){const de=[],ne=this.transform.elevation,be=h.getProjection(),ve=ne?ne.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,be):null,Ce=new _.pointGeometry(b.tileAnchorX,b.tileAnchorY);let{x:Be,y:Le,z:Ue}=be.projectTilePoint(Ce.x,Ce.y,le.canonical);if(ve){const[Ye,ot,kt]=ve(Ce);Be+=Ye,Le+=ot,Ue+=kt}const Ge="globe"===be.name,tt=this.projectAndGetPerspectiveRatio(R,Be,Le,Ue,le,Ge||!!ne||this.transform.pitch>0,be),{perspectiveRatio:it}=tt,Ht=(J?O/it:O*it)/_.ONE_EM,Ke=Kt(Be,Le,Ue,z),Tt=tt.signedDistanceFromCamera>0?ii(Ht,S,b.lineOffsetX*Ht,b.lineOffsetY*Ht,!1,Ke,Ce,b,C,z,{},ne&&!J?ve:null,J&&!!ne,be,le,J):null;let at=!1,Ot=!1,st=!0;if(Tt&&!tt.occluded){const Ye=.5*he*it+ue,ot=new _.pointGeometry(-100,-100),kt=new _.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Nt=new wu,{first:wn,last:sr}=Tt,yn=wn.path.length;let rn=[];for(let En=yn-1;En>=1;En--)rn.push(wn.path[En]);for(let En=1;En<sr.path.length;En++)rn.push(sr.path[En]);const Cn=2.5*Ye;H&&(rn=rn.map(([En,jr,oi],ai)=>(ve&&!Ge&&(oi=ve(ai<yn-1?wn.tilePath[yn-1-ai]:sr.tilePath[ai-yn+2])[2]),Kt(En,jr,oi,H))),rn.some(En=>En[3]<=0)&&(rn=[]));let mr=[];if(rn.length>0){let En=1/0,jr=-1/0,oi=1/0,ai=-1/0;for(const xi of rn)En=Math.min(En,xi[0]),oi=Math.min(oi,xi[1]),jr=Math.max(jr,xi[0]),ai=Math.max(ai,xi[1]);jr>=ot.x&&En<=kt.x&&ai>=ot.y&&oi<=kt.y&&(mr=[rn.map(xi=>new _.pointGeometry(xi[0],xi[1]))],(En<ot.x||jr>kt.x||oi<ot.y||ai>kt.y)&&(mr=_.clipLine(mr,ot.x,ot.y,kt.x,kt.y)))}for(const En of mr){Nt.reset(En,.25*Ye);let jr=0;jr=Nt.length<=.5*Ye?1:Math.ceil(Nt.paddedLength/Cn)+1;for(let oi=0;oi<jr;oi++){const ai=oi/Math.max(jr-1,1),xi=Nt.lerp(ai),Wi=xi.x+io,Po=xi.y+io;de.push(Wi,Po,Ye,0);const ga=Wi-Ye,Au=Po-Ye,Ii=Wi+Ye,pi=Po+Ye;if(st=st&&this.isOffscreen(ga,Au,Ii,pi),Ot=Ot||this.isInsideGrid(ga,Au,Ii,pi),!p&&this.grid.hitTestCircle(Wi,Po,Ye,re)&&(at=!0,!W))return{circles:[],offscreen:!1,collisionDetected:at,occluded:!1}}}}return{circles:!W&&at||!Ot?[]:de,offscreen:st,collisionDetected:at,occluded:tt.occluded}}queryRenderedSymbols(h){if(0===h.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const p=[];let b=1/0,C=1/0,S=-1/0,O=-1/0;for(const W of h){const J=new _.pointGeometry(W.x+io,W.y+io);b=Math.min(b,J.x),C=Math.min(C,J.y),S=Math.max(S,J.x),O=Math.max(O,J.y),p.push(J)}const R=this.grid.query(b,C,S,O).concat(this.ignoredGrid.query(b,C,S,O)),z={},H={};for(const W of R){const J=W.key;if(void 0===z[J.bucketInstanceId]&&(z[J.bucketInstanceId]={}),z[J.bucketInstanceId][J.featureIndex])continue;const re=[new _.pointGeometry(W.x1,W.y1),new _.pointGeometry(W.x2,W.y1),new _.pointGeometry(W.x2,W.y2),new _.pointGeometry(W.x1,W.y2)];_.polygonIntersectsPolygon(p,re)&&(z[J.bucketInstanceId][J.featureIndex]=!0,void 0===H[J.bucketInstanceId]&&(H[J.bucketInstanceId]=[]),H[J.bucketInstanceId].push(J.featureIndex))}return H}insertCollisionBox(h,p,b,C,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:C,collisionGroupID:S},h[0],h[1],h[2],h[3])}insertCollisionCircles(h,p,b,C,S){const O=p?this.ignoredGrid:this.grid,R={bucketInstanceId:b,featureIndex:C,collisionGroupID:S};for(let z=0;z<h.length;z+=4)O.insertCircle(R,h[z],h[z+1],h[z+2])}projectAndGetPerspectiveRatio(h,p,b,C,S,O,R){const z=[p,b,C,1];let H=!1;C||this.transform.pitch>0?(_.transformMat4$1(z,z,h),this.fogState&&S&&"globe"!==R.name&&(H=function(he,ue,le,de,ne,be){const ve=be.calculateFogTileMatrix(ne),Ce=[ue,le,de];return _.transformMat4(Ce,Ce,ve),nd(he,Ce,be.pitch,be._fov)}(this.fogState,p,b,C,S.toUnwrapped(),this.transform)>.9)):Ax(z,z,h);const W=z[3];return{point:new _.pointGeometry((z[0]/W+1)/2*this.transform.width+io,(-z[1]/W+1)/2*this.transform.height+io),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(R)/W*.5,1.5),signedDistanceFromCamera:W,occluded:O&&z[2]>W||H}}isOffscreen(h,p,b,C){return b<io||h>=this.screenRightBoundary||C<io||p>this.screenBottomBoundary}isInsideGrid(h,p,b,C){return b>=0&&h<this.gridRightBoundary&&C>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const h=_.identity([]);return _.translate(h,h,[-100,-100,0]),h}}function ic(v,h,p){const b=h.createTileMatrix(v,v.worldSize,p.toUnwrapped());return _.multiply(new Float32Array(16),v.projMatrix,b)}function nr(v,h,p){if(h.projection.name===p.projection.name)return v.projMatrix;const b=p.clone();return b.setProjection(h.projection),ic(b,h.getProjection(),v)}function qr(v,h,p){return h.name===p.projection.name?v.projMatrix:ic(p,h,v)}class Vf{constructor(h,p,b,C){this.opacity=h?Math.max(0,Math.min(1,h.opacity+(h.placed?p:-p))):C&&b?1:0,this.placed=b}isHidden(){return 0===this.opacity&&!this.placed}}class fd{constructor(h,p,b,C,S,O=!1){this.text=new Vf(h?h.text:null,p,b,S),this.icon=new Vf(h?h.icon:null,p,C,S),this.clipped=O}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pd{constructor(h,p,b,C=!1){this.text=h,this.icon=p,this.skipFade=b,this.clipped=C}}class md{constructor(){this.invProjMatrix=_.create(),this.viewportMatrix=_.create(),this.circles=[]}}class Fi{constructor(h,p,b,C,S){this.bucketInstanceId=h,this.featureIndex=p,this.sourceLayerIndex=b,this.bucketIndex=C,this.tileID=S}}class ls{constructor(h){this.crossSourceCollisions=h,this.maxGroupID=0,this.collisionGroups={}}get(h){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[h]){const p=++this.maxGroupID;this.collisionGroups[h]={ID:p,predicate:b=>b.collisionGroupID===p}}return this.collisionGroups[h]}}function mm(v,h,p,b,C){const{horizontalAlign:S,verticalAlign:O}=_.getAnchorAlignment(v),R=-(S-.5)*h,z=-(O-.5)*p,H=_.evaluateVariableOffset(v,b);return new _.pointGeometry(R+H[0]*C,z+H[1]*C)}function gm(v,h,p,b,C){const S=new _.pointGeometry(v,h);return p&&S._rotate(b?C:-C),S}class cs{constructor(h,p,b,C,S){this.transform=h.clone(),this.projection=h.projection.name,this.collisionIndex=new Mt(this.transform,S),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ls(b),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(h,p,b,C){const S=b.getBucket(p),O=b.latestFeatureIndex;if(!S||!O||p.id!==S.layerIds[0])return;const R=S.layers[0].layout,z=b.collisionBoxArray,H=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),W=b.tileSize/_.EXTENT,J=b.tileID.toUnwrapped();this.transform.setProjection(S.projection);const re=(he=b.tileID,ue=S.getProjection(),le=this.transform,ue.name===this.projection?le.calculateProjMatrix(he.toUnwrapped()):ic(le,ue,he));var he,ue,le;const de="map"===R.get("text-pitch-alignment"),ne="map"===R.get("text-rotation-alignment");p.compileFilter();const be=p.dynamicFilter(),ve=p.dynamicFilterNeedsFeature(),Ce=this.transform.calculatePixelsToTileUnitsMatrix(b),Be=as(re,b.tileID.canonical,de,ne,this.transform,S.getProjection(),Ce);let Le=null;if(de){const tt=Oc(re,b.tileID.canonical,de,ne,this.transform,S.getProjection(),Ce);Le=_.multiply([],this.transform.labelPlaneMatrix,tt)}let Ue=null;be&&b.latestFeatureIndex&&(Ue={unwrappedTileID:J,dynamicFilter:be,dynamicFilterNeedsFeature:ve,featureIndex:b.latestFeatureIndex}),this.retainedQueryData[S.bucketInstanceId]=new Fi(S.bucketInstanceId,O,S.sourceLayerIndex,S.index,b.tileID);const Ge={bucket:S,layout:R,posMatrix:re,textLabelPlaneMatrix:Be,labelToScreenMatrix:Le,clippingData:Ue,scale:H,textPixelRatio:W,holdingForFade:b.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:_.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:_.evaluateSizeForZoom(S.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(C)for(const tt of S.sortKeyRanges){const{sortKey:it,symbolInstanceStart:Ht,symbolInstanceEnd:Ke}=tt;h.push({sortKey:it,symbolInstanceStart:Ht,symbolInstanceEnd:Ke,parameters:Ge})}else h.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le,de,ne,be){const{textOffset0:ve,textOffset1:Ce,crossTileID:Be}=re,Le=[ve,Ce],Ue=mm(h,b,C,Le,S),Ge=this.collisionIndex.placeCollisionBox(ue,S,p,gm(Ue.x,Ue.y,O,R,this.transform.angle),J,z,H,W.predicate);if(de){const tt=ue.getSymbolInstanceIconSize(be,this.transform.zoom,re.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(ue,tt,de,gm(Ue.x,Ue.y,O,R,this.transform.angle),J,z,H,W.predicate).box.length)return}if(Ge.box.length>0){let tt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Be]&&this.prevPlacement.placements[Be]&&this.prevPlacement.placements[Be].text&&(tt=this.prevPlacement.variableOffsets[Be].anchor),this.variableOffsets[Be]={textOffset:Le,width:b,height:C,anchor:h,textScale:S,prevAnchor:tt},this.markUsedJustification(ue,h,re,le),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,le,re),this.placedOrientations[Be]=le),{shift:Ue,placedGlyphBoxes:Ge}}}placeLayerBucketPart(h,p,b,C){const{bucket:S,layout:O,posMatrix:R,textLabelPlaneMatrix:z,labelToScreenMatrix:H,clippingData:W,textPixelRatio:J,holdingForFade:re,collisionBoxArray:he,partiallyEvaluatedTextSize:ue,partiallyEvaluatedIconSize:le,collisionGroup:de}=h.parameters,ne=O.get("text-optional"),be=O.get("icon-optional"),ve=O.get("text-allow-overlap"),Ce=O.get("icon-allow-overlap"),Be="map"===O.get("text-rotation-alignment"),Le="map"===O.get("text-pitch-alignment"),Ue="none"!==O.get("icon-text-fit"),Ge="viewport-y"===O.get("symbol-z-order");this.transform.setProjection(S.projection);let tt=ve&&(Ce||!S.hasIconData()||be),it=Ce&&(ve||!S.hasTextData()||ne);!S.collisionArrays&&he&&S.deserializeCollisionBoxes(he),b&&C&&S.updateCollisionDebugBuffers(this.transform.zoom,he);const Ht=(Ke,Tt,at)=>{const{crossTileID:Ot,numVerticalGlyphVertices:st}=Ke;if(W){const Ii={zoom:this.transform.zoom,pitch:this.transform.pitch};let pi=null;if(W.dynamicFilterNeedsFeature){const Nr=this.retainedQueryData[S.bucketInstanceId];pi=W.featureIndex.loadFeature({featureIndex:Ke.featureIndex,bucketIndex:Nr.bucketIndex,sourceLayerIndex:Nr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,W.dynamicFilter)(Ii,pi,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new _.pointGeometry(Ke.tileAnchorX,Ke.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[Ot]=new pd(!1,!1,!1,!0),void(p[Ot]=!0)}if(p[Ot])return;if(re)return void(this.placements[Ot]=new pd(!1,!1,!1));let Ye=!1,ot=!1,kt=!0,Nt=!1,wn=!1,sr=null,yn={box:null,offscreen:null,occluded:null},rn={box:null,offscreen:null,occluded:null},Cn=null,mr=null,En=null,jr=0,oi=0,ai=0;at.textFeatureIndex?jr=at.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(jr=Ke.featureIndex),at.verticalTextFeatureIndex&&(oi=at.verticalTextFeatureIndex);const xi=Ii=>{Ii.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const pi=this.transform.elevation;(pi||Ii.elevation)&&(Ii.elevation=pi?pi.getAtTileOffset(Ii.tileID,Ii.tileAnchorX,Ii.tileAnchorY):0)},Wi=at.textBox;if(Wi){xi(Wi);const Ii=Nr=>{let li=_.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Nr&&this.prevPlacement){const Oo=this.prevPlacement.placedOrientations[Ot];Oo&&(this.placedOrientations[Ot]=Oo,li=Oo,this.markUsedOrientation(S,li,Ke))}return li},pi=(Nr,li)=>{if(S.allowVerticalPlacement&&st>0&&at.verticalTextBox){for(const Oo of S.writingModes)if(Oo===_.WritingMode.vertical?(yn=li(),rn=yn):yn=Nr(),yn&&yn.box&&yn.box.length)break}else yn=Nr()};if(O.get("text-variable-anchor")){let Nr=O.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ot]){const mi=this.prevPlacement.variableOffsets[Ot];Nr.indexOf(mi.anchor)>0&&(Nr=Nr.filter($s=>$s!==mi.anchor),Nr.unshift(mi.anchor))}const li=(mi,$s,fo)=>{const cc=S.getSymbolInstanceTextSize(ue,Ke,this.transform.zoom,Tt),Iu=(mi.x2-mi.x1)*cc+2*mi.padding,La=(mi.y2-mi.y1)*cc+2*mi.padding,Fa=Ue&&!Ce?$s:null;Fa&&xi(Fa);let uc={box:[],offscreen:!1,occluded:!1};const Bc=ve?2*Nr.length:Nr.length;for(let zc=0;zc<Bc;++zc){const Od=this.attemptAnchorPlacement(Nr[zc%Nr.length],mi,Iu,La,cc,Be,Le,J,R,de,zc>=Nr.length,Ke,Tt,S,fo,Fa,ue,le);if(Od&&(uc=Od.placedGlyphBoxes,uc&&uc.box&&uc.box.length)){Ye=!0,sr=Od.shift;break}}return uc};pi(()=>li(Wi,at.iconBox,_.WritingMode.horizontal),()=>{const mi=at.verticalTextBox;return mi&&xi(mi),S.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&st>0&&mi?li(mi,at.verticalIconBox,_.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),yn&&(Ye=yn.box,kt=yn.offscreen,Nt=yn.occluded);const Oo=Ii(yn&&yn.box);if(!Ye&&this.prevPlacement){const mi=this.prevPlacement.variableOffsets[Ot];mi&&(this.variableOffsets[Ot]=mi,this.markUsedJustification(S,mi.anchor,Ke,Oo))}}else{const Nr=(li,Oo)=>{const mi=S.getSymbolInstanceTextSize(ue,Ke,this.transform.zoom,Tt),$s=this.collisionIndex.placeCollisionBox(S,mi,li,new _.pointGeometry(0,0),ve,J,R,de.predicate);return $s&&$s.box&&$s.box.length&&(this.markUsedOrientation(S,Oo,Ke),this.placedOrientations[Ot]=Oo),$s};pi(()=>Nr(Wi,_.WritingMode.horizontal),()=>{const li=at.verticalTextBox;return S.allowVerticalPlacement&&st>0&&li?(xi(li),Nr(li,_.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Ii(yn&&yn.box&&yn.box.length)}}if(Cn=yn,Ye=Cn&&Cn.box&&Cn.box.length>0,kt=Cn&&Cn.offscreen,Nt=Cn&&Cn.occluded,Ke.useRuntimeCollisionCircles){const Ii=S.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex>=0?Ke.centerJustifiedTextSymbolIndex:Ke.verticalPlacedTextSymbolIndex),pi=_.evaluateSizeForFeature(S.textSizeData,ue,Ii),Nr=O.get("text-padding");mr=this.collisionIndex.placeCollisionCircles(S,ve,Ii,S.lineVertexArray,S.glyphOffsetArray,pi,R,z,H,b,Le,de.predicate,Ke.collisionCircleDiameter*pi/_.ONE_EM,Nr,this.retainedQueryData[S.bucketInstanceId].tileID),Ye=ve||mr.circles.length>0&&!mr.collisionDetected,kt=kt&&mr.offscreen,Nt=mr.occluded}if(at.iconFeatureIndex&&(ai=at.iconFeatureIndex),at.iconBox){const Ii=pi=>{xi(pi);const Nr=Ue&&sr?gm(sr.x,sr.y,Be,Le,this.transform.angle):new _.pointGeometry(0,0),li=S.getSymbolInstanceIconSize(le,this.transform.zoom,Ke.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,li,pi,Nr,Ce,J,R,de.predicate)};rn&&rn.box&&rn.box.length&&at.verticalIconBox?(En=Ii(at.verticalIconBox),ot=En.box.length>0):(En=Ii(at.iconBox),ot=En.box.length>0),kt=kt&&En.offscreen,wn=En.occluded}const Po=ne||0===Ke.numHorizontalGlyphVertices&&0===st,ga=be||0===Ke.numIconVertices;if(Po||ga?ga?Po||(ot=ot&&Ye):Ye=ot&&Ye:ot=Ye=ot&&Ye,Ye&&Cn&&Cn.box&&this.collisionIndex.insertCollisionBox(Cn.box,O.get("text-ignore-placement"),S.bucketInstanceId,rn&&rn.box&&oi?oi:jr,de.ID),ot&&En&&this.collisionIndex.insertCollisionBox(En.box,O.get("icon-ignore-placement"),S.bucketInstanceId,ai,de.ID),mr&&(Ye&&this.collisionIndex.insertCollisionCircles(mr.circles,O.get("text-ignore-placement"),S.bucketInstanceId,jr,de.ID),b)){const Ii=S.bucketInstanceId;let pi=this.collisionCircleArrays[Ii];void 0===pi&&(pi=this.collisionCircleArrays[Ii]=new md);for(let Nr=0;Nr<mr.circles.length;Nr+=4)pi.circles.push(mr.circles[Nr+0]),pi.circles.push(mr.circles[Nr+1]),pi.circles.push(mr.circles[Nr+2]),pi.circles.push(mr.collisionDetected?1:0)}const Au="globe"!==S.projection.name;tt=tt&&(Au||!Nt),it=it&&(Au||!wn),this.placements[Ot]=new pd(Ye||tt,ot||it,kt||S.justReloaded),p[Ot]=!0};if(Ge){const Ke=S.getSortedSymbolIndexes(this.transform.angle);for(let Tt=Ke.length-1;Tt>=0;--Tt){const at=Ke[Tt];Ht(S.symbolInstances.get(at),at,S.collisionArrays[at])}}else for(let Ke=h.symbolInstanceStart;Ke<h.symbolInstanceEnd;Ke++)Ht(S.symbolInstances.get(Ke),Ke,S.collisionArrays[Ke]);if(b&&S.bucketInstanceId in this.collisionCircleArrays){const Ke=this.collisionCircleArrays[S.bucketInstanceId];_.invert(Ke.invProjMatrix,R),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(h,p,b,C){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:R,verticalPlacedTextSymbolIndex:z,crossTileID:H}=b,W=_.getAnchorJustification(p),J=C===_.WritingMode.vertical?z:"left"===W?S:"center"===W?O:"right"===W?R:-1;S>=0&&(h.text.placedSymbolArray.get(S).crossTileID=J>=0&&S!==J?0:H),O>=0&&(h.text.placedSymbolArray.get(O).crossTileID=J>=0&&O!==J?0:H),R>=0&&(h.text.placedSymbolArray.get(R).crossTileID=J>=0&&R!==J?0:H),z>=0&&(h.text.placedSymbolArray.get(z).crossTileID=J>=0&&z!==J?0:H)}markUsedOrientation(h,p,b){const C=p===_.WritingMode.horizontal||p===_.WritingMode.horizontalOnly?p:0,S=p===_.WritingMode.vertical?p:0,{leftJustifiedTextSymbolIndex:O,centerJustifiedTextSymbolIndex:R,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:H}=b,W=h.text.placedSymbolArray;O>=0&&(W.get(O).placedOrientation=C),R>=0&&(W.get(R).placedOrientation=C),z>=0&&(W.get(z).placedOrientation=C),H>=0&&(W.get(H).placedOrientation=S)}commit(h){this.commitTime=h,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let b=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const C=p?p.symbolFadeChange(h):1,S=p?p.opacities:{},O=p?p.variableOffsets:{},R=p?p.placedOrientations:{};for(const z in this.placements){const H=this.placements[z],W=S[z];W?(this.opacities[z]=new fd(W,C,H.text,H.icon,null,H.clipped),b=b||H.text!==W.text.placed||H.icon!==W.icon.placed):(this.opacities[z]=new fd(null,C,H.text,H.icon,H.skipFade,H.clipped),b=b||H.text||H.icon)}for(const z in S){const H=S[z];if(!this.opacities[z]){const W=new fd(H,C,!1,!1);W.isHidden()||(this.opacities[z]=W,b=b||H.text.placed||H.icon.placed)}}for(const z in O)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=O[z]);for(const z in R)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=R[z]);b?this.lastPlacementChangeTime=h:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:h)}updateLayerOpacities(h,p){const b={};for(const C of p){const S=C.getBucket(h);S&&C.latestFeatureIndex&&h.id===S.layerIds[0]&&this.updateBucketOpacities(S,b,C.collisionBoxArray)}}updateBucketOpacities(h,p,b){h.hasTextData()&&h.text.opacityVertexArray.clear(),h.hasIconData()&&h.icon.opacityVertexArray.clear(),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexArray.clear(),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexArray.clear();const C=h.layers[0].layout,S=!!h.layers[0].dynamicFilter(),O=new fd(null,0,!1,!1,!0),R=C.get("text-allow-overlap"),z=C.get("icon-allow-overlap"),H=C.get("text-variable-anchor"),W="map"===C.get("text-rotation-alignment"),J="map"===C.get("text-pitch-alignment"),re="none"!==C.get("icon-text-fit"),he=new fd(null,0,R&&(z||!h.hasIconData()||C.get("icon-optional")),z&&(R||!h.hasTextData()||C.get("text-optional")),!0);!h.collisionArrays&&b&&(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData())&&h.deserializeCollisionBoxes(b);const ue=(de,ne,be)=>{for(let ve=0;ve<ne/4;ve++)de.opacityVertexArray.emplaceBack(be)};let le=0;for(let de=0;de<h.symbolInstances.length;de++){const ne=h.symbolInstances.get(de),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:ve,crossTileID:Ce,numIconVertices:Be}=ne;let Le=this.opacities[Ce];p[Ce]?Le=O:Le||(Le=he,this.opacities[Ce]=Le),p[Ce]=!0;const Ue=be>0||ve>0,Ge=Be>0,tt=this.placedOrientations[Ce],it=tt===_.WritingMode.vertical,Ht=tt===_.WritingMode.horizontal||tt===_.WritingMode.horizontalOnly;if(!Ue&&!Ge||Le.isHidden()||le++,Ue){const Ke=Xo(Le.text);ue(h.text,be,it?zr:Ke),ue(h.text,ve,Ht?zr:Ke);const Tt=Le.text.isHidden(),{leftJustifiedTextSymbolIndex:at,centerJustifiedTextSymbolIndex:Ot,rightJustifiedTextSymbolIndex:st,verticalPlacedTextSymbolIndex:Ye}=ne,ot=h.text.placedSymbolArray,kt=Tt||it?1:0;at>=0&&(ot.get(at).hidden=kt),Ot>=0&&(ot.get(Ot).hidden=kt),st>=0&&(ot.get(st).hidden=kt),Ye>=0&&(ot.get(Ye).hidden=Tt||Ht?1:0);const Nt=this.variableOffsets[Ce];Nt&&this.markUsedJustification(h,Nt.anchor,ne,tt);const wn=this.placedOrientations[Ce];wn&&(this.markUsedJustification(h,"left",ne,wn),this.markUsedOrientation(h,wn,ne))}if(Ge){const Ke=Xo(Le.icon),{placedIconSymbolIndex:Tt,verticalPlacedIconSymbolIndex:at}=ne,Ot=h.icon.placedSymbolArray,st=Le.icon.isHidden()?1:0;Tt>=0&&(ue(h.icon,Be,it?zr:Ke),Ot.get(Tt).hidden=st),at>=0&&(ue(h.icon,ne.numVerticalIconVertices,Ht?zr:Ke),Ot.get(at).hidden=st)}if(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData()){const Ke=h.collisionArrays[de];if(Ke){let Tt=new _.pointGeometry(0,0),at=!0;if(Ke.textBox||Ke.verticalTextBox){if(H){const st=this.variableOffsets[Ce];st?(Tt=mm(st.anchor,st.width,st.height,st.textOffset,st.textScale),W&&Tt._rotate(J?this.transform.angle:-this.transform.angle)):at=!1}S&&(at=!Le.clipped),Ke.textBox&&fa(h.textCollisionBox.collisionVertexArray,Le.text.placed,!at||it,Tt.x,Tt.y),Ke.verticalTextBox&&fa(h.textCollisionBox.collisionVertexArray,Le.text.placed,!at||Ht,Tt.x,Tt.y)}const Ot=at&&Boolean(!Ht&&Ke.verticalIconBox);Ke.iconBox&&fa(h.iconCollisionBox.collisionVertexArray,Le.icon.placed,Ot,re?Tt.x:0,re?Tt.y:0),Ke.verticalIconBox&&fa(h.iconCollisionBox.collisionVertexArray,Le.icon.placed,!Ot,re?Tt.x:0,re?Tt.y:0)}}}if(h.fullyClipped=0===le,h.sortFeatures(this.transform.angle),this.retainedQueryData[h.bucketInstanceId]&&(this.retainedQueryData[h.bucketInstanceId].featureSortOrder=h.featureSortOrder),h.hasTextData()&&h.text.opacityVertexBuffer&&h.text.opacityVertexBuffer.updateData(h.text.opacityVertexArray),h.hasIconData()&&h.icon.opacityVertexBuffer&&h.icon.opacityVertexBuffer.updateData(h.icon.opacityVertexArray),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexBuffer&&h.iconCollisionBox.collisionVertexBuffer.updateData(h.iconCollisionBox.collisionVertexArray),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexBuffer&&h.textCollisionBox.collisionVertexBuffer.updateData(h.textCollisionBox.collisionVertexArray),h.bucketInstanceId in this.collisionCircleArrays){const de=this.collisionCircleArrays[h.bucketInstanceId];h.placementInvProjMatrix=de.invProjMatrix,h.placementViewportMatrix=de.viewportMatrix,h.collisionCircleArray=de.circles,delete this.collisionCircleArrays[h.bucketInstanceId]}}symbolFadeChange(h){return 0===this.fadeDuration?1:(h-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(h){return Math.max(0,(this.transform.zoom-h)/1.5)}hasTransitions(h){return this.stale||h-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(h,p){const b=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*b>h}setStale(){this.stale=!0}}function fa(v,h,p,b,C){v.emplaceBack(h?1:0,p?1:0,b||0,C||0),v.emplaceBack(h?1:0,p?1:0,b||0,C||0),v.emplaceBack(h?1:0,p?1:0,b||0,C||0),v.emplaceBack(h?1:0,p?1:0,b||0,C||0)}const Ix=Math.pow(2,25),h0=Math.pow(2,24),Fs=Math.pow(2,17),Uf=Math.pow(2,16),By=Math.pow(2,9),jf=Math.pow(2,8),So=Math.pow(2,1);function Xo(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const h=v.placed?1:0,p=Math.floor(127*v.opacity);return p*Ix+h*h0+p*Fs+h*Uf+p*By+h*jf+p*So+h}const zr=0;class Cu{constructor(h){this._sortAcrossTiles="viewport-y"!==h.layout.get("symbol-z-order")&&void 0!==h.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(h,p,b,C,S){const O=this._bucketParts;for(;this._currentTileIndex<h.length;)if(p.getBucketParts(O,C,h[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((R,z)=>R.sortKey-z.sortKey));this._currentPartIndex<O.length;){const R=O[this._currentPartIndex];if(p.placeLayerBucketPart(R,this._seenCrossTileIDs,b,0===R.symbolInstanceStart),this._currentPartIndex++,S())return!0}return!1}}class _m{constructor(h,p,b,C,S,O,R,z){this.placement=new cs(h,S,O,R,z),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(h,p,b){const C=_.exported.now(),S=()=>{const O=_.exported.now()-C;return!this._forceFullPlacement&&O>2};for(;this._currentPlacementIndex>=0;){const O=p[h[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if("symbol"===O.type&&(!O.minzoom||O.minzoom<=R)&&(!O.maxzoom||O.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new Cu(O)),this._inProgressLayer.continuePlacement(b[O.source],this.placement,this._showCollisionBoxes,O,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(h){return this.placement.commit(h),this.placement}}const d0=512/_.EXTENT/2;class pn{constructor(h,p,b){this.tileID=h,this.indexedSymbolInstances={},this.bucketInstanceId=b;for(let C=0;C<p.length;C++){const S=p.get(C),O=S.key;this.indexedSymbolInstances[O]||(this.indexedSymbolInstances[O]=[]),this.indexedSymbolInstances[O].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,h)})}}getScaledCoordinates(h,p){const b=d0/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*_.EXTENT+h.tileAnchorX)*b),y:Math.floor((p.canonical.y*_.EXTENT+h.tileAnchorY)*b)}}findMatches(h,p,b){const C=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let S=0;S<h.length;S++){const O=h.get(S);if(O.crossTileID)continue;const R=this.indexedSymbolInstances[O.key];if(!R)continue;const z=this.getScaledCoordinates(O,p);for(const H of R)if(Math.abs(H.coord.x-z.x)<=C&&Math.abs(H.coord.y-z.y)<=C&&!b[H.crossTileID]){b[H.crossTileID]=!0,O.crossTileID=H.crossTileID;break}}}}class zy{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class si{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(h){const p=Math.round((h-this.lng)/360);if(0!==p)for(const b in this.indexes){const C=this.indexes[b],S={};for(const O in C){const R=C[O];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+p),S[R.tileID.key]=R}this.indexes[b]=S}this.lng=h}addBucket(h,p,b){if(this.indexes[h.overscaledZ]&&this.indexes[h.overscaledZ][h.key]){if(this.indexes[h.overscaledZ][h.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(h.overscaledZ,this.indexes[h.overscaledZ][h.key])}for(let S=0;S<p.symbolInstances.length;S++)p.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[h.overscaledZ]||(this.usedCrossTileIDs[h.overscaledZ]={});const C=this.usedCrossTileIDs[h.overscaledZ];for(const S in this.indexes){const O=this.indexes[S];if(Number(S)>h.overscaledZ)for(const R in O){const z=O[R];z.tileID.isChildOf(h)&&z.findMatches(p.symbolInstances,h,C)}else{const R=O[h.scaledTo(Number(S)).key];R&&R.findMatches(p.symbolInstances,h,C)}}for(let S=0;S<p.symbolInstances.length;S++){const O=p.symbolInstances.get(S);O.crossTileID||(O.crossTileID=b.generate(),C[O.crossTileID]=!0)}return void 0===this.indexes[h.overscaledZ]&&(this.indexes[h.overscaledZ]={}),this.indexes[h.overscaledZ][h.key]=new pn(h,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(h,p){for(const b in p.indexedSymbolInstances)for(const C of p.indexedSymbolInstances[b])delete this.usedCrossTileIDs[h][C.crossTileID]}removeStaleBuckets(h){let p=!1;for(const b in this.indexes){const C=this.indexes[b];for(const S in C)h[C[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(b,C[S]),delete C[S],p=!0)}return p}}class Hf{constructor(){this.layerIndexes={},this.crossTileIDs=new zy,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(h,p,b,C){let S=this.layerIndexes[h.id];void 0===S&&(S=this.layerIndexes[h.id]=new si);let O=!1;const R={};"globe"!==C.name&&S.handleWrapJump(b);for(const z of p){const H=z.getBucket(h);H&&h.id===H.layerIds[0]&&(H.bucketInstanceId||(H.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(z.tileID,H,this.crossTileIDs)&&(O=!0),R[H.bucketInstanceId]=!0)}return S.removeStaleBuckets(R)&&(O=!0),O}pruneUnusedLayers(h){const p={};h.forEach(b=>{p[b]=!0});for(const b in this.layerIndexes)p[b]||delete this.layerIndexes[b]}}const $f=(v,h)=>_.emitValidationErrors(v,h&&h.filter(p=>"source.canvas"!==p.identifier)),vh=_.pick(Ln,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Tu=_.pick(Ln,["setCenter","setZoom","setBearing","setPitch"]),ym={version:8,layers:[],sources:{}},Lc={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Zo extends _.Evented{constructor(h,p={}){super(),this.map=h,this.dispatcher=new Xl(zn(),this),this.imageManager=new Dc,this.imageManager.setEventedParent(this),this.glyphManager=new _.GlyphManager(h._requestManager,p.localFontFamily?_.LocalGlyphMode.all:p.localIdeographFontFamily?_.LocalGlyphMode.ideographs:_.LocalGlyphMode.none,p.localFontFamily||p.localIdeographFontFamily),this.crossTileSymbolIndex=new Hf,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",_.getReferrer());const b=this;this._rtlTextPluginCallback=Zo.registerForPluginStateChange(C=>{b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(S,O)=>{if(_.triggerPluginCompletionEvent(S),O&&O.every(R=>R))for(const R in b._sourceCaches){const z=b._sourceCaches[R],H=z.getSource().type;"vector"!==H&&"geojson"!==H||z.reload()}})}),this.on("data",C=>{if("source"!==C.dataType||"metadata"!==C.sourceDataType)return;const S=this.getSource(C.sourceId);if(S&&S.vectorLayerIds)for(const O in this._layers){const R=this._layers[O];R.source===S.id&&this._validateLayer(R)}})}loadURL(h,p={}){this.fire(new _.Event("dataloading",{dataType:"style"}));const b="boolean"==typeof p.validate?p.validate:!_.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,p.accessToken);const C=this.map._requestManager.transformRequest(h,_.ResourceType.Style);this._request=_.getJSON(C,(S,O)=>{this._request=null,S?this.fire(new _.ErrorEvent(S)):O&&this._load(O,b)})}loadJSON(h,p={}){this.fire(new _.Event("dataloading",{dataType:"style"})),this._request=_.exported.frame(()=>{this._request=null,this._load(h,!1!==p.validate)})}loadEmpty(){this.fire(new _.Event("dataloading",{dataType:"style"})),this._load(ym,!1)}_updateLayerCount(h,p){const b=p?1:-1;h.is3D()&&(this._num3DLayers+=b),"circle"===h.type&&(this._numCircleLayers+=b),"symbol"===h.type&&(this._numSymbolLayers+=b)}_load(h,p){if(p&&$f(this,_.validateStyle(h)))return;this._loaded=!0,this.stylesheet=_.clone$1(h),this._updateMapProjection();for(const C in h.sources)this.addSource(C,h.sources[C],{validate:!1});this._changed=!1,h.sprite?this._loadSprite(h.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(h.glyphs);const b=Pr(this.stylesheet.layers);this._order=b.map(C=>C.id),this._layers={},this._serializedLayers={};for(let C of b)C=_.createStyleLayer(C),C.setEventedParent(this,{layer:{id:C.id}}),this._layers[C.id]=C,this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Af(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new _.Event("data",{dataType:"style"})),this.fire(new _.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(h){h?this.stylesheet.projection=h:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(h){this._spriteRequest=function(p,b,C){let S,O,R;const z=_.exported.devicePixelRatio>1?"@2x":"";let H=_.getJSON(b.transformRequest(b.normalizeSpriteURL(p,z,".json"),_.ResourceType.SpriteJSON),(re,he)=>{H=null,R||(R=re,S=he,J())}),W=_.getImage(b.transformRequest(b.normalizeSpriteURL(p,z,".png"),_.ResourceType.SpriteImage),(re,he)=>{W=null,R||(R=re,O=he,J())});function J(){if(R)C(R);else if(S&&O){const re=_.exported.getImageData(O),he={};for(const ue in S){const{width:le,height:de,x:ne,y:be,sdf:ve,pixelRatio:Ce,stretchX:Be,stretchY:Le,content:Ue}=S[ue],Ge=new _.RGBAImage({width:le,height:de});_.RGBAImage.copy(re,Ge,{x:ne,y:be},{x:0,y:0},{width:le,height:de}),he[ue]={data:Ge,pixelRatio:Ce,sdf:ve,stretchX:Be,stretchY:Le,content:Ue}}C(null,he)}}return{cancel(){H&&(H.cancel(),H=null),W&&(W.cancel(),W=null)}}}(h,this.map._requestManager,(p,b)=>{if(this._spriteRequest=null,p)this.fire(new _.ErrorEvent(p));else if(b)for(const C in b)this.imageManager.addImage(C,b[C]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new _.Event("data",{dataType:"style"}))})}_validateLayer(h){const p=this.getSource(h.source);if(!p)return;const b=h.sourceLayer;b&&("geojson"===p.type||p.vectorLayerIds&&-1===p.vectorLayerIds.indexOf(b))&&this.fire(new _.ErrorEvent(new Error(`Source layer "${b}" does not exist on source "${p.id}" as specified by style layer "${h.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const h in this._sourceCaches)if(!this._sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(h){const p=[];for(const b of h){const C=this._layers[b];"custom"!==C.type&&p.push(C.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const h in this._sourceCaches)if(this._sourceCaches[h].hasTransition())return!0;for(const h in this._layers)if(this._layers[h].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(h){return!!this.terrain&&("function"==typeof h.isLayerDraped?h.isLayerDraped():Lc[h.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(h){if(!this._loaded)return;const p=this._changed;if(this._changed){const C=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(C.length||S.length)&&this._updateWorkerLayers(C,S);for(const O in this._updatedSources){const R=this._updatedSources[O];"reload"===R?this._reloadSource(O):"clear"===R&&this._clearSource(O)}this._updateTilesForChangedImages();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(h);this.light.updateTransitions(h),this.fog&&this.fog.updateTransitions(h),this._resetUpdates()}const b={};for(const C in this._sourceCaches){const S=this._sourceCaches[C];b[C]=S.used,S.used=!1}for(const C of this._order){const S=this._layers[C];if(S.recalculate(h,this._availableImages),!S.isHidden(h.zoom)){const R=this._getLayerSourceCache(S);R&&(R.used=!0)}const O=this.map.painter;if(O){const R=S.getProgramIds();if(!R)continue;const z=S.getProgramConfiguration(h.zoom);for(const H of R)O.useProgram(H,z)}}for(const C in b){const S=this._sourceCaches[C];b[C]!==S.used&&S.getSource().fire(new _.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(h),this.terrain&&this.terrain.recalculate(h),this.fog&&this.fog.recalculate(h),this.z=h.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new _.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const h=Object.keys(this._changedImages);if(h.length){for(const p in this._sourceCaches)this._sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}}_updateWorkerLayers(h,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(h){if(this._checkLoaded(),$f(this,_.validateStyle(h)))return!1;(h=_.clone$1(h)).layers=Pr(h.layers);const p=function(C,S){if(!C)return[{command:Ln.setStyle,args:[S]}];let O=[];try{if(!Et(C.version,S.version))return[{command:Ln.setStyle,args:[S]}];Et(C.center,S.center)||O.push({command:Ln.setCenter,args:[S.center]}),Et(C.zoom,S.zoom)||O.push({command:Ln.setZoom,args:[S.zoom]}),Et(C.bearing,S.bearing)||O.push({command:Ln.setBearing,args:[S.bearing]}),Et(C.pitch,S.pitch)||O.push({command:Ln.setPitch,args:[S.pitch]}),Et(C.sprite,S.sprite)||O.push({command:Ln.setSprite,args:[S.sprite]}),Et(C.glyphs,S.glyphs)||O.push({command:Ln.setGlyphs,args:[S.glyphs]}),Et(C.transition,S.transition)||O.push({command:Ln.setTransition,args:[S.transition]}),Et(C.light,S.light)||O.push({command:Ln.setLight,args:[S.light]}),Et(C.fog,S.fog)||O.push({command:Ln.setFog,args:[S.fog]}),Et(C.projection,S.projection)||O.push({command:Ln.setProjection,args:[S.projection]});const R={},z=[];!function(J,re,he,ue){let le;for(le in re=re||{},J=J||{})J.hasOwnProperty(le)&&(re.hasOwnProperty(le)||di(le,he,ue));for(le in re)re.hasOwnProperty(le)&&(J.hasOwnProperty(le)?Et(J[le],re[le])||("geojson"===J[le].type&&"geojson"===re[le].type&&nc(J,re,le)?he.push({command:Ln.setGeoJSONSourceData,args:[le,re[le].data]}):tc(le,re,he,ue)):Br(le,re,he))}(C.sources,S.sources,z,R);const H=[];C.layers&&C.layers.forEach(J=>{J.source&&R[J.source]?O.push({command:Ln.removeLayer,args:[J.id]}):H.push(J)});let W=C.terrain;W&&R[W.source]&&(O.push({command:Ln.setTerrain,args:[void 0]}),W=void 0),O=O.concat(z),Et(W,S.terrain)||O.push({command:Ln.setTerrain,args:[S.terrain]}),function(J,re,he){re=re||[];const ue=(J=J||[]).map(Pc),le=re.map(Pc),de=J.reduce(os,{}),ne=re.reduce(os,{}),be=ue.slice(),ve=Object.create(null);let Ce,Be,Le,Ue,Ge,tt,it;for(Ce=0,Be=0;Ce<ue.length;Ce++)Le=ue[Ce],ne.hasOwnProperty(Le)?Be++:(he.push({command:Ln.removeLayer,args:[Le]}),be.splice(be.indexOf(Le,Be),1));for(Ce=0,Be=0;Ce<le.length;Ce++)Le=le[le.length-1-Ce],be[be.length-1-Ce]!==Le&&(de.hasOwnProperty(Le)?(he.push({command:Ln.removeLayer,args:[Le]}),be.splice(be.lastIndexOf(Le,be.length-Be),1)):Be++,tt=be[be.length-Ce],he.push({command:Ln.addLayer,args:[ne[Le],tt]}),be.splice(be.length-Ce,0,Le),ve[Le]=!0);for(Ce=0;Ce<le.length;Ce++)if(Le=le[Ce],Ue=de[Le],Ge=ne[Le],!ve[Le]&&!Et(Ue,Ge))if(Et(Ue.source,Ge.source)&&Et(Ue["source-layer"],Ge["source-layer"])&&Et(Ue.type,Ge.type)){for(it in mt(Ue.layout,Ge.layout,he,Le,null,Ln.setLayoutProperty),mt(Ue.paint,Ge.paint,he,Le,null,Ln.setPaintProperty),Et(Ue.filter,Ge.filter)||he.push({command:Ln.setFilter,args:[Le,Ge.filter]}),Et(Ue.minzoom,Ge.minzoom)&&Et(Ue.maxzoom,Ge.maxzoom)||he.push({command:Ln.setLayerZoomRange,args:[Le,Ge.minzoom,Ge.maxzoom]}),Ue)Ue.hasOwnProperty(it)&&"layout"!==it&&"paint"!==it&&"filter"!==it&&"metadata"!==it&&"minzoom"!==it&&"maxzoom"!==it&&(0===it.indexOf("paint.")?mt(Ue[it],Ge[it],he,Le,it.slice(6),Ln.setPaintProperty):Et(Ue[it],Ge[it])||he.push({command:Ln.setLayerProperty,args:[Le,it,Ge[it]]}));for(it in Ge)Ge.hasOwnProperty(it)&&!Ue.hasOwnProperty(it)&&"layout"!==it&&"paint"!==it&&"filter"!==it&&"metadata"!==it&&"minzoom"!==it&&"maxzoom"!==it&&(0===it.indexOf("paint.")?mt(Ue[it],Ge[it],he,Le,it.slice(6),Ln.setPaintProperty):Et(Ue[it],Ge[it])||he.push({command:Ln.setLayerProperty,args:[Le,it,Ge[it]]}))}else he.push({command:Ln.removeLayer,args:[Le]}),tt=be[be.lastIndexOf(Le)+1],he.push({command:Ln.addLayer,args:[Ge,tt]})}(H,S.layers,O)}catch(R){console.warn("Unable to compute style diff:",R),O=[{command:Ln.setStyle,args:[S]}]}return O}(this.serialize(),h).filter(C=>!(C.command in Tu));if(0===p.length)return!1;const b=p.filter(C=>!(C.command in vh));if(b.length>0)throw new Error(`Unimplemented: ${b.map(C=>C.command).join(", ")}.`);return p.forEach(C=>{"setTransition"!==C.command&&"setProjection"!==C.command&&this[C.command].apply(this,C.args)}),this.stylesheet=h,this._updateMapProjection(),!0}addImage(h,p){return this.getImage(h)?this.fire(new _.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(h,p),this._afterImageUpdated(h),this)}updateImage(h,p){this.imageManager.updateImage(h,p)}getImage(h){return this.imageManager.getImage(h)}removeImage(h){return this.getImage(h)?(this.imageManager.removeImage(h),this._afterImageUpdated(h),this):this.fire(new _.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new _.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(h,p,b={}){if(this._checkLoaded(),void 0!==this.getSource(h))throw new Error("There is already a source with this ID");if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(_.validateSource,`sources.${h}`,p,null,b))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const C=Xe(h,p,this.dispatcher,this);C.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(h),source:C.serialize(),sourceId:h}));const S=O=>{const R=(O?"symbol:":"other:")+h,z=this._sourceCaches[R]=new _.SourceCache(R,C,O);(O?this._symbolSourceCaches:this._otherSourceCaches)[h]=z,z.style=this,z.onAdd(this.map)};S(!1),"vector"!==p.type&&"geojson"!==p.type||S(!0),C.onAdd&&C.onAdd(this.map),this._changed=!0}removeSource(h){this._checkLoaded();const p=this.getSource(h);if(!p)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===h)return this.fire(new _.ErrorEvent(new Error(`Source "${h}" cannot be removed while layer "${C}" is using it.`)));if(this.terrain&&this.terrain.get().source===h)return this.fire(new _.ErrorEvent(new Error(`Source "${h}" cannot be removed while terrain is using it.`)));const b=this._getSourceCaches(h);for(const C of b)delete this._sourceCaches[C.id],delete this._updatedSources[C.id],C.fire(new _.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:C.getSource().id})),C.setEventedParent(null),C.clearTiles();return delete this._otherSourceCaches[h],delete this._symbolSourceCaches[h],p.setEventedParent(null),p.onRemove&&p.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(h,p){this._checkLoaded(),this.getSource(h).setData(p),this._changed=!0}getSource(h){const p=this._getSourceCache(h);return p&&p.getSource()}_getSources(){const h=[];for(const p in this._otherSourceCaches){const b=this._getSourceCache(p);b&&h.push(b.getSource())}return h}addLayer(h,p,b={}){this._checkLoaded();const C=h.id;if(this.getLayer(C))return void this.fire(new _.ErrorEvent(new Error(`Layer with id "${C}" already exists on this map`)));let S;if("custom"===h.type){if($f(this,_.validateCustomStyleLayer(h)))return;S=_.createStyleLayer(h)}else{if("object"==typeof h.source&&(this.addSource(C,h.source),h=_.clone$1(h),h=_.extend(h,{source:C})),this._validate(_.validateLayer,`layers.${C}`,h,{arrayIndex:-1},b))return;S=_.createStyleLayer(h),this._validateLayer(S),S.setEventedParent(this,{layer:{id:C}}),this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}const O=p?this._order.indexOf(p):this._order.length;if(p&&-1===O)return void this.fire(new _.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`)));this._order.splice(O,0,C),this._layerOrderChanged=!0,this._layers[C]=S;const R=this._getLayerSourceCache(S);if(this._removedLayers[C]&&S.source&&R&&"custom"!==S.type){const z=this._removedLayers[C];delete this._removedLayers[C],z.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",R.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(h,p){if(this._checkLoaded(),this._changed=!0,!this._layers[h])return void this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be moved.`)));if(h===p)return;const b=this._order.indexOf(h);this._order.splice(b,1);const C=p?this._order.indexOf(p):this._order.length;p&&-1===C?this.fire(new _.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`))):(this._order.splice(C,0,h),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(h){this._checkLoaded();const p=this._layers[h];if(!p)return void this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be removed.`)));p.setEventedParent(null),this._updateLayerCount(p,!1);const b=this._order.indexOf(h);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=p,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],p.onRemove&&p.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(h){return this._layers[h]}hasLayer(h){return h in this._layers}hasLayerType(h){for(const p in this._layers)if(this._layers[p].type===h)return!0;return!1}setLayerZoomRange(h,p,b){this._checkLoaded();const C=this.getLayer(h);C?C.minzoom===p&&C.maxzoom===b||(null!=p&&(C.minzoom=p),null!=b&&(C.maxzoom=b),this._updateLayer(C)):this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(h,p,b={}){this._checkLoaded();const C=this.getLayer(h);if(C){if(!Et(C.filter,p))return null==p?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(_.validateFilter,`layers.${C.id}.filter`,p,{layerType:C.type},b)||(C.filter=_.clone$1(p),this._updateLayer(C)))}else this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be filtered.`)))}getFilter(h){const p=this.getLayer(h);return p&&_.clone$1(p.filter)}setLayoutProperty(h,p,b,C={}){this._checkLoaded();const S=this.getLayer(h);S?Et(S.getLayoutProperty(p),b)||(S.setLayoutProperty(p,b,C),this._updateLayer(S)):this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(h,p){const b=this.getLayer(h);if(b)return b.getLayoutProperty(p);this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style.`)))}setPaintProperty(h,p,b,C={}){this._checkLoaded();const S=this.getLayer(h);S?Et(S.getPaintProperty(p),b)||(S.setPaintProperty(p,b,C)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new _.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(h,p){const b=this.getLayer(h);return b&&b.getPaintProperty(p)}setFeatureState(h,p){this._checkLoaded();const b=h.source,C=h.sourceLayer,S=this.getSource(b);if(!S)return void this.fire(new _.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const O=S.type;if("geojson"===O&&C)return void this.fire(new _.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===O&&!C)return void this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===h.id&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided.")));const R=this._getSourceCaches(b);for(const z of R)z.setFeatureState(C,h.id,p)}removeFeatureState(h,p){this._checkLoaded();const b=h.source,C=this.getSource(b);if(!C)return void this.fire(new _.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`)));const S=C.type,O="vector"===S?h.sourceLayer:void 0;if("vector"===S&&!O)return void this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(p&&"string"!=typeof h.id&&"number"!=typeof h.id)return void this.fire(new _.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const R=this._getSourceCaches(b);for(const z of R)z.removeFeatureState(O,h.id,p)}getFeatureState(h){this._checkLoaded();const p=h.source,b=h.sourceLayer,C=this.getSource(p);if(C){if("vector"!==C.type||b)return void 0===h.id&&this.fire(new _.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(p)[0].getFeatureState(b,h.id);this.fire(new _.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new _.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return _.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const h={};for(const p in this._sourceCaches){const b=this._sourceCaches[p].getSource();h[b.id]||(h[b.id]=b.serialize())}return _.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:h,layers:this._serializeLayers(this._order)},p=>void 0!==p)}_updateLayer(h){this._updatedLayers[h.id]=!0;const p=this._getLayerSourceCache(h);h.source&&!this._updatedSources[h.source]&&p&&"raster"!==p.getSource().type&&(this._updatedSources[h.source]="reload",p.pause()),this._changed=!0,h.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(h){const p=O=>"fill-extrusion"===this._layers[O].type,b={},C=[];for(let O=this._order.length-1;O>=0;O--){const R=this._order[O];if(p(R)){b[R]=O;for(const z of h){const H=z[R];if(H)for(const W of H)C.push(W)}}}C.sort((O,R)=>R.intersectionZ-O.intersectionZ);const S=[];for(let O=this._order.length-1;O>=0;O--){const R=this._order[O];if(p(R))for(let z=C.length-1;z>=0;z--){const H=C[z].feature;if(b[H.layer.id]<O)break;S.push(H),C.pop()}else for(const z of h){const H=z[R];if(H)for(const W of H)S.push(W.feature)}}return S}queryRenderedFeatures(h,p,b){p&&p.filter&&this._validate(_.validateFilter,"queryRenderedFeatures.filter",p.filter,null,p);const C={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new _.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const z of p.layers){const H=this._layers[z];if(!H)return this.fire(new _.ErrorEvent(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];C[H.source]=!0}}const S=[];p.availableImages=this._availableImages;const O=p&&p.layers?p.layers.some(z=>{const H=this.getLayer(z);return H&&H.is3D()}):this.has3DLayers(),R=qi.createFromScreenPoints(h,b);for(const z in this._sourceCaches){const H=this._sourceCaches[z].getSource().id;p.layers&&!C[H]||S.push(nt(this._sourceCaches[z],this._layers,this._serializedLayers,R,p,b,O,!!this.map._showQueryGeometry))}return this.placement&&S.push(function(z,H,W,J,re,he,ue){const le={},de=he.queryRenderedSymbols(J),ne=[];for(const be of Object.keys(de).map(Number))ne.push(ue[be]);ne.sort(sn);for(const be of ne){const ve=be.featureIndex.lookupSymbolFeatures(de[be.bucketInstanceId],H,be.bucketIndex,be.sourceLayerIndex,re.filter,re.layers,re.availableImages,z);for(const Ce in ve){const Be=le[Ce]=le[Ce]||[],Le=ve[Ce];Le.sort((Ue,Ge)=>{const tt=be.featureSortOrder;if(tt){const it=tt.indexOf(Ue.featureIndex);return tt.indexOf(Ge.featureIndex)-it}return Ge.featureIndex-Ue.featureIndex});for(const Ue of Le)Be.push(Ue)}}for(const be in le)le[be].forEach(ve=>{const Ce=ve.feature,Be=W(z[be]).getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=Be});return le}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),R.screenGeometry,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(h,p){p&&p.filter&&this._validate(_.validateFilter,"querySourceFeatures.filter",p.filter,null,p);const b=this._getSourceCaches(h);let C=[];for(const S of b)C=C.concat(wt(S,p));return C}addSourceType(h,p,b){return Zo.getSourceType(h)?b(new Error(`A source type called "${h}" already exists.`)):(Zo.setSourceType(h,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:p.workerSourceURL},b):b(null,null))}getLight(){return this.light.getLight()}setLight(h,p={}){this._checkLoaded();const b=this.light.getLight();let C=!1;for(const O in h)if(!Et(h[O],b[O])){C=!0;break}if(!C)return;const S=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(h,p),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(h,p=1){if(this._checkLoaded(),!h)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===p){if("object"==typeof h.source){const b="terrain-dem-src";this.addSource(b,h.source),h=_.clone$1(h),h=_.extend(h,{source:b})}if(this._validate(_.validateTerrain,"terrain",h))return}if(!this.terrain||this.terrain&&p!==this.terrain.drapeRenderMode)this._createTerrain(h,p);else{const b=this.terrain,C=b.get();for(const S of Object.keys(_.spec.terrain))!h.hasOwnProperty(S)&&_.spec.terrain[S].default&&(h[S]=_.spec.terrain[S].default);for(const S in h)if(!Et(h[S],C[S])){b.set(h),this.stylesheet.terrain=h;const O=this._setTransitionParameters({duration:0});b.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(h){const p=this.fog=new rd(h,this.map.transform);this.stylesheet.fog=h;const b=this._setTransitionParameters({duration:0});p.updateTransitions(b)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const h of this.map._markers)h._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(h){if(this._checkLoaded(),!h)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const p=this.fog,b=p.get();0===Object.keys(h).length&&p.set(h);for(const C in h)if(!Et(h[C],b[C])){p.set(h),this.stylesheet.fog=h;const S=this._setTransitionParameters({duration:0});p.updateTransitions(S);break}}else this._createFog(h);this._markersNeedUpdate=!0}_setTransitionParameters(h){return{now:_.exported.now(),transition:_.extend(h,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const h=this._order.filter(b=>this.isLayerDraped(this._layers[b])),p=this._order.filter(b=>!this.isLayerDraped(this._layers[b]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...h),this._drapedFirstOrder.push(...p)}_createTerrain(h,p){const b=this.terrain=new ha(h,p);this.stylesheet.terrain=h,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const C=this._setTransitionParameters({duration:0});b.updateTransitions(C)}_force3DLayerUpdate(){for(const h in this._layers){const p=this._layers[h];"fill-extrusion"===p.type&&this._updateLayer(p)}}_forceSymbolLayerUpdate(){for(const h in this._layers){const p=this._layers[h];"symbol"===p.type&&this._updateLayer(p)}}_validate(h,p,b,C,S={}){return(!S||!1!==S.validate)&&$f(this,h.call(_.validateStyle,_.extend({key:p,style:this.serialize(),value:b,styleSpec:_.spec},C)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),_.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this._sourceCaches)this._sourceCaches[h].clearTiles(),this._sourceCaches[h].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(h){const p=this._getSourceCaches(h);for(const b of p)b.clearTiles()}_reloadSource(h){const p=this._getSourceCaches(h);for(const b of p)b.resume(),b.reload()}_reloadSources(){for(const h of this._getSources())h.reload&&h.reload()}_updateSources(h){for(const p in this._sourceCaches)this._sourceCaches[p].update(h)}_generateCollisionBoxes(){for(const h in this._sourceCaches){const p=this._sourceCaches[h];p.resume(),p.reload()}}_updatePlacement(h,p,b,C,S=!1){let O=!1,R=!1;const z={};for(const H of this._order){const W=this._layers[H];if("symbol"!==W.type)continue;if(!z[W.source]){const re=this._getLayerSourceCache(W);if(!re)continue;z[W.source]=re.getRenderableIds(!0).map(he=>re.getTileByID(he)).sort((he,ue)=>ue.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(ue.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(W,z[W.source],h.center.lng,h.projection);O=O||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),S=S||this._layerOrderChanged||0===b,this._layerOrderChanged&&this.fire(new _.Event("neworder")),(S||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(_.exported.now(),h.zoom))&&(this.pauseablePlacement=new _m(h,this._order,S,p,b,C,this.placement,this.fog&&h.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(_.exported.now()),R=!0),O&&this.pauseablePlacement.placement.setStale()),R||O)for(const H of this._order){const W=this._layers[H];"symbol"===W.type&&this.placement.updateLayerOpacities(W,z[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(_.exported.now())}_releaseSymbolFadeTiles(){for(const h in this._sourceCaches)this._sourceCaches[h].releaseSymbolFadeTiles()}getImages(h,p,b){this.imageManager.getImages(p.icons,b),this._updateTilesForChangedImages();const C=S=>{S&&S.setDependencies(p.tileID.key,p.type,p.icons)};C(this._otherSourceCaches[p.source]),C(this._symbolSourceCaches[p.source])}getGlyphs(h,p,b){this.glyphManager.getGlyphs(p.stacks,b)}getResource(h,p,b){return _.makeRequest(p,b)}_getSourceCache(h){return this._otherSourceCaches[h]}_getLayerSourceCache(h){return"symbol"===h.type?this._symbolSourceCaches[h.source]:this._otherSourceCaches[h.source]}_getSourceCaches(h){const p=[];return this._otherSourceCaches[h]&&p.push(this._otherSourceCaches[h]),this._symbolSourceCaches[h]&&p.push(this._symbolSourceCaches[h]),p}_isSourceCacheLoaded(h){const p=this._getSourceCaches(h);return 0===p.length?(this.fire(new _.ErrorEvent(new Error(`There is no source with ID '${h}'`))),!1):p.every(b=>b.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Zo.getSourceType=function(v){return Ze[v]},Zo.setSourceType=function(v,h){Ze[v]=h},Zo.registerForPluginStateChange=_.registerForPluginStateChange;var xh="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",f0="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Vy="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Hn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",vm="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let p0={},pa={};const bh=[];gd(xh,bh),gd(Vy,bh),gd(Hn,bh),gd(vm,bh),p0=Mr("",Vy),pa=Mr(vm,Hn);const Px=Mr("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ai=xh,m0="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Uy={background:Mr("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Mr("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Mr("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Mr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mr("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Mr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Mr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Mr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Mr("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Mr("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Mr("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Mr("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mr("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Mr("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Mr("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Mr("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Mr("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Mr("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Mr("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Mr("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mr("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",f0),skyboxGradient:Mr("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",f0),skyboxCapture:Mr("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mr("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Mr("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function gd(v,h){const p=v.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let b of p)if(b=b.trim(),"#"===b[0]&&b.includes("if")&&!b.includes("endif")){b=b.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const C=b.split(" ");for(const S of C)h.includes(S)||h.push(S)}}function Mr(v,h){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=h.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),C={},S=[...bh];return gd(v,S),gd(h,S),{fragmentSource:v=v.replace(p,(O,R,z,H,W)=>(C[W]=!0,"define"===R?`\n#ifndef HAS_UNIFORM_u_${W}\nvarying ${z} ${H} ${W};\n#else\nuniform ${z} ${H} u_${W};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${W}\n    ${z} ${H} ${W} = u_${W};\n#endif\n`)),vertexSource:h=h.replace(p,(O,R,z,H,W)=>{const J="float"===H?"vec2":"vec4",re=W.match(/color/)?"color":J;return C[W]?"define"===R?`\n#ifndef HAS_UNIFORM_u_${W}\nuniform lowp float u_${W}_t;\nattribute ${z} ${J} a_${W};\nvarying ${z} ${H} ${W};\n#else\nuniform ${z} ${H} u_${W};\n#endif\n`:"vec4"===re?`\n#ifndef HAS_UNIFORM_u_${W}\n    ${W} = a_${W};\n#else\n    ${z} ${H} ${W} = u_${W};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${W}\n    ${W} = unpack_mix_${re}(a_${W}, u_${W}_t);\n#else\n    ${z} ${H} ${W} = u_${W};\n#endif\n`:"define"===R?`\n#ifndef HAS_UNIFORM_u_${W}\nuniform lowp float u_${W}_t;\nattribute ${z} ${J} a_${W};\n#else\nuniform ${z} ${H} u_${W};\n#endif\n`:"vec4"===re?`\n#ifndef HAS_UNIFORM_u_${W}\n    ${z} ${H} ${W} = a_${W};\n#else\n    ${z} ${H} ${W} = u_${W};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${W}\n    ${z} ${H} ${W} = unpack_mix_${re}(a_${W}, u_${W}_t);\n#else\n    ${z} ${H} ${W} = u_${W};\n#endif\n`}),staticAttributes:b,usedDefines:S}}class wh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(h,p,b,C,S,O,R){this.context=h;let z=this.boundPaintVertexBuffers.length!==C.length;for(let W=0;!z&&W<C.length;W++)this.boundPaintVertexBuffers[W]!==C[W]&&(z=!0);let H=this.boundDynamicVertexBuffers.length!==R.length;for(let W=0;!H&&W<R.length;W++)this.boundDynamicVertexBuffers[W]!==R[W]&&(H=!0);if(!h.extVertexArrayObject||!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==b||z||H||this.boundIndexBuffer!==S||this.boundVertexOffset!==O)this.freshBind(p,b,C,S,O,R);else{h.bindVertexArrayOES.set(this.vao);for(const W of R)W&&W.bind();S&&S.dynamicDraw&&S.bind()}}freshBind(h,p,b,C,S,O){let R;const z=h.numAttributes,H=this.context,W=H.gl;if(H.extVertexArrayObject)this.vao&&this.destroy(),this.vao=H.extVertexArrayObject.createVertexArrayOES(),H.bindVertexArrayOES.set(this.vao),R=0,this.boundProgram=h,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=C,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=O;else{R=H.currentNumAttributes||0;for(let J=z;J<R;J++)W.disableVertexAttribArray(J)}p.enableAttributes(W,h),p.bind(),p.setVertexAttribPointers(W,h,S);for(const J of b)J.enableAttributes(W,h),J.bind(),J.setVertexAttribPointers(W,h,S);for(const J of O)J&&(J.enableAttributes(W,h),J.bind(),J.setVertexAttribPointers(W,h,S));C&&C.bind(),H.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function _d(v,h){const p=Math.pow(2,h.canonical.z),b=h.canonical.y;return[new _.MercatorCoordinate(0,b/p).toLngLat().lat,new _.MercatorCoordinate(0,(b+1)/p).toLngLat().lat]}function Wf(v,h,p,b,C,S,O){const R=v.context,z=R.gl,H=p.fbo;if(!H)return;v.prepareDrawTile();const W=v.useProgram("hillshade");R.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,H.colorAttachment.get());const J=((le,de,ne,be)=>{const ve=ne.paint.get("hillshade-shadow-color"),Ce=ne.paint.get("hillshade-highlight-color"),Be=ne.paint.get("hillshade-accent-color");let Le=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ne.paint.get("hillshade-illumination-anchor")&&(Le-=le.transform.angle);const Ue=!le.options.moving;return{u_matrix:be||le.transform.calculateProjMatrix(de.tileID.toUnwrapped(),Ue),u_image:0,u_latrange:_d(0,de.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),Le],u_shadow:ve,u_highlight:Ce,u_accent:Be}})(v,p,b,v.terrain?h.projMatrix:null);v.prepareDrawProgram(R,W,h.toUnwrapped());const{tileBoundsBuffer:re,tileBoundsIndexBuffer:he,tileBoundsSegments:ue}=v.getTileBoundsBuffers(p);W.draw(R,z.TRIANGLES,C,S,O,_.CullFaceMode.disabled,J,b.id,re,he,ue)}function Gf(v,h,p){if(!h.needsDEMTextureUpload)return;const b=v.context,C=b.gl;b.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||v.getTileTexture(p.stride);const S=p.getPixels();h.demTexture?h.demTexture.update(S,{premultiply:!1}):h.demTexture=new _.Texture(b,S,C.RGBA,{premultiply:!1}),h.needsDEMTextureUpload=!1}function xm(v,h,p,b,C,S){const O=v.context,R=O.gl;if(!h.dem)return;const z=h.dem;if(O.activeTexture.set(R.TEXTURE1),Gf(v,h,z),!h.demTexture)return;h.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);const H=z.dim;O.activeTexture.set(R.TEXTURE0);let W=h.fbo;if(!W){const ue=new _.Texture(O,{width:H,height:H,data:null},R.RGBA);ue.bind(R.LINEAR,R.CLAMP_TO_EDGE),W=h.fbo=O.createFramebuffer(H,H,!0),W.colorAttachment.set(ue.texture)}O.bindFramebuffer.set(W.framebuffer),O.viewport.set([0,0,H,H]);const{tileBoundsBuffer:J,tileBoundsIndexBuffer:re,tileBoundsSegments:he}=v.getMercatorTileBoundsBuffers();v.useProgram("hillshadePrepare").draw(O,R.TRIANGLES,b,C,S,_.CullFaceMode.disabled,((ue,le)=>{const de=le.stride,ne=_.create();return _.ortho(ne,0,_.EXTENT,-_.EXTENT,0,0,1),_.translate(ne,ne,[0,-_.EXTENT,0]),{u_matrix:ne,u_image:1,u_dimension:[de,de],u_zoom:ue.overscaledZ,u_unpack:le.unpackVector}})(h.tileID,z),p.id,J,re,he),h.needsHillshadePrepare=!1}const Yf=v=>({u_matrix:new _.UniformMatrix4f(v),u_image0:new _.Uniform1i(v),u_skirt_height:new _.Uniform1f(v)}),Ch=(v,h)=>({u_matrix:v,u_image0:0,u_skirt_height:h}),Fc=(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:h,u_normalize_matrix:Float32Array.from(b),u_merc_matrix:p,u_zoom_transition:C,u_merc_center:S,u_image0:0,u_frustum_tl:O,u_frustum_tr:R,u_frustum_br:z,u_frustum_bl:H,u_globe_pos:W,u_globe_radius:J,u_viewport:re,u_grid_matrix:ue?Float32Array.from(ue):new Float32Array(9),u_skirt_height:he});function g0(v,h){return null!=v&&null!=h&&!(!v.hasData()||!h.hasData())&&null!=v.demTexture&&null!=h.demTexture&&v.tileID.key!==h.tileID.key}const Jt=new class{constructor(){this.operations={}}newMorphing(v,h,p,b,C){if(v in this.operations){const S=this.operations[v];S.to.tileID.key!==p.tileID.key&&(S.queued=p)}else this.operations[v]={startTime:b,phase:0,duration:C,from:h,to:p,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const h=this.operations[v];return{from:h.from,to:h.to,phase:h.phase}}update(v){for(const h in this.operations){const p=this.operations[h];for(p.phase=(v-p.startTime)/p.duration;p.phase>=1||!this._validOp(p);)if(!this._nextOp(p,v)){delete this.operations[h];break}}}_nextOp(v,h){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=h,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},Eu={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function pr(v){return 6*Math.pow(1.5,22-v)}function yd(v,h){const p=1<<v.z;return!h&&(0===v.x||v.x===p-1)||0===v.y||v.y===p-1}const Er=v=>({u_matrix:v});function Rc(v,h,p,b,C){if(C>0){const S=_.exported.now(),O=(S-v.timeAdded)/C,R=h?(S-h.timeAdded)/C:-1,z=p.getSource(),H=b.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),W=!h||Math.abs(h.tileID.overscaledZ-H)>Math.abs(v.tileID.overscaledZ-H),J=W&&v.refreshedUponExpiration?1:_.clamp(W?O:1-R,0,1);return v.refreshedUponExpiration&&O>=1&&(v.refreshedUponExpiration=!1),h?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}class jy extends _.SourceCache{constructor(h){const p={type:"raster-dem",maxzoom:h.transform.maxZoom},b=new Xl(zn(),null),C=Xe("mock-dem",p,b,h.style);super("mock-dem",C,!1),C.setEventedParent(this),this._sourceLoaded=!0}_loadTile(h,p){h.state="loaded",p(null)}}class Hy extends _.SourceCache{constructor(h){const p=Xe("proxy",{type:"geojson",maxzoom:h.transform.maxZoom},new Xl(zn(),null),h.style);super("proxy",p,!1),p.setEventedParent(this),this.map=this.getSource().map=h,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(h,p,b){if(h.freezeTileCoverage)return;this.transform=h;const C=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,O)=>{if(S[O.key]="",!this._tiles[O.key]){const R=new _.Tile(O,this._source.tileSize*O.overscaleFactor(),h.tileZoom);R.state="loaded",this._tiles[O.key]=R}return S},{});for(const S in this._tiles)S in C||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(h){const p=this.proxyCachedFBO[h];if(void 0!==p){const b=Object.values(p);this.renderCachePool.push(...b),delete this.proxyCachedFBO[h]}}deallocRenderCache(){this.renderCache.forEach(h=>h.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class _0 extends _.OverscaledTileID{constructor(h,p,b){super(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y),this.proxyTileKey=p,this.projMatrix=b}}class Sl extends _.Elevation{constructor(h,p){super(),this.painter=h,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[b,C,S]=function(z){const H=new _.StructArrayLayout2i4,W=new _.StructArrayLayout3ui6,J=131;H.reserve(17161),W.reserve(33800);const re=_.EXTENT/128,he=_.EXTENT+re/2,ue=he+re;for(let de=-re;de<ue;de+=re)for(let ne=-re;ne<ue;ne+=re){const be=ne<0||ne>he||de<0||de>he?24575:0,ve=_.clamp(Math.round(ne),0,_.EXTENT),Ce=_.clamp(Math.round(de),0,_.EXTENT);H.emplaceBack(ve+be,Ce)}const le=(de,ne)=>{const be=ne*J+de;W.emplaceBack(be+1,be,be+J),W.emplaceBack(be+J,be+J+1,be+1)};for(let de=1;de<129;de++)for(let ne=1;ne<129;ne++)le(ne,de);return[0,129].forEach(de=>{for(let ne=0;ne<130;ne++)le(ne,de),le(de,ne)}),[H,W,32768]}(),O=h.context;this.gridBuffer=O.createVertexBuffer(b,_.posAttributes.members),this.gridIndexBuffer=O.createIndexBuffer(C),this.gridSegments=_.SegmentVector.simpleSegment(0,0,b.length,C.length),this.gridNoSkirtSegments=_.SegmentVector.simpleSegment(0,0,b.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Hy(p.map),this.orthoMatrix=_.create(),_.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,_.EXTENT,0,_.EXTENT,0,1);const R=O.gl;this._overlapStencilMode=new _.StencilMode({func:R.GEQUAL,mask:255},0,255,R.KEEP,R.KEEP,R.REPLACE),this._previousZoom=h.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=p,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new jy(p.map)}set style(h){h.on("data",this._onStyleDataEvent.bind(this)),h.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=h,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(h,p,b){if(h&&h.terrain){this._style!==h&&(this.style=h),this.enabled=!0;const C=h.terrain.properties;this.sourceCache=0===h.terrain.drapeRenderMode?this._mockSourceCache:h._getSourceCache(C.get("source")),this._exaggeration=C.get("exaggeration");const S=()=>{this.sourceCache.used&&_.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const O=this.getScaledDemTileSize();this.sourceCache.update(p,O,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,S(),this._initializing=!0),S(),p.updateElevation(!0,b),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(p),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(h){this._findCoveringTileCache[h]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const h=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==h.efficiency&&_.warnOnce(`Terrain render cache efficiency is not optimal (${h.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${h.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(h){h.coord&&"source"===h.dataType?this._clearRenderCacheForTile(h.sourceCacheId,h.coord):"style"===h.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const h in this._style._sourceCaches)this._style._sourceCaches[h].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(h=>h.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const h=2*this.proxySourceCache.getSource().tileSize;return[h,h]}set useVertexMorphing(h){this._useVertexMorphing=h}updateTileBinding(h){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const p=this.proxySourceCache,b=this.painter.transform;this._initializing&&(this._initializing=0===b._centerAltitude&&-1===this.getAtPointOrZero(_.MercatorCoordinate.fromLngLat(b.center),-1),this._emptyDEMTextureDirty=!this._initializing);const C=this.proxyCoords=p.getIds().map(z=>{const H=p.getTileByID(z).tileID;return H.projMatrix=b.calculateProjMatrix(H.toUnwrapped()),H});(function(z,H){const W=H.transform.pointCoordinate(H.transform.getCameraPoint()),J=new _.pointGeometry(W.x,W.y);z.sort((re,he)=>{if(he.overscaledZ-re.overscaledZ)return he.overscaledZ-re.overscaledZ;const ue=new _.pointGeometry(re.canonical.x+(1<<re.canonical.z)*re.wrap,re.canonical.y),le=new _.pointGeometry(he.canonical.x+(1<<he.canonical.z)*he.wrap,he.canonical.y),de=J.mult(1<<re.canonical.z);return de.x-=.5,de.y-=.5,de.distSqr(ue)-de.distSqr(le)})})(C,this.painter),this._previousZoom=b.zoom;const S=this.proxyToSource||{};this.proxyToSource={},C.forEach(z=>{this.proxyToSource[z.key]={}}),this.terrainTileForTile={};const O=this._style._sourceCaches;for(const z in O){const H=O[z];if(!H.used||(H!==this.sourceCache&&this.resetTileLookupCache(H.id),this._setupProxiedCoordsForOrtho(H,h[z],S),H.usedForTerrain))continue;const W=h[z];H.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[p.id]=C.map(z=>new _0(z,z.key,this.orthoMatrix)),this._assignTerrainTiles(C),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1,this._updateTimestamp=_.exported.now();const R={};this._visibleDemTiles=[];for(const z of this.proxyCoords){const H=this.terrainTileForTile[z.key];if(!H)continue;const W=H.tileID.key;W in R||(this._visibleDemTiles.push(H),R[W]=W)}}_assignTerrainTiles(h){this._initializing||h.forEach(p=>{if(this.terrainTileForTile[p.key])return;const b=this._findTileCoveringTileID(p,this.sourceCache);b&&(this.terrainTileForTile[p.key]=b)})}_prepareDEMTextures(){const h=this.painter.context,p=h.gl;for(const b in this.terrainTileForTile){const C=this.terrainTileForTile[b],S=C.dem;!S||C.demTexture&&!C.needsDEMTextureUpload||(h.activeTexture.set(p.TEXTURE1),Gf(this.painter,C,S))}}_prepareDemTileUniforms(h,p,b,C){if(!p||null==p.demTexture)return!1;const S=h.tileID.canonical,O=Math.pow(2,p.tileID.canonical.z-S.z),R=C||"";return b[`u_dem_tl${R}`]=[S.x*O%1,S.y*O%1],b[`u_dem_scale${R}`]=O,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const h=this.painter.context,p=h.gl;if(!this._emptyDepthBufferTexture){const b=new _.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new _.Texture(h,b,p.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let h=0;const p=this._visibleDemTiles.reduce((b,C)=>{if(!C.dem)return b;const S=C.dem.tree.minimums[0];return S>0&&h++,b+S},0);return h?p/h:0}_updateEmptyDEMTexture(){const h=this.painter.context,p=h.gl;h.activeTexture.set(p.TEXTURE2);const b=this._getLoadedAreaMinimum(),C=new _.RGBAImage({width:1,height:1},new Uint8Array(_.DEMData.pack(b,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(C,{premultiply:!1}):S=this._emptyDEMTexture=new _.Texture(h,C,p.RGBA,{premultiply:!1}),S}setupElevationDraw(h,p,b){const C=this.painter.context,S=C.gl,O=(R=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:_.DEMData.getUnpackVector(R),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var R;O.u_dem_size=this.sourceCache.getSource().tileSize,O.u_exaggeration=this.exaggeration();let z=null,H=null,W=1;if(b&&b.morphing&&this._useVertexMorphing){const J=b.morphing.srcDemTile,re=b.morphing.dstDemTile;W=b.morphing.phase,J&&re&&(this._prepareDemTileUniforms(h,J,O,"_prev")&&(H=J),this._prepareDemTileUniforms(h,re,O)&&(z=re))}if(H&&z?(C.activeTexture.set(S.TEXTURE2),z.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),C.activeTexture.set(S.TEXTURE4),H.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),O.u_dem_lerp=W):(z=this.terrainTileForTile[h.tileID.key],C.activeTexture.set(S.TEXTURE2),(this._prepareDemTileUniforms(h,z,O)?z.demTexture:this.emptyDEMTexture).bind(S.NEAREST,S.CLAMP_TO_EDGE)),C.activeTexture.set(S.TEXTURE3),b&&b.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),this._depthFBO&&(O.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),O.u_depth_size_inv=[1,1]),b&&b.useMeterToDem&&z){const J=(1<<z.tileID.canonical.z)*_.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;O.u_meter_to_dem=J}if(b&&b.labelPlaneMatrixInv&&(O.u_label_plane_matrix_inv=b.labelPlaneMatrixInv),p.setTerrainUniformValues(C,O),"globe"===this.painter.transform.projection.name){const J=this.globeUniformValues(this.painter.transform,h.tileID.canonical,b&&b.useDenormalizedUpVectorScale);p.setGlobeUniformValues(C,J)}}globeUniformValues(h,p,b){const C=h.projection;return{u_tile_tl_up:C.upVector(p,0,0),u_tile_tr_up:C.upVector(p,_.EXTENT,0),u_tile_br_up:C.upVector(p,_.EXTENT,_.EXTENT),u_tile_bl_up:C.upVector(p,0,_.EXTENT),u_tile_up_scale:b?_.globeMetersToEcef(1):C.upVectorScale(p,h.center.lat,h.worldSize).metersToTile}}renderToBackBuffer(h){const p=this.painter,b=this.painter.context;0!==h.length&&(b.bindFramebuffer.set(null),b.viewport.set([0,0,p.width,p.height]),p.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(C,S,O,R,z){if("globe"===C.transform.projection.name)!function(H,W,J,re,he){const ue=H.context,le=ue.gl;let de,ne;const be=H.options.showTerrainWireframe?2:0,ve=H.transform,Ce=_.globeUseCustomAntiAliasing(H,ue,ve),Be=(Ot,st)=>{if(ne===Ot)return;const Ye=[Eu[Ot],"PROJECTION_GLOBE_VIEW"];Ce&&Ye.push("CUSTOM_ANTIALIASING"),st&&Ye.push(Eu[be]),de=H.useProgram("globeRaster",null,Ye),ne=Ot},Le=H.colorModeForRenderPass(),Ue=new _.DepthMode(le.LEQUAL,_.DepthMode.ReadWrite,H.depthRangeFor3D);Jt.update(he);const Ge=_.calculateGlobeMercatorMatrix(ve),tt=[_.mercatorXfromLng(ve.center.lng),_.mercatorYfromLat(ve.center.lat)],it=be?[!1,!0]:[!1],Ht=H.globeSharedBuffers,Ke=[ve.width*_.exported.devicePixelRatio,ve.height*_.exported.devicePixelRatio],Tt=Float32Array.from(ve.globeMatrix),at={useDenormalizedUpVectorScale:!0};if(it.forEach(Ot=>{const st=H.transform,Ye=pr(st.zoom)*W.exaggeration();ne=-1;const ot=Ot?le.LINES:le.TRIANGLES;for(const kt of re){const Nt=J.getTile(kt),wn=_.StencilMode.disabled,sr=W.prevTerrainTileForTile[kt.key],yn=W.terrainTileForTile[kt.key];g0(sr,yn)&&Jt.newMorphing(kt.key,sr,yn,he,250),ue.activeTexture.set(le.TEXTURE0),Nt.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const rn=Jt.getMorphValuesForProxy(kt.key),Cn=rn?1:0;rn&&_.extend$1(at,{morphing:{srcDemTile:rn.from,dstDemTile:rn.to,phase:_.easeCubicInOut(rn.phase)}});const mr=_.tileCornersToBounds(kt.canonical),En=_.getLatitudinalLod(mr.getCenter().lat),jr=_.getGridMatrix(kt.canonical,mr,En,st.worldSize/st._pixelsPerMercatorPixel),oi=_.globeNormalizeECEF(_.globeTileBounds(kt.canonical)),ai=Fc(st.projMatrix,Tt,Ge,oi,_.globeToMercatorTransition(st.zoom),tt,st.frustumCorners.TL,st.frustumCorners.TR,st.frustumCorners.BR,st.frustumCorners.BL,st.globeCenterInViewSpace,st.globeRadius,Ke,Ye,jr);if(Be(Cn,Ot),W.setupElevationDraw(Nt,de,at),H.prepareDrawProgram(ue,de,kt.toUnwrapped()),Ht){const[xi,Wi,Po]=Ot?Ht.getWirefameBuffers(H.context,En):Ht.getGridBuffers(En,0!==Ye);de.draw(ue,ot,Ue,wn,Le,_.CullFaceMode.backCCW,ai,"globe_raster",xi,Wi,Po)}}}),Ht){const Ot=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ce&&Ot.push("CUSTOM_ANTIALIASING"),de=H.useProgram("globeRaster",null,Ot);for(const st of re){const{x:Ye,y:ot,z:kt}=st.canonical,Nt=0===ot,wn=ot===(1<<kt)-1,[sr,yn,rn,Cn]=Ht.getPoleBuffers(kt);if(Cn&&(Nt||wn)){const mr=J.getTile(st);ue.activeTexture.set(le.TEXTURE0),mr.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let En=_.globePoleMatrixForTile(kt,Ye,ve);const jr=_.globeNormalizeECEF(_.globeTileBounds(st.canonical)),oi=(ai,xi)=>ai.draw(ue,le.TRIANGLES,Ue,_.StencilMode.disabled,Le,_.CullFaceMode.disabled,Fc(ve.projMatrix,En,En,jr,0,tt,ve.frustumCorners.TL,ve.frustumCorners.TR,ve.frustumCorners.BR,ve.frustumCorners.BL,ve.globeCenterInViewSpace,ve.globeRadius,Ke,0),"globe_pole_raster",xi,rn,Cn);W.setupElevationDraw(mr,de,at),H.prepareDrawProgram(ue,de,st.toUnwrapped()),Nt&&oi(de,sr),wn&&(En=_.scale(_.create(),En,[1,-1,1]),oi(de,yn))}}}}(C,S,O,R,z);else{const H=C.context,W=H.gl;let J,re;const he=C.options.showTerrainWireframe?2:0,ue=(ve,Ce)=>{if(re===ve)return;const Be=[Eu[ve]];Ce&&Be.push(Eu[he]),J=C.useProgram("terrainRaster",null,Be),re=ve},le=C.colorModeForRenderPass(),de=new _.DepthMode(W.LEQUAL,_.DepthMode.ReadWrite,C.depthRangeFor3D);Jt.update(z);const ne=C.transform,be=pr(ne.zoom)*S.exaggeration();(he?[!1,!0]:[!1]).forEach(ve=>{re=-1;const Ce=ve?W.LINES:W.TRIANGLES,[Be,Le]=ve?S.getWirefameBuffer():[S.gridIndexBuffer,S.gridSegments];for(const Ue of R){const Ge=O.getTile(Ue),tt=_.StencilMode.disabled,it=S.prevTerrainTileForTile[Ue.key],Ht=S.terrainTileForTile[Ue.key];g0(it,Ht)&&Jt.newMorphing(Ue.key,it,Ht,z,250),H.activeTexture.set(W.TEXTURE0),Ge.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const Ke=Jt.getMorphValuesForProxy(Ue.key),Tt=Ke?1:0;let at;Ke&&(at={morphing:{srcDemTile:Ke.from,dstDemTile:Ke.to,phase:_.easeCubicInOut(Ke.phase)}});const Ot=Ch(Ue.projMatrix,yd(Ue.canonical,ne.renderWorldCopies)?be/10:be);ue(Tt,ve),S.setupElevationDraw(Ge,J,at),C.prepareDrawProgram(H,J,Ue.toUnwrapped()),J.draw(H,Ce,de,tt,le,_.CullFaceMode.backCCW,Ot,"terrain_raster",S.gridBuffer,Be,Le)}})}}(p,this,this.proxySourceCache,h,this._updateTimestamp),this.renderingToTexture=!0,p.gpuTimingDeferredRenderEnd(),h.splice(0,h.length))}renderBatch(h){if(0===this._drapedRenderBatches.length)return h+1;this.renderingToTexture=!0;const p=this.painter,b=this.painter.context,C=this.proxySourceCache,S=this.proxiedCoords[C.id],O=this._drapedRenderBatches.shift(),R=[],z=p.style.order;let H=0;for(const W of S){const J=C.getTileByID(W.proxyTileKey),re=C.proxyCachedFBO[W.key]?C.proxyCachedFBO[W.key][h]:void 0,he=void 0!==re?C.renderCache[re]:this.pool[H++],ue=void 0!==re;if(J.texture=he.tex,ue&&!he.dirty){R.push(J.tileID);continue}let le;b.bindFramebuffer.set(he.fb.framebuffer),this.renderedToTile=!1,he.dirty&&(b.clear({color:_.Color.transparent,stencil:0}),he.dirty=!1);for(let de=O.start;de<=O.end;++de){const ne=p.style._layers[z[de]];if(ne.isHidden(p.transform.zoom))continue;const be=p.style._getLayerSourceCache(ne),ve=be?this.proxyToSource[W.key][be.id]:[W];if(!ve)continue;const Ce=ve;b.viewport.set([0,0,he.fb.width,he.fb.height]),le!==(be?be.id:null)&&(this._setupStencil(he,ve,ne,be),le=be?be.id:null),p.renderLayer(p,be,ne,Ce)}this.renderedToTile?(he.dirty=!0,R.push(J.tileID)):ue||--H,5===H&&(H=0,this.renderToBackBuffer(R))}return this.renderToBackBuffer(R),this.renderingToTexture=!1,b.bindFramebuffer.set(null),b.viewport.set([0,0,p.width,p.height]),O.end+1}postRender(){}renderCacheEfficiency(h){const p=h.order.length;if(0===p)return{efficiency:100};let b,C=0,S=0,O=!1;for(let R=0;R<p;++R){const z=h._layers[h.order[R]];this._style.isLayerDraped(z)?(O&&++C,++S):O||(O=!0,b=z.id)}return 0===S?{efficiency:100}:{efficiency:100*(1-C/S),firstUndrapedLayer:b}}getMinElevationBelowMSL(){let h=0;return this._visibleDemTiles.filter(p=>p.dem).forEach(p=>{h=Math.min(h,p.dem.tree.minimums[0])}),0===h?h:(h-30)*this._exaggeration}raycast(h,p,b){if(!this._visibleDemTiles)return null;const C=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const O=S.tileID,R=1<<O.overscaledZ,{x:z,y:H}=O.canonical,W=z/R,J=(z+1)/R,re=H/R,he=(H+1)/R;return{minx:W,miny:re,maxx:J,maxy:he,t:S.dem.tree.raycastRoot(W,re,J,he,h,p,b),tile:S}});C.sort((S,O)=>(null!==S.t?S.t:Number.MAX_VALUE)-(null!==O.t?O.t:Number.MAX_VALUE));for(const S of C){if(null==S.t)return null;const O=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,h,p,b);if(null!=O)return O}return null}_createFBO(){const h=this.painter.context,p=h.gl,b=this.drapeBufferSize;h.activeTexture.set(p.TEXTURE0);const C=new _.Texture(h,{width:b[0],height:b[1],data:null},p.RGBA);C.bind(p.LINEAR,p.CLAMP_TO_EDGE);const S=h.createFramebuffer(b[0],b[1],!1);return S.colorAttachment.set(C.texture),S.depthAttachment=new Bf(h,S.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=h.createRenderbuffer(h.gl.DEPTH_STENCIL,b[0],b[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),h.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),h.extTextureFilterAnisotropic&&!h.extTextureFilterAnisotropicForceOff&&p.texParameterf(p.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax),{fb:S,tex:C,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const h in this._style._sourceCaches)if(this._style._sourceCaches[h].hasTransition())return!0;return this._style.order.some(h=>{const p=this._style._layers[h],b=p.isHidden(this.painter.transform.zoom);return"custom"===p.type?!b&&p.shouldRedrape():!b&&p.hasTransition()})}_clearLineLayersFromRenderCache(){let h=!1;for(const b of this._style._getSources())if(b instanceof K){h=!0;break}if(!h)return;const p={};for(let b=0;b<this._style.order.length;++b){const C=this._style._layers[this._style.order[b]],S=this._style._getLayerSourceCache(C);if(S&&!p[S.id]&&!C.isHidden(this.painter.transform.zoom)&&"line"===C.type&&C.widthExpression()instanceof _.ZoomDependentExpression){p[S.id]=!0;for(const O of this.proxyCoords){const R=this.proxyToSource[O.key][S.id];if(R)for(const z of R)this._clearRenderCacheForTile(S.id,z)}}}}_clearRasterLayersFromRenderCache(){let h=!1;for(const b in this._style._sourceCaches)if(this._style._sourceCaches[b]._source instanceof te){h=!0;break}if(!h)return;const p={};for(let b=0;b<this._style.order.length;++b){const C=this._style._layers[this._style.order[b]],S=this._style._getLayerSourceCache(C);if(!S||p[S.id]||C.isHidden(this.painter.transform.zoom)||"raster"!==C.type)continue;const O=C.paint.get("raster-fade-duration");for(const R of this.proxyCoords){const z=this.proxyToSource[R.key][S.id];if(z)for(const H of z){const W=Rc(S.getTile(H),S.findLoadedParent(H,0),S,this.painter.transform,O);(1!==W.opacity||0!==W.mix)&&this._clearRenderCacheForTile(S.id,H)}}}}_setupDrapedRenderBatches(){const h=this._style.order,p=h.length;if(0===p)return;const b=[];let C,S=0,O=this._style._layers[h[S]];for(;!this._style.isLayerDraped(O)&&O.isHidden(this.painter.transform.zoom)&&++S<p;)O=this._style._layers[h[S]];for(;S<p;++S){const R=this._style._layers[h[S]];R.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(R)?void 0===C&&(C=S):void 0!==C&&(b.push({start:C,end:S-1}),C=void 0))}void 0!==C&&b.push({start:C,end:S-1}),this._drapedRenderBatches=b}_setupRenderCache(h){const p=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,p.renderCache.length>p.renderCachePool.length){const O=Object.values(p.proxyCachedFBO);p.proxyCachedFBO={};for(let R=0;R<O.length;++R){const z=Object.values(O[R]);p.renderCachePool.push(...z)}}return}this._clearRasterLayersFromRenderCache();const b=this.proxyCoords,C=this._tilesDirty;for(let O=b.length-1;O>=0;O--){const R=b[O];if(p.getTileByID(R.key),void 0!==p.proxyCachedFBO[R.key]){const z=h[R.key],H=this.proxyToSource[R.key];let W=0;for(const J in H){const re=H[J],he=z[J];if(!he||he.length!==re.length||re.some((ue,le)=>ue!==he[le]||C[J]&&C[J].hasOwnProperty(ue.key))){W=-1;break}++W}for(const J in p.proxyCachedFBO[R.key])p.renderCache[p.proxyCachedFBO[R.key][J]].dirty=W<0||W!==Object.values(z).length}}const S=[...this._drapedRenderBatches];S.sort((O,R)=>R.end-R.start-(O.end-O.start));for(const O of S)for(const R of b){if(p.proxyCachedFBO[R.key])continue;let z=p.renderCachePool.pop();void 0===z&&p.renderCache.length<50&&(z=p.renderCache.length,p.renderCache.push(this._createFBO())),void 0!==z&&(p.proxyCachedFBO[R.key]={},p.proxyCachedFBO[R.key][O.start]=z,p.renderCache[z].dirty=!0)}this._tilesDirty={}}_setupStencil(h,p,b,C){if(!C||!this._sourceTilesOverlap[C.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,O=S.gl;if(p.length<=1)return void(this._overlapStencilType=!1);let R;if(b.isTileClipped())R=p.length,this._overlapStencilMode.test={func:O.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(p[0].overscaledZ>p[p.length-1].overscaledZ))return void(this._overlapStencilType=!1);R=1,this._overlapStencilMode.test={func:O.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+R>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=R,this._overlapStencilMode.ref=this._stencilRef,b.isTileClipped()&&this._renderTileClippingMasks(p,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(h){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[h.key]),this._overlapStencilMode):_.StencilMode.disabled}_renderTileClippingMasks(h,p){const b=this.painter,C=this.painter.context,S=C.gl;b._tileClippingMaskIDs={},C.setColorMode(_.ColorMode.disabled),C.setDepthMode(_.DepthMode.disabled);const O=b.useProgram("clippingMask");for(const R of h){const z=b._tileClippingMaskIDs[R.key]=--p;O.draw(C,S.TRIANGLES,_.DepthMode.disabled,new _.StencilMode({func:S.ALWAYS,mask:0},z,255,S.KEEP,S.KEEP,S.REPLACE),_.ColorMode.disabled,_.CullFaceMode.disabled,Er(R.projMatrix),"$clipping",b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}}pointCoordinate(h){const p=this.painter.transform;if(h.x<0||h.x>p.width||h.y<0||h.y>p.height)return null;const b=[h.x,h.y,1,1];_.transformMat4$1(b,b,p.pixelMatrixInverse),_.scale$1(b,b,1/b[3]),b[0]/=p.worldSize,b[1]/=p.worldSize;const C=p._camera.position,S=_.mercatorZfromAltitude(1,p.center.lat),O=[C[0],C[1],C[2]/S,0],R=_.subtract([],b.slice(0,3),O);_.normalize(R,R);const z=this.raycast(O,R,this._exaggeration);return null!==z&&z?(_.scaleAndAdd(O,O,R,z),O[3]=O[2],O[2]*=S,O):null}drawDepth(){const h=this.painter,p=h.context,b=this.proxySourceCache,C=Math.ceil(h.width),S=Math.ceil(h.height);if(!this._depthFBO||this._depthFBO.width===C&&this._depthFBO.height===S||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const O=p.gl,R=p.createFramebuffer(C,S,!0);p.activeTexture.set(O.TEXTURE0);const z=new _.Texture(p,{width:C,height:S,data:null},O.RGBA);z.bind(O.NEAREST,O.CLAMP_TO_EDGE),R.colorAttachment.set(z.texture);const H=p.createRenderbuffer(p.gl.DEPTH_COMPONENT16,C,S);R.depthAttachment.set(H),this._depthFBO=R,this._depthTexture=z}p.bindFramebuffer.set(this._depthFBO.framebuffer),p.viewport.set([0,0,C,S]),function(O,R,z,H){if("globe"===O.transform.projection.name)return;const W=O.context,J=W.gl;W.clear({depth:1});const re=O.useProgram("terrainDepth"),he=new _.DepthMode(J.LESS,_.DepthMode.ReadWrite,O.depthRangeFor3D);for(const ue of H){const le=z.getTile(ue),de=Ch(ue.projMatrix,0);R.setupElevationDraw(le,re),re.draw(W,J.TRIANGLES,he,_.StencilMode.disabled,_.ColorMode.unblended,_.CullFaceMode.backCCW,de,"terrain_depth",R.gridBuffer,R.gridIndexBuffer,R.gridNoSkirtSegments)}}(h,this,b,this.proxyCoords)}_setupProxiedCoordsForOrtho(h,p,b){if(h.getSource()instanceof Ve)return this._setupProxiedCoordsForImageSource(h,p,b);this._findCoveringTileCache[h.id]=this._findCoveringTileCache[h.id]||{};const C=this.proxiedCoords[h.id]=[],S=this.proxyCoords;for(let R=0;R<S.length;R++){const z=S[R],H=this._findTileCoveringTileID(z,h);if(H){const W=this._createProxiedId(z,H,b[z.key]&&b[z.key][h.id]);C.push(W),this.proxyToSource[z.key][h.id]=[W]}}let O=!1;for(let R=0;R<p.length;R++){const z=h.getTile(p[R]);if(!z||!z.hasData())continue;const H=this._findTileCoveringTileID(z.tileID,this.proxySourceCache);if(H&&H.tileID.canonical.z!==z.tileID.canonical.z){const W=this.proxyToSource[H.tileID.key][h.id],J=this._createProxiedId(H.tileID,z,b[H.tileID.key]&&b[H.tileID.key][h.id]);W?W.splice(W.length-1,0,J):this.proxyToSource[H.tileID.key][h.id]=[J],C.push(J),O=!0}}this._sourceTilesOverlap[h.id]=O}_setupProxiedCoordsForImageSource(h,p,b){if(!h.getSource().loaded())return;const C=this.proxiedCoords[h.id]=[],S=this.proxyCoords,O=h.getSource(),R=new _.pointGeometry(O.tileID.x,O.tileID.y)._div(1<<O.tileID.z),z=O.coordinates.map(_.MercatorCoordinate.fromLngLat).reduce((W,J)=>(W.min.x=Math.min(W.min.x,J.x-R.x),W.min.y=Math.min(W.min.y,J.y-R.y),W.max.x=Math.max(W.max.x,J.x-R.x),W.max.y=Math.max(W.max.y,J.y-R.y),W),{min:new _.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new _.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),H=(W,J)=>{const re=W.wrap+W.canonical.x/(1<<W.canonical.z),he=W.canonical.y/(1<<W.canonical.z),ue=_.EXTENT/(1<<W.canonical.z),le=J.wrap+J.canonical.x/(1<<J.canonical.z),de=J.canonical.y/(1<<J.canonical.z);return re+ue<le+z.min.x||re>le+z.max.x||he+ue<de+z.min.y||he>de+z.max.y};for(let W=0;W<S.length;W++){const J=S[W];for(let re=0;re<p.length;re++){const he=h.getTile(p[re]);if(!he||!he.hasData()||H(J,he.tileID))continue;const ue=this._createProxiedId(J,he,b[J.key]&&b[J.key][h.id]),le=this.proxyToSource[J.key][h.id];le?le.push(ue):this.proxyToSource[J.key][h.id]=[ue],C.push(ue)}}}_createProxiedId(h,p,b){let C=this.orthoMatrix;if(b){const S=b.find(O=>O.key===p.tileID.key);if(S)return S}if(p.tileID.key!==h.key){const S=h.canonical.z-p.tileID.canonical.z;let O,R,z;C=_.create();const H=p.tileID.wrap-h.wrap<<h.overscaledZ;S>0?(O=_.EXTENT>>S,R=O*((p.tileID.canonical.x<<S)-h.canonical.x+H),z=O*((p.tileID.canonical.y<<S)-h.canonical.y)):(O=_.EXTENT<<-S,R=_.EXTENT*(p.tileID.canonical.x-(h.canonical.x+H<<-S)),z=_.EXTENT*(p.tileID.canonical.y-(h.canonical.y<<-S))),_.ortho(C,0,O,0,O,0,1),_.translate(C,C,[R,z,0])}return new _0(p.tileID,h.key,C)}_findTileCoveringTileID(h,p){let b=p.getTile(h);if(b&&b.hasData())return b;const C=this._findCoveringTileCache[p.id],S=C[h.key];if(b=S?p.getTileByID(S):null,b&&b.hasData()||null===S)return b;let O=b?b.tileID:h,R=O.overscaledZ;const z=p.getSource().minzoom,H=[];if(!S){const J=p.getSource().maxzoom;if(h.canonical.z>=J){const re=h.canonical.z-J;p.getSource().reparseOverscaled?(R=Math.max(h.canonical.z+2,p.transform.tileZoom),O=new _.OverscaledTileID(R,h.wrap,J,h.canonical.x>>re,h.canonical.y>>re)):0!==re&&(R=J,O=new _.OverscaledTileID(R,h.wrap,J,h.canonical.x>>re,h.canonical.y>>re))}O.key!==h.key&&(H.push(O.key),b=p.getTile(O))}const W=J=>{H.forEach(re=>{C[re]=J}),H.length=0};for(R-=1;R>=z&&(!b||!b.hasData());R--){b&&W(b.tileID.key);const J=O.calculateScaledKey(R);if(b=p.getTileByID(J),b&&b.hasData())break;const re=C[J];if(null===re)break;void 0===re?H.push(J):b=p.getTileByID(re)}return W(b?b.tileID.key:null),b&&b.hasData()?b:null}findDEMTileFor(h){return this.enabled?this._findTileCoveringTileID(h,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(h,p){let b=this._tilesDirty[h];b||(b=this._tilesDirty[h]={}),b[p.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const h=function(p){let b=0;const C=new _.StructArrayLayout2ui4,S=131;for(let O=1;O<129;O++){for(let R=1;R<129;R++)b=O*S+R,C.emplaceBack(b,b+1),C.emplaceBack(b,b+S),C.emplaceBack(b+1,b+S),128===O&&C.emplaceBack(b+S,b+S+1);C.emplaceBack(b+1,b+1+S)}return C}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(h),this.wireframeSegments=_.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,h.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ka{static cacheKey(h,p,b,C){let S=`${p}${C?C.cacheKey:""}`;for(const O of b)h.usedDefines.includes(O)&&(S+=`/${O}`);return S}constructor(h,p,b,C,S,O){const R=h.gl;this.program=R.createProgram();const z=function(ne){const be=[];for(let ve=0;ve<ne.length;ve++){if(null===ne[ve])continue;const Ce=ne[ve].split(" ");be.push(Ce.pop())}return be}(b.staticAttributes),H=C?C.getBinderAttributes():[],W=z.concat(H);let J=C?C.defines():[];J=J.concat(O.map(ne=>`#define ${ne}`));const re=h.isWebGL2?"#version 300 es\n":"",he=re+J.concat(h.extStandardDerivatives&&0===re.length?"#extension GL_OES_standard_derivatives : enable\n".concat(m0):m0,m0,Ai,Px.fragmentSource,pa.fragmentSource,b.fragmentSource).join("\n"),ue=re+J.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ai,Px.vertexSource,pa.vertexSource,p0.vertexSource,b.vertexSource).join("\n"),le=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);R.shaderSource(le,he),R.compileShader(le),R.attachShader(this.program,le);const de=R.createShader(R.VERTEX_SHADER);if(R.isContextLost())this.failedToCreate=!0;else{R.shaderSource(de,ue),R.compileShader(de),R.attachShader(this.program,de),this.attributes={},this.numAttributes=W.length;for(let ne=0;ne<this.numAttributes;ne++)W[ne]&&(R.bindAttribLocation(this.program,ne,W[ne]),this.attributes[W[ne]]=ne);R.linkProgram(this.program),R.deleteShader(de),R.deleteShader(le),this.fixedUniforms=S(h),this.binderUniforms=C?C.getUniforms(h):[],O.includes("TERRAIN")&&(this.terrainUniforms={u_dem:new _.Uniform1i(ne=h),u_dem_prev:new _.Uniform1i(ne),u_dem_unpack:new _.Uniform4f(ne),u_dem_tl:new _.Uniform2f(ne),u_dem_scale:new _.Uniform1f(ne),u_dem_tl_prev:new _.Uniform2f(ne),u_dem_scale_prev:new _.Uniform1f(ne),u_dem_size:new _.Uniform1f(ne),u_dem_lerp:new _.Uniform1f(ne),u_exaggeration:new _.Uniform1f(ne),u_depth:new _.Uniform1i(ne),u_depth_size_inv:new _.Uniform2f(ne),u_meter_to_dem:new _.Uniform1f(ne),u_label_plane_matrix_inv:new _.UniformMatrix4f(ne)}),O.includes("GLOBE")&&(this.globeUniforms=(ne=>({u_tile_tl_up:new _.Uniform3f(ne),u_tile_tr_up:new _.Uniform3f(ne),u_tile_br_up:new _.Uniform3f(ne),u_tile_bl_up:new _.Uniform3f(ne),u_tile_up_scale:new _.Uniform1f(ne)}))(h)),O.includes("FOG")&&(this.fogUniforms=(ne=>({u_fog_matrix:new _.UniformMatrix4f(ne),u_fog_range:new _.Uniform2f(ne),u_fog_color:new _.Uniform4f(ne),u_fog_horizon_blend:new _.Uniform1f(ne),u_fog_temporal_offset:new _.Uniform1f(ne),u_frustum_tl:new _.Uniform3f(ne),u_frustum_tr:new _.Uniform3f(ne),u_frustum_br:new _.Uniform3f(ne),u_frustum_bl:new _.Uniform3f(ne),u_globe_pos:new _.Uniform3f(ne),u_globe_radius:new _.Uniform1f(ne),u_globe_transition:new _.Uniform1f(ne),u_is_globe:new _.Uniform1i(ne),u_viewport:new _.Uniform2f(ne)}))(h))}var ne}setTerrainUniformValues(h,p){if(!this.terrainUniforms)return;const b=this.terrainUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const C in p)b[C]&&b[C].set(this.program,C,p[C])}}setGlobeUniformValues(h,p){if(!this.globeUniforms)return;const b=this.globeUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const C in p)b[C]&&b[C].set(this.program,C,p[C])}}setFogUniformValues(h,p){if(!this.fogUniforms)return;const b=this.fogUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const C in p)b[C].set(this.program,C,p[C])}}draw(h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le){const de=h.gl;if(this.failedToCreate)return;h.program.set(this.program),h.setDepthMode(b),h.setStencilMode(C),h.setColorMode(S),h.setCullFace(O);for(const be of Object.keys(this.fixedUniforms))this.fixedUniforms[be].set(this.program,be,R[be]);ue&&ue.setUniforms(this.program,h,this.binderUniforms,re,{zoom:he});const ne={[de.LINES]:2,[de.TRIANGLES]:3,[de.LINE_STRIP]:1}[p];for(const be of J.get()){const ve=be.vaos||(be.vaos={});(ve[z]||(ve[z]=new wh)).bind(h,this,H,ue?ue.getPaintVertexBuffers():[],W,be.vertexOffset,le||[]),de.drawElements(p,be.primitiveLength*ne,de.UNSIGNED_SHORT,be.primitiveOffset*ne*2)}}}function Ja(v,h){const p=Math.pow(2,h.tileID.overscaledZ),b=h.tileSize*Math.pow(2,v.transform.tileZoom)/p,C=b*(h.tileID.canonical.x+h.tileID.wrap*p),S=b*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_tile_units_to_pixels:1/Zl(h,1,v.transform.tileZoom),u_pixel_coord_upper:[C>>16,S>>16],u_pixel_coord_lower:[65535&C,65535&S]}}const Nc=_.create(),Wr=(v,h,p,b,C,S,O,R,z,H,W)=>{const J=h.style.light,re=J.properties.get("position"),he=[re.x,re.y,re.z],ue=_.create$1();"viewport"===J.properties.get("anchor")&&(_.fromRotation(ue,-h.transform.angle),_.transformMat3(he,he,ue));const le=J.properties.get("color"),de=h.transform,ne={u_matrix:v,u_lightpos:he,u_lightintensity:J.properties.get("intensity"),u_lightcolor:[le.r,le.g,le.b],u_vertical_gradient:+p,u_opacity:b,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:C,u_edge_radius:S};return"globe"===de.projection.name&&(ne.u_tile_id=[O.canonical.x,O.canonical.y,1<<O.canonical.z],ne.u_zoom_transition=z,ne.u_inv_rot_matrix=W,ne.u_merc_center=H,ne.u_up_dir=de.projection.upVector(new _.CanonicalTileID(0,0,0),H[0]*_.EXTENT,H[1]*_.EXTENT),ne.u_height_lift=R),ne},vd=(v,h,p,b,C,S,O,R,z,H,W,J)=>{const re=Wr(v,h,p,b,C,S,O,z,H,W,J),he={u_height_factor:-Math.pow(2,O.overscaledZ)/R.tileSize/8};return _.extend(re,Ja(h,R),he)},xd=v=>({u_matrix:v}),bd=(v,h,p)=>_.extend(xd(v),Ja(h,p)),y0=(v,h)=>({u_matrix:v,u_world:h}),sc=(v,h,p,b)=>_.extend(bd(v,h,p),{u_world:b}),qf=_.create(),Xf=(v,h,p,b,C,S)=>{const O=v.transform,R="globe"===O.projection.name;let z;if("map"===S.paint.get("circle-pitch-alignment"))if(R){const W=_.globePixelsToTileUnits(O.zoom,h.canonical)*O._pixelsPerMercatorPixel;z=Float32Array.from([W,0,0,W])}else z=O.calculatePixelsToTileUnitsMatrix(p);else z=new Float32Array([O.pixelsToGLUnits[0],0,0,O.pixelsToGLUnits[1]]);const H={u_camera_to_center_distance:O.cameraToCenterDistance,u_matrix:v.translatePosMatrix(h.projMatrix,p,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_device_pixel_ratio:_.exported.devicePixelRatio,u_extrude_scale:z,u_inv_rot_matrix:qf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(R){H.u_inv_rot_matrix=b,H.u_merc_center=C,H.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],H.u_zoom_transition=_.globeToMercatorTransition(O.zoom);const W=C[0]*_.EXTENT,J=C[1]*_.EXTENT;H.u_up_dir=O.projection.upVector(new _.CanonicalTileID(0,0,0),W,J)}return H},bn=v=>{const h=[];return"map"===v.paint.get("circle-pitch-alignment")&&h.push("PITCH_WITH_MAP"),"map"===v.paint.get("circle-pitch-scale")&&h.push("SCALE_WITH_MAP"),h},$y=(v,h,p,b)=>{const C=_.EXTENT/p.tileSize;return{u_matrix:v,u_camera_to_center_distance:h.getCameraToCenterDistance(b),u_extrude_scale:[h.pixelsToGLUnits[0]/C,h.pixelsToGLUnits[1]/C]}},Zf=(v,h,p=1)=>({u_matrix:v,u_color:h,u_overlay:0,u_overlay_scale:p}),v0=_.create(),Vr=(v,h,p,b,C,S,O)=>{const R=v.transform,z="globe"===R.projection.name,H=z?_.globePixelsToTileUnits(R.zoom,h.canonical)*R._pixelsPerMercatorPixel:Zl(p,1,S),W={u_matrix:h.projMatrix,u_extrude_scale:H,u_intensity:O,u_inv_rot_matrix:v0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){W.u_inv_rot_matrix=b,W.u_merc_center=C,W.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],W.u_zoom_transition=_.globeToMercatorTransition(R.zoom);const J=C[0]*_.EXTENT,re=C[1]*_.EXTENT;W.u_up_dir=R.projection.upVector(new _.CanonicalTileID(0,0,0),J,re)}return W},x0=(v,h,p,b,C,S,O)=>{const R=v.transform,z=R.calculatePixelsToTileUnitsMatrix(h);return{u_matrix:so(v,h,p,b),u_pixels_to_tile_units:z,u_device_pixel_ratio:S,u_units_to_pixels:[1/R.pixelsToGLUnits[0],1/R.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:C,u_texsize:Xr(p)?h.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Un(h,v.transform),u_alpha_discard_threshold:0,u_trim_offset:O}},b0=(v,h,p,b,C)=>{const S=v.transform;return{u_matrix:so(v,h,p,b),u_texsize:h.imageAtlasTexture.size,u_pixels_to_tile_units:S.calculatePixelsToTileUnitsMatrix(h),u_device_pixel_ratio:C,u_image:0,u_tile_units_to_pixels:Un(h,S),u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Un(v,h){return 1/Zl(v,1,h.tileZoom)}function so(v,h,p,b){return v.translatePosMatrix(b||h.tileID.projMatrix,h,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}function Xr(v){const h=v.paint.get("line-dasharray").value;return h.value||"constant"!==h.kind}const Do=(v,h,p,b,C,S)=>{return{u_matrix:v,u_tl_parent:h,u_scale_parent:p,u_fade_t:b.mix,u_opacity:b.opacity*C.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:C.paint.get("raster-brightness-min"),u_brightness_high:C.paint.get("raster-brightness-max"),u_saturation_factor:(R=C.paint.get("raster-saturation"),R>0?1-1/(1.001-R):-R),u_contrast_factor:(O=C.paint.get("raster-contrast"),O>0?1/(1-O):1+O),u_spin_weights:Mo(C.paint.get("raster-hue-rotate")),u_perspective_transform:S};var O,R};function Mo(v){v*=Math.PI/180;const h=Math.sin(v),p=Math.cos(v);return[(2*p+1)/3,(-Math.sqrt(3)*h-p+1)/3,(Math.sqrt(3)*h-p+1)/3]}const Th=_.create(),oo=(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le)=>{const de=C.transform,ne={u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:de.cameraToCenterDistance,u_rotate_symbol:+p,u_aspect_ratio:de.width/de.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+z,u_pitch_with_map:+b,u_texsize:H,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Th,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Th,u_up_vector:[0,-1,0]};return"globe"===le.name&&(ne.u_tile_id=[W.canonical.x,W.canonical.y,1<<W.canonical.z],ne.u_zoom_transition=J,ne.u_inv_rot_matrix=he,ne.u_merc_center=re,ne.u_camera_forward=de._camera.forward(),ne.u_ecef_origin=_.globeECEFOrigin(de.globeMatrix,W.toUnwrapped()),ne.u_tile_matrix=Float32Array.from(de.globeMatrix),ne.u_up_vector=ue),ne},w0=(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le,de)=>_.extend(oo(v,h,p,b,C,S,O,R,z,H,J,re,he,ue,le,de),{u_gamma_scale:b?C.transform.cameraToCenterDistance*Math.cos(C.terrain?0:C.transform._pitch):1,u_device_pixel_ratio:_.exported.devicePixelRatio,u_is_halo:+W}),bm=(v,h,p,b,C,S,O,R,z,H,W,J,re,he,ue,le)=>_.extend(w0(v,h,p,b,C,S,O,R,!0,z,!0,W,J,re,he,ue,le),{u_texsize_icon:H,u_texture_icon:1}),wm=(v,h,p)=>({u_matrix:v,u_opacity:h,u_color:p}),Dl=(v,h,p,b,C)=>_.extend(function(S,O,R){const z=O.imageManager.getPattern(S.toString()),{width:H,height:W}=O.imageManager.getPixelSize(),J=Math.pow(2,R.tileID.overscaledZ),re=R.tileSize*Math.pow(2,O.transform.tileZoom)/J,he=re*(R.tileID.canonical.x+R.tileID.wrap*J),ue=re*R.tileID.canonical.y;return{u_image:0,u_pattern_tl:z.tl,u_pattern_br:z.br,u_texsize:[H,W],u_pattern_size:z.displaySize,u_tile_units_to_pixels:1/Zl(R,1,O.transform.tileZoom),u_pixel_coord_upper:[he>>16,ue>>16],u_pixel_coord_lower:[65535&he,65535&ue]}}(b,p,C),{u_matrix:v,u_opacity:h}),Dn={fillExtrusion:v=>({u_matrix:new _.UniformMatrix4f(v),u_lightpos:new _.Uniform3f(v),u_lightintensity:new _.Uniform1f(v),u_lightcolor:new _.Uniform3f(v),u_vertical_gradient:new _.Uniform1f(v),u_opacity:new _.Uniform1f(v),u_edge_radius:new _.Uniform1f(v),u_ao:new _.Uniform2f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_up_dir:new _.Uniform3f(v),u_height_lift:new _.Uniform1f(v)}),fillExtrusionPattern:v=>({u_matrix:new _.UniformMatrix4f(v),u_lightpos:new _.Uniform3f(v),u_lightintensity:new _.Uniform1f(v),u_lightcolor:new _.Uniform3f(v),u_vertical_gradient:new _.Uniform1f(v),u_height_factor:new _.Uniform1f(v),u_edge_radius:new _.Uniform1f(v),u_ao:new _.Uniform2f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_up_dir:new _.Uniform3f(v),u_height_lift:new _.Uniform1f(v),u_image:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_pixel_coord_upper:new _.Uniform2f(v),u_pixel_coord_lower:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v),u_opacity:new _.Uniform1f(v)}),fill:v=>({u_matrix:new _.UniformMatrix4f(v)}),fillPattern:v=>({u_matrix:new _.UniformMatrix4f(v),u_image:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_pixel_coord_upper:new _.Uniform2f(v),u_pixel_coord_lower:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v)}),fillOutline:v=>({u_matrix:new _.UniformMatrix4f(v),u_world:new _.Uniform2f(v)}),fillOutlinePattern:v=>({u_matrix:new _.UniformMatrix4f(v),u_world:new _.Uniform2f(v),u_image:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_pixel_coord_upper:new _.Uniform2f(v),u_pixel_coord_lower:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v)}),circle:v=>({u_camera_to_center_distance:new _.Uniform1f(v),u_extrude_scale:new _.UniformMatrix2f(v),u_device_pixel_ratio:new _.Uniform1f(v),u_matrix:new _.UniformMatrix4f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_up_dir:new _.Uniform3f(v)}),collisionBox:v=>({u_matrix:new _.UniformMatrix4f(v),u_camera_to_center_distance:new _.Uniform1f(v),u_extrude_scale:new _.Uniform2f(v)}),collisionCircle:v=>({u_matrix:new _.UniformMatrix4f(v),u_inv_matrix:new _.UniformMatrix4f(v),u_camera_to_center_distance:new _.Uniform1f(v),u_viewport_size:new _.Uniform2f(v)}),debug:v=>({u_color:new _.UniformColor(v),u_matrix:new _.UniformMatrix4f(v),u_overlay:new _.Uniform1i(v),u_overlay_scale:new _.Uniform1f(v)}),clippingMask:v=>({u_matrix:new _.UniformMatrix4f(v)}),heatmap:v=>({u_extrude_scale:new _.Uniform1f(v),u_intensity:new _.Uniform1f(v),u_matrix:new _.UniformMatrix4f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_up_dir:new _.Uniform3f(v)}),heatmapTexture:v=>({u_image:new _.Uniform1i(v),u_color_ramp:new _.Uniform1i(v),u_opacity:new _.Uniform1f(v)}),hillshade:v=>({u_matrix:new _.UniformMatrix4f(v),u_image:new _.Uniform1i(v),u_latrange:new _.Uniform2f(v),u_light:new _.Uniform2f(v),u_shadow:new _.UniformColor(v),u_highlight:new _.UniformColor(v),u_accent:new _.UniformColor(v)}),hillshadePrepare:v=>({u_matrix:new _.UniformMatrix4f(v),u_image:new _.Uniform1i(v),u_dimension:new _.Uniform2f(v),u_zoom:new _.Uniform1f(v),u_unpack:new _.Uniform4f(v)}),line:v=>({u_matrix:new _.UniformMatrix4f(v),u_pixels_to_tile_units:new _.UniformMatrix2f(v),u_device_pixel_ratio:new _.Uniform1f(v),u_units_to_pixels:new _.Uniform2f(v),u_dash_image:new _.Uniform1i(v),u_gradient_image:new _.Uniform1i(v),u_image_height:new _.Uniform1f(v),u_texsize:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v),u_alpha_discard_threshold:new _.Uniform1f(v),u_trim_offset:new _.Uniform2f(v)}),linePattern:v=>({u_matrix:new _.UniformMatrix4f(v),u_texsize:new _.Uniform2f(v),u_pixels_to_tile_units:new _.UniformMatrix2f(v),u_device_pixel_ratio:new _.Uniform1f(v),u_image:new _.Uniform1i(v),u_units_to_pixels:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v),u_alpha_discard_threshold:new _.Uniform1f(v)}),raster:v=>({u_matrix:new _.UniformMatrix4f(v),u_tl_parent:new _.Uniform2f(v),u_scale_parent:new _.Uniform1f(v),u_fade_t:new _.Uniform1f(v),u_opacity:new _.Uniform1f(v),u_image0:new _.Uniform1i(v),u_image1:new _.Uniform1i(v),u_brightness_low:new _.Uniform1f(v),u_brightness_high:new _.Uniform1f(v),u_saturation_factor:new _.Uniform1f(v),u_contrast_factor:new _.Uniform1f(v),u_spin_weights:new _.Uniform3f(v),u_perspective_transform:new _.Uniform2f(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new _.Uniform1i(v),u_is_size_feature_constant:new _.Uniform1i(v),u_size_t:new _.Uniform1f(v),u_size:new _.Uniform1f(v),u_camera_to_center_distance:new _.Uniform1f(v),u_rotate_symbol:new _.Uniform1i(v),u_aspect_ratio:new _.Uniform1f(v),u_fade_change:new _.Uniform1f(v),u_matrix:new _.UniformMatrix4f(v),u_label_plane_matrix:new _.UniformMatrix4f(v),u_coord_matrix:new _.UniformMatrix4f(v),u_is_text:new _.Uniform1i(v),u_pitch_with_map:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_camera_forward:new _.Uniform3f(v),u_tile_matrix:new _.UniformMatrix4f(v),u_up_vector:new _.Uniform3f(v),u_ecef_origin:new _.Uniform3f(v),u_texture:new _.Uniform1i(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new _.Uniform1i(v),u_is_size_feature_constant:new _.Uniform1i(v),u_size_t:new _.Uniform1f(v),u_size:new _.Uniform1f(v),u_camera_to_center_distance:new _.Uniform1f(v),u_rotate_symbol:new _.Uniform1i(v),u_aspect_ratio:new _.Uniform1f(v),u_fade_change:new _.Uniform1f(v),u_matrix:new _.UniformMatrix4f(v),u_label_plane_matrix:new _.UniformMatrix4f(v),u_coord_matrix:new _.UniformMatrix4f(v),u_is_text:new _.Uniform1i(v),u_pitch_with_map:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_texture:new _.Uniform1i(v),u_gamma_scale:new _.Uniform1f(v),u_device_pixel_ratio:new _.Uniform1f(v),u_tile_id:new _.Uniform3f(v),u_zoom_transition:new _.Uniform1f(v),u_inv_rot_matrix:new _.UniformMatrix4f(v),u_merc_center:new _.Uniform2f(v),u_camera_forward:new _.Uniform3f(v),u_tile_matrix:new _.UniformMatrix4f(v),u_up_vector:new _.Uniform3f(v),u_ecef_origin:new _.Uniform3f(v),u_is_halo:new _.Uniform1i(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new _.Uniform1i(v),u_is_size_feature_constant:new _.Uniform1i(v),u_size_t:new _.Uniform1f(v),u_size:new _.Uniform1f(v),u_camera_to_center_distance:new _.Uniform1f(v),u_rotate_symbol:new _.Uniform1i(v),u_aspect_ratio:new _.Uniform1f(v),u_fade_change:new _.Uniform1f(v),u_matrix:new _.UniformMatrix4f(v),u_label_plane_matrix:new _.UniformMatrix4f(v),u_coord_matrix:new _.UniformMatrix4f(v),u_is_text:new _.Uniform1i(v),u_pitch_with_map:new _.Uniform1i(v),u_texsize:new _.Uniform2f(v),u_texsize_icon:new _.Uniform2f(v),u_texture:new _.Uniform1i(v),u_texture_icon:new _.Uniform1i(v),u_gamma_scale:new _.Uniform1f(v),u_device_pixel_ratio:new _.Uniform1f(v),u_is_halo:new _.Uniform1i(v)}),background:v=>({u_matrix:new _.UniformMatrix4f(v),u_opacity:new _.Uniform1f(v),u_color:new _.UniformColor(v)}),backgroundPattern:v=>({u_matrix:new _.UniformMatrix4f(v),u_opacity:new _.Uniform1f(v),u_image:new _.Uniform1i(v),u_pattern_tl:new _.Uniform2f(v),u_pattern_br:new _.Uniform2f(v),u_texsize:new _.Uniform2f(v),u_pattern_size:new _.Uniform2f(v),u_pixel_coord_upper:new _.Uniform2f(v),u_pixel_coord_lower:new _.Uniform2f(v),u_tile_units_to_pixels:new _.Uniform1f(v)}),terrainRaster:Yf,terrainDepth:Yf,skybox:v=>({u_matrix:new _.UniformMatrix4f(v),u_sun_direction:new _.Uniform3f(v),u_cubemap:new _.Uniform1i(v),u_opacity:new _.Uniform1f(v),u_temporal_offset:new _.Uniform1f(v)}),skyboxGradient:v=>({u_matrix:new _.UniformMatrix4f(v),u_color_ramp:new _.Uniform1i(v),u_center_direction:new _.Uniform3f(v),u_radius:new _.Uniform1f(v),u_opacity:new _.Uniform1f(v),u_temporal_offset:new _.Uniform1f(v)}),skyboxCapture:v=>({u_matrix_3f:new _.UniformMatrix3f(v),u_sun_direction:new _.Uniform3f(v),u_sun_intensity:new _.Uniform1f(v),u_color_tint_r:new _.Uniform4f(v),u_color_tint_m:new _.Uniform4f(v),u_luminance:new _.Uniform1f(v)}),globeRaster:v=>({u_proj_matrix:new _.UniformMatrix4f(v),u_globe_matrix:new _.UniformMatrix4f(v),u_normalize_matrix:new _.UniformMatrix4f(v),u_merc_matrix:new _.UniformMatrix4f(v),u_zoom_transition:new _.Uniform1f(v),u_merc_center:new _.Uniform2f(v),u_image0:new _.Uniform1i(v),u_grid_matrix:new _.UniformMatrix3f(v),u_skirt_height:new _.Uniform1f(v),u_frustum_tl:new _.Uniform3f(v),u_frustum_tr:new _.Uniform3f(v),u_frustum_br:new _.Uniform3f(v),u_frustum_bl:new _.Uniform3f(v),u_globe_pos:new _.Uniform3f(v),u_globe_radius:new _.Uniform1f(v),u_viewport:new _.Uniform2f(v)}),globeAtmosphere:v=>({u_frustum_tl:new _.Uniform3f(v),u_frustum_tr:new _.Uniform3f(v),u_frustum_br:new _.Uniform3f(v),u_frustum_bl:new _.Uniform3f(v),u_horizon:new _.Uniform1f(v),u_transition:new _.Uniform1f(v),u_fadeout_range:new _.Uniform1f(v),u_color:new _.Uniform4f(v),u_high_color:new _.Uniform4f(v),u_space_color:new _.Uniform4f(v),u_star_intensity:new _.Uniform1f(v),u_star_density:new _.Uniform1f(v),u_star_size:new _.Uniform1f(v),u_temporal_offset:new _.Uniform1f(v),u_horizon_angle:new _.Uniform1f(v),u_rotation_matrix:new _.UniformMatrix4f(v)})};let Kn;function Xi(v,h,p,b,C,S,O){const R=v.context,z=R.gl,H=v.transform,W=v.useProgram("collisionBox"),J=[];let re=0,he=0;for(let Ce=0;Ce<b.length;Ce++){const Be=b[Ce],Le=h.getTile(Be),Ue=Le.getBucket(p);if(!Ue)continue;const Ge=nr(Be,Ue,H);let tt=Ge;0===C[0]&&0===C[1]||(tt=v.translatePosMatrix(Ge,Le,C,S));const it=O?Ue.textCollisionBox:Ue.iconCollisionBox,Ht=Ue.collisionCircleArray;if(Ht.length>0){const Ke=_.create(),Tt=tt;_.mul(Ke,Ue.placementInvProjMatrix,H.glCoordMatrix),_.mul(Ke,Ke,Ue.placementViewportMatrix),J.push({circleArray:Ht,circleOffset:he,transform:Tt,invTransform:Ke,projection:Ue.getProjection()}),re+=Ht.length/4,he=re}it&&(v.terrain&&v.terrain.setupElevationDraw(Le,W),W.draw(R,z.LINES,_.DepthMode.disabled,_.StencilMode.disabled,v.colorModeForRenderPass(),_.CullFaceMode.disabled,$y(tt,H,Le,Ue.getProjection()),p.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,null,H.zoom,null,[it.collisionVertexBuffer,it.collisionVertexBufferExt]))}if(!O||!J.length)return;const ue=v.useProgram("collisionCircle"),le=new _.StructArrayLayout2f1f2i16;le.resize(4*re),le._trim();let de=0;for(const Ce of J)for(let Be=0;Be<Ce.circleArray.length/4;Be++){const Le=4*Be,Ue=Ce.circleArray[Le+0],Ge=Ce.circleArray[Le+1],tt=Ce.circleArray[Le+2],it=Ce.circleArray[Le+3];le.emplace(de++,Ue,Ge,tt,it,0),le.emplace(de++,Ue,Ge,tt,it,1),le.emplace(de++,Ue,Ge,tt,it,2),le.emplace(de++,Ue,Ge,tt,it,3)}(!Kn||Kn.length<2*re)&&(Kn=function(Ce){const Be=2*Ce,Le=new _.StructArrayLayout3ui6;Le.resize(Be),Le._trim();for(let Ue=0;Ue<Be;Ue++){const Ge=6*Ue;Le.uint16[Ge+0]=4*Ue+0,Le.uint16[Ge+1]=4*Ue+1,Le.uint16[Ge+2]=4*Ue+2,Le.uint16[Ge+3]=4*Ue+2,Le.uint16[Ge+4]=4*Ue+3,Le.uint16[Ge+5]=4*Ue+0}return Le}(re));const ne=R.createIndexBuffer(Kn,!0),be=R.createVertexBuffer(le,_.collisionCircleLayout.members,!0);for(const Ce of J){const Be={u_matrix:Ce.transform,u_inv_matrix:Ce.invTransform,u_camera_to_center_distance:(ve=H).getCameraToCenterDistance(Ce.projection),u_viewport_size:[ve.width,ve.height]};ue.draw(R,z.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,v.colorModeForRenderPass(),_.CullFaceMode.disabled,Be,p.id,be,ne,_.SegmentVector.simpleSegment(0,2*Ce.circleOffset,Ce.circleArray.length,Ce.circleArray.length/2),null,H.zoom)}var ve;be.destroy(),ne.destroy()}const Ia=_.create();function Su({width:v,height:h,anchor:p,textOffset:b,textScale:C},S){const{horizontalAlign:O,verticalAlign:R}=_.getAnchorAlignment(p),z=-(O-.5)*v,H=-(R-.5)*h,W=_.evaluateVariableOffset(p,b);return new _.pointGeometry((z/C+W[0])*S,(H/C+W[1])*S)}function us(v,h,p,b,C,S,O,R,z,H,W){const J=v.text.placedSymbolArray,re=v.text.dynamicLayoutVertexArray,he=v.icon.dynamicLayoutVertexArray,ue={},le=v.getProjection(),de=qr(R,le,S),ne=S.elevation,be=le.upVectorScale(R.canonical,S.center.lat,S.worldSize).metersToTile;re.clear();for(let ve=0;ve<J.length;ve++){const Ce=J.get(ve),{tileAnchorX:Be,tileAnchorY:Le,numGlyphs:Ue}=Ce,tt=Ce.hidden||!Ce.crossTileID||v.allowVerticalPlacement&&!Ce.placedOrientation?null:b[Ce.crossTileID];if(tt){let it=0,Ht=0,Ke=0;if(ne){const wn=ne?ne.getAtTileOffset(R,Be,Le):0,[sr,yn,rn]=le.upVector(R.canonical,Be,Le);it=wn*sr*be,Ht=wn*yn*be,Ke=wn*rn*be}let[Tt,at,Ot,st]=Kt(Ce.projectedAnchorX+it,Ce.projectedAnchorY+Ht,Ce.projectedAnchorZ+Ke,p?de:O);const Ye=fr(S.getCameraToCenterDistance(le),st);let ot=C.evaluateSizeForFeature(v.textSizeData,H,Ce)*Ye/_.ONE_EM;p&&(ot*=v.tilePixelRatio/z);const kt=Su(tt,ot);p?(({x:Tt,y:at,z:Ot}=le.projectTilePoint(Be+kt.x,Le+kt.y,R.canonical)),[Tt,at,Ot]=Kt(Tt+it,at+Ht,Ot+Ke,O)):(h&&kt._rotate(-S.angle),Tt+=kt.x,at+=kt.y,Ot=0);const Nt=v.allowVerticalPlacement&&Ce.placedOrientation===_.WritingMode.vertical?Math.PI/2:0;for(let wn=0;wn<Ue;wn++)_.addDynamicAttributes(re,Tt,at,Ot,Nt);W&&Ce.associatedIconIndex>=0&&(ue[Ce.associatedIconIndex]={x:Tt,y:at,z:Ot,angle:Nt})}else fi(Ue,re)}if(W){he.clear();const ve=v.icon.placedSymbolArray;for(let Ce=0;Ce<ve.length;Ce++){const Be=ve.get(Ce),{numGlyphs:Le}=Be,Ue=ue[Ce];if(Be.hidden||!Ue)fi(Le,he);else{const{x:Ge,y:tt,z:it,angle:Ht}=Ue;for(let Ke=0;Ke<Le;Ke++)_.addDynamicAttributes(he,Ge,tt,it,Ht)}}v.icon.dynamicLayoutVertexBuffer.updateData(he)}v.text.dynamicLayoutVertexBuffer.updateData(re)}function wd(v,h,p){return p.iconsInText&&h?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function es(v,h,p,b,C,S,O,R,z,H,W,J){const re=v.context,he=re.gl,ue=v.transform,le="map"===R,de="map"===z,ne=le&&"point"!==p.layout.get("symbol-placement"),be=le&&!de&&!ne,ve=void 0!==p.layout.get("symbol-sort-key").constantOr(1);let Ce=!1;const Be=v.depthModeForSublayer(0,_.DepthMode.ReadOnly),Le=[_.mercatorXfromLng(ue.center.lng),_.mercatorYfromLat(ue.center.lat)],Ue=p.layout.get("text-variable-anchor"),Ge="globe"===ue.projection.name,tt=[],it=[0,-1,0];let Ht=it;!Ge&&!ue.mercatorFromTransition||le||(Ht=function(Ke){const Tt=Ke._camera.getWorldToCamera(Ke.worldSize,1),at=_.multiply([],Tt,Ke.globeMatrix);_.invert(at,at);const Ot=[0,0,0],st=[0,1,0,0];return _.transformMat4$1(st,st,at),Ot[0]=st[0],Ot[1]=st[1],Ot[2]=st[2],_.normalize(Ot,Ot),Ot}(ue));for(const Ke of b){const Tt=h.getTile(Ke),at=Tt.getBucket(p);if(!at||"mercator"===at.projection.name&&Ge)continue;const Ot=C?at.text:at.icon;if(!Ot||at.fullyClipped||!Ot.segments.get().length)continue;const st=Ot.programConfigurations.get(p.id),Ye=C||at.sdfIcons,ot=C?at.textSizeData:at.iconSizeData,kt=de||0!==ue.pitch,Nt=_.evaluateSizeForZoom(ot,ue.zoom);let wn,sr,yn,rn,Cn=[0,0],mr=null;if(C)sr=Tt.glyphAtlasTexture,yn=he.LINEAR,wn=Tt.glyphAtlasTexture.size,at.iconsInText&&(Cn=Tt.imageAtlasTexture.size,mr=Tt.imageAtlasTexture,rn=kt||v.options.rotating||v.options.zooming||"composite"===ot.kind||"camera"===ot.kind?he.LINEAR:he.NEAREST);else{const La=1!==p.layout.get("icon-size").constantOr(0)||at.iconsNeedLinear;sr=Tt.imageAtlasTexture,yn=Ye||v.options.rotating||v.options.zooming||La||kt?he.LINEAR:he.NEAREST,wn=Tt.imageAtlasTexture.size}const En="globe"===at.projection.name,jr=En?Ht:it,oi=En?_.globeToMercatorTransition(ue.zoom):0,ai=qr(Ke,at.getProjection(),ue),xi=ue.calculatePixelsToTileUnitsMatrix(Tt),Wi=dd(ai,Tt.tileID.canonical,de,le,ue,at.getProjection(),xi),Po=v.terrain&&de&&ne?_.invert(_.create(),Wi):Ia,ga=Oc(ai,Tt.tileID.canonical,de,le,ue,at.getProjection(),xi),Au=Ue&&at.hasTextData(),Ii="none"!==p.layout.get("icon-text-fit")&&Au&&at.hasIconData();if(ne){const La=ue.elevation,Fa=La?La.getAtTileOffsetFunc(Ke,ue.center.lat,ue.worldSize,at.getProjection()):null,uc=as(ai,Tt.tileID.canonical,de,le,ue,at.getProjection(),xi);Za(at,ai,v,C,uc,ga,de,H,Fa,Ke)}const pi=ne||C&&Ue||Ii,Nr=v.translatePosMatrix(ai,Tt,S,O),li=pi?Ia:Wi,Oo=v.translatePosMatrix(ga,Tt,S,O,!0),mi=at.getProjection().createInversionMatrix(ue,Ke.canonical),$s=[];v.terrainRenderModeElevated()&&de&&$s.push("PITCH_WITH_MAP_TERRAIN"),En&&$s.push("PROJECTION_GLOBE_VIEW"),pi&&$s.push("PROJECTED_POS_ON_VIEWPORT");const fo=Ye&&0!==p.paint.get(C?"text-halo-width":"icon-halo-width").constantOr(1);let cc;cc=Ye?at.iconsInText?bm(ot.kind,Nt,be,de,v,Nr,li,Oo,wn,Cn,Ke,oi,Le,mi,jr,at.getProjection()):w0(ot.kind,Nt,be,de,v,Nr,li,Oo,C,wn,!0,Ke,oi,Le,mi,jr,at.getProjection()):oo(ot.kind,Nt,be,de,v,Nr,li,Oo,C,wn,Ke,oi,Le,mi,jr,at.getProjection());const Iu={program:v.useProgram(wd(Ye,C,at),st,$s),buffers:Ot,uniformValues:cc,atlasTexture:sr,atlasTextureIcon:mr,atlasInterpolation:yn,atlasInterpolationIcon:rn,isSDF:Ye,hasHalo:fo,tile:Tt,labelPlaneMatrixInv:Po};if(ve&&at.canOverlap){Ce=!0;const La=Ot.segments.get();for(const Fa of La)tt.push({segments:new _.SegmentVector([Fa]),sortKey:Fa.sortKey,state:Iu})}else tt.push({segments:Ot.segments,sortKey:0,state:Iu})}Ce&&tt.sort((Ke,Tt)=>Ke.sortKey-Tt.sortKey);for(const Ke of tt){const Tt=Ke.state;if(v.terrain&&v.terrain.setupElevationDraw(Tt.tile,Tt.program,{useDepthForOcclusion:!Ge,labelPlaneMatrixInv:Tt.labelPlaneMatrixInv}),re.activeTexture.set(he.TEXTURE0),Tt.atlasTexture.bind(Tt.atlasInterpolation,he.CLAMP_TO_EDGE),Tt.atlasTextureIcon&&(re.activeTexture.set(he.TEXTURE1),Tt.atlasTextureIcon&&Tt.atlasTextureIcon.bind(Tt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Tt.isSDF){const at=Tt.uniformValues;Tt.hasHalo&&(at.u_is_halo=1,Kf(Tt.buffers,Ke.segments,p,v,Tt.program,Be,W,J,at)),at.u_is_halo=0}Kf(Tt.buffers,Ke.segments,p,v,Tt.program,Be,W,J,Tt.uniformValues)}}function Kf(v,h,p,b,C,S,O,R,z){const H=b.context,W=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.globeExtVertexBuffer];C.draw(H,H.gl.TRIANGLES,S,O,R,_.CullFaceMode.disabled,z,p.id,v.layoutVertexBuffer,v.indexBuffer,h,p.paint,b.transform.zoom,v.programConfigurations.get(p.id),W)}function Jf(v,h,p,b,C,S,O){const R=v.context.gl,z=p.paint.get("fill-pattern"),H=z&&z.constantOr(1);let W,J,re,he,ue;O?(J=H&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=R.LINES):(J=H?"fillPattern":"fill",W=R.TRIANGLES);for(const le of b){const de=h.getTile(le);if(H&&!de.patternsLoaded())continue;const ne=de.getBucket(p);if(!ne)continue;v.prepareDrawTile();const be=ne.programConfigurations.get(p.id),ve=v.useProgram(J,be);H&&(v.context.activeTexture.set(R.TEXTURE0),de.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),be.updatePaintBuffers());const Ce=z.constantOr(null);if(Ce&&de.imageAtlas){const Le=de.imageAtlas.patternPositions[Ce.toString()];Le&&be.setConstantPatternPositions(Le)}const Be=v.translatePosMatrix(le.projMatrix,de,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(O){he=ne.indexBuffer2,ue=ne.segments2;const Le=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[R.drawingBufferWidth,R.drawingBufferHeight];re="fillOutlinePattern"===J&&H?sc(Be,v,de,Le):y0(Be,Le)}else he=ne.indexBuffer,ue=ne.segments,re=H?bd(Be,v,de):xd(Be);v.prepareDrawProgram(v.context,ve,le.toUnwrapped()),ve.draw(v.context,W,C,v.stencilModeForClipping(le),S,_.CullFaceMode.disabled,re,p.id,ne.layoutVertexBuffer,he,ue,p.paint,v.transform.zoom,be)}}function yr(v,h,p,b,C,S,O){const R=v.context,z=R.gl,H=v.transform,W=p.paint.get("fill-extrusion-pattern"),J=W.constantOr(1),re=p.paint.get("fill-extrusion-opacity"),he=[p.paint.get("fill-extrusion-ambient-occlusion-intensity"),p.paint.get("fill-extrusion-ambient-occlusion-radius")],ue=p.layout.get("fill-extrusion-edge-radius"),le="globe"===H.projection.name?_.fillExtrusionHeightLift():0,de="globe"===H.projection.name,ne=de?_.globeToMercatorTransition(H.zoom):0,be=[_.mercatorXfromLng(H.center.lng),_.mercatorYfromLat(H.center.lat)],ve=[];de&&ve.push("PROJECTION_GLOBE_VIEW"),he[0]>0&&ve.push("FAUX_AO");for(const Ce of b){const Be=h.getTile(Ce),Le=Be.getBucket(p);if(!Le||Le.projection.name!==H.projection.name)continue;const Ue=Le.programConfigurations.get(p.id),Ge=v.useProgram(J?"fillExtrusionPattern":"fillExtrusion",Ue,ve);if(v.terrain){const Ot=v.terrain;if(v.style.terrainSetForDrapingOnly())Ot.setupElevationDraw(Be,Ge,{useMeterToDem:!0});else{if(!Le.enableTerrain)continue;if(Ot.setupElevationDraw(Be,Ge,{useMeterToDem:!0}),C0(R,h,Ce,Le,p,Ot),!Le.centroidVertexBuffer){const st=Ge.attributes.a_centroid_pos;void 0!==st&&z.vertexAttrib2f(st,0,0)}}}J&&(v.context.activeTexture.set(z.TEXTURE0),Be.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const tt=W.constantOr(null);if(tt&&Be.imageAtlas){const Ot=Be.imageAtlas.patternPositions[tt.toString()];Ot&&Ue.setConstantPatternPositions(Ot)}const it=v.translatePosMatrix(Ce.projMatrix,Be,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ht=H.projection.createInversionMatrix(H,Ce.canonical),Ke=p.paint.get("fill-extrusion-vertical-gradient"),Tt=J?vd(it,v,Ke,re,he,ue,Ce,Be,le,ne,be,Ht):Wr(it,v,Ke,re,he,ue,Ce,le,ne,be,Ht);v.prepareDrawProgram(R,Ge,Ce.toUnwrapped());const at=[];v.terrain&&at.push(Le.centroidVertexBuffer),de&&at.push(Le.layoutVertexExtBuffer),Ge.draw(R,R.gl.TRIANGLES,C,S,O,_.CullFaceMode.backCCW,Tt,p.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,p.paint,v.transform.zoom,Ue,at)}}function C0(v,h,p,b,C,S){const O=[ne=>{let be=ne.canonical.x-1,ve=ne.wrap;return be<0&&(be=(1<<ne.canonical.z)-1,ve--),new _.OverscaledTileID(ne.overscaledZ,ve,ne.canonical.z,be,ne.canonical.y)},ne=>{let be=ne.canonical.x+1,ve=ne.wrap;return be===1<<ne.canonical.z&&(be=0,ve++),new _.OverscaledTileID(ne.overscaledZ,ve,ne.canonical.z,be,ne.canonical.y)},ne=>new _.OverscaledTileID(ne.overscaledZ,ne.wrap,ne.canonical.z,ne.canonical.x,(0===ne.canonical.y?1<<ne.canonical.z:ne.canonical.y)-1),ne=>new _.OverscaledTileID(ne.overscaledZ,ne.wrap,ne.canonical.z,ne.canonical.x,ne.canonical.y===(1<<ne.canonical.z)-1?0:ne.canonical.y+1)],R=ne=>{const be=h.getSource().minzoom,ve=Be=>{const Le=h.getTileByID(Be);if(Le&&Le.hasData())return Le.getBucket(C)},Ce=[0,-1,1];for(const Be of Ce){if(ne.overscaledZ+Be<be)continue;const Le=ve(ne.calculateScaledKey(ne.overscaledZ+Be));if(Le)return Le}},z=[0,0,0],H=(ne,be)=>(z[0]=Math.min(ne.min.y,be.min.y),z[1]=Math.max(ne.max.y,be.max.y),z[2]=_.EXTENT-be.min.x>ne.max.x?be.min.x-_.EXTENT:ne.max.x,z),W=(ne,be)=>(z[0]=Math.min(ne.min.x,be.min.x),z[1]=Math.max(ne.max.x,be.max.x),z[2]=_.EXTENT-be.min.y>ne.max.y?be.min.y-_.EXTENT:ne.max.y,z),J=[(ne,be)=>H(ne,be),(ne,be)=>H(be,ne),(ne,be)=>W(ne,be),(ne,be)=>W(be,ne)],re=new _.pointGeometry(0,0);let he,ue,le;const de=(ne,be,ve,Ce,Be)=>{const Le=[[Ce?ve:ne,Ce?ne:ve,0],[Ce?ve:be,Ce?be:ve,0]],Ue=Be<0?_.EXTENT+Be:Be,Ge=[Ce?Ue:(ne+be)/2,Ce?(ne+be)/2:Ue,0];return 0===ve&&Be<0||0!==ve&&Be>0?S.getForTilePoints(le,[Ge],!0,ue):Le.push(Ge),S.getForTilePoints(p,Le,!0,he),Math.max(Le[0][2],Le[1][2],Ge[2])/S.exaggeration()};for(let ne=0;ne<4;ne++){const be=(ne<2?1:5)-ne,ve=b.borders[ne];if(0===ve.length)continue;const Ce=le=O[ne](p),Be=R(Ce);if(!(Be&&Be instanceof _.FillExtrusionBucket&&Be.enableTerrain)||b.borderDoneWithNeighborZ[ne]===Be.canonical.z&&Be.borderDoneWithNeighborZ[be]===b.canonical.z||(ue=S.findDEMTileFor(Ce),!ue||!ue.dem))continue;if(!he){const tt=S.findDEMTileFor(p);if(!tt||!tt.dem)return;he=tt}const Le=Be.borders[be];let Ue=0;const Ge=Be.borderDoneWithNeighborZ[be]!==b.canonical.z;if(b.canonical.z===Be.canonical.z){for(let tt=0;tt<ve.length;tt++){const it=b.featuresOnBorder[ve[tt]],Ht=it.borders[ne];let Ke;for(;Ue<Le.length&&(Ke=Be.featuresOnBorder[Le[Ue]],!(Ke.borders[be][1]>Ht[0]+3));)Ge&&Be.encodeCentroid(void 0,Ke,!1),Ue++;if(Ke&&Ue<Le.length){const Tt=Ue;let at=0;for(;!(Ke.borders[be][0]>Ht[1]-3)&&(at++,++Ue!==Le.length);)Ke=Be.featuresOnBorder[Le[Ue]];if(Ke=Be.featuresOnBorder[Le[Tt]],it.intersectsCount()>1||Ke.intersectsCount()>1||1!==at){1!==at&&(Ue=Tt),b.encodeCentroid(void 0,it,!1),Ge&&Be.encodeCentroid(void 0,Ke,!1);continue}const Ot=J[ne](it,Ke),st=ne%2?_.EXTENT-1:0;re.x=de(Ot[0],Math.min(_.EXTENT-1,Ot[1]),st,ne<2,Ot[2]),re.y=0,b.encodeCentroid(re,it,!1),Ge&&Be.encodeCentroid(re,Ke,!1)}else b.encodeCentroid(void 0,it,!1)}b.borderDoneWithNeighborZ[ne]=Be.canonical.z,b.needsCentroidUpdate=!0,Ge&&(Be.borderDoneWithNeighborZ[be]=b.canonical.z,Be.needsCentroidUpdate=!0)}else{for(const tt of ve)b.encodeCentroid(void 0,b.featuresOnBorder[tt],!1);if(Ge){for(const tt of Le)Be.encodeCentroid(void 0,Be.featuresOnBorder[tt],!1);Be.borderDoneWithNeighborZ[be]=b.canonical.z,Be.needsCentroidUpdate=!0}b.borderDoneWithNeighborZ[ne]=Be.canonical.z,b.needsCentroidUpdate=!0}}(b.needsCentroidUpdate||!b.centroidVertexBuffer&&0!==b.centroidVertexArray.length)&&b.uploadCentroid(v)}const Eh=new _.Color(1,0,0,1),Cm=new _.Color(0,1,0,1),Sh=new _.Color(0,0,1,1),ao=new _.Color(1,0,1,1),Cd=new _.Color(0,1,1,1);function Du(v,h,p){const b=v.context,C=v.transform,S=b.gl,O="globe"===C.projection.name,R=O?["PROJECTION_GLOBE_VIEW"]:null;let z=p.projMatrix;if(O&&_.globeToMercatorTransition(C.zoom)>0){const it=_.transitionTileAABBinECEF(p.canonical,C),Ht=_.globeDenormalizeECEF(it);z=_.multiply(new Float32Array(16),C.globeMatrix,Ht),_.multiply(z,C.projMatrix,z)}const H=v.useProgram("debug",null,R),W=h.getTileByID(p.key);v.terrain&&v.terrain.setupElevationDraw(W,H);const J=_.DepthMode.disabled,re=_.StencilMode.disabled,he=v.colorModeForRenderPass();b.activeTexture.set(S.TEXTURE0),v.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),O?W._makeGlobeTileDebugBuffers(v.context,C):W._makeDebugTileBoundsBuffers(v.context,C.projection);const le=W._tileDebugBuffer||v.debugBuffer,de=W._tileDebugIndexBuffer||v.debugIndexBuffer,ne=W._tileDebugSegments||v.debugSegments;H.draw(b,S.LINE_STRIP,J,re,he,_.CullFaceMode.disabled,Zf(z,_.Color.red),"$debug",le,de,ne,null,null,null,[W._globeTileDebugBorderBuffer]);const be=W.latestRawTileData,ve=Math.floor((be&&be.byteLength||0)/1024),Ce=h.getTile(p).tileSize,Be=512/Math.min(Ce,512)*(p.overscaledZ/C.zoom)*.5;let Le=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Le+=` => ${p.overscaledZ}`),Le+=` ${ve}kb`,function(it,Ht){it.initDebugOverlayCanvas();const Ke=it.debugOverlayCanvas,Tt=it.context.gl,at=it.debugOverlayCanvas.getContext("2d");at.clearRect(0,0,Ke.width,Ke.height),at.shadowColor="white",at.shadowBlur=2,at.lineWidth=1.5,at.strokeStyle="white",at.textBaseline="top",at.font="bold 36px Open Sans, sans-serif",at.fillText(Ht,5,5),at.strokeText(Ht,5,5),it.debugOverlayTexture.update(Ke),it.debugOverlayTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE)}(v,Le);const Ue=W._tileDebugTextBuffer||v.debugBuffer,Ge=W._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,tt=W._tileDebugTextSegments||v.debugSegments;H.draw(b,S.TRIANGLES,J,re,_.ColorMode.alphaBlended,_.CullFaceMode.disabled,Zf(z,_.Color.transparent,Be),"$debug",Ue,Ge,tt,null,null,null,[W._globeTileDebugTextBuffer])}function lo(v,h,p,b){Td(v,0,h+p/2,v.transform.width,p,b)}function oc(v,h,p,b){Td(v,h-p/2,0,p,v.transform.height,b)}function Td(v,h,p,b,C,S){const O=v.context,R=O.gl;R.enable(R.SCISSOR_TEST),R.scissor(h*_.exported.devicePixelRatio,p*_.exported.devicePixelRatio,b*_.exported.devicePixelRatio,C*_.exported.devicePixelRatio),O.clear({color:S}),R.disable(R.SCISSOR_TEST)}const vi=_.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Qf}=vi;function Ml(v,h,p,b){v.emplaceBack(h,p,b)}class ep{constructor(h){this.vertexArray=new _.StructArrayLayout3f12,this.indices=new _.StructArrayLayout3ui6,Ml(this.vertexArray,-1,-1,1),Ml(this.vertexArray,1,-1,1),Ml(this.vertexArray,-1,1,1),Ml(this.vertexArray,1,1,1),Ml(this.vertexArray,-1,-1,-1),Ml(this.vertexArray,1,-1,-1),Ml(this.vertexArray,-1,1,-1),Ml(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=h.createVertexBuffer(this.vertexArray,Qf),this.indexBuffer=h.createIndexBuffer(this.indices),this.segment=_.SegmentVector.simpleSegment(0,0,36,12)}}function vr(v,h,p,b,C,S){const O=v.gl,R=h.paint.get("sky-atmosphere-color"),z=h.paint.get("sky-atmosphere-halo-color"),H=h.paint.get("sky-atmosphere-sun-intensity"),W={u_matrix_3f:_.fromMat4(_.create$1(),b),u_sun_direction:C,u_sun_intensity:H,u_color_tint_r:[(ue=R).r,ue.g,ue.b,ue.a],u_color_tint_m:[(le=z).r,le.g,le.b,le.a],u_luminance:5e-5};var ue,le;O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+S,h.skyboxTexture,0),p.draw(v,O.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,_.ColorMode.unblended,_.CullFaceMode.frontCW,W,"skyboxCapture",h.skyboxGeometry.vertexBuffer,h.skyboxGeometry.indexBuffer,h.skyboxGeometry.segment)}const Dh=_.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ed{constructor(h){const p=new _.StructArrayLayout5f20;p.emplaceBack(-1,1,1,0,0),p.emplaceBack(1,1,1,1,0),p.emplaceBack(1,-1,1,1,1),p.emplaceBack(-1,-1,1,0,1);const b=new _.StructArrayLayout3ui6;b.emplaceBack(0,1,2),b.emplaceBack(2,3,0),this.vertexBuffer=h.createVertexBuffer(p,Dh.members),this.indexBuffer=h.createIndexBuffer(b),this.segments=_.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const co={symbol:function(v,h,p,b,C){if("translucent"!==v.renderPass)return;const S=_.StencilMode.disabled,O=v.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(R,z,H,W,J,re,he){const ue=z.transform,le="map"===J,de="map"===re;for(const ne of R){const be=W.getTile(ne),ve=be.getBucket(H);if(!ve||!ve.text||!ve.text.segments.get().length)continue;const Ce=_.evaluateSizeForZoom(ve.textSizeData,ue.zoom),Be=qr(ne,ve.getProjection(),ue),Le=ue.calculatePixelsToTileUnitsMatrix(be),Ue=dd(Be,be.tileID.canonical,de,le,ue,ve.getProjection(),Le),Ge="none"!==H.layout.get("icon-text-fit")&&ve.hasIconData();if(Ce){const tt=Math.pow(2,ue.zoom-be.tileID.overscaledZ);us(ve,le,de,he,_.symbolSize,ue,Ue,ne,tt,Ce,Ge)}}}(b,v,p,h,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),C),0!==p.paint.get("icon-opacity").constantOr(1)&&es(v,h,p,b,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),S,O),0!==p.paint.get("text-opacity").constantOr(1)&&es(v,h,p,b,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),S,O),h.map.showCollisionBoxes&&(Xi(v,h,p,b,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Xi(v,h,p,b,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(v,h,p,b){if("translucent"!==v.renderPass)return;const C=p.paint.get("circle-opacity"),S=p.paint.get("circle-stroke-width"),O=p.paint.get("circle-stroke-opacity"),R=void 0!==p.layout.get("circle-sort-key").constantOr(1);if(0===C.constantOr(1)&&(0===S.constantOr(1)||0===O.constantOr(1)))return;const z=v.context,H=z.gl,W=v.transform,J=v.depthModeForSublayer(0,_.DepthMode.ReadOnly),re=_.StencilMode.disabled,he=v.colorModeForRenderPass(),ue="globe"===W.projection.name,le=[_.mercatorXfromLng(W.center.lng),_.mercatorYfromLat(W.center.lat)],de=[];for(let be=0;be<b.length;be++){const ve=b[be],Ce=h.getTile(ve),Be=Ce.getBucket(p);if(!Be||Be.projection.name!==W.projection.name)continue;const Le=Be.programConfigurations.get(p.id),Ue=bn(p);ue&&Ue.push("PROJECTION_GLOBE_VIEW");const Ge=v.useProgram("circle",Le,Ue),tt=Be.layoutVertexBuffer,it=Be.globeExtVertexBuffer,Ht=Be.indexBuffer,Ke=W.projection.createInversionMatrix(W,ve.canonical),Tt={programConfiguration:Le,program:Ge,layoutVertexBuffer:tt,globeExtVertexBuffer:it,indexBuffer:Ht,uniformValues:Xf(v,ve,Ce,Ke,le,p),tile:Ce};if(R){const at=Be.segments.get();for(const Ot of at)de.push({segments:new _.SegmentVector([Ot]),sortKey:Ot.sortKey,state:Tt})}else de.push({segments:Be.segments,sortKey:0,state:Tt})}R&&de.sort((be,ve)=>be.sortKey-ve.sortKey);const ne={useDepthForOcclusion:!ue};for(const be of de){const{programConfiguration:ve,program:Ce,layoutVertexBuffer:Be,globeExtVertexBuffer:Le,indexBuffer:Ue,uniformValues:Ge,tile:tt}=be.state,it=be.segments;v.terrain&&v.terrain.setupElevationDraw(tt,Ce,ne),v.prepareDrawProgram(z,Ce,tt.tileID.toUnwrapped()),Ce.draw(z,H.TRIANGLES,J,re,he,_.CullFaceMode.disabled,Ge,p.id,Be,Ue,it,p.paint,W.zoom,ve,[Le])}},heatmap:function(v,h,p,b){if(0!==p.paint.get("heatmap-opacity"))if("offscreen"===v.renderPass){const C=v.context,S=C.gl,O=_.StencilMode.disabled,R=new _.ColorMode([S.ONE,S.ONE],_.Color.transparent,[!0,!0,!0,!0]);(function(he,ue,le,de){const ne=he.gl,be=ue.width*de,ve=ue.height*de;he.activeTexture.set(ne.TEXTURE1),he.viewport.set([0,0,be,ve]);let Ce=le.heatmapFbo;if(!Ce||Ce&&(Ce.width!==be||Ce.height!==ve)){Ce&&Ce.destroy();const Be=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,Be),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),Ce=le.heatmapFbo=he.createFramebuffer(be,ve,!1),function(Le,Ue,Ge,tt,it,Ht){const Ke=Le.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Le.isWebGL2&&Le.extRenderToTextureHalfFloat?Ke.RGBA16F:Ke.RGBA,it,Ht,0,Ke.RGBA,Le.extRenderToTextureHalfFloat?Le.isWebGL2?Ke.HALF_FLOAT:Le.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),tt.colorAttachment.set(Ge)}(he,0,Be,Ce,be,ve)}else ne.bindTexture(ne.TEXTURE_2D,Ce.colorAttachment.get()),he.bindFramebuffer.set(Ce.framebuffer)})(C,v,p,"globe"===v.transform.projection.name?.5:.25),C.clear({color:_.Color.transparent});const z=v.transform,H="globe"===z.projection.name,W=H?["PROJECTION_GLOBE_VIEW"]:null,J=H?_.CullFaceMode.frontCCW:_.CullFaceMode.disabled,re=[_.mercatorXfromLng(z.center.lng),_.mercatorYfromLat(z.center.lat)];for(let he=0;he<b.length;he++){const ue=b[he];if(h.hasRenderableParent(ue))continue;const le=h.getTile(ue),de=le.getBucket(p);if(!de||de.projection.name!==z.projection.name)continue;const ne=de.programConfigurations.get(p.id),be=v.useProgram("heatmap",ne,W),{zoom:ve}=v.transform;v.terrain&&v.terrain.setupElevationDraw(le,be),v.prepareDrawProgram(C,be,ue.toUnwrapped());const Ce=z.projection.createInversionMatrix(z,ue.canonical);be.draw(C,S.TRIANGLES,_.DepthMode.disabled,O,R,J,Vr(v,ue,le,Ce,re,ve,p.paint.get("heatmap-intensity")),p.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,p.paint,v.transform.zoom,ne,H?[de.globeExtVertexBuffer]:null)}C.viewport.set([0,0,v.width,v.height])}else"translucent"===v.renderPass&&(v.context.setColorMode(v.colorModeForRenderPass()),function(C,S){const O=C.context,R=O.gl,z=S.heatmapFbo;if(!z)return;O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,z.colorAttachment.get()),O.activeTexture.set(R.TEXTURE1);let H=S.colorRampTexture;H||(H=S.colorRampTexture=new _.Texture(O,S.colorRamp,R.RGBA)),H.bind(R.LINEAR,R.CLAMP_TO_EDGE),C.useProgram("heatmapTexture").draw(O,R.TRIANGLES,_.DepthMode.disabled,_.StencilMode.disabled,C.colorModeForRenderPass(),_.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:S.paint.get("heatmap-opacity")},S.id,C.viewportBuffer,C.quadTriangleIndexBuffer,C.viewportSegments,S.paint,C.transform.zoom)}(v,p))},line:function(v,h,p,b){if("translucent"!==v.renderPass)return;const C=p.paint.get("line-opacity"),S=p.paint.get("line-width");if(0===C.constantOr(1)||0===S.constantOr(1))return;const O=v.depthModeForSublayer(0,_.DepthMode.ReadOnly),R=v.colorModeForRenderPass(),z=v.terrain&&v.terrain.renderingToTexture?1:_.exported.devicePixelRatio,H=p.paint.get("line-dasharray"),W=H.constantOr(1),J=p.layout.get("line-cap"),re=p.paint.get("line-pattern"),he=re.constantOr(1),ue=p.paint.get("line-gradient"),le=he?"linePattern":"line",de=v.context,ne=de.gl,be=(Ce=>{const Be=[];Xr(Ce)&&Be.push("RENDER_LINE_DASH"),Ce.paint.get("line-gradient")&&Be.push("RENDER_LINE_GRADIENT");const Le=Ce.paint.get("line-trim-offset");0===Le[0]&&0===Le[1]||Be.push("RENDER_LINE_TRIM_OFFSET");const Ue=Ce.paint.get("line-pattern").constantOr(1),Ge=1!==Ce.paint.get("line-opacity").constantOr(1);return!Ue&&Ge&&Be.push("RENDER_LINE_ALPHA_DISCARD"),Be})(p);let ve=be.includes("RENDER_LINE_ALPHA_DISCARD");v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(ve=!1);for(const Ce of b){const Be=h.getTile(Ce);if(he&&!Be.patternsLoaded())continue;const Le=Be.getBucket(p);if(!Le)continue;v.prepareDrawTile();const Ue=Le.programConfigurations.get(p.id),Ge=v.useProgram(le,Ue,be),tt=re.constantOr(null);if(tt&&Be.imageAtlas){const Ye=Be.imageAtlas.patternPositions[tt.toString()];Ye&&Ue.setConstantPatternPositions(Ye)}const it=H.constantOr(null),Ht=J.constantOr(null);if(!he&&it&&Ht&&Be.lineAtlas){const Ye=Be.lineAtlas.getDash(it,Ht);Ye&&Ue.setConstantPatternPositions(Ye)}let[Ke,Tt]=p.paint.get("line-trim-offset");("round"===Ht||"square"===Ht)&&Ke!==Tt&&(0===Ke&&(Ke-=1),1===Tt&&(Tt+=1));const at=v.terrain?Ce.projMatrix:null,Ot=he?b0(v,Be,p,at,z):x0(v,Be,p,at,Le.lineClipsArray.length,z,[Ke,Tt]);if(ue){const Ye=Le.gradients[p.id];let ot=Ye.texture;if(p.gradientVersion!==Ye.version){let kt=256;if(p.stepInterpolant){const Nt=h.getSource().maxzoom,wn=Ce.canonical.z===Nt?Math.ceil(1<<v.transform.maxZoom-Ce.canonical.z):1;kt=_.clamp(_.nextPowerOfTwo(Le.maxLineLength/_.EXTENT*1024*wn),256,de.maxTextureSize)}Ye.gradient=_.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:kt,image:Ye.gradient||void 0,clips:Le.lineClipsArray}),Ye.texture?Ye.texture.update(Ye.gradient):Ye.texture=new _.Texture(de,Ye.gradient,ne.RGBA),Ye.version=p.gradientVersion,ot=Ye.texture}de.activeTexture.set(ne.TEXTURE1),ot.bind(p.stepInterpolant?ne.NEAREST:ne.LINEAR,ne.CLAMP_TO_EDGE)}W&&(de.activeTexture.set(ne.TEXTURE0),Be.lineAtlasTexture.bind(ne.LINEAR,ne.REPEAT),Ue.updatePaintBuffers()),he&&(de.activeTexture.set(ne.TEXTURE0),Be.imageAtlasTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),Ue.updatePaintBuffers()),v.prepareDrawProgram(de,Ge,Ce.toUnwrapped());const st=Ye=>{Ge.draw(de,ne.TRIANGLES,O,Ye,R,_.CullFaceMode.disabled,Ot,p.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,p.paint,v.transform.zoom,Ue,[Le.layoutVertexBuffer2])};if(ve){const Ye=v.stencilModeForClipping(Ce).ref;0===Ye&&v.terrain&&de.clear({stencil:0});const ot={func:ne.EQUAL,mask:255};Ot.u_alpha_discard_threshold=.8,st(new _.StencilMode(ot,Ye,255,ne.KEEP,ne.KEEP,ne.INVERT)),Ot.u_alpha_discard_threshold=0,st(new _.StencilMode(ot,Ye,255,ne.KEEP,ne.KEEP,ne.KEEP))}else st(v.stencilModeForClipping(Ce))}ve&&(v.resetStencilClippingMasks(),v.terrain&&de.clear({stencil:0}))},fill:function(v,h,p,b){const C=p.paint.get("fill-color"),S=p.paint.get("fill-opacity");if(0===S.constantOr(1))return;const O=v.colorModeForRenderPass(),R=p.paint.get("fill-pattern"),z=v.opaquePassEnabledForLayer()&&!R.constantOr(1)&&1===C.constantOr(_.Color.transparent).a&&1===S.constantOr(0)?"opaque":"translucent";if(v.renderPass===z){const H=v.depthModeForSublayer(1,"opaque"===v.renderPass?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly);Jf(v,h,p,b,H,O,!1)}if("translucent"===v.renderPass&&p.paint.get("fill-antialias")){const H=v.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,_.DepthMode.ReadOnly);Jf(v,h,p,b,H,O,!0)}},"fill-extrusion":function(v,h,p,b){const C=p.paint.get("fill-extrusion-opacity");if(0!==C&&"translucent"===v.renderPass){const S=new _.DepthMode(v.context.gl.LEQUAL,_.DepthMode.ReadWrite,v.depthRangeFor3D);if(1!==C||p.paint.get("fill-extrusion-pattern").constantOr(1))yr(v,h,p,b,S,_.StencilMode.disabled,_.ColorMode.disabled),yr(v,h,p,b,S,v.stencilModeFor3D(),v.colorModeForRenderPass()),v.resetStencilClippingMasks();else{const O=v.colorModeForRenderPass();yr(v,h,p,b,S,_.StencilMode.disabled,O)}}},hillshade:function(v,h,p,b){if("offscreen"!==v.renderPass&&"translucent"!==v.renderPass)return;const C=v.context,S=v.depthModeForSublayer(0,_.DepthMode.ReadOnly),O=v.colorModeForRenderPass(),R=v.terrain&&v.terrain.renderingToTexture,[z,H]="translucent"!==v.renderPass||R?[{},b]:v.stencilConfigForOverlap(b);for(const W of H){const J=h.getTile(W);if(J.needsHillshadePrepare&&"offscreen"===v.renderPass)xm(v,J,p,S,_.StencilMode.disabled,O);else if("translucent"===v.renderPass){const re=R&&v.terrain?v.terrain.stencilModeForRTTOverlap(W):z[W.overscaledZ];Wf(v,W,J,p,S,re,O)}}C.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,h,p,b,C,S){if("translucent"!==v.renderPass||0===p.paint.get("raster-opacity")||!b.length)return;const O=v.context,R=O.gl,z=h.getSource(),H=v.useProgram("raster"),W=v.colorModeForRenderPass(),J=v.terrain&&v.terrain.renderingToTexture,[re,he]=z instanceof Ve||J?[{},b]:v.stencilConfigForOverlap(b),ue=he[he.length-1].overscaledZ,le=!v.options.moving;for(const de of he){const ne=J?_.DepthMode.disabled:v.depthModeForSublayer(de.overscaledZ-ue,1===p.paint.get("raster-opacity")?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly,R.LESS),be=de.toUnwrapped(),ve=h.getTile(de);if(J&&(!ve||!ve.hasData()))continue;const Ce=J?de.projMatrix:v.transform.calculateProjMatrix(be,le),Be=v.terrain&&J?v.terrain.stencilModeForRTTOverlap(de):re[de.overscaledZ],Le=S?0:p.paint.get("raster-fade-duration");ve.registerFadeDuration(Le);const Ue=h.findLoadedParent(de,0),Ge=Rc(ve,Ue,h,v.transform,Le);let tt,it;v.terrain&&v.terrain.prepareDrawTile();const Ht="nearest"===p.paint.get("raster-resampling")?R.NEAREST:R.LINEAR;O.activeTexture.set(R.TEXTURE0),ve.texture.bind(Ht,R.CLAMP_TO_EDGE),O.activeTexture.set(R.TEXTURE1),Ue?(Ue.texture.bind(Ht,R.CLAMP_TO_EDGE),tt=Math.pow(2,Ue.tileID.overscaledZ-ve.tileID.overscaledZ),it=[ve.tileID.canonical.x*tt%1,ve.tileID.canonical.y*tt%1]):ve.texture.bind(Ht,R.CLAMP_TO_EDGE);const Ke=Do(Ce,it||[0,0],tt||1,Ge,p,z instanceof Ve?z.perspectiveTransform:[0,0]);if(v.prepareDrawProgram(O,H,be),z instanceof Ve)z.boundsBuffer&&z.boundsSegments&&H.draw(O,R.TRIANGLES,ne,_.StencilMode.disabled,W,_.CullFaceMode.disabled,Ke,p.id,z.boundsBuffer,v.quadTriangleIndexBuffer,z.boundsSegments);else{const{tileBoundsBuffer:Tt,tileBoundsIndexBuffer:at,tileBoundsSegments:Ot}=v.getTileBoundsBuffers(ve);H.draw(O,R.TRIANGLES,ne,Be,W,_.CullFaceMode.disabled,Ke,p.id,Tt,at,Ot)}}v.resetStencilClippingMasks()},background:function(v,h,p,b){const C=p.paint.get("background-color"),S=p.paint.get("background-opacity");if(0===S)return;const O=v.context,R=O.gl,z=v.transform,H=z.tileSize,W=p.paint.get("background-pattern");if(v.isPatternMissing(W))return;const J=!W&&1===C.a&&1===S&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==J)return;const re=_.StencilMode.disabled,he=v.depthModeForSublayer(0,"opaque"===J?_.DepthMode.ReadWrite:_.DepthMode.ReadOnly),ue=v.colorModeForRenderPass(),le=v.useProgram(W?"backgroundPattern":"background");let de,ne=b;ne||(de=v.getBackgroundTiles(),ne=Object.values(de).map(be=>be.tileID)),W&&(O.activeTexture.set(R.TEXTURE0),v.imageManager.bind(v.context));for(const be of ne){const ve=be.toUnwrapped(),Ce=b?be.projMatrix:v.transform.calculateProjMatrix(ve);v.prepareDrawTile();const Be=h?h.getTile(be):de?de[be.key]:new _.Tile(be,H,z.zoom,v),Le=W?Dl(Ce,S,v,W,{tileID:be,tileSize:H}):wm(Ce,S,C);v.prepareDrawProgram(O,le,ve);const{tileBoundsBuffer:Ue,tileBoundsIndexBuffer:Ge,tileBoundsSegments:tt}=v.getTileBoundsBuffers(Be);le.draw(O,R.TRIANGLES,he,re,ue,_.CullFaceMode.disabled,Le,p.id,Ue,Ge,tt)}},sky:function(v,h,p){const b=v.transform,C="mercator"===b.projection.name||"globe"===b.projection.name?1:_.smoothstep(7,8,b.zoom),S=p.paint.get("sky-opacity")*C;if(0===S)return;const O=v.context,R=p.paint.get("sky-type"),z=new _.DepthMode(O.gl.LEQUAL,_.DepthMode.ReadOnly,[0,1]),H=v.frameCounter/1e3%1;"atmosphere"===R?"offscreen"===v.renderPass?p.needsSkyboxCapture(v)&&(function(W,J,re,he){const ue=W.context,le=ue.gl;let de=J.skyboxFbo;if(!de){de=J.skyboxFbo=ue.createFramebuffer(32,32,!1),J.skyboxGeometry=new ep(ue),J.skyboxTexture=ue.gl.createTexture(),le.bindTexture(le.TEXTURE_CUBE_MAP,J.skyboxTexture),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_CUBE_MAP,le.TEXTURE_MAG_FILTER,le.LINEAR);for(let Ce=0;Ce<6;++Ce)le.texImage2D(le.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,le.RGBA,32,32,0,le.RGBA,le.UNSIGNED_BYTE,null)}ue.bindFramebuffer.set(de.framebuffer),ue.viewport.set([0,0,32,32]);const ne=J.getCenter(W,!0),be=W.useProgram("skyboxCapture"),ve=new Float64Array(16);_.identity(ve),_.rotateY(ve,ve,.5*-Math.PI),vr(ue,J,be,ve,ne,0),_.identity(ve),_.rotateY(ve,ve,.5*Math.PI),vr(ue,J,be,ve,ne,1),_.identity(ve),_.rotateX(ve,ve,.5*-Math.PI),vr(ue,J,be,ve,ne,2),_.identity(ve),_.rotateX(ve,ve,.5*Math.PI),vr(ue,J,be,ve,ne,3),_.identity(ve),vr(ue,J,be,ve,ne,4),_.identity(ve),_.rotateY(ve,ve,Math.PI),vr(ue,J,be,ve,ne,5),ue.viewport.set([0,0,W.width,W.height])}(v,p),p.markSkyboxValid(v)):"sky"===v.renderPass&&function(W,J,re,he,ue){const le=W.context,de=le.gl,ne=W.transform,be=W.useProgram("skybox");le.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_CUBE_MAP,J.skyboxTexture);const ve={u_matrix:ne.skyboxMatrix,u_sun_direction:J.getCenter(W,!1),u_cubemap:0,u_opacity:he,u_temporal_offset:ue};W.prepareDrawProgram(le,be),be.draw(le,de.TRIANGLES,re,_.StencilMode.disabled,W.colorModeForRenderPass(),_.CullFaceMode.backCW,ve,"skybox",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(v,p,z,S,H):"gradient"===R&&"sky"===v.renderPass&&function(W,J,re,he,ue){const le=W.context,de=le.gl,ne=W.transform,be=W.useProgram("skyboxGradient");J.skyboxGeometry||(J.skyboxGeometry=new ep(le)),le.activeTexture.set(de.TEXTURE0);let ve=J.colorRampTexture;ve||(ve=J.colorRampTexture=new _.Texture(le,J.colorRamp,de.RGBA)),ve.bind(de.LINEAR,de.CLAMP_TO_EDGE);const Ce=(Be=ne.skyboxMatrix,Le=J.getCenter(W,!1),Ue=J.paint.get("sky-gradient-radius"),Ge=he,tt=ue,{u_matrix:Be,u_color_ramp:0,u_center_direction:Le,u_radius:_.degToRad(Ue),u_opacity:Ge,u_temporal_offset:tt});var Be,Le,Ue,Ge,tt;W.prepareDrawProgram(le,be),be.draw(le,de.TRIANGLES,re,_.StencilMode.disabled,W.colorModeForRenderPass(),_.CullFaceMode.backCW,Ce,"skyboxGradient",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(v,p,z,S,H)},debug:function(v,h,p){for(let b=0;b<p.length;b++)Du(v,h,p[b])},custom:function(v,h,p,b){const C=v.context,S=p.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||"offscreen"===v.renderPass)&&p.isLayerDraped()){if("offscreen"===v.renderPass){const O=S.prerender;if(O){if(v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),"globe"===v.transform.projection.name){const R=v.transform.pointMerc;O.call(S,C.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),_.globeToMercatorTransition(v.transform.zoom),[R.x,R.y],v.transform.pixelsPerMeterRatio)}else O.call(S,C.gl,v.transform.customLayerMatrix());C.setDirty(),v.setBaseState()}}else if("translucent"===v.renderPass){if(v.terrain&&v.terrain.renderingToTexture){const R=S.renderToTile;if(R){const z=b[0].canonical,H=new _.MercatorCoordinate(z.x+b[0].wrap*(1<<z.z),z.y,z.z);C.setDepthMode(_.DepthMode.disabled),C.setStencilMode(_.StencilMode.disabled),C.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),R.call(S,C.gl,H),C.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),C.setStencilMode(_.StencilMode.disabled);const O="3d"===S.renderingMode?new _.DepthMode(v.context.gl.LEQUAL,_.DepthMode.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,_.DepthMode.ReadOnly);if(C.setDepthMode(O),"globe"===v.transform.projection.name){const R=v.transform.pointMerc;S.render(C.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),_.globeToMercatorTransition(v.transform.zoom),[R.x,R.y],v.transform.pixelsPerMeterRatio)}else S.render(C.gl,v.transform.customLayerMatrix());C.setDirty(),v.setBaseState(),C.bindFramebuffer.set(null)}}else _.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Tm{constructor(h,p,b=!1){this.context=new ge(h,b),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=_.SourceCache.maxUnderzooming+_.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hf,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(h,p){const b=!!h&&!!h.terrain&&this.transform.projection.supportsTerrain;if(!(b||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Sl(this,h));const C=this._terrain;this.transform.elevation=b?C:null,C.update(h,this.transform,p)}_updateFog(h){const p=h.fog;if(!p||"globe"===this.transform.projection.name||p.getOpacity(this.transform.pitch)<1||p.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[b,C]=p.getFovAdjustedRange(this.transform._fov);if(b>C)return void(this.transform.fogCullDistSq=null);const S=b+.78*(C-b);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(h,p){if(this.width=h*_.exported.devicePixelRatio,this.height=p*_.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style.order)this.style._layers[b].resize()}setup(){const h=this.context,p=new _.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(_.EXTENT,0),p.emplaceBack(0,_.EXTENT),p.emplaceBack(_.EXTENT,_.EXTENT),this.tileExtentBuffer=h.createVertexBuffer(p,_.posAttributes.members),this.tileExtentSegments=_.SegmentVector.simpleSegment(0,0,4,2);const b=new _.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(_.EXTENT,0),b.emplaceBack(0,_.EXTENT),b.emplaceBack(_.EXTENT,_.EXTENT),this.debugBuffer=h.createVertexBuffer(b,_.posAttributes.members),this.debugSegments=_.SegmentVector.simpleSegment(0,0,4,5);const C=new _.StructArrayLayout2i4;C.emplaceBack(-1,-1),C.emplaceBack(1,-1),C.emplaceBack(-1,1),C.emplaceBack(1,1),this.viewportBuffer=h.createVertexBuffer(C,_.posAttributes.members),this.viewportSegments=_.SegmentVector.simpleSegment(0,0,4,2);const S=new _.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(_.EXTENT,0,_.EXTENT,0),S.emplaceBack(0,_.EXTENT,0,_.EXTENT),S.emplaceBack(_.EXTENT,_.EXTENT,_.EXTENT,_.EXTENT),this.mercatorBoundsBuffer=h.createVertexBuffer(S,_.boundsAttributes.members),this.mercatorBoundsSegments=_.SegmentVector.simpleSegment(0,0,4,2);const O=new _.StructArrayLayout3ui6;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=h.createIndexBuffer(O);const R=new _.StructArrayLayout1ui2;for(const H of[0,1,3,2,0])R.emplaceBack(H);this.debugIndexBuffer=h.createIndexBuffer(R),this.emptyTexture=new _.Texture(h,new _.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),h.gl.RGBA),this.identityMat=_.create();const z=this.context.gl;this.stencilClearMode=new _.StencilMode({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.loadTimeStamps.push(_.window.performance.now()),this.atmosphereBuffer=new Ed(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(h){return h._makeTileBoundsBuffers(this.context,this.transform.projection),h._tileBoundsBuffer?{tileBoundsBuffer:h._tileBoundsBuffer,tileBoundsIndexBuffer:h._tileBoundsIndexBuffer,tileBoundsSegments:h._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const h=this.context,p=h.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(h,p.TRIANGLES,_.DepthMode.disabled,this.stencilClearMode,_.ColorMode.disabled,_.CullFaceMode.disabled,Er(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(h,p,b){if(!p||this.currentStencilSource===p.id||!h.isTileClipped()||!b||0===b.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let R=!1;for(const z of b)if(void 0===this._tileClippingMaskIDs[z.key]){R=!0;break}if(!R)return}this.currentStencilSource=p.id;const C=this.context,S=C.gl;this.nextStencilID+b.length>256&&this.clearStencil(),C.setColorMode(_.ColorMode.disabled),C.setDepthMode(_.DepthMode.disabled);const O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const R of b){const z=p.getTile(R),H=this._tileClippingMaskIDs[R.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:J,tileBoundsSegments:re}=this.getTileBoundsBuffers(z);O.draw(C,S.TRIANGLES,_.DepthMode.disabled,new _.StencilMode({func:S.ALWAYS,mask:0},H,255,S.KEEP,S.KEEP,S.REPLACE),_.ColorMode.disabled,_.CullFaceMode.disabled,Er(R.projMatrix),"$clipping",W,J,re)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const h=this.nextStencilID++,p=this.context.gl;return new _.StencilMode({func:p.NOTEQUAL,mask:255},h,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(h){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(h);const p=this.context.gl;return new _.StencilMode({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[h.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(h){const p=this.context.gl,b=h.sort((O,R)=>R.overscaledZ-O.overscaledZ),C=b[b.length-1].overscaledZ,S=b[0].overscaledZ-C+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const O={};for(let R=0;R<S;R++)O[R+C]=new _.StencilMode({func:p.GEQUAL,mask:255},R+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=S,[O,b]}return[{[C]:_.StencilMode.disabled},b]}colorModeForRenderPass(){const h=this.context.gl;return this._showOverdrawInspector?new _.ColorMode([h.CONSTANT_COLOR,h.ONE],new _.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?_.ColorMode.unblended:_.ColorMode.alphaBlended}depthModeForSublayer(h,p,b){if(!this.opaquePassEnabledForLayer())return _.DepthMode.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+h)*this.depthEpsilon;return new _.DepthMode(b||this.context.gl.LEQUAL,p,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(h,p){this.style=h,this.options=p,this.imageManager=h.imageManager,this.glyphManager=h.glyphManager,this.symbolFadeChange=h.placement.symbolFadeChange(_.exported.now()),this.imageManager.beginFrame();const b=this.style.order,C=this.style._sourceCaches;for(const z in C){const H=C[z];H.used&&H.prepare(this.context)}const S={},O={},R={};for(const z in C){const H=C[z];S[z]=H.getVisibleCoordinates(),O[z]=S[z].slice().reverse(),R[z]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<b.length;z++)if(this.style._layers[b[z]].is3D()){this.opaquePassCutoff=z;break}if(this.terrain&&(this.terrain.updateTileBinding(R),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new _.GlobeSharedBuffers(this.context)),_.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const z of b){const H=this.style._layers[z],W=h._getLayerSourceCache(H);if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const J=W?O[W.id]:void 0;("custom"===H.type||H.isSky()||J&&J.length)&&this.renderLayer(this,W,H,J)}if(this.depthRangeFor3D=[0,1-(h.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:p.showOverdrawInspector?_.Color.black:_.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[b[this.currentLayer]],H=h._getLayerSourceCache(z);if(z.isSky())continue;const W=H?O[H.id]:void 0;this._renderTileClippingMasks(z,H,W),this.renderLayer(this,H,z,W)}if(this.style.fog&&this.transform.projection.supportsFog&&function(z,H){const W=z.context,J=W.gl,re=z.transform,he=new _.DepthMode(J.LEQUAL,_.DepthMode.ReadOnly,[0,1]),ue=z.useProgram("globeAtmosphere",null,"globe"===re.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),le=_.globeToMercatorTransition(re.zoom),de=H.properties.get("color").toArray01(),ne=H.properties.get("high-color").toArray01(),be=H.properties.get("space-color").toArray01PremultipliedAlpha(),ve=_.identity$1([]);_.rotateY$1(ve,ve,-_.degToRad(re._center.lng)),_.rotateX$1(ve,ve,_.degToRad(re._center.lat)),_.rotateZ$1(ve,ve,re.angle),_.rotateX$1(ve,ve,-re._pitch);const Ce=_.fromQuat(new Float32Array(16),ve),Be=_.mapValue(H.properties.get("star-intensity"),0,1,0,.25),Ue=_.mapValue(H.properties.get("horizon-blend"),0,1,5e-4,.25),Ge=_.globeUseCustomAntiAliasing(z,W,re)&&5e-4===Ue?re.worldSize/(2*Math.PI*1.025)-1:re.globeRadius,tt=z.frameCounter/1e3%1,it=_.length(re.globeCenterInViewSpace),Ht=Math.sqrt(Math.pow(it,2)-Math.pow(Ge,2)),Ke=Math.acos(Ht/it),Tt={u_frustum_tl:re.frustumCorners.TL,u_frustum_tr:re.frustumCorners.TR,u_frustum_br:re.frustumCorners.BR,u_frustum_bl:re.frustumCorners.BL,u_horizon:re.frustumCorners.horizon,u_transition:le,u_fadeout_range:Ue,u_color:de,u_high_color:ne,u_space_color:be,u_star_intensity:Be,u_star_size:5*_.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:tt,u_horizon_angle:Ke,u_rotation_matrix:Ce};z.prepareDrawProgram(W,ue);const at=z.atmosphereBuffer;at&&ue.draw(W,J.TRIANGLES,he,_.StencilMode.disabled,_.ColorMode.alphaBlended,_.CullFaceMode.backCW,Tt,"skybox",at.vertexBuffer,at.indexBuffer,at.segments)}(this,this.style.fog),this.renderPass="sky",(_.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const z=this.style._layers[b[this.currentLayer]],H=h._getLayerSourceCache(z);z.isSky()&&this.renderLayer(this,H,z,H?O[H.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;){const z=this.style._layers[b[this.currentLayer]],H=h._getLayerSourceCache(z);if(z.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(z)){if(z.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const W=H?("symbol"===z.type?R:O)[H.id]:void 0;this._renderTileClippingMasks(z,H,H?S[H.id]:void 0),this.renderLayer(this,H,z,W),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let z=null;_.values(this.style._layers).forEach(H=>{const W=h._getLayerSourceCache(H);W&&!H.isHidden(this.transform.zoom)&&(!z||z.getSource().maxzoom<W.getSource().maxzoom)&&(z=W)}),z&&this.options.showTileBoundaries&&co.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const H=z.transform.padding;lo(z,z.transform.height-(H.top||0),3,Eh),lo(z,H.bottom||0,3,Cm),oc(z,H.left||0,3,Sh),oc(z,z.transform.width-(H.right||0),3,ao);const W=z.transform.centerPoint;var J,re,he,ue;Td(J=z,(re=W.x)-1,(he=z.transform.height-W.y)-10,2,20,ue=Cd),Td(J,re-10,he-1,20,2,ue)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(_.window.performance.now()),this.saveCanvasCopy())}}renderLayer(h,p,b,C){b.isHidden(this.transform.zoom)||("background"===b.type||"sky"===b.type||"custom"===b.type||C&&C.length)&&(this.id=b.id,this.gpuTimingStart(b),(!h.transform.projection.unsupportedLayers||!h.transform.projection.unsupportedLayers.includes(b.type)||h.terrain&&"custom"===b.type)&&co[b.type](h,p,b,C,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(h){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let b=this.gpuTimers[h.id];b||(b=this.gpuTimers[h.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),b.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,b.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const h=this.context.extTimerQuery,p=h.createQueryEXT();this.deferredRenderGpuTimeQueries.push(p),h.beginQueryEXT(h.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}collectGpuTimers(){const h=this.gpuTimers;return this.gpuTimers={},h}collectDeferredRenderGpuQueries(){const h=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],h}queryGpuTimers(h){const p={};for(const b in h){const C=h[b],S=this.context.extTimerQuery,O=S.getQueryObjectEXT(C.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(C.query),p[b]=O}return p}queryGpuTimeDeferredRender(h){if(!this.options.gpuTimingDeferredRender)return 0;const p=this.context.extTimerQuery;let b=0;for(const C of h)b+=p.getQueryObjectEXT(C,p.QUERY_RESULT_EXT)/1e6,p.deleteQueryEXT(C);return b}translatePosMatrix(h,p,b,C,S){if(!b[0]&&!b[1])return h;const O=S?"map"===C?this.transform.angle:0:"viewport"===C?-this.transform.angle:0;if(O){const H=Math.sin(O),W=Math.cos(O);b=[b[0]*W-b[1]*H,b[0]*H+b[1]*W]}const R=[S?b[0]:Zl(p,b[0],this.transform.zoom),S?b[1]:Zl(p,b[1],this.transform.zoom),0],z=new Float32Array(16);return _.translate(z,h,R),z}saveTileTexture(h){const p=this._tileTextures[h.size[0]];p?p.push(h):this._tileTextures[h.size[0]]=[h]}getTileTexture(h){const p=this._tileTextures[h];return p&&p.length>0?p.pop():null}isPatternMissing(h){return null===h||void 0!==h&&!this.imageManager.getPattern(h.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const h=this.terrain&&this.terrain.renderingToTexture,p=this.terrain&&0===this.terrain.exaggeration(),b=this.style&&this.style.fog,C=[];return this.terrainRenderModeElevated()&&C.push("TERRAIN"),"globe"===this.transform.projection.name&&C.push("GLOBE"),p&&C.push("ZERO_EXAGGERATION"),b&&!h&&0!==b.getOpacity(this.transform.pitch)&&C.push("FOG"),h&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}useProgram(h,p,b){this.cache=this.cache||{};const C=b||[],S=this.currentGlobalDefines().concat(C),O=Ka.cacheKey(Uy[h],h,S,p);return this.cache[O]||(this.cache[O]=new Ka(this.context,h,Uy[h],p,Dn[h],S)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const h=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(h.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=_.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new _.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(h,p,b){if(this.terrain&&this.terrain.renderingToTexture)return;const C=this.style.fog;if(C){const S=C.getOpacity(this.transform.pitch),O=((R,z,H,W,J,re,he,ue,le,de,ne)=>{const be=R.transform,ve=z.properties.get("color").toArray01();ve[3]=W;const Ce=R.frameCounter/1e3%1;return{u_fog_matrix:H?be.calculateFogTileMatrix(H):R.identityMat,u_fog_range:z.getFovAdjustedRange(be._fov),u_fog_color:ve,u_fog_horizon_blend:z.properties.get("horizon-blend"),u_fog_temporal_offset:Ce,u_frustum_tl:J,u_frustum_tr:re,u_frustum_br:he,u_frustum_bl:ue,u_globe_pos:le,u_globe_radius:de,u_viewport:ne,u_globe_transition:_.globeToMercatorTransition(be.zoom),u_is_globe:+("globe"===be.projection.name)}})(this,C,b,S,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*_.exported.devicePixelRatio,this.transform.height*_.exported.devicePixelRatio]);p.setFogUniformValues(h,O)}}setTileLoadedFlag(h){this.tileLoaded=h}saveCanvasCopy(){const h=this.canvasCopy();h&&(this.frameCopies.push(h),this.tileLoaded=!1)}canvasCopy(){const h=this.context.gl,p=h.createTexture();return h.bindTexture(h.TEXTURE_2D,p),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,h.drawingBufferWidth,h.drawingBufferHeight,0),p}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const h=this.style&&this.style.fog;return!!h&&0!==h.getOpacity(this.transform.pitch)}getBackgroundTiles(){const h=this._backgroundTiles,p=this._backgroundTiles={},b=this.transform.coveringTiles({tileSize:512});for(const C of b)p[C.key]=h[C.key]||new _.Tile(C,512,this.transform.tileZoom,this);return p}clearBackgroundTiles(){this._backgroundTiles={}}}class Ko{constructor(h=0,p=0,b=0,C=0){if(isNaN(h)||h<0||isNaN(p)||p<0||isNaN(b)||b<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=h,this.bottom=p,this.left=b,this.right=C}interpolate(h,p,b){return null!=p.top&&null!=h.top&&(this.top=_.number(h.top,p.top,b)),null!=p.bottom&&null!=h.bottom&&(this.bottom=_.number(h.bottom,p.bottom,b)),null!=p.left&&null!=h.left&&(this.left=_.number(h.left,p.left,b)),null!=p.right&&null!=h.right&&(this.right=_.number(h.right,p.right,b)),this}getCenter(h,p){const b=_.clamp((this.left+h-this.right)/2,0,h),C=_.clamp((this.top+p-this.bottom)/2,0,p);return new _.pointGeometry(b,C)}equals(h){return this.top===h.top&&this.bottom===h.bottom&&this.left===h.left&&this.right===h.right}clone(){return new Ko(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Qa(v,h){const p=_.getColumn(v,3);_.fromQuat(v,h),_.setColumn(v,3,p)}function Sd(v,h){const p=_.identity$1([]);return _.rotateZ$1(p,p,-h),_.rotateX$1(p,p,-v),p}function Dd(v,h){const p=[v[0],v[1],0],b=[h[0],h[1],0];if(_.length(p)>=1e-15){const O=_.normalize([],p);_.scale$2(b,O,_.dot(b,O)),h[0]=b[0],h[1]=b[1]}const C=_.cross([],h,v);if(_.len(C)<1e-15)return null;const S=Math.atan2(-C[1],C[0]);return Sd(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),S)}class Mh{constructor(h,p){this.position=h,this.orientation=p}get position(){return this._position}set position(h){if(h){const p=h instanceof _.MercatorCoordinate?h:new _.MercatorCoordinate(h[0],h[1],h[2]);this._renderWorldCopies&&(p.x=_.wrap(p.x,0,1)),this._position=p}else this._position=null}lookAtPoint(h,p){if(this.orientation=null,!this.position)return;const b=this._elevation?this._elevation.getAtPointOrZero(_.MercatorCoordinate.fromLngLat(h)):0,C=this.position,S=_.MercatorCoordinate.fromLngLat(h,b),O=[S.x-C.x,S.y-C.y,S.z-C.z];p||(p=[0,0,1]),p[2]=Math.abs(p[2]),this.orientation=Dd(O,p)}setPitchBearing(h,p){this.orientation=Sd(_.degToRad(h),_.degToRad(-p))}}class ko{constructor(h,p){this._transform=_.identity([]),this.orientation=p,this.position=h}get mercatorPosition(){const h=this.position;return new _.MercatorCoordinate(h[0],h[1],h[2])}get position(){const h=_.getColumn(this._transform,3);return[h[0],h[1],h[2]]}set position(h){var p;h&&_.setColumn(this._transform,3,[(p=h)[0],p[1],p[2],1])}get orientation(){return this._orientation}set orientation(h){this._orientation=h||_.identity$1([]),h&&Qa(this._transform,this._orientation)}getPitchBearing(){const h=this.forward(),p=this.right();return{bearing:Math.atan2(-p[1],p[0]),pitch:Math.atan2(Math.sqrt(h[0]*h[0]+h[1]*h[1]),-h[2])}}setPitchBearing(h,p){this._orientation=Sd(h,p),Qa(this._transform,this._orientation)}forward(){const h=_.getColumn(this._transform,2);return[-h[0],-h[1],-h[2]]}up(){const h=_.getColumn(this._transform,1);return[-h[0],-h[1],-h[2]]}right(){const h=_.getColumn(this._transform,0);return[h[0],h[1],h[2]]}getCameraToWorld(h,p){const b=new Float64Array(16);return _.invert(b,this.getWorldToCamera(h,p)),b}getWorldToCameraPosition(h,p,b){const C=this.position;_.scale$2(C,C,-h);const S=new Float64Array(16);return _.fromScaling(S,[b,b,b]),_.translate(S,S,C),S[10]*=p,S}getWorldToCamera(h,p){const b=new Float64Array(16),C=new Float64Array(4),S=this.position;return _.conjugate(C,this._orientation),_.scale$2(S,S,-h),_.fromQuat(b,C),_.translate(b,b,S),b[1]*=-1,b[5]*=-1,b[9]*=-1,b[13]*=-1,b[8]*=p,b[9]*=p,b[10]*=p,b[11]*=p,b}getCameraToClipPerspective(h,p,b,C){const S=new Float64Array(16);return _.perspective(S,h,p,b,C),S}getDistanceToElevation(h,p=!1){const b=0===h?0:_.mercatorZfromAltitude(h,p?_.latFromMercatorY(this.position[1]):this.position[1]),C=this.forward();return(b-this.position[2])/C[2]}clone(){return new ko([...this.position],[...this.orientation])}}function Md(v,h){const p=kh(v.projection,v.zoom,v.width,v.height),b=function(S,O,R,z,H){const W=new _.LngLat(R.lng-180*Ah,R.lat),J=new _.LngLat(R.lng+180*Ah,R.lat),re=S.project(W.lng,W.lat),he=S.project(J.lng,J.lat),ue=-Math.atan2(he.y-re.y,he.x-re.x),le=_.MercatorCoordinate.fromLngLat(R);le.y=_.clamp(le.y,-.999975,.999975);const de=le.toLngLat(),ne=S.project(de.lng,de.lat),be=_.MercatorCoordinate.fromLngLat(de);be.x+=Ah;const ve=be.toLngLat(),Ce=S.project(ve.lng,ve.lat),Be=Sm(Ce.x-ne.x,Ce.y-ne.y,ue),Le=_.MercatorCoordinate.fromLngLat(de);Le.y+=Ah;const Ue=Le.toLngLat(),Ge=S.project(Ue.lng,Ue.lat),tt=Sm(Ge.x-ne.x,Ge.y-ne.y,ue),it=Math.abs(Be.x)/Math.abs(tt.y),Ht=_.identity([]);_.rotateZ(Ht,Ht,-ue*(1-(H?0:z)));const Ke=_.identity([]);return _.scale(Ke,Ke,[1,1-(1-it)*z,1]),Ke[4]=-tt.x/tt.y*z,_.rotateZ(Ke,Ke,ue),_.multiply(Ke,Ht,Ke),Ke}(v.projection,0,v.center,p,h),C=T0(v);return _.scale(b,b,[C,C,1]),b}function T0(v){const h=v.projection,p=kh(v.projection,v.zoom,v.width,v.height),b=Em(h,v.center),C=Em(h,_.LngLat.convert(h.center));return Math.pow(2,b*p+(1-p)*C)}function kh(v,h,p,b,C=1/0){const S=v.range;if(!S)return 0;const O=Math.min(C,Math.max(p,b)),R=Math.log(O/1024)/Math.LN2;return _.smoothstep(S[0]+R,S[1]+R,h)}const Ah=1/4e4;function Em(v,h){const p=_.clamp(h.lat,-_.MAX_MERCATOR_LATITUDE,_.MAX_MERCATOR_LATITUDE),b=new _.LngLat(h.lng-180*Ah,p),C=new _.LngLat(h.lng+180*Ah,p),S=v.project(b.lng,p),O=v.project(C.lng,p),R=_.MercatorCoordinate.fromLngLat(b),z=_.MercatorCoordinate.fromLngLat(C),H=O.x-S.x,W=O.y-S.y,J=z.x-R.x,re=z.y-R.y,he=Math.sqrt((J*J+re*re)/(H*H+W*W));return Math.log(he)/Math.LN2}function Sm(v,h,p){const b=Math.cos(p),C=Math.sin(p);return{x:v*b-h*C,y:v*C+h*b}}class on{constructor(h,p,b,C,S,O,R){this.tileSize=512,this._renderWorldCopies=void 0===S||S,this._minZoom=h||0,this._maxZoom=p||22,this._minPitch=b??0,this._maxPitch=C??60,this.setProjection(O),this.setMaxBounds(R),this.width=0,this.height=0,this._center=new _.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Ko,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ko,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const h=new on(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return h._elevation=this._elevation,h._centerAltitude=this._centerAltitude,h._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,h.tileSize=this.tileSize,h.mercatorFromTransition=this.mercatorFromTransition,h.width=this.width,h.height=this.height,h.cameraElevationReference=this.cameraElevationReference,h._center=this._center,h._setZoom(this.zoom),h._seaLevelZoom=this._seaLevelZoom,h.angle=this.angle,h._fov=this._fov,h._pitch=this._pitch,h._nearZ=this._nearZ,h._farZ=this._farZ,h._averageElevation=this._averageElevation,h._unmodified=this._unmodified,h._edgeInsets=this._edgeInsets.clone(),h._camera=this._camera.clone(),h._calcMatrices(),h.freezeTileCoverage=this.freezeTileCoverage,h.frustumCorners=this.frustumCorners,h}get elevation(){return this._elevation}set elevation(h){this._elevation!==h&&(this._elevation=h,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(h,p=!1){const b=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||b)&&this._updateCameraOnTerrain(),(h||b)&&this._constrainCamera(p),this._calcMatrices()}getProjection(){return _.pick(this.projection,["name","center","parallels"])}setProjection(h){this.projectionOptions=h||{name:"mercator"};const p=this.projection?this.getProjection():void 0;this.projection=_.getProjection(this.projectionOptions);const b=!Et(p,this.getProjection());return b&&this._calcMatrices(),this.mercatorFromTransition=!1,b}setMercatorFromTransition(){const h=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=_.getProjection({name:"mercator"});const p=h!==this.projection.name;return p&&this._calcMatrices(),p}get minZoom(){return this._minZoom}set minZoom(h){this._minZoom!==h&&(this._minZoom=h,this.zoom=Math.max(this.zoom,h))}get maxZoom(){return this._maxZoom}set maxZoom(h){this._maxZoom!==h&&(this._maxZoom=h,this.zoom=Math.min(this.zoom,h))}get minPitch(){return this._minPitch}set minPitch(h){this._minPitch!==h&&(this._minPitch=h,this.pitch=Math.max(this.pitch,h))}get maxPitch(){return this._maxPitch}set maxPitch(h){this._maxPitch!==h&&(this._maxPitch=h,this.pitch=Math.min(this.pitch,h))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(h){void 0===h?h=!0:null===h&&(h=!1),this._renderWorldCopies=h}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get cameraWorldSize(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return _.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new _.pointGeometry(this.width,this.height)}get bearing(){return _.wrap(this.rotation,-180,180)}set bearing(h){this.rotation=h}get rotation(){return-this.angle/Math.PI*180}set rotation(h){const p=-h*Math.PI/180;var b,C,S,O,R,z,H,W,J,re;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(b=new _.ARRAY_TYPE(4),_.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b),C=this.rotationMatrix,O=this.angle,R=(S=this.rotationMatrix)[0],z=S[1],H=S[2],W=S[3],J=Math.sin(O),re=Math.cos(O),C[0]=R*re+H*J,C[1]=z*re+W*J,C[2]=R*-J+H*re,C[3]=z*-J+W*re)}get pitch(){return this._pitch/Math.PI*180}set pitch(h){const p=_.clamp(h,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const h=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/h)}set fov(h){h=Math.max(.01,Math.min(60,h)),this._fov!==h&&(this._unmodified=!1,this._fov=_.degToRad(h),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(h){this._averageElevation=h,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(h){const p=Math.min(Math.max(h,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._setZoom(p),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(h){this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const h=this._elevation;this._centerAltitude=h.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=h.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const h=this._elevation,p=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],b=this.horizonLineFromTop();let C=0,S=0;for(let O=0;O<p.length;O++){const R=new _.pointGeometry(p[O][0]*this.width,b+p[O][1]*(this.height-b)),z=h.pointCoordinate(R);if(!z)continue;const H=1/Math.hypot(z[0]-this._camera.position[0],z[1]-this._camera.position[1]);C+=z[3]*H,S+=H}return 0===S?NaN:C/S}get center(){return this._center}set center(h){h.lat===this._center.lat&&h.lng===this._center.lng||(this._unmodified=!1,this._center=h,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const h=this._seaLevelZoom,p=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),b=this.pixelsPerMeter/this.worldSize*p,C=this._mercatorZfromZoom(h),S=this._mercatorZfromZoom(this._maxZoom),O=Math.max(C-b,S);this._setZoom(this._zoomFromMercatorZ(O))}get padding(){return this._edgeInsets.toJSON()}set padding(h){this._edgeInsets.equals(h)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,h,1),this._calcMatrices())}computeZoomRelativeTo(h){const p=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,h.toAltitude()));let b;b=h.z<this._camera.position[2]?[p.x,p.y,p.z]:[h.x,h.y,h.z];const C=_.length(_.sub([],this._camera.position,b));return _.clamp(this._zoomFromMercatorZ(C),this._minZoom,this._maxZoom)}setFreeCameraOptions(h){if(!this.height||!h.position&&!h.orientation)return;this._updateCameraState();let p=!1;if(h.orientation&&!_.exactEquals(h.orientation,this._camera.orientation)&&(p=this._setCameraOrientation(h.orientation)),h.position){const b=[h.position.x,h.position.y,h.position.z];_.exactEquals$1(b,this._camera.position)||(this._setCameraPosition(b),p=!0)}p&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const h=this._camera.position,p=new Mh;return p.position=new _.MercatorCoordinate(h[0],h[1],h[2]),p.orientation=this._camera.orientation,p._elevation=this.elevation,p._renderWorldCopies=this.renderWorldCopies,p}_setCameraOrientation(h){if(!_.length$1(h))return!1;_.normalize$1(h,h);const p=_.transformQuat([],[0,0,-1],h),b=_.transformQuat([],[0,-1,0],h);if(b[2]<0)return!1;const C=Dd(p,b);return!!C&&(this._camera.orientation=C,!0)}_setCameraPosition(h){const p=this.zoomScale(this.minZoom)*this.tileSize,b=this.zoomScale(this.maxZoom)*this.tileSize,C=this.cameraToCenterDistance;h[2]=_.clamp(h[2],C/b,C/p),this._camera.position=h}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(h){return this._edgeInsets.equals(h)}interpolatePadding(h,p,b){this._unmodified=!1,this._edgeInsets.interpolate(h,p,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(h){const p=(h.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/h.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(h){const p=[new _.UnwrappedTileID(0,h)];if(this.renderWorldCopies){const b=this.pointCoordinate(new _.pointGeometry(0,0)),C=this.pointCoordinate(new _.pointGeometry(this.width,0)),S=this.pointCoordinate(new _.pointGeometry(this.width,this.height)),O=this.pointCoordinate(new _.pointGeometry(0,this.height)),R=Math.floor(Math.min(b.x,C.x,S.x,O.x)),z=Math.floor(Math.max(b.x,C.x,S.x,O.x)),H=1;for(let W=R-H;W<=z+H;W++)0!==W&&p.push(new _.UnwrappedTileID(W,h))}return p}coveringTiles(h){let p=this.coveringZoomLevel(h);const b=p,C=this.elevation&&!h.isTerrainDEM,S="mercator"===this.projection.name;if(void 0!==h.minzoom&&p<h.minzoom)return[];void 0!==h.maxzoom&&p>h.maxzoom&&(p=h.maxzoom);const O=this.locationCoordinate(this.center),R=this.center.lat,z=1<<p,H=[z*O.x,z*O.y,0],W="globe"===this.projection.name,J=!W,re=_.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p,J),he=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ue=z*_.mercatorZfromAltitude(1,this.center.lat),le=this._camera.position[2]/_.mercatorZfromAltitude(1,this.center.lat),de=[z*he.x,z*he.y,le*(J?1:ue)],ne=this.cameraToCenterDistance/h.tileSize*(h.roundZoom?1:.502),be=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?p:0,ve=h.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ce=h.isTerrainDEM?-ve:this._elevation?this._elevation.getMinElevationBelowMSL():0,Be=this.projection.isReprojectedInTileSpace?T0(this):1,Le=st=>{const ot=new _.MercatorCoordinate(st.x+25e-6,st.y,st.z),kt=new _.MercatorCoordinate(st.x,st.y+25e-6,st.z),Nt=st.toLngLat(),wn=ot.toLngLat(),sr=kt.toLngLat(),yn=this.locationCoordinate(Nt),rn=this.locationCoordinate(wn),Cn=this.locationCoordinate(sr),mr=Math.hypot(rn.x-yn.x,rn.y-yn.y),En=Math.hypot(Cn.x-yn.x,Cn.y-yn.y);return Math.sqrt(mr*En)*Be/25e-6},Ue=st=>{const Ye=ve,ot=Ce;return{aabb:_.tileAABB(this,z,0,0,0,st,ot,Ye,this.projection),zoom:0,x:0,y:0,minZ:ot,maxZ:Ye,wrap:st,fullyVisible:!1}},Ge=[];let tt=[];const it=p,Ht=h.reparseOverscaled?b:p,Ke=st=>st*st,Tt=Ke((le-this._centerAltitude)*ue),at=st=>{if(!this._elevation||!st.tileID||!S)return;const Ye=this._elevation.getMinMaxForTile(st.tileID),ot=st.aabb;Ye?(ot.min[2]=Ye.min,ot.max[2]=Ye.max,ot.center[2]=(ot.min[2]+ot.max[2])/2):(st.shouldSplit=Ot(st),st.shouldSplit||(ot.min[2]=ot.max[2]=ot.center[2]=this._centerAltitude))},Ot=st=>{if(st.zoom<be)return!0;if(st.zoom===it)return!1;if(null!=st.shouldSplit)return st.shouldSplit;const Ye=st.aabb.distanceX(de),ot=st.aabb.distanceY(de);let kt=Tt,Nt=1;if(W){kt=Ke(st.aabb.distanceZ(de));const yn=Math.pow(2,st.zoom),rn=_.latFromMercatorY((st.y+1)/yn),Cn=_.latFromMercatorY(st.y/yn),mr=Math.min(Math.max(R,rn),Cn),En=_.circumferenceAtLatitude(mr)/_.circumferenceAtLatitude(R);if(Nt=mr===R?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,En/this._mercatorScaleRatio),this.zoom<=_.GLOBE_ZOOM_THRESHOLD_MIN&&st.zoom===it-1&&En>=.9)return!0}else if(C&&(kt=Ke(st.aabb.distanceZ(de)*ue)),this.projection.isReprojectedInTileSpace&&b<=5){const yn=Math.pow(2,st.zoom),rn=Le(new _.MercatorCoordinate((st.x+.5)/yn,(st.y+.5)/yn));Nt=rn>.85?1:rn}const wn=Ye*Ye+ot*ot+kt;return wn<Ke((1<<it-st.zoom)*ne*Nt*((yn,rn)=>{if(rn*Ke(.707)<yn)return 1;const Cn=Math.sqrt(rn/yn);return Cn/(1.4144271570014144+(Math.pow(1.1,Cn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(kt,Tt),wn))};if(this.renderWorldCopies)for(let st=1;st<=3;st++)Ge.push(Ue(-st)),Ge.push(Ue(st));for(Ge.push(Ue(0));Ge.length>0;){const st=Ge.pop(),Ye=st.x,ot=st.y;let kt=st.fullyVisible;if(!kt){const Nt=st.aabb.intersects(re);if(0===Nt)continue;kt=2===Nt}if(st.zoom!==it&&Ot(st))for(let Nt=0;Nt<4;Nt++){const wn=(Ye<<1)+Nt%2,sr=(ot<<1)+(Nt>>1),yn={aabb:S?st.aabb.quadrant(Nt):_.tileAABB(this,z,st.zoom+1,wn,sr,st.wrap,st.minZ,st.maxZ,this.projection),zoom:st.zoom+1,x:wn,y:sr,wrap:st.wrap,fullyVisible:kt,tileID:void 0,shouldSplit:void 0,minZ:st.minZ,maxZ:st.maxZ};C&&!W&&(yn.tileID=new _.OverscaledTileID(st.zoom+1===it?Ht:st.zoom+1,st.wrap,st.zoom+1,wn,sr),at(yn)),Ge.push(yn)}else{const Nt=st.zoom===it?Ht:st.zoom;if(h.minzoom&&h.minzoom>Nt)continue;const wn=H[0]-(.5+Ye+(st.wrap<<st.zoom))*(1<<p-st.zoom),sr=H[1]-.5-ot,yn=st.tileID?st.tileID:new _.OverscaledTileID(Nt,st.wrap,st.zoom,Ye,ot);tt.push({tileID:yn,distanceSq:wn*wn+sr*sr})}}if(this.fogCullDistSq){const st=this.fogCullDistSq,Ye=this.horizonLineFromTop();tt=tt.filter(ot=>{const kt=[0,0,0,1],Nt=[_.EXTENT,_.EXTENT,0,1],wn=this.calculateFogTileMatrix(ot.tileID.toUnwrapped());_.transformMat4$1(kt,kt,wn),_.transformMat4$1(Nt,Nt,wn);const sr=_.getAABBPointSquareDist(kt,Nt);if(0===sr)return!0;let yn=!1;const rn=this._elevation;if(rn&&sr>st&&0!==Ye){const Cn=this.calculateProjMatrix(ot.tileID.toUnwrapped());let mr;h.isTerrainDEM||(mr=rn.getMinMaxForTile(ot.tileID)),mr||(mr={min:Ce,max:ve});const En=_.furthestTileCorner(this.rotation),jr=[En[0]*_.EXTENT,En[1]*_.EXTENT,mr.max];_.transformMat4(jr,jr,Cn),yn=(1-jr[1])*this.height*.5<Ye}return sr<st||yn})}return tt.sort((st,Ye)=>st.distanceSq-Ye.distanceSq).map(st=>st.tileID)}resize(h,p){this.width=h,this.height=p,this.pixelsToGLUnits=[2/h,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(h){return Math.pow(2,h)}scaleZoom(h){return Math.log(h)/Math.LN2}project(h){const p=_.clamp(h.lat,-_.MAX_MERCATOR_LATITUDE,_.MAX_MERCATOR_LATITUDE),b=this.projection.project(h.lng,p);return new _.pointGeometry(b.x*this.worldSize,b.y*this.worldSize)}unproject(h){return this.projection.unproject(h.x/this.worldSize,h.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/_.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(h,p){let b,C;const S=this.centerPoint;if("globe"===this.projection.name){const R=this.worldSize;b=(p.x-S.x)/R,C=(p.y-S.y)/R}else{const R=this.pointCoordinate(p),z=this.pointCoordinate(S);b=R.x-z.x,C=R.y-z.y}const O=this.locationCoordinate(h);this.setLocation(new _.MercatorCoordinate(O.x-b,O.y-C))}setLocation(h){this.center=this.coordinateLocation(h),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(h){return this.projection.locationPoint(this,h)}locationPoint3D(h){return this.projection.locationPoint(this,h,!0)}pointLocation(h){return this.coordinateLocation(this.pointCoordinate(h))}pointLocation3D(h){return this.coordinateLocation(this.pointCoordinate3D(h))}locationCoordinate(h,p){const b=p?_.mercatorZfromAltitude(p,h.lat):void 0,C=this.projection.project(h.lng,h.lat);return new _.MercatorCoordinate(C.x,C.y,b)}coordinateLocation(h){return this.projection.unproject(h.x,h.y)}pointRayIntersection(h,p){const b=p??this._centerAltitude,C=[h.x,h.y,0,1],S=[h.x,h.y,1,1];_.transformMat4$1(C,C,this.pixelMatrixInverse),_.transformMat4$1(S,S,this.pixelMatrixInverse);const O=S[3];_.scale$1(C,C,1/C[3]),_.scale$1(S,S,1/O);const R=C[2],z=S[2];return{p0:C,p1:S,t:R===z?0:(b-R)/(z-R)}}screenPointToMercatorRay(h){const p=[h.x,h.y,0,1],b=[h.x,h.y,1,1];return _.transformMat4$1(p,p,this.pixelMatrixInverse),_.transformMat4$1(b,b,this.pixelMatrixInverse),_.scale$1(p,p,1/p[3]),_.scale$1(b,b,1/b[3]),p[2]=_.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,b[2]=_.mercatorZfromAltitude(b[2],this._center.lat)*this.worldSize,_.scale$1(p,p,1/this.worldSize),_.scale$1(b,b,1/this.worldSize),new _.Ray([p[0],p[1],p[2]],_.normalize([],_.sub([],b,p)))}rayIntersectionCoordinate(h){const{p0:p,p1:b,t:C}=h,S=_.mercatorZfromAltitude(p[2],this._center.lat),O=_.mercatorZfromAltitude(b[2],this._center.lat);return new _.MercatorCoordinate(_.number(p[0],b[0],C)/this.worldSize,_.number(p[1],b[1],C)/this.worldSize,_.number(S,O,C))}pointCoordinate(h,p=this._centerAltitude){return this.projection.pointCoordinate(this,h.x,h.y,p)}pointCoordinate3D(h){if(!this.elevation)return this.pointCoordinate(h);let p=this.projection.pointCoordinate3D(this,h.x,h.y);if(p)return new _.MercatorCoordinate(p[0],p[1],p[2]);let b=0,C=this.horizonLineFromTop();if(h.y>C)return this.pointCoordinate(h);const S=.02*C,O=h.clone();for(let R=0;R<10&&C-b>S;R++){O.y=_.number(b,C,.66);const z=this.projection.pointCoordinate3D(this,O.x,O.y);z?(C=O.y,p=z):b=O.y}return p?new _.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(h)}isPointAboveHorizon(h){return this.projection.isPointAboveHorizon(this,h)}_coordinatePoint(h,p){const b=p&&this.elevation?this.elevation.getAtPointOrZero(h,this._centerAltitude):this._centerAltitude,C=[h.x*this.worldSize,h.y*this.worldSize,b+h.toAltitude(),1];return _.transformMat4$1(C,C,this.pixelMatrix),C[3]>0?new _.pointGeometry(C[0]/C[3],C[1]/C[3]):new _.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:h,left:p}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,S=this.pointLocation3D(new _.pointGeometry(p,h)),O=this.pointLocation3D(new _.pointGeometry(C,h)),R=this.pointLocation3D(new _.pointGeometry(C,b)),z=this.pointLocation3D(new _.pointGeometry(p,b));let H=Math.min(S.lng,O.lng,R.lng,z.lng),W=Math.max(S.lng,O.lng,R.lng,z.lng),J=Math.min(S.lat,O.lat,R.lat,z.lat),re=Math.max(S.lat,O.lat,R.lat,z.lat);const he=Math.pow(2,-this.zoom)/16*270,ue="globe"===this.projection.name?1:4,le=(de,ne,be,ve,Ce)=>{const Be=(de+be)/2,Le=(ne+ve)/2,Ue=new _.pointGeometry(Be,Le),{lng:Ge,lat:tt}=this.pointLocation3D(Ue),it=Math.max(0,H-Ge,J-tt,Ge-W,tt-re);H=Math.min(H,Ge),W=Math.max(W,Ge),J=Math.min(J,tt),re=Math.max(re,tt),(Ce<ue||it>he)&&(le(de,ne,Be,Le,Ce+1),le(Be,Le,be,ve,Ce+1))};if(le(p,h,C,h,1),le(C,h,C,b,1),le(C,b,p,b,1),le(p,b,p,h,1),"globe"===this.projection.name){const[de,ne]=_.polesInViewport(this);de?(re=90,W=180,H=-180):ne&&(J=-90,W=180,H=-180)}return new _.LngLatBounds(new _.LngLat(H,J),new _.LngLat(W,re))}_getBoundsRectangular(h,p){const{top:b,left:C}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,O=this.width-this._edgeInsets.right,R=new _.pointGeometry(C,b),z=new _.pointGeometry(O,b),H=new _.pointGeometry(O,S),W=new _.pointGeometry(C,S);let J=this.pointCoordinate(R,h),re=this.pointCoordinate(z,h);const he=this.pointCoordinate(H,p),ue=this.pointCoordinate(W,p),le=(de,ne)=>(ne.y-de.y)/(ne.x-de.x);return J.y>1&&re.y>=0?J=new _.MercatorCoordinate((1-ue.y)/le(ue,J)+ue.x,1):J.y<0&&re.y<=1&&(J=new _.MercatorCoordinate(-ue.y/le(ue,J)+ue.x,0)),re.y>1&&J.y>=0?re=new _.MercatorCoordinate((1-he.y)/le(he,re)+he.x,1):re.y<0&&J.y<=1&&(re=new _.MercatorCoordinate(-he.y/le(he,re)+he.x,0)),(new _.LngLatBounds).extend(this.coordinateLocation(J)).extend(this.coordinateLocation(re)).extend(this.coordinateLocation(ue)).extend(this.coordinateLocation(he))}_getBoundsRectangularTerrain(){const h=this.elevation;if(!h.visibleDemTiles.length||h.isUsingMockSource())return this._getBoundsRectangular(0,0);const p=h.visibleDemTiles.reduce((b,C)=>{if(C.dem){const S=C.dem.tree;b.min=Math.min(b.min,S.minimums[0]),b.max=Math.max(b.max,S.maximums[0])}return b},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(p.min*h.exaggeration(),p.max*h.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(h=!0){const p=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,b=this.height/2-p*(1-this._horizonShift);return h?Math.max(0,b):b}getMaxBounds(){return this.maxBounds}setMaxBounds(h){this.maxBounds=h,this.minLat=-_.MAX_MERCATOR_LATITUDE,this.maxLat=_.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,h&&(this.minLat=h.getSouth(),this.maxLat=h.getNorth(),this.minLng=h.getWest(),this.maxLng=h.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=_.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=_.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=_.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=_.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(h,p){return this.projection.createTileMatrix(this,p,h)}calculateDistanceTileData(h){const p=h.key,b=this._distanceTileDataCache;if(b[p])return b[p];const C=h.canonical,S=1/this.height,O=this.cameraWorldSize,R=O/this.zoomScale(C.z),z=(C.x+Math.pow(2,C.z)*h.wrap)*R,H=C.y*R,W=this.point;W.x*=O/this.worldSize,W.y*=O/this.worldSize;const J=this.angle,re=Math.sin(-J),he=-Math.cos(-J);return b[p]={bearing:[re,he],center:[(W.x-z)*S,(W.y-H)*S],scale:R/_.EXTENT*S},b[p]}calculateFogTileMatrix(h){const p=h.key,b=this._fogTileMatrixCache;if(b[p])return b[p];const C=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,h);return _.multiply(C,this.worldToFogMatrix,C),b[p]=new Float32Array(C),b[p]}calculateProjMatrix(h,p=!1){const b=h.key,C=p?this._alignedProjMatrixCache:this._projMatrixCache;if(C[b])return C[b];const S=this.calculatePosMatrix(h,this.worldSize);return _.multiply(S,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.alignedProjMatrix:this.projMatrix,S),C[b]=new Float32Array(S),C[b]}calculatePixelsToTileUnitsMatrix(h){const p=h.tileID.key,b=this._pixelsToTileUnitsCache;if(b[p])return b[p];const C=function(S,O){const{scale:R}=S.tileTransform,z=R*_.EXTENT/(S.tileSize*Math.pow(2,O.zoom-S.tileID.overscaledZ+S.tileID.canonical.z));return H=new Float32Array(4),re=(W=O.inverseAdjustmentMatrix)[1],he=W[2],ue=W[3],de=(J=[z,z])[1],H[0]=W[0]*(le=J[0]),H[1]=re*le,H[2]=he*de,H[3]=ue*de,H;var H,W,J,re,he,ue,le,de}(h,this);return b[p]=C,b[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const h=1/this.worldSize,p=_.fromScaling([],[h,h,h]);return _.multiply(p,p,this.globeMatrix),p}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const h=this._elevation;this._updateCameraState();const p=_.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(p),C=this._camera.forward(),S=_.mercatorZfromAltitude(1,this._center.lat);b[2]/=S,C[2]/=S,_.normalize(C,C);const O=h.raycast(b,C,h.exaggeration());if(O){const R=_.scaleAndAdd([],b,C,O),z=new _.MercatorCoordinate(R[0],R[1],_.mercatorZfromAltitude(R[2],_.latFromMercatorY(R[1]))),H=(z.z+_.length([z.x-b[0],z.y-b[1],z.z-b[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(H),this._centerAltitude=z.toAltitude(),this._center=this.coordinateLocation(z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(h=!1){if(!this._elevation)return;const p=this._elevation,b=_.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,C=this._computeCameraPosition(b),S=p.getAtPointOrZero(new _.MercatorCoordinate(...C)),O=this.pixelsPerMeter/this.worldSize*S,R=this._minimumHeightOverTerrain(),z=C[2]-O;if(z<=R)if(z<0||h){const H=this.locationCoordinate(this._center,this._centerAltitude),W=[C[0],C[1],H.z-C[2]],J=_.length(W);W[2]-=(R-z)/this._pixelsPerMercatorPixel;const re=_.length(W);if(0===re)return;_.scale$2(W,W,J/re*this._pixelsPerMercatorPixel),this._camera.position=[C[0],C[1],H.z*this._pixelsPerMercatorPixel-W[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const h="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||h){const re=this.center;return re.lat=_.clamp(re.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!h)&&(re.lng=_.clamp(re.lng,this.minLng,this.maxLng)),this.center=re,void(this._constraining=!1)}const p=this._unmodified,{x:b,y:C}=this.point;let S=0,O=b,R=C;const z=this.width/2,H=this.height/2,W=this.worldMinY*this.scale,J=this.worldMaxY*this.scale;if(C-H<W&&(R=W+H),C+H>J&&(R=J-H),J-W<this.height&&(S=Math.max(S,this.height/(J-W)),R=(J+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const re=this.worldMinX*this.scale,he=this.worldMaxX*this.scale,ue=this.worldSize/2-(re+he)/2;O=(b+ue+this.worldSize)%this.worldSize-ue,O-z<re&&(O=re+z),O+z>he&&(O=he-z),he-re<this.width&&(S=Math.max(S,this.width/(he-re)),O=(he+re)/2)}O===b&&R===C||(this.center=this.unproject(new _.pointGeometry(O,R))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=p,this._constraining=!1}_minZoomForBounds(){let h=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(h=Math.max(h,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),h}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const h=this.centerOffset,p=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=_.mercatorZfromAltitude(1,this.center.lat)/_.mercatorZfromAltitude(1,_.GLOBE_SCALE_MATCH_LATITUDE));const b=kh(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,b),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C="meters"===this.projection.zAxisUnit?p:1,S=this._camera.getWorldToCamera(this.worldSize,C),O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);O[8]=2*-h.x/this.width,O[9]=2*h.y/this.height;let R=_.mul([],O,S);if(this.projection.isReprojectedInTileSpace){const Le=this.locationCoordinate(this.center),Ue=_.identity([]);_.translate(Ue,Ue,[Le.x*this.worldSize,Le.y*this.worldSize,0]),_.multiply(Ue,Ue,Md(this)),_.translate(Ue,Ue,[-Le.x*this.worldSize,-Le.y*this.worldSize,0]),_.multiply(R,R,Ue),this.inverseAdjustmentMatrix=function(Ge){const tt=Md(Ge,!0);return Cr([],[tt[0],tt[1],tt[4],tt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=_.scale([],R,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=R,this.invProjMatrix=_.invert(new Float64Array(16),this.projMatrix);const z=_.invert([],O);this.frustumCorners=_.FrustumCorners.fromInvProjectionMatrix(z,this.horizonLineFromTop(),this.height);const H=new Float32Array(16);_.identity(H),_.scale(H,H,[1,-1,1]),_.rotateX(H,H,this._pitch),_.rotateZ(H,H,this.angle);const W=_.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),J=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;W[8]=2*-h.x/this.width,W[9]=2*(h.y+J)/this.height,this.skyboxMatrix=_.multiply(H,W,H);const re=this.point,he=re.x,ue=re.y,le=this.width%2/2,de=this.height%2/2,ne=Math.cos(this.angle),be=Math.sin(this.angle),ve=he-Math.round(he)+ne*le+be*de,Ce=ue-Math.round(ue)+ne*de+be*le,Be=new Float64Array(R);if(_.translate(Be,Be,[ve>.5?ve-1:ve,Ce>.5?Ce-1:Ce,0]),this.alignedProjMatrix=Be,R=_.create(),_.scale(R,R,[this.width/2,-this.height/2,1]),_.translate(R,R,[1,-1,0]),this.labelPlaneMatrix=R,R=_.create(),_.scale(R,R,[1,-1,1]),_.translate(R,R,[-1,-1,0]),_.scale(R,R,[2/this.width,2/this.height,1]),this.glCoordMatrix=R,this.pixelMatrix=_.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},R=_.invert(new Float64Array(16),this.pixelMatrix),!R)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=R,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=_.calculateGlobeMatrix(this);const Le=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=_.transformMat4(Le,Le,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=R;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const h=this.cameraWorldSizeForFog,p=this.cameraPixelsPerMeter,b=this._camera.position,C=1/this.height/this._pixelsPerMercatorPixel,S=[h,h,p];_.scale$2(S,S,C),_.scale$2(b,b,-1),_.multiply$2(b,b,S);const O=_.create();_.translate(O,O,b),_.scale(O,O,S),this.mercatorFogMatrix=O,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(h,p,C)}_computeCameraPosition(h){const p=(h=h||this.pixelsPerMeter)/this.pixelsPerMeter,b=this._camera.forward(),C=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*p-h/this.worldSize*this._centerAltitude;return[C.x/this.worldSize-b[0]*S,C.y/this.worldSize-b[1]*S,h/this.worldSize*this._centerAltitude-b[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(h){const p=this._maxCameraBoundsDistance()*Math.cos(this._pitch),b=this._camera.position[2],C=h[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),C>0&&(S=Math.min((p-b)/C,1)),this._camera.position=_.scaleAndAdd([],this._camera.position,h,S),this._updateStateFromCamera()}_updateStateFromCamera(){const h=this._camera.position,p=this._camera.forward(),{pitch:b,bearing:C}=this._camera.getPitchBearing(),S=_.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,O=this._mercatorZfromZoom(this._maxZoom)*Math.cos(_.degToRad(this._maxPitch)),R=Math.max((h[2]-S)/Math.cos(b),O),z=this._zoomFromMercatorZ(R);_.scaleAndAdd(h,h,p,R),this._pitch=_.clamp(b,_.degToRad(this.minPitch),_.degToRad(this.maxPitch)),this.angle=_.wrap(C,-Math.PI,Math.PI),this._setZoom(_.clamp(z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new _.MercatorCoordinate(h[0],h[1],h[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(h){return Math.pow(2,h)*this.tileSize}_mercatorZfromZoom(h){return this.cameraToCenterDistance/this._worldSizeFromZoom(h)}_minimumHeightOverTerrain(){const h=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(h)}_zoomFromMercatorZ(h){return this.scaleZoom(this.cameraToCenterDistance/(h*this.tileSize))}zoomFromMercatorZAdjusted(h){let p=0,b=_.GLOBE_ZOOM_THRESHOLD_MAX,C=0,S=1/0;for(;b-p>1e-6&&b>p;){const O=p+.5*(b-p),R=this.tileSize*Math.pow(2,O),z=this.getCameraToCenterDistance(this.projection,O,R),H=this.scaleZoom(z/(h*this.tileSize)),W=Math.abs(O-H);W<S&&(S=W,C=O),O<H?p=O:b=O}return C}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(_.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(h,p){const b=Math.min(h.x,p.x),C=Math.max(h.x,p.x),S=Math.min(h.y,p.y),O=Math.max(h.y,p.y);if(S<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const R=[new _.pointGeometry(b,S),new _.pointGeometry(C,O),new _.pointGeometry(b,O),new _.pointGeometry(C,S)],z=this.renderWorldCopies?-3:0,H=this.renderWorldCopies?4:1;for(const W of R){const J=this.pointRayIntersection(W);if(J.t<0)return!0;const re=this.rayIntersectionCoordinate(J);if(re.x<z||re.y<0||re.x>H||re.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+_.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new _.pointGeometry(0,0),new _.pointGeometry(this.width,this.height))}zoomDeltaToMovement(h,p){const b=_.length(_.sub([],this._camera.position,h)),C=this._zoomFromMercatorZ(b)+p;return b-this._mercatorZfromZoom(C)}getCameraPoint(){if("globe"===this.projection.name){const h=function([p,b,C],S){const O=[p,b,C,1];_.transformMat4$1(O,O,S);const R=O[3]=Math.max(O[3],1e-6);return O[0]/=R,O[1]/=R,O[2]/=R,O}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new _.pointGeometry(h[0],h[1])}{const h=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _.pointGeometry(0,h))}}getCameraToCenterDistance(h,p=this.zoom,b=this.worldSize){const C=kh(h,p,this.width,this.height,1024),S=h.pixelSpaceConversion(this.center.lat,b,C);return.5/Math.tan(.5*this._fov)*this.height*S}getWorldToCameraMatrix(){const h=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&_.multiply(h,h,this.globeMatrix),h}}function kl(v,h){let p=!1,b=null;const C=()=>{b=null,p&&(v(),b=setTimeout(C,h),p=!1)};return()=>(p=!0,b||C(),b)}class Ox{constructor(h){this._hashName=h&&encodeURIComponent(h),_.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=kl(this._updateHashUnthrottled.bind(this),300)}addTo(h){return this._map=h,_.window.addEventListener("hashchange",this._onHashChange,!1),h.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),_.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const h=this._map;if(!h)return"";const p=Wy(h);if(this._hashName){const b=this._hashName;let C=!1;const S=_.window.location.hash.slice(1).split("&").map(O=>{const R=O.split("=")[0];return R===b?(C=!0,`${R}=${p}`):O}).filter(O=>O);return C||S.push(`${b}=${p}`),`#${S.join("&")}`}return`#${p}`}_getCurrentHash(){const h=_.window.location.hash.replace("#","");if(this._hashName){let p;return h.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(p=b)}),(p&&p[1]||"").split("/")}return h.split("/")}_onHashChange(){const h=this._map;if(!h)return!1;const p=this._getCurrentHash();if(p.length>=3&&!p.some(b=>isNaN(b))){const b=h.dragRotate.isEnabled()&&h.touchZoomRotate.isEnabled()?+(p[3]||0):h.getBearing();return h.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:b,pitch:+(p[4]||0)}),!0}return!1}_updateHashUnthrottled(){const h=_.window.location.href.replace(/(#.+)?$/,this.getHashString());_.window.history.replaceState(_.window.history.state,null,h)}}function Wy(v,h){const p=v.getCenter(),b=Math.round(100*v.getZoom())/100,C=Math.ceil((b*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,C),O=Math.round(p.lng*S)/S,R=Math.round(p.lat*S)/S,z=v.getBearing(),H=v.getPitch();let W=h?`/${O}/${R}/${b}`:`${b}/${R}/${O}`;return(z||H)&&(W+="/"+Math.round(10*z)/10),H&&(W+=`/${Math.round(H)}`),W}const Dm={linearity:.3,easing:_.bezier(0,0,.3,1)},tp=_.extend({deceleration:2500,maxSpeed:1400},Dm),Lx=_.extend({deceleration:20,maxSpeed:1400},Dm),E0=_.extend({deceleration:1e3,maxSpeed:360},Dm),Gy=_.extend({deceleration:1e3,maxSpeed:90},Dm);class S0{constructor(h){this._map=h,this.clear()}clear(){this._inertiaBuffer=[]}record(h){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:_.exported.now(),settings:h})}_drainInertiaBuffer(){const h=this._inertiaBuffer,p=_.exported.now();for(;h.length>0&&p-h[0].time>160;)h.shift()}_onMoveEnd(h){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new _.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)p.zoom+=S.zoomDelta||0,p.bearing+=S.bearingDelta||0,p.pitch+=S.pitchDelta||0,S.panDelta&&p.pan._add(S.panDelta),S.around&&(p.around=S.around),S.pinchAround&&(p.pinchAround=S.pinchAround);const b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(p.pan.mag()){const S=Ad(p.pan.mag(),b,_.extend({},tp,h||{}));C.offset=p.pan.mult(S.amount/p.pan.mag()),C.center=this._map.transform.center,kd(C,S)}if(p.zoom){const S=Ad(p.zoom,b,Lx);C.zoom=this._map.transform.zoom+S.amount,kd(C,S)}if(p.bearing){const S=Ad(p.bearing,b,E0);C.bearing=this._map.transform.bearing+_.clamp(S.amount,-179,179),kd(C,S)}if(p.pitch){const S=Ad(p.pitch,b,Gy);C.pitch=this._map.transform.pitch+S.amount,kd(C,S)}if(C.zoom||C.bearing){const S=void 0===p.pinchAround?p.around:p.pinchAround;C.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),C.noMoveStart=!0,C}}function kd(v,h){(!v.duration||v.duration<h.duration)&&(v.duration=h.duration,v.easing=h.easing)}function Ad(v,h,p){const{maxSpeed:b,linearity:C,deceleration:S}=p,O=_.clamp(v*C/(h/1e3),-b,b),R=Math.abs(O)/(S*C);return{easing:p.easing,duration:1e3*R,amount:O*(R/2)}}class uo extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,p,b,C={}){const S=Xt(p.getCanvasContainer(),b),O=p.unproject(S);super(h,_.extend({point:S,lngLat:O,originalEvent:b},C)),this._defaultPrevented=!1,this.target=p}}class D0 extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,p,b){const C="touchend"===h?b.changedTouches:b.touches,S=wl(p.getCanvasContainer(),C),O=S.map(z=>p.unproject(z)),R=S.reduce((z,H,W,J)=>z.add(H.div(J.length)),new _.pointGeometry(0,0));super(h,{points:S,point:R,lngLats:O,lngLat:p.unproject(R),originalEvent:b}),this._defaultPrevented=!1}}class IC extends _.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,p,b){super(h,{originalEvent:b}),this._defaultPrevented=!1}}class Mu{constructor(h,p){this._map=h,this._clickTolerance=p.clickTolerance}reset(){this._mousedownPos=void 0}wheel(h){return this._firePreventable(new IC(h.type,this._map,h))}mousedown(h,p){return this._mousedownPos=p,this._firePreventable(new uo(h.type,this._map,h))}mouseup(h){this._map.fire(new uo(h.type,this._map,h))}preclick(h){const p=_.extend({},h);p.type="preclick",this._map.fire(new uo(p.type,this._map,p))}click(h,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||(this.preclick(h),this._map.fire(new uo(h.type,this._map,h)))}dblclick(h){return this._firePreventable(new uo(h.type,this._map,h))}mouseover(h){this._map.fire(new uo(h.type,this._map,h))}mouseout(h){this._map.fire(new uo(h.type,this._map,h))}touchstart(h){return this._firePreventable(new D0(h.type,this._map,h))}touchmove(h){this._map.fire(new D0(h.type,this._map,h))}touchend(h){this._map.fire(new D0(h.type,this._map,h))}touchcancel(h){this._map.fire(new D0(h.type,this._map,h))}_firePreventable(h){if(this._map.fire(h),h.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mm{constructor(h){this._map=h}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(h){this._map.fire(new uo(h.type,this._map,h))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new uo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(h){this._delayContextMenu?this._contextMenuEvent=h:this._map.fire(new uo(h.type,this._map,h)),this._map.listens("contextmenu")&&h.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ho{constructor(h,p){this._map=h,this._el=h.getCanvasContainer(),this._container=h.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(h,p){this.isEnabled()&&h.shiftKey&&0===h.button&&(Mf(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(h,p){if(!this._active)return;const b=p,C=this._startPos,S=this._lastPos;if(!C||!S||S.equals(b)||!this._box&&b.dist(C)<this._clickTolerance)return;this._lastPos=b,this._box||(this._box=Qn("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",h));const O=Math.min(C.x,b.x),R=Math.max(C.x,b.x),z=Math.min(C.y,b.y),H=Math.max(C.y,b.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${O}px,${z}px)`,this._box.style.width=R-O+"px",this._box.style.height=H-z+"px")})}mouseupWindow(h,p){if(!this._active)return;const b=this._startPos,C=p;if(b&&0===h.button){if(this.reset(),qa(),b.x!==C.x||b.y!==C.y)return this._map.fire(new _.Event("boxzoomend",{originalEvent:h})),{cameraAnimation:S=>S.fitScreenCoordinates(b,C,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",h)}}keydown(h){this._active&&27===h.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",h))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),bl(),delete this._startPos,delete this._lastPos}_fireEvent(h,p){return this._map.fire(new _.Event(h,{originalEvent:p}))}}function np(v,h){const p={};for(let b=0;b<v.length;b++)p[v[b].identifier]=h[b];return p}class Yy{constructor(h){this.reset(),this.numTouches=h.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(h,p,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=h.timeStamp),b.length===this.numTouches&&(this.centroid=function(C){const S=new _.pointGeometry(0,0);for(const O of C)S._add(O);return S.div(C.length)}(p),this.touches=np(b,p)))}touchmove(h,p,b){if(this.aborted||!this.centroid)return;const C=np(b,p);for(const S in this.touches){const R=C[S];(!R||R.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(h,p,b){if((!this.centroid||h.timeStamp-this.startTime>500)&&(this.aborted=!0),0===b.length){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class Id{constructor(h){this.singleTap=new Yy(h),this.numTaps=h.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(h,p,b){this.singleTap.touchstart(h,p,b)}touchmove(h,p,b){this.singleTap.touchmove(h,p,b)}touchend(h,p,b){const C=this.singleTap.touchend(h,p,b);if(C){const S=h.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(C)<30;if(S&&O||this.reset(),this.count++,this.lastTime=h.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class km{constructor(){this._zoomIn=new Id({numTouches:1,numTaps:2}),this._zoomOut=new Id({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(h,p,b){this._zoomIn.touchstart(h,p,b),this._zoomOut.touchstart(h,p,b)}touchmove(h,p,b){this._zoomIn.touchmove(h,p,b),this._zoomOut.touchmove(h,p,b)}touchend(h,p,b){const C=this._zoomIn.touchend(h,p,b),S=this._zoomOut.touchend(h,p,b);return C?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()+1,around:O.unproject(C)},{originalEvent:h})}):S?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:O.getZoom()-1,around:O.unproject(S)},{originalEvent:h})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const M0={0:1,2:2};class Am{constructor(h){this.reset(),this._clickTolerance=h.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(h,p){return!1}_move(h,p){return{}}mousedown(h,p){if(this._lastPoint)return;const b=ph(h);this._correctButton(h,b)&&(this._lastPoint=p,this._eventButton=b)}mousemoveWindow(h,p){const b=this._lastPoint;if(b)if(h.preventDefault(),null!=this._eventButton&&function(C,S){const O=M0[S];return void 0===C.buttons||(C.buttons&O)!==O}(h,this._eventButton))this.reset();else if(this._moved||!(p.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(b,p)}mouseupWindow(h){this._lastPoint&&ph(h)===this._eventButton&&(this._moved&&qa(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Im extends Am{mousedown(h,p){super.mousedown(h,p),this._lastPoint&&(this._active=!0)}_correctButton(h,p){return 0===p&&!h.ctrlKey}_move(h,p){return{around:p,panDelta:p.sub(h)}}}class k0 extends Am{_correctButton(h,p){return 0===p&&h.ctrlKey||2===p}_move(h,p){const b=.8*(p.x-h.x);if(b)return this._active=!0,{bearingDelta:b}}contextmenu(h){h.preventDefault()}}class ma extends Am{_correctButton(h,p){return 0===p&&h.ctrlKey||2===p}_move(h,p){const b=-.5*(p.y-h.y);if(b)return this._active=!0,{pitchDelta:b}}contextmenu(h){h.preventDefault()}}class Ih{constructor(h,p){this._map=h,this._el=h.getCanvasContainer(),this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset(),_.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new _.pointGeometry(0,0)}touchstart(h,p,b){return this._calculateTransform(h,p,b)}touchmove(h,p,b){if(this._active&&!(b.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===b.length&&!_.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return h.cancelable&&h.preventDefault(),this._calculateTransform(h,p,b)}}touchend(h,p,b){this._calculateTransform(h,p,b),this._active&&b.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(h,p,b){b.length>0&&(this._active=!0);const C=np(b,p),S=new _.pointGeometry(0,0),O=new _.pointGeometry(0,0);let R=0;for(const H in C){const W=C[H],J=this._touches[H];J&&(S._add(W),O._add(W.sub(J)),R++,C[H]=W)}if(this._touches=C,R<this._minTouches||!O.mag())return;const z=O.div(R);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(R),panDelta:z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Qn("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class rp{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(h){}_move(h,p,b){return{}}touchstart(h,p,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([p[0],p[1]]))}touchmove(h,p,b){const C=this._firstTwoTouches;if(!C)return;h.preventDefault();const[S,O]=C,R=hs(b,p,S),z=hs(b,p,O);if(!R||!z)return;const H=this._aroundCenter?null:R.add(z).div(2);return this._move([R,z],H,h)}touchend(h,p,b){if(!this._firstTwoTouches)return;const[C,S]=this._firstTwoTouches,O=hs(b,p,C),R=hs(b,p,S);O&&R||(this._active&&qa(),this.reset())}touchcancel(){this.reset()}enable(h){this._enabled=!0,this._aroundCenter=!!h&&"center"===h.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function hs(v,h,p){for(let b=0;b<v.length;b++)if(v[b].identifier===p)return h[b]}function qy(v,h){return Math.log(v/h)/Math.LN2}class ip extends rp{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(h){this._startDistance=this._distance=h[0].dist(h[1])}_move(h,p){const b=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(qy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qy(this._distance,b),pinchAround:p}}}function Jo(v,h){return 180*v.angleWith(h)/Math.PI}class Xy extends rp{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])}_move(h,p){const b=this._vector;if(this._vector=h[0].sub(h[1]),b&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Jo(this._vector,b),pinchAround:p}}_isBelowThreshold(h){this._minDiameter=Math.min(this._minDiameter,h.mag());const p=25/(Math.PI*this._minDiameter)*360,b=this._startVector;if(!b)return!1;const C=Jo(h,b);return Math.abs(C)<p}}function sp(v){return Math.abs(v.y)>Math.abs(v.x)}class ds extends rp{constructor(h){super(),this._map=h}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(h){this._lastPoints=h,sp(h[0].sub(h[1]))&&(this._valid=!1)}_move(h,p,b){const C=this._lastPoints;if(!C)return;const S=h[0].sub(C[0]),O=h[1].sub(C[1]);return this._map._cooperativeGestures&&!_.isFullscreen()&&b.touches.length<3||(this._valid=this.gestureBeginsVertically(S,O,b.timeStamp),!this._valid)?void 0:(this._lastPoints=h,this._active=!0,{pitchDelta:(S.y+O.y)/2*-.5})}gestureBeginsVertically(h,p,b){if(void 0!==this._valid)return this._valid;const C=h.mag()>=2,S=p.mag()>=2;if(!C&&!S)return;if(!C||!S)return null==this._firstMove&&(this._firstMove=b),b-this._firstMove<100&&void 0;const O=h.y>0==p.y>0;return sp(h)&&sp(p)&&O}}const Pa={panStep:100,bearingStep:15,pitchStep:10};class Zy{constructor(){const h=Pa;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(h){if(h.altKey||h.ctrlKey||h.metaKey)return;let p=0,b=0,C=0,S=0,O=0;switch(h.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:h.shiftKey?b=-1:(h.preventDefault(),S=-1);break;case 39:h.shiftKey?b=1:(h.preventDefault(),S=1);break;case 38:h.shiftKey?C=1:(h.preventDefault(),O=-1);break;case 40:h.shiftKey?C=-1:(h.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(b=0,C=0),{cameraAnimation:R=>{const z=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:Pm,zoom:p?Math.round(z)+p*(h.shiftKey?2:1):z,bearing:R.getBearing()+b*this._bearingStep,pitch:R.getPitch()+C*this._pitchStep,offset:[-S*this._panStep,-O*this._panStep],center:R.getCenter()},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pm(v){return v*(2-v)}const Ky=4.000244140625;class Ao{constructor(h,p){this._map=h,this._el=h.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,_.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(h){this._defaultZoomRate=h}setWheelZoomRate(h){this._wheelZoomRate=h}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(h){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!h&&"center"===h.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(h){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(h.ctrlKey||h.metaKey||this.isZooming()||_.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let p=h.deltaMode===_.window.WheelEvent.DOM_DELTA_LINE?40*h.deltaY:h.deltaY;const b=_.exported.now(),C=b-(this._lastWheelEventTime||0);this._lastWheelEventTime=b,0!==p&&p%Ky==0?this._type="wheel":0!==p&&Math.abs(p)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,h)):this._type||(this._type=Math.abs(C*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),h.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=h,this._delta-=p,this._active||this._start(h)),h.preventDefault()}_onTimeout(h){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)}_start(h){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=Xt(this._el,h);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:p,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const h=this._map.transform;"wheel"===this._type&&h.projection.wrap&&(h._center.lng>=180||h._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const p=()=>h._terrainEnabled()&&this._aroundCoord?h.computeZoomRelativeTo(this._aroundCoord):h.zoom;if(0!==this._delta){const z="wheel"===this._type&&Math.abs(this._delta)>Ky?this._wheelZoomRate:this._defaultZoomRate;let H=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&0!==H&&(H=1/H);const W=p(),J=Math.pow(2,W),re="number"==typeof this._targetZoom?h.zoomScale(this._targetZoom):J;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(re*H))),"wheel"===this._type&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._delta=0}const b="number"==typeof this._targetZoom?this._targetZoom:p(),C=this._startZoom,S=this._easing;let O,R=!1;if("wheel"===this._type&&C&&S){const z=Math.min((_.exported.now()-this._lastWheelEventTime)/200,1),H=S(z);O=_.number(C,b,H),z<1?this._frameId||(this._frameId=!0):R=!0}else O=b,R=!0;return this._active=!0,R&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!R,zoomDelta:O-p(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(h){let p=_.ease;if(this._prevEase){const b=this._prevEase,C=(_.exported.now()-b.start)/b.duration,S=b.easing(C+.01)-b.easing(C),O=.27/Math.sqrt(S*S+1e-4)*.01,R=Math.sqrt(.0729-O*O);p=_.bezier(O,R,.25,1)}return this._prevEase={start:_.exported.now(),duration:h,easing:p},p}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Qn("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(_.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class A0{constructor(h,p){this._clickZoom=h,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(h,p){return h.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:b.getZoom()+(h.shiftKey?-1:1),around:b.unproject(p)},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $n{constructor(){this._tap=new Id({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(h,p,b){this._swipePoint||(this._tapTime&&h.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?b.length>0&&(this._swipePoint=p[0],this._swipeTouch=b[0].identifier):this._tap.touchstart(h,p,b))}touchmove(h,p,b){if(this._tapTime){if(this._swipePoint){if(b[0].identifier!==this._swipeTouch)return;const C=p[0],S=C.y-this._swipePoint.y;return this._swipePoint=C,h.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(h,p,b)}touchend(h,p,b){this._tapTime?this._swipePoint&&0===b.length&&this.reset():this._tap.touchend(h,p,b)&&(this._tapTime=h.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class op{constructor(h,p,b){this._el=h,this._mousePan=p,this._touchPan=b}enable(h){this._inertiaOptions=h||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _n{constructor(h,p,b){this._pitchWithRotate=h.pitchWithRotate,this._mouseRotate=p,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Jy{constructor(h,p,b,C){this._el=h,this._touchZoom=p,this._touchRotate=b,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(h){this._touchZoom.enable(h),this._rotationDisabled||this._touchRotate.enable(h),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ap=v=>v.zoom||v.drag||v.pitch||v.rotate;class lp extends _.Event{}class Pd{constructor(){this.constants=[1,1,.01],this.radius=0}setup(h,p){const b=_.sub([],p,h);this.radius=_.length(b[2]<0?_.div([],b,this.constants):[b[0],b[1],0])}projectRay(h){_.div(h,h,this.constants),_.normalize(h,h),_.mul$1(h,h,this.constants);const p=_.scale$2([],h,this.radius);if(p[2]>0){const b=_.scale$2([],[0,0,1],_.dot(p,[0,0,1])),C=_.scale$2([],_.normalize([],[p[0],p[1],0]),this.radius),S=_.add([],p,_.scale$2([],_.sub([],_.add([],C,b),p),2));p[0]=S[0],p[1]=S[1]}return p}}function cp(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Qy{constructor(h,p){this._map=h,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new S0(h),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Pd,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(p),_.bindAll(["handleEvent","handleWindowEvent"],this);const b=this._el;this._listeners=[[b,"touchstart",{passive:!0}],[b,"touchmove",{passive:!1}],[b,"touchend",void 0],[b,"touchcancel",void 0],[b,"mousedown",void 0],[b,"mousemove",void 0],[b,"mouseup",void 0],[_.window.document,"mousemove",{capture:!0}],[_.window.document,"mouseup",void 0],[b,"mouseover",void 0],[b,"mouseout",void 0],[b,"dblclick",void 0],[b,"click",void 0],[b,"keydown",{capture:!1}],[b,"keyup",void 0],[b,"wheel",{passive:!1}],[b,"contextmenu",void 0],[_.window,"blur",void 0]];for(const[C,S,O]of this._listeners)C.addEventListener(S,C===_.window.document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[h,p,b]of this._listeners)h.removeEventListener(p,h===_.window.document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(h){const p=this._map,b=p.getCanvasContainer();this._add("mapEvent",new Mu(p,h));const C=p.boxZoom=new ho(p,h);this._add("boxZoom",C);const S=new km,O=new ku;p.doubleClickZoom=new A0(O,S),this._add("tapZoom",S),this._add("clickZoom",O);const R=new $n;this._add("tapDragZoom",R);const z=p.touchPitch=new ds(p);this._add("touchPitch",z);const H=new k0(h),W=new ma(h);p.dragRotate=new _n(h,H,W),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const J=new Im(h),re=new Ih(p,h);p.dragPan=new op(b,J,re),this._add("mousePan",J),this._add("touchPan",re,["touchZoom","touchRotate"]);const he=new Xy,ue=new ip;p.touchZoomRotate=new Jy(b,ue,he,R),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Mm(p));const le=p.scrollZoom=new Ao(p,this);this._add("scrollZoom",le,["mousePan"]);const de=p.keyboard=new Zy;this._add("keyboard",de);for(const ne of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])h.interactive&&h[ne]&&p[ne].enable(h[ne])}_add(h,p,b){this._handlers.push({handlerName:h,handler:p,allowed:b}),this._handlersById[h]=p}stop(h){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},h),this._changes=[]}}isActive(){for(const{handler:h}of this._handlers)if(h.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ap(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(h,p,b){for(const C in h)if(C!==b&&(!p||p.indexOf(C)<0))return!0;return!1}handleWindowEvent(h){this.handleEvent(h,`${h.type}Window`)}_getMapTouches(h){const p=[];for(const b of h)this._el.contains(b.target)&&p.push(b);return p}handleEvent(h,p){this._updatingCamera=!0;const b="renderFrame"===h.type,C=b?void 0:h,S={needsRenderFrame:!1},O={},R={},z=h.touches?this._getMapTouches(h.touches):void 0,H=z?wl(this._el,z):b?void 0:Xt(this._el,h);for(const{handlerName:re,handler:he,allowed:ue}of this._handlers){if(!he.isEnabled())continue;let le;this._blockedByActive(R,ue,re)?he.reset():he[p||h.type]&&(le=he[p||h.type](h,H,z),this.mergeHandlerResult(S,O,le,re,C),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||he.isActive())&&(R[re]=he)}const W={};for(const re in this._previousActiveHandlers)R[re]||(W[re]=C);this._previousActiveHandlers=R,(Object.keys(W).length||cp(S))&&(this._changes.push([S,O,W]),this._triggerRenderFrame()),(Object.keys(R).length||cp(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:J}=S;J&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],J(this._map))}mergeHandlerResult(h,p,b,C,S){if(!b)return;_.extend(h,b);const O={handlerName:C,originalEvent:b.originalEvent||S};void 0!==b.zoomDelta&&(p.zoom=O),void 0!==b.panDelta&&(p.drag=O),void 0!==b.pitchDelta&&(p.pitch=O),void 0!==b.bearingDelta&&(p.rotate=O)}_applyChanges(){const h={},p={},b={};for(const[C,S,O]of this._changes)C.panDelta&&(h.panDelta=(h.panDelta||new _.pointGeometry(0,0))._add(C.panDelta)),C.zoomDelta&&(h.zoomDelta=(h.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(h.bearingDelta=(h.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(h.pitchDelta=(h.pitchDelta||0)+C.pitchDelta),void 0!==C.around&&(h.around=C.around),void 0!==C.aroundCoord&&(h.aroundCoord=C.aroundCoord),void 0!==C.pinchAround&&(h.pinchAround=C.pinchAround),C.noInertia&&(h.noInertia=C.noInertia),_.extend(p,S),_.extend(b,O);this._updateMapTransform(h,p,b),this._changes=[]}_updateMapTransform(h,p,b){const C=this._map,S=C.transform,O=be=>[be.x,be.y,be.z];if((be=>{const ve=this._eventsInProgress.drag;return ve&&!this._handlersById[ve.handlerName].isActive()})()&&!cp(h)){const be=S.zoom;S.cameraElevationReference="sea",S.recenterOnTerrain(),S.cameraElevationReference="ground",be!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&C._stop(!0),!cp(h))return void this._fireEvents(p,b,!0);let{panDelta:R,zoomDelta:z,bearingDelta:H,pitchDelta:W,around:J,aroundCoord:re,pinchAround:he}=h;S._isCameraConstrained&&(z>0&&(z=0),S._isCameraConstrained=!1),void 0!==he&&(J=he),(z||(be=>p.drag&&!this._eventsInProgress.drag)())&&J&&(this._dragOrigin=O(S.pointCoordinate3D(J)),this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",C._stop(!0),J=J||C.transform.centerPoint,H&&(S.bearing+=H),W&&(S.pitch+=W),S._updateCameraState();const ue=[0,0,0];if(R)if("mercator"===S.projection.name){const be=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(J).dir),ve=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(J.sub(R)).dir);ue[0]=ve[0]-be[0],ue[1]=ve[1]-be[1]}else{const be=S.pointCoordinate(J);if("globe"===S.projection.name){R=R.rotate(-S.angle);const ve=S._pixelsPerMercatorPixel/S.worldSize;ue[0]=-R.x*_.mercatorScale(_.latFromMercatorY(be.y))*ve,ue[1]=-R.y*_.mercatorScale(S.center.lat)*ve}else{const ve=S.pointCoordinate(J.sub(R));be&&ve&&(ue[0]=ve.x-be.x,ue[1]=ve.y-be.y)}}const le=S.zoom,de=[0,0,0];if(z){const be=O(re||S.pointCoordinate3D(J)),ve={dir:_.normalize([],_.sub([],be,S._camera.position))};if(ve.dir[2]<0){const Ce=S.zoomDeltaToMovement(be,z);_.scale$2(de,ve.dir,Ce)}}const ne=_.add(ue,ue,de);S._translateCameraConstrained(ne),z&&Math.abs(S.zoom-le)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),h.noInertia||this._inertia.record(h),this._fireEvents(p,b,!0)}_fireEvents(h,p,b){const C=ap(this._eventsInProgress),S=ap(h),O={};for(const W in h){const{originalEvent:J}=h[W];this._eventsInProgress[W]||(O[`${W}start`]=J),this._eventsInProgress[W]=h[W]}!C&&S&&this._fireEvent("movestart",S.originalEvent);for(const W in O)this._fireEvent(W,O[W]);S&&this._fireEvent("move",S.originalEvent);for(const W in h){const{originalEvent:J}=h[W];this._fireEvent(W,J)}const R={};let z;for(const W in this._eventsInProgress){const{handlerName:J,originalEvent:re}=this._eventsInProgress[W];this._handlersById[J].isActive()||(delete this._eventsInProgress[W],z=p[J]||re,R[`${W}end`]=z)}for(const W in R)this._fireEvent(W,R[W]);const H=ap(this._eventsInProgress);if(b&&(C||S)&&!H){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=re=>0!==re&&-this._bearingSnap<re&&re<this._bearingSnap;W?(J(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:z})):(this._map.fire(new _.Event("moveend",{originalEvent:z})),J(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(h,p){this._map.fire(new _.Event(h,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(h=>{this._frameId=void 0,this.handleEvent(new lp("renderFrame",{timeStamp:h})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Ut="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ur extends _.Evented{constructor(h,p){super(),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=p.bearingSnap,_.bindAll(["_renderFrameCallback"],this)}getCenter(){return new _.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(h,p){return this.jumpTo({center:h},p)}panBy(h,p,b){return h=_.pointGeometry.convert(h).mult(-1),this.panTo(this.transform.center,_.extend({offset:h},p),b)}panTo(h,p,b){return this.easeTo(_.extend({center:h},p),b)}getZoom(){return this.transform.zoom}setZoom(h,p){return this.jumpTo({zoom:h},p),this}zoomTo(h,p,b){return this.easeTo(_.extend({zoom:h},p),b)}zoomIn(h,p){return this.zoomTo(this.getZoom()+1,h,p),this}zoomOut(h,p){return this.zoomTo(this.getZoom()-1,h,p),this}getBearing(){return this.transform.bearing}setBearing(h,p){return this.jumpTo({bearing:h},p),this}getPadding(){return this.transform.padding}setPadding(h,p){return this.jumpTo({padding:h},p),this}rotateTo(h,p,b){return this.easeTo(_.extend({bearing:h},p),b)}resetNorth(h,p){return this.rotateTo(0,_.extend({duration:1e3},h),p),this}resetNorthPitch(h,p){return this.easeTo(_.extend({bearing:0,pitch:0,duration:1e3},h),p),this}snapToNorth(h,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,p):this}getPitch(){return this.transform.pitch}setPitch(h,p){return this.jumpTo({pitch:h},p),this}cameraForBounds(h,p){h=_.LngLatBounds.convert(h);const b=p&&p.bearing||0,C=p&&p.pitch||0,S=h.getNorthWest(),O=h.getSouthEast();return this._cameraForBounds(this.transform,S,O,b,C,p)}_extendCameraOptions(h){const p={top:0,bottom:0,right:0,left:0};if("number"==typeof(h=_.extend({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding){const b=h.padding;h.padding={top:b,bottom:b,right:b,left:b}}return h.padding=_.extend(p,h.padding),h}_minimumAABBFrustumDistance(h,p){const b=p.max[0]-p.min[0],C=p.max[1]-p.min[1];return b/C>h.aspect?b/(2*Math.tan(.5*h.fovX)*h.aspect):C/(2*Math.tan(.5*h.fovY)*h.aspect)}_cameraForBoundsOnGlobe(h,p,b,C,S,O){const R=h.clone(),z=this._extendCameraOptions(O);R.bearing=C,R.pitch=S;const H=_.LngLat.convert(p),W=_.LngLat.convert(b),J=.5*(H.lat+W.lat),re=.5*(H.lng+W.lng),he=_.latLngToECEF(J,re),ue=_.normalize([],he),le=_.normalize([],_.cross([],ue,[0,1,0])),de=_.cross([],le,ue),ne=[le[0],le[1],le[2],0,de[0],de[1],de[2],0,ue[0],ue[1],ue[2],0,0,0,0,1],be=[he,_.latLngToECEF(H.lat,H.lng),_.latLngToECEF(W.lat,H.lng),_.latLngToECEF(W.lat,W.lng),_.latLngToECEF(H.lat,W.lng),_.latLngToECEF(J,H.lng),_.latLngToECEF(J,W.lng),_.latLngToECEF(H.lat,re),_.latLngToECEF(W.lat,re)];let ve=_.Aabb.fromPoints(be.map(kt=>[_.dot(le,kt),_.dot(de,kt),_.dot(ue,kt)]));const Ce=_.transformMat4([],ve.center,ne);0===_.squaredLength(Ce)&&_.set(Ce,0,0,1),_.normalize(Ce,Ce),_.scale$2(Ce,Ce,_.GLOBE_RADIUS),R.center=_.ecefToLatLng(Ce);const Be=R.getWorldToCameraMatrix(),Le=_.invert(new Float64Array(16),Be);ve=_.Aabb.applyTransform(ve,_.multiply([],Be,ne)),_.transformMat4(Ce,Ce,Be);const Ue=.5*(ve.max[2]-ve.min[2]),Ge=this._minimumAABBFrustumDistance(R,ve),tt=_.scale$2([],[0,0,1],Ue),it=_.add(tt,Ce,tt),Ht=Ge+(0===R.pitch?0:_.distance(Ce,it)),Ke=R.globeCenterInViewSpace,Tt=_.sub([],Ce,[Ke[0],Ke[1],Ke[2]]);_.normalize(Tt,Tt),_.scale$2(Tt,Tt,Ht);const at=_.add([],Ce,Tt);_.transformMat4(at,at,Le);const Ot=_.earthRadius/_.GLOBE_RADIUS,st=_.length(at),Ye=_.mercatorZfromAltitude(Math.max(st*Ot-_.earthRadius,Number.EPSILON),0),ot=Math.min(R.zoomFromMercatorZAdjusted(Ye),z.maxZoom);return ot>.5*(_.GLOBE_ZOOM_THRESHOLD_MIN+_.GLOBE_ZOOM_THRESHOLD_MAX)?(R.setProjection({name:"mercator"}),R.zoom=ot,this._cameraForBounds(R,p,b,C,S,O)):{center:R.center,zoom:ot,bearing:C,pitch:S}}queryTerrainElevation(h,p){const b=this.transform.elevation;return b?(p=_.extend({},{exaggerated:!0},p),b.getAtPoint(_.MercatorCoordinate.fromLngLat(h),null,p.exaggerated)):null}_cameraForBounds(h,p,b,C,S,O){if("globe"===h.projection.name)return this._cameraForBoundsOnGlobe(h,p,b,C,S,O);const R=h.clone(),z=this._extendCameraOptions(O),H=R.padding;R.bearing=C,R.pitch=S;const W=_.LngLat.convert(p),J=_.LngLat.convert(b),re=new _.LngLat(W.lng,J.lat),he=new _.LngLat(J.lng,W.lat),ue=R.project(W),le=R.project(J),de=this.queryTerrainElevation(W),ne=this.queryTerrainElevation(J),be=this.queryTerrainElevation(re),ve=this.queryTerrainElevation(he),Ce=[[ue.x,ue.y,Math.min(de||0,ne||0,be||0,ve||0)],[le.x,le.y,Math.max(de||0,ne||0,be||0,ve||0)]];let Be=_.Aabb.fromPoints(Ce);const Le=R.getWorldToCameraMatrix(),Ue=_.invert(new Float64Array(16),Le);Be=_.Aabb.applyTransform(Be,Le);const Ge=_.sub([],Be.max,Be.min),tt=H.left||0,it=H.right||0,Ht=H.bottom||0,Ke=H.top||0,{left:Tt,right:at,top:Ot,bottom:st}=z.padding,Ye=.5*(tt+it),ot=.5*(Ke+Ht),kt=Math.min(R.scaleZoom(R.scale*Math.min((R.width-(tt+it+Tt+at))/Ge[0],(R.height-(Ht+Ke+st+Ot))/Ge[1])),z.maxZoom),Nt=R.scale/R.zoomScale(kt);Be=new _.Aabb([Be.min[0]-(Tt+Ye)*Nt,Be.min[1]-(st+ot)*Nt,Be.min[2]],[Be.max[0]+(at+Ye)*Nt,Be.max[1]+(Ot+ot)*Nt,Be.max[2]]);const wn=.5*Ge[2],sr=this._minimumAABBFrustumDistance(R,Be),yn=[0,0,1,0];_.transformMat4$1(yn,yn,Le),_.normalize$2(yn,yn);const rn=_.scale$2([],yn,sr+wn),Cn=_.add([],Be.center,rn),mr=("number"==typeof z.offset.x&&"number"==typeof z.offset.y?new _.pointGeometry(z.offset.x,z.offset.y):_.pointGeometry.convert(z.offset)).rotate(-_.degToRad(C));Be.center[0]-=mr.x*Nt,Be.center[1]+=mr.y*Nt,_.transformMat4(Be.center,Be.center,Ue),_.transformMat4(Cn,Cn,Ue);const En=[Be.center[0],Be.center[1],Cn[2]*R.pixelsPerMeter];_.scale$2(En,En,1/R.worldSize);const jr=_.lngFromMercatorX(En[0]),oi=_.latFromMercatorY(En[1]),ai=Math.min(R._zoomFromMercatorZ(En[2]),z.maxZoom),xi=new _.LngLat(jr,oi);return R.mercatorFromTransition&&ai<.5*(_.GLOBE_ZOOM_THRESHOLD_MIN+_.GLOBE_ZOOM_THRESHOLD_MAX)?(R.setProjection({name:"globe"}),R.zoom=ai,this._cameraForBounds(R,p,b,C,S,O)):{center:xi,zoom:ai,bearing:C,pitch:S}}fitBounds(h,p,b){const C=this.cameraForBounds(h,p);return this._fitInternal(C,p,b)}fitScreenCoordinates(h,p,b,C,S){const O=_.pointGeometry.convert(h),R=_.pointGeometry.convert(p),z=new _.pointGeometry(Math.min(O.x,R.x),Math.min(O.y,R.y)),H=new _.pointGeometry(Math.max(O.x,R.x),Math.max(O.y,R.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(O,R))return this;const W=this.transform.pointLocation3D(z),J=this.transform.pointLocation3D(H),re=this.transform.pointLocation3D(new _.pointGeometry(z.x,H.y)),he=this.transform.pointLocation3D(new _.pointGeometry(H.x,z.y)),ue=[Math.min(W.lng,J.lng,re.lng,he.lng),Math.min(W.lat,J.lat,re.lat,he.lat)],le=[Math.max(W.lng,J.lng,re.lng,he.lng),Math.max(W.lat,J.lat,re.lat,he.lat)],de=C&&C.pitch?C.pitch:this.getPitch(),ne=this._cameraForBounds(this.transform,ue,le,b,de,C);return this._fitInternal(ne,C,S)}_fitInternal(h,p,b){return h?(delete(p=_.extend(h,p)).padding,p.linear?this.easeTo(p,b):this.flyTo(p,b)):this}jumpTo(h,p){this.stop();const b=h.preloadOnly?this.transform.clone():this.transform;let C=!1,S=!1,O=!1;return"zoom"in h&&b.zoom!==+h.zoom&&(C=!0,b.zoom=+h.zoom),void 0!==h.center&&(b.center=_.LngLat.convert(h.center)),"bearing"in h&&b.bearing!==+h.bearing&&(S=!0,b.bearing=+h.bearing),"pitch"in h&&b.pitch!==+h.pitch&&(O=!0,b.pitch=+h.pitch),null==h.padding||b.isPaddingEqual(h.padding)||(b.padding=h.padding),h.preloadOnly?(this._preloadTiles(b),this):(this.fire(new _.Event("movestart",p)).fire(new _.Event("move",p)),C&&this.fire(new _.Event("zoomstart",p)).fire(new _.Event("zoom",p)).fire(new _.Event("zoomend",p)),S&&this.fire(new _.Event("rotatestart",p)).fire(new _.Event("rotate",p)).fire(new _.Event("rotateend",p)),O&&this.fire(new _.Event("pitchstart",p)).fire(new _.Event("pitch",p)).fire(new _.Event("pitchend",p)),this.fire(new _.Event("moveend",p)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||_.warnOnce(Ut),this.transform.getFreeCameraOptions()}setFreeCameraOptions(h,p){const b=this.transform;if(!b.projection.supportsFreeCamera)return _.warnOnce(Ut),this;this.stop();const C=b.zoom,S=b.pitch,O=b.bearing;b.setFreeCameraOptions(h);const R=C!==b.zoom,z=S!==b.pitch,H=O!==b.bearing;return this.fire(new _.Event("movestart",p)).fire(new _.Event("move",p)),R&&this.fire(new _.Event("zoomstart",p)).fire(new _.Event("zoom",p)).fire(new _.Event("zoomend",p)),H&&this.fire(new _.Event("rotatestart",p)).fire(new _.Event("rotate",p)).fire(new _.Event("rotateend",p)),z&&this.fire(new _.Event("pitchstart",p)).fire(new _.Event("pitch",p)).fire(new _.Event("pitchend",p)),this.fire(new _.Event("moveend",p)),this}easeTo(h,p){this._stop(!1,h.easeId),(!1===(h=_.extend({offset:[0,0],duration:500,easing:_.ease},h)).animate||!h.essential&&_.exported.prefersReducedMotion)&&(h.duration=0);const b=this.transform,C=this.getZoom(),S=this.getBearing(),O=this.getPitch(),R=this.getPadding(),z="zoom"in h?+h.zoom:C,H="bearing"in h?this._normalizeBearing(h.bearing,S):S,W="pitch"in h?+h.pitch:O,J="padding"in h?h.padding:b.padding,re=_.pointGeometry.convert(h.offset);let he,ue,le;if("globe"===b.projection.name){const tt=_.MercatorCoordinate.fromLngLat(b.center),it=re.rotate(-b.angle);tt.x+=it.x/b.worldSize,tt.y+=it.y/b.worldSize;const Ht=tt.toLngLat(),Ke=_.LngLat.convert(h.center||Ht);this._normalizeCenter(Ke),he=b.centerPoint.add(it),ue=new _.pointGeometry(tt.x,tt.y).mult(b.worldSize),le=new _.pointGeometry(_.mercatorXfromLng(Ke.lng),_.mercatorYfromLat(Ke.lat)).mult(b.worldSize).sub(ue)}else{he=b.centerPoint.add(re);const tt=b.pointLocation(he),it=_.LngLat.convert(h.center||tt);this._normalizeCenter(it),ue=b.project(tt),le=b.project(it).sub(ue)}const de=b.zoomScale(z-C);let ne,be;h.around&&(ne=_.LngLat.convert(h.around),be=b.locationPoint(ne));const ve=this._zooming||z!==C,Ce=this._rotating||S!==H,Be=this._pitching||W!==O,Le=!b.isPaddingEqual(J),Ue=tt=>it=>{if(ve&&(tt.zoom=_.number(C,z,it)),Ce&&(tt.bearing=_.number(S,H,it)),Be&&(tt.pitch=_.number(O,W,it)),Le&&(tt.interpolatePadding(R,J,it),he=tt.centerPoint.add(re)),ne)tt.setLocationAtPoint(ne,be);else{const Ht=tt.zoomScale(tt.zoom-C),Ke=z>C?Math.min(2,de):Math.max(.5,de),Tt=Math.pow(Ke,1-it),at=tt.unproject(ue.add(le.mult(it*Tt)).mult(Ht));tt.setLocationAtPoint(tt.renderWorldCopies?at.wrap():at,he)}return h.preloadOnly||this._fireMoveEvents(p),tt};if(h.preloadOnly){const tt=this._emulate(Ue,h.duration,b);return this._preloadTiles(tt),this}const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ve,this._rotating=Ce,this._pitching=Be,this._padding=Le,this._easeId=h.easeId,this._prepareEase(p,h.noMoveStart,Ge),this._ease(Ue(b),tt=>{b.recenterOnTerrain(),this._afterEase(p,tt)},h),this}_prepareEase(h,p,b={}){this._moving=!0,this.transform.cameraElevationReference="sea",p||b.moving||this.fire(new _.Event("movestart",h)),this._zooming&&!b.zooming&&this.fire(new _.Event("zoomstart",h)),this._rotating&&!b.rotating&&this.fire(new _.Event("rotatestart",h)),this._pitching&&!b.pitching&&this.fire(new _.Event("pitchstart",h))}_fireMoveEvents(h){this.fire(new _.Event("move",h)),this._zooming&&this.fire(new _.Event("zoom",h)),this._rotating&&this.fire(new _.Event("rotate",h)),this._pitching&&this.fire(new _.Event("pitch",h))}_afterEase(h,p){if(this._easeId&&p&&this._easeId===p)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const b=this._zooming,C=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new _.Event("zoomend",h)),C&&this.fire(new _.Event("rotateend",h)),S&&this.fire(new _.Event("pitchend",h)),this.fire(new _.Event("moveend",h))}flyTo(h,p){if(!h.essential&&_.exported.prefersReducedMotion){const kt=_.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kt,p)}this.stop(),h=_.extend({offset:[0,0],speed:1.2,curve:1.42,easing:_.ease},h);const b=this.transform,C=this.getZoom(),S=this.getBearing(),O=this.getPitch(),R=this.getPadding(),z="zoom"in h?_.clamp(+h.zoom,b.minZoom,b.maxZoom):C,H="bearing"in h?this._normalizeBearing(h.bearing,S):S,W="pitch"in h?+h.pitch:O,J="padding"in h?h.padding:b.padding,re=b.zoomScale(z-C),he=_.pointGeometry.convert(h.offset);let ue=b.centerPoint.add(he);const le=b.pointLocation(ue),de=_.LngLat.convert(h.center||le);this._normalizeCenter(de);const ne=b.project(le),be=b.project(de).sub(ne);let ve=h.curve;const Ce=Math.max(b.width,b.height),Be=Ce/re,Le=be.mag();if("minZoom"in h){const kt=_.clamp(Math.min(h.minZoom,C,z),b.minZoom,b.maxZoom),Nt=Ce/b.zoomScale(kt-C);ve=Math.sqrt(Nt/Le*2)}const Ue=ve*ve;function Ge(kt){const Nt=(Be*Be-Ce*Ce+(kt?-1:1)*Ue*Ue*Le*Le)/(2*(kt?Be:Ce)*Ue*Le);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function tt(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function it(kt){return(Math.exp(kt)+Math.exp(-kt))/2}const Ht=Ge(0);let Ke=function(kt){return it(Ht)/it(Ht+ve*kt)},Tt=function(kt){return Ce*((it(Ht)*(tt(Nt=Ht+ve*kt)/it(Nt))-tt(Ht))/Ue)/Le;var Nt},at=(Ge(1)-Ht)/ve;if(Math.abs(Le)<1e-6||!isFinite(at)){if(Math.abs(Ce-Be)<1e-6)return this.easeTo(h,p);const kt=Be<Ce?-1:1;at=Math.abs(Math.log(Be/Ce))/ve,Tt=function(){return 0},Ke=function(Nt){return Math.exp(kt*ve*Nt)}}h.duration="duration"in h?+h.duration:1e3*at/("screenSpeed"in h?+h.screenSpeed/ve:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0);const Ot=S!==H,st=W!==O,Ye=!b.isPaddingEqual(J),ot=kt=>Nt=>{const wn=Nt*at,sr=1/Ke(wn);kt.zoom=1===Nt?z:C+kt.scaleZoom(sr),Ot&&(kt.bearing=_.number(S,H,Nt)),st&&(kt.pitch=_.number(O,W,Nt)),Ye&&(kt.interpolatePadding(R,J,Nt),ue=kt.centerPoint.add(he));const yn=1===Nt?de:kt.unproject(ne.add(be.mult(Tt(wn))).mult(sr));return kt.setLocationAtPoint(kt.renderWorldCopies?yn.wrap():yn,ue),kt._updateCameraOnTerrain(),h.preloadOnly||this._fireMoveEvents(p),kt};if(h.preloadOnly){const kt=this._emulate(ot,h.duration,b);return this._preloadTiles(kt),this}return this._zooming=!0,this._rotating=Ot,this._pitching=st,this._padding=Ye,this._prepareEase(p,!1),this._ease(ot(b),()=>this._afterEase(p),h),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(h,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const b=this._onEaseEnd;this._onEaseEnd=void 0,b.call(this,p)}if(!h){const b=this.handlers;b&&b.stop(!1)}return this}_ease(h,p,b){!1===b.animate||0===b.duration?(h(1),p()):(this._easeStart=_.exported.now(),this._easeOptions=b,this._onEaseFrame=h,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const h=Math.min((_.exported.now()-this._easeStart)/this._easeOptions.duration,1),p=this._onEaseFrame;p&&p(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(h,p){h=_.wrap(h,-180,180);const b=Math.abs(h-p);return Math.abs(h-360-p)<b&&(h-=360),Math.abs(h+360-p)<b&&(h+=360),h}_normalizeCenter(h){const p=this.transform;if(!p.renderWorldCopies||p.maxBounds)return;const b=h.lng-p.center.lng;h.lng+=b>180?-360:b<-180?360:0}_emulate(h,p,b){const C=Math.ceil(15*p/1e3),S=[],O=h(b.clone());for(let R=0;R<=C;R++){const z=O(R/C);S.push(z.clone())}return S}}class mn{constructor(h={}){this.options=h,_.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(h){const p=this.options&&this.options.compact;return this._map=h,this._container=Qn("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Qn("button","mapboxgl-ctrl-attrib-button",this._container),Qn("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Qn("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===p&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(h,p){const b=this._map._getUIString(`AttributionControl.${p}`);h.setAttribute("aria-label",b),h.removeAttribute("title"),h.firstElementChild&&h.firstElementChild.setAttribute("title",b)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let h=this._editLink;h||(h=this._editLink=this._container.querySelector(".mapbox-improve-map"));const p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||_.config.ACCESS_TOKEN}];if(h){const b=p.reduce((C,S,O)=>(S.value&&(C+=`${S.key}=${S.value}${O<p.length-1?"&":""}`),C),"?");h.href=`${_.config.FEEDBACK_URL}/${b}#${Wy(this._map,!0)}`,h.rel="noopener nofollow",this._setElementTitle(h,"MapFeedback")}}_updateData(h){!h||"metadata"!==h.sourceDataType&&"visibility"!==h.sourceDataType&&"style"!==h.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let h=[];if(this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const p=this._map.style._sourceCaches;for(const C in p){const S=p[C];if(S.used){const O=S.getSource();O.attribution&&h.indexOf(O.attribution)<0&&h.push(O.attribution)}}h.sort((C,S)=>C.length-S.length),h=h.filter((C,S)=>{for(let O=S+1;O<h.length;O++)if(h[O].indexOf(C)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?h=[...this.options.customAttribution,...h]:h.unshift(this.options.customAttribution));const b=h.join(" | ");b!==this._attribHTML&&(this._attribHTML=b,h.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class gn{constructor(){_.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(h){this._map=h,this._container=Qn("div","mapboxgl-ctrl");const p=Qn("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(h){h&&"metadata"!==h.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const h=this._map.style._sourceCaches;if(0===Object.entries(h).length)return!0;for(const p in h){const b=h[p].getSource();if(b.hasOwnProperty("mapbox_logo")&&!b.mapbox_logo)return!1}return!0}_updateCompact(){const h=this._container.children;if(h.length){const p=h[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}}}class fs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(h){const p=++this._id;return this._queue.push({callback:h,id:p,cancelled:!1}),p}remove(h){const p=this._currentlyRunning,b=p?this._queue.concat(p):this._queue;for(const C of b)if(C.id===h)return void(C.cancelled=!0)}run(h=0){const p=this._currentlyRunning=this._queue;this._queue=[];for(const b of p)if(!b.cancelled&&(b.callback(h),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function up(v,h,p){if(v=new _.LngLat(v.lng,v.lat),h){const b=new _.LngLat(v.lng-360,v.lat),C=new _.LngLat(v.lng+360,v.lat),S=360*Math.ceil(Math.abs(v.lng-p.center.lng)/360),O=p.locationPoint(v).distSqr(h),R=h.x<0||h.y<0||h.x>p.width||h.y>p.height;p.locationPoint(b).distSqr(h)<O&&(R||Math.abs(b.lng-p.center.lng)<S)?v=b:p.locationPoint(C).distSqr(h)<O&&(R||Math.abs(C.lng-p.center.lng)<S)&&(v=C)}for(;Math.abs(v.lng-p.center.lng)>180;){const b=p.locationPoint(v);if(b.x>=0&&b.y>=0&&b.x<=p.width&&b.y<=p.height)break;v.lng>p.center.lng?v.lng-=360:v.lng+=360}return v}const ac={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Oa extends _.Evented{constructor(h,p){if(super(),(h instanceof _.window.HTMLElement||p)&&(h=_.extend({element:h},p)),_.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&h.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=h&&h.occludedOpacity||.2,h&&h.element)this._element=h.element,this._offset=_.pointGeometry.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=Qn("div");const C=41,S=27,O=Ls("svg",{display:"block",height:C*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${C}`},this._element),R=Ls("radialGradient",{id:"shadowGradient"},Ls("defs",{},O));Ls("stop",{offset:"10%","stop-opacity":.4},R),Ls("stop",{offset:"100%","stop-opacity":.05},R),Ls("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},O),Ls("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},O),Ls("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},O),Ls("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},O),this._offset=_.pointGeometry.convert(h&&h.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const b=this._element.classList;for(const C in ac)b.remove(`mapboxgl-marker-anchor-${C}`);b.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(h){return h===this._map||(this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._updateMoving),h.on("moveend",this._update),h.on("remove",this._clearFadeTimer),h._addMarker(this),this.setDraggable(this._draggable),this._update(),h.on("click",this._onMapClick)),this}remove(){const h=this._map;return h&&(h.off("click",this._onMapClick),h.off("move",this._updateMoving),h.off("moveend",this._update),h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler),h.off("mouseup",this._onUp),h.off("touchend",this._onUp),h.off("mousemove",this._onMove),h.off("touchmove",this._onMove),h.off("remove",this._clearFadeTimer),h._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=_.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){const C=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(24.6+C)],"bottom-right":[-C,-1*(24.6+C)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=h,h._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(h){const p=h.code,b=h.charCode||h.keyCode;"Space"!==p&&"Enter"!==p&&32!==b&&13!==b||this.togglePopup()}_onMapClick(h){const p=h.originalEvent.target,b=this._element;this._popup&&(p===b||b.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const h=this._popup;return h?(h.isOpen()?(h.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(h.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const h=this._map,p=this._pos;if(!h||!p)return!1;const b=h.unproject(p),C=h.getFreeCameraOptions();if(!C.position)return!1;const S=C.position.toLngLat();return S.distanceTo(b)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const h=this._map;if(!h)return;const p=this._pos;if(!p||p.x<0||p.x>h.transform.width||p.y<0||p.y>h.transform.height)return void this._clearFadeTimer();const b=h.unproject(p);let C;h._showingGlobe()&&_.isLngLatBehindGlobe(h.transform,this._lngLat)?C=0:(C=1-h._queryFogOpacity(b),h.transform._terrainEnabled()&&h.getTerrain()&&this._behindTerrain()&&(C*=this._occludedOpacity)),this._element.style.opacity=`${C}`,this._element.style.pointerEvents=C>0?"auto":"none",this._popup&&this._popup._setOpacity(C),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const h=this._pos;if(!h||!this._map)return;const p=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${h.x}px,${h.y}px)\n            ${ac[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${p.x}px,${p.y}px)\n        `}_calculateXYTransform(){const h=this._pos,p=this._map,b=this.getPitchAlignment();if(!p||!h||"map"!==b)return"";if(!p._showingGlobe()){const z=p.getPitch();return z?`rotateX(${z}deg)`:""}const C=_.radToDeg(_.globeTiltAtLngLat(p.transform,this._lngLat)),S=h.sub(_.globeCenterToScreenPoint(p.transform)),O=Math.abs(S.x)+Math.abs(S.y);if(0===O)return"";const R=C/O;return`rotateX(${-S.y*R}deg) rotateY(${S.x*R}deg)`}_calculateZTransform(){const h=this._pos,p=this._map;if(!p||!h)return"";let b=0;const C=this.getRotationAlignment();if("map"===C)if(p._showingGlobe()){const S=p.project(new _.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),O=p.project(new _.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);b=_.radToDeg(Math.atan2(O.y,O.x))-90}else b=-p.getBearing();else if("horizon"===C){const S=_.smoothstep(4,6,p.getZoom()),O=_.globeCenterToScreenPoint(p.transform);O.y+=S*p.transform.height;const R=h.sub(O),z=_.radToDeg(Math.atan2(R.y,R.x));b=(z>90?z-270:z+90)*(1-S)}return b+=this._rotation,b?`rotateZ(${b}deg)`:""}_update(h){_.window.cancelAnimationFrame(this._updateFrameId);const p=this._map;p&&(p.transform.renderWorldCopies&&(this._lngLat=up(this._lngLat,this._pos,p.transform)),this._pos=p.project(this._lngLat),!0===h?this._updateFrameId=_.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),p._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(p._showingGlobe()||p.getTerrain()||p.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(h){return this._offset=_.pointGeometry.convert(h),this._update(),this}_onMove(h){const p=this._map;if(!p)return;const b=this._pointerdownPos,C=this._positionDelta;if(b&&C){if(!this._isDragging){const S=this._clickTolerance||p._clickTolerance;if(h.point.dist(b)<S)return;this._isDragging=!0}this._pos=h.point.sub(C),this._lngLat=p.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new _.Event("dragstart"))),this.fire(new _.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const h=this._map;h&&(h.off("mousemove",this._onMove),h.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new _.Event("dragend")),this._state="inactive"}_addDragHandler(h){const p=this._map,b=this._pos;p&&b&&this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(b),this._pointerdownPos=h.point,this._state="pending",p.on("mousemove",this._onMove),p.on("touchmove",this._onMove),p.once("mouseup",this._onUp),p.once("touchend",this._onUp))}setDraggable(h){this._draggable=!!h;const p=this._map;return p&&(h?(p.on("mousedown",this._addDragHandler),p.on("touchstart",this._addDragHandler)):(p.off("mousedown",this._addDragHandler),p.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(h){return this._rotation=h||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(h){return this._rotationAlignment=h||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(h){return this._pitchAlignment=h||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(h){return this._occludedOpacity=h||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Om={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Lm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function I0(v=new _.pointGeometry(0,0),h="bottom"){if("number"==typeof v){const p=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(h){case"top":return new _.pointGeometry(0,v);case"top-left":return new _.pointGeometry(p,p);case"top-right":return new _.pointGeometry(-p,p);case"bottom":return new _.pointGeometry(0,-v);case"bottom-left":return new _.pointGeometry(p,-p);case"bottom-right":return new _.pointGeometry(-p,-p);case"left":return new _.pointGeometry(v,0);case"right":return new _.pointGeometry(-v,0)}return new _.pointGeometry(0,0)}return v instanceof _.pointGeometry||Array.isArray(v)?_.pointGeometry.convert(v):_.pointGeometry.convert(v[h]||[0,0])}class Fx{constructor(h){this.jumpTo(h)}getValue(h){if(h<=this._startTime)return this._start;if(h>=this._endTime)return this._end;const p=_.easeCubicInOut((h-this._startTime)/(this._endTime-this._startTime));return this._start*(1-p)+this._end*p}isEasing(h){return h>=this._startTime&&h<=this._endTime}jumpTo(h){this._startTime=-1/0,this._endTime=-1/0,this._start=h,this._end=h}easeTo(h,p,b){this._start=this.getValue(p),this._end=h,this._startTime=p,this._endTime=p+b}}const P0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Io={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Al={showCompass:!0,showZoom:!0,visualizePitch:!1};class O0{constructor(h,p,b=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new k0({clickTolerance:h.dragRotate._mouseRotate._clickTolerance}),this.map=h,b&&(this.mousePitch=new ma({clickTolerance:h.dragRotate._mousePitch._clickTolerance})),_.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),p.addEventListener("mousedown",this.mousedown),p.addEventListener("touchstart",this.touchstart,{passive:!1}),p.addEventListener("touchmove",this.touchmove),p.addEventListener("touchend",this.touchend),p.addEventListener("touchcancel",this.reset)}down(h,p){this.mouseRotate.mousedown(h,p),this.mousePitch&&this.mousePitch.mousedown(h,p),Mf()}move(h,p){const b=this.map,C=this.mouseRotate.mousemoveWindow(h,p),S=C&&C.bearingDelta;if(S&&b.setBearing(b.getBearing()+S),this.mousePitch){const O=this.mousePitch.mousemoveWindow(h,p),R=O&&O.pitchDelta;R&&b.setPitch(b.getPitch()+R)}}off(){const h=this.element;h.removeEventListener("mousedown",this.mousedown),h.removeEventListener("touchstart",this.touchstart,{passive:!1}),h.removeEventListener("touchmove",this.touchmove),h.removeEventListener("touchend",this.touchend),h.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){bl(),_.window.removeEventListener("mousemove",this.mousemove),_.window.removeEventListener("mouseup",this.mouseup)}mousedown(h){this.down(_.extend({},h,{ctrlKey:!0,preventDefault:()=>h.preventDefault()}),Xt(this.element,h)),_.window.addEventListener("mousemove",this.mousemove),_.window.addEventListener("mouseup",this.mouseup)}mousemove(h){this.move(h,Xt(this.element,h))}mouseup(h){this.mouseRotate.mouseupWindow(h),this.mousePitch&&this.mousePitch.mouseupWindow(h),this.offTemp()}touchstart(h){1!==h.targetTouches.length?this.reset():(this._startPos=this._lastPos=wl(this.element,h.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>h.preventDefault()},this._startPos))}touchmove(h){1!==h.targetTouches.length?this.reset():(this._lastPos=wl(this.element,h.targetTouches)[0],this.move({preventDefault:()=>h.preventDefault()},this._lastPos))}touchend(h){0===h.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ph={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},lc={maxWidth:100,unit:"metric"};function e1(v,h,p){const b=hp(h),C=b/h,S={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[p];this._map._requestDomTask(()=>{this._container.style.width=v*C+"px",this._container.innerHTML=`${b}&nbsp;${S}`})}function hp(v){const h=Math.pow(10,`${Math.floor(v)}`.length-1);let p=v/h;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:p>=1?1:function(b){const C=Math.pow(10,Math.ceil(-Math.log(b)/Math.LN10));return Math.round(b*C)/C}(p),h*p}const dp={version:_.version,supported:ql,setRTLTextPlugin:_.setRTLTextPlugin,getRTLTextPluginStatus:_.getRTLTextPluginStatus,Map:class extends Ur{constructor(v){if(_.LivePerformanceUtils.mark(_.PerformanceMarkers.create),null!=(v=_.extend({},Io,v)).minZoom&&null!=v.maxZoom&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=v.minPitch&&null!=v.maxPitch&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=v.minPitch&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=v.maxPitch&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&_.isSafariWithAntialiasingBug(_.window)&&(v.antialias=!1,_.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new on(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._useWebGL2=v.useWebGL2,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._optimizeForTerrain=v.optimizeForTerrain,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new fs,this._domRenderTaskQueue=new fs,this._controls=[],this._markers=[],this._popups=[],this._mapId=_.uniqueId(),this._locale=_.extend({},P0,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Fx(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new _.RequestManager(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,"string"==typeof v.container){if(this._container=_.window.document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof _.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&_.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),_.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==_.window&&(_.window.addEventListener("online",this._onWindowOnline,!1),_.window.addEventListener("resize",this._onWindowResize,!1),_.window.addEventListener("orientationchange",this._onWindowResize,!1),_.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),_.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Qy(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this._hash=v.hash&&new Ox("string"==typeof v.hash&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,_.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),v.attributionControl&&this.addControl(new mn({customAttribution:v.customAttribution})),this._logoControl=new gn,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update("style"===h.dataType),this.fire(new _.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new _.Event(`${h.dataType}dataloading`,h))})}_getMapId(){return this._mapId}addControl(v,h){if(void 0===h&&(h=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=v.onAdd(this);this._controls.push(v);const b=this._controlPositions[h];return-1!==h.indexOf("bottom")?b.insertBefore(p,b.firstChild):b.appendChild(p),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new _.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const h=this._controls.indexOf(v);return h>-1&&this._controls.splice(h,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const h=!this._moving;return h&&this.fire(new _.Event("movestart",v)).fire(new _.Event("move",v)),this.fire(new _.Event("resize",v)),h&&this.fire(new _.Event("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(_.LngLatBounds.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new _.Event("zoomstart")).fire(new _.Event("zoom")).fire(new _.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new _.Event("zoomstart")).fire(new _.Event("zoom")).fire(new _.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new _.Event("pitchstart")).fire(new _.Event("pitch")).fire(new _.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new _.Event("pitchstart")).fire(new _.Event("pitch")).fire(new _.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return"auto"===v?_.window.navigator.language:Array.isArray(v)?0===v.length?void 0:v.map(h=>"auto"===h?_.window.navigator.language:h):v}setLanguage(v){const h=this._parseLanguage(v);if(!this.style||h===this._language)return this;this._language=h,this.style._reloadSources();for(const p of this._controls)p._setLanguage&&p._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(v){return this._lazyInitEmptyStyle(),v?"string"==typeof v&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const v=this.transform,h=v.projection.name;let p;"globe"===h&&v.zoom>=_.GLOBE_ZOOM_THRESHOLD_MAX?(v.setMercatorFromTransition(),p=!0):"mercator"===h&&v.zoom<_.GLOBE_ZOOM_THRESHOLD_MAX&&(v.setProjection({name:"globe"}),p=!0),p&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,h){return this._updateProjection(v||h||{name:"mercator"})}_updateProjection(v){let h;if(h="globe"===v.name&&this.transform.zoom>=_.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),h){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(v){return this.transform.locationPoint3D(_.LngLat.convert(v))}unproject(v){return this.transform.pointLocation3D(_.pointGeometry.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,h,p){if("mouseenter"===v||"mouseover"===v){let b=!1;const C=O=>{const R=h.filter(H=>this.getLayer(H)),z=R.length?this.queryRenderedFeatures(O.point,{layers:R}):[];z.length?b||(b=!0,p.call(this,new uo(v,this,O.originalEvent,{features:z}))):b=!1},S=()=>{b=!1};return{layers:new Set(h),listener:p,delegates:{mousemove:C,mouseout:S}}}if("mouseleave"===v||"mouseout"===v){let b=!1;const C=O=>{const R=h.filter(z=>this.getLayer(z));(R.length?this.queryRenderedFeatures(O.point,{layers:R}):[]).length?b=!0:b&&(b=!1,p.call(this,new uo(v,this,O.originalEvent)))},S=O=>{b&&(b=!1,p.call(this,new uo(v,this,O.originalEvent)))};return{layers:new Set(h),listener:p,delegates:{mousemove:C,mouseout:S}}}{const b=C=>{const S=h.filter(R=>this.getLayer(R)),O=S.length?this.queryRenderedFeatures(C.point,{layers:S}):[];O.length&&(C.features=O,p.call(this,C),delete C.features)};return{layers:new Set(h),listener:p,delegates:{[v]:b}}}}on(v,h,p){if(void 0===p)return super.on(v,h);Array.isArray(h)||(h=[h]);const b=this._createDelegatedListener(v,h,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(b);for(const C in b.delegates)this.on(C,b.delegates[C]);return this}once(v,h,p){if(void 0===p)return super.once(v,h);Array.isArray(h)||(h=[h]);const b=this._createDelegatedListener(v,h,p);for(const C in b.delegates)this.once(C,b.delegates[C]);return this}off(v,h,p){if(void 0===p)return super.off(v,h);h=new Set(Array.isArray(h)?h:[h]);const b=(S,O)=>{if(S.size!==O.size)return!1;for(const R of S)if(!O.has(R))return!1;return!0},C=this._delegatedListeners?this._delegatedListeners[v]:void 0;return C&&(S=>{for(let O=0;O<S.length;O++){const R=S[O];if(R.listener===p&&b(R.layers,h)){for(const z in R.delegates)this.off(z,R.delegates[z]);return S.splice(O,1),this}}})(C),this}queryRenderedFeatures(v,h){return this.style?(void 0!==h||void 0===v||v instanceof _.pointGeometry||Array.isArray(v)||(h=v,v=void 0),this.style.queryRenderedFeatures(v=v||[[0,0],[this.transform.width,this.transform.height]],h=h||{},this.transform)):[]}querySourceFeatures(v,h){return this.style.querySourceFeatures(v,h)}setStyle(v,h){return!1!==(h=_.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},h)).diff&&h.localIdeographFontFamily===this._localIdeographFontFamily&&h.localFontFamily===this._localFontFamily&&this.style&&v?(this._diffStyle(v,h),this):(this._localIdeographFontFamily=h.localIdeographFontFamily,this._localFontFamily=h.localFontFamily,this._updateStyle(v,h))}_getUIString(v){const h=this._locale[v];if(null==h)throw new Error(`Missing UI string '${v}'`);return h}_updateStyle(v,h){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v&&(this.style=new Zo(this,h||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v):this.style.loadJSON(v)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,h){if("string"==typeof v){const p=this._requestManager.normalizeStyleURL(v),b=this._requestManager.transformRequest(p,_.ResourceType.Style);_.getJSON(b,(C,S)=>{C?this.fire(new _.ErrorEvent(C)):S&&this._updateDiff(S,h)})}else"object"==typeof v&&this._updateDiff(v,h)}_updateDiff(v,h){try{this.style.setState(v)&&this._update(!0)}catch(p){_.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(v,h)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(_.warnOnce("There is no style added to the map."),!1)}addSource(v,h){return this._lazyInitEmptyStyle(),this.style.addSource(v,h),this._update(!0)}isSourceLoaded(v){return!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){const v=this.style&&this.style._sourceCaches;for(const h in v){const p=v[h]._tiles;for(const b in p){const C=p[b];if("loaded"!==C.state&&"errored"!==C.state)return!1}}return!0}addSourceType(v,h,p){this._lazyInitEmptyStyle(),this.style.addSourceType(v,h,p)}removeSource(v){return this.style.removeSource(v),this._updateTerrain(),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,h,{pixelRatio:p=1,sdf:b=!1,stretchX:C,stretchY:S,content:O}={}){if(this._lazyInitEmptyStyle(),h instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&h instanceof _.window.ImageBitmap){const{width:R,height:z,data:H}=_.exported.getImageData(h);this.style.addImage(v,{data:new _.RGBAImage({width:R,height:z},H),pixelRatio:p,stretchX:C,stretchY:S,content:O,sdf:b,version:0})}else if(void 0===h.width||void 0===h.height)this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:R,height:z}=h,H=h;this.style.addImage(v,{data:new _.RGBAImage({width:R,height:z},new Uint8Array(H.data)),pixelRatio:p,stretchX:C,stretchY:S,content:O,sdf:b,version:0,userImage:H}),H.onAdd&&H.onAdd(this,v)}}updateImage(v,h){const p=this.style.getImage(v);if(!p)return void this.fire(new _.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const b=h instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&h instanceof _.window.ImageBitmap?_.exported.getImageData(h):h,{width:C,height:S}=b;void 0!==C&&void 0!==S?C===p.data.width&&S===p.data.height?(p.data.replace(b.data,!(h instanceof _.window.HTMLImageElement||_.window.ImageBitmap&&h instanceof _.window.ImageBitmap)),this.style.updateImage(v,p)):this.fire(new _.ErrorEvent(new Error(`The width and height of the updated image (${C}, ${S})\n                must be that same as the previous version of the image\n                (${p.data.width}, ${p.data.height})`))):this.fire(new _.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new _.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,h){_.getImage(this._requestManager.transformRequest(v,_.ResourceType.Image),(p,b)=>{h(p,b instanceof _.window.HTMLImageElement?_.exported.getImageData(b):b)})}listImages(){return this.style.listImages()}addLayer(v,h){return this._lazyInitEmptyStyle(),this.style.addLayer(v,h),this._update(!0)}moveLayer(v,h){return this.style.moveLayer(v,h),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,h,p){return this.style.setLayerZoomRange(v,h,p),this._update(!0)}setFilter(v,h,p={}){return this.style.setFilter(v,h,p),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,h,p,b={}){return this.style.setPaintProperty(v,h,p,b),this._update(!0)}getPaintProperty(v,h){return this.style.getPaintProperty(v,h)}setLayoutProperty(v,h,p,b={}){return this.style.setLayoutProperty(v,h,p,b),this._update(!0)}getLayoutProperty(v,h){return this.style.getLayoutProperty(v,h)}setLight(v,h={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,h),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(_.LngLat.convert(v),this.transform):0}setFeatureState(v,h){return this.style.setFeatureState(v,h),this._update()}removeFeatureState(v,h){return this.style.removeFeatureState(v,h),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,h=this._container.getBoundingClientRect().height||300;let p,b,C,S=this._container;for(;S&&(!b||!C);){const O=_.window.getComputedStyle(S).transform;O&&"none"!==O&&(p=O.match(/matrix.*\((.+)\)/)[1].split(", "),p[0]&&"0"!==p[0]&&"1"!==p[0]&&(b=p[0]),p[3]&&"0"!==p[3]&&"1"!==p[3]&&(C=p[3])),S=S.parentElement}this._containerWidth=b?Math.abs(v/b):v,this._containerHeight=C?Math.abs(h/C):h}_detectMissingCSS(){"rgb(250, 128, 114)"!==_.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&_.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=Qn("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const h=this._canvasContainer=Qn("div","mapboxgl-canvas-container",v);this._interactive&&h.classList.add("mapboxgl-interactive"),this._canvas=Qn("canvas","mapboxgl-canvas",h),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const p=this._controlContainer=Qn("div","mapboxgl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=Qn("div",`mapboxgl-ctrl-${C}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,h){const p=_.exported.devicePixelRatio||1;this._canvas.width=p*Math.ceil(v),this._canvas.height=p*Math.ceil(h),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${h}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const h=this._markers.indexOf(v);-1!==h&&this._markers.splice(h,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const h=this._popups.indexOf(v);-1!==h&&this._popups.splice(h,1)}_setupPainter(){const v=_.extend({},ql.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),h=this._useWebGL2&&this._canvas.getContext("webgl2",v),p=h||this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);p?(this._useWebGL2&&!h&&_.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),_.storeAuthState(p,!0),this.painter=new Tm(p,this.transform,!!h),this.on("data",b=>{"source"===b.dataType&&this.painter.setTileLoadedFlag(!0)}),_.exported$1.testSupport(p)):this.fire(new _.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new _.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new _.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let h;const p=this.painter.context.extTimerQuery,b=_.exported.now();if(this.listens("gpu-timing-frame")&&(h=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,h)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],_.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],_.window.performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const R=this.transform.zoom,z=this.transform.pitch,H=_.exported.now(),W=new _.EvaluationParameters(R,{now:H,fadeDuration:C,pitch:z,transition:this.style.getTransition()});this.style.update(W)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(b),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(b),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new _.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new _.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),h){const R=_.exported.now()-b;p.endQueryEXT(p.TIME_ELAPSED_EXT,h),setTimeout(()=>{const z=p.getQueryObjectEXT(h,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(h),this.fire(new _.Event("gpu-timing-frame",{cpuTime:R,gpuTime:z})),_.window.performance.mark("frame-gpu",{startTime:b,detail:{gpuTime:z}})},50)}if(this.listens("gpu-timing-layer")){const R=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(R);this.fire(new _.Event("gpu-timing-layer",{layerTimes:z}))},50)}if(this.listens("gpu-timing-deferred-render")){const R=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const z=this.painter.queryGpuTimeDeferredRender(R);this.fire(new _.Event("gpu-timing-deferred-render",{gpuTime:z}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(O||this._repaint)this.triggerRepaint();else{const R=!this.isMoving()&&this.loaded();if(R&&(S=this._updateAverageElevation(b,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),R&&(this.fire(new _.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const z=this._calculateSpeedIndex();this.fire(new _.Event("speedindexcompleted",{speedIndex:z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,_.LivePerformanceUtils.mark(_.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&_.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const h of this._markers)v&&!this.getRenderWorldCopies()&&(h._lngLat=h._lngLat.wrap()),h._update();for(const h of this._popups)!v||this.getRenderWorldCopies()||h._trackPointer||(h._lngLat=h._lngLat.wrap()),h._update()}_updateAverageElevation(v,h=!1){const p=b=>(this.transform.averageElevation=b,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&p(0);if((h||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const b=this.transform.averageElevation;let C=this.transform.sampleAverageElevation(),S=!1;this.transform.elevation&&(S=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=v;const O=Math.abs(b-C);if(O>1){if(this._isInitialLoad||S)return this._averageElevation.jumpTo(C),p(C);this._averageElevation.easeTo(C,v,300)}else if(O>1e-4)return this._averageElevation.jumpTo(C),p(C)}return!!this._averageElevation.isEasing(v)&&p(this._averageElevation.getValue(v))}_authenticate(){_.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===_.AUTH_ERR_MSG||401===v.status)){const h=this.painter.context.gl;_.storeAuthState(h,!1),this._logoControl instanceof gn&&this._logoControl._updateLogo(),h&&h.clear(h.DEPTH_BUFFER_BIT|h.COLOR_BUFFER_BIT|h.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new _.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),_.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),h=this.painter.getCanvasCopiesAndTimestamps();h.timeStamps.push(performance.now());const p=this.painter.context.gl,b=p.createFramebuffer();function C(S){p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,S,0);const O=new Uint8Array(p.drawingBufferWidth*p.drawingBufferHeight*4);return p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,O),O}return p.bindFramebuffer(p.FRAMEBUFFER,b),this._canvasPixelComparison(C(v),h.canvasCopies.map(C),h.timeStamps)}_canvasPixelComparison(v,h,p){let b=p[1]-p[0];const C=v.length/4;for(let S=0;S<h.length;S++){const O=h[S];let R=0;for(let z=0;z<O.length;z+=4)O[z]===v[z]&&O[z+1]===v[z+1]&&O[z+2]===v[z+2]&&O[z+3]===v[z+3]&&(R+=1);b+=(p[S+2]-p[S+1])*(1-R/C)}return b}remove(){this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==_.window&&(_.window.removeEventListener("resize",this._onWindowResize,!1),_.window.removeEventListener("orientationchange",this._onWindowResize,!1),_.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),_.window.removeEventListener("online",this._onWindowOnline,!1),_.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),_.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new _.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=_.exported.frame(h=>{const p=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,p&&this._render(h)}))}_preloadTiles(v){const h=this.style?Object.values(this.style._sourceCaches):[];return _.asyncAll(h,(p,b)=>p._preloadTiles(v,b),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){"hidden"===_.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,v&&this._update())}_setCacheLimits(v,h){_.setCacheLimits(v,h)}get version(){return _.version}},NavigationControl:class{constructor(v){this.options=_.extend({},Al,v),this._container=Qn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",h=>h.preventDefault()),this.options.showZoom&&(_.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",h=>{this._map&&this._map.zoomIn({},{originalEvent:h})}),Qn("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",h=>{this._map&&this._map.zoomOut({},{originalEvent:h})}),Qn("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(_.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",h=>{const p=this._map;p&&(this.options.visualizePitch?p.resetNorthPitch({},{originalEvent:h}):p.resetNorth({},{originalEvent:h}))}),this._compassIcon=Qn("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const h=v.getZoom(),p=h===v.getMaxZoom(),b=h===v.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=b,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",b.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const h=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=h)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new O0(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,h){const p=Qn("button",v,this._container);return p.type="button",p.addEventListener("click",h),p}_setButtonTitle(v,h){if(!this._map)return;const p=this._map._getUIString(`NavigationControl.${h}`);v.setAttribute("aria-label",p),v.firstElementChild&&v.firstElementChild.setAttribute("title",p)}},GeolocateControl:class extends _.Evented{constructor(v){super(),this.options=_.extend({geolocation:_.window.navigator.geolocation},Ph,v),_.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=kl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=Qn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const h=(p=!!this.options.geolocation)=>{this._supportsGeolocation=p,v(p)};void 0!==this._supportsGeolocation?v(this._supportsGeolocation):void 0!==_.window.navigator.permissions?_.window.navigator.permissions.query({name:"geolocation"}).then(p=>h("denied"!==p.state)).catch(()=>h()):h()}_isOutOfMapMaxBounds(v){const h=this._map.getMaxBounds(),p=v.coords;return!!h&&(p.longitude<h.getWest()||p.longitude>h.getEast()||p.latitude<h.getSouth()||p.latitude>h.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new _.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(v),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new _.Event("geolocate",v)),this._finish()}}_updateCamera(v){const h=new _.LngLat(v.coords.longitude,v.coords.latitude),p=v.coords.accuracy,b=this._map.getBearing(),C=_.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(h.toBounds(p),C,{geolocateSource:!0})}_updateMarker(v){if(v){const h=new _.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,h=_.mercatorZfromAltitude(1,v._center.lat)*v.worldSize,p=Math.ceil(2*this._accuracy*h);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(1===v.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===v.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new _.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=Qn("button","mapboxgl-ctrl-geolocate",this._container),Qn("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===v){_.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Qn("div","mapboxgl-user-location"),this._dotElement.appendChild(Qn("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Qn("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Oa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Qn("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||"ACTIVE_LOCK"!==this._watchState||h.originalEvent&&"resize"===h.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new _.Event("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:!0===v.absolute&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return _.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new _.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new _.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new _.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{_.window.addEventListener("ondeviceorientationabsolute"in _.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==_.window.DeviceMotionEvent&&"function"==typeof _.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(h=>{"granted"===h&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),_.window.removeEventListener("deviceorientation",this._onDeviceOrientation),_.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:mn,ScaleControl:class{constructor(v){this.options=_.extend({},lc,v),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=e1.bind(this)),_.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,h=this._map,p=h._containerHeight/2,b=h._containerWidth/2-v/2,C=h.unproject([b,p]),S=h.unproject([b+v,p]),O=C.distanceTo(S);if("imperial"===this.options.unit){const R=3.2808*O;R>5280?this._setScale(v,R/5280,"mile"):this._setScale(v,R,"foot")}else"nautical"===this.options.unit?this._setScale(v,O/1852,"nautical-mile"):O>=1e3?this._setScale(v,O/1e3,"kilometer"):this._setScale(v,O,"meter")}_setScale(v,h,p){const b=hp(h),C=b/h;this._map._requestDomTask(()=>{this._container.style.width=v*C+"px",this._container.innerHTML="nautical-mile"!==p?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:p}).format(b):`${b}&nbsp;nm`})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=Qn("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v){this._fullscreen=!1,v&&v.container&&(v.container instanceof _.window.HTMLElement?this._container=v.container:_.warnOnce("Full screen control 'container' must be a DOM element.")),_.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in _.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in _.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=Qn("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",_.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,_.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!_.window.document.fullscreenEnabled&&!_.window.document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=Qn("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Qn("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),_.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(_.window.document.fullscreenElement||_.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?_.window.document.exitFullscreen?_.window.document.exitFullscreen():_.window.document.webkitCancelFullScreen&&_.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends _.Evented{constructor(v){super(),this.options=_.extend(Object.create(Om),v),_.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new _.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new _.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=_.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update();const h=this._map;return h&&(h.on("move",this._update),h.off("mousemove",this._onMouseEvent),h._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(_.window.document.createTextNode(v))}setHTML(v){const h=_.window.document.createDocumentFragment(),p=_.window.document.createElement("body");let b;for(p.innerHTML=v;b=p.firstChild,b;)h.appendChild(b);return this.setDOMContent(h)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let h=this._content;if(h)for(;h.hasChildNodes();)h.firstChild&&h.removeChild(h.firstChild);else h=this._content=Qn("div","mapboxgl-popup-content",this._container||void 0);if(h.appendChild(v),this.options.closeButton){const p=this._closeButton=Qn("button","mapboxgl-popup-close-button",h);p.type="button",p.setAttribute("aria-label","Close popup"),p.setAttribute("aria-hidden","true"),p.innerHTML="&#215;",p.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let h;return this._classList.delete(v)?h=!1:(this._classList.add(v),h=!0),this._updateClassList(),h}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const h=this._map,p=this._container,b=this._pos;if(!h||!p||!b)return"bottom";const C=p.offsetWidth,S=p.offsetHeight,O=b.x<C/2,R=b.x>h.transform.width-C/2;if(b.y+v<S)return O?"top-left":R?"top-right":"top";if(b.y>h.transform.height-S){if(O)return"bottom-left";if(R)return"bottom-right"}return O?"left":R?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const h=[...this._classList];h.push("mapboxgl-popup"),this._anchor&&h.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&h.push("mapboxgl-popup-track-pointer"),v.className=h.join(" ")}_update(v){const h=this._map,p=this._content;if(!h||!this._lngLat&&!this._trackPointer||!p)return;let b=this._container;if(b||(b=this._container=Qn("div","mapboxgl-popup",h.getContainer()),this._tip=Qn("div","mapboxgl-popup-tip",b),b.appendChild(p)),this.options.maxWidth&&b.style.maxWidth!==this.options.maxWidth&&(b.style.maxWidth=this.options.maxWidth),h.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=up(this._lngLat,this._pos,h.transform)),!this._trackPointer||v){const C=this._pos=this._trackPointer&&v?v:h.project(this._lngLat),S=I0(this.options.offset),O=this._anchor=this._getAnchor(S.y),R=I0(this.options.offset,O),z=C.add(R).round();h._requestDomTask(()=>{this._container&&O&&(this._container.style.transform=`${ac[O]} translate(${z.x}px,${z.y}px)`)})}if(!this._marker&&h._showingGlobe()){const C=_.isLngLatBehindGlobe(h.transform,this._lngLat)?0:1;this._setOpacity(C)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Lm);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Oa,Style:Zo,LngLat:_.LngLat,LngLatBounds:_.LngLatBounds,Point:_.pointGeometry,MercatorCoordinate:_.MercatorCoordinate,FreeCameraOptions:Mh,Evented:_.Evented,config:_.config,prewarm:function(){zn().acquire(kn)},clearPrewarmedResources:function(){const v=In;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(kn),In=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return _.config.ACCESS_TOKEN},set accessToken(v){_.config.ACCESS_TOKEN=v},get baseApiUrl(){return _.config.API_URL},set baseApiUrl(v){_.config.API_URL=v},get workerCount(){return vn.workerCount},set workerCount(v){vn.workerCount=v},get maxParallelImageRequests(){return _.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){_.config.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){_.clearTileCache(v)},workerUrl:"",workerClass:null,setNow:_.exported.setNow,restoreNow:_.exported.restoreNow};return dp}),$r}()}},Mx=>{Mx(Mx.s=873)}]);